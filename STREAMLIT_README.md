# Streamlit 数据分析应用使用说明

## 🚀 快速开始

### 本地运行

1. 安装依赖：
```bash
pip install -r requirements_streamlit.txt
```

2. 运行应用：
```bash
streamlit run streamlit_analyze.py
```

3. 浏览器会自动打开 `http://localhost:8501`

## 📊 功能特点

### 1. 数据上传
- 支持 `.xlsx` 和 `.xls` 格式
- 必须包含两个 sheet：
  - `字数统计`：记录每个 query × model 的字数
  - `胜率`：记录每个 query × model 的评分（格式如：65.71% (23|4|8)）

### 2. 数据分析
- **基础统计**：均值、中位数、标准差、最小值、最大值
- **相关性分析**：计算字数与胜率的相关系数
- **分布分析**：按字数区间展示胜率分布
- **模型对比**：对比各模型的平均表现

### 3. 可视化图表
- 📈 **散点图 + 回归线**：展示字数与胜率的关系
- 📦 **箱线图**：按字数区间（5档）展示胜率分布
- 🔥 **相关性热力图**：变量间相关性矩阵
- 🏆 **模型对比图**：双Y轴柱状图，对比平均字数和胜率

## 🎨 设计特点

- **专业配色**：渐变紫色主题（#6366F1 到 #8B5CF6）
- **卡片式布局**：所有内容模块化，易于阅读
- **交互式图表**：基于 Plotly，支持缩放、悬停查看详情
- **响应式设计**：适配桌面和移动设备
- **优雅动画**：入场动画和悬停效果

## 📝 数据格式要求

### 字数统计 sheet
| 编号 | ChatGPT | Deepseek | Kimi | ... |
|------|---------|----------|------|-----|
| Q001 | 1500    | 1200     | 1800 | ... |
| Q002 | 1300    | 1100     | 1600 | ... |

### 胜率 sheet
| 编号 | ChatGPT        | Deepseek       | Kimi           | ... |
|------|----------------|----------------|----------------|-----|
| Q001 | 65.71% (23|4|8)| 52.00% (18|5|12)| 71.43% (25|3|7)| ... |
| Q002 | 60.00% (21|6|8)| 48.57% (17|7|11)| 68.57% (24|4|7)| ... |

## 🔧 自定义配置

### 修改主题色
在 `streamlit_analyze.py` 中修改 CSS 变量：
```css
:root {
    --primary-gradient: linear-gradient(135deg, #YOUR_COLOR_1 0%, #YOUR_COLOR_2 100%);
    --primary-color: #YOUR_COLOR;
}
```

### 调整图表样式
在各个 `create_*_plot()` 函数中修改 Plotly 配置

## 📦 部署到 Streamlit Cloud

1. 将代码推送到 GitHub
2. 访问 [streamlit.io/cloud](https://streamlit.io/cloud)
3. 连接 GitHub 仓库
4. 选择 `streamlit_analyze.py` 作为主文件
5. 点击 Deploy

## 🐛 常见问题

### 1. 上传文件后报错
- 检查 Excel 文件是否包含"字数统计"和"胜率"两个 sheet
- 确保 sheet 名称完全一致（包括空格）
- 确保数据格式正确

### 2. 图表显示异常
- 确保有足够的有效数据（至少10个样本）
- 检查数据是否包含空值或异常值

### 3. 样式不生效
- 确保使用了 `unsafe_allow_html=True` 参数
- 检查浏览器控制台是否有CSS错误

## 📄 许可证

MIT License


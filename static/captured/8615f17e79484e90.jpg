"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["64041"],{951382:function(e,t,i){i.d(t,{default:function(){return n}});function n(){return new DOMParser().parseFromString('<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n',"image/svg+xml").firstChild}},612871:function(e,t,i){i.d(t,{default:function(){return n}});function n(){return new DOMParser().parseFromString('<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',"image/svg+xml").firstChild}},839715:function(e,t,i){i.d(t,{default:function(){return s}});var n=i(461817),s=function(e){(0,n.inherits)(i,e);var t=(0,n.createSuper)(i);function i(){var e;(0,n.classCallCheck)(this,i);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,n.defineProperty)((0,n.assertThisInitialized)(e),"_onMouseenter",function(t){e.emit("icon_mouseenter",{pluginName:e.pluginName})}),(0,n.defineProperty)((0,n.assertThisInitialized)(e),"_onMouseLeave",function(t){e.emit("icon_mouseleave",{pluginName:e.pluginName})}),e}return(0,n.createClass)(i,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave)}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),i}(i(3560).default)},81942:function(e,t,i){i.d(t,{xgIconTips:function(){return n}});function n(e,t,i){try{return' <div class="xg-tips '.concat(i?"hide":" ",'" lang-key="').concat(e.i18nKeys[t],'">\n    ').concat(e.i18n[t],"\n    </div>")}catch(e){return'<div class="xg-tips hide"></div>'}}},741906:function(e,t,i){i.d(t,{default:function(){return r}});var n=i(461817),s=i(529525),r=function(e){(0,n.inherits)(i,e);var t=(0,n.createSuper)(i);function i(){return(0,n.classCallCheck)(this,i),t.apply(this,arguments)}return(0,n.createClass)(i,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(s.ERROR,function(t){e.onError(t)})}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.player,i=e.errorType,n=t.errorNote?this.i18n[t.errorNote]:"";if(!n)switch(i){case"decoder":n=this.i18n.MEDIA_ERR_DECODE;break;case"network":n=this.i18n.MEDIA_ERR_NETWORK;break;default:n=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=n,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <div class="xgplayer-errornote">\n       <span class="xgplayer-error-text"></span>\n       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>\n      </div>\n    </xg-error>'}}],[{key:"pluginName",get:function(){return"error"}}]),i}(i(3560).default)},716840:function(e,t,i){i.d(t,{default:function(){return l}});var n=i(461817),s=i(275971),r=i(522912);i(360556);var o=i(530645),a={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},u=["videoClick","videoDbClick"],l=function(e){(0,n.inherits)(i,e);var t=(0,n.createSuper)(i);function i(){var e;(0,n.classCallCheck)(this,i);for(var s=arguments.length,r=Array(s),a=0;a<s;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),(0,n.defineProperty)((0,n.assertThisInitialized)(e),"onMouseMove",function(t){var i=(0,n.assertThisInitialized)(e),s=i.player,r=i.playerConfig;!s.isActive&&(s.focus({autoHide:!r.closeDelayBlur}),r.closeFocusVideoFocus||s.media.focus())}),(0,n.defineProperty)((0,n.assertThisInitialized)(e),"onMouseEnter",function(t){var i=(0,n.assertThisInitialized)(e),s=i.playerConfig,r=i.player;s.closeFocusVideoFocus||r.media.focus(),s.closeDelayBlur?r.focus({autoHide:!1}):r.focus()}),(0,n.defineProperty)((0,n.assertThisInitialized)(e),"onMouseLeave",function(t){var i=e.playerConfig,n=i.closePlayerBlur,s=i.leavePlayerTime,r=i.closeDelayBlur;n||r||(s?e.player.focus({autoHide:!0,delay:s}):e.player.blur())}),(0,n.defineProperty)((0,n.assertThisInitialized)(e),"onVideoClick",function(t){var i=(0,n.assertThisInitialized)(e),s=i.player,r=i.playerConfig;(!t.target||!r.closeVideoClick)&&(t.target===s.root||t.target===s.media||t.target===s.innerContainer||t.target===s.media.__canvas)&&(t.preventDefault(),r.closeVideoStopPropagation||t.stopPropagation(),e._clickCount++,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),e.clickTimer=setTimeout(function(){e._clickCount&&(e._clickCount--,(0,o.runHooks)((0,n.assertThisInitialized)(e),u[0],function(t,i){e.switchPlayPause(i.e)},{e:t,paused:s.paused}),clearTimeout(e.clickTimer),e.clickTimer=null)},300))}),(0,n.defineProperty)((0,n.assertThisInitialized)(e),"onVideoDblClick",function(t){var i=(0,n.assertThisInitialized)(e),s=i.player,r=i.playerConfig;if(!r.closeVideoDblclick&&t.target&&(t.target===s.media||t.target===s.media.__canvas)){if(!r.closeVideoClick&&e._clickCount<2){e._clickCount=0;return}e._clickCount=0,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),t.preventDefault(),t.stopPropagation(),(0,o.runHooks)((0,n.assertThisInitialized)(e),u[1],function(t,i){e.emitUserAction(i.e,"switch_fullscreen",{props:"fullscreen",from:s.fullscreen,to:!s.fullscreen}),s.fullscreen?s.exitFullscreen():s.getFullscreen()},{e:t,fullscreen:s.fullscreen})}}),e}return(0,n.createClass)(i,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,u.map(function(t){e.__hooks[t]=null}),"mobile"!==this.playerConfig.isMobileSimulateMode&&("mobile"!==s.default.device||s.default.os.isIpad)&&this.initEvents()}},{key:"initEvents",value:function(){var e=this,t=this.player,i=t.video,n=t.root,s=this.playerConfig.enableContextmenu;n&&n.addEventListener("click",this.onVideoClick,!1),n&&n.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(a).map(function(t){n.addEventListener(t,e[a[t]],!1)}),s&&i&&i.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var t=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:t.paused,to:!t.paused}),t.ended?t.duration!==1/0&&t.duration>0&&t.replay():t.paused?t.play():t.pause()}},{key:"onContextmenu",value:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,t=this.player,i=t.video,n=t.root;this.clickTimer&&clearTimeout(this.clickTimer),n.removeEventListener("click",this.onVideoClick,!1),n.removeEventListener("dblclick",this.onVideoDblClick,!1),i.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(a).map(function(t){n.removeEventListener(t,e[a[t]],!1)})}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),i}(r.default)},806767:function(e,t,i){i.d(t,{default:function(){return c}});var n=i(461817),s=i(529525),r=i(3560),o=i(81942),a=i(839715),u=i(612871),l=i(951382),c=function(e){(0,n.inherits)(i,e);var t=(0,n.createSuper)(i);function i(){return(0,n.classCallCheck)(this,i),t.apply(this,arguments)}return(0,n.createClass)(i,[{key:"afterCreate",value:function(){var e=this;(0,n.get)((0,n.getPrototypeOf)(i.prototype),"afterCreate",this).call(this);var t=this.player;!this.config.disable&&(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on([s.PAUSE,s.ERROR,s.EMPTIED],function(){e.animate(t.paused)}),this.on(s.PLAY,function(){e.animate(t.paused)}),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:u.default,class:"xg-icon-play"},pause:{icon:l.default,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t.paused,to:!t.paused}),t.ended?t.replay():t.paused?(t.play(),this.animate(!1)):(t.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){if(this.player){var t=this.i18nKeys,i=this.find(".xg-tips");e?(this.setAttr("data-state","pause"),i&&this.changeLangTextKey(i,t.PLAY_TIPS)):(this.setAttr("data-state","play"),i&&this.changeLangTextKey(i,t.PAUSE_TIPS))}}},{key:"destroy",value:function(){(0,n.get)((0,n.getPrototypeOf)(i.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    </div>\n    '.concat((0,o.xgIconTips)(this,"PLAY_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:r.POSITIONS.CONTROLS_LEFT,index:0,disable:!1}}}]),i}(a.default)},656568:function(e,t,i){i.d(t,{default:function(){return d}});var n=i(461817),s=i(803998),r=i(275971),o=i(529525),a=i(3560);i(360556);var u=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],l=function(){function e(t){(0,n.classCallCheck)(this,e),this.fragments=t.fragments||[],0===this.fragments.length&&this.fragments.push({percent:1}),this._callBack=t.actionCallback,this.fragConfig={fragFocusClass:t.fragFocusClass||"inner-focus-point",fragAutoFocus:!!t.fragAutoFocus,fragClass:t.fragClass||""},this.style=t.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}return(0,n.createClass)(e,[{key:"updateDuration",value:function(e){var t=this;this.duration=e;var i=0,n=this.fragments;this.fragments=n.map(function(e){return e.start=parseInt(i,10),e.end=parseInt(i+e.percent*t.duration,10),e.duration=parseInt(e.percent*t.duration,10),i+=e.percent*t.duration,e})}},{key:"updateProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"played",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},i=this.progressList,n=this.fragments;if(!(i.length<1)){var s=t.newIndex,r=t.curIndex,o=t.millisecond;s!==r&&i.map(function(t,i){i<s?t[e].style.width="100%":i>s&&(t[e].style.width=0)});var a=n[s],u=0===o?0:(o-a.start)/a.duration;i[s][e].style.width=u<0?0:"".concat(100*u,"%")}}},{key:"updateFocus",value:function(e){if(this.fragConfig.fragAutoFocus&&!(this.fragments.length<2)){if(!e){if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var t={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(t),this.focusIndex=-1}return}var i=this.findIndex(1e3*e.currentTime,this.focusIndex);if(i>=0&&i!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(i);var n={index:i,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=i,this._callBack&&this._callBack(n)}}}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(1e3*t,10)!==this.duration){if(!t&&0!==t)return;this.updateDuration(parseInt(1e3*t,10))}var i=this.playedIndex,n=this.cachedIndex;if("Undefined"!==s.default.typeOf(e.played)){var r=this.findIndex(1e3*e.played,i);if(r<0)return;this.updateProgress("played",{newIndex:r,curIndex:i,millisecond:parseInt(1e3*e.played,10)}),this.playedIndex=r}if("Undefined"!==s.default.typeOf(e.cached)){var o=this.findIndex(1e3*e.cached,n);if(o<0)return;this.updateProgress("cached",{newIndex:o,curIndex:n,millisecond:parseInt(1e3*e.cached,10)}),this.cachedIndex=o}}},{key:"findIndex",value:function(e,t){var i=this.fragments;if(!i||0===i.length)return -1;if(1===i.length)return 0;if(t>-1&&t<i.length&&e>i[t].start&&e<i[t].end)return t;if(e>i[i.length-1].start)return i.length-1;for(var n=0;n<i.length;n++)if(e>i[n].start&&e<=i[n].end){t=n;break}return t}},{key:"findHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)if(s.default.hasClass(e[t],this.fragConfig.fragFocusClass))return{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"findFragment",value:function(e){var t=this.root.children;return e<0||e>=t.length?null:{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)s.default.removeClass(e[t],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(e){var t=this.root.children;if(e<t.length)return s.default.addClass(t[e],this.fragConfig.fragFocusClass),{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(e){var t=this;if(Object.keys(this.fragConfig).forEach(function(i){void 0!==e[i]&&(t.fragConfig[i]=e[i])}),e.fragments){if(this.fragments=0===e.fragments.length?[{percent:1}]:e.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var i=this.root.children;i.length>0;)this.root.removeChild(i[0]);this.render()}}},{key:"render",value:function(){var e=this,t=this.style.progressColor;if(this.root||(this.root=s.default.createDom("xg-inners","",{},"progress-list")),this.fragments){var i=this.fragConfig,n=i.fragClass,r=i.fragFocusClass;this.progressList=this.fragments.map(function(i){var o=s.default.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(i.percent):"flex: ".concat(i.percent)},"".concat(i.isFocus?r:""," xgplayer-progress-inner ").concat(n));return e.root.appendChild(o),u.forEach(function(t){o.appendChild(s.default.createDom(t.tag,"",{style:t.styleKey?"background: ".concat(e.style[t.styleKey],"; width:0;"):"width:0;"},t.className))}),{cached:o.children[0],played:o.children[1]}})}return this.root}}]),e}(),c={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},d=function(e){(0,n.inherits)(i,e);var t=(0,n.createSuper)(i);function i(e){var r;return(0,n.classCallCheck)(this,i),r=t.call(this,e),(0,n.defineProperty)((0,n.assertThisInitialized)(r),"onMoveOnly",function(e,t){var i=(0,n.assertThisInitialized)(r),o=i.pos,a=i.config,u=i.player,l=t;if(e){s.default.event(e);var c=s.default.getEventPos(e,u.zoom),d=90===u.rotateDeg?c.clientY:c.clientX;if(o.moving&&Math.abs(o.x-d)<a.miniMoveStep)return;o.moving=!0,o.x=d,l=r.computeTime(e,d)}r.triggerCallbacks("dragmove",l,e),r._updateInnerFocus(l)}),(0,n.defineProperty)((0,n.assertThisInitialized)(r),"onBodyClick",function(e){r.pos.isLocked&&(r.pos.isLocked=!1,e.preventDefault(),e.stopPropagation())}),(0,n.defineProperty)((0,n.assertThisInitialized)(r),"_mouseDownHandler",function(e,t){r._state.time=t.currentTime,r.updateWidth(t.currentTime,t.percent,0),r._updateInnerFocus(t)}),(0,n.defineProperty)((0,n.assertThisInitialized)(r),"_mouseUpHandler",function(e,t){(0,n.assertThisInitialized)(r).pos.moving&&r.updateWidth(t.currentTime,t.percent,2)}),(0,n.defineProperty)((0,n.assertThisInitialized)(r),"_mouseMoveHandler",function(e,t){var i=(0,n.assertThisInitialized)(r),s=i._state,o=i.pos,a=i.config,u=i.player;s.time<t.currentTime?t.forward=!0:t.forward=!1,s.time=t.currentTime,o.isDown&&!o.moving&&(o.moving=!0,a.isPauseMoving&&u.pause(),r.triggerCallbacks("dragstart",t,e),r.emitUserAction("drag","dragstart",t)),r.updateWidth(t.currentTime,t.percent,1),r.triggerCallbacks("dragmove",t,e),r._updateInnerFocus(t)}),(0,n.defineProperty)((0,n.assertThisInitialized)(r),"onMouseDown",function(e){var t=(0,n.assertThisInitialized)(r),i=t._state,o=t.player,a=t.pos,u=t.config,l=t.playerConfig,c=s.default.getEventPos(e,o.zoom),d=90===o.rotateDeg?c.clientY:c.clientX;if(!o.isMini&&!u.closeMoveSeek&&(l.allowSeekAfterEnded||!o.ended)){if(!o.duration&&!o.isPlaying){o.play();return}e.stopPropagation(),r.focus(),s.default.checkIsFunction(l.disableSwipeHandler)&&l.disableSwipeHandler(),s.default.checkIsFunction(u.onMoveStart)&&u.onMoveStart(),s.default.event(e),a.x=d,a.isDown=!0,a.moving=!1,i.prePlayTime=o.currentTime,o.focus({autoHide:!1}),r.isProgressMoving=!0,s.default.addClass(r.progressBtn,"active");var h=r.computeTime(e,d);return h.prePlayTime=i.prePlayTime,r._mouseDownHandlerHook(e,h),"touchstart"===e.type?(r.root.addEventListener("touchmove",r.onMouseMove),r.root.addEventListener("touchend",r.onMouseUp)):(r.unbind("mousemove",r.onMoveOnly),document.addEventListener("mousemove",r.onMouseMove,!1),document.addEventListener("mouseup",r.onMouseUp,!1)),!0}}),(0,n.defineProperty)((0,n.assertThisInitialized)(r),"onMouseUp",function(e){var t=(0,n.assertThisInitialized)(r),i=t.player,o=t.config,a=t.pos,u=t.playerConfig,l=t._state;e.stopPropagation(),e.preventDefault(),s.default.checkIsFunction(u.enableSwipeHandler)&&u.enableSwipeHandler(),s.default.checkIsFunction(o.onMoveEnd)&&o.onMoveEnd(),s.default.event(e),s.default.removeClass(r.progressBtn,"active");var c=r.computeTime(e,a.x);c.prePlayTime=l.prePlayTime,a.moving?(r.triggerCallbacks("dragend",c,e),r.emitUserAction("drag","dragend",c)):(r.triggerCallbacks("click",c,e),r.emitUserAction("click","click",c)),r._mouseUpHandlerHook(e,c),a.moving=!1,a.isDown=!1,a.x=0,a.y=0,a.isLocked=!0,l.prePlayTime=0,l.time=0,"touchend"===e.type?(r.root.removeEventListener("touchmove",r.onMouseMove),r.root.removeEventListener("touchend",r.onMouseUp),r.blur()):(document.removeEventListener("mousemove",r.onMouseMove,!1),document.removeEventListener("mouseup",r.onMouseUp,!1),a.isEnter?"mobile"!==u.isMobileSimulateMode&&r.bind("mousemove",r.onMoveOnly):r.onMouseLeave(e)),s.default.setTimeout((0,n.assertThisInitialized)(r),function(){r.resetSeekState()},10),i.focus()}),(0,n.defineProperty)((0,n.assertThisInitialized)(r),"onMouseMove",function(e){var t=(0,n.assertThisInitialized)(r),i=t._state,o=t.pos,a=t.player,u=t.config;s.default.checkTouchSupport()&&e.preventDefault(),s.default.event(e);var l=s.default.getEventPos(e,a.zoom),c=90===a.rotateDeg?l.clientY:l.clientX,d=Math.abs(o.x-c);if((!o.moving||!(d<u.miniMoveStep))&&(o.moving||!(d<u.miniStartStep))){o.x=c;var h=r.computeTime(e,c);h.prePlayTime=i.prePlayTime,r._mouseMoveHandlerHook(e,h)}}),(0,n.defineProperty)((0,n.assertThisInitialized)(r),"onMouseOut",function(e){r.triggerCallbacks("mouseout",null,e)}),(0,n.defineProperty)((0,n.assertThisInitialized)(r),"onMouseOver",function(e){r.triggerCallbacks("mouseover",null,e)}),(0,n.defineProperty)((0,n.assertThisInitialized)(r),"onMouseEnter",function(e){var t=(0,n.assertThisInitialized)(r),i=t.player,o=t.pos;if(!o.isDown&&!o.isEnter&&!i.isMini&&(i.config.allowSeekAfterEnded||!i.ended)){o.isEnter=!0,r.bind("mousemove",r.onMoveOnly),r.bind("mouseleave",r.onMouseLeave),s.default.event(e);var a=s.default.getEventPos(e,i.zoom),u=90===i.rotateDeg?a.clientY:a.clientX,l=r.computeTime(e,u);r.triggerCallbacks("mouseenter",l,e),r.focus()}}),(0,n.defineProperty)((0,n.assertThisInitialized)(r),"onMouseLeave",function(e){r.triggerCallbacks("mouseleave",null,e),r.unlock(),r._updateInnerFocus(null)}),(0,n.defineProperty)((0,n.assertThisInitialized)(r),"onVideoResize",function(){var e=r.pos,t=e.x,i=e.isDown;if(e.isEnter&&!i){var n=r.computeTime(null,t);r.onMoveOnly(null,n)}}),r.useable=!1,r.isProgressMoving=!1,r.__dragCallBacks=[],r._state={now:-1,direc:0,time:0,prePlayTime:-1},r._disableBlur=!1,r}return(0,n.createClass)(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this.useable=e}},{key:"show",value:function(){this.root&&(this.root.style.display="flex")}},{key:"_initInner",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t&&0!==t.length||(t=[{percent:1}]);var s=(0,n.objectSpread2)((0,n.objectSpread2)({fragments:t},i),{},{actionCallback:function(t){e.emitUserAction("fragment_focus","fragment_focus",t)}});this.innerList?this.innerList.reset(s):(this.innerList=new l(s),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(t){e[t]=e.innerList[t].bind(e.innerList)}))}},{key:"_updateInnerFocus",value:function(e){this.innerList&&this.innerList.updateFocus(e)}},{key:"afterCreate",value:function(){var e=this;if(!this.config.disable&&!this.playerConfig.isLive){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1,isLocked:!1},this.outer=this.find("xg-outer");var t=this.config,i=t.fragFocusClass,n=t.fragAutoFocus,s=t.fragClass;this._initInner(this.config.fragments,{fragFocusClass:i,fragAutoFocus:n,fragClass:s,style:this.playerConfig.commonStyle||{}}),"mobile"===r.default.device&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(o.DURATION_CHANGE,function(){e.onMouseLeave()}),this.on(o.TIME_UPDATE,function(){e.onTimeupdate()}),this.on(o.SEEKED,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on(o.PROGRESS,function(){e.onCacheUpdate()}),this.on(o.ENDED,function(){e.onCacheUpdate(!0),e.onTimeupdate(!0),e._state.now=0}),this.on(o.EMPTIED,function(){e.onReset()}),this.on(o.VIDEO_RESIZE,function(){e.onVideoResize()}),this.bindDomEvents(),this.initCustomStyle()}}},{key:"setConfig",value:function(e){var t=this,i=null;Object.keys(e).forEach(function(n){t.config[n]=e[n],"fragments"===n&&(i=e[n])}),i&&this._initInner(i,e)}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle.sliderBtnStyle,t=this.progressBtn;e&&("string"==typeof e?t.style.boxShadow=e:"object"===(0,n.typeof)(e)&&Object.keys(e).map(function(i){t.style[i]=e[i]}))}},{key:"triggerCallbacks",value:function(e,t,i){this.__dragCallBacks.length>0&&this.__dragCallBacks.map(function(n){if(n&&n.handler&&n.type===e)try{n.handler(t,i)}catch(e){}})}},{key:"addCallBack",value:function(e,t){t&&"function"==typeof t&&this.__dragCallBacks.push({type:e,handler:t})}},{key:"removeCallBack",value:function(e,t){var i=this.__dragCallBacks,n=-1;i.map(function(i,s){i&&i.type===e&&i.handler===t&&(n=s)}),n>-1&&i.splice(n,1)}},{key:"unlock",value:function(){var e=this.player,t=this.pos;if(t.isEnter=!1,!e.isMini){if(this.unbind("mousemove",this.onMoveOnly),t.isDown){this.unbind("mouseleave",this.onMouseLeave);return}this.blur()}}},{key:"bindDomEvents",value:function(){var e=this.player,t=e.controls,i=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),("touch"===this.domEventType||"compatible"===this.domEventType)&&(this.root.addEventListener("touchstart",this.onMouseDown),t&&(t.root&&t.root.addEventListener("touchmove",s.default.stopPropagation),t.center&&t.center.addEventListener("touchend",s.default.stopPropagation))),("mouse"===this.domEventType||"compatible"===this.domEventType)&&(this.bind("mousedown",this.onMouseDown),"mobile"!==i.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut),this.player.root.addEventListener("click",this.onBodyClick,!0))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),s.default.addClass(this.root,"active")}},{key:"blur",value:function(){!this._disableBlur&&(this.player.controls.recoverAutoHide(),s.default.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,t,i){var n=this.config,s=this.player;if(!n.isCloseClickSeek||0!==i){var r=e>=s.duration?s.duration-n.endedDiff:Number(e).toFixed(1);this.updatePercent(t),this.updateTime(e),(1!==i||n.isDragingSeek&&"audio"!==s.config.mediaType)&&(this._state.now=r,this._state.direc=r>s.currentTime?0:1,s.seek(r))}}},{key:"computeTime",value:function(e,t){var i,n,s=this.player,r=this.root.getBoundingClientRect(),o=r.width,a=r.height,u=r.top,l=r.left;90===s.rotateDeg?(i=a,n=u):(i=o,n=l);var c=t-n,d=(c=c>i?i:c<0?0:c)/i,h=parseInt((d=d<0?0:d>1?1:d)*this.duration*1e3,10)/1e3;return{percent:d,currentTime:h,offset:c,width:i,left:n,e}}},{key:"updateTime",value:function(e){var t=this.player,i=this.duration;e>i?e=i:e<0&&(e=0);var n=t.plugins.time;n&&n.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,t){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(100*e,"%"),this.innerList.update({played:e*this.duration},this.duration);var i=this.player.plugins.miniprogress;i&&i.update({played:e*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(e){var t=this.player,i=this._state,n=this.duration;if(!t.isSeeking&&!this.isProgressMoving){if(i.now>-1){var r=parseInt(1e3*i.now,10)-parseInt(1e3*t.currentTime,10);if(0===i.direc&&r>300||1===i.direc&&r>-300){i.now=-1;return}i.now=-1}var o=this.timeOffset+t.currentTime;o=s.default.adjustTimeByDuration(o,n,e),this.innerList.update({played:o},n),this.progressBtn.style.left="".concat(o/n*100,"%");var a=this.player.plugins.miniprogress;a&&a.update({played:o},n)}}},{key:"onCacheUpdate",value:function(e){var t=this.player,i=this.duration;if(t){var n=t.bufferedPoint.end;n=s.default.adjustTimeByDuration(n,i,e),this.innerList.update({cached:n},i);var r=this.player.plugins.miniprogress;r&&r.update({cached:n},i)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,t=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var i=this.domEventType;("touch"===i||"compatible"===i)&&(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),t&&(t.root&&t.root.removeEventListener("touchmove",s.default.stopPropagation),t.center&&t.center.removeEventListener("touchend",s.default.stopPropagation))),("mouse"===i||"compatible"===i)&&(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!0))}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var e=this.player.controls?this.player.controls.config.mode:"";return'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===e?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer">\n        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    ')}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:a.POSITIONS.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:c.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return c}}]),i}(a.default)},723306:function(e,t,i){i.d(t,{default:function(){return h}});var n=i(461817),s=i(803998),r=i(529525),o=i(3560),a=i(638882),u=i(612871),l=i(951382),c={};function d(e){if(e){window.clearTimeout(e);return}Object.keys(c).map(function(e){window.clearTimeout(c[e].id),delete c[e]})}var h=function(e){(0,n.inherits)(i,e);var t=(0,n.createSuper)(i);function i(e){var r;return(0,n.classCallCheck)(this,i),r=t.call(this,e),(0,n.defineProperty)((0,n.assertThisInitialized)(r),"onPlayerReset",function(){r.autoPlayStart=!1;var e="auto"===r.config.mode?"auto-hide":"hide";r.setAttr("data-state","play"),s.default.removeClass(r.root,e),r.show()}),(0,n.defineProperty)((0,n.assertThisInitialized)(r),"onAutoplayStart",function(){if(!r.autoPlayStart){var e="auto"===r.config.mode?"auto-hide":"hide";s.default.addClass(r.root,e),r.autoPlayStart=!0,r.onPlayPause("play")}}),r.autoPlayStart=!1,r}return(0,n.createClass)(i,[{key:"afterCreate",value:function(){var e=this,t=this.player,i=this.playerConfig;this.initIcons(),this.once(r.READY,function(){i&&(i.lang&&"en"===i.lang?s.default.addClass(t.root,"lang-is-en"):"jp"===i.lang&&s.default.addClass(t.root,"lang-is-jp"))}),this.on(r.AUTOPLAY_STARTED,this.onAutoplayStart),i.autoplay||this.show(),this.on(r.AUTOPLAY_PREVENTED,function(){var t="auto"===e.config.mode?"auto-hide":"hide";e.setAttr("data-state","play"),s.default.removeClass(e.root,t),e.show()}),this.on(r.PLAY,function(){e.onPlayPause("play")}),this.on(r.PAUSE,function(){e.onPlayPause("pause")}),this.on(r.RESET,function(){e.onPlayerReset()}),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(t){t.cancelable&&t.preventDefault(),t.stopPropagation();var i=e.player.paused;e.emitUserAction(t,"switch_play_pause",{props:"paused",from:i,to:!i})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:u.default,class:"xg-icon-play"},startPause:{icon:l.default,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){s.default.addClass(this.root,"hide")}},{key:"show",value:function(){s.default.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){s.default.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){s.default.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var t=this;this._animateId=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{start:null,end:null};return c[e]&&window.clearTimeout(c[e].id),c[e]={},i.start&&i.start(),c[e].id=window.setTimeout(function(){i.end&&i.end(),window.clearTimeout(c[e].id),delete c[e]},t),c[e].id}("pauseplay",400,{start:function(){s.default.addClass(t.root,"interact"),t.show(),t.switchStatus(!0)},end:function(){s.default.removeClass(t.root,"interact"),e||t.hide(),t._animateId=null}})}},{key:"endAnimate",value:function(){s.default.removeClass(this.root,"interact"),d(this._animateId),this._animateId=null}},{key:"switchPausePlay",value:function(e){var t=this.player;e.cancelable&&e.preventDefault(),e.stopPropagation(),!(t.state<a.STATES.READY)&&(this.player.paused||t.state!==a.STATES.RUNNING?t.play():t.pause())}},{key:"onPlayPause",value:function(e){var t=this.config,i=this.player;if(i&&!(i.state<a.STATES.RUNNING)&&this.autoPlayStart){if("show"===t.mode){this.switchStatus(),this.show();return}if("auto"===t.mode){this.switchStatus();return}if(t.isShowPause&&i.paused&&!i.ended||t.isShowEnd&&i.ended){this.switchStatus(),this.show(),this.endAnimate();return}if(t.disableAnimate){this.switchStatus(),this.hide();return}if("play"===e)this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||i.ended)return;this.animate()}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),d(this._animateId)}},{key:"render",value:function(){var e=this.playerConfig.autoplay?"auto"===this.config.mode?"auto-hide":"hide":"";return'\n    <xg-start class="xgplayer-start '.concat(e,'">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>')}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),i}(o.default)},177786:function(e,t,i){i.d(t,{default:function(){return a}});var n=i(461817),s=i(803998),r=i(529525),o=i(3560),a=function(e){(0,n.inherits)(i,e);var t=(0,n.createSuper)(i);function i(e){var s;return(0,n.classCallCheck)(this,i),(s=t.call(this,e)).isActiving=!1,s}return(0,n.createClass)(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"currentTime",get:function(){return this.player.currentTime||0}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,t=this.player.controls.config.mode;this.mode="flex"===t?"flex":"normal",!this.config.disable&&("flex"===this.mode&&(this.createCenterTime(),this.root.style.display="none"),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(r.DURATION_CHANGE,function(){e.onTimeUpdate()}),this.on(r.TIME_UPDATE,function(){e.onTimeUpdate()}),this.on(r.ENDED,function(){e.onTimeUpdate(!0)}),this.on(r.EMPTIED,function(){e.onReset()}))}},{key:"show",value:function(){if("flex"===this.mode){this.centerCurDom&&(this.centerCurDom.style.display="block"),this.centerDurDom&&(this.centerDurDom.style.display="block");return}this.root.style.display="block"}},{key:"hide",value:function(){if("flex"===this.mode){this.centerCurDom&&(this.centerCurDom.style.display="none"),this.centerDurDom&&(this.centerDurDom.style.display="none");return}this.root.style.display="none"}},{key:"onTimeUpdate",value:function(e){var t=this.player,i=this.config,n=this.duration;if(!i.disable&&!this.isActiving&&t.hasStart){var r=t.currentTime+this.timeOffset;r=s.default.adjustTimeByDuration(r,n,e),"flex"===this.mode?(this.centerCurDom.innerHTML=s.default.format(r),n!==1/0&&n>0&&(this.centerDurDom.innerHTML=s.default.format(n))):(this.timeDom.innerHTML=s.default.format(r),n!==1/0&&n>0&&(this.durationDom.innerHTML=s.default.format(n)))}}},{key:"onReset",value:function(){"flex"===this.mode?(this.centerCurDom.innerHTML=s.default.format(0),this.centerDurDom.innerHTML=s.default.format(0)):(this.timeDom.innerHTML=s.default.format(0),this.durationDom.innerHTML=s.default.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(e.controls&&e.controls.center){var t=e.controls.center;this.centerCurDom=s.default.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-left"),this.centerDurDom=s.default.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-right"),t.children.length>0?t.insertBefore(this.centerCurDom,t.children[0]):t.appendChild(this.centerCurDom),t.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;if(this.duration===1/0||this.playerConfig.isLive?(s.default.hide(this.durationDom),s.default.hide(this.timeDom),s.default.hide(this.find(".time-separator")),s.default.show(this.find(".time-live-tag"))):s.default.hide(this.find(".time-live-tag")),e.hide){this.hide();return}this.show()}},{key:"changeLiveState",value:function(e){e?(s.default.hide(this.durationDom),s.default.hide(this.timeDom),s.default.hide(this.find(".time-separator")),s.default.show(this.find(".time-live-tag"))):(s.default.hide(this.find(".time-live-tag")),s.default.show(this.find(".time-separator")),s.default.show(this.durationDom),s.default.show(this.timeDom))}},{key:"updateTime",value:function(e){if(this.isActiving=!0,(e||0===e)&&!(e>this.duration)){if("flex"===this.mode){this.centerCurDom.innerHTML=s.default.format(e);return}this.timeDom.innerHTML=s.default.format(e)}}},{key:"resetActive",value:function(){var e=this,t=this.player,i=function(){e.isActiving=!1};this.off(r.SEEKED,i),t.isSeeking?this.once(r.SEEKED,i):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">'.concat(this.i18n.LIVE_TIP,"</span>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:o.POSITIONS.CONTROLS_LEFT,index:2,disable:!1}}}]),i}(o.default)}}]);
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["35006"],{888130:function(e,t,n){n.d(t,{getUserId:function(){return s},getUserInfo:function(){return i},useUserIdStr:function(){return l},useUserInfo:function(){return u},useUserNickName:function(){return a},useUserProfile:function(){return d}});var o=n(453157),r=n(797840);let i=()=>r.useFlowAccountStore.getState().userInfo,u=()=>(0,r.useFlowAccountStore)(e=>e.userInfo,o.shallow),s=()=>{var e;return null===(e=i())||void 0===e?void 0:e.user_id_str},d=()=>(0,r.useFlowAccountStore)(e=>e.userProfile,o.shallow),a=()=>(0,r.useFlowAccountStore)(e=>{var t;return null===(t=e.userInfo)||void 0===t?void 0:t.name}),l=()=>(0,r.useFlowAccountStore)(e=>{var t;return null===(t=e.userInfo)||void 0===t?void 0:t.user_id_str})},821130:function(e,t,n){n.r(t),n.d(t,{UnreadCountFeedListItemToolButtonPlugin:function(){return r}});var o=n(448209);class r{constructor(){var e,t,n;e="Content",t=o.UnreadCountBadge,(e="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string"))?n:n+"")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}}},551359:function(e,t,n){n.d(t,{DotBadge:function(){return d},Badge:function(){return s}});var o=n(812650),r=n.n(o),i={badge:"badge-jqvc1W","dot-badge":"dot-badge-tQfBUD"},u=n(345660);let s=e=>{let{className:t,count:n,onClick:o}=e;return n?(0,u.jsx)("div",{className:r()(i.badge,t),onClick:o,children:n>99?"99+":n}):null},d=e=>{let{className:t,count:n}=e;return n?(0,u.jsx)("div",{className:r()(i["dot-badge"],t)}):null}},448209:function(e,t,n){n.d(t,{UnreadCountBadge:function(){return _}});var o=n(713738),r=n(551359),i=n(637319),u=n(83990),s=n(212183),d=n(651610),a=n(777422),l=n(888130),c=n(345660);let _=e=>{let{lastMessageIndex:t,conversation:n,inView:_}=e,{botInfo:v}=(0,s.getInfoByConversationId)(null==n?void 0:n.conversation_id),f=t?(0,i.getLastMessageIndexForUnreadCountSelector)(u.useMessageStore.getState(),(null==n?void 0:n.conversation_id)||"",t):0,g=t?(0,d.getUnreadCount)({badge_count:f,read_message_index:null==t?void 0:t.read_message_index,read_badge_count:null==t?void 0:t.read_badge_count}):0,m=(0,o.useRef)(0);return(0,o.useEffect)(()=>{_&&g&&(null==n?void 0:n.conversation_id)&&(null==t?void 0:t.message_index)&&t.message_index>m.current&&(m.current=t.message_index,(0,a.trackEvent)("red_dot_show",{bot_id:null==n?void 0:n.bot_id,conversation_id:null==n?void 0:n.conversation_id,conversation_type:null==n?void 0:n.conversation_type,show_from:"chat_bot_list",chat_type:(0,s.getChatTypeForTea)((0,l.getUserId)(),null==n?void 0:n.conversation_id,v),red_dot_cnt:g}))},[_,g,null==n?void 0:n.conversation_id,null==t?void 0:t.message_index]),(0,c.jsx)("div",{className:"p-1 feed-list-item-tool-button-hide-on-active",children:(0,c.jsx)(r.Badge,{count:g,"data-testid":"chat_list_item_unread_count",className:"w-fit"})})}}}]);
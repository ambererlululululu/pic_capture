"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["36219"],{956037:function(t,e,l){function a(t,e,l){if(t&&t.length){let[a,n]=e,i=Math.PI/180*l,r=Math.cos(i),s=Math.sin(i);for(let e of t){let[t,l]=e;e[0]=(t-a)*r-(l-n)*s+a,e[1]=(t-a)*s+(l-n)*r+n}}}function n(t,e){var l;let n=e.hachureAngle+90,i=e.hachureGap;i<0&&(i=4*e.strokeWidth),i=Math.round(Math.max(i,.1));let r=1;return e.roughness>=1&&((null===(l=e.randomizer)||void 0===l?void 0:l.next())||Math.random())>.7&&(r=i),function(t,e,l,n=1){let i=Math.max(e,.1),r=t[0]&&t[0][0]&&"number"==typeof t[0][0]?[t]:t,s=[0,0];if(l)for(let t of r)a(t,s,l);let o=function(t,e,l){let a=[];for(let e of t){var n,i;let t=[...e];n=t[0],i=t[t.length-1],n[0]===i[0]&&n[1]===i[1]||t.push([t[0][0],t[0][1]]),t.length>2&&a.push(t)}let r=[];e=Math.max(e,.1);let s=[];for(let t of a)for(let e=0;e<t.length-1;e++){let l=t[e],a=t[e+1];if(l[1]!==a[1]){let t=Math.min(l[1],a[1]);s.push({ymin:t,ymax:Math.max(l[1],a[1]),x:t===l[1]?l[0]:a[0],islope:(a[0]-l[0])/(a[1]-l[1])})}}if(s.sort((t,e)=>t.ymin<e.ymin?-1:t.ymin>e.ymin?1:t.x<e.x?-1:t.x>e.x?1:t.ymax===e.ymax?0:(t.ymax-e.ymax)/Math.abs(t.ymax-e.ymax)),!s.length)return r;let o=[],h=s[0].ymin,d=0;for(;o.length||s.length;){if(s.length){let t=-1;for(let e=0;e<s.length&&!(s[e].ymin>h);e++)t=e;s.splice(0,t+1).forEach(t=>{o.push({s:h,edge:t})})}if((o=o.filter(t=>!(t.edge.ymax<=h))).sort((t,e)=>t.edge.x===e.edge.x?0:(t.edge.x-e.edge.x)/Math.abs(t.edge.x-e.edge.x)),(1!==l||d%e==0)&&o.length>1)for(let t=0;t<o.length;t+=2){let e=t+1;if(e>=o.length)break;let l=o[t].edge,a=o[e].edge;r.push([[Math.round(l.x),h],[Math.round(a.x),h]])}h+=l,o.forEach(t=>{t.edge.x=t.edge.x+l*t.edge.islope}),d++}return r}(r,i,n);if(l){for(let t of r)a(t,s,-l);!function(t,e,l){let n=[];t.forEach(t=>n.push(...t)),a(n,e,l)}(o,s,-l)}return o}(t,i,n,r||1)}l.d(e,{default:function(){return J}});class i{constructor(t){this.helper=t}fillPolygons(t,e){return this._fillPolygons(t,e)}_fillPolygons(t,e){let l=n(t,e);return{type:"fillSketch",ops:this.renderLines(l,e)}}renderLines(t,e){let l=[];for(let a of t)l.push(...this.helper.doubleLineOps(a[0][0],a[0][1],a[1][0],a[1][1],e));return l}}function r(t){let e=t[0],l=t[1];return Math.sqrt(Math.pow(e[0]-l[0],2)+Math.pow(e[1]-l[1],2))}class s extends i{fillPolygons(t,e){let l=e.hachureGap;l<0&&(l=4*e.strokeWidth);let a=n(t,Object.assign({},e,{hachureGap:l=Math.max(l,.1)})),i=Math.PI/180*e.hachureAngle,s=[],o=.5*l*Math.cos(i),h=.5*l*Math.sin(i);for(let[t,e]of a)r([t,e])&&s.push([[t[0]-o,t[1]+h],[...e]],[[t[0]+o,t[1]-h],[...e]]);return{type:"fillSketch",ops:this.renderLines(s,e)}}}class o extends i{fillPolygons(t,e){let l=this._fillPolygons(t,e),a=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),n=this._fillPolygons(t,a);return l.ops=l.ops.concat(n.ops),l}}class h{constructor(t){this.helper=t}fillPolygons(t,e){let l=n(t,e=Object.assign({},e,{hachureAngle:0}));return this.dotsOnLines(l,e)}dotsOnLines(t,e){let l=[],a=e.hachureGap;a<0&&(a=4*e.strokeWidth),a=Math.max(a,.1);let n=e.fillWeight;n<0&&(n=e.strokeWidth/2);let i=a/4;for(let s of t){let t=r(s),o=Math.ceil(t/a)-1,h=t-o*a,d=(s[0][0]+s[1][0])/2-a/4,c=Math.min(s[0][1],s[1][1]);for(let t=0;t<o;t++){let r=d-i+2*Math.random()*i,s=c+h+t*a-i+2*Math.random()*i,o=this.helper.ellipse(r,s,n,n,e);l.push(...o.ops)}}return{type:"fillSketch",ops:l}}}class d{constructor(t){this.helper=t}fillPolygons(t,e){let l=n(t,e);return{type:"fillSketch",ops:this.dashedLine(l,e)}}dashedLine(t,e){let l=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,a=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap,n=[];return t.forEach(t=>{let i=r(t),s=Math.floor(i/(l+a)),o=(i+a-s*(l+a))/2,h=t[0],d=t[1];h[0]>d[0]&&(h=t[1],d=t[0]);let c=Math.atan((d[1]-h[1])/(d[0]-h[0]));for(let t=0;t<s;t++){let i=t*(l+a),r=i+l,s=[h[0]+i*Math.cos(c)+o*Math.cos(c),h[1]+i*Math.sin(c)+o*Math.sin(c)],d=[h[0]+r*Math.cos(c)+o*Math.cos(c),h[1]+r*Math.sin(c)+o*Math.sin(c)];n.push(...this.helper.doubleLineOps(s[0],s[1],d[0],d[1],e))}}),n}}class c{constructor(t){this.helper=t}fillPolygons(t,e){let l=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,a=e.zigzagOffset<0?l:e.zigzagOffset,i=n(t,e=Object.assign({},e,{hachureGap:l+a}));return{type:"fillSketch",ops:this.zigzagLines(i,a,e)}}zigzagLines(t,e,l){let a=[];return t.forEach(t=>{let n=Math.round(r(t)/(2*e)),i=t[0],s=t[1];i[0]>s[0]&&(i=t[1],s=t[0]);let o=Math.atan((s[1]-i[1])/(s[0]-i[0]));for(let t=0;t<n;t++){let n=2*t*e,r=2*(t+1)*e,s=Math.sqrt(2*Math.pow(e,2)),h=[i[0]+n*Math.cos(o),i[1]+n*Math.sin(o)],d=[i[0]+r*Math.cos(o),i[1]+r*Math.sin(o)],c=[h[0]+s*Math.cos(o+Math.PI/4),h[1]+s*Math.sin(o+Math.PI/4)];a.push(...this.helper.doubleLineOps(h[0],h[1],c[0],c[1],l),...this.helper.doubleLineOps(c[0],c[1],d[0],d[1],l))}}),a}}let u={};class g{constructor(t){this.seed=t}next(){return this.seed?(0x80000000-1&(this.seed=Math.imul(48271,this.seed)))/0x80000000:Math.random()}}let f={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function p(t){let e=[],l=function(t){let e=[];for(;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:0,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];e[e.length]={type:1,text:`${parseFloat(RegExp.$1)}`},t=t.substr(RegExp.$1.length)}return e[e.length]={type:2,text:""},e}(t),a="BOD",n=0,i=l[0];for(;2!==i.type;){let r=0,s=[];if("BOD"===a){if("M"!==i.text&&"m"!==i.text)return p("M0,0"+t);n++,r=f[i.text],a=i.text}else 1===i.type?r=f[a]:(n++,r=f[i.text],a=i.text);if(!(n+r<l.length))throw Error("Path data ended short");for(let t=n;t<n+r;t++){let e=l[t];if(1!==e.type)throw Error("Param not a number: "+a+","+e.text);s[s.length]=+e.text}if("number"!=typeof f[a])throw Error("Bad segment: "+a);{let t={key:a,data:s};e.push(t),n+=r,i=l[n],"M"===a&&(a="L"),"m"===a&&(a="l")}}return e}function y(t){let e=0,l=0,a=0,n=0,i=[];for(let{key:r,data:s}of t)switch(r){case"M":i.push({key:"M",data:[...s]}),[e,l]=s,[a,n]=s;break;case"m":e+=s[0],l+=s[1],i.push({key:"M",data:[e,l]}),a=e,n=l;break;case"L":i.push({key:"L",data:[...s]}),[e,l]=s;break;case"l":e+=s[0],l+=s[1],i.push({key:"L",data:[e,l]});break;case"C":i.push({key:"C",data:[...s]}),e=s[4],l=s[5];break;case"c":{let t=s.map((t,a)=>a%2?t+l:t+e);i.push({key:"C",data:t}),e=t[4],l=t[5];break}case"Q":i.push({key:"Q",data:[...s]}),e=s[2],l=s[3];break;case"q":{let t=s.map((t,a)=>a%2?t+l:t+e);i.push({key:"Q",data:t}),e=t[2],l=t[3];break}case"A":i.push({key:"A",data:[...s]}),e=s[5],l=s[6];break;case"a":e+=s[5],l+=s[6],i.push({key:"A",data:[s[0],s[1],s[2],s[3],s[4],e,l]});break;case"H":i.push({key:"H",data:[...s]}),e=s[0];break;case"h":e+=s[0],i.push({key:"H",data:[e]});break;case"V":i.push({key:"V",data:[...s]}),l=s[0];break;case"v":l+=s[0],i.push({key:"V",data:[l]});break;case"S":i.push({key:"S",data:[...s]}),e=s[2],l=s[3];break;case"s":{let t=s.map((t,a)=>a%2?t+l:t+e);i.push({key:"S",data:t}),e=t[2],l=t[3];break}case"T":i.push({key:"T",data:[...s]}),e=s[0],l=s[1];break;case"t":e+=s[0],l+=s[1],i.push({key:"T",data:[e,l]});break;case"Z":case"z":i.push({key:"Z",data:[]}),e=a,l=n}return i}function m(t){let e=[],l="",a=0,n=0,i=0,r=0,s=0,o=0;for(let{key:h,data:d}of t){switch(h){case"M":e.push({key:"M",data:[...d]}),[a,n]=d,[i,r]=d;break;case"C":e.push({key:"C",data:[...d]}),a=d[4],n=d[5],s=d[2],o=d[3];break;case"L":e.push({key:"L",data:[...d]}),[a,n]=d;break;case"H":a=d[0],e.push({key:"L",data:[a,n]});break;case"V":n=d[0],e.push({key:"L",data:[a,n]});break;case"S":{let t=0,i=0;"C"===l||"S"===l?(t=a+(a-s),i=n+(n-o)):(t=a,i=n),e.push({key:"C",data:[t,i,...d]}),s=d[0],o=d[1],a=d[2],n=d[3];break}case"T":{let[t,i]=d,r=0,h=0;"Q"===l||"T"===l?(r=a+(a-s),h=n+(n-o)):(r=a,h=n);let c=a+2*(r-a)/3,u=n+2*(h-n)/3,g=t+2*(r-t)/3,f=i+2*(h-i)/3;e.push({key:"C",data:[c,u,g,f,t,i]}),s=r,o=h,a=t,n=i;break}case"Q":{let[t,l,i,r]=d,h=a+2*(t-a)/3,c=n+2*(l-n)/3,u=i+2*(t-i)/3,g=r+2*(l-r)/3;e.push({key:"C",data:[h,c,u,g,i,r]}),s=t,o=l,a=i,n=r;break}case"A":{let t=Math.abs(d[0]),l=Math.abs(d[1]),i=d[2],r=d[3],s=d[4],o=d[5],h=d[6];0===t||0===l?(e.push({key:"C",data:[a,n,o,h,o,h]}),a=o,n=h):(a!==o||n!==h)&&((function t(e,l,a,n,i,r,s,o,h,d){let c=Math.PI*s/180,u=[],g=0,f=0,p=0,y=0;if(d)[g,f,p,y]=d;else{[e,l]=x(e,l,-c),[a,n]=x(a,n,-c);let t=(e-a)/2,s=(l-n)/2,d=t*t/(i*i)+s*s/(r*r);d>1&&(i*=d=Math.sqrt(d),r*=d);let u=i*i,m=r*r,w=(o===h?-1:1)*Math.sqrt(Math.abs((u*m-u*s*s-m*t*t)/(u*s*s+m*t*t)));p=w*i*s/r+(e+a)/2,y=-(w*r)*t/i+(l+n)/2,g=Math.asin(parseFloat(((l-y)/r).toFixed(9))),f=Math.asin(parseFloat(((n-y)/r).toFixed(9))),e<p&&(g=Math.PI-g),a<p&&(f=Math.PI-f),g<0&&(g=2*Math.PI+g),f<0&&(f=2*Math.PI+f),h&&g>f&&(g-=2*Math.PI),!h&&f>g&&(f-=2*Math.PI)}let m=f-g;if(Math.abs(m)>120*Math.PI/180){let e=f,l=a,o=n;u=t(a=p+i*Math.cos(f=h&&f>g?g+120*Math.PI/180*1:g+-(120*Math.PI/180*1)),n=y+r*Math.sin(f),l,o,i,r,s,0,h,[f,e,p,y])}m=f-g;let w=Math.cos(g),v=Math.cos(f),b=Math.tan(m/4),k=4/3*i*b,M=4/3*r*b,$=[e,l],_=[e+k*Math.sin(g),l-M*w],S=[a+k*Math.sin(f),n-M*v],D=[a,n];if(_[0]=2*$[0]-_[0],_[1]=2*$[1]-_[1],d)return[_,S,D].concat(u);{u=[_,S,D].concat(u);let t=[];for(let e=0;e<u.length;e+=3){let l=x(u[e][0],u[e][1],c),a=x(u[e+1][0],u[e+1][1],c),n=x(u[e+2][0],u[e+2][1],c);t.push([l[0],l[1],a[0],a[1],n[0],n[1]])}return t}})(a,n,o,h,t,l,i,r,s).forEach(function(t){e.push({key:"C",data:t})}),a=o,n=h);break}case"Z":e.push({key:"Z",data:[]}),a=i,n=r}l=h}return e}function x(t,e,l){return[t*Math.cos(l)-e*Math.sin(l),t*Math.sin(l)+e*Math.cos(l)]}let w={randOffset:function(t,e){return L(t,e)},randOffsetWithRange:function(t,e,l){return N(t,e,l)},ellipse:function(t,e,l,a,n){let i=M(l,a,n);return $(t,e,n,i).opset},doubleLineOps:function(t,e,l,a,n){return T(t,e,l,a,n,!0)}};function v(t,e,l,a,n){return{type:"path",ops:T(t,e,l,a,n)}}function b(t,e,l){let a=(t||[]).length;if(a>2){let n=[];for(let e=0;e<a-1;e++)n.push(...T(t[e][0],t[e][1],t[e+1][0],t[e+1][1],l));return e&&n.push(...T(t[a-1][0],t[a-1][1],t[0][0],t[0][1],l)),{type:"path",ops:n}}return 2===a?v(t[0][0],t[0][1],t[1][0],t[1][1],l):{type:"path",ops:[]}}function k(t,e){if(t.length){let l="number"==typeof t[0][0]?[t]:t,a=R(l[0],+(1+.2*e.roughness),e),n=e.disableMultiStroke?[]:R(l[0],1.5*(1+.22*e.roughness),P(e));for(let t=1;t<l.length;t++){let i=l[t];if(i.length){let t=R(i,+(1+.2*e.roughness),e),l=e.disableMultiStroke?[]:R(i,1.5*(1+.22*e.roughness),P(e));for(let e of t)"move"!==e.op&&a.push(e);for(let t of l)"move"!==t.op&&n.push(t)}}return{type:"path",ops:a.concat(n)}}return{type:"path",ops:[]}}function M(t,e,l){let a=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),n=2*Math.PI/Math.ceil(Math.max(l.curveStepCount,l.curveStepCount/Math.sqrt(200)*a)),i=Math.abs(t/2),r=Math.abs(e/2),s=1-l.curveFitting;return i+=L(i*s,l),r+=L(r*s,l),{increment:n,rx:i,ry:r}}function $(t,e,l,a){let[n,i]=W(a.increment,t,e,a.rx,a.ry,1,a.increment*N(.1,N(.4,1,l),l),l),r=I(n,null,l);if(!l.disableMultiStroke&&0!==l.roughness){let[n]=W(a.increment,t,e,a.rx,a.ry,1.5,0,l),i=I(n,null,l);r=r.concat(i)}return{estimatedPoints:i,opset:{type:"path",ops:r}}}function _(t,e,l,a,n,i,r,s,o){let h=Math.abs(l/2),d=Math.abs(a/2);h+=L(.01*h,o),d+=L(.01*d,o);let c=n,u=i;for(;c<0;)c+=2*Math.PI,u+=2*Math.PI;u-c>2*Math.PI&&(c=0,u=2*Math.PI);let g=Math.min(2*Math.PI/o.curveStepCount/2,(u-c)/2),f=O(g,t,e,h,d,c,u,1,o);if(!o.disableMultiStroke){let l=O(g,t,e,h,d,c,u,1.5,o);f.push(...l)}return r&&(s?f.push(...T(t,e,t+h*Math.cos(c),e+d*Math.sin(c),o),...T(t,e,t+h*Math.cos(u),e+d*Math.sin(u),o)):f.push({op:"lineTo",data:[t,e]},{op:"lineTo",data:[t+h*Math.cos(c),e+d*Math.sin(c)]})),{type:"path",ops:f}}function S(t,e){let l=m(y(p(t))),a=[],n=[0,0],i=[0,0];for(let{key:t,data:r}of l)switch(t){case"M":i=[r[0],r[1]],n=[r[0],r[1]];break;case"L":a.push(...T(i[0],i[1],r[0],r[1],e)),i=[r[0],r[1]];break;case"C":{let[t,l,n,s,o,h]=r;a.push(...function(t,e,l,a,n,i,r,s){let o=[],h=[s.maxRandomnessOffset||1,(s.maxRandomnessOffset||1)+.3],d=[0,0],c=s.disableMultiStroke?1:2,u=s.preserveVertices;for(let g=0;g<c;g++)0===g?o.push({op:"move",data:[r[0],r[1]]}):o.push({op:"move",data:[r[0]+(u?0:L(h[0],s)),r[1]+(u?0:L(h[0],s))]}),d=u?[n,i]:[n+L(h[g],s),i+L(h[g],s)],o.push({op:"bcurveTo",data:[t+L(h[g],s),e+L(h[g],s),l+L(h[g],s),a+L(h[g],s),d[0],d[1]]});return o}(t,l,n,s,o,h,i,e)),i=[o,h];break}case"Z":a.push(...T(i[0],i[1],n[0],n[1],e)),i=[n[0],n[1]]}return{type:"path",ops:a}}function D(t,e){let l=[];for(let a of t)if(a.length){let t=e.maxRandomnessOffset||0,n=a.length;if(n>2){l.push({op:"move",data:[a[0][0]+L(t,e),a[0][1]+L(t,e)]});for(let i=1;i<n;i++)l.push({op:"lineTo",data:[a[i][0]+L(t,e),a[i][1]+L(t,e)]})}}return{type:"fillPath",ops:l}}function C(t,e){return(function(t,e){let l=t.fillStyle||"hachure";if(!u[l])switch(l){case"zigzag":u[l]||(u[l]=new s(e));break;case"cross-hatch":u[l]||(u[l]=new o(e));break;case"dots":u[l]||(u[l]=new h(e));break;case"dashed":u[l]||(u[l]=new d(e));break;case"zigzag-line":u[l]||(u[l]=new c(e));break;default:u[l="hachure"]||(u[l]=new i(e))}return u[l]})(e,w).fillPolygons(t,e)}function P(t){let e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function A(t){return t.randomizer||(t.randomizer=new g(t.seed||0)),t.randomizer.next()}function N(t,e,l,a=1){return l.roughness*a*(A(l)*(e-t)+t)}function L(t,e,l=1){return N(-t,t,e,l)}function T(t,e,l,a,n,i=!1){let r=i?n.disableMultiStrokeFill:n.disableMultiStroke,s=B(t,e,l,a,n,!0,!1);if(r)return s;let o=B(t,e,l,a,n,!0,!0);return s.concat(o)}function B(t,e,l,a,n,i,r){let s=Math.pow(t-l,2)+Math.pow(e-a,2),o=Math.sqrt(s),h=1;h=o<200?1:o>500?.4:-.0016668*o+1.233334;let d=n.maxRandomnessOffset||0;d*d*100>s&&(d=o/10);let c=d/2,u=.2+.2*A(n),g=n.bowing*n.maxRandomnessOffset*(a-e)/200,f=n.bowing*n.maxRandomnessOffset*(t-l)/200;g=L(g,n,h),f=L(f,n,h);let p=[],y=()=>L(c,n,h),m=()=>L(d,n,h),x=n.preserveVertices;return i&&(r?p.push({op:"move",data:[t+(x?0:y()),e+(x?0:y())]}):p.push({op:"move",data:[t+(x?0:L(d,n,h)),e+(x?0:L(d,n,h))]})),r?p.push({op:"bcurveTo",data:[g+t+(l-t)*u+y(),f+e+(a-e)*u+y(),g+t+2*(l-t)*u+y(),f+e+2*(a-e)*u+y(),l+(x?0:y()),a+(x?0:y())]}):p.push({op:"bcurveTo",data:[g+t+(l-t)*u+m(),f+e+(a-e)*u+m(),g+t+2*(l-t)*u+m(),f+e+2*(a-e)*u+m(),l+(x?0:m()),a+(x?0:m())]}),p}function R(t,e,l){if(!t.length)return[];let a=[];a.push([t[0][0]+L(e,l),t[0][1]+L(e,l)]),a.push([t[0][0]+L(e,l),t[0][1]+L(e,l)]);for(let n=1;n<t.length;n++)a.push([t[n][0]+L(e,l),t[n][1]+L(e,l)]),n===t.length-1&&a.push([t[n][0]+L(e,l),t[n][1]+L(e,l)]);return I(a,null,l)}function I(t,e,l){let a=t.length,n=[];if(a>3){let i=[],r=1-l.curveTightness;n.push({op:"move",data:[t[1][0],t[1][1]]});for(let e=1;e+2<a;e++){let l=t[e];i[0]=[l[0],l[1]],i[1]=[l[0]+(r*t[e+1][0]-r*t[e-1][0])/6,l[1]+(r*t[e+1][1]-r*t[e-1][1])/6],i[2]=[t[e+1][0]+(r*t[e][0]-r*t[e+2][0])/6,t[e+1][1]+(r*t[e][1]-r*t[e+2][1])/6],i[3]=[t[e+1][0],t[e+1][1]],n.push({op:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}if(e&&2===e.length){let t=l.maxRandomnessOffset;n.push({op:"lineTo",data:[e[0]+L(t,l),e[1]+L(t,l)]})}}else 3===a?(n.push({op:"move",data:[t[1][0],t[1][1]]}),n.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===a&&n.push(...B(t[0][0],t[0][1],t[1][0],t[1][1],l,!0,!0));return n}function W(t,e,l,a,n,i,r,s){let o=[],h=[];if(0===s.roughness){t/=4,h.push([e+a*Math.cos(-t),l+n*Math.sin(-t)]);for(let i=0;i<=2*Math.PI;i+=t){let t=[e+a*Math.cos(i),l+n*Math.sin(i)];o.push(t),h.push(t)}h.push([e+ +a,l+0*n]),h.push([e+a*Math.cos(t),l+n*Math.sin(t)])}else{let d=L(.5,s)-Math.PI/2;h.push([L(i,s)+e+.9*a*Math.cos(d-t),L(i,s)+l+.9*n*Math.sin(d-t)]);let c=2*Math.PI+d-.01;for(let r=d;r<c;r+=t){let t=[L(i,s)+e+a*Math.cos(r),L(i,s)+l+n*Math.sin(r)];o.push(t),h.push(t)}h.push([L(i,s)+e+a*Math.cos(d+2*Math.PI+.5*r),L(i,s)+l+n*Math.sin(d+2*Math.PI+.5*r)]),h.push([L(i,s)+e+.98*a*Math.cos(d+r),L(i,s)+l+.98*n*Math.sin(d+r)]),h.push([L(i,s)+e+.9*a*Math.cos(d+.5*r),L(i,s)+l+.9*n*Math.sin(d+.5*r)])}return[h,o]}function O(t,e,l,a,n,i,r,s,o){let h=i+L(.1,o),d=[];d.push([L(s,o)+e+.9*a*Math.cos(h-t),L(s,o)+l+.9*n*Math.sin(h-t)]);for(let i=h;i<=r;i+=t)d.push([L(s,o)+e+a*Math.cos(i),L(s,o)+l+n*Math.sin(i)]);return d.push([e+a*Math.cos(r),l+n*Math.sin(r)]),d.push([e+a*Math.cos(r),l+n*Math.sin(r)]),I(d,null,o)}function E(t,e=0){let l=t.length;if(l<3)throw Error("A curve must have at least three points.");let a=[];if(3===l)a.push([...t[0]],[...t[1]],[...t[2]],[...t[2]]);else{let l=[];l.push(t[0],t[0]);for(let e=1;e<t.length;e++)l.push(t[e]),e===t.length-1&&l.push(t[e]);let n=[],i=1-e;a.push([...l[0]]);for(let t=1;t+2<l.length;t++){let e=l[t];n[0]=[e[0],e[1]],n[1]=[e[0]+(i*l[t+1][0]-i*l[t-1][0])/6,e[1]+(i*l[t+1][1]-i*l[t-1][1])/6],n[2]=[l[t+1][0]+(i*l[t][0]-i*l[t+2][0])/6,l[t+1][1]+(i*l[t][1]-i*l[t+2][1])/6],n[3]=[l[t+1][0],l[t+1][1]],a.push(n[1],n[2],n[3])}}return a}function z(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function H(t,e,l){return[t[0]+(e[0]-t[0])*l,t[1]+(e[1]-t[1])*l]}function F(t,e,l,a,n){let i=n||[],r=t[e],s=t[l-1],o=0,h=1;for(let a=e+1;a<l-1;++a){let e=function(t,e,l){let a=z(e,l);if(0===a)return z(t,e);let n=((t[0]-e[0])*(l[0]-e[0])+(t[1]-e[1])*(l[1]-e[1]))/a;return z(t,H(e,l,n=Math.max(0,Math.min(1,n))))}(t[a],r,s);e>o&&(o=e,h=a)}return Math.sqrt(o)>a?(F(t,e,h+1,a,i),F(t,h,l,a,i)):(i.length||i.push(r),i.push(s)),i}function j(t,e=.15,l){let a=[],n=(t.length-1)/3;for(let l=0;l<n;l++)!function t(e,l,a,n){let i=n||[];if(function(t,e){let l=t[e+0],a=t[e+1],n=t[e+2],i=t[e+3],r=3*a[0]-2*l[0]-i[0];r*=r;let s=3*a[1]-2*l[1]-i[1];s*=s;let o=3*n[0]-2*i[0]-l[0];o*=o;let h=3*n[1]-2*i[1]-l[1];return h*=h,r<o&&(r=o),s<h&&(s=h),r+s}(e,l)<a){let t=e[l+0];i.length?Math.sqrt(z(i[i.length-1],t))>1&&i.push(t):i.push(t),i.push(e[l+3])}else{let n=e[l+0],r=e[l+1],s=e[l+2],o=e[l+3],h=H(n,r,.5),d=H(r,s,.5),c=H(s,o,.5),u=H(h,d,.5),g=H(d,c,.5),f=H(u,g,.5);t([n,h,u,f],0,a,i),t([f,g,c,o],0,a,i)}return i}(t,3*l,e,a);return l&&l>0?F(a,0,a.length,l):a}let q="none";class Z{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(0x80000000*Math.random())}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,e,l){return{shape:t,sets:e||[],options:l||this.defaultOptions}}line(t,e,l,a,n){let i=this._o(n);return this._d("line",[v(t,e,l,a,i)],i)}rectangle(t,e,l,a,n){let i=this._o(n),r=[],s=b([[t,e],[t+l,e],[t+l,e+a],[t,e+a]],!0,i);if(i.fill){let n=[[t,e],[t+l,e],[t+l,e+a],[t,e+a]];"solid"===i.fillStyle?r.push(D([n],i)):r.push(C([n],i))}return i.stroke!==q&&r.push(s),this._d("rectangle",r,i)}ellipse(t,e,l,a,n){let i=this._o(n),r=[],s=M(l,a,i),o=$(t,e,i,s);if(i.fill){if("solid"===i.fillStyle){let l=$(t,e,i,s).opset;l.type="fillPath",r.push(l)}else r.push(C([o.estimatedPoints],i))}return i.stroke!==q&&r.push(o.opset),this._d("ellipse",r,i)}circle(t,e,l,a){let n=this.ellipse(t,e,l,l,a);return n.shape="circle",n}linearPath(t,e){let l=this._o(e);return this._d("linearPath",[b(t,!1,l)],l)}arc(t,e,l,a,n,i,r=!1,s){let o=this._o(s),h=[],d=_(t,e,l,a,n,i,r,!0,o);if(r&&o.fill){if("solid"===o.fillStyle){let r=Object.assign({},o);r.disableMultiStroke=!0;let s=_(t,e,l,a,n,i,!0,!1,r);s.type="fillPath",h.push(s)}else h.push(function(t,e,l,a,n,i,r){let s=Math.abs(l/2),o=Math.abs(a/2);s+=L(.01*s,r),o+=L(.01*o,r);let h=n,d=i;for(;h<0;)h+=2*Math.PI,d+=2*Math.PI;d-h>2*Math.PI&&(h=0,d=2*Math.PI);let c=(d-h)/r.curveStepCount,u=[];for(let l=h;l<=d;l+=c)u.push([t+s*Math.cos(l),e+o*Math.sin(l)]);return u.push([t+s*Math.cos(d),e+o*Math.sin(d)]),u.push([t,e]),C([u],r)}(t,e,l,a,n,i,o))}return o.stroke!==q&&h.push(d),this._d("arc",h,o)}curve(t,e){let l=this._o(e),a=[],n=k(t,l);if(l.fill&&l.fill!==q){if("solid"===l.fillStyle){let e=k(t,Object.assign(Object.assign({},l),{disableMultiStroke:!0,roughness:l.roughness?l.roughness+l.fillShapeRoughnessGain:0}));a.push({type:"fillPath",ops:this._mergedShape(e.ops)})}else{let e=[];if(t.length)for(let a of"number"==typeof t[0][0]?[t]:t)a.length<3?e.push(...a):3===a.length?e.push(...j(E([a[0],a[0],a[1],a[2]]),10,(1+l.roughness)/2)):e.push(...j(E(a),10,(1+l.roughness)/2));e.length&&a.push(C([e],l))}}return l.stroke!==q&&a.push(n),this._d("curve",a,l)}polygon(t,e){let l=this._o(e),a=[],n=b(t,!0,l);return l.fill&&("solid"===l.fillStyle?a.push(D([t],l)):a.push(C([t],l))),l.stroke!==q&&a.push(n),this._d("polygon",a,l)}path(t,e){let l=this._o(e),a=[];if(!t)return this._d("path",a,l);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");let n=l.fill&&"transparent"!==l.fill&&l.fill!==q,i=l.stroke!==q,r=!!(l.simplification&&l.simplification<1),s=function(t,e,l){let a=m(y(p(t))),n=[],i=[],r=[0,0],s=[],o=()=>{s.length>=4&&i.push(...j(s,1)),s=[]},h=()=>{o(),i.length&&(n.push(i),i=[])};for(let{key:t,data:e}of a)switch(t){case"M":h(),r=[e[0],e[1]],i.push(r);break;case"L":o(),i.push([e[0],e[1]]);break;case"C":if(!s.length){let t=i.length?i[i.length-1]:r;s.push([t[0],t[1]])}s.push([e[0],e[1]]),s.push([e[2],e[3]]),s.push([e[4],e[5]]);break;case"Z":o(),i.push([r[0],r[1]])}if(h(),!l)return n;let d=[];for(let t of n){let e=F(t,0,t.length,l);e.length&&d.push(e)}return d}(t,0,r?4-4*(l.simplification||1):(1+l.roughness)/2),o=S(t,l);if(n){if("solid"===l.fillStyle){if(1===s.length){let e=S(t,Object.assign(Object.assign({},l),{disableMultiStroke:!0,roughness:l.roughness?l.roughness+l.fillShapeRoughnessGain:0}));a.push({type:"fillPath",ops:this._mergedShape(e.ops)})}else a.push(D(s,l))}else a.push(C(s,l))}return i&&(r?s.forEach(t=>{a.push(b(t,!1,l))}):a.push(o)),this._d("path",a,l)}opsToPath(t,e){let l="";for(let a of t.ops){let t="number"==typeof e&&e>=0?a.data.map(t=>+t.toFixed(e)):a.data;switch(a.op){case"move":l+=`M${t[0]} ${t[1]} `;break;case"bcurveTo":l+=`C${t[0]} ${t[1]}, ${t[2]} ${t[3]}, ${t[4]} ${t[5]} `;break;case"lineTo":l+=`L${t[0]} ${t[1]} `}}return l.trim()}toPaths(t){let e=t.sets||[],l=t.options||this.defaultOptions,a=[];for(let t of e){let e=null;switch(t.type){case"path":e={d:this.opsToPath(t),stroke:l.stroke,strokeWidth:l.strokeWidth,fill:q};break;case"fillPath":e={d:this.opsToPath(t),stroke:q,strokeWidth:0,fill:l.fill||q};break;case"fillSketch":e=this.fillSketch(t,l)}e&&a.push(e)}return a}fillSketch(t,e){let l=e.fillWeight;return l<0&&(l=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||q,strokeWidth:l,fill:q}}_mergedShape(t){return t.filter((t,e)=>0===e||"move"!==t.op)}}class G{constructor(t,e){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Z(e)}draw(t){let e=t.sets||[],l=t.options||this.getDefaultOptions(),a=this.ctx,n=t.options.fixedDecimalPlaceDigits;for(let i of e)switch(i.type){case"path":a.save(),a.strokeStyle="none"===l.stroke?"transparent":l.stroke,a.lineWidth=l.strokeWidth,l.strokeLineDash&&a.setLineDash(l.strokeLineDash),l.strokeLineDashOffset&&(a.lineDashOffset=l.strokeLineDashOffset),this._drawToContext(a,i,n),a.restore();break;case"fillPath":{a.save(),a.fillStyle=l.fill||"";let e="curve"===t.shape||"polygon"===t.shape||"path"===t.shape?"evenodd":"nonzero";this._drawToContext(a,i,n,e),a.restore();break}case"fillSketch":this.fillSketch(a,i,l)}}fillSketch(t,e,l){let a=l.fillWeight;a<0&&(a=l.strokeWidth/2),t.save(),l.fillLineDash&&t.setLineDash(l.fillLineDash),l.fillLineDashOffset&&(t.lineDashOffset=l.fillLineDashOffset),t.strokeStyle=l.fill||"",t.lineWidth=a,this._drawToContext(t,e,l.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,e,l,a="nonzero"){for(let a of(t.beginPath(),e.ops)){let e="number"==typeof l&&l>=0?a.data.map(t=>+t.toFixed(l)):a.data;switch(a.op){case"move":t.moveTo(e[0],e[1]);break;case"bcurveTo":t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]);break;case"lineTo":t.lineTo(e[0],e[1])}}"fillPath"===e.type?t.fill(a):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,e,l,a,n){let i=this.gen.line(t,e,l,a,n);return this.draw(i),i}rectangle(t,e,l,a,n){let i=this.gen.rectangle(t,e,l,a,n);return this.draw(i),i}ellipse(t,e,l,a,n){let i=this.gen.ellipse(t,e,l,a,n);return this.draw(i),i}circle(t,e,l,a){let n=this.gen.circle(t,e,l,a);return this.draw(n),n}linearPath(t,e){let l=this.gen.linearPath(t,e);return this.draw(l),l}polygon(t,e){let l=this.gen.polygon(t,e);return this.draw(l),l}arc(t,e,l,a,n,i,r=!1,s){let o=this.gen.arc(t,e,l,a,n,i,r,s);return this.draw(o),o}curve(t,e){let l=this.gen.curve(t,e);return this.draw(l),l}path(t,e){let l=this.gen.path(t,e);return this.draw(l),l}}let V="http://www.w3.org/2000/svg";class U{constructor(t,e){this.svg=t,this.gen=new Z(e)}draw(t){let e=t.sets||[],l=t.options||this.getDefaultOptions(),a=this.svg.ownerDocument||window.document,n=a.createElementNS(V,"g"),i=t.options.fixedDecimalPlaceDigits;for(let r of e){let e=null;switch(r.type){case"path":(e=a.createElementNS(V,"path")).setAttribute("d",this.opsToPath(r,i)),e.setAttribute("stroke",l.stroke),e.setAttribute("stroke-width",l.strokeWidth+""),e.setAttribute("fill","none"),l.strokeLineDash&&e.setAttribute("stroke-dasharray",l.strokeLineDash.join(" ").trim()),l.strokeLineDashOffset&&e.setAttribute("stroke-dashoffset",`${l.strokeLineDashOffset}`);break;case"fillPath":(e=a.createElementNS(V,"path")).setAttribute("d",this.opsToPath(r,i)),e.setAttribute("stroke","none"),e.setAttribute("stroke-width","0"),e.setAttribute("fill",l.fill||""),"curve"!==t.shape&&"polygon"!==t.shape||e.setAttribute("fill-rule","evenodd");break;case"fillSketch":e=this.fillSketch(a,r,l)}e&&n.appendChild(e)}return n}fillSketch(t,e,l){let a=l.fillWeight;a<0&&(a=l.strokeWidth/2);let n=t.createElementNS(V,"path");return n.setAttribute("d",this.opsToPath(e,l.fixedDecimalPlaceDigits)),n.setAttribute("stroke",l.fill||""),n.setAttribute("stroke-width",a+""),n.setAttribute("fill","none"),l.fillLineDash&&n.setAttribute("stroke-dasharray",l.fillLineDash.join(" ").trim()),l.fillLineDashOffset&&n.setAttribute("stroke-dashoffset",`${l.fillLineDashOffset}`),n}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,e){return this.gen.opsToPath(t,e)}line(t,e,l,a,n){let i=this.gen.line(t,e,l,a,n);return this.draw(i)}rectangle(t,e,l,a,n){let i=this.gen.rectangle(t,e,l,a,n);return this.draw(i)}ellipse(t,e,l,a,n){let i=this.gen.ellipse(t,e,l,a,n);return this.draw(i)}circle(t,e,l,a){let n=this.gen.circle(t,e,l,a);return this.draw(n)}linearPath(t,e){let l=this.gen.linearPath(t,e);return this.draw(l)}polygon(t,e){let l=this.gen.polygon(t,e);return this.draw(l)}arc(t,e,l,a,n,i,r=!1,s){let o=this.gen.arc(t,e,l,a,n,i,r,s);return this.draw(o)}curve(t,e){let l=this.gen.curve(t,e);return this.draw(l)}path(t,e){let l=this.gen.path(t,e);return this.draw(l)}}var J={canvas:(t,e)=>new G(t,e),svg:(t,e)=>new U(t,e),generator:t=>new Z(t),newSeed:()=>Z.newSeed()}},563290:function(t,e,l){l.d(e,{getSubGraphTitleMargins:function(){return a}});var a=(0,l(709136).__name)(t=>{var e,l,a,n;let{flowchart:i}=t,r=null!==(a=null==i?void 0:null===(e=i.subGraphTitleMargin)||void 0===e?void 0:e.top)&&void 0!==a?a:0,s=null!==(n=null==i?void 0:null===(l=i.subGraphTitleMargin)||void 0===l?void 0:l.bottom)&&void 0!==n?n:0;return{subGraphTitleTopMargin:r,subGraphTitleBottomMargin:s,subGraphTitleTotalMargin:r+s}},"getSubGraphTitleMargins")},258525:function(t,e,l){l.d(e,{clear:function(){return I},clear2:function(){return ed},createLabel_default:function(){return k},insertCluster:function(){return R},insertNode:function(){return eo},isValidShape:function(){return er},labelHelper:function(){return u},positionNode:function(){return ec},setNodeElem:function(){return eh},updateNodeBounds:function(){return f}});var a,n=l(557298),i=l(351911),r=l(563290),s=l(177942),o=l(339819),h=l(709136),d=l(636157),c=l(956037),u=(0,h.__name)(async(t,e,l)=>{var a,n,i;let r,c;let u=e.useHtmlLabels||(0,h.evaluate)(null===(a=(0,h.getConfig2)())||void 0===a?void 0:a.htmlLabels);r=l||"node default";let g=t.insert("g").attr("class",r).attr("id",e.domId||e.id),f=g.insert("g").attr("class","label").attr("style",(0,o.handleUndefinedAttr)(e.labelStyle));c=void 0===e.label?"":"string"==typeof e.label?e.label:e.label[0];let p=await (0,s.createText)(f,(0,h.sanitizeText)((0,o.decodeEntities)(c),(0,h.getConfig2)()),{useHtmlLabels:u,width:e.width||(null===(n=(0,h.getConfig2)().flowchart)||void 0===n?void 0:n.wrappingWidth),cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img}),y=p.getBBox(),m=(null!==(i=null==e?void 0:e.padding)&&void 0!==i?i:0)/2;if(u){let t=p.children[0],e=(0,d.select)(p),l=t.getElementsByTagName("img");if(l){let t=""===c.replace(/<img[^>]*>/g,"").trim();await Promise.all([...l].map(e=>new Promise(l=>{function a(){if(e.style.display="flex",e.style.flexDirection="column",t){let t=(0,h.getConfig2)().fontSize?(0,h.getConfig2)().fontSize:window.getComputedStyle(document.body).fontSize,[l=h.defaultConfig_default.fontSize]=(0,o.parseFontSize)(t),a=5*l+"px";e.style.minWidth=a,e.style.maxWidth=a}else e.style.width="100%";l(e)}(0,h.__name)(a,"setupImage"),setTimeout(()=>{e.complete&&a()}),e.addEventListener("error",a),e.addEventListener("load",a)})))}y=t.getBoundingClientRect(),e.attr("width",y.width),e.attr("height",y.height)}return u?f.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"):f.attr("transform","translate(0, "+-y.height/2+")"),e.centerLabel&&f.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"),f.insert("rect",":first-child"),{shapeSvg:g,bbox:y,halfPadding:m,label:f}},"labelHelper"),g=(0,h.__name)(async(t,e,l)=>{var a,n,i,r,c,u;let g=l.useHtmlLabels||(0,h.evaluate)(null===(n=(0,h.getConfig2)())||void 0===n?void 0:null===(a=n.flowchart)||void 0===a?void 0:a.htmlLabels),f=t.insert("g").attr("class","label").attr("style",l.labelStyle||""),p=await (0,s.createText)(f,(0,h.sanitizeText)((0,o.decodeEntities)(e),(0,h.getConfig2)()),{useHtmlLabels:g,width:l.width||(null===(r=(0,h.getConfig2)())||void 0===r?void 0:null===(i=r.flowchart)||void 0===i?void 0:i.wrappingWidth),style:l.labelStyle,addSvgBackground:!!l.icon||!!l.img}),y=p.getBBox(),m=l.padding/2;if((0,h.evaluate)(null===(u=(0,h.getConfig2)())||void 0===u?void 0:null===(c=u.flowchart)||void 0===c?void 0:c.htmlLabels)){let t=p.children[0],e=(0,d.select)(p);y=t.getBoundingClientRect(),e.attr("width",y.width),e.attr("height",y.height)}return g?f.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"):f.attr("transform","translate(0, "+-y.height/2+")"),l.centerLabel&&f.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"),f.insert("rect",":first-child"),{shapeSvg:t,bbox:y,halfPadding:m,label:f}},"insertLabel"),f=(0,h.__name)((t,e)=>{let l=e.node().getBBox();t.width=l.width,t.height=l.height},"updateNodeBounds"),p=(0,h.__name)((t,e)=>("handDrawn"===t.look?"rough-node":"node")+" "+t.cssClasses+" "+(e||""),"getNodeClasses");function y(t){let e=t.map((t,e)=>`${0===e?"M":"L"}${t.x},${t.y}`);return e.push("Z"),e.join(" ")}function m(t,e,l,a,n,i){let r=[],s=l-t,o=2*Math.PI/(s/i),h=e+(a-e)/2;for(let e=0;e<=50;e++){let l=t+e/50*s,a=h+n*Math.sin(o*(l-t));r.push({x:l,y:a})}return r}function x(t,e,l,a,n,i){let r=[],s=n*Math.PI/180,o=(i*Math.PI/180-s)/(a-1);for(let n=0;n<a;n++){let a=s+n*o,i=t+l*Math.cos(a),h=e+l*Math.sin(a);r.push({x:-i,y:-h})}return r}(0,h.__name)(y,"createPathFromPoints"),(0,h.__name)(m,"generateFullSineWavePoints"),(0,h.__name)(x,"generateCirclePoints");var w=(0,h.__name)((t,e)=>{var l,a,n=t.x,i=t.y,r=e.x-n,s=e.y-i,o=t.width/2,h=t.height/2;return Math.abs(s)*o>Math.abs(r)*h?(s<0&&(h=-h),l=0===s?0:h*r/s,a=h):(r<0&&(o=-o),l=o,a=0===r?0:o*s/r),{x:n+l,y:i+a}},"intersectRect");function v(t,e){e&&t.attr("style",e)}async function b(t){let e=(0,d.select)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),l=e.append("xhtml:div"),a=t.label;t.label&&(0,h.hasKatex)(t.label)&&(a=await (0,h.renderKatex)(t.label.replace(h.common_default.lineBreakRegex,"\n"),(0,h.getConfig2)()));let n=t.isNode?"nodeLabel":"edgeLabel";return l.html('<span class="'+n+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+a+"</span>"),v(l,t.labelStyle),l.style("display","inline-block"),l.style("padding-right","1px"),l.style("white-space","nowrap"),l.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}(0,h.__name)(v,"applyStyle"),(0,h.__name)(b,"addHtmlLabel");var k=(0,h.__name)(async(t,e,l,a)=>{let n=t||"";if("object"==typeof n&&(n=n[0]),(0,h.evaluate)((0,h.getConfig2)().flowchart.htmlLabels)){n=n.replace(/\\n|\n/g,"<br />"),h.log.info("vertexText"+n);let t={isNode:a,label:(0,o.decodeEntities)(n).replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`),labelStyle:e?e.replace("fill:","color:"):e};return await b(t)}{let t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",e.replace("color:","fill:"));let a=[];for(let e of"string"==typeof n?n.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(n)?n:[]){let a=document.createElementNS("http://www.w3.org/2000/svg","tspan");a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),a.setAttribute("dy","1em"),a.setAttribute("x","0"),l?a.setAttribute("class","title-row"):a.setAttribute("class","row"),a.textContent=e.trim(),t.appendChild(a)}return t}},"createLabel"),M=(0,h.__name)((t,e,l,a,n)=>["M",t+n,e,"H",t+l-n,"A",n,n,0,0,1,t+l,e+n,"V",e+a-n,"A",n,n,0,0,1,t+l-n,e+a,"H",t+n,"A",n,n,0,0,1,t,e+a-n,"V",e+n,"A",n,n,0,0,1,t+n,e,"Z"].join(" "),"createRoundedRectPathD"),$=(0,h.__name)(t=>{let{handDrawnSeed:e}=(0,h.getConfig2)();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:e}},"solidStateFill"),_=(0,h.__name)(t=>{let e=S([...t.cssCompiledStyles||[],...t.cssStyles||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),S=(0,h.__name)(t=>{let e=new Map;return t.forEach(t=>{let[l,a]=t.split(":");e.set(l.trim(),null==a?void 0:a.trim())}),e},"styles2Map"),D=(0,h.__name)(t=>{let{stylesArray:e}=_(t),l=[],a=[],n=[],i=[];return e.forEach(t=>{let e=t[0];"color"===e||"font-size"===e||"font-family"===e||"font-weight"===e||"font-style"===e||"text-decoration"===e||"text-align"===e||"text-transform"===e||"line-height"===e||"letter-spacing"===e||"word-spacing"===e||"text-shadow"===e||"text-overflow"===e||"white-space"===e||"word-wrap"===e||"word-break"===e||"overflow-wrap"===e||"hyphens"===e?l.push(t.join(":")+" !important"):(a.push(t.join(":")+" !important"),e.includes("stroke")&&n.push(t.join(":")+" !important"),"fill"===e&&i.push(t.join(":")+" !important"))}),{labelStyles:l.join(";"),nodeStyles:a.join(";"),stylesArray:e,borderStyles:n,backgroundStyles:i}},"styles2String"),C=(0,h.__name)((t,e)=>{var l;let{themeVariables:a,handDrawnSeed:n}=(0,h.getConfig2)(),{nodeBorder:i,mainBkg:r}=a,{stylesMap:s}=_(t);return Object.assign({roughness:.7,fill:s.get("fill")||r,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:s.get("stroke")||i,seed:n,strokeWidth:(null===(l=s.get("stroke-width"))||void 0===l?void 0:l.replace("px",""))||1.3,fillLineDash:[0,0]},e)},"userNodeOverrides"),P=(0,h.__name)(async(t,e)=>{let l;h.log.info("Creating subgraph rect for ",e.id,e);let a=(0,h.getConfig2)(),{themeVariables:n,handDrawnSeed:i}=a,{clusterBkg:o,clusterBorder:u}=n,{labelStyles:g,nodeStyles:f,borderStyles:p,backgroundStyles:y}=D(e),m=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),x=(0,h.evaluate)(a.flowchart.htmlLabels),v=m.insert("g").attr("class","cluster-label "),b=await (0,s.createText)(v,e.label,{style:e.labelStyle,useHtmlLabels:x,isNode:!0}),k=b.getBBox();if((0,h.evaluate)(a.flowchart.htmlLabels)){let t=b.children[0],e=(0,d.select)(b);k=t.getBoundingClientRect(),e.attr("width",k.width),e.attr("height",k.height)}let $=e.width<=k.width+e.padding?k.width+e.padding:e.width;e.width<=k.width+e.padding?e.diff=($-e.width)/2-e.padding:e.diff=-e.padding;let _=e.height,S=e.x-$/2,P=e.y-_/2;if(h.log.trace("Data ",e,JSON.stringify(e)),"handDrawn"===e.look){let t=c.default.svg(m),a=C(e,{roughness:.7,fill:o,stroke:u,fillWeight:3,seed:i}),n=t.path(M(S,P,$,_,0),a);(l=m.insert(()=>(h.log.debug("Rough node insert CXC",n),n),":first-child")).select("path:nth-child(2)").attr("style",p.join(";")),l.select("path").attr("style",y.join(";").replace("fill","stroke"))}else(l=m.insert("rect",":first-child")).attr("style",f).attr("rx",e.rx).attr("ry",e.ry).attr("x",S).attr("y",P).attr("width",$).attr("height",_);let{subGraphTitleTopMargin:A}=(0,r.getSubGraphTitleMargins)(a);if(v.attr("transform",`translate(${e.x-k.width/2}, ${e.y-e.height/2+A})`),g){let t=v.select("span");t&&t.attr("style",g)}let N=l.node().getBBox();return e.offsetX=0,e.width=N.width,e.height=N.height,e.offsetY=k.height-e.padding/2,e.intersect=function(t){return w(e,t)},{cluster:m,labelBBox:k}},"rect"),A=(0,h.__name)((t,e)=>{let l=t.insert("g").attr("class","note-cluster").attr("id",e.id),a=l.insert("rect",":first-child"),n=0*e.padding,i=n/2;a.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-i).attr("y",e.y-e.height/2-i).attr("width",e.width+n).attr("height",e.height+n).attr("fill","none");let r=a.node().getBBox();return e.width=r.width,e.height=r.height,e.intersect=function(t){return w(e,t)},{cluster:l,labelBBox:{width:0,height:0}}},"noteGroup"),N=(0,h.__name)(async(t,e)=>{let l;let a=(0,h.getConfig2)(),{themeVariables:n,handDrawnSeed:i}=a,{altBackground:r,compositeBackground:s,compositeTitleBackground:o,nodeBorder:u}=n,g=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),f=g.insert("g",":first-child"),p=g.insert("g").attr("class","cluster-label"),y=g.append("rect"),m=p.node().appendChild(await k(e.label,e.labelStyle,void 0,!0)),x=m.getBBox();if((0,h.evaluate)(a.flowchart.htmlLabels)){let t=m.children[0],e=(0,d.select)(m);x=t.getBoundingClientRect(),e.attr("width",x.width),e.attr("height",x.height)}let v=0*e.padding,b=(e.width<=x.width+e.padding?x.width+e.padding:e.width)+v;e.width<=x.width+e.padding?e.diff=(b-e.width)/2-e.padding:e.diff=-e.padding;let $=e.height+v,_=e.height+v-x.height-6,S=e.x-b/2,D=e.y-$/2;e.width=b;let C=e.y-e.height/2-v/2+x.height+2;if("handDrawn"===e.look){let t=e.cssClasses.includes("statediagram-cluster-alt"),a=c.default.svg(g),n=e.rx||e.ry?a.path(M(S,D,b,$,10),{roughness:.7,fill:o,fillStyle:"solid",stroke:u,seed:i}):a.rectangle(S,D,b,$,{seed:i});l=g.insert(()=>n,":first-child");let h=a.rectangle(S,C,b,_,{fill:t?r:s,fillStyle:t?"hachure":"solid",stroke:u,seed:i});l=g.insert(()=>n,":first-child"),y=g.insert(()=>h)}else(l=f.insert("rect",":first-child")).attr("class","outer").attr("x",S).attr("y",D).attr("width",b).attr("height",$).attr("data-look",e.look),y.attr("class","inner").attr("x",S).attr("y",C).attr("width",b).attr("height",_);p.attr("transform",`translate(${e.x-x.width/2}, ${D+1-3*!(0,h.evaluate)(a.flowchart.htmlLabels)})`);let P=l.node().getBBox();return e.height=P.height,e.offsetX=0,e.offsetY=x.height-e.padding/2,e.labelBBox=x,e.intersect=function(t){return w(e,t)},{cluster:g,labelBBox:x}},"roundedWithTitle"),L=(0,h.__name)(async(t,e)=>{let l;h.log.info("Creating subgraph rect for ",e.id,e);let a=(0,h.getConfig2)(),{themeVariables:n,handDrawnSeed:i}=a,{clusterBkg:o,clusterBorder:u}=n,{labelStyles:g,nodeStyles:f,borderStyles:p,backgroundStyles:y}=D(e),m=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),x=(0,h.evaluate)(a.flowchart.htmlLabels),v=m.insert("g").attr("class","cluster-label "),b=await (0,s.createText)(v,e.label,{style:e.labelStyle,useHtmlLabels:x,isNode:!0,width:e.width}),k=b.getBBox();if((0,h.evaluate)(a.flowchart.htmlLabels)){let t=b.children[0],e=(0,d.select)(b);k=t.getBoundingClientRect(),e.attr("width",k.width),e.attr("height",k.height)}let $=e.width<=k.width+e.padding?k.width+e.padding:e.width;e.width<=k.width+e.padding?e.diff=($-e.width)/2-e.padding:e.diff=-e.padding;let _=e.height,S=e.x-$/2,P=e.y-_/2;if(h.log.trace("Data ",e,JSON.stringify(e)),"handDrawn"===e.look){let t=c.default.svg(m),a=C(e,{roughness:.7,fill:o,stroke:u,fillWeight:4,seed:i}),n=t.path(M(S,P,$,_,e.rx),a);(l=m.insert(()=>(h.log.debug("Rough node insert CXC",n),n),":first-child")).select("path:nth-child(2)").attr("style",p.join(";")),l.select("path").attr("style",y.join(";").replace("fill","stroke"))}else(l=m.insert("rect",":first-child")).attr("style",f).attr("rx",e.rx).attr("ry",e.ry).attr("x",S).attr("y",P).attr("width",$).attr("height",_);let{subGraphTitleTopMargin:A}=(0,r.getSubGraphTitleMargins)(a);if(v.attr("transform",`translate(${e.x-k.width/2}, ${e.y-e.height/2+A})`),g){let t=v.select("span");t&&t.attr("style",g)}let N=l.node().getBBox();return e.offsetX=0,e.width=N.width,e.height=N.height,e.offsetY=k.height-e.padding/2,e.intersect=function(t){return w(e,t)},{cluster:m,labelBBox:k}},"kanbanSection"),T={rect:P,squareRect:P,roundedWithTitle:N,noteGroup:A,divider:(0,h.__name)((t,e)=>{let l;let{themeVariables:a,handDrawnSeed:n}=(0,h.getConfig2)(),{nodeBorder:i}=a,r=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),s=r.insert("g",":first-child"),o=0*e.padding,d=e.width+o;e.diff=-e.padding;let u=e.height+o,g=e.x-d/2,f=e.y-u/2;if(e.width=d,"handDrawn"===e.look){let t=c.default.svg(r).rectangle(g,f,d,u,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:i,seed:n});l=r.insert(()=>t,":first-child")}else(l=s.insert("rect",":first-child")).attr("class","divider").attr("x",g).attr("y",f).attr("width",d).attr("height",u).attr("data-look",e.look);let p=l.node().getBBox();return e.height=p.height,e.offsetX=0,e.offsetY=0,e.intersect=function(t){return w(e,t)},{cluster:r,labelBBox:{}}},"divider"),kanbanSection:L},B=new Map,R=(0,h.__name)(async(t,e)=>{let l=e.shape||"rect",a=await T[l](t,e);return B.set(e.id,a),a},"insertCluster"),I=(0,h.__name)(()=>{B=new Map},"clear");function W(t,e,l,a){var n=t.x,i=t.y,r=n-a.x,s=i-a.y,o=Math.sqrt(e*e*s*s+l*l*r*r),h=Math.abs(e*l*r/o);a.x<n&&(h=-h);var d=Math.abs(e*l*s/o);return a.y<i&&(d=-d),{x:n+h,y:i+d}}function O(t,e,l){return W(t,e,e,l)}function E(t,e,l,a){var n,i,r,s,o,h,d,c,u,g,f,p,y;if(n=e.y-t.y,r=t.x-e.x,o=e.x*t.y-t.x*e.y,u=n*l.x+r*l.y+o,g=n*a.x+r*a.y+o,!(0!==u&&0!==g&&z(u,g))){if(i=a.y-l.y,s=l.x-a.x,h=a.x*l.y-l.x*a.y,d=i*t.x+s*t.y+h,c=i*e.x+s*e.y+h,!(0!==d&&0!==c&&z(d,c))&&0!=(f=n*s-i*r))return p=Math.abs(f/2),{x:(y=r*h-s*o)<0?(y-p)/f:(y+p)/f,y:(y=i*o-n*h)<0?(y-p)/f:(y+p)/f}}}function z(t,e){return t*e>0}function H(t,e,l){let a=t.x,n=t.y,i=[],r=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;"function"==typeof e.forEach?e.forEach(function(t){r=Math.min(r,t.x),s=Math.min(s,t.y)}):(r=Math.min(r,e.x),s=Math.min(s,e.y));let o=a-t.width/2-r,h=n-t.height/2-s;for(let a=0;a<e.length;a++){let n=e[a],r=e[a<e.length-1?a+1:0],s=E(t,l,{x:o+n.x,y:h+n.y},{x:o+r.x,y:h+r.y});s&&i.push(s)}return i.length?(i.length>1&&i.sort(function(t,e){let a=t.x-l.x,n=t.y-l.y,i=Math.sqrt(a*a+n*n),r=e.x-l.x,s=e.y-l.y,o=Math.sqrt(r*r+s*s);return i<o?-1:+(i!==o)}),i[0]):t}(0,h.__name)(function(t,e){return t.intersect(e)},"intersectNode"),(0,h.__name)(W,"intersectEllipse"),(0,h.__name)(O,"intersectCircle"),(0,h.__name)(E,"intersectLine"),(0,h.__name)(z,"sameSign"),(0,h.__name)(H,"intersectPolygon");var F={circle:O,polygon:H,rect:w};function j(t,e){let{labelStyles:l}=D(e);e.labelStyle=l;let a=p(e),n=a;a||(n="anchor");let i=t.insert("g").attr("class",n).attr("id",e.domId||e.id),{cssStyles:r}=e,s=c.default.svg(i),d=C(e,{fill:"black",stroke:"none",fillStyle:"solid"});"handDrawn"!==e.look&&(d.roughness=0);let u=s.circle(0,0,2,d),g=i.insert(()=>u,":first-child");return g.attr("class","anchor").attr("style",(0,o.handleUndefinedAttr)(r)),f(e,g),e.intersect=function(t){return h.log.info("Circle intersect",e,1,t),F.circle(e,1,t)},i}function q(t,e,l,a,n,i,r){let s=Math.atan2(a-e,l-t),o=Math.sqrt(((l-t)/2/n)**2+((a-e)/2/i)**2);if(o>1)throw Error("The given radii are too small to create an arc between the points.");let h=Math.sqrt(1-o**2),d=(t+l)/2+h*i*Math.sin(s)*(r?-1:1),c=(e+a)/2-h*n*Math.cos(s)*(r?-1:1),u=Math.atan2((e-c)/i,(t-d)/n),g=Math.atan2((a-c)/i,(l-d)/n)-u;r&&g<0&&(g+=2*Math.PI),!r&&g>0&&(g-=2*Math.PI);let f=[];for(let t=0;t<20;t++){let e=u+t/19*g,l=d+n*Math.cos(e),a=c+i*Math.sin(e);f.push({x:l,y:a})}return f}async function Z(t,e){let{labelStyles:l,nodeStyles:a}=D(e);e.labelStyle=l;let{shapeSvg:n,bbox:i}=await u(t,e,p(e)),r=i.width+e.padding+20,s=i.height+e.padding,o=s/2,h=o/(2.5+s/50),{cssStyles:d}=e,g=[{x:r/2,y:-s/2},{x:-r/2,y:-s/2},...q(-r/2,-s/2,-r/2,s/2,h,o,!1),{x:r/2,y:s/2},...q(r/2,s/2,r/2,-s/2,h,o,!0)],m=c.default.svg(n),x=C(e,{});"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");let w=y(g),v=m.path(w,x),b=n.insert(()=>v,":first-child");return b.attr("class","basic label-container"),d&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",d),a&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",a),b.attr("transform",`translate(${h/2}, 0)`),f(e,b),e.intersect=function(t){return F.polygon(e,g,t)},n}function G(t,e,l,a){return t.insert("polygon",":first-child").attr("points",a.map(function(t){return t.x+","+t.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+l/2+")")}async function V(t,e){let l;let{labelStyles:a,nodeStyles:n}=D(e);e.labelStyle=a;let{shapeSvg:i,bbox:r}=await u(t,e,p(e)),s=r.height+e.padding,o=r.width+e.padding+12,h=-s,d=[{x:12,y:h},{x:o,y:h},{x:o,y:0},{x:0,y:0},{x:0,y:h+12},{x:12,y:h}],{cssStyles:g}=e;if("handDrawn"===e.look){let t=c.default.svg(i),a=C(e,{}),n=y(d),r=t.path(n,a);l=i.insert(()=>r,":first-child").attr("transform",`translate(${-o/2}, ${s/2})`),g&&l.attr("style",g)}else l=G(i,o,s,d);return n&&l.attr("style",n),f(e,l),e.intersect=function(t){return F.polygon(e,d,t)},i}function U(t,e){var l,a;let{nodeStyles:n}=D(e);e.label="";let i=t.insert("g").attr("class",p(e)).attr("id",null!==(l=e.domId)&&void 0!==l?l:e.id),{cssStyles:r}=e,s=Math.max(28,null!==(a=e.width)&&void 0!==a?a:0),o=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],h=c.default.svg(i),d=C(e,{});"handDrawn"!==e.look&&(d.roughness=0,d.fillStyle="solid");let u=y(o),g=h.path(u,d),f=i.insert(()=>g,":first-child");return r&&"handDrawn"!==e.look&&f.selectAll("path").attr("style",r),n&&"handDrawn"!==e.look&&f.selectAll("path").attr("style",n),e.width=28,e.height=28,e.intersect=function(t){return F.polygon(e,o,t)},i}async function J(t,e){let l;let{labelStyles:a,nodeStyles:n}=D(e);e.labelStyle=a;let{shapeSvg:i,bbox:r,halfPadding:s}=await u(t,e,p(e)),d=r.width/2+s,{cssStyles:g}=e;if("handDrawn"===e.look){let t=c.default.svg(i),a=C(e,{}),n=t.circle(0,0,2*d,a);(l=i.insert(()=>n,":first-child")).attr("class","basic label-container").attr("style",(0,o.handleUndefinedAttr)(g))}else l=i.insert("circle",":first-child").attr("class","basic label-container").attr("style",n).attr("r",d).attr("cx",0).attr("cy",0);return f(e,l),e.intersect=function(t){return h.log.info("Circle intersect",e,d,t),F.circle(e,d,t)},i}function X(t){let e=Math.cos(Math.PI/4),l=Math.sin(Math.PI/4),a=2*t,n={x:a/2*e,y:a/2*l},i={x:-(a/2)*e,y:a/2*l},r={x:-(a/2)*e,y:-(a/2)*l},s={x:a/2*e,y:-(a/2)*l};return`M ${i.x},${i.y} L ${s.x},${s.y}
                   M ${n.x},${n.y} L ${r.x},${r.y}`}function Q(t,e){var l,a;let{labelStyles:n,nodeStyles:i}=D(e);e.labelStyle=n,e.label="";let r=t.insert("g").attr("class",p(e)).attr("id",null!==(l=e.domId)&&void 0!==l?l:e.id),s=Math.max(30,null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),{cssStyles:o}=e,d=c.default.svg(r),u=C(e,{});"handDrawn"!==e.look&&(u.roughness=0,u.fillStyle="solid");let g=d.circle(0,0,2*s,u),y=X(s),m=d.path(y,u),x=r.insert(()=>g,":first-child");return x.insert(()=>m),o&&"handDrawn"!==e.look&&x.selectAll("path").attr("style",o),i&&"handDrawn"!==e.look&&x.selectAll("path").attr("style",i),f(e,x),e.intersect=function(t){return h.log.info("crossedCircle intersect",e,{radius:s,point:t}),F.circle(e,s,t)},r}function K(t,e,l){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:180,r=[],s=n*Math.PI/180,o=(i*Math.PI/180-s)/(a-1);for(let n=0;n<a;n++){let a=s+n*o,i=t+l*Math.cos(a),h=e+l*Math.sin(a);r.push({x:-i,y:-h})}return r}async function Y(t,e){var l,a,n,i,r;let{labelStyles:s,nodeStyles:o}=D(e);e.labelStyle=s;let{shapeSvg:h,bbox:d,label:g}=await u(t,e,p(e)),m=d.width+(null!==(l=e.padding)&&void 0!==l?l:0),x=d.height+(null!==(a=e.padding)&&void 0!==a?a:0),w=Math.max(5,.1*x),{cssStyles:v}=e,b=[...K(m/2,-x/2,w,30,-90,0),{x:-m/2-w,y:w},...K(m/2+2*w,-w,w,20,-180,-270),...K(m/2+2*w,w,w,20,-90,-180),{x:-m/2-w,y:-x/2},...K(m/2,x/2,w,20,0,90)],k=[{x:m/2,y:-x/2-w},{x:-m/2,y:-x/2-w},...K(m/2,-x/2,w,20,-90,0),{x:-m/2-w,y:-w},...K(m/2+.1*m,-w,w,20,-180,-270),...K(m/2+.1*m,w,w,20,-90,-180),{x:-m/2-w,y:x/2},...K(m/2,x/2,w,20,0,90),{x:-m/2,y:x/2+w},{x:m/2,y:x/2+w}],M=c.default.svg(h),$=C(e,{fill:"none"});"handDrawn"!==e.look&&($.roughness=0,$.fillStyle="solid");let _=y(b).replace("Z",""),S=M.path(_,$),P=y(k),A=M.path(P,{...$}),N=h.insert("g",":first-child");return N.insert(()=>A,":first-child").attr("stroke-opacity",0),N.insert(()=>S,":first-child"),N.attr("class","text"),v&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",v),o&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",o),N.attr("transform",`translate(${w}, 0)`),g.attr("transform",`translate(${-m/2+w-(d.x-(null!==(n=d.left)&&void 0!==n?n:0))},${-x/2+(null!==(i=e.padding)&&void 0!==i?i:0)/2-(d.y-(null!==(r=d.top)&&void 0!==r?r:0))})`),f(e,N),e.intersect=function(t){return F.polygon(e,k,t)},h}function tt(t,e,l){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:180,r=[],s=n*Math.PI/180,o=(i*Math.PI/180-s)/(a-1);for(let n=0;n<a;n++){let a=s+n*o,i=t+l*Math.cos(a),h=e+l*Math.sin(a);r.push({x:i,y:h})}return r}async function te(t,e){var l,a,n,i,r,s;let{labelStyles:o,nodeStyles:h}=D(e);e.labelStyle=o;let{shapeSvg:d,bbox:g,label:m}=await u(t,e,p(e)),x=g.width+(null!==(l=e.padding)&&void 0!==l?l:0),w=g.height+(null!==(a=e.padding)&&void 0!==a?a:0),v=Math.max(5,.1*w),{cssStyles:b}=e,k=[...tt(x/2,-w/2,v,20,-90,0),{x:x/2+v,y:-v},...tt(x/2+2*v,-v,v,20,-180,-270),...tt(x/2+2*v,v,v,20,-90,-180),{x:x/2+v,y:w/2},...tt(x/2,w/2,v,20,0,90)],M=[{x:-x/2,y:-w/2-v},{x:x/2,y:-w/2-v},...tt(x/2,-w/2,v,20,-90,0),{x:x/2+v,y:-v},...tt(x/2+2*v,-v,v,20,-180,-270),...tt(x/2+2*v,v,v,20,-90,-180),{x:x/2+v,y:w/2},...tt(x/2,w/2,v,20,0,90),{x:x/2,y:w/2+v},{x:-x/2,y:w/2+v}],$=c.default.svg(d),_=C(e,{fill:"none"});"handDrawn"!==e.look&&(_.roughness=0,_.fillStyle="solid");let S=y(k).replace("Z",""),P=$.path(S,_),A=y(M),N=$.path(A,{..._}),L=d.insert("g",":first-child");return L.insert(()=>N,":first-child").attr("stroke-opacity",0),L.insert(()=>P,":first-child"),L.attr("class","text"),b&&"handDrawn"!==e.look&&L.selectAll("path").attr("style",b),h&&"handDrawn"!==e.look&&L.selectAll("path").attr("style",h),L.attr("transform",`translate(${-v}, 0)`),m.attr("transform",`translate(${-x/2+(null!==(n=e.padding)&&void 0!==n?n:0)/2-(g.x-(null!==(i=g.left)&&void 0!==i?i:0))},${-w/2+(null!==(r=e.padding)&&void 0!==r?r:0)/2-(g.y-(null!==(s=g.top)&&void 0!==s?s:0))})`),f(e,L),e.intersect=function(t){return F.polygon(e,M,t)},d}function tl(t,e,l){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:180,r=[],s=n*Math.PI/180,o=(i*Math.PI/180-s)/(a-1);for(let n=0;n<a;n++){let a=s+n*o,i=t+l*Math.cos(a),h=e+l*Math.sin(a);r.push({x:-i,y:-h})}return r}async function ta(t,e){var l,a,n,i,r,s;let{labelStyles:o,nodeStyles:h}=D(e);e.labelStyle=o;let{shapeSvg:d,bbox:g,label:m}=await u(t,e,p(e)),x=g.width+(null!==(l=e.padding)&&void 0!==l?l:0),w=g.height+(null!==(a=e.padding)&&void 0!==a?a:0),v=Math.max(5,.1*w),{cssStyles:b}=e,k=[...tl(x/2,-w/2,v,30,-90,0),{x:-x/2-v,y:v},...tl(x/2+2*v,-v,v,20,-180,-270),...tl(x/2+2*v,v,v,20,-90,-180),{x:-x/2-v,y:-w/2},...tl(x/2,w/2,v,20,0,90)],M=[...tl(-x/2+v+v/2,-w/2,v,20,-90,-180),{x:x/2-v/2,y:v},...tl(-x/2-v/2,-v,v,20,0,90),...tl(-x/2-v/2,v,v,20,-90,0),{x:x/2-v/2,y:-v},...tl(-x/2+v+v/2,w/2,v,30,-180,-270)],$=[{x:x/2,y:-w/2-v},{x:-x/2,y:-w/2-v},...tl(x/2,-w/2,v,20,-90,0),{x:-x/2-v,y:-v},...tl(x/2+2*v,-v,v,20,-180,-270),...tl(x/2+2*v,v,v,20,-90,-180),{x:-x/2-v,y:w/2},...tl(x/2,w/2,v,20,0,90),{x:-x/2,y:w/2+v},{x:x/2-v-v/2,y:w/2+v},...tl(-x/2+v+v/2,-w/2,v,20,-90,-180),{x:x/2-v/2,y:v},...tl(-x/2-v/2,-v,v,20,0,90),...tl(-x/2-v/2,v,v,20,-90,0),{x:x/2-v/2,y:-v},...tl(-x/2+v+v/2,w/2,v,30,-180,-270)],_=c.default.svg(d),S=C(e,{fill:"none"});"handDrawn"!==e.look&&(S.roughness=0,S.fillStyle="solid");let P=y(k).replace("Z",""),A=_.path(P,S),N=y(M).replace("Z",""),L=_.path(N,S),T=y($),B=_.path(T,{...S}),R=d.insert("g",":first-child");return R.insert(()=>B,":first-child").attr("stroke-opacity",0),R.insert(()=>A,":first-child"),R.insert(()=>L,":first-child"),R.attr("class","text"),b&&"handDrawn"!==e.look&&R.selectAll("path").attr("style",b),h&&"handDrawn"!==e.look&&R.selectAll("path").attr("style",h),R.attr("transform",`translate(${v-v/4}, 0)`),m.attr("transform",`translate(${-x/2+(null!==(n=e.padding)&&void 0!==n?n:0)/2-(g.x-(null!==(i=g.left)&&void 0!==i?i:0))},${-w/2+(null!==(r=e.padding)&&void 0!==r?r:0)/2-(g.y-(null!==(s=g.top)&&void 0!==s?s:0))})`),f(e,R),e.intersect=function(t){return F.polygon(e,$,t)},d}async function tn(t,e){var l,a,n,i;let{labelStyles:r,nodeStyles:s}=D(e);e.labelStyle=r;let{shapeSvg:o,bbox:h}=await u(t,e,p(e)),d=Math.max(80,(h.width+(null!==(l=e.padding)&&void 0!==l?l:0)*2)*1.25,null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),g=Math.max(20,h.height+(null!==(n=e.padding)&&void 0!==n?n:0)*2,null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0),m=g/2,{cssStyles:w}=e,v=c.default.svg(o),b=C(e,{});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");let k=d-m,M=g/4,$=[{x:k,y:0},{x:M,y:0},{x:0,y:g/2},{x:M,y:g},{x:k,y:g},...x(-k,-g/2,m,50,270,90)],_=y($),S=v.path(_,b),P=o.insert(()=>S,":first-child");return P.attr("class","basic label-container"),w&&"handDrawn"!==e.look&&P.selectChildren("path").attr("style",w),s&&"handDrawn"!==e.look&&P.selectChildren("path").attr("style",s),P.attr("transform",`translate(${-d/2}, ${-g/2})`),f(e,P),e.intersect=function(t){return F.polygon(e,$,t)},o}(0,h.__name)(j,"anchor"),(0,h.__name)(q,"generateArcPoints"),(0,h.__name)(Z,"bowTieRect"),(0,h.__name)(G,"insertPolygonShape"),(0,h.__name)(V,"card"),(0,h.__name)(U,"choice"),(0,h.__name)(J,"circle"),(0,h.__name)(X,"createLine"),(0,h.__name)(Q,"crossedCircle"),(0,h.__name)(K,"generateCirclePoints"),(0,h.__name)(Y,"curlyBraceLeft"),(0,h.__name)(tt,"generateCirclePoints"),(0,h.__name)(te,"curlyBraceRight"),(0,h.__name)(tl,"generateCirclePoints"),(0,h.__name)(ta,"curlyBraces"),(0,h.__name)(tn,"curvedTrapezoid");var ti=(0,h.__name)((t,e,l,a,n,i)=>`M${t},${e+i} a${n},${i} 0,0,0 ${l},0 a${n},${i} 0,0,0 ${-l},0 l0,${a} a${n},${i} 0,0,0 ${l},0 l0,${-a}`,"createCylinderPathD"),tr=(0,h.__name)((t,e,l,a,n,i)=>`M${t},${e+i} M${t+l},${e+i} a${n},${i} 0,0,0 ${-l},0 l0,${a} a${n},${i} 0,0,0 ${l},0 l0,${-a}`,"createOuterCylinderPathD"),ts=(0,h.__name)((t,e,l,a,n,i)=>`M${t-l/2},${-a/2} a${n},${i} 0,0,0 ${l},0`,"createInnerCylinderPathD");async function to(t,e){var l,a,n,i,r;let s;let{labelStyles:h,nodeStyles:d}=D(e);e.labelStyle=h;let{shapeSvg:g,bbox:y,label:m}=await u(t,e,p(e)),x=Math.max(y.width+e.padding,null!==(l=e.width)&&void 0!==l?l:0),w=x/2,v=w/(2.5+x/50),b=Math.max(y.height+v+e.padding,null!==(a=e.height)&&void 0!==a?a:0),{cssStyles:k}=e;if("handDrawn"===e.look){let t=c.default.svg(g),l=tr(0,0,x,b,w,v),a=ts(0,v,x,b,w,v),n=t.path(l,C(e,{})),i=t.path(a,C(e,{fill:"none"}));s=g.insert(()=>i,":first-child"),(s=g.insert(()=>n,":first-child")).attr("class","basic label-container"),k&&s.attr("style",k)}else{let t=ti(0,0,x,b,w,v);s=g.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,o.handleUndefinedAttr)(k)).attr("style",d)}return s.attr("label-offset-y",v),s.attr("transform",`translate(${-x/2}, ${-(b/2+v)})`),f(e,s),m.attr("transform",`translate(${-(y.width/2)-(y.x-(null!==(n=y.left)&&void 0!==n?n:0))}, ${-(y.height/2)+(null!==(i=e.padding)&&void 0!==i?i:0)/1.5-(y.y-(null!==(r=y.top)&&void 0!==r?r:0))})`),e.intersect=function(t){var l,a,n,i,r,s;let o=F.rect(e,t),h=o.x-(null!==(l=e.x)&&void 0!==l?l:0);if(0!=w&&(Math.abs(h)<(null!==(a=e.width)&&void 0!==a?a:0)/2||Math.abs(h)==(null!==(n=e.width)&&void 0!==n?n:0)/2&&Math.abs(o.y-(null!==(i=e.y)&&void 0!==i?i:0))>(null!==(r=e.height)&&void 0!==r?r:0)/2-v)){let l=v*v*(1-h*h/(w*w));l>0&&(l=Math.sqrt(l)),l=v-l,t.y-(null!==(s=e.y)&&void 0!==s?s:0)>0&&(l=-l),o.y+=l}return o},g}async function th(t,e){var l,a,n,i;let{labelStyles:r,nodeStyles:s}=D(e);e.labelStyle=r;let{shapeSvg:o,bbox:h,label:d}=await u(t,e,p(e)),g=h.width+e.padding,y=h.height+e.padding,m=.2*y,x=-g/2,w=-y/2-m/2,{cssStyles:v}=e,b=c.default.svg(o),k=C(e,{});"handDrawn"!==e.look&&(k.roughness=0,k.fillStyle="solid");let M=b.polygon([{x,y:w+m},{x:-x,y:w+m},{x:-x,y:-w},{x,y:-w},{x,y:w},{x:-x,y:w},{x:-x,y:w+m}].map(t=>[t.x,t.y]),k),$=o.insert(()=>M,":first-child");return $.attr("class","basic label-container"),v&&"handDrawn"!==e.look&&$.selectAll("path").attr("style",v),s&&"handDrawn"!==e.look&&$.selectAll("path").attr("style",s),d.attr("transform",`translate(${x+(null!==(l=e.padding)&&void 0!==l?l:0)/2-(h.x-(null!==(a=h.left)&&void 0!==a?a:0))}, ${w+m+(null!==(n=e.padding)&&void 0!==n?n:0)/2-(h.y-(null!==(i=h.top)&&void 0!==i?i:0))})`),f(e,$),e.intersect=function(t){return F.rect(e,t)},o}async function td(t,e){let l;let{labelStyles:a,nodeStyles:n}=D(e);e.labelStyle=a;let{shapeSvg:i,bbox:r,halfPadding:s}=await u(t,e,p(e)),d=r.width/2+s+5,g=r.width/2+s,{cssStyles:y}=e;if("handDrawn"===e.look){var m,x;let t=c.default.svg(i),a=C(e,{roughness:.2,strokeWidth:2.5}),n=C(e,{roughness:.2,strokeWidth:1.5}),r=t.circle(0,0,2*d,a),s=t.circle(0,0,2*g,n);(l=i.insert("g",":first-child")).attr("class",(0,o.handleUndefinedAttr)(e.cssClasses)).attr("style",(0,o.handleUndefinedAttr)(y)),null===(m=l.node())||void 0===m||m.appendChild(r),null===(x=l.node())||void 0===x||x.appendChild(s)}else{let t=(l=i.insert("g",":first-child")).insert("circle",":first-child"),e=l.insert("circle");l.attr("class","basic label-container").attr("style",n),t.attr("class","outer-circle").attr("style",n).attr("r",d).attr("cx",0).attr("cy",0),e.attr("class","inner-circle").attr("style",n).attr("r",g).attr("cx",0).attr("cy",0)}return f(e,l),e.intersect=function(t){return h.log.info("DoubleCircle intersect",e,d,t),F.circle(e,d,t)},i}function tc(t,e,l){var a;let{config:{themeVariables:n}}=l,{labelStyles:i,nodeStyles:r}=D(e);e.label="",e.labelStyle=i;let s=t.insert("g").attr("class",p(e)).attr("id",null!==(a=e.domId)&&void 0!==a?a:e.id),{cssStyles:o}=e,d=c.default.svg(s),{nodeBorder:u}=n,g=C(e,{fillStyle:"solid"});"handDrawn"!==e.look&&(g.roughness=0);let y=d.circle(0,0,14,g),m=s.insert(()=>y,":first-child");return m.selectAll("path").attr("style",`fill: ${u} !important;`),o&&o.length>0&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",o),r&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",r),f(e,m),e.intersect=function(t){return h.log.info("filledCircle intersect",e,{radius:7,point:t}),F.circle(e,7,t)},s}async function tu(t,e){var l,a,n,i;let{labelStyles:r,nodeStyles:s}=D(e);e.labelStyle=r;let{shapeSvg:o,bbox:d,label:g}=await u(t,e,p(e)),m=d.width+(null!==(l=e.padding)&&void 0!==l?l:0),x=m+d.height,w=m+d.height,v=[{x:0,y:-x},{x:w,y:-x},{x:w/2,y:0}],{cssStyles:b}=e,k=c.default.svg(o),M=C(e,{});"handDrawn"!==e.look&&(M.roughness=0,M.fillStyle="solid");let $=y(v),_=k.path($,M),S=o.insert(()=>_,":first-child").attr("transform",`translate(${-x/2}, ${x/2})`);return b&&"handDrawn"!==e.look&&S.selectChildren("path").attr("style",b),s&&"handDrawn"!==e.look&&S.selectChildren("path").attr("style",s),e.width=m,e.height=x,f(e,S),g.attr("transform",`translate(${-d.width/2-(d.x-(null!==(a=d.left)&&void 0!==a?a:0))}, ${-x/2+(null!==(n=e.padding)&&void 0!==n?n:0)/2+(d.y-(null!==(i=d.top)&&void 0!==i?i:0))})`),e.intersect=function(t){return h.log.info("Triangle intersect",e,v,t),F.polygon(e,v,t)},o}function tg(t,e,l){var a,n,i,r,s,o;let{dir:h,config:{state:d,themeVariables:u}}=l,{nodeStyles:g}=D(e);e.label="";let y=t.insert("g").attr("class",p(e)).attr("id",null!==(a=e.domId)&&void 0!==a?a:e.id),{cssStyles:m}=e,x=Math.max(70,null!==(n=null==e?void 0:e.width)&&void 0!==n?n:0),w=Math.max(10,null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0);"LR"===h&&(x=Math.max(10,null!==(r=null==e?void 0:e.width)&&void 0!==r?r:0),w=Math.max(70,null!==(s=null==e?void 0:e.height)&&void 0!==s?s:0));let v=-1*x/2,b=-1*w/2,k=c.default.svg(y),M=C(e,{stroke:u.lineColor,fill:u.lineColor});"handDrawn"!==e.look&&(M.roughness=0,M.fillStyle="solid");let $=k.rectangle(v,b,x,w,M),_=y.insert(()=>$,":first-child");m&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",m),g&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",g),f(e,_);let S=null!==(o=null==d?void 0:d.padding)&&void 0!==o?o:0;return e.width&&e.height&&(e.width+=S/2||0,e.height+=S/2||0),e.intersect=function(t){return F.rect(e,t)},y}async function tf(t,e){var l,a,n,i;let{labelStyles:r,nodeStyles:s}=D(e);e.labelStyle=r;let{shapeSvg:o,bbox:d}=await u(t,e,p(e)),g=Math.max(80,d.width+(null!==(l=e.padding)&&void 0!==l?l:0)*2,null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),m=Math.max(50,d.height+(null!==(n=e.padding)&&void 0!==n?n:0)*2,null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0),w=m/2,{cssStyles:v}=e,b=c.default.svg(o),k=C(e,{});"handDrawn"!==e.look&&(k.roughness=0,k.fillStyle="solid");let M=[{x:-g/2,y:-m/2},{x:g/2-w,y:-m/2},...x(-g/2+w,0,w,50,90,270),{x:g/2-w,y:m/2},{x:-g/2,y:m/2}],$=y(M),_=b.path($,k),S=o.insert(()=>_,":first-child");return S.attr("class","basic label-container"),v&&"handDrawn"!==e.look&&S.selectChildren("path").attr("style",v),s&&"handDrawn"!==e.look&&S.selectChildren("path").attr("style",s),f(e,S),e.intersect=function(t){return h.log.info("Pill intersect",e,{radius:w,point:t}),F.polygon(e,M,t)},o}(0,h.__name)(to,"cylinder"),(0,h.__name)(th,"dividedRectangle"),(0,h.__name)(td,"doublecircle"),(0,h.__name)(tc,"filledCircle"),(0,h.__name)(tu,"flippedTriangle"),(0,h.__name)(tg,"forkJoin"),(0,h.__name)(tf,"halfRoundedRectangle");var tp=(0,h.__name)((t,e,l,a,n)=>`M${t+n},${e} L${t+l-n},${e} L${t+l},${e-a/2} L${t+l-n},${e-a} L${t+n},${e-a} L${t},${e-a/2} Z`,"createHexagonPathD");async function ty(t,e){let l;let{labelStyles:a,nodeStyles:n}=D(e);e.labelStyle=a;let{shapeSvg:i,bbox:r}=await u(t,e,p(e)),s=r.height+e.padding,o=s/4,h=r.width+2*o+e.padding,d=[{x:o,y:0},{x:h-o,y:0},{x:h,y:-s/2},{x:h-o,y:-s},{x:o,y:-s},{x:0,y:-s/2}],{cssStyles:g}=e;if("handDrawn"===e.look){let t=c.default.svg(i),a=C(e,{}),n=tp(0,0,h,s,o),r=t.path(n,a);l=i.insert(()=>r,":first-child").attr("transform",`translate(${-h/2}, ${s/2})`),g&&l.attr("style",g)}else l=G(i,h,s,d);return n&&l.attr("style",n),e.width=h,e.height=s,f(e,l),e.intersect=function(t){return F.polygon(e,d,t)},i}async function tm(t,e){var l,a;let{labelStyles:n,nodeStyles:i}=D(e);e.label="",e.labelStyle=n;let{shapeSvg:r}=await u(t,e,p(e)),s=Math.max(30,null!==(l=null==e?void 0:e.width)&&void 0!==l?l:0),o=Math.max(30,null!==(a=null==e?void 0:e.height)&&void 0!==a?a:0),{cssStyles:d}=e,g=c.default.svg(r),m=C(e,{});"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");let x=[{x:0,y:0},{x:s,y:0},{x:0,y:o},{x:s,y:o}],w=y(x),v=g.path(w,m),b=r.insert(()=>v,":first-child");return b.attr("class","basic label-container"),d&&"handDrawn"!==e.look&&b.selectChildren("path").attr("style",d),i&&"handDrawn"!==e.look&&b.selectChildren("path").attr("style",i),b.attr("transform",`translate(${-s/2}, ${-o/2})`),f(e,b),e.intersect=function(t){return h.log.info("Pill intersect",e,{points:x}),F.polygon(e,x,t)},r}async function tx(t,e,l){var a,n,r,s;let{config:{themeVariables:o,flowchart:d}}=l,{labelStyles:g}=D(e);e.labelStyle=g;let p=Math.max(null!==(a=e.assetHeight)&&void 0!==a?a:48,null!==(n=e.assetWidth)&&void 0!==n?n:48),y=null==d?void 0:d.wrappingWidth;e.width=Math.max(p,null!=y?y:0);let{shapeSvg:m,bbox:x,label:w}=await u(t,e,"icon-shape default"),v="t"===e.pos,{nodeBorder:b}=o,{stylesMap:k}=_(e),M=-p/2,$=-p/2,S=8*!!e.label,P=c.default.svg(m),A=C(e,{stroke:"none",fill:"none"});"handDrawn"!==e.look&&(A.roughness=0,A.fillStyle="solid");let N=P.rectangle(M,$,p,p,A),L=Math.max(p,x.width),T=p+x.height+S,B=P.rectangle(-L/2,-T/2,L,T,{...A,fill:"transparent",stroke:"none"}),R=m.insert(()=>N,":first-child"),I=m.insert(()=>B);if(e.icon){let t=m.append("g");t.html(`<g>${await (0,i.getIconSVG)(e.icon,{height:p,width:p,fallbackPrefix:""})}</g>`);let l=t.node().getBBox(),a=l.width,n=l.height,s=l.x,o=l.y;t.attr("transform",`translate(${-a/2-s},${v?x.height/2+S/2-n/2-o:-x.height/2-S/2-n/2-o})`),t.attr("style",`color: ${null!==(r=k.get("stroke"))&&void 0!==r?r:b};`)}return w.attr("transform",`translate(${-x.width/2-(x.x-(null!==(s=x.left)&&void 0!==s?s:0))},${v?-T/2:T/2-x.height})`),R.attr("transform",`translate(0,${v?x.height/2+S/2:-x.height/2-S/2})`),f(e,I),e.intersect=function(t){var l,a,n;if(h.log.info("iconSquare intersect",e,t),!e.label)return F.rect(e,t);let i=null!==(l=e.x)&&void 0!==l?l:0,r=null!==(a=e.y)&&void 0!==a?a:0,s=null!==(n=e.height)&&void 0!==n?n:0,o=[];return o=v?[{x:i-x.width/2,y:r-s/2},{x:i+x.width/2,y:r-s/2},{x:i+x.width/2,y:r-s/2+x.height+S},{x:i+p/2,y:r-s/2+x.height+S},{x:i+p/2,y:r+s/2},{x:i-p/2,y:r+s/2},{x:i-p/2,y:r-s/2+x.height+S},{x:i-x.width/2,y:r-s/2+x.height+S}]:[{x:i-p/2,y:r-s/2},{x:i+p/2,y:r-s/2},{x:i+p/2,y:r-s/2+p},{x:i+x.width/2,y:r-s/2+p},{x:i+x.width/2/2,y:r+s/2},{x:i-x.width/2,y:r+s/2},{x:i-x.width/2,y:r-s/2+p},{x:i-p/2,y:r-s/2+p}],F.polygon(e,o,t)},m}async function tw(t,e,l){var a,n,r,s;let{config:{themeVariables:o,flowchart:d}}=l,{labelStyles:g}=D(e);e.labelStyle=g;let p=Math.max(null!==(a=e.assetHeight)&&void 0!==a?a:48,null!==(n=e.assetWidth)&&void 0!==n?n:48),y=null==d?void 0:d.wrappingWidth;e.width=Math.max(p,null!=y?y:0);let{shapeSvg:m,bbox:x,label:w}=await u(t,e,"icon-shape default"),v=8*!!e.label,b="t"===e.pos,{nodeBorder:k,mainBkg:M}=o,{stylesMap:$}=_(e),S=c.default.svg(m),P=C(e,{});"handDrawn"!==e.look&&(P.roughness=0,P.fillStyle="solid");let A=$.get("fill");P.stroke=null!=A?A:M;let N=m.append("g");e.icon&&N.html(`<g>${await (0,i.getIconSVG)(e.icon,{height:p,width:p,fallbackPrefix:""})}</g>`);let L=N.node().getBBox(),T=L.width,B=L.height,R=L.x,I=L.y,W=Math.max(T,B)*Math.SQRT2+40,O=S.circle(0,0,W,P),E=Math.max(W,x.width),z=W+x.height+v,H=S.rectangle(-E/2,-z/2,E,z,{...P,fill:"transparent",stroke:"none"}),j=m.insert(()=>O,":first-child"),q=m.insert(()=>H);return N.attr("transform",`translate(${-T/2-R},${b?x.height/2+v/2-B/2-I:-x.height/2-v/2-B/2-I})`),N.attr("style",`color: ${null!==(r=$.get("stroke"))&&void 0!==r?r:k};`),w.attr("transform",`translate(${-x.width/2-(x.x-(null!==(s=x.left)&&void 0!==s?s:0))},${b?-z/2:z/2-x.height})`),j.attr("transform",`translate(0,${b?x.height/2+v/2:-x.height/2-v/2})`),f(e,q),e.intersect=function(t){return h.log.info("iconSquare intersect",e,t),F.rect(e,t)},m}async function tv(t,e,l){var a,n,r,s;let{config:{themeVariables:o,flowchart:d}}=l,{labelStyles:g}=D(e);e.labelStyle=g;let p=Math.max(null!==(a=e.assetHeight)&&void 0!==a?a:48,null!==(n=e.assetWidth)&&void 0!==n?n:48),y=null==d?void 0:d.wrappingWidth;e.width=Math.max(p,null!=y?y:0);let{shapeSvg:m,bbox:x,halfPadding:w,label:v}=await u(t,e,"icon-shape default"),b="t"===e.pos,k=p+2*w,$=p+2*w,{nodeBorder:S,mainBkg:P}=o,{stylesMap:A}=_(e),N=8*!!e.label,L=c.default.svg(m),T=C(e,{});"handDrawn"!==e.look&&(T.roughness=0,T.fillStyle="solid");let B=A.get("fill");T.stroke=null!=B?B:P;let R=L.path(M(-$/2,-k/2,$,k,5),T),I=Math.max($,x.width),W=k+x.height+N,O=L.rectangle(-I/2,-W/2,I,W,{...T,fill:"transparent",stroke:"none"}),E=m.insert(()=>R,":first-child").attr("class","icon-shape2"),z=m.insert(()=>O);if(e.icon){let t=m.append("g");t.html(`<g>${await (0,i.getIconSVG)(e.icon,{height:p,width:p,fallbackPrefix:""})}</g>`);let l=t.node().getBBox(),a=l.width,n=l.height,s=l.x,o=l.y;t.attr("transform",`translate(${-a/2-s},${b?x.height/2+N/2-n/2-o:-x.height/2-N/2-n/2-o})`),t.attr("style",`color: ${null!==(r=A.get("stroke"))&&void 0!==r?r:S};`)}return v.attr("transform",`translate(${-x.width/2-(x.x-(null!==(s=x.left)&&void 0!==s?s:0))},${b?-W/2:W/2-x.height})`),E.attr("transform",`translate(0,${b?x.height/2+N/2:-x.height/2-N/2})`),f(e,z),e.intersect=function(t){var l,a,n;if(h.log.info("iconSquare intersect",e,t),!e.label)return F.rect(e,t);let i=null!==(l=e.x)&&void 0!==l?l:0,r=null!==(a=e.y)&&void 0!==a?a:0,s=null!==(n=e.height)&&void 0!==n?n:0,o=[];return o=b?[{x:i-x.width/2,y:r-s/2},{x:i+x.width/2,y:r-s/2},{x:i+x.width/2,y:r-s/2+x.height+N},{x:i+$/2,y:r-s/2+x.height+N},{x:i+$/2,y:r+s/2},{x:i-$/2,y:r+s/2},{x:i-$/2,y:r-s/2+x.height+N},{x:i-x.width/2,y:r-s/2+x.height+N}]:[{x:i-$/2,y:r-s/2},{x:i+$/2,y:r-s/2},{x:i+$/2,y:r-s/2+k},{x:i+x.width/2,y:r-s/2+k},{x:i+x.width/2/2,y:r+s/2},{x:i-x.width/2,y:r+s/2},{x:i-x.width/2,y:r-s/2+k},{x:i-$/2,y:r-s/2+k}],F.polygon(e,o,t)},m}async function tb(t,e,l){var a,n,r,s;let{config:{themeVariables:o,flowchart:d}}=l,{labelStyles:g}=D(e);e.labelStyle=g;let p=Math.max(null!==(a=e.assetHeight)&&void 0!==a?a:48,null!==(n=e.assetWidth)&&void 0!==n?n:48),y=null==d?void 0:d.wrappingWidth;e.width=Math.max(p,null!=y?y:0);let{shapeSvg:m,bbox:x,halfPadding:w,label:v}=await u(t,e,"icon-shape default"),b="t"===e.pos,k=p+2*w,$=p+2*w,{nodeBorder:S,mainBkg:P}=o,{stylesMap:A}=_(e),N=8*!!e.label,L=c.default.svg(m),T=C(e,{});"handDrawn"!==e.look&&(T.roughness=0,T.fillStyle="solid");let B=A.get("fill");T.stroke=null!=B?B:P;let R=L.path(M(-$/2,-k/2,$,k,.1),T),I=Math.max($,x.width),W=k+x.height+N,O=L.rectangle(-I/2,-W/2,I,W,{...T,fill:"transparent",stroke:"none"}),E=m.insert(()=>R,":first-child"),z=m.insert(()=>O);if(e.icon){let t=m.append("g");t.html(`<g>${await (0,i.getIconSVG)(e.icon,{height:p,width:p,fallbackPrefix:""})}</g>`);let l=t.node().getBBox(),a=l.width,n=l.height,s=l.x,o=l.y;t.attr("transform",`translate(${-a/2-s},${b?x.height/2+N/2-n/2-o:-x.height/2-N/2-n/2-o})`),t.attr("style",`color: ${null!==(r=A.get("stroke"))&&void 0!==r?r:S};`)}return v.attr("transform",`translate(${-x.width/2-(x.x-(null!==(s=x.left)&&void 0!==s?s:0))},${b?-W/2:W/2-x.height})`),E.attr("transform",`translate(0,${b?x.height/2+N/2:-x.height/2-N/2})`),f(e,z),e.intersect=function(t){var l,a,n;if(h.log.info("iconSquare intersect",e,t),!e.label)return F.rect(e,t);let i=null!==(l=e.x)&&void 0!==l?l:0,r=null!==(a=e.y)&&void 0!==a?a:0,s=null!==(n=e.height)&&void 0!==n?n:0,o=[];return o=b?[{x:i-x.width/2,y:r-s/2},{x:i+x.width/2,y:r-s/2},{x:i+x.width/2,y:r-s/2+x.height+N},{x:i+$/2,y:r-s/2+x.height+N},{x:i+$/2,y:r+s/2},{x:i-$/2,y:r+s/2},{x:i-$/2,y:r-s/2+x.height+N},{x:i-x.width/2,y:r-s/2+x.height+N}]:[{x:i-$/2,y:r-s/2},{x:i+$/2,y:r-s/2},{x:i+$/2,y:r-s/2+k},{x:i+x.width/2,y:r-s/2+k},{x:i+x.width/2/2,y:r+s/2},{x:i-x.width/2,y:r+s/2},{x:i-x.width/2,y:r-s/2+k},{x:i-$/2,y:r-s/2+k}],F.polygon(e,o,t)},m}async function tk(t,e,l){var a,i,r,s;let{config:{flowchart:o}}=l,d=new Image;d.src=(0,n.filterUrlModule)(null!==(a=null==e?void 0:e.img)&&void 0!==a?a:"",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%p0T1d0-$ZqbDBZakpTT$dKSFZucE1l$F-zWW01Q2RFd3lN$3hq-lR*b1lWZFNR$TF$%lhWT1F6%jR%REkxZ*xwSFZtWmlWemxyWkZkN*JHTj$PWFJh$0$wMFdWZHNhMHd5$W5Cak0xRjJX$EpvT$dKd*RIcE1NakZzWTIwe*FHRlh$WFZaTWpsN$dsTT$hb%ZJ$m5Wa*$%QXpWR3h3%msxclZrN%9l$F-wW$c1T2FHTnRaREZqZHowOQ"}),await d.decode();let g=Number(d.naturalWidth.toString().replace("px","")),p=Number(d.naturalHeight.toString().replace("px",""));e.imageAspectRatio=g/p;let{labelStyles:y}=D(e);e.labelStyle=y;let m=null==o?void 0:o.wrappingWidth;e.defaultWidth=null==o?void 0:o.wrappingWidth;let x=Math.max(e.label&&null!=m?m:0,null!==(i=null==e?void 0:e.assetWidth)&&void 0!==i?i:g),w="on"===e.constraint&&(null==e?void 0:e.assetHeight)?e.assetHeight*e.imageAspectRatio:x,v="on"===e.constraint?w/e.imageAspectRatio:null!==(r=null==e?void 0:e.assetHeight)&&void 0!==r?r:p;e.width=Math.max(w,null!=m?m:0);let{shapeSvg:b,bbox:k,label:M}=await u(t,e,"image-shape default"),$="t"===e.pos,_=-w/2,S=8*!!e.label,P=c.default.svg(b),A=C(e,{});"handDrawn"!==e.look&&(A.roughness=0,A.fillStyle="solid");let N=P.rectangle(_,-v/2,w,v,A),L=Math.max(w,k.width),T=v+k.height+S,B=P.rectangle(-L/2,-T/2,L,T,{...A,fill:"none",stroke:"none"}),R=b.insert(()=>N,":first-child"),I=b.insert(()=>B);if(e.img){let t=b.append("image");t.attr("href",e.img),t.attr("width",w),t.attr("height",v),t.attr("preserveAspectRatio","none"),t.attr("transform",`translate(${-w/2},${$?T/2-v:-T/2})`)}return M.attr("transform",`translate(${-k.width/2-(k.x-(null!==(s=k.left)&&void 0!==s?s:0))},${$?-v/2-k.height/2-S/2:v/2-k.height/2+S/2})`),R.attr("transform",`translate(0,${$?k.height/2+S/2:-k.height/2-S/2})`),f(e,I),e.intersect=function(t){var l,a,n;if(h.log.info("iconSquare intersect",e,t),!e.label)return F.rect(e,t);let i=null!==(l=e.x)&&void 0!==l?l:0,r=null!==(a=e.y)&&void 0!==a?a:0,s=null!==(n=e.height)&&void 0!==n?n:0,o=[];return o=$?[{x:i-k.width/2,y:r-s/2},{x:i+k.width/2,y:r-s/2},{x:i+k.width/2,y:r-s/2+k.height+S},{x:i+w/2,y:r-s/2+k.height+S},{x:i+w/2,y:r+s/2},{x:i-w/2,y:r+s/2},{x:i-w/2,y:r-s/2+k.height+S},{x:i-k.width/2,y:r-s/2+k.height+S}]:[{x:i-w/2,y:r-s/2},{x:i+w/2,y:r-s/2},{x:i+w/2,y:r-s/2+v},{x:i+k.width/2,y:r-s/2+v},{x:i+k.width/2/2,y:r+s/2},{x:i-k.width/2,y:r+s/2},{x:i-k.width/2,y:r-s/2+v},{x:i-w/2,y:r-s/2+v}],F.polygon(e,o,t)},b}async function tM(t,e){var l,a,n,i;let r;let{labelStyles:s,nodeStyles:o}=D(e);e.labelStyle=s;let{shapeSvg:h,bbox:d}=await u(t,e,p(e)),g=Math.max(d.width+(null!==(l=e.padding)&&void 0!==l?l:0)*2,null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),m=Math.max(d.height+(null!==(n=e.padding)&&void 0!==n?n:0)*2,null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0),x=[{x:0,y:0},{x:g,y:0},{x:g+3*m/6,y:-m},{x:-3*m/6,y:-m}],{cssStyles:w}=e;if("handDrawn"===e.look){let t=c.default.svg(h),l=C(e,{}),a=y(x),n=t.path(a,l);r=h.insert(()=>n,":first-child").attr("transform",`translate(${-g/2}, ${m/2})`),w&&r.attr("style",w)}else r=G(h,g,m,x);return o&&r.attr("style",o),e.width=g,e.height=m,f(e,r),e.intersect=function(t){return F.polygon(e,x,t)},h}async function t$(t,e,l){let a;let{labelStyles:n,nodeStyles:i}=D(e);e.labelStyle=n;let{shapeSvg:r,bbox:s}=await u(t,e,p(e)),h=Math.max(s.width+2*l.labelPaddingX,(null==e?void 0:e.width)||0),d=Math.max(s.height+2*l.labelPaddingY,(null==e?void 0:e.height)||0),g=-h/2,y=-d/2,{rx:m,ry:x}=e,{cssStyles:w}=e;if((null==l?void 0:l.rx)&&l.ry&&(m=l.rx,x=l.ry),"handDrawn"===e.look){let t=c.default.svg(r),l=C(e,{}),n=m||x?t.path(M(g,y,h,d,m||0),l):t.rectangle(g,y,h,d,l);(a=r.insert(()=>n,":first-child")).attr("class","basic label-container").attr("style",(0,o.handleUndefinedAttr)(w))}else(a=r.insert("rect",":first-child")).attr("class","basic label-container").attr("style",i).attr("rx",(0,o.handleUndefinedAttr)(m)).attr("ry",(0,o.handleUndefinedAttr)(x)).attr("x",g).attr("y",y).attr("width",h).attr("height",d);return f(e,a),e.intersect=function(t){return F.rect(e,t)},r}async function t_(t,e){var l,a;let{shapeSvg:n,bbox:i,label:r}=await u(t,e,"label"),s=n.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),n.attr("class","label edgeLabel"),r.attr("transform",`translate(${-(i.width/2)-(i.x-(null!==(l=i.left)&&void 0!==l?l:0))}, ${-(i.height/2)-(i.y-(null!==(a=i.top)&&void 0!==a?a:0))})`),f(e,s),e.intersect=function(t){return F.rect(e,t)},n}async function tS(t,e){var l,a,n,i;let r;let{labelStyles:s,nodeStyles:o}=D(e);e.labelStyle=s;let{shapeSvg:h,bbox:d}=await u(t,e,p(e)),g=Math.max(d.width+(null!==(l=e.padding)&&void 0!==l?l:0),null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),m=Math.max(d.height+(null!==(n=e.padding)&&void 0!==n?n:0),null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0),x=[{x:0,y:0},{x:g+3*m/6,y:0},{x:g,y:-m},{x:-(3*m)/6,y:-m}],{cssStyles:w}=e;if("handDrawn"===e.look){let t=c.default.svg(h),l=C(e,{}),a=y(x),n=t.path(a,l);r=h.insert(()=>n,":first-child").attr("transform",`translate(${-g/2}, ${m/2})`),w&&r.attr("style",w)}else r=G(h,g,m,x);return o&&r.attr("style",o),e.width=g,e.height=m,f(e,r),e.intersect=function(t){return F.polygon(e,x,t)},h}async function tD(t,e){var l,a,n,i;let r;let{labelStyles:s,nodeStyles:o}=D(e);e.labelStyle=s;let{shapeSvg:h,bbox:d}=await u(t,e,p(e)),g=Math.max(d.width+(null!==(l=e.padding)&&void 0!==l?l:0),null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),m=Math.max(d.height+(null!==(n=e.padding)&&void 0!==n?n:0),null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0),x=[{x:-3*m/6,y:0},{x:g,y:0},{x:g+3*m/6,y:-m},{x:0,y:-m}],{cssStyles:w}=e;if("handDrawn"===e.look){let t=c.default.svg(h),l=C(e,{}),a=y(x),n=t.path(a,l);r=h.insert(()=>n,":first-child").attr("transform",`translate(${-g/2}, ${m/2})`),w&&r.attr("style",w)}else r=G(h,g,m,x);return o&&r.attr("style",o),e.width=g,e.height=m,f(e,r),e.intersect=function(t){return F.polygon(e,x,t)},h}function tC(t,e){var l,a,n;let{labelStyles:i,nodeStyles:r}=D(e);e.label="",e.labelStyle=i;let s=t.insert("g").attr("class",p(e)).attr("id",null!==(l=e.domId)&&void 0!==l?l:e.id),{cssStyles:o}=e,d=Math.max(35,null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),u=Math.max(35,null!==(n=null==e?void 0:e.height)&&void 0!==n?n:0),g=[{x:d,y:0},{x:0,y:u+3.5},{x:d-14,y:u+3.5},{x:0,y:2*u},{x:d,y:u-3.5},{x:14,y:u-3.5}],m=c.default.svg(s),x=C(e,{});"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");let w=y(g),v=m.path(w,x),b=s.insert(()=>v,":first-child");return o&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",o),r&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",r),b.attr("transform",`translate(-${d/2},${-u})`),f(e,b),e.intersect=function(t){return h.log.info("lightningBolt intersect",e,t),F.polygon(e,g,t)},s}(0,h.__name)(ty,"hexagon"),(0,h.__name)(tm,"hourglass"),(0,h.__name)(tx,"icon"),(0,h.__name)(tw,"iconCircle"),(0,h.__name)(tv,"iconRounded"),(0,h.__name)(tb,"iconSquare"),(0,h.__name)(tk,"imageSquare"),(0,h.__name)(tM,"inv_trapezoid"),(0,h.__name)(t$,"drawRect"),(0,h.__name)(t_,"labelRect"),(0,h.__name)(tS,"lean_left"),(0,h.__name)(tD,"lean_right"),(0,h.__name)(tC,"lightningBolt");var tP=(0,h.__name)((t,e,l,a,n,i,r)=>`M${t},${e+i} a${n},${i} 0,0,0 ${l},0 a${n},${i} 0,0,0 ${-l},0 l0,${a} a${n},${i} 0,0,0 ${l},0 l0,${-a} M${t},${e+i+r} a${n},${i} 0,0,0 ${l},0`,"createCylinderPathD"),tA=(0,h.__name)((t,e,l,a,n,i,r)=>`M${t},${e+i} M${t+l},${e+i} a${n},${i} 0,0,0 ${-l},0 l0,${a} a${n},${i} 0,0,0 ${l},0 l0,${-a} M${t},${e+i+r} a${n},${i} 0,0,0 ${l},0`,"createOuterCylinderPathD"),tN=(0,h.__name)((t,e,l,a,n,i)=>`M${t-l/2},${-a/2} a${n},${i} 0,0,0 ${l},0`,"createInnerCylinderPathD");async function tL(t,e){var l,a,n,i,r,s;let h;let{labelStyles:d,nodeStyles:g}=D(e);e.labelStyle=d;let{shapeSvg:y,bbox:m,label:x}=await u(t,e,p(e)),w=Math.max(m.width+(null!==(l=e.padding)&&void 0!==l?l:0),null!==(a=e.width)&&void 0!==a?a:0),v=w/2,b=v/(2.5+w/50),k=Math.max(m.height+b+(null!==(n=e.padding)&&void 0!==n?n:0),null!==(i=e.height)&&void 0!==i?i:0),M=.1*k,{cssStyles:$}=e;if("handDrawn"===e.look){let t=c.default.svg(y),l=tA(0,0,w,k,v,b,M),a=tN(0,b,w,k,v,b),n=C(e,{}),i=t.path(l,n),r=t.path(a,n);y.insert(()=>r,":first-child").attr("class","line"),(h=y.insert(()=>i,":first-child")).attr("class","basic label-container"),$&&h.attr("style",$)}else{let t=tP(0,0,w,k,v,b,M);h=y.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,o.handleUndefinedAttr)($)).attr("style",g)}return h.attr("label-offset-y",b),h.attr("transform",`translate(${-w/2}, ${-(k/2+b)})`),f(e,h),x.attr("transform",`translate(${-(m.width/2)-(m.x-(null!==(r=m.left)&&void 0!==r?r:0))}, ${-(m.height/2)+b-(m.y-(null!==(s=m.top)&&void 0!==s?s:0))})`),e.intersect=function(t){var l,a,n,i,r,s;let o=F.rect(e,t),h=o.x-(null!==(l=e.x)&&void 0!==l?l:0);if(0!=v&&(Math.abs(h)<(null!==(a=e.width)&&void 0!==a?a:0)/2||Math.abs(h)==(null!==(n=e.width)&&void 0!==n?n:0)/2&&Math.abs(o.y-(null!==(i=e.y)&&void 0!==i?i:0))>(null!==(r=e.height)&&void 0!==r?r:0)/2-b)){let l=b*b*(1-h*h/(v*v));l>0&&(l=Math.sqrt(l)),l=b-l,t.y-(null!==(s=e.y)&&void 0!==s?s:0)>0&&(l=-l),o.y+=l}return o},y}async function tT(t,e){var l,a,n,i,r,s,o,h;let{labelStyles:d,nodeStyles:g}=D(e);e.labelStyle=d;let{shapeSvg:y,bbox:x,label:w}=await u(t,e,p(e)),v=Math.max(x.width+(null!==(l=e.padding)&&void 0!==l?l:0)*2,null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),b=Math.max(x.height+(null!==(n=e.padding)&&void 0!==n?n:0)*2,null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0),k=b/4,M=b+k,{cssStyles:$}=e,_=c.default.svg(y),S=C(e,{});"handDrawn"!==e.look&&(S.roughness=0,S.fillStyle="solid");let P=[{x:-v/2-v/2*.1,y:-M/2},{x:-v/2-v/2*.1,y:M/2},...m(-v/2-v/2*.1,M/2,v/2+v/2*.1,M/2,k,.8),{x:v/2+v/2*.1,y:-M/2},{x:-v/2-v/2*.1,y:-M/2},{x:-v/2,y:-M/2},{x:-v/2,y:M/2*1.1},{x:-v/2,y:-M/2}],A=_.polygon(P.map(t=>[t.x,t.y]),S),N=y.insert(()=>A,":first-child");return N.attr("class","basic label-container"),$&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",$),g&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",g),N.attr("transform",`translate(0,${-k/2})`),w.attr("transform",`translate(${-v/2+(null!==(r=e.padding)&&void 0!==r?r:0)+v/2*.1/2-(x.x-(null!==(s=x.left)&&void 0!==s?s:0))},${-b/2+(null!==(o=e.padding)&&void 0!==o?o:0)-k/2-(x.y-(null!==(h=x.top)&&void 0!==h?h:0))})`),f(e,N),e.intersect=function(t){return F.polygon(e,P,t)},y}async function tB(t,e){var l,a,n,i,r,s;let{labelStyles:o,nodeStyles:h}=D(e);e.labelStyle=o;let{shapeSvg:d,bbox:g,label:m}=await u(t,e,p(e)),x=Math.max(g.width+(null!==(l=e.padding)&&void 0!==l?l:0)*2,null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),w=Math.max(g.height+(null!==(n=e.padding)&&void 0!==n?n:0)*2,null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0),v=-x/2,b=-w/2,{cssStyles:k}=e,M=c.default.svg(d),$=C(e,{}),_=[{x:v-5,y:b+5},{x:v-5,y:b+w+5},{x:v+x-5,y:b+w+5},{x:v+x-5,y:b+w},{x:v+x,y:b+w},{x:v+x,y:b+w-5},{x:v+x+5,y:b+w-5},{x:v+x+5,y:b-5},{x:v+5,y:b-5},{x:v+5,y:b},{x:v,y:b},{x:v,y:b+5}];"handDrawn"!==e.look&&($.roughness=0,$.fillStyle="solid");let S=y(_),P=M.path(S,$),A=y([{x:v,y:b+5},{x:v+x-5,y:b+5},{x:v+x-5,y:b+w},{x:v+x,y:b+w},{x:v+x,y:b},{x:v,y:b}]),N=M.path(A,{...$,fill:"none"}),L=d.insert(()=>N,":first-child");return L.insert(()=>P,":first-child"),L.attr("class","basic label-container"),k&&"handDrawn"!==e.look&&L.selectAll("path").attr("style",k),h&&"handDrawn"!==e.look&&L.selectAll("path").attr("style",h),m.attr("transform",`translate(${-(g.width/2)-5-(g.x-(null!==(r=g.left)&&void 0!==r?r:0))}, ${-(g.height/2)+5-(g.y-(null!==(s=g.top)&&void 0!==s?s:0))})`),f(e,L),e.intersect=function(t){return F.polygon(e,_,t)},d}async function tR(t,e){var l,a,n,i,r,s;let{labelStyles:o,nodeStyles:h}=D(e);e.labelStyle=o;let{shapeSvg:d,bbox:g,label:x}=await u(t,e,p(e)),w=Math.max(g.width+(null!==(l=e.padding)&&void 0!==l?l:0)*2,null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),v=Math.max(g.height+(null!==(n=e.padding)&&void 0!==n?n:0)*2,null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0),b=v/4,k=v+b,M=-w/2,$=-k/2,{cssStyles:_}=e,S=m(M-5,$+k+5,M+w-5,$+k+5,b,.8),P=null==S?void 0:S[S.length-1],A=[{x:M-5,y:$+5},{x:M-5,y:$+k+5},...S,{x:M+w-5,y:P.y-5},{x:M+w,y:P.y-5},{x:M+w,y:P.y-10},{x:M+w+5,y:P.y-10},{x:M+w+5,y:$-5},{x:M+5,y:$-5},{x:M+5,y:$},{x:M,y:$},{x:M,y:$+5}],N=[{x:M,y:$+5},{x:M+w-5,y:$+5},{x:M+w-5,y:P.y-5},{x:M+w,y:P.y-5},{x:M+w,y:$},{x:M,y:$}],L=c.default.svg(d),T=C(e,{});"handDrawn"!==e.look&&(T.roughness=0,T.fillStyle="solid");let B=y(A),R=L.path(B,T),I=y(N),W=L.path(I,T),O=d.insert(()=>R,":first-child");return O.insert(()=>W),O.attr("class","basic label-container"),_&&"handDrawn"!==e.look&&O.selectAll("path").attr("style",_),h&&"handDrawn"!==e.look&&O.selectAll("path").attr("style",h),O.attr("transform",`translate(0,${-b/2})`),x.attr("transform",`translate(${-(g.width/2)-5-(g.x-(null!==(r=g.left)&&void 0!==r?r:0))}, ${-(g.height/2)+5-b/2-(g.y-(null!==(s=g.top)&&void 0!==s?s:0))})`),f(e,O),e.intersect=function(t){return F.polygon(e,A,t)},d}async function tI(t,e,l){var a,n,i,r,s;let{config:{themeVariables:o}}=l,{labelStyles:d,nodeStyles:g}=D(e);e.labelStyle=d,e.useHtmlLabels||(null===(a=(0,h.getConfig)().flowchart)||void 0===a?void 0:a.htmlLabels)!==!1||(e.centerLabel=!0);let{shapeSvg:y,bbox:m}=await u(t,e,p(e)),x=Math.max(m.width+(null!==(n=e.padding)&&void 0!==n?n:0)*2,null!==(i=null==e?void 0:e.width)&&void 0!==i?i:0),w=Math.max(m.height+(null!==(r=e.padding)&&void 0!==r?r:0)*2,null!==(s=null==e?void 0:e.height)&&void 0!==s?s:0),{cssStyles:v}=e,b=c.default.svg(y),k=C(e,{fill:o.noteBkgColor,stroke:o.noteBorderColor});"handDrawn"!==e.look&&(k.roughness=0,k.fillStyle="solid");let M=b.rectangle(-x/2,-w/2,x,w,k),$=y.insert(()=>M,":first-child");return $.attr("class","basic label-container"),v&&"handDrawn"!==e.look&&$.selectAll("path").attr("style",v),g&&"handDrawn"!==e.look&&$.selectAll("path").attr("style",g),f(e,$),e.intersect=function(t){return F.rect(e,t)},y}(0,h.__name)(tL,"linedCylinder"),(0,h.__name)(tT,"linedWaveEdgedRect"),(0,h.__name)(tB,"multiRect"),(0,h.__name)(tR,"multiWaveEdgedRectangle"),(0,h.__name)(tI,"note");var tW=(0,h.__name)((t,e,l)=>`M${t+l/2},${e} L${t+l},${e-l/2} L${t+l/2},${e-l} L${t},${e-l/2} Z`,"createDecisionBoxPathD");async function tO(t,e){let l;let{labelStyles:a,nodeStyles:n}=D(e);e.labelStyle=a;let{shapeSvg:i,bbox:r}=await u(t,e,p(e)),s=r.width+e.padding+(r.height+e.padding),o=[{x:s/2,y:0},{x:s,y:-s/2},{x:s/2,y:-s},{x:0,y:-s/2}],{cssStyles:d}=e;if("handDrawn"===e.look){let t=c.default.svg(i),a=C(e,{}),n=tW(0,0,s),r=t.path(n,a);l=i.insert(()=>r,":first-child").attr("transform",`translate(${-s/2}, ${s/2})`),d&&l.attr("style",d)}else l=G(i,s,s,o);return n&&l.attr("style",n),f(e,l),e.intersect=function(t){return h.log.debug("APA12 Intersect called SPLIT\npoint:",t,"\nnode:\n",e,"\nres:",F.polygon(e,o,t)),F.polygon(e,o,t)},i}async function tE(t,e){var l,a,n,i,r,s;let{labelStyles:o,nodeStyles:h}=D(e);e.labelStyle=o;let{shapeSvg:d,bbox:g,label:m}=await u(t,e,p(e)),x=Math.max(g.width+(null!==(l=e.padding)&&void 0!==l?l:0),null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),w=Math.max(g.height+(null!==(n=e.padding)&&void 0!==n?n:0),null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0),v=-x/2,b=-w/2,k=b/2,M=[{x:v+k,y:b},{x:v,y:0},{x:v+k,y:-b},{x:-v,y:-b},{x:-v,y:b}],{cssStyles:$}=e,_=c.default.svg(d),S=C(e,{});"handDrawn"!==e.look&&(S.roughness=0,S.fillStyle="solid");let P=y(M),A=_.path(P,S),N=d.insert(()=>A,":first-child");return N.attr("class","basic label-container"),$&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",$),h&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",h),N.attr("transform",`translate(${-k/2},0)`),m.attr("transform",`translate(${-k/2-g.width/2-(g.x-(null!==(r=g.left)&&void 0!==r?r:0))}, ${-(g.height/2)-(g.y-(null!==(s=g.top)&&void 0!==s?s:0))})`),f(e,N),e.intersect=function(t){return F.polygon(e,M,t)},d}async function tz(t,e){var l,a;let n,i,r;let{labelStyles:s,nodeStyles:o}=D(e);e.labelStyle=s,n=e.cssClasses?"node "+e.cssClasses:"node default";let u=t.insert("g").attr("class",n).attr("id",e.domId||e.id),g=u.insert("g"),p=u.insert("g").attr("class","label").attr("style",o),y=e.description,m=e.label,x=p.node().appendChild(await k(m,e.labelStyle,!0,!0)),w={width:0,height:0};if((0,h.evaluate)(null===(a=(0,h.getConfig2)())||void 0===a?void 0:null===(l=a.flowchart)||void 0===l?void 0:l.htmlLabels)){let t=x.children[0],e=(0,d.select)(x);w=t.getBoundingClientRect(),e.attr("width",w.width),e.attr("height",w.height)}h.log.info("Text 2",y);let v=y||[],b=x.getBBox(),$=p.node().appendChild(await k(v.join?v.join("<br/>"):v,e.labelStyle,!0,!0)),_=$.children[0],S=(0,d.select)($);w=_.getBoundingClientRect(),S.attr("width",w.width),S.attr("height",w.height);let P=(e.padding||0)/2;(0,d.select)($).attr("transform","translate( "+(w.width>b.width?0:(b.width-w.width)/2)+", "+(b.height+P+5)+")"),(0,d.select)(x).attr("transform","translate( "+(w.width<b.width?0:-(b.width-w.width)/2)+", 0)"),w=p.node().getBBox(),p.attr("transform","translate("+-w.width/2+", "+(-w.height/2-P+3)+")");let A=w.width+(e.padding||0),N=w.height+(e.padding||0),L=-w.width/2-P,T=-w.height/2-P;if("handDrawn"===e.look){let t=c.default.svg(u),l=C(e,{}),a=t.path(M(L,T,A,N,e.rx||0),l),n=t.line(-w.width/2-P,-w.height/2-P+b.height+P,w.width/2+P,-w.height/2-P+b.height+P,l);r=u.insert(()=>(h.log.debug("Rough node insert CXC",a),n),":first-child"),i=u.insert(()=>(h.log.debug("Rough node insert CXC",a),a),":first-child")}else i=g.insert("rect",":first-child"),r=g.insert("line"),i.attr("class","outer title-state").attr("style",o).attr("x",-w.width/2-P).attr("y",-w.height/2-P).attr("width",w.width+(e.padding||0)).attr("height",w.height+(e.padding||0)),r.attr("class","divider").attr("x1",-w.width/2-P).attr("x2",w.width/2+P).attr("y1",-w.height/2-P+b.height+P).attr("y2",-w.height/2-P+b.height+P);return f(e,i),e.intersect=function(t){return F.rect(e,t)},u}async function tH(t,e){let l={rx:5,ry:5,classes:"",labelPaddingX:+((null==e?void 0:e.padding)||0),labelPaddingY:+((null==e?void 0:e.padding)||0)};return t$(t,e,l)}async function tF(t,e){var l,a,n,i,r,s,h,d,g;let{labelStyles:y,nodeStyles:m}=D(e);e.labelStyle=y;let{shapeSvg:x,bbox:w,label:v}=await u(t,e,p(e)),b=null!==(l=null==e?void 0:e.padding)&&void 0!==l?l:0,k=Math.max(w.width+(null!==(a=e.padding)&&void 0!==a?a:0)*2,null!==(n=null==e?void 0:e.width)&&void 0!==n?n:0),M=Math.max(w.height+(null!==(i=e.padding)&&void 0!==i?i:0)*2,null!==(r=null==e?void 0:e.height)&&void 0!==r?r:0),$=-w.width/2-b,_=-w.height/2-b,{cssStyles:S}=e,P=c.default.svg(x),A=C(e,{});"handDrawn"!==e.look&&(A.roughness=0,A.fillStyle="solid");let N=P.polygon([{x:$,y:_},{x:$+k+8,y:_},{x:$+k+8,y:_+M},{x:$-8,y:_+M},{x:$-8,y:_},{x:$,y:_},{x:$,y:_+M}].map(t=>[t.x,t.y]),A),L=x.insert(()=>N,":first-child");return L.attr("class","basic label-container").attr("style",(0,o.handleUndefinedAttr)(S)),m&&"handDrawn"!==e.look&&L.selectAll("path").attr("style",m),S&&"handDrawn"!==e.look&&L.selectAll("path").attr("style",m),v.attr("transform",`translate(${-k/2+4+(null!==(s=e.padding)&&void 0!==s?s:0)-(w.x-(null!==(h=w.left)&&void 0!==h?h:0))},${-M/2+(null!==(d=e.padding)&&void 0!==d?d:0)-(w.y-(null!==(g=w.top)&&void 0!==g?g:0))})`),f(e,L),e.intersect=function(t){return F.rect(e,t)},x}async function tj(t,e){var l,a,n,i,r,s,o,h;let{labelStyles:d,nodeStyles:g}=D(e);e.labelStyle=d;let{shapeSvg:m,bbox:x,label:w}=await u(t,e,p(e)),v=Math.max(x.width+(null!==(l=e.padding)&&void 0!==l?l:0)*2,null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),b=Math.max(x.height+(null!==(n=e.padding)&&void 0!==n?n:0)*2,null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0),k=-v/2,M=-b/2,{cssStyles:$}=e,_=c.default.svg(m),S=C(e,{});"handDrawn"!==e.look&&(S.roughness=0,S.fillStyle="solid");let P=[{x:k,y:M},{x:k,y:M+b},{x:k+v,y:M+b},{x:k+v,y:M-b/2}],A=y(P),N=_.path(A,S),L=m.insert(()=>N,":first-child");return L.attr("class","basic label-container"),$&&"handDrawn"!==e.look&&L.selectChildren("path").attr("style",$),g&&"handDrawn"!==e.look&&L.selectChildren("path").attr("style",g),L.attr("transform",`translate(0, ${b/4})`),w.attr("transform",`translate(${-v/2+(null!==(r=e.padding)&&void 0!==r?r:0)-(x.x-(null!==(s=x.left)&&void 0!==s?s:0))}, ${-b/4+(null!==(o=e.padding)&&void 0!==o?o:0)-(x.y-(null!==(h=x.top)&&void 0!==h?h:0))})`),f(e,L),e.intersect=function(t){return F.polygon(e,P,t)},m}async function tq(t,e){let l={rx:0,ry:0,classes:"",labelPaddingX:2*((null==e?void 0:e.padding)||0),labelPaddingY:+((null==e?void 0:e.padding)||0)};return t$(t,e,l)}async function tZ(t,e){let l;let{labelStyles:a,nodeStyles:n}=D(e);e.labelStyle=a;let{shapeSvg:i,bbox:r}=await u(t,e,p(e)),s=r.height+e.padding,h=r.width+s/4+e.padding,{cssStyles:d}=e;if("handDrawn"===e.look){let t=c.default.svg(i),a=C(e,{}),n=M(-h/2,-s/2,h,s,s/2),r=t.path(n,a);(l=i.insert(()=>r,":first-child")).attr("class","basic label-container").attr("style",(0,o.handleUndefinedAttr)(d))}else(l=i.insert("rect",":first-child")).attr("class","basic label-container").attr("style",n).attr("rx",s/2).attr("ry",s/2).attr("x",-h/2).attr("y",-s/2).attr("width",h).attr("height",s);return f(e,l),e.intersect=function(t){return F.rect(e,t)},i}async function tG(t,e){return t$(t,e,{rx:5,ry:5,classes:"flowchart-node"})}function tV(t,e,l){let{config:{themeVariables:a}}=l,{labelStyles:n,nodeStyles:i}=D(e);e.labelStyle=n;let{cssStyles:r}=e,{lineColor:s,stateBorder:o,nodeBorder:h}=a,d=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),u=c.default.svg(d),g=C(e,{});"handDrawn"!==e.look&&(g.roughness=0,g.fillStyle="solid");let p=u.circle(0,0,14,{...g,stroke:s,strokeWidth:2}),y=null!=o?o:h,m=u.circle(0,0,5,{...g,fill:y,stroke:y,strokeWidth:2,fillStyle:"solid"}),x=d.insert(()=>p,":first-child");return x.insert(()=>m),r&&x.selectAll("path").attr("style",r),i&&x.selectAll("path").attr("style",i),f(e,x),e.intersect=function(t){return F.circle(e,7,t)},d}function tU(t,e,l){let a,{config:{themeVariables:n}}=l,{lineColor:i}=n,r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);if("handDrawn"===e.look){let t=c.default.svg(r).circle(0,0,14,$(i));(a=r.insert(()=>t)).attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else(a=r.insert("circle",":first-child")).attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return f(e,a),e.intersect=function(t){return F.circle(e,7,t)},r}async function tJ(t,e){let{labelStyles:l,nodeStyles:a}=D(e);e.labelStyle=l;let{shapeSvg:n,bbox:i}=await u(t,e,p(e)),r=((null==e?void 0:e.padding)||0)/2,s=i.width+e.padding,h=i.height+e.padding,d=-i.width/2-r,g=-i.height/2-r,y=[{x:0,y:0},{x:s,y:0},{x:s,y:-h},{x:0,y:-h},{x:0,y:0},{x:-8,y:0},{x:s+8,y:0},{x:s+8,y:-h},{x:-8,y:-h},{x:-8,y:0}];if("handDrawn"===e.look){let t=c.default.svg(n),l=C(e,{}),a=t.rectangle(d-8,g,s+16,h,l),i=t.line(d,g,d,g+h,l),r=t.line(d+s,g,d+s,g+h,l);n.insert(()=>i,":first-child"),n.insert(()=>r,":first-child");let u=n.insert(()=>a,":first-child"),{cssStyles:p}=e;u.attr("class","basic label-container").attr("style",(0,o.handleUndefinedAttr)(p)),f(e,u)}else{let t=G(n,s,h,y);a&&t.attr("style",a),f(e,t)}return e.intersect=function(t){return F.polygon(e,y,t)},n}async function tX(t,e){var l,a,n,i;let{labelStyles:r,nodeStyles:s}=D(e);e.labelStyle=r;let{shapeSvg:o,bbox:h}=await u(t,e,p(e)),d=Math.max(h.width+(null!==(l=e.padding)&&void 0!==l?l:0)*2,null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),g=Math.max(h.height+(null!==(n=e.padding)&&void 0!==n?n:0)*2,null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0),m=-d/2,x=-g/2,w=.2*g,{cssStyles:v}=e,b=c.default.svg(o),k=C(e,{}),M=[{x:m-w/2,y:x},{x:m+d+w/2,y:x},{x:m+d+w/2,y:x+g},{x:m-w/2,y:x+g}];"handDrawn"!==e.look&&(k.roughness=0,k.fillStyle="solid");let $=y(M),_=b.path($,k),S=y([{x:m+d-w/2,y:x+g},{x:m+d+w/2,y:x+g},{x:m+d+w/2,y:x+g-.2*g}]),P=b.path(S,{...k,fillStyle:"solid"}),A=o.insert(()=>P,":first-child");return A.insert(()=>_,":first-child"),A.attr("class","basic label-container"),v&&"handDrawn"!==e.look&&A.selectAll("path").attr("style",v),s&&"handDrawn"!==e.look&&A.selectAll("path").attr("style",s),f(e,A),e.intersect=function(t){return F.polygon(e,M,t)},o}async function tQ(t,e){var l,a,n,i,r,s,o,h;let{labelStyles:d,nodeStyles:g}=D(e);e.labelStyle=d;let{shapeSvg:x,bbox:w,label:v}=await u(t,e,p(e)),b=Math.max(w.width+(null!==(l=e.padding)&&void 0!==l?l:0)*2,null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),k=Math.max(w.height+(null!==(n=e.padding)&&void 0!==n?n:0)*2,null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0),M=k/4,$=.2*b,_=.2*k,S=k+M,{cssStyles:P}=e,A=c.default.svg(x),N=C(e,{});"handDrawn"!==e.look&&(N.roughness=0,N.fillStyle="solid");let L=[{x:-b/2-b/2*.1,y:S/2},...m(-b/2-b/2*.1,S/2,b/2+b/2*.1,S/2,M,.8),{x:b/2+b/2*.1,y:-S/2},{x:-b/2-b/2*.1,y:-S/2}],T=-b/2+b/2*.1,B=-S/2-.4*_,R=[{x:T+b-$,y:(B+k)*1.4},{x:T+b,y:B+k-_},{x:T+b,y:(B+k)*.9},...m(T+b,(B+k)*1.3,T+b-$,(B+k)*1.5,-(.03*k),.5)],I=y(L),W=A.path(I,N),O=y(R),E=A.path(O,{...N,fillStyle:"solid"}),z=x.insert(()=>E,":first-child");return z.insert(()=>W,":first-child"),z.attr("class","basic label-container"),P&&"handDrawn"!==e.look&&z.selectAll("path").attr("style",P),g&&"handDrawn"!==e.look&&z.selectAll("path").attr("style",g),z.attr("transform",`translate(0,${-M/2})`),v.attr("transform",`translate(${-b/2+(null!==(r=e.padding)&&void 0!==r?r:0)-(w.x-(null!==(s=w.left)&&void 0!==s?s:0))},${-k/2+(null!==(o=e.padding)&&void 0!==o?o:0)-M/2-(w.y-(null!==(h=w.top)&&void 0!==h?h:0))})`),f(e,z),e.intersect=function(t){return F.polygon(e,L,t)},x}async function tK(t,e){let{labelStyles:l,nodeStyles:a}=D(e);e.labelStyle=l;let{shapeSvg:n,bbox:i}=await u(t,e,p(e)),r=Math.max(i.width+e.padding,(null==e?void 0:e.width)||0),s=Math.max(i.height+e.padding,(null==e?void 0:e.height)||0),o=n.insert("rect",":first-child");return o.attr("class","text").attr("style",a).attr("rx",0).attr("ry",0).attr("x",-r/2).attr("y",-s/2).attr("width",r).attr("height",s),f(e,o),e.intersect=function(t){return F.rect(e,t)},n}(0,h.__name)(tO,"question"),(0,h.__name)(tE,"rect_left_inv_arrow"),(0,h.__name)(tz,"rectWithTitle"),(0,h.__name)(tH,"roundedRect"),(0,h.__name)(tF,"shadedProcess"),(0,h.__name)(tj,"slopedRect"),(0,h.__name)(tq,"squareRect"),(0,h.__name)(tZ,"stadium"),(0,h.__name)(tG,"state"),(0,h.__name)(tV,"stateEnd"),(0,h.__name)(tU,"stateStart"),(0,h.__name)(tJ,"subroutine"),(0,h.__name)(tX,"taggedRect"),(0,h.__name)(tQ,"taggedWaveEdgedRectangle"),(0,h.__name)(tK,"text");var tY=(0,h.__name)((t,e,l,a,n,i)=>`M${t},${e}
    a${n},${i} 0,0,1 0,${-a}
    l${l},0
    a${n},${i} 0,0,1 0,${a}
    M${l},${-a}
    a${n},${i} 0,0,0 0,${a}
    l${-l},0`,"createCylinderPathD"),t0=(0,h.__name)((t,e,l,a,n,i)=>`M${t},${e} M${t+l},${e} a${n},${i} 0,0,0 0,${-a} l${-l},0 a${n},${i} 0,0,0 0,${a} l${l},0`,"createOuterCylinderPathD"),t2=(0,h.__name)((t,e,l,a,n,i)=>`M${t+l/2},${-a/2} a${n},${i} 0,0,0 0,${a}`,"createInnerCylinderPathD");async function t1(t,e){var l,a;let n;let{labelStyles:i,nodeStyles:r}=D(e);e.labelStyle=i;let{shapeSvg:s,bbox:h,label:d,halfPadding:g}=await u(t,e,p(e)),y="neo"===e.look?2*g:g,m=h.height+y,x=m/2,w=x/(2.5+m/50),v=h.width+w+y,{cssStyles:b}=e;if("handDrawn"===e.look){let t=c.default.svg(s),l=t0(0,0,v,m,w,x),a=t2(0,0,v,m,w,x),i=t.path(l,C(e,{})),r=t.path(a,C(e,{fill:"none"}));n=s.insert(()=>r,":first-child"),(n=s.insert(()=>i,":first-child")).attr("class","basic label-container"),b&&n.attr("style",b)}else{let t=tY(0,0,v,m,w,x);(n=s.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,o.handleUndefinedAttr)(b)).attr("style",r)).attr("class","basic label-container"),b&&n.selectAll("path").attr("style",b),r&&n.selectAll("path").attr("style",r)}return n.attr("label-offset-x",w),n.attr("transform",`translate(${-v/2}, ${m/2} )`),d.attr("transform",`translate(${-(h.width/2)-w-(h.x-(null!==(l=h.left)&&void 0!==l?l:0))}, ${-(h.height/2)-(h.y-(null!==(a=h.top)&&void 0!==a?a:0))})`),f(e,n),e.intersect=function(t){var l,a,n,i,r,s;let o=F.rect(e,t),h=o.y-(null!==(l=e.y)&&void 0!==l?l:0);if(0!=x&&(Math.abs(h)<(null!==(a=e.height)&&void 0!==a?a:0)/2||Math.abs(h)==(null!==(n=e.height)&&void 0!==n?n:0)/2&&Math.abs(o.x-(null!==(i=e.x)&&void 0!==i?i:0))>(null!==(r=e.width)&&void 0!==r?r:0)/2-w)){let l=w*w*(1-h*h/(x*x));0!=l&&(l=Math.sqrt(Math.abs(l))),l=w-l,t.x-(null!==(s=e.x)&&void 0!==s?s:0)>0&&(l=-l),o.x+=l}return o},s}async function t5(t,e){let l;let{labelStyles:a,nodeStyles:n}=D(e);e.labelStyle=a;let{shapeSvg:i,bbox:r}=await u(t,e,p(e)),s=r.width+e.padding,o=r.height+e.padding,h=[{x:-3*o/6,y:0},{x:s+3*o/6,y:0},{x:s,y:-o},{x:0,y:-o}],{cssStyles:d}=e;if("handDrawn"===e.look){let t=c.default.svg(i),a=C(e,{}),n=y(h),r=t.path(n,a);l=i.insert(()=>r,":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),d&&l.attr("style",d)}else l=G(i,s,o,h);return n&&l.attr("style",n),e.width=s,e.height=o,f(e,l),e.intersect=function(t){return F.polygon(e,h,t)},i}async function t3(t,e){var l,a,n,i;let{labelStyles:r,nodeStyles:s}=D(e);e.labelStyle=r;let{shapeSvg:o,bbox:h}=await u(t,e,p(e)),d=Math.max(60,h.width+(null!==(l=e.padding)&&void 0!==l?l:0)*2,null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),g=Math.max(20,h.height+(null!==(n=e.padding)&&void 0!==n?n:0)*2,null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0),{cssStyles:m}=e,x=c.default.svg(o),w=C(e,{});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let v=[{x:-d/2*.8,y:-g/2},{x:d/2*.8,y:-g/2},{x:d/2,y:-g/2*.6},{x:d/2,y:g/2},{x:-d/2,y:g/2},{x:-d/2,y:-g/2*.6}],b=y(v),k=x.path(b,w),M=o.insert(()=>k,":first-child");return M.attr("class","basic label-container"),m&&"handDrawn"!==e.look&&M.selectChildren("path").attr("style",m),s&&"handDrawn"!==e.look&&M.selectChildren("path").attr("style",s),f(e,M),e.intersect=function(t){return F.polygon(e,v,t)},o}async function t4(t,e){var l,a,n,i,r;let{labelStyles:s,nodeStyles:o}=D(e);e.labelStyle=s;let{shapeSvg:d,bbox:g,label:m}=await u(t,e,p(e)),x=(0,h.evaluate)(null===(l=(0,h.getConfig2)().flowchart)||void 0===l?void 0:l.htmlLabels),w=g.width+(null!==(a=e.padding)&&void 0!==a?a:0),v=w+g.height,b=w+g.height,k=[{x:0,y:0},{x:b,y:0},{x:b/2,y:-v}],{cssStyles:M}=e,$=c.default.svg(d),_=C(e,{});"handDrawn"!==e.look&&(_.roughness=0,_.fillStyle="solid");let S=y(k),P=$.path(S,_),A=d.insert(()=>P,":first-child").attr("transform",`translate(${-v/2}, ${v/2})`);return M&&"handDrawn"!==e.look&&A.selectChildren("path").attr("style",M),o&&"handDrawn"!==e.look&&A.selectChildren("path").attr("style",o),e.width=w,e.height=v,f(e,A),m.attr("transform",`translate(${-g.width/2-(g.x-(null!==(n=g.left)&&void 0!==n?n:0))}, ${v/2-(g.height+(null!==(i=e.padding)&&void 0!==i?i:0)/(x?2:1)-(g.y-(null!==(r=g.top)&&void 0!==r?r:0)))})`),e.intersect=function(t){return h.log.info("Triangle intersect",e,k,t),F.polygon(e,k,t)},d}async function t8(t,e){var l,a,n,i,r,s,o,h;let{labelStyles:d,nodeStyles:g}=D(e);e.labelStyle=d;let{shapeSvg:x,bbox:w,label:v}=await u(t,e,p(e)),b=Math.max(w.width+(null!==(l=e.padding)&&void 0!==l?l:0)*2,null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),k=Math.max(w.height+(null!==(n=e.padding)&&void 0!==n?n:0)*2,null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0),M=k/8,$=k+M,{cssStyles:_}=e,S=70-b,P=S>0?S/2:0,A=c.default.svg(x),N=C(e,{});"handDrawn"!==e.look&&(N.roughness=0,N.fillStyle="solid");let L=[{x:-b/2-P,y:$/2},...m(-b/2-P,$/2,b/2+P,$/2,M,.8),{x:b/2+P,y:-$/2},{x:-b/2-P,y:-$/2}],T=y(L),B=A.path(T,N),R=x.insert(()=>B,":first-child");return R.attr("class","basic label-container"),_&&"handDrawn"!==e.look&&R.selectAll("path").attr("style",_),g&&"handDrawn"!==e.look&&R.selectAll("path").attr("style",g),R.attr("transform",`translate(0,${-M/2})`),v.attr("transform",`translate(${-b/2+(null!==(r=e.padding)&&void 0!==r?r:0)-(w.x-(null!==(s=w.left)&&void 0!==s?s:0))},${-k/2+(null!==(o=e.padding)&&void 0!==o?o:0)-M-(w.y-(null!==(h=w.top)&&void 0!==h?h:0))})`),f(e,R),e.intersect=function(t){return F.polygon(e,L,t)},x}async function t9(t,e){var l,a,n,i;let{labelStyles:r,nodeStyles:s}=D(e);e.labelStyle=r;let{shapeSvg:o,bbox:h}=await u(t,e,p(e)),d=Math.max(h.width+(null!==(l=e.padding)&&void 0!==l?l:0)*2,null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),g=Math.max(h.height+(null!==(n=e.padding)&&void 0!==n?n:0)*2,null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0),x=d/g,w=d,v=g;w>v*x?v=w/x:w=v*x,w=Math.max(w,100);let b=Math.min(.2*(v=Math.max(v,50)),v/4),k=v+2*b,{cssStyles:M}=e,$=c.default.svg(o),_=C(e,{});"handDrawn"!==e.look&&(_.roughness=0,_.fillStyle="solid");let S=[{x:-w/2,y:k/2},...m(-w/2,k/2,w/2,k/2,b,1),{x:w/2,y:-k/2},...m(w/2,-k/2,-w/2,-k/2,b,-1)],P=y(S),A=$.path(P,_),N=o.insert(()=>A,":first-child");return N.attr("class","basic label-container"),M&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",M),s&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",s),f(e,N),e.intersect=function(t){return F.polygon(e,S,t)},o}async function t6(t,e){var l,a,n,i,r,s;let{labelStyles:o,nodeStyles:h}=D(e);e.labelStyle=o;let{shapeSvg:d,bbox:g,label:y}=await u(t,e,p(e)),m=Math.max(g.width+(null!==(l=e.padding)&&void 0!==l?l:0)*2,null!==(a=null==e?void 0:e.width)&&void 0!==a?a:0),x=Math.max(g.height+(null!==(n=e.padding)&&void 0!==n?n:0)*2,null!==(i=null==e?void 0:e.height)&&void 0!==i?i:0),w=-m/2,v=-x/2,{cssStyles:b}=e,k=c.default.svg(d),M=C(e,{}),$=[{x:w-5,y:v-5},{x:w-5,y:v+x},{x:w+m,y:v+x},{x:w+m,y:v-5}],_=`M${w-5},${v-5} L${w+m},${v-5} L${w+m},${v+x} L${w-5},${v+x} L${w-5},${v-5}
                M${w-5},${v} L${w+m},${v}
                M${w},${v-5} L${w},${v+x}`;"handDrawn"!==e.look&&(M.roughness=0,M.fillStyle="solid");let S=k.path(_,M),P=d.insert(()=>S,":first-child");return P.attr("transform","translate(2.5, 2.5)"),P.attr("class","basic label-container"),b&&"handDrawn"!==e.look&&P.selectAll("path").attr("style",b),h&&"handDrawn"!==e.look&&P.selectAll("path").attr("style",h),y.attr("transform",`translate(${-(g.width/2)+2.5-(g.x-(null!==(r=g.left)&&void 0!==r?r:0))}, ${-(g.height/2)+2.5-(g.y-(null!==(s=g.top)&&void 0!==s?s:0))})`),f(e,P),e.intersect=function(t){return F.polygon(e,$,t)},d}async function t7(t,e,l,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null!==(a=l.class.padding)&&void 0!==a?a:12,r=3*!n,s=t.insert("g").attr("class",p(e)).attr("id",e.domId||e.id),o=null,h=null,d=null,c=null,u=0,g=0,f=0;if(o=s.insert("g").attr("class","annotation-group text"),e.annotations.length>0){let t=e.annotations[0];await et(o,{text:`\xab${t}\xbb`},0),u=o.node().getBBox().height}h=s.insert("g").attr("class","label-group text"),await et(h,e,0,["font-weight: bolder"]);let y=h.node().getBBox();g=y.height,d=s.insert("g").attr("class","members-group text");let m=0;for(let t of e.members){let e=await et(d,t,m,[t.parseClassifier()]);m+=e+r}(f=d.node().getBBox().height)<=0&&(f=i/2),c=s.insert("g").attr("class","methods-group text");let x=0;for(let t of e.methods){let e=await et(c,t,x,[t.parseClassifier()]);x+=e+r}let w=s.node().getBBox();if(null!==o){let t=o.node().getBBox();o.attr("transform",`translate(${-t.width/2})`)}return h.attr("transform",`translate(${-y.width/2}, ${u})`),w=s.node().getBBox(),d.attr("transform",`translate(0, ${u+g+2*i})`),w=s.node().getBBox(),c.attr("transform",`translate(0, ${u+g+(f?f+4*i:2*i)})`),w=s.node().getBBox(),{shapeSvg:s,bbox:w}}async function et(t,e,l){var a;let n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=t.insert("g").attr("class","label").attr("style",i.join("; ")),c=(0,h.getConfig)(),u="useHtmlLabels"in e?e.useHtmlLabels:null===(a=(0,h.evaluate)(c.htmlLabels))||void 0===a||a,g="";g="text"in e?e.text:e.label,!u&&g.startsWith("\\")&&(g=g.substring(1)),(0,h.hasKatex)(g)&&(u=!0);let f=await (0,s.createText)(r,(0,h.sanitizeText2)((0,o.decodeEntities)(g)),{width:(0,o.calculateTextWidth)(g,c)+50,classes:"markdown-node-label",useHtmlLabels:u},c),p=1;if(u){let t=f.children[0],e=(0,d.select)(f);p=t.innerHTML.split("<br>").length,t.innerHTML.includes("</math>")&&(p+=t.innerHTML.split("<mrow>").length-1);let l=t.getElementsByTagName("img");if(l){let t=""===g.replace(/<img[^>]*>/g,"").trim();await Promise.all([...l].map(e=>new Promise(l=>{function a(){if(e.style.display="flex",e.style.flexDirection="column",t){var a,n;let t=5*parseInt(null!==(n=null===(a=c.fontSize)||void 0===a?void 0:a.toString())&&void 0!==n?n:window.getComputedStyle(document.body).fontSize,10)+"px";e.style.minWidth=t,e.style.maxWidth=t}else e.style.width="100%";l(e)}(0,h.__name)(a,"setupImage"),setTimeout(()=>{e.complete&&a()}),e.addEventListener("error",a),e.addEventListener("load",a)})))}n=t.getBoundingClientRect(),e.attr("width",n.width),e.attr("height",n.height)}else{i.includes("font-weight: bolder")&&(0,d.select)(f).selectAll("tspan").attr("font-weight",""),p=f.children.length;let t=f.children[0];(""===f.textContent||f.textContent.includes("&gt"))&&(t.textContent=g[0]+g.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim()," "===g[1]&&(t.textContent=t.textContent[0]+" "+t.textContent.substring(1))),"undefined"===t.textContent&&(t.textContent=""),n=f.getBBox()}return r.attr("transform","translate(0,"+(-n.height/(2*p)+l)+")"),n.height}async function ee(t,e){var l,a,n,i,r,s,o,u;let g=(0,h.getConfig2)(),p=null!==(n=g.class.padding)&&void 0!==n?n:12,y=null===(r=null!==(i=e.useHtmlLabels)&&void 0!==i?i:(0,h.evaluate)(g.htmlLabels))||void 0===r||r;e.annotations=null!==(s=e.annotations)&&void 0!==s?s:[],e.members=null!==(o=e.members)&&void 0!==o?o:[],e.methods=null!==(u=e.methods)&&void 0!==u?u:[];let{shapeSvg:m,bbox:x}=await t7(t,e,g,y,p),{labelStyles:w,nodeStyles:v}=D(e);e.labelStyle=w,e.cssStyles=e.styles||"";let b=(null===(l=e.styles)||void 0===l?void 0:l.join(";"))||v||"";e.cssStyles||(e.cssStyles=b.replaceAll("!important","").split(";"));let k=0===e.members.length&&0===e.methods.length&&!(null===(a=g.class)||void 0===a?void 0:a.hideEmptyMembersBox),M=c.default.svg(m),$=C(e,{});"handDrawn"!==e.look&&($.roughness=0,$.fillStyle="solid");let _=x.width,S=x.height;0===e.members.length&&0===e.methods.length?S+=p:e.members.length>0&&0===e.methods.length&&(S+=2*p);let P=-_/2,A=-S/2,N=M.rectangle(P-p,A-p-(k?p:0===e.members.length&&0===e.methods.length?-p/2:0),_+2*p,S+2*p+(k?2*p:0===e.members.length&&0===e.methods.length?-p:0),$),L=m.insert(()=>N,":first-child");L.attr("class","basic label-container");let T=L.node().getBBox();m.selectAll(".text").each((t,l,a)=>{let n=(0,d.select)(a[l]),i=n.attr("transform"),r=0;if(i){let t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(i);t&&(r=parseFloat(t[2]))}let s=r+A+p-(k?p:0===e.members.length&&0===e.methods.length?-p/2:0);y||(s-=4);let o=P;if(n.attr("class").includes("label-group")||n.attr("class").includes("annotation-group")){var h;o=-(null===(h=n.node())||void 0===h?void 0:h.getBBox().width)/2||0,m.selectAll("text").each(function(t,e,l){"middle"===window.getComputedStyle(l[e]).textAnchor&&(o=0)})}n.attr("transform",`translate(${o}, ${s})`)});let B=m.select(".annotation-group").node().getBBox().height-(k?p/2:0)||0,R=m.select(".label-group").node().getBBox().height-(k?p/2:0)||0,I=m.select(".members-group").node().getBBox().height-(k?p/2:0)||0;if(e.members.length>0||e.methods.length>0||k){let t=M.line(T.x,B+R+A+p,T.x+T.width,B+R+A+p,$);m.insert(()=>t).attr("class","divider").attr("style",b)}if(k||e.members.length>0||e.methods.length>0){let t=M.line(T.x,B+R+I+A+2*p+p,T.x+T.width,B+R+I+A+p+2*p,$);m.insert(()=>t).attr("class","divider").attr("style",b)}if("handDrawn"!==e.look&&m.selectAll("path").attr("style",b),L.select(":nth-child(2)").attr("style",b),m.selectAll(".divider").select("path").attr("style",b),e.labelStyle?m.selectAll("span").attr("style",e.labelStyle):m.selectAll("span").attr("style",b),!y){let t=RegExp(/color\s*:\s*([^;]*)/),e=t.exec(b);if(e){let t=e[0].replace("color","fill");m.selectAll("tspan").attr("style",t)}else if(w){let e=t.exec(w);if(e){let t=e[0].replace("color","fill");m.selectAll("tspan").attr("style",t)}}}return f(e,L),e.intersect=function(t){return F.rect(e,t)},m}(0,h.__name)(t1,"tiltedCylinder"),(0,h.__name)(t5,"trapezoid"),(0,h.__name)(t3,"trapezoidalPentagon"),(0,h.__name)(t4,"triangle"),(0,h.__name)(t8,"waveEdgedRectangle"),(0,h.__name)(t9,"waveRectangle"),(0,h.__name)(t6,"windowPane"),(0,h.__name)(t7,"textHelper"),(0,h.__name)(et,"addText"),(0,h.__name)(ee,"classBox");var el=(0,h.__name)(t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function ea(t,e,l){var a,n,i;let r,s,o,h,{config:d}=l,{labelStyles:y,nodeStyles:m}=D(e);e.labelStyle=y||"";let x=e.width;e.width=(null!==(n=e.width)&&void 0!==n?n:200)-10;let{shapeSvg:w,bbox:v,label:b}=await u(t,e,p(e)),k=e.padding||10,$="";"ticket"in e&&e.ticket&&(null==d?void 0:null===(a=d.kanban)||void 0===a?void 0:a.ticketBaseUrl)&&($=null==d?void 0:null===(i=d.kanban)||void 0===i?void 0:i.ticketBaseUrl.replace("#TICKET#",e.ticket),r=w.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",$).attr("target","_blank"));let _={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};r?{label:s,bbox:o}=await g(r,"ticket"in e&&e.ticket||"",_):{label:s,bbox:o}=await g(w,"ticket"in e&&e.ticket||"",_);let{label:S,bbox:P}=await g(w,"assigned"in e&&e.assigned||"",_);e.width=x;let A=(null==e?void 0:e.width)||0,N=Math.max(o.height,P.height)/2,L=Math.max(v.height+20,(null==e?void 0:e.height)||0)+N,T=-A/2,B=-L/2;b.attr("transform","translate("+(k-A/2)+", "+(-N-v.height/2)+")"),s.attr("transform","translate("+(k-A/2)+", "+(-N+v.height/2)+")"),S.attr("transform","translate("+(k+A/2-P.width-20)+", "+(-N+v.height/2)+")");let{rx:R,ry:I}=e,{cssStyles:W}=e;if("handDrawn"===e.look){let t=c.default.svg(w),l=C(e,{}),a=R||I?t.path(M(T,B,A,L,R||0),l):t.rectangle(T,B,A,L,l);(h=w.insert(()=>a,":first-child")).attr("class","basic label-container").attr("style",W||null)}else{(h=w.insert("rect",":first-child")).attr("class","basic label-container __APA__").attr("style",m).attr("rx",null!=R?R:5).attr("ry",null!=I?I:5).attr("x",T).attr("y",B).attr("width",A).attr("height",L);let t="priority"in e&&e.priority;if(t){let e=w.append("line"),l=T+2,a=B+Math.floor((null!=R?R:0)/2),n=B+L-Math.floor((null!=R?R:0)/2);e.attr("x1",l).attr("y1",a).attr("x2",l).attr("y2",n).attr("stroke-width","4").attr("stroke",el(t))}}return f(e,h),e.height=L,e.intersect=function(t){return F.rect(e,t)},w}(0,h.__name)(ea,"kanbanItem");var en=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:tq},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:tH},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:tZ},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:tJ},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:to},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:J},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:tO},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:ty},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:tD},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:tS},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:t5},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:tM},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:td},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:tK},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:V},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:tF},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:tU},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:tV},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:tg},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:tm},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:Y},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:te},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:ta},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:tC},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:t8},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:tf},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:t1},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:tL},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:tn},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:th},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:t4},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:t6},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:tc},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:t3},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:tu},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:tj},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:tR},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:tB},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:Z},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:Q},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:tQ},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:tX},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:t9},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:tE},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:tT}],ei=(0,h.__name)(()=>Object.fromEntries([...Object.entries({state:tG,choice:U,note:tI,rectWithTitle:tz,labelRect:t_,iconSquare:tb,iconCircle:tw,icon:tx,iconRounded:tv,imageSquare:tk,anchor:j,kanbanItem:ea,classBox:ee}),...en.flatMap(t=>[t.shortName,..."aliases"in t?t.aliases:[],..."internalAliases"in t?t.internalAliases:[]].map(e=>[e,t.handler]))]),"generateShapeMap")();function er(t){return t in ei}(0,h.__name)(er,"isValidShape");var es=new Map;async function eo(t,e,l){let a,n;"rect"===e.shape&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");let i=e.shape?ei[e.shape]:void 0;if(!i)throw Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let r;"sandbox"===l.config.securityLevel?r="_top":e.linkTarget&&(r=e.linkTarget||"_blank"),a=t.insert("svg:a").attr("xlink:href",e.link).attr("target",null!=r?r:null),n=await i(a,e,l)}else a=n=await i(t,e,l);return e.tooltip&&n.attr("title",e.tooltip),es.set(e.id,a),e.haveCallback&&a.attr("class",a.attr("class")+" clickable"),a}(0,h.__name)(eo,"insertNode");var eh=(0,h.__name)((t,e)=>{es.set(e.id,t)},"setNodeElem"),ed=(0,h.__name)(()=>{es.clear()},"clear"),ec=(0,h.__name)(t=>{let e=es.get(t.id);h.log.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");let l=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+l-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),l},"positionNode")}}]);
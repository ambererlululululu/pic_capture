"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["64821"],{722449:function(e,n,t){t.d(n,{default:function(){return o}}),t(713738);var l=t(430261),a=t(345660),o=(0,l.IconFactory)((0,a.jsx)(e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.94 16.86a1.5 1.5 0 0 1 0-2.12l7.646-7.647a2 2 0 0 1 2.828 0l7.647 7.646a1.5 1.5 0 0 1-2.122 2.121L12 9.921l-6.94 6.94a1.5 1.5 0 0 1-2.12 0",clipRule:"evenodd"})}),{}))},848095:function(e,n,t){t.d(n,{convertUnicodeIndexToStringIndex:function(){return l}});let l=(e,n)=>[...e].slice(0,n).join("").length},942054:function(e,n,t){t.d(n,{FlowingLightEffect:function(){return r}});var l=t(812650),a=t.n(l),o=t(345660);let r=e=>{let{children:n,className:t,style:l}=e;return(0,o.jsx)("div",{className:a()("flowing-light-o3Jbq9",t),style:l,children:n})}},502498:function(e,n,t){t.d(n,{ThinkReasonContent:function(){return w}});var l=t(554479),a=t(870539),o=t(713738),r=t(812650),i=t.n(r),s=t(981483),c=t(752673),d=t(698392),u=t(846106),p=t(942054),h=t(450523),m=t(915299),v=t(584914),f=t(345660);let k=(0,o.forwardRef)(function(e,n){let{defaultExpand:t=!1,loading:l,loadingNode:a,insertedElements:r,isSelectMode:i=!1,contentStr:c="",isFinished:d=!1,collapseButtonText:u="",onCollapseButtonClick:p,onQuotaBlockTextCopy:k}=e,{isCanvasNotNarrowMode:x}=(0,v.useIsCanvasNarrowModeHook)(),g=(0,m.useTranslateFn)(),_=(0,o.useRef)(null);return(0,o.useEffect)(()=>{var e,n;let t=null!==(n=null===(e=_.current)||void 0===e?void 0:e.getRootElement())&&void 0!==n?n:null;return k&&(null==t||t.addEventListener("copy",k)),()=>{k&&(null==t||t.removeEventListener("copy",k))}},[k]),(0,f.jsxs)(h.CollapseWrapperContent,{ref:n,isCanvasMode:x,defaultExpand:t,isSelectMode:i,isFinished:d,collapseheaderTitleCls:"think-block-title-ghQ0AX",collapseButtonText:u,onCollapseButtonClick:p,tooltip:{expand:g("web_deepResearch_tooltip_expand"),collapse:g("web_deepResearch_tooltip_collapse")},children:[(0,f.jsx)("div",{className:"think-quota-block-mdbox-jawSft",children:(0,f.jsx)(s.MdBoxLazy,{ref:_,markDown:c,insertedElements:r,theme:"samantha",smooth:{enable:!d,maxFirstTextSmoothSize:10}})}),l&&a]})});var x={"think-collapse-block":"think-collapse-block-BcITHX",thinkCollapseBlock:"think-collapse-block-BcITHX","think-collapse-button":"think-collapse-button-tvRsQz",thinkCollapseButton:"think-collapse-button-tvRsQz","think-collapse-button-icon":"think-collapse-button-icon-GWj7hA",thinkCollapseButtonIcon:"think-collapse-button-icon-GWj7hA","icon-open":"icon-open-TPrpr6",iconOpen:"icon-open-TPrpr6","icon-close":"icon-close-U6yX2s",iconClose:"icon-close-U6yX2s","quote-block-wrapper":"quote-block-wrapper-vnbHuA",quoteBlockWrapper:"quote-block-wrapper-vnbHuA","top-wrapper":"top-wrapper-wQcIHQ",topWrapper:"top-wrapper-wQcIHQ","top-wrapper-canvas-expand":"top-wrapper-canvas-expand-mcarRh",topWrapperCanvasExpand:"top-wrapper-canvas-expand-mcarRh","bottom-wrapper":"bottom-wrapper-XLru09",bottomWrapper:"bottom-wrapper-XLru09","bottom-wrapper-canvas-expand":"bottom-wrapper-canvas-expand-JPitpo",bottomWrapperCanvasExpand:"bottom-wrapper-canvas-expand-JPitpo","quote-block-wrapper-expand":"quote-block-wrapper-expand-qy09gX",quoteBlockWrapperExpand:"quote-block-wrapper-expand-qy09gX","think-quota-block":"think-quota-block-FrhJWl",thinkQuotaBlock:"think-quota-block-FrhJWl","think-quota-block-mdbox":"think-quota-block-mdbox-Z9DU1R",thinkQuotaBlockMdbox:"think-quota-block-mdbox-Z9DU1R","think-quota-block-inner":"think-quota-block-inner-UrwO7x",thinkQuotaBlockInner:"think-quota-block-inner-UrwO7x","think-quota-block-inner-default-expand":"think-quota-block-inner-default-expand-ef9QE3",thinkQuotaBlockInnerDefaultExpand:"think-quota-block-inner-default-expand-ef9QE3","think-quota-block-inner-default-collapsed":"think-quota-block-inner-default-collapsed-JJD9Xn",thinkQuotaBlockInnerDefaultCollapsed:"think-quota-block-inner-default-collapsed-JJD9Xn"};let g=e=>{let{isExpand:n,onClick:t,isFinished:a,text:o}=e;return(0,f.jsxs)("div",{className:x["think-collapse-button"],"data-testid":"think_collapse_button",onClick:t,children:[a?o:(0,f.jsx)(p.FlowingLightEffect,{children:o}),(0,f.jsx)(l.default,{className:i()(x["think-collapse-button-icon"],x[n?"icon-open":"icon-close"])})]})},_=(0,o.forwardRef)(function(e,n){let{children:t}=e;return(0,f.jsx)("div",{ref:n,className:x["think-collapse-block"],children:t})}),b=e=>{let{loadingNode:n,loading:t,contentStr:l="",isExpand:r=!1,insertedElements:c=[],defaultExpand:p,enableSmooth:h,quotaBlockClassName:m,hasquotaBlockWrapper:v=!1,onCopy:k,onMessageRender:g}=e,_=(0,o.useRef)(null),b=(0,d.useChatSlice)("chatViewCanvasStore",e=>e.isExpand);return(0,o.useEffect)(()=>{var e,n;let t=null!==(n=null===(e=_.current)||void 0===e?void 0:e.getRootElement())&&void 0!==n?n:null;return k&&(null==t||t.addEventListener("copy",k)),()=>{k&&(null==t||t.removeEventListener("copy",k))}},[k]),(0,o.useEffect)(()=>{null==g||g()},[g]),(0,f.jsxs)("div",{className:"relative h-fit",children:[(0,f.jsx)(u.ScrollView,{className:i()(v&&x["quote-block-wrapper"],v&&r&&x["quote-block-wrapper-expand"]),bottomAttaching:!0,children:(0,f.jsx)("div",{className:i()(x["think-quota-block"],m,r&&"mb-15"),"data-testid":"think_quota_block",children:(0,f.jsx)(a.default,{in:r,addEndListener:(e,n)=>{e.addEventListener("transitionend",n,!1)},onEnter:e=>{e.style.height="0",e.style.display="block"},onEntering:e=>{e.style.height=`${e.scrollHeight}px`},onEntered:e=>{e.style.height="auto"},onExit:e=>{e.style.display="block",e.style.height=`${e.offsetHeight}px`,e.offsetHeight},onExiting:e=>{e.style.height="0"},onExited:e=>{e.style.display="none",e.style.height="auto"},children:(0,f.jsxs)("div",{className:i()([x["think-quota-block-inner"],p?x["think-quota-block-inner-default-expand"]:x["think-quota-block-inner-default-collapsed"]]),children:[(0,f.jsx)(s.MdBoxLazy,{ref:_,className:x["think-quota-block-mdbox"],markDown:l,insertedElements:c,theme:"samantha",smooth:{enable:h,maxFirstTextSmoothSize:10}}),t&&n]})})})}),v&&r&&(0,f.jsx)("div",{className:i()(x["top-wrapper"],{[x["top-wrapper-canvas-expand"]]:b})}),v&&r&&(0,f.jsx)("div",{className:i()(x["bottom-wrapper"],{[x["bottom-wrapper-canvas-expand"]]:b})})]})},w=(0,o.forwardRef)(function(e,n){let{defaultExpand:t=!1,loading:l,loadingNode:a,insertedElements:r,contentStr:i="",isFinished:s=!1,collapseButtonText:d="",enableThinkContainer:u,quotaBlockClassName:p,hasquotaBlockWrapper:h,onCollapseButtonClick:m,onQuotaBlockTextCopy:v,onMessageRender:x}=e,[w,C]=(0,o.useState)(t),{isSelectMode:E}=(0,c.useThreadShareStore)();return((0,o.useEffect)(()=>{t!==w&&C(t)},[t]),u)?(0,f.jsx)(k,{isSelectMode:E,isFinished:s,defaultExpand:w,contentStr:i,collapseButtonText:d,loading:l,loadingNode:a,insertedElements:r,onCollapseButtonClick:m,onQuotaBlockTextCopy:v}):(0,f.jsxs)(_,{ref:n,children:[(0,f.jsx)(g,{isFinished:s,isExpand:w,text:d,onClick:()=>{C(!w),null==m||m(!w)}}),(0,f.jsx)(b,{onCopy:v,contentStr:i,isExpand:w,defaultExpand:t,enableSmooth:!s,loading:l,loadingNode:a,insertedElements:r,quotaBlockClassName:p,hasquotaBlockWrapper:h,onMessageRender:x})]})})},744322:function(e,n,t){t.d(n,{DeepThinkingContent:function(){return q}});var l=t(713738),a=t(217957),o=t(502498),r=t(241107),i=t(461141),s=t(334312),c=t(777422),d=t(915299),u=t(165994),p=t(302958),h=t(486677),m=t(266655),v=t(812650),f=t.n(v),k=t(843174),x=t(848095),g=t(167838),_=t(554479),b=t(214071),w=t(62352),C=t(941186),E=t(609493),j=t(345660);let T=e=>{let{searchReferences:n}=e,t=(0,d.useTranslateFn)(),[o,r]=(0,l.useState)([]);return(0,b.default)(n)?null:(0,j.jsx)(w.default,{className:E.default["think-reference"],expandIcon:(0,j.jsx)(g.default,{className:f()(E.default.chevron,E.default["chevron-right"])}),onChange:e=>{r(e)},collapseIcon:(0,j.jsx)(_.default,{className:E.default.chevron}),children:(0,j.jsx)(w.default.Panel,{header:(0,j.jsx)("span",{className:f()("mr-4 text-14 !text-s-color-text-tertiary",{[E.default["collapse-header"]]:(0,a.default)(null==o?void 0:o.length)||0===o.length}),children:t("considering_sources_status_test_1",{postProcess:"sprintf",sprintf:[` ${n.length} `]})}),itemKey:"1",className:"bg-none border-none",children:(0,j.jsx)(C.DeepThinkingReferenceContent,{classname:"ml-4",childrenCollapse:!1,references:n})})})};var y=t(47732),S=t(750874),N={"search-bar":"search-bar-j23cW8"};let R=(e,n,t)=>t.map(t=>{var l,o,r,i;return(0,a.default)(t.position)?{...t,index:0}:""===e&&t?{...t,index:null!==(o=n[null!==(l=t.position)&&void 0!==l?l:0])&&void 0!==o?o:-1}:{...t,index:(0,x.convertUnicodeIndexToStringIndex)(e,null!==(i=n[null!==(r=t.position)&&void 0!==r?r:0])&&void 0!==i?i:-1)}}),I=e=>{var n,t,l,a,o,r,i;let{metaInfos:s,thinkText:c,conversationId:d,messageReplyId:u,isThinkingFinished:v=!0,searchType:x="simple_search",isShare:g=!1,options:_,enableOpenCanvas:b=!0,onTrackEvent:w,customRenderSearchSideBarBtn:C}=e,{sources:E=[]}=null!=_?_:{},I=s.filter(S.isDeepThinkingMetaInfo),B=null!==(l=null==I?void 0:null===(t=I[0])||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.references)&&void 0!==l?l:[],$=B.map(e=>[e.position,e.position]).flat(2).filter(e=>void 0!==e).map(e=>Number(e)),q=k.utf8.posCalcRange(c,$),F=R(c,q,B),W=(0,p.default)(F,e=>e.index),D=[];for(let[e,n]of(0,h.default)(W))for(let t of(0,m.default)(n)){let{data:n}=null!=t?t:{},l=Number(e);if((-1===l||l+1===c.length&&v)&&(l=c.length),!n)continue;let a={text_card:{card_list:n.map(e=>e.text_card).filter(Boolean)},video_card:{card_list:n.map(e=>e.video_card).filter(Boolean)}};D.push({range:l,type:"block",render:()=>(0,j.jsx)(j.Fragment,{children:g?(0,j.jsx)(T,{searchReferences:n}):(0,j.jsx)(y.SearchSiderBarBtn,{meta:[],classname:f()(N["search-bar"],"!mt-0"),searchType:x,autoOpenCanvas:!v,conversationId:d,messageReplyId:u+e,referenceInAll:a,useDeepThinking:!0,enableOpenCanvas:b,showFrom:"cot",onTrackEvent:w,customRenderSearchSideBarBtn:C})})})}if(0===D.length&&E){let{text_card:e,video_card:n}=null!=E?E:{},t=(null!==(r=null==e?void 0:null===(a=e.card_list)||void 0===a?void 0:a.length)&&void 0!==r?r:0)>0||(null!==(i=null==n?void 0:null===(o=n.card_list)||void 0===o?void 0:o.length)&&void 0!==i?i:0)>0,{deepThinkingReference:l=[]}=(0,S.getReferenceSources)(E,[]);t&&D.push({range:Number(0),type:"block",render:()=>(0,j.jsx)(j.Fragment,{children:g?(0,j.jsx)(T,{searchReferences:l}):(0,j.jsx)(y.SearchSiderBarBtn,{meta:[],classname:f()(N["search-bar"],"!mt-0"),showFrom:"cot",autoOpenCanvas:!v,searchType:x,conversationId:d,messageReplyId:`${u}0`,referenceInAll:E,useDeepThinking:!0,onTrackEvent:w,customRenderSearchSideBarBtn:C})})})}return D};var B=t(493135),$=t(930750);let q=(0,l.forwardRef)(function(e,n){var t,p;let{meta:h,content:m,searchType:v,messageReplyId:f,conversationId:k,botId:x,messageId:g,skillId:_,skillType:b,references:w,options:C,isShare:E=!1,forceCloseCanvas:T=!1,enableOpenCanvas:y=!0,thinkExpandStatus:N=!1,isThinkingFinished:R=!0,isThinkingBroken:q=!1,onTrackEvent:F,messageText:W,customRenderSearchSideBarBtn:D}=e,L=(0,d.useTranslateFn)(),{isInSearchLoading:M,loadingTitle:O}=null!=C?C:{},{sources:A}=(0,S.getReferenceSources)(w,[]),{onOpenSearchCanvas:H}=(0,$.useOpenSearchCanvas)({searchType:v,messageReplyId:f,conversationId:k,useDeepThinking:!0,referenceInAll:A,isAutoOpenCanvasInNarrow:!0,onTrackEvent:F}),P=(0,i.getChatConfig)("chatMessageBoxConfig"),Q=null===(p=null==P?void 0:null===(t=P.deepThinkingContent)||void 0===t?void 0:t.enableOpenCanvas)||void 0===p||p,U=y&&Q,{sources:X,collapseButtonText:J}=(0,l.useMemo)(()=>{let{sources:e=[]}=(0,S.getReferenceSources)(w,[]),n=(0,S.getDeepThinkingTitle)(e,R,L),{title:t}=(0,S.getDeepThinkingContent)(h);return{sources:e,collapseButtonText:t||n}},[w,R]),z=h?(0,r.batchConvertMetaInfoToUnionMetaInfo)(h):[],Z=(0,$.useThinkContentData)(),V=(0,u.default)(R),K=(!(Z&&(0,a.default)(V))||!R)&&N,G=(0,l.useMemo)(()=>({isShare:E,metaInfos:null!=z?z:[],thinkText:null!=m?m:"",searchType:v,messageReplyId:f,conversationId:k,isThinkingFinished:R||q,options:{sources:w},enableOpenCanvas:U,onTrackEvent:F,customRenderSearchSideBarBtn:D}),[z,m]),Y=(0,l.useMemo)(()=>(0,a.default)(m)?[]:I(G),[G]);return((0,l.useEffect)(()=>{!X||!(X.length>0)||R||q||T||H()},[X]),(0,l.useEffect)(()=>{R||null===c.trackEvent||void 0===c.trackEvent||(0,c.trackEvent)("deep_thinking_progress_show",{conversation_id:k,bot_id:x,message_id:g,skill_id:_,skill_name:(0,s.getSkillTeaNameByType)(b),whether_browsing:+((null==X?void 0:X.length)>0)})},[]),R&&!m)?null:(0,j.jsx)(o.ThinkReasonContent,{ref:n,enableThinkContainer:Z,onQuotaBlockTextCopy:()=>{var e,n,t,l;let a=null===(t=document)||void 0===t?void 0:null===(n=t.getSelection())||void 0===n?void 0:null===(e=n.toString())||void 0===e?void 0:e.replace(/[\r\n]/g,"");if(a){let e=-1===(null==m?void 0:null===(l=m.replace(/[\r\n]/g,""))||void 0===l?void 0:l.indexOf(a));a&&m&&(null===c.trackEvent||void 0===c.trackEvent||(0,c.trackEvent)("right_click_copy",{message_id:g,bot_id:x,click_from:"deep_thinking",conversation_id:k,start_index:e?"0":void 0,end_index:e?`${(null==W?void 0:W.length)||0}`:void 0,skill_id:_}))}},onCollapseButtonClick:e=>{null===c.trackEvent||void 0===c.trackEvent||(0,c.trackEvent)("deep_thinking_progress_click",{conversation_id:k,bot_id:x,message_id:g,skill_id:_,skill_name:(0,s.getSkillTeaNameByType)(b),whether_browsing:+((null==X?void 0:X.length)>0),to_status:e?"open":"close"})},isFinished:R||q,contentStr:m,defaultExpand:K,insertedElements:Y,collapseButtonText:J,loading:M,loadingNode:(0,j.jsx)(B.DeepThinkingToolsCallUI,{title:O||L("web_search_deep_think_searchResult_label_searching"),loading:!0})})})},941186:function(e,n,t){t.d(n,{DeepThinkingReferenceContent:function(){return k}});var l=t(722449),a=t(983785),o=t(557298),r=t(828438),i=t(713738),s=t(812650),c=t.n(s),d=t(915299),u=t(255804),p=t(964459),h={item:"item-P06ikW",expand:"expand-U8DzXt","expand-text":"expand-text-mSgm8k","expand-icon":"expand-icon-LjQr64"},m=t(345660);let v=e=>{let{idx:n,text:t,url:l,className:a,searchType:o,onClick:s,onTrackEvent:d}=e,[u,p]=(0,r.useInView)({triggerOnce:!0,initialInView:!1,threshold:.8});return(0,i.useEffect)(()=>{p&&(null==d||d("search_singlecard_show",{url:l,title:t,search_type:o,card_type:"doubao_search",content_type:"webpage",show_from:"chat",whether_use_deep_thinking:"yes"}))},[p]),(0,m.jsx)("div",{ref:u,className:"w-full",children:(0,m.jsx)("div",{className:c()("mt-8 leading-normal tracking-[.45px] cursor-pointer","text-15 text-ellipsis overflow-hidden",a,h.item),style:{textWrap:"nowrap"},onClick:()=>{null==d||d("search_singlecard_click",{url:l,title:t,search_type:o,card_type:"doubao_search",content_type:"webpage",click_from:"chat",whether_use_deep_thinking:"yes"}),s(l)},children:`${n}. ${t}`})})},f=e=>{var n,t,l,a,o,r,i,s,d;let{item:u,index:p,searchType:h,firstReferenceClassName:f,onClick:k,onTrackEvent:x}=e;return u.text_card?(0,m.jsx)(v,{idx:Number((null===(n=u.text_card)||void 0===n?void 0:n.index)||p+1),text:null!==(l=u.text_card.title)&&void 0!==l?l:"",url:null!==(a=null===(t=u.text_card)||void 0===t?void 0:t.url)&&void 0!==a?a:"",onClick:k,className:c()({"mt-16":0===p},0===p&&f),searchType:h,onTrackEvent:x},p):u.video_card?(0,m.jsx)(v,{idx:Number((null===(o=u.video_card)||void 0===o?void 0:o.index)||p+1),text:null!==(s=null===(r=u.video_card)||void 0===r?void 0:r.video_captions)&&void 0!==s?s:"",url:null!==(d=null===(i=u.video_card)||void 0===i?void 0:i.main_site_url)&&void 0!==d?d:"",onClick:k,className:c()({"mt-16":0===p},0===p&&f),searchType:h,onTrackEvent:x},p):null},k=e=>{let{references:n,classname:t,firstReferenceClassName:r,childrenCollapse:s=!0,searchType:c="simple_search",onTrackEvent:v}=e,[k,x]=(0,i.useState)(!1),g=(0,d.useTranslateFn)(),_=e=>{e&&window.open((0,o.filterUrlModule)(u.ExternalLink.transformExternalLink(e),null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkbHBI$m14alF6RXdZ$WRzZFdFeWJI$mFl$*w2WTIxTmRsa3lPWFJq%npsM$ds-zFNRXd6%214-WJWWj$Xb*Mx-Wxw$E1Xc*lNal$3$2xjM%1Fd3liSFZh%jFZMFRHN$Nlb$ZI%m5s-%0xWj-"}))};return s?(0,m.jsxs)("div",{className:t,children:[n.slice(0,5).map((e,n)=>(0,m.jsx)(f,{item:e,index:n,onClick:_,searchType:c,firstReferenceClassName:r,onTrackEvent:v})),n.length>5&&(0,m.jsx)(p.default,{className:"-ml-4",isOpen:k,children:(0,m.jsx)("div",{className:"ml-4",children:n.slice(5).map((e,n)=>(0,m.jsx)(f,{item:e,index:n+5,onClick:_,searchType:c,onTrackEvent:v}))})}),n.length>5&&(0,m.jsxs)("div",{className:h.expand,onClick:()=>{x(!k)},children:[(0,m.jsx)("div",{className:h["expand-text"],children:g(k?"web_search_deep_think_searchResult_showLess":"web_search_deep_think_searchResult_showMore")}),k?(0,m.jsx)(l.default,{className:h["expand-icon"]}):(0,m.jsx)(a.default,{className:h["expand-icon"]})]})]}):(0,m.jsx)("div",{className:t,children:n.map((e,n)=>(0,m.jsx)(f,{item:e,index:n,onClick:_,searchType:c,firstReferenceClassName:r,onTrackEvent:v}))})}},47732:function(e,n,t){t.d(n,{SearchSiderBarBtn:function(){return v}});var l=t(828438),a=t(713738),o=t(698392),r=t(750874),i=t(930750),s=t(485704),c=t(525029),d=t(941588),u=t(609493),p=t(345660);let h=e=>{let{sources:n}=e,t=()=>{};return(0,p.jsx)("div",{className:u.default["search-reference-container"],children:null==n?void 0:n.map(e=>(0,p.jsx)(d.SearchTextItem,{classname:"!px-8 !py-8 !w-full !mx-0 !my-0",searchItemTitleClassName:u.default["search-item-title"],searchItemSummaryClassName:u.default["search-item-summary"],footerClassName:u.default["search-item-footer"],footerTitleClassName:u.default["footer-title"],value:e,onClick:t},e.search_id))})},m=e=>{let{sources:n,children:t}=e;return(0,p.jsx)(c.SamanthaPopover,{className:u.default.popover,autoAdjustOverflow:!0,trigger:"hover",position:"bottom",showArrow:!1,content:(0,p.jsx)(h,{sources:n}),children:null==t?void 0:t({})})},v=e=>{let{meta:n,query:t,searchType:c,conversationId:d,messageReplyId:u,title:h,classname:v,style:f,autoOpenCanvas:k=!1,enableOpenCanvas:x=!0,showFrom:g="answer_complete",useDeepThinking:_=!0,referenceInUsed:b,referenceInAll:w,onClick:C,onTrackEvent:E,customRenderSearchSideBarBtn:j}=e,[T,y,S]=(0,o.useChatSlice)("chatViewCanvasStore",e=>[e.isExpand,e.matchedCanvasPluginIdentifier,e.isExpand&&e.messageId===u]),[N,R]=(0,l.useInView)({triggerOnce:!0,initialInView:!1,threshold:1}),{referenceInUsed:I,referenceInAll:B=[]}=(0,a.useMemo)(()=>{let{sources:e,referenceInUsed:t}=(0,r.getReferenceSources)(w,n);return{referenceInUsed:t,referenceInAll:e}},[b,w,u]),{onOpenSearchCanvas:$,onCloseCanvas:q}=(0,i.useOpenSearchCanvas)({query:t,searchType:c,conversationId:null!=d?d:"",messageReplyId:null!=u?u:"",useDeepThinking:_,referenceInUsed:I,referenceInAll:B,isAutoOpenCanvasInNarrow:!1,onTrackEvent:E}),F=()=>{if(null==E||E("search_result_entrance_click",{search_type:c,show_from:g,whether_use_deep_thinking:_?"yes":"no"}),d&&u&&x){if(S){q(),null==C||C(!1);return}$(),null==C||C(!0)}};return((0,a.useEffect)(()=>{R&&(null==E||E("search_result_entrance_show",{search_type:c,show_from:g,whether_use_deep_thinking:_?"yes":"no"}))},[R]),(0,a.useEffect)(()=>{k&&T&&"receive-search-result-canvas"===y&&F()},[]),B&&0!==B.length)?"function"==typeof j?j(B):(0,p.jsx)("div",{ref:N,children:x?(0,p.jsx)(s.SearchReferenceUI,{classname:v,title:h,style:f,sources:B,onClick:F,isThinkScene:_}):(0,p.jsx)(m,{sources:B,children:e=>{let{onClick:n}=e;return(0,p.jsx)(s.SearchReferenceUI,{classname:v,title:h,style:f,sources:B,onClick:()=>{F(),null==n||n()},isThinkScene:_})}})}):null}},930750:function(e,n,t){t.d(n,{useOpenSearchCanvas:function(){return r},useThinkContentData:function(){return i}});var l=t(57392),a=t(666196),o=t(698392);let r=e=>{let{searchType:n,messageReplyId:t,conversationId:o,referenceInAll:r,isAutoOpen:i=!1,isInSearch:s=!0,useDeepThinking:c=!1,isAutoOpenCanvasInNarrow:d=!1,referenceInUsed:u=[],onTrackEvent:p}=e,h=(0,a.useChatService)("chatViewService");return{onOpenSearchCanvas:()=>{h.openCanvasPanel({messageId:null!=t?t:"",conversationId:"",canvasLayoutState:l.CanvasLayoutState.NARROW_SIDE_PANEL,search_result:{siderBarData:{searchReference:u,searchReferenceInAll:r},searchType:n,messageId:t,conversationId:o,useDeepThinking:c,isInSearch:s,isAutoOpen:i,onTrackEvent:p},ignoreReopenLogger:d},void 0,d)},onCloseCanvas:()=>{h.closeCanvasPanel()}}},i=()=>(0,o.getChatStore)("deepThinkingControlStore").getState().enableDeepThinkingContainer}}]);
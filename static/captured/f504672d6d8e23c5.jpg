"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["559"],{997022:function(e,t,o){o.d(t,{useOnce:function(){return r}});var n=o(713738);let r=e=>{let t=(0,n.useRef)(!1);t.current||(t.current=!0,e())}},100562:function(e,t,o){o.d(t,{ChatHeaderFoundation:function(){return l}});var n=o(516655),r=o(689368),i=o(761473),a=o(345660);let u=()=>(0,a.jsx)("div",{className:"h-[var(--header-height)]"}),l=e=>{let{conversationId:t,chatType:o,leftToolButtonPluginList:l,rightToolButtonPluginList:d,renderFallback:c,batchDownloadSelected:s}=e,{isSelectMode:h,scene:p}=(0,i.useDeprecatedChatEventValue)("chat.share.select",{isSelectMode:!1,scene:void 0}),{matcher:f}=(0,n.useChatHeaderPluginMatcher)(),g=(null!=f?f:[]).map(e=>e({threadSelected:h,threadSelectModeScene:p,batchDownloadSelected:null!=s&&s})).find(e=>void 0!==e),{plugin:C}=(0,r.useChatHeaderPlugin)(null!=g?g:"");if(!C)return c?(0,a.jsx)(a.Fragment,{children:c()}):(0,a.jsx)(u,{});let{Content:P}=C;return(0,a.jsx)(P,{conversationId:t,chatType:o,leftToolButtonPluginList:l,rightToolButtonPluginList:d})}},577180:function(e,t,o){o.d(t,{getGuestNewChatConfig:function(){return T},useChatViewConfigByPath:function(){return y},useChatViewConfigFromUrl:function(){return v}});var n=o(713738),r=o(865607),i=o(754212),a=o(845647),u=o(101874),l=o(698392),d=o(230932),c=o(721118),s=o(73270),h=o(915299),p=o(198660),f=o(393752),g=o(460821),C=o(501108),P=o(64206),b=o(227587),S=o(856392);let T=()=>({isGuestAndNewChatReachLimit:(0,p.getIsGuest)()&&d.useFeedStore.getState().guestReachCreateThreadLimit}),v=()=>{var e;let{id:t}=(0,C.useParams)(),[o]=(0,P.useSearchParams)(),n=Number(o.get("type"));return t&&(0,f.isNumeric)(t)?{chatId:t,chatType:n}:n===a.ChatType.ThreadLocalConversation&&t||(null==t?void 0:null===(e=t.startsWith)||void 0===e?void 0:e.call(t,"local_"))&&!n?{chatId:t,chatType:a.ChatType.ThreadLocalConversation}:void 0},_=e=>{let t=(0,h.useTranslateFn)(),{currentLocalConversationId:o}=(0,l.getChatSlice)("chatViewCoreStore");if(o&&(0,c.localConversationSelector)(d.useFeedStore.getState(),o))return o;if(e)return"";let n=(0,s.createLocalConversationId)();return(0,l.getChatStore)("chatViewCoreStore").setState({currentLocalConversationId:n}),d.useFeedStore.getState().addNewLocalConversation({conversation:{conversation_type:u.PcchatExprConversationType.CocoWebSub,name:t("sidebar_newChat_placeholder")},reportEvent:(0,S.createReportEvent)({eventName:"create_conversation",meta:{from:"header"}}),conversationId:n}),n},y=()=>{let e=v(),t=_(e),o=(0,b.useLocation)(),u=(0,n.useMemo)(()=>o.pathname===i.WRITING_NEW_DOC_PAGE_ROUTE?a.ChatType.NewDoc:a.ChatType.NewThread,[o.pathname]);return(0,g.useCompareMemo)(e?{...e}:{chatId:t,chatType:u},r.shallow)}},708693:function(e,t,o){o.d(t,{ChatInput:function(){return n}});let n=o(367612).ChatInput},216714:function(e,t,o){o.d(t,{CustomChatHeader:function(){return E}});var n=o(713738),r=o(865607),i=o(971410),a=o(879315),u=o(204119),l=o(518710),d=o(847319),c=o(287751),s=o(773982),h=o(11554),p=o(443265),f=o(475692),g=o(123602),C=o(974819),P=o(723009),b=o(709574),S=o(509021),T=o(816408),v=o(316841),_=o(860860),y=o(458221),H=o(699862),m=o(899941),w=o(100562),B=o(198660),N=o(345660);let E=e=>{let{chatId:t,chatType:o}=e,E=(0,B.useIsLoggedIn)(),I=(0,B.useIsGuest)(),{finishExecution:D}=(0,f.useHeaderPopupStore)(),[O]=(0,m.useImageDownloadStore)(e=>[e.batchDownloadSelected],r.default),L=(0,n.useMemo)(()=>E?[v.aispaceCreationChatHeaderToolButtonPlugin,u.newUserGuideChatHeaderToolButtonPlugin,S.botSettingChatHeaderToolButtonPlugin,T.botShareChatHeaderToolButtonPlugin,_.canvasDocSwitchChatHeaderToolButtonPlugin,y.threadSharedAndCollectionPlugin,p.addBookmarkChatHeaderToolButtonPlugin,c.loggedDownloadChatHeaderToolButtonPlugin,a.notificationChatHeaderToolButtonPlugin,P.creditEntranceChatHeaderToolButtonPluginIdentifier,i.avatarChatHeaderToolButtonPlugin]:I?[h.debugChatHeaderToolButtonPlugin,H.threadSharedPlugin,s.downloadChatHeaderToolButtonPlugin,b.loginChatHeaderToolButtonPlugin]:[],[E,I]);return(0,g.useRegisterHeaderPopups)(),(0,n.useEffect)(()=>{if(E!==I){var e,t,o,n;if(E){D(null===(e=C.HeaderPopupConfigs.UnloginKeyFeatureNotification)||void 0===e?void 0:e.id);return}if(I){D(null===(t=C.HeaderPopupConfigs.LoginKeyFeatureNotification)||void 0===t?void 0:t.id),D(null===(o=C.HeaderPopupConfigs.NewUserGuide)||void 0===o?void 0:o.id),D(null===(n=C.HeaderPopupConfigs.UpdateNotification)||void 0===n?void 0:n.id);return}}},[E,I]),(0,N.jsx)(w.ChatHeaderFoundation,{conversationId:t,chatType:o,leftToolButtonPluginList:[l.createConversationChatHeaderToolButtonPlugin,d.editConversationChatHeaderToolButtonPlugin],rightToolButtonPluginList:L,batchDownloadSelected:O})}},458221:function(e,t,o){o.d(t,{threadSharedAndCollectionPlugin:function(){return n}});let n=Symbol("thread-shared-and-collection")},699862:function(e,t,o){o.d(t,{threadSharedPlugin:function(){return n}});let n=Symbol("thread-share-chat-header-tool-button-plugin")},316841:function(e,t,o){o.d(t,{aispaceCreationChatHeaderToolButtonPlugin:function(){return n}});let n=Symbol("aispace-creation-chat-header-tool-button-plugin")},509021:function(e,t,o){o.d(t,{botSettingChatHeaderToolButtonPlugin:function(){return n}});let n=Symbol("bot-setting-chat-header-tool-button-plugin")},816408:function(e,t,o){o.d(t,{botShareChatHeaderToolButtonPlugin:function(){return n}});let n=Symbol("bot-share-chat-header-tool-button-plugin")},709574:function(e,t,o){o.d(t,{loginChatHeaderToolButtonPlugin:function(){return n}});let n=Symbol("debug-chat-header-tool-button")},723009:function(e,t,o){o.d(t,{creditEntranceChatHeaderToolButtonPluginIdentifier:function(){return n}});let n=Symbol("credit-entrance-chat-header-tool-button-plugin")},974819:function(e,t,o){o.d(t,{HeaderPopupConfigs:function(){return n}});let n={LoginKeyFeatureNotification:{id:Symbol("LoginKeyFeatureNotification"),priority:4},UnloginKeyFeatureNotification:{id:Symbol("UnloginKeyFeatureNotification"),priority:3},UpdateNotification:{id:Symbol("UpdateNotification"),priority:2},NewUserGuide:{id:Symbol("NewUserGuide"),priority:1}}},475692:function(e,t,o){o.d(t,{useHeaderPopupStore:function(){return u}});var n=o(952259),r=o(321647);let i=e=>({popups:[],register:t=>e(e=>e.popups.some(e=>e.id===t.id)?e:{popups:[...e.popups,{...t,visible:!1,finished:!1,showed:!1}]}),finishExecution:t=>e(e=>{if(!t)return e;let o=e.popups.find(e=>e.id===t);return o?(o.finished=!0,{popups:[...e.popups.filter(e=>e.id!==t),o]}):e}),updateVisible:t=>{let{id:o,visible:n}=t;return e(e=>{if(!o)return e;let t=e.popups.find(e=>e.id===o);return t?(t.visible=n,n&&(t.showed=!0),{popups:[...e.popups.filter(e=>e.id!==o),t]}):e})}}),a=()=>(0,r.create)()((0,n.subscribeWithSelector)(i)),u=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];let{_useHeaderPopupStore:n}=u.prototype;n||function(){let{_useHeaderPopupStore:e}=u.prototype||{};if(!e){let e=a();Object.setPrototypeOf(u.prototype,e),Object.defineProperties(u,{...Object.getOwnPropertyDescriptors(e)}),u.prototype._useHeaderPopupStore=e}}();let{_useHeaderPopupStore:r}=u.prototype;if(r)return r(...t);throw Error("useHeaderPopupStore is not initialized")}},123602:function(e,t,o){o.d(t,{useHeaderPopupReady:function(){return l},useRegisterHeaderPopups:function(){return c}});var n=o(713738),r=o(762707),i=o(475692),a=o(974819);let u=(e,t)=>{i.useHeaderPopupStore.subscribe(e=>e.popups,o=>{let n=o.find(t=>t.id===e);if(!n||n.showed){t(!1);return}let i=o.filter(e=>e.priority<n.priority).map(e=>(0,r.default)(e,["finished","visible","showed"]));if(0===i.length){t(!0);return}if(i.some(e=>e.visible||e.showed)){t(!1);return}if(i.every(e=>e.finished)){t(!0);return}})},l=e=>{let[t,o]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{e&&u(e,o)},[e]),t},d=Object.keys(a.HeaderPopupConfigs),c=()=>{let{register:e}=(0,i.useHeaderPopupStore)();(0,n.useEffect)(()=>{d.forEach(t=>{let o=a.HeaderPopupConfigs[t];o&&e(o)})},[])}},443265:function(e,t,o){o.d(t,{addBookmarkChatHeaderToolButtonPlugin:function(){return n}});let n=Symbol("add-bookmark-chat-header-tool-button-plugin")},11554:function(e,t,o){o.d(t,{debugChatHeaderToolButtonPlugin:function(){return n}});let n=Symbol("debug-chat-header-tool-button")},773982:function(e,t,o){o.d(t,{downloadChatHeaderToolButtonPlugin:function(){return n}});let n=Symbol("download-chat-header-tool-button-plugin")},287751:function(e,t,o){o.d(t,{loggedDownloadChatHeaderToolButtonPlugin:function(){return n}});let n=Symbol("logged-download-chat-header-tool-button-plugin")},518710:function(e,t,o){o.d(t,{createConversationChatHeaderToolButtonPlugin:function(){return n}});let n=Symbol("create-conversation-chat-header-tool-button-plugin")},847319:function(e,t,o){o.d(t,{editConversationChatHeaderToolButtonPlugin:function(){return n}});let n=Symbol("edit-conversation-chat-header-tool-button-plugin")},204119:function(e,t,o){o.d(t,{newUserGuideChatHeaderToolButtonPlugin:function(){return n}});let n=Symbol("new-user-guide-chat-header-tool-button-plugin")},879315:function(e,t,o){o.d(t,{notificationChatHeaderToolButtonPlugin:function(){return n}});let n=Symbol("notification-chat-header-tool-button")},971410:function(e,t,o){o.d(t,{avatarChatHeaderToolButtonPlugin:function(){return n}});let n=Symbol("avatar-chat-header-tool-button-plugin")},754212:function(e,t,o){var n;o.d(t,{NEW_DOC_MOCK_ARTIFACT_ID:function(){return u},NEW_DOC_MOCK_CONVERSATION_ID:function(){return a},NewDocSource:function(){return d},WRITE_DOC_HOMEPAGE_ROUTE:function(){return l},WRITING_GUIDANCE_PAGE_ROUTE:function(){return r},WRITING_NEW_DOC_PAGE_ROUTE:function(){return i}});let r="/chat/write",i="/chat/new-doc",a="new_doc_mock_conversation_id",u="new_doc_mock_artifact_id",l="/doc/",d=((n={}).AI_SPACE="ai_space_my_folder",n.WRITING_DETAIL="writing_detailpage",n.PC_NEW_TAB="pc_new_tab",n)}}]);
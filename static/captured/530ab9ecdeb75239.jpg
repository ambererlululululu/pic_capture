"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["39861"],{713869:function(t,e,a){a.d(e,{getLineFunctionsWithOffset:function(){return l}});var r=a(709136),n={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4};function i(t,e){if(void 0===t||void 0===e)return{angle:0,deltaX:0,deltaY:0};t=s(t),e=s(e);let[a,r]=[t.x,t.y],[n,i]=[e.x,e.y],l=n-a,o=i-r;return{angle:Math.atan(o/l),deltaX:l,deltaY:o}}(0,r.__name)(i,"calculateDeltaAndAngle");var s=(0,r.__name)(t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,"pointTransformer"),l=(0,r.__name)(t=>({x:(0,r.__name)(function(e,a,r){let l=0,o=s(r[0]).x<s(r[r.length-1]).x?"left":"right";if(0===a&&Object.hasOwn(n,t.arrowTypeStart)){let{angle:e,deltaX:a}=i(r[0],r[1]);l=n[t.arrowTypeStart]*Math.cos(e)*(a>=0?1:-1)}else if(a===r.length-1&&Object.hasOwn(n,t.arrowTypeEnd)){let{angle:e,deltaX:a}=i(r[r.length-1],r[r.length-2]);l=n[t.arrowTypeEnd]*Math.cos(e)*(a>=0?1:-1)}let d=Math.abs(s(e).x-s(r[r.length-1]).x),p=Math.abs(s(e).y-s(r[r.length-1]).y),h=Math.abs(s(e).x-s(r[0]).x),c=Math.abs(s(e).y-s(r[0]).y),g=n[t.arrowTypeStart],f=n[t.arrowTypeEnd];if(d<f&&d>0&&p<f){let t=f+1-d;t*="right"===o?-1:1,l-=t}if(h<g&&h>0&&c<g){let t=g+1-h;t*="right"===o?-1:1,l+=t}return s(e).x+l},"x"),y:(0,r.__name)(function(e,a,r){let l=0,o=s(r[0]).y<s(r[r.length-1]).y?"down":"up";if(0===a&&Object.hasOwn(n,t.arrowTypeStart)){let{angle:e,deltaY:a}=i(r[0],r[1]);l=n[t.arrowTypeStart]*Math.abs(Math.sin(e))*(a>=0?1:-1)}else if(a===r.length-1&&Object.hasOwn(n,t.arrowTypeEnd)){let{angle:e,deltaY:a}=i(r[r.length-1],r[r.length-2]);l=n[t.arrowTypeEnd]*Math.abs(Math.sin(e))*(a>=0?1:-1)}let d=Math.abs(s(e).y-s(r[r.length-1]).y),p=Math.abs(s(e).x-s(r[r.length-1]).x),h=Math.abs(s(e).y-s(r[0]).y),c=Math.abs(s(e).x-s(r[0]).x),g=n[t.arrowTypeStart],f=n[t.arrowTypeEnd];if(d<f&&d>0&&p<f){let t=f+1-d;t*="up"===o?-1:1,l-=t}if(h<g&&h>0&&c<g){let t=g+1-h;t*="up"===o?-1:1,l+=t}return s(e).y+l},"y")}),"getLineFunctionsWithOffset")},564779:function(t,e,a){a.d(e,{clear:function(){return m},insertEdge:function(){return T},insertEdgeLabel:function(){return b},markers_default:function(){return X},positionEdgeLabel:function(){return k}});var r=a(258525),n=a(713869),i=a(563290),s=a(177942),l=a(339819),o=a(709136),d=a(636157),p=a(956037),h=(0,o.__name)((t,e,a,r,n)=>{e.arrowTypeStart&&g(t,"start",e.arrowTypeStart,a,r,n),e.arrowTypeEnd&&g(t,"end",e.arrowTypeEnd,a,r,n)},"addEdgeMarkers"),c={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},g=(0,o.__name)((t,e,a,r,n,i)=>{let s=c[a];if(!s){o.log.warn(`Unknown arrow type: ${a}`);return}t.attr(`marker-${e}`,`url(${r}#${n}_${i}-${s}${"start"===e?"Start":"End"})`)},"addEdgeMarker"),f=new Map,y=new Map,m=(0,o.__name)(()=>{f.clear(),y.clear()},"clear"),u=(0,o.__name)(t=>t?t.reduce((t,e)=>t+";"+e,""):"","getLabelStyles"),b=(0,o.__name)(async(t,e)=>{let a,n=(0,o.evaluate)((0,o.getConfig2)().flowchart.htmlLabels),i=await (0,s.createText)(t,e.label,{style:u(e.labelStyle),useHtmlLabels:n,addSvgBackground:!0,isNode:!1});o.log.info("abc82",e,e.labelType);let l=t.insert("g").attr("class","edgeLabel"),p=l.insert("g").attr("class","label");p.node().appendChild(i);let h=i.getBBox();if(n){let t=i.children[0],e=(0,d.select)(i);h=t.getBoundingClientRect(),e.attr("width",h.width),e.attr("height",h.height)}if(p.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),f.set(e.id,l),e.width=h.width,e.height=h.height,e.startLabelLeft){let n=await (0,r.createLabel_default)(e.startLabelLeft,u(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),s=i.insert("g").attr("class","inner");a=s.node().appendChild(n);let l=n.getBBox();s.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),y.get(e.id)||y.set(e.id,{}),y.get(e.id).startLeft=i,x(a,e.startLabelLeft)}if(e.startLabelRight){let n=await (0,r.createLabel_default)(e.startLabelRight,u(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),s=i.insert("g").attr("class","inner");a=i.node().appendChild(n),s.node().appendChild(n);let l=n.getBBox();s.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),y.get(e.id)||y.set(e.id,{}),y.get(e.id).startRight=i,x(a,e.startLabelRight)}if(e.endLabelLeft){let n=await (0,r.createLabel_default)(e.endLabelLeft,u(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),s=i.insert("g").attr("class","inner");a=s.node().appendChild(n);let l=n.getBBox();s.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),i.node().appendChild(n),y.get(e.id)||y.set(e.id,{}),y.get(e.id).endLeft=i,x(a,e.endLabelLeft)}if(e.endLabelRight){let n=await (0,r.createLabel_default)(e.endLabelRight,u(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),s=i.insert("g").attr("class","inner");a=s.node().appendChild(n);let l=n.getBBox();s.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),i.node().appendChild(n),y.get(e.id)||y.set(e.id,{}),y.get(e.id).endRight=i,x(a,e.endLabelRight)}return i},"insertEdgeLabel");function x(t,e){(0,o.getConfig2)().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}(0,o.__name)(x,"setTerminalWidth");var k=(0,o.__name)((t,e)=>{o.log.debug("Moving label abc88 ",t.id,t.label,f.get(t.id),e);let a=e.updatedPath?e.updatedPath:e.originalPath,r=(0,o.getConfig2)(),{subGraphTitleTotalMargin:n}=(0,i.getSubGraphTitleMargins)(r);if(t.label){let r=f.get(t.id),i=t.x,s=t.y;if(a){let r=l.utils_default.calcLabelPosition(a);o.log.debug("Moving label "+t.label+" from (",i,",",s,") to (",r.x,",",r.y,") abc88"),e.updatedPath&&(i=r.x,s=r.y)}r.attr("transform",`translate(${i}, ${s+n/2})`)}if(t.startLabelLeft){let e=y.get(t.id).startLeft,r=t.x,n=t.y;if(a){let e=l.utils_default.calcTerminalLabelPosition(10*!!t.arrowTypeStart,"start_left",a);r=e.x,n=e.y}e.attr("transform",`translate(${r}, ${n})`)}if(t.startLabelRight){let e=y.get(t.id).startRight,r=t.x,n=t.y;if(a){let e=l.utils_default.calcTerminalLabelPosition(10*!!t.arrowTypeStart,"start_right",a);r=e.x,n=e.y}e.attr("transform",`translate(${r}, ${n})`)}if(t.endLabelLeft){let e=y.get(t.id).endLeft,r=t.x,n=t.y;if(a){let e=l.utils_default.calcTerminalLabelPosition(10*!!t.arrowTypeEnd,"end_left",a);r=e.x,n=e.y}e.attr("transform",`translate(${r}, ${n})`)}if(t.endLabelRight){let e=y.get(t.id).endRight,r=t.x,n=t.y;if(a){let e=l.utils_default.calcTerminalLabelPosition(10*!!t.arrowTypeEnd,"end_right",a);r=e.x,n=e.y}e.attr("transform",`translate(${r}, ${n})`)}},"positionEdgeLabel"),_=(0,o.__name)((t,e)=>{let a=t.x,r=t.y,n=Math.abs(e.x-a),i=Math.abs(e.y-r),s=t.width/2,l=t.height/2;return n>=s||i>=l},"outsideNode"),w=(0,o.__name)((t,e,a)=>{o.log.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(a)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);let r=t.x,n=t.y,i=Math.abs(r-a.x),s=t.width/2,l=a.x<e.x?s-i:s+i,d=t.height/2,p=Math.abs(e.y-a.y),h=Math.abs(e.x-a.x);if(Math.abs(n-e.y)*s>Math.abs(r-e.x)*d){let t=a.y<e.y?e.y-d-n:n-d-e.y;l=h*t/p;let r={x:a.x<e.x?a.x+l:a.x-h+l,y:a.y<e.y?a.y+p-t:a.y-p+t};return 0===l&&(r.x=e.x,r.y=e.y),0===h&&(r.x=e.x),0===p&&(r.y=e.y),o.log.debug(`abc89 top/bottom calc, Q ${p}, q ${t}, R ${h}, r ${l}`,r),r}{let t=p*(l=a.x<e.x?e.x-s-r:r-s-e.x)/h,n=a.x<e.x?a.x+h-l:a.x-h+l,i=a.y<e.y?a.y+t:a.y-t;return o.log.debug(`sides calc abc89, Q ${p}, q ${t}, R ${h}, r ${l}`,{_x:n,_y:i}),0===l&&(n=e.x,i=e.y),0===h&&(n=e.x),0===p&&(i=e.y),{x:n,y:i}}},"intersection"),L=(0,o.__name)((t,e)=>{o.log.warn("abc88 cutPathAtIntersect",t,e);let a=[],r=t[0],n=!1;return t.forEach(t=>{if(o.log.info("abc88 checking point",t,e),_(e,t)||n)o.log.warn("abc88 outside",t,r),r=t,n||a.push(t);else{let i=w(e,r,t);o.log.debug("abc88 inside",t,r,i),o.log.debug("abc88 intersection",i,e);let s=!1;a.forEach(t=>{s=s||t.x===i.x&&t.y===i.y}),a.some(t=>t.x===i.x&&t.y===i.y)?o.log.warn("abc88 no intersect",i,a):a.push(i),n=!0}}),o.log.debug("returning points",a),a},"cutPathAtIntersect");function M(t){let e=[],a=[];for(let r=1;r<t.length-1;r++){let n=t[r-1],i=t[r],s=t[r+1];n.x===i.x&&i.y===s.y&&Math.abs(i.x-s.x)>5&&Math.abs(i.y-n.y)>5?(e.push(i),a.push(r)):n.y===i.y&&i.x===s.x&&Math.abs(i.x-n.x)>5&&Math.abs(i.y-s.y)>5&&(e.push(i),a.push(r))}return{cornerPoints:e,cornerPointPositions:a}}(0,o.__name)(M,"extractCornerPoints");var S=(0,o.__name)(function(t,e,a){let r=e.x-t.x,n=e.y-t.y,i=a/Math.sqrt(r*r+n*n);return{x:e.x-i*r,y:e.y-i*n}},"findAdjacentPoint"),E=(0,o.__name)(function(t){let{cornerPointPositions:e}=M(t),a=[];for(let r=0;r<t.length;r++)if(e.includes(r)){let e=t[r-1],n=t[r+1],i=t[r],s=S(e,i,5),l=S(n,i,5),d=l.x-s.x,p=l.y-s.y;a.push(s);let h=2*Math.sqrt(2),c={x:i.x,y:i.y};Math.abs(n.x-e.x)>10&&Math.abs(n.y-e.y)>=10?(o.log.debug("Corner point fixing",Math.abs(n.x-e.x),Math.abs(n.y-e.y)),c=i.x===s.x?{x:d<0?s.x-5+h:s.x+5-h,y:p<0?s.y-h:s.y+h}:{x:d<0?s.x-h:s.x+h,y:p<0?s.y-5+h:s.y+5-h}):o.log.debug("Corner point skipping fixing",Math.abs(n.x-e.x),Math.abs(n.y-e.y)),a.push(c,l)}else a.push(t[r]);return a},"fixCorners"),T=(0,o.__name)(function(t,e,a,r,i,s,l){let c,g;let{handDrawnSeed:f}=(0,o.getConfig2)(),y=e.points,m=!1;s.intersect&&i.intersect&&((y=y.slice(1,e.points.length-1)).unshift(i.intersect(y[0])),o.log.debug("Last point APA12",e.start,"--\x3e",e.end,y[y.length-1],s,s.intersect(y[y.length-1])),y.push(s.intersect(y[y.length-1]))),e.toCluster&&(o.log.info("to cluster abc88",a.get(e.toCluster)),y=L(e.points,a.get(e.toCluster).node),m=!0),e.fromCluster&&(o.log.debug("from cluster abc88",a.get(e.fromCluster),JSON.stringify(y,null,2)),y=L(y.reverse(),a.get(e.fromCluster).node).reverse(),m=!0);let u=y.filter(t=>!Number.isNaN(t.y));u=E(u);let b=d.curveBasis;e.curve&&(b=e.curve);let{x,y:k}=(0,n.getLineFunctionsWithOffset)(e),_=(0,d.line)().x(x).y(k).curve(b);switch(e.thickness){case"normal":default:c="edge-thickness-normal";break;case"thick":c="edge-thickness-thick";break;case"invisible":c="edge-thickness-invisible"}switch(e.pattern){case"solid":default:c+=" edge-pattern-solid";break;case"dotted":c+=" edge-pattern-dotted";break;case"dashed":c+=" edge-pattern-dashed"}let w=_(u),M=Array.isArray(e.style)?e.style:[e.style];if("handDrawn"===e.look){let a=p.default.svg(t);Object.assign([],u);let r=a.path(w,{roughness:.3,seed:f});c+=" transition";let n=(g=(0,d.select)(r).select("path").attr("id",e.id).attr("class"," "+c+(e.classes?" "+e.classes:"")).attr("style",M?M.reduce((t,e)=>t+";"+e,""):"")).attr("d");g.attr("d",n),t.node().appendChild(g.node())}else g=t.append("path").attr("d",w).attr("id",e.id).attr("class"," "+c+(e.classes?" "+e.classes:"")).attr("style",M?M.reduce((t,e)=>t+";"+e,""):"");let S="";((0,o.getConfig2)().flowchart.arrowMarkerAbsolute||(0,o.getConfig2)().state.arrowMarkerAbsolute)&&(S=(S=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(").replace(/\)/g,"\\)")),o.log.info("arrowTypeStart",e.arrowTypeStart),o.log.info("arrowTypeEnd",e.arrowTypeEnd),h(g,e,S,l,r);let T={};return m&&(T.updatedPath=y),T.originalPath=e.points,T},"insertEdge"),$=(0,o.__name)((t,e,a,r)=>{e.forEach(e=>{H[e](t,a,r)})},"insertMarkers"),C=(0,o.__name)((t,e,a)=>{o.log.trace("Making markers for ",a),t.append("defs").append("marker").attr("id",a+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",a+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),v=(0,o.__name)((t,e,a)=>{t.append("defs").append("marker").attr("id",a+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",a+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),O=(0,o.__name)((t,e,a)=>{t.append("defs").append("marker").attr("id",a+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",a+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),P=(0,o.__name)((t,e,a)=>{t.append("defs").append("marker").attr("id",a+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",a+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),B=(0,o.__name)((t,e,a)=>{t.append("defs").append("marker").attr("id",a+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",a+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),W=(0,o.__name)((t,e,a)=>{t.append("marker").attr("id",a+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",a+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),A=(0,o.__name)((t,e,a)=>{t.append("marker").attr("id",a+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",a+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),H={extension:C,composition:v,aggregation:O,dependency:P,lollipop:B,point:W,circle:A,cross:(0,o.__name)((t,e,a)=>{t.append("marker").attr("id",a+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",a+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),barb:(0,o.__name)((t,e,a)=>{t.append("defs").append("marker").attr("id",a+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb")},X=$}}]);
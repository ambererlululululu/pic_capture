"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["86703"],{332333:function(e,t,r){r.d(t,{parseMarkdownAndProcess:function(){return td},useProcessMarkdown:function(){return tv}});var i,n=r(713738),l=r(605173),o=r(385093),u=r(266655),a=r(678669),s=r(807265),f=r(28714),c=r(881807),p=r(997223);function d(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class v extends p.BaseAstPlugin{constructor(...e){super(...e),d(this,"name","autofix_truncated_escape"),d(this,"config",{isReverse:!0,fixEndingOnly:!0}),d(this,"modifier",(e,t)=>{var r,i;let{insertAfter:n,stop:l}=t;if((0,c.isParent)(e)||"text"!==e.type)return;l();let o=e.value.match(RegExp("^(?<text>[\\s\\S]*)\\\\$"));o&&n([{type:"text",value:null!==(i=null===(r=o.groups)||void 0===r?void 0:r.text)&&void 0!==i?i:""}],!0)})}}function m(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class g extends p.BaseAstPlugin{constructor(...e){super(...e),m(this,"name","remove_last_empty_code_block"),m(this,"config",{order:"in_order",isReverse:!0,fixEndingOnly:!0}),m(this,"modifier",(e,t)=>{let{insertAfter:r,stop:i}=t;if(!(0,c.isLiteralOfContent)(e)||(i(),"code"!==e.type))return;let{value:n,lang:l,meta:o}=e;n||l||o||r([],!0)})}}var h=r(218679);function y(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class b extends p.BaseAstPlugin{constructor(...e){super(...e),y(this,"name","autofix_last_code_block"),y(this,"config",{order:"in_order",isReverse:!0,fixEndingOnly:!0}),y(this,"modifier",(e,t)=>{var r,i;let{insertAfter:n,stop:l}=t;if((0,c.isLiteralOfContent)(e)){if(l(),"code"===e.type){let{content:t}=(null===(r=e.value.match(RegExp("^(?<content>[\\S\\s]*?)\\n`+$")))||void 0===r?void 0:r.groups)||{};if(!(0,h.default)(t))return;n([{...e,value:t}],!0)}else if("text"===e.type){let{prefix:t}=(null===(i=e.value.match(RegExp("^(?<prefix>[\\s\\S]*?)`{1,2}$")))||void 0===i?void 0:i.groups)||{};if(!(0,h.default)(t))return;n(t?[{type:"text",value:t}]:[],!0)}}})}}var x=r(754358),P=r(453446);function _(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let w=(e,t)=>{let r=(0,x.default)(e.children,e=>!!("text"===e.type&&e.value.match(t)));if(!r)return;(0,P.assert)("text"===r.type,"lastUnPaired.type must be text");let i=e.children.findIndex(e=>e===r);return(0,P.assert)(i>=0,"lastUnPairedIndex must >= 0"),{target:r,index:i}},E=RegExp("^(?<prefix>.*([^\\\\`]|^))`(?!`)(?<suffix>.*?)$");class S extends p.BaseAstPlugin{constructor(...e){super(...e),_(this,"name","autofix_last_inline_code_block"),_(this,"config",{order:"in_order",isReverse:!0,fixEndingOnly:!0}),_(this,"modifier",(e,t)=>{var r;let{stop:i}=t;if(!(0,c.isParent)(e))return;i();let n=w(e,E);if(!n)return;let{target:l,index:o}=n;if(e.children.slice(o+1).find(e=>"inlineCode"===e.type))return;let{prefix:u,suffix:a}=(null===(r=l.value.match(E))||void 0===r?void 0:r.groups)||{};if(!(0,h.default)(a)||!(0,h.default)(u))return;let s=[];u&&s.push({type:"text",value:u});let f=`${a}${(0,c.stringifyChildren)(e.children.slice(o+1),!0)}`;f&&s.push({type:"inlineCode",value:f}),e.children.splice(o,e.children.length-o,...s)})}}function $(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let O=e=>e.replace(/\[(.*?)\]\(coco:\/\/.*?\)/g,"$1");class j extends p.BaseAstPlugin{constructor(...e){super(...e),$(this,"name","remove_coco_link_in_codeblock"),$(this,"config",{fixEndingOnly:!0}),$(this,"modifier",(e,t)=>{let{insertAfter:r}=t;if((0,c.isLiteralOfContent)(e)&&("code"===e.type||"inlineCode"===e.type)){let t=O(e.value);r([{...e,value:t}],!0)}})}}var T=r(224213);function A(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class k extends p.BaseAstPlugin{constructor(...e){super(...e),A(this,"name","autofix_truncated_image"),A(this,"config",{isReverse:!0,fixEndingOnly:!0}),A(this,"modifier",(e,t)=>{var r;let{insertAfter:i,stop:n,removeTruncatedImage:l=!1}=t,o=[/!$/,/!\[$/,RegExp("!\\[(?<text>[^\\]]*)$"),RegExp("!\\[(?<text>[^\\]]*)\\]$"),RegExp("!\\[(?<text>[^\\]]*)\\]\\([^\\)]*$")],u=l?o:o.slice(0,1),a=l?[]:o.slice(1);if(!(0,c.isLiteralOfContent)(e)||(n(),"text"!==e.type))return;let s=a.find(t=>t.exec(e.value)),f=u.find(t=>t.exec(e.value));if(!f&&!s)return;let p=null!=f?f:s;if(!p)return;let d=p.exec(e.value);d&&i((0,T.default)({type:"text",value:e.value.slice(0,d.index)},s?{type:"image",url:"",alt:(null===(r=d.groups)||void 0===r?void 0:r.text)||"image"}:[]),!0)})}}var C=r(261093);function R(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class N extends p.BaseAstPlugin{constructor(...e){super(...e),R(this,"name","autofix_truncated_link"),R(this,"config",{isReverse:!0,fixEndingOnly:!0}),R(this,"modifier",(e,t)=>{var r;let{insertAfter:i,stop:n}=t,l=[RegExp("\\[(?<text>\\[[^\\]\\n]*)$"),RegExp("\\[(?<text>\\[[^\\]\\n]+\\])$"),RegExp("\\[(?<text>\\[[^\\]\\n]+\\])\\]$"),RegExp("\\[(?<text>\\[[^\\]\\n]+\\])\\]\\([^\\)\\n]*$"),RegExp("\\[(?<text>[^\\]\\n]*)$"),RegExp("\\[(?<text>[^\\]\\n]+)\\]$"),RegExp("\\[(?<text>[^\\]\\n]+)\\]\\([^\\)\\n]*$")];if((0,c.isTypeOfContent)(e,"link")){n();return}if((0,c.isParent)(e)||"text"!==e.type&&"html"!==e.type)return;n();let o=(0,C.findAndGet)(l,t=>{var r;return null!==(r=t.exec(e.value))&&void 0!==r&&r});if(!o)return;let[u,a]=o;if(!a)return;let s=null===(r=a.groups)||void 0===r?void 0:r.text,f=a.index;(null==s||!s.startsWith("^"))&&i(s?[{type:e.type,value:e.value.slice(0,f)},{type:"link",title:null,url:"#",children:[{type:"text",value:s}]}]:[{type:e.type,value:e.value.slice(0,f)}],!0)})}}function B(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class M extends p.BaseAstPlugin{constructor(...e){super(...e),B(this,"name","autofix_heading"),B(this,"config",{order:"pre_order",isReverse:!0,fixEndingOnly:!0}),B(this,"modifier",(e,t)=>{let{insertAfter:r,stop:i}=t;if(!(0,c.isParent)(e)){i();return}(0,c.isHeading)(e)&&(1!==e.depth||(0,c.stringifyChildren)(e.children).trim()||r([],!0),i())})}}var I=r(723112);function L(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let z=[/<([a-zA-Z\-]+((\s+([a-zA-Z\-]+=(("[^"]*")|('[^']*'))))*(\s*\/?|(\s+[a-zA-Z\-]+(=(("[^"]*)|('[^']*))?)?)))?)?$/,/<\/([a-zA-Z\-]+)?$/],Z=[/<data-(inline|block)(\s.*)?$/],H=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{looseTruncateDataSlot:r=!1}=t,i=(0,I.firstMatch)((0,T.default)(z,r?Z:[]),t=>t.exec(e));return i?e.slice(0,i.index):e};class D extends p.BaseAstPlugin{constructor(...e){super(...e),L(this,"name","autofix_truncated_html_tag"),L(this,"config",{isReverse:!0}),L(this,"modifier",(e,t)=>{let{insertAfter:r,stop:i,looseTruncateDataSlot:n=!1}=t;if(!(0,c.isTypeOfContent)(e,"text","html"))return;i();let l=H(e.value,{looseTruncateDataSlot:n});r(l?[{type:e.type,value:l}]:[],!0)})}}var F=r(217957);function U(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class q extends p.BaseAstPlugin{constructor(...e){super(...e),U(this,"name","autofix_truncated_strong"),U(this,"config",{order:"in_order",isReverse:!0,fixEndingOnly:!0}),U(this,"modifier",[(e,t)=>{var r;let{insertAfter:i,stop:n,parent:l}=t;if(!(0,c.isTypeOfContent)(e,"text")||!l||!(0,c.isTypeOfContent)(l,"paragraph")){n();return}let o=null===(r=e.value.match(RegExp("^(?<prefix>[\\s\\S]*?)(_{2}|\\*{2})(?<suffix>[\\s\\S]*?)\\*?$")))||void 0===r?void 0:r.groups;if(!o)return;let{prefix:u,suffix:a}=o,s=[];u&&s.push({type:"text",value:u}),a&&s.push({type:"strong",children:[{type:"text",value:a}]}),i(s,!0)},(e,t)=>{var r;let{stop:i,parent:n,index:l}=t;if(!(0,c.isParentOfContent)(e))return;if(!(0,c.isTypeOfContent)(e,"emphasis")||!n||(0,F.default)(l)){i();return}let o=n.children[l-1];if(!o||!(0,c.isTypeOfContent)(o,"text")){i();return}let u=RegExp("(?<prefix>(.*[^\\*])|^)\\*$").exec(o.value);if(!u){i();return}let{prefix:a}=null!==(r=u.groups)&&void 0!==r?r:{},s=[];a&&s.push({type:"text",value:a}),s.push({type:"strong",children:e.children}),n.children.splice(l-1,2,...s)},(e,t)=>{let{stop:r,insertAfter:i}=t;if((0,c.isParentOfContent)(e)&&"listItem"!==e.type){if("list"!==e.type){r();return}if(!e.children.length||1===e.children.length&&!e.children[0].children.length){i([],!0),r();return}}}])}}function Y(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let G=e=>{if(e.includes("*"))for(let t=e.length-1;t>=0;t--){let r=e[t],i=e[t-1],n=e[t+1];if("*"===r&&"*"!==i&&"*"!==n)return[e.slice(0,t),e.slice(t+1)]}};class K extends p.BaseAstPlugin{constructor(...e){super(...e),Y(this,"name","autofix_truncated_emphasis"),Y(this,"config",{order:"in_order",isReverse:!0,fixEndingOnly:!0}),Y(this,"modifier",(e,t)=>{let{insertAfter:r,stop:i,parent:n}=t;if(!(0,c.isLiteralOfContent)(e)||!n||!(0,c.isTypeOfContent)(n,"paragraph")){i();return}if("text"===e.type){let t=G(e.value);if(!t)return;let[i,n]=t,l=[];i&&l.push({type:"text",value:i}),n&&l.push({type:"emphasis",children:[{type:"text",value:n}]}),r(l,!0)}})}}function J(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class W extends p.BaseAstPlugin{constructor(...e){super(...e),J(this,"name","autofix_truncated_list"),J(this,"config",{isReverse:!0,fixEndingOnly:!0}),J(this,"modifier",[(e,t)=>{let{insertAfter:r,stop:i,index:n,parent:l}=t;if((0,c.isParent)(e)){(0,c.isTypeOfContent)(e,"paragraph")||(0,c.isRoot)(e)||i();return}if(!(0,c.isTypeOfContent)(e,"text")||(0,F.default)(n)||0!==n||!l||l.children.length>1){i();return}let o=RegExp("^(?<prefix>.*)\\n\\s*(?<value>([0-9]+?\\.?)|(\\-\\s*))$").exec(e.value);if(o){var u;let{prefix:e}=null!==(u=o.groups)&&void 0!==u?u:{};r([{type:"text",value:e}],!0)}else/^\s*[0-9]+$/.exec(e.value)&&r([],!0);i()},(e,t)=>{let{insertAfter:r,stop:i,index:n,parent:l,parents:o}=t;if((0,c.isParent)(e)){(0,c.isTypeOfContent)(e,"list","listItem","paragraph")||(0,c.isRoot)(e)||i();return}if(!(0,c.isTypeOfContent)(e,"text")||!l||!(0,c.isTypeOfContent)(o[0],"paragraph")||!(0,c.isTypeOfContent)(o[1],"listItem")||!(0,c.isTypeOfContent)(o[2],"list")||n!==l.children.length-1){i();return}let u=RegExp("^(?<prefix>.*)\\n\\s*(?<value>[0-9]+?)$").exec(e.value);if(u){var a;let{prefix:e}=null!==(a=u.groups)&&void 0!==a?a:{};r([{type:"text",value:e}],!0)}i()}])}}var Q=r(329738);function V(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class X extends p.BaseAstPlugin{constructor(...e){super(...e),V(this,"name","disable_illegal_html"),V(this,"config",{order:"pre_order",isReverse:!0}),V(this,"modifier",(e,t)=>{let{insertAfter:r,enabledHtmlTags:i}=t;(0,c.isLiteralOfContent)(e)&&"html"===e.type&&r([{type:"html",value:(0,Q.autoDisableHtmlTag)(e.value,i)}],!0)})}}function ee(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class et extends p.BaseAstPlugin{constructor(...e){super(...e),ee(this,"name","remove_break_before_html"),ee(this,"modifier",(e,t)=>{let{parent:r,index:i}=t;if(!(0,c.isLiteralOfContent)(e)||"html"!==e.type||!r||(0,F.default)(i))return;let n=(0,C.getByIndex)(null==r?void 0:r.children,i-1);n&&"break"===n.type&&r.children.splice(i-1,1)})}}function er(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ei extends p.BaseAstPlugin{constructor(...e){super(...e),er(this,"name","transform_endline_before_html"),er(this,"config",{order:"pre_order"}),er(this,"modifier",(e,t)=>{let{index:r,parent:i}=t;if(!(0,c.isLiteralOfContent)(e)||"html"!==e.type||!i||!r)return;let n=i.children[r-1];if("text"!==n.type)return;let l=/(\r?\n|\r)$/;l.test(n.value)&&i.children.splice(r-1,1,{type:"text",value:n.value.replace(l,"")},{type:"html",value:"<br />"})})}}var en=r(820378);function el(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let eo=e=>{let{children:t}=e,r=[],i="";for(let e=0;e<t.length;e++){let n=t[e];"text"===n.type&&(i+=n.value),("text"!==n.type||e===t.length-1)&&(i&&r.push({type:"text",value:i}),i=""),"text"!==n.type&&r.push(n)}e.children=r};class eu extends p.BaseAstPlugin{constructor(...e){super(...e),el(this,"name","extract_custom_autolink"),el(this,"config",{priority:en.AstPluginPriority.AfterAll}),el(this,"modifier",(e,t)=>{let{skip:r,recursiveModifier:i}=t;if((0,c.isParentOfContent)(e))for(let t of(eo(e),r(),e.children))(0,c.isParent)(t)&&i(t)})}}var ea=r(420177);function es(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let ef=e=>{let t=[];for(let[r,i]of e.entries()){if(!(0,c.isTypeOfContent)(i,"html"))continue;let e=(0,Q.getTagNameOfHtml)(i.value);if((0,F.default)(e))continue;if(!(0,Q.isEndTagOfHtml)(i.value)){t.push(e);continue}let n=(0,ea.default)(t);if((0,F.default)(n))return r;if(n===e){t.pop();continue}break}return null};class ec extends p.BaseAstPlugin{constructor(...e){super(...e),es(this,"name","add_unpaired_html_tag"),es(this,"config",{order:"pre_order",isReverse:!0,priority:en.AstPluginPriority.After}),es(this,"modifier",(e,t)=>{let{index:r,parent:i,skip:n,insertAfter:l}=t;if(!(0,c.isTypeOfContent)(e,"paragraph")||!i||(n(),r===i.children.length-1))return;let o=e.children.slice(),u=!1;for(let e=o.length-1;e>=0;e--){let t=o[e];if(!(0,c.isTypeOfContent)(t,"html")||(0,Q.isEndTagOfHtml)(t.value))continue;let r=(0,Q.getTagNameOfHtml)(t.value);if(!r)continue;let i=ef(o.slice(e+1));if(null!==i){let t=o[i+e+1];(0,P.assert)((0,c.isTypeOfContent)(t,"html"));let n=(0,Q.getTagNameOfHtml)(t.value);if((0,Q.isEndTagOfHtml)(t.value)&&n===r)continue}let n=null===i?o.length:i+e+1;o.splice(n,0,{type:"html",value:`</${r}>`}),u=!0}u&&l([{type:"paragraph",children:o}],!0)})}}var ep=r(621949);function ed(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let ev=e=>{var t;let r=e.match(RegExp("(?<prefix>[^\\$\\\\]|^)(\\$|\\$\\$)(?!\\$)"));if(!r)return -1;let{index:i=0}=r,n=null==r?void 0:null===(t=r.groups)||void 0===t?void 0:t.prefix;return(0,h.default)(n)?i+n.length:-1},em=e=>{let t=e.match(/^\$*/);return t?t[0].length:0},eg=e=>{let t=ev(e),r=0,i=!0;for(;-1!==t;){let n=(0,ep.texMathExtract)(e.slice(t));if(n){let{endIndex:e}=n;t+=e,i=!1,r=t}else{let r=ev(e.slice(t));if(-1===r)break;i?t+=Math.max(r,em(e.slice(t))):t+=r,i=!0}}return r},eh=/^[0-9a-zA-Z\s"'\.,\-\(\)]$/,ey=/^[0-9a-zA-Z\s"'\.,\-\(\)]{15}/,eb=/^\s*(\\begin)/,ex=(e,t)=>{let r=e.trim(),i=r.slice(0,t),n=r.length;return!eb.exec(r)&&(!i||(0,I.isNumeric)(i)?n-t>10:!!(eh.exec(i)&&n-t>10||ey.exec(i)))};class eP extends p.BaseAstPlugin{constructor(...e){super(...e),ed(this,"name","autofix_truncated_tex_math_dollar"),ed(this,"config",{order:"in_order",isReverse:!0,fixEndingOnly:!0}),ed(this,"modifier",(e,t)=>{let{insertAfter:r,stop:i,katex:n}=t;if(!(!n||(0,c.isParent)(e))){if((0,c.isLiteralOfContent)(e)&&i(),"text"===e.type){let t=eg(e.value),i=e.value.slice(t).match(RegExp("^(?<prefix>[\\s\\S]*?([^\\$\\\\]|^))(?<inter>\\$|\\$\\$)(?!\\$)(?<value>[^\\$]*?)(?<suffix>\\$*)$")),l=null==i?void 0:i.groups;if(!l)return;let{prefix:o,value:u}=l,a=(0,ep.findMaxLegalPrefixEndIndex)({src:u,katex:n});if(ex(u,a))return;let s=u.slice(0,a).trim(),f=`${e.value.slice(0,t)}${o}`;r((0,T.default)(f?{type:"text",value:f}:[],s?{type:"inlineMath",value:s}:[]),!0)}else if("inlineMath"===e.type||"math"===e.type){var l;let t="math"===e.type&&null!==(l=e.meta)&&void 0!==l?l:e.value,i=(0,ep.findMaxLegalPrefixEndIndex)({src:t,katex:n});if(ex(t,i)){r(["inlineMath"===e.type?{type:"text",value:`$${t}$`}:{type:"paragraph",children:[{type:"text",value:`$$${t}$$`}]}],!0);return}let o=t.slice(0,i).trim(),u="inlineMath"===e.type?{type:"inlineMath",value:o}:{type:"paragraph",children:[{type:"inlineMath",value:o}]};r(o?[u]:[],!0)}}})}}var e_=r(200450);function ew(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class eE extends p.BaseAstPlugin{constructor(...e){super(...e),ew(this,"name","restore_math_pandoc_latex_in_content"),ew(this,"config",{order:"pre_order"}),ew(this,"modifier",(e,t)=>{let{insertAfter:r}=t;(0,c.isLiteralOfContent)(e)&&(0,c.isTypeOfContent)(e,"code","inlineCode","math","inlineMath")&&r([{...e,value:(0,e_.restoreMathPandocLatex)(e.value)}],!0)})}}var eS=r(637704);let e$="https?|s?ftp|ftps|nfs|ssh",eO="\\b([/#?][\\-A-Z0-9@:%_+.~#?&'/=;$,!\\*\\[\\]\\(\\){}^|<>]*[-A-Z0-9&@#/%=~\\(\\)_|]?)?",ej=RegExp(`((((${e$})://)?(${/localhost(:[0-9]{2,5})?/.source}))|(((${e$})://)(${/(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}(2[0-4][0-9]|25[0-5]|1[0-9]{2}|[1-9][0-9]|[0-9])(:[0-9]{2,5})?/.source})))${eO}`,"gi"),eT="([-A-Z0-9%_+~#@][\\-A-Z:0-9%_+~#@]{0,256}\\.){1,50}",eA="[a-z\\-]{2,15}",ek=RegExp(`(((${e$}):\\/\\/${eT}${eA})|(${eT}(com|cn|tk|de|net|org|uk|info|nl|ru|hk)))(:[0-9]{2,5})?${eO}`,"gi"),eC="[\\w.!#$%&'*+-/=?^_\\`{|}~]{1,2000}@[A-Za-z0-9_.-]+\\.",eR=RegExp(`^(?!data:)((mailto:${eC}${eA})|(${eC}(com|org|net|int|edu|gov|mil|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gh|gi|gl|gm|gn|gp|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|site|top|wtf|xxx|xyz|cloud|engineering|help|one)))\\b`,"gi"),eN=RegExp(`(${ej.source})|(${ek.source})|(${eR.source})`,"gi"),eB=((i={})[i.text=0]="text",i[i.link=1]="link",i),eM={"(":")","[":"]","{":"}","<":">"},eI=Object.keys(eM),eL=Object.values(eM),ez=[".",",","!","?","'",":",";","@","#"],eZ=e=>{let t=-1,r=[];for(let i=0;i<e.length;++i){let n=e[i];if(eI.includes(n))r.push({char:n,index:i});else if(eL.includes(n)){if(r.length){let{char:i,index:l}=r[r.length-1],o=e.slice(l,-1===t?void 0:t+1);if(n!==eM[i]||(0,s.matchInsertElementSlot)(o)){({index:t}=r[0]);break}r.pop()}else{t=i;break}}}for(r.length&&({index:t}=r[0]),-1===t&&(t=e.length);t>1&&ez.includes(e[t-1]);)t--;return e.slice(0,t)},eH=e=>{let t=[],r=0;for(eN.lastIndex=0;;){let i=eN.exec(e);if(!i)break;let{index:n,0:l}=i,o=e.slice(r,n);if(o&&t.push({type:eB.text,text:o}),l){let e=/^(@|#|\+|-|%)+/.exec(l);if(e)t.push({type:eB.text,text:e[0]}),r=i.index+e[0].length,eN.lastIndex=r;else{let e=eZ(l);if(e)eS.validate(e)?t.push({type:eB.text,text:e}):t.push({type:eB.link,url:e}),r=i.index+e.length,eN.lastIndex=r;else{let e=l.slice(0,1);t.push({type:eB.text,text:e}),r=i.index+e.length,eN.lastIndex=r}}}}return r!==e.length&&t.push({type:eB.text,text:e.slice(r)}),t},eD=e=>e.match(/https?:\/\//)?e:`https://${e}`;function eF(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class eU extends p.BaseAstPlugin{constructor(...e){super(...e),eF(this,"name","extract_custom_autolink"),eF(this,"config",{priority:en.AstPluginPriority.After}),eF(this,"modifier",(e,t)=>{let{insertAfter:r,skip:i}=t;if((0,c.isParent)(e)){(0,c.isParentOfContent)(e)&&"link"===e.type&&i();return}"text"===e.type&&r(eH(e.value).map(e=>e.type===eB.link?{type:"link",url:eD(e.url),title:"autolink",children:[{type:"text",value:e.url}]}:e.type===eB.text?{type:"text",value:e.text}:null).filter(e=>!!e),!0)})}}var eq=r(255091),eY=r.n(eq);function eG(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let eK=[String.raw`\{${s.INSERT_ELEMENT_SLOT_NAME}_[0-9]+_.*?\}`];class eJ extends p.BaseAstPlugin{constructor(...e){super(...e),eG(this,"name","auto_spacing_all_text"),eG(this,"config",{priority:en.AstPluginPriority.AfterAll,order:"pre_order",isReverse:!0}),eG(this,"modifier",(e,t)=>{let{insertAfter:r}=t;if(!(0,c.isTypeOfContent)(e,"text"))return;let{value:i}=e;r([{type:"text",value:(0,I.splitStringByPattern)(i,RegExp(`(${eK.map(e=>`(${e})`).join("|")})`,"g")).map(e=>eY().spacing(e)).join("")}],!0)})}}function eW(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class eQ extends p.BaseAstPlugin{constructor(...e){super(...e),eW(this,"name","set_emphasis_as_image_title"),eW(this,"config",{order:"pre_order",isReverse:!0}),eW(this,"modifier",(e,t)=>{let{parent:r,index:i}=t;if(!r||(0,F.default)(i)||!(0,c.isImage)(e))return;let n=(0,C.getByIndex)(r.children,i+1),l=(0,C.getByIndex)(r.children,i+2);if(!n||!l||!(0,c.isTypeOfContent)(n,"text")||"\n"!==n.value||!(0,c.isTypeOfContent)(l,"emphasis"))return;let{children:o}=l,{url:u}=e,a=(0,c.stringifyChildren)(o,!0);r.children.splice(i,3,{type:"image",url:u,alt:a})})}}function eV(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let eX=e=>{var t,r;let i=e.match(RegExp("^(?<prefix>[\\s]+)```"));return i&&null!==(r=null===(t=i.groups)||void 0===t?void 0:t.prefix.length)&&void 0!==r?r:null};class e0 extends p.BaseAstPlugin{constructor(...e){super(...e),eV(this,"name","set_code_block_indent"),eV(this,"modifier",(e,t)=>{var r;let{source:i,parent:n,insertAfter:l,skip:o}=t;if((0,c.isParent)(e)&&n){o();return}if(!(0,c.isLiteralOfContent)(e)||"code"!==e.type)return;let{start:u}=null!==(r=e.position)&&void 0!==r?r:{};if(!u)return;let{line:a}=u,s=(0,C.getByIndex)(i.split("\n"),a-1),{meta:f,lang:p}=e;if((0,F.default)(s))return;let d=eX(s);if(null===d)return;let v=`__indent=${d}`,m=f?`${v} ${f}`:v;l([{...e,meta:m,lang:null!=p?p:"plaintext"}],!0)})}}function e1(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class e2 extends p.BaseAstPlugin{constructor(...e){super(...e),e1(this,"name","insert_ellipsis"),e1(this,"config",{isReverse:!0,priority:en.AstPluginPriority.AfterAll}),e1(this,"modifier",(e,t)=>{let{insertAfter:r,stop:i}=t;(!(0,c.isParentOfContent)(e)||(0,c.isTypeOfContent)(e,"link"))&&(i(),(0,c.isTypeOfContent)(e,"text")&&r([{type:"text",value:`${e.value}...`}],!0),(0,c.isTypeOfContent)(e,"link","inlineCode")&&r([{type:"text",value:"..."}],!1))})}}function e9(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let e4={type:"html",value:'<span class="indicator" />'};class e7 extends p.BaseAstPlugin{constructor(...e){super(...e),e9(this,"name","insert_indicator"),e9(this,"config",{isReverse:!0,priority:en.AstPluginPriority.AfterAll}),e9(this,"modifier",(e,t)=>{let{insertAfter:r,stop:i}=t;if((0,c.isImage)(e)){i();return}if((0,c.isParentOfContent)(e)&&"listItem"===e.type&&!(0,c.stringifyChildren)(e.children,!0).trim()){i(),r([{...e,children:[e4]}],!0);return}if((0,c.isLiteralOfContent)(e)){if(i(),"code"===e.type)return;r([e4])}})}}function e3(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let e8=(e,t)=>{var r;let{insertAfter:i,stop:n}=t,l=[RegExp("(?<prefix>.*)\\[$"),RegExp("(?<prefix>.*)\\[\\^[^\\]\\n\\^]*$")];if((0,c.isTypeOfContent)(e,"link")){n();return}if((0,c.isParent)(e)||(n(),!(0,c.isTypeOfContent)(e,"text")))return;let o=(0,C.findAndGet)(l,t=>{var r;return null!==(r=e.value.match(t))&&void 0!==r&&r});if(!o)return;let[u,a]=o;if(!a)return;let s=null===(r=a.groups)||void 0===r?void 0:r.prefix;i(s?[{type:"text",value:s}]:[],!0)},e6=(e,t)=>{let{insertAfter:r,skip:i}=t,n=/\[\^[^\]\n\^]+?\]/g;if((0,c.isTypeOfContent)(e,"link")){i();return}(0,c.isTypeOfContent)(e,"text")&&n.test(e.value)&&r([{type:"text",value:e.value.replace(n,"")}],!0)};class e5 extends p.BaseAstPlugin{constructor(...e){super(...e),e3(this,"name","autofix_truncated_footnote"),e3(this,"config",{isReverse:!0,fixEndingOnly:!0,priority:en.AstPluginPriority.After}),e3(this,"modifier",[e8,e6])}}function te(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class tt extends f.BaseSourcePlugin{constructor(...e){super(...e),te(this,"name","remove_long_spaces"),te(this,"modifier",e=>{let{source:t}=e;return t.replace(/[ ]{500,}/g,e=>e.slice(0,500))})}}function tr(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ti extends f.BaseSourcePlugin{constructor(...e){super(...e),tr(this,"name","complete_unpaired_code_block"),tr(this,"modifier",e=>{let{source:t}=e,r=t.match(/(^|\n)[\s]*?```/g);return r&&r.length%2!=0?`${t.trimEnd()}
\`\`\``:t})}}function tn(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class tl extends f.BaseSourcePlugin{constructor(...e){super(...e),tn(this,"name","complete_truncated_link"),tn(this,"modifier",e=>{let{source:t}=e;return t.replace(RegExp("(^|[^!])\\[(?<text>[^\\]\\n]+)\\]\\([^\\)\\n]*$"),"$1[$2](#)")})}}function to(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class tu extends f.BaseSourcePlugin{constructor(...e){super(...e),to(this,"name","convert_full_math_pandoc_latex"),to(this,"modifier",e=>{let{source:t}=e;return t.replace(/\\\(([\s\S]*?)\\\)/g,(e,t)=>(0,e_.renderInlineMathSpanString)(t)).replace(/\\\[([\s\S]*?)\\\]/g,(e,t)=>(0,e_.renderBlockMathSpanString)(t))})}}function ta(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ts extends f.BaseSourcePlugin{constructor(...e){super(...e),ta(this,"name","convert_ending_math_pandoc_latex"),ta(this,"config",{fixEndingOnly:!0}),ta(this,"modifier",[e=>{var t;let{source:r,katex:i}=e;if(!i)return r;let n=r.match(RegExp("\\\\\\((?<ending>[\\s\\S]*?)$"));if(!(null==n?void 0:n.groups)||(0,F.default)(n.index))return r;let l=null!==(t=n.groups.ending)&&void 0!==t?t:"";if(l.match(/((\\\()|(\\\)))/))return r;let o=l.slice(0,(0,ep.findMaxLegalPrefixEndIndex)({src:l,katex:i})).trim(),u=r.slice(0,n.index);return o?`${u}${(0,e_.renderInlineMathSpanString)(o)}`:u},e=>{var t;let{source:r,katex:i}=e;if(!i)return r;let n=r.match(RegExp("\\\\\\[(?<ending>[\\s\\S]*?)$"));if(!(null==n?void 0:n.groups)||(0,F.default)(n.index))return r;let l=null!==(t=n.groups.ending)&&void 0!==t?t:"";if(l.match(/((\\\[)|(\\\]))/))return r;let o=l.slice(0,(0,ep.findMaxLegalPrefixEndIndex)({src:l,katex:i})).trim(),u=r.slice(0,n.index);return o?`${u}${(0,e_.renderBlockMathSpanString)(o)}`:u}])}}let tf=e=>{let{astPlugins:t,autoSpacing:r=!0,autolink:i=!0,imageEmphasisTitle:n=!1,indentFencedCode:u=!0,showIndicator:a=!1,showEllipsis:s=!1,enableFootnote:f=!1,dollarMath:c=!0,latexMath:p=!0}=e,d=[new v,new g,new b,new S,new j,new k,new N,new M,new D,new q,new K,new W,new X,new et,new ei,new eu,new ec];return c&&d.push(new eP),p&&d.push(new eE),i&&d.push(new eU),r&&d.push(new eJ),n&&d.push(new eQ),u&&d.push(new e0),s&&d.push(new e2),a&&d.push(new e7),f&&d.push(new e5),(0,l.default)(t)&&d.push(...t),(0,o.default)(t)&&(d=t(d)),d},tc=e=>{let{sourcePlugins:t,latexMath:r=!0}=e,i=[new tt,new ti,new tl];return r&&i.push(new tu,new ts),(0,l.default)(t)&&i.push(...t),(0,o.default)(t)&&(i=t(i)),i},tp=e=>{let{source:t,astPlugins:r,sourcePlugins:i,parseAst:n=!0,indentedCode:l=!1,enableFootnote:o,insertedElements:u,fixEnding:a,enabledHtmlTags:d,looseTruncateDataSlot:v,removeTruncatedImage:m,enableDollarTex:g,katex:h}=e;try{let e,y=t;return u&&(y=(0,s.addInsertElementSlotToString)(y,u)),i&&(y=(0,f.processSourceByPlugins)({source:y,plugins:i,fixEnding:a,katex:h})),n&&(e=(0,c.parseMarkdown)(y,{enableIndentedCode:l,enableFootnote:o,enableDollarTex:g})),r&&e&&(e=(0,p.processAstByPlugins)({ast:e,plugins:r,source:y,fixEnding:a,enabledHtmlTags:d,looseTruncateDataSlot:v,removeTruncatedImage:m,katex:h})),{ast:e,source:e?(0,c.stringifyMarkdown)(e,{enableFootnote:o,enableDollarTex:g}):y}}catch(e){return{source:t}}},td=e=>{let{source:t,processAst:r=!0,processSource:i=!0,showEllipsis:n,showIndicator:l,imageEmphasisTitle:o,indentFencedCode:u,indentedCode:a=!1,insertedElements:s,enableFootnote:f,autolink:c,autoSpacing:p,astPlugins:d,sourcePlugins:v,fixEnding:m=!1,enabledHtmlTags:g=!1,looseTruncateDataSlot:h=!1,removeTruncatedImage:y=!1,latexMath:b,dollarMath:x,katex:P}=e,_=tf({autolink:c,autoSpacing:p,imageEmphasisTitle:o,indentFencedCode:u,enableFootnote:f,showEllipsis:n,showIndicator:l,astPlugins:d,latexMath:b,dollarMath:x}),w=tc({sourcePlugins:v,latexMath:b});return tp({source:t,astPlugins:r?_:void 0,sourcePlugins:i?w:void 0,parseAst:r,indentedCode:a,insertedElements:s,fixEnding:m,enabledHtmlTags:g,looseTruncateDataSlot:h,removeTruncatedImage:y,enableFootnote:f,enableDollarTex:x,katex:P})},tv=e=>{let{insertedElements:t}=e,r=(0,u.default)((0,a.default)(e,["insertedElements","astPlugins","sourcePlugins"]));return(0,n.useMemo)(()=>td(e),[...r,null==t?void 0:t.length])}},881807:function(e,t,r){r.d(t,{isRoot:function(){return $},stringifyChildren:function(){return P},isTypeOfContent:function(){return O},parseMarkdown:function(){return b},isParentOfContent:function(){return _},isImage:function(){return S},getTextOfAst:function(){return T},isParent:function(){return w},isLiteralOfContent:function(){return E},stringifyMarkdown:function(){return x},isHeading:function(){return j}});var i=r(610613),n=r(89147),l=r(412636),o=r(350963),u=r(2999),a=r(488386),s=r(84561),f=r(587951),c=r(528740),p=r(626483),d=r(175246),v=r(803282),m=r(467851),g=r(217957);let h=()=>({disable:{null:["setextUnderline"]}}),y=()=>({disable:{null:["codeIndented"]}}),b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{enableIndentedCode:r=!1,enableFootnote:a=!1,enableDollarTex:m=!0}=t,g=[(0,n.gfmTable)(),h(),(0,o.gfmStrikethrough)({singleTilde:!1}),(0,i.gfmTaskListItem)()],b=[(0,c.gfmTableFromMarkdown)(),(0,p.gfmStrikethroughFromMarkdown)(),(0,f.gfmTaskListItemFromMarkdown)()];return r||g.push(y()),a&&(g.push((0,u.gfmFootnote)()),b.push((0,d.gfmFootnoteFromMarkdown)())),m&&(g.push((0,l.math)()),b.push((0,s.mathFromMarkdown)())),(0,v.fromMarkdown)(e,{extensions:g,mdastExtensions:b})},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{enableFootnote:r=!1,strip:i=!1,enableDollarTex:n=!0}=(0,m.default)(t)?{}:t,l=(0,m.default)(t)?t:i,o=[(0,c.gfmTableToMarkdown)(),(0,p.gfmStrikethroughToMarkdown)(),(0,f.gfmTaskListItemToMarkdown)()];r&&o.push((0,d.gfmFootnoteToMarkdown)()),n&&o.push((0,s.mathToMarkdown)());let u=(0,a.toMarkdown)(e,{extensions:o,resourceLink:!0,fences:!0});return l?u.trim():u},P=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.length)return"";let r=x({type:"root",children:e},!0);return t?r.replace(/\n/g,""):r},_=e=>!(0,g.default)(null==e?void 0:e.children),w=e=>!(0,g.default)(null==e?void 0:e.children),E=e=>!(0,g.default)(null==e?void 0:e.value),S=e=>(null==e?void 0:e.type)==="image",$=e=>(null==e?void 0:e.type)==="root",O=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return r.some(t=>(null==e?void 0:e.type)===t)},j=e=>_(e)&&"heading"===e.type,T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{filter:r}=t;return r&&!r(e)?"":_(e)?`${e.children.map(e=>T(e,t)).join("")}
`:E(e)?e.value:""}},261093:function(e,t,r){r.d(t,{findAndGet:function(){return o},getByIndex:function(){return l},parseJSONWithNull:function(){return n}});var i=r(217957);let n=e=>{try{return e?JSON.parse(e):null}catch(e){return null}},l=(e,t)=>{if(!(0,i.default)(t))return null==e?void 0:e[t]},o=(e,t)=>{for(let r of e){let e=t(r);if(!1!==e)return[r,e]}}},329738:function(e,t,r){r.d(t,{autoDisableHtmlTag:function(){return p},getTagNameOfHtml:function(){return f},isEndTagOfHtml:function(){return c},stringifyDomNode:function(){return d}});var i=r(784405),n=r.n(i),l=r(723890);let o=["span","u","br"],u=RegExp("<(?<tag>[a-zA-Z][a-zA-Z0-9\\-_]*)(\\s+([a-zA-Z\\-_][a-zA-Z0-9\\-_]*=((\"[^\"]*\")|('[^']*'))))*\\s*\\/?>"),a=RegExp("<\\/(?<tag>[a-zA-Z][a-zA-Z0-9\\-_]*)>"),s=e=>{for(let i of[u,a]){let n=i.exec(e);if(n){var t,r;return null===(r=n.groups)||void 0===r?void 0:null===(t=r.tag)||void 0===t?void 0:t.toLowerCase()}}},f=e=>{var t;let r=s(e);if(r||"undefined"==typeof DOMParser)return r;let i=new DOMParser().parseFromString(e,"text/html").body.firstElementChild;return null==i?void 0:null===(t=i.tagName)||void 0===t?void 0:t.toLowerCase()},c=e=>a.test(e),p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=f(e);if(!0===t)return e;let i=[...o,...t||[]];return r&&!i.includes(r)?n().encode(e,{strict:!1}):e},d=e=>(0,l.default)(e,{encodeEntities:!1,decodeEntities:!0})},807265:function(e,t,r){r.d(t,{INSERT_ELEMENT_SLOT_NAME:function(){return s},addInsertElementSlotToString:function(){return _},extractDataFromInsertElementSlot:function(){return g},matchInsertElementSlot:function(){return m},removeInsertElementSlotInString:function(){return w},startOfInsertElementSlot:function(){return v}});var i=r(617271),n=r(344417),l=r(218679),o=r(217957),u=r(453446),a=r(723112);let s="insert_element",f=e=>`{${e}}`,c=e=>{let{source:t,index:r,item:o}=e,{type:a="inline",range:c,mode:p="element",render:d}=o,v=(0,n.default)(c)?[c,c]:c,m={inline:"",newline:"\n",block:"\n\n"}[a],g=t.slice(...v);if("element"===p)return`${m}${f(`${s}_${r}_${i.Buffer.from(g).toString("base64")}`.replace(/_/g,"\\_"))}${m}`;(0,u.assert)("raw"===p);let h=d(g);return(0,l.default)(h)?`${m}${h}${m}`:null},p=`\\{${s.replace(/_/g,"\\\\_")}\\\\_(?<index>[0-9]+)\\\\_(?<b64_data>.*?)\\}`,d=`\\{${s}_(?<index>[0-9]+)_(?<b64_data>.*?)\\}`,v=e=>{var t;return null===(t=new RegExp(p).exec(e))||void 0===t?void 0:t.index},m=e=>{var t;let r=null!==(t=RegExp(`^${p}`).exec(e))&&void 0!==t?t:RegExp(`^${d}`).exec(e);return null==r?void 0:r[0]},g=e=>{let t=RegExp(`^${p}$`).exec(e),{index:r,b64_data:n}=(null==t?void 0:t.groups)||{};if(!(0,o.default)(r)&&!(0,o.default)(n))return{index:parseInt(r),b64Text:n,text:n&&i.Buffer.from(n,"base64").toString("utf8")}},h=(e,t)=>{let r=[];return t.forEach((t,i)=>{let{range:l}=t,[o,u]=(0,n.default)(l)?[l,l]:l;if(o>u||o>e.length)return;let a=c({source:e,index:i,item:t});a&&r.push({replaceRange:(0,n.default)(l)?[l,l]:l,insert:a,index:r.length})}),r},y=(e,t)=>{let[r,i]=e.replaceRange,[n,l]=t.replaceRange,o=t.insert.length-(l-n);if(r<n||r===n&&e.index<t.index)return e;let u=Math.min(Math.max(0,l-r),i-r);return{...e,replaceRange:[r+o+u,i+o]}},b=e=>{let t=[];for(let r=0;r<e.length;r+=1){let i=e[r];for(let e=0;e<t.length;e+=1)i=y(i,t[e]);t.push(i)}return t},x=(e,t)=>{let{replaceRange:[r,i],insert:n}=t;return`${e.slice(0,r)}${n}${e.slice(i)}`},P=(e,t)=>{let r=b(h(e,t));return(0,a.pipe)(...r.map(e=>t=>x(t,e)))(e)},_=(e,t)=>P(e,t),w=e=>e.replace(RegExp(p,"g"),e=>{let t=g(e);return t?t.text:""})},621949:function(e,t,r){r.d(t,{findMaxLegalPrefixEndIndex:function(){return f},texMathExtract:function(){return n}});var i=r(678141);let n=e=>{let t=0;if(36!==e.charCodeAt(t))return;let r="$";t+=1;let i=e.charCodeAt(t);if(36===i){if(r="$$",t+=1,36===e.charCodeAt(t))return}else if(32===i||9===i||10===i)return;let n=e.indexOf(r,t);if(-1===n||92===e.charCodeAt(n-1))return;let l=n+r.length;if(1===r.length){let t=e.charCodeAt(n-1);if(32===t||9===t||10===t)return;let r=e.charCodeAt(l);if(r>=48&&r<58)return}return{type:1===r.length?"inline":"block",mathText:e.slice(t,n),endIndex:l}},l={throwOnError:!0,strict:!0,output:"mathml",trust:!1},o=(e,t)=>{try{return e.renderToString((0,i.texPreProcessor)(t),l),!0}catch(t){if(t instanceof e.ParseError)return!1;throw t}},u=(e,t)=>{try{e.renderToString((0,i.texPreProcessor)(t),l)}catch(t){if(t instanceof e.ParseError)return t.position}},a=e=>![/\([^\)]*$/].some(t=>t.test(e)),s=e=>{let{tex:t,katex:r}=e;return o(r,t)&&a(t)},f=e=>{var t;let{src:r,katex:i}=e,n=null!==(t=u(i,r))&&void 0!==t?t:r.length;for(;n>=0&&!s({tex:r.slice(0,n),katex:i});)n-=1;return n}},678141:function(e,t,r){r.d(t,{texPreProcessor:function(){return o}});var i=r(723112);let n=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),l=(e,t)=>{if(t.filter(e=>1!==e.length).length)throw Error(`illegal chars length: ${t.join(", ")}`);return t.reduce((e,t)=>{let r=RegExp(String.raw`([^\\]|^)(${n(t)})`,"g");return e.replace(r,(e,t,r)=>`${t}\\${r}`)},e)},o=(0,i.pipe)(e=>l(e,["#"]))},200450:function(e,t,r){r.d(t,{BLOCK_MATH_SPAN_DATA_TYPE:function(){return u},INLINE_MATH_SPAN_DATA_TYPE:function(){return o},renderBlockMathSpanString:function(){return f},renderInlineMathSpanString:function(){return s},restoreMathPandocLatex:function(){return c}});var i=r(617271),n=r(678141),l=r(807265);let o="inline-math",u="block-math",a=(e,t)=>`<span data-type="${e}" data-value="${i.Buffer.from(t).toString("base64")}"></span>`,s=e=>a(o,(0,n.texPreProcessor)((0,l.removeInsertElementSlotInString)(e))),f=e=>a(u,(0,n.texPreProcessor)((0,l.removeInsertElementSlotInString)(e))),c=e=>e.replace(RegExp(`<span data-type="${o}" data-value="(.*?)"></span>`,"g"),(e,t)=>String.raw`\(${i.Buffer.from(t,"base64").toString("utf8")}\)`).replace(RegExp(`<span data-type="${u}" data-value="(.*?)"></span>`,"g"),(e,t)=>String.raw`\[${i.Buffer.from(t,"base64").toString("utf8")}\]`)},997223:function(e,t,r){r.d(t,{processAstByPlugins:function(){return g},BaseAstPlugin:function(){return v}});var i=r(436114),n=r(385093),l=r(748645),o=r(519428),u=r(95569),a=r(344417),s=r(881807),f=r(453446);let c=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{order:i="pre_order",isReverse:n=!1}=r,l=!1,o=!1,c=!1,p=[[[],e]],d=[];for(;p.length;){let e=p.pop();(0,f.assert)(e,"current must not be undefined");let[r,v]=e,m=(0,u.default)(r),g=(0,s.isParent)(v)?v.children.slice():[],h=n?g:g.reverse(),y=(0,s.isParent)(v)?h.map(e=>[[v,...r],e]):[],b=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!m)return;let r=m.children.findIndex(e=>e===v);(0,f.assert)((0,a.default)(r),"Invoke insertAfter error in updateAst: parent is not parent of current"),t?m.children.splice(r,1,...e):m.children.splice(r+1,0,...e)},x=()=>{if(c)throw Error("You have to call stop synchronously");l=!0},P=()=>{if(c)throw Error("You have to call skip synchronously");o=!0},_=()=>{let e=null==m?void 0:m.children.findIndex(e=>e===v);-1!==e&&t(v,{stop:x,skip:P,insertAfter:b,parent:m,parents:r,index:e})};if("pre_order"===i)_(),o||p.push(...y);else if("post_order"===i){let t=y.filter(e=>{let[,t]=e;return!d.includes(t)});t.length?(p.push(e),p.push(...t)):(_(),d.push(v))}else"in_order"===i&&((0,s.isParent)(v)&&y.length&&y.every(e=>{let[,t]=e;return!d.includes(t)})?(p.push(...y.slice(0,y.length-1)),p.push(e),p.push(y[y.length-1])):(_(),d.push(v)));if(l)break;l=!1,o=!1}c=!0};var p=r(820378);function d(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class v{constructor(){d(this,"name",void 0),d(this,"config",{}),d(this,"modifier",void 0),d(this,"before",i.default),d(this,"after",i.default),d(this,"beforeEach",i.default),d(this,"afterEach",i.default)}}let m=e=>{let{plugin:t,ast:r,skipWhenError:i=!0,...l}=e,o=(0,n.default)(t.modifier)?[t.modifier.bind(t)]:t.modifier.map(e=>e.bind(t));for(let e of(t.before(r),o)){t.beforeEach(r);try{c(r,(r,i)=>e(r,{...i,recursiveModifier(e){m({plugin:t,ast:e,...l})},...l}),t.config)}catch(e){if(!i)throw e}t.afterEach(r)}t.after(r)},g=e=>{let{ast:t,plugins:r,fixEnding:i=!1,skipWhenError:n,...u}=e,a=(0,l.default)(r,e=>{var t,r;return null!==(r=null===(t=e.config)||void 0===t?void 0:t.priority)&&void 0!==r?r:p.AstPluginPriority.Normal}).filter(e=>{var t;let{fixEndingOnly:r=!1}=null!==(t=e.config)&&void 0!==t?t:{};return!r||i}),s=(0,o.default)(t);for(let e of a)m({plugin:e,ast:s,skipWhenError:n,...u});return s}},820378:function(e,t,r){r.d(t,{AstPluginPriority:function(){return i}});var i={BeforeAll:-2,Before:-1,Normal:0,After:1,AfterAll:2}},28714:function(e,t,r){r.d(t,{processSourceByPlugins:function(){return s},BaseSourcePlugin:function(){return a}});var i=r(436114),n=r(748645),l=r(385093),o={Normal:0};function u(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(){u(this,"name",void 0),u(this,"config",{}),u(this,"modifier",void 0),u(this,"before",i.default),u(this,"after",i.default),u(this,"beforeEach",i.default),u(this,"afterEach",i.default)}}let s=e=>{let{source:t,plugins:r,fixEnding:i=!1,katex:u,skipWhenError:a=!0}=e;return(0,n.default)(r,e=>{var t,r;return null!==(r=null===(t=e.config)||void 0===t?void 0:t.priority)&&void 0!==r?r:o.Normal}).filter(e=>{var t;let{fixEndingOnly:r=!1}=null!==(t=e.config)&&void 0!==t?t:{};return!r||i}).reduce((e,t)=>{t.before(e);let r=((0,l.default)(t.modifier)?[t.modifier.bind(t)]:t.modifier.map(e=>e.bind(t))).reduce((e,r)=>{try{t.beforeEach(e);let i=r({source:e,katex:u});return t.afterEach(i),i}catch(t){if(!a)throw t;return e}},e);return t.after(r),r},t)}},453446:function(e,t,r){r.d(t,{assert:function(){return l}});var i=r(427184);class n extends Error{constructor(...e){var t,r,i;super(...e),r="assert_error",(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t="name","string"))?i:i+"")in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r}}let l=(e,t)=>{if(!e){if((0,i.default)(t))throw t;throw new n(t)}}},723112:function(e,t,r){r.d(t,{elementAt:function(){return u},firstMatch:function(){return l},isNumeric:function(){return n},pipe:function(){return i},splitStringByPattern:function(){return a},timeoutPromise:function(){return o}});let i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>t.reduce((e,t)=>t(e),e)},n=e=>{let t=e.replace(/,/g,"");return!isNaN(t)&&!isNaN(parseFloat(t))},l=(e,t)=>{for(let r of e){let e=t(r);if(e)return e}},o=e=>new Promise(t=>setTimeout(t,e)),u=(e,t)=>e[t],a=(e,t)=>{let r;let i=[],{flags:n}=t,l=new RegExp(t.source,n.includes("g")?n:`${n}g`),o=0;for(;r=l.exec(e);){let t=r[0];r.index>o&&i.push(e.slice(o,r.index)),i.push(t),o=r.index+t.length}return e.length>o&&i.push(e.slice(o,e.length)),i}}}]);
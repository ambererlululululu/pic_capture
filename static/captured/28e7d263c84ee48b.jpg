"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["5623"],{663418:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Breakpoints=t.BreakpointConstraint=void 0;var r,i,a=n(176879);function o(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||s(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.BreakpointConstraint=i,(r=i||(t.BreakpointConstraint=i={})).at="at",r.lessThan="lessThan",r.greaterThan="greaterThan",r.greaterThanOrEqual="greaterThanOrEqual",r.between="between";var p=function(){function e(t){var n,r=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),f(this,"_sortedBreakpoints",void 0),f(this,"_breakpoints",void 0),f(this,"_mediaQueries",void 0),f(this,"findBreakpointsForWidths",function(e,t){var n=r.findBreakpointAtWidth(e);if(n){var i=r.findBreakpointAtWidth(t);return i&&n!==i?r._sortedBreakpoints.slice(r._sortedBreakpoints.indexOf(n),r._sortedBreakpoints.indexOf(i)+1):[n]}}),f(this,"findBreakpointAtWidth",function(e){return r._sortedBreakpoints.find(function(t,n){var i=r._sortedBreakpoints[n+1];return i?e>=r._breakpoints[t]&&e<r._breakpoints[i]:e>=r._breakpoints[t]})}),f(this,"valuesWithBreakpointProps",function(e){var t,n=e.length,i=[];return r._sortedBreakpoints.forEach(function(r,a){var o=e[a];a<n&&(!t||t[0]!==o)?(t=[o,[r]],i.push(t)):t[1].push(r)}),i.map(function(e,t){var n=l(e,2),r=n[0],a=n[1],o={};return t===i.length-1?o.greaterThanOrEqual=a[0]:1===a.length?o.at=a[0]:o.between=[a[0],i[t+1][1][0]],[r,o]})}),this._breakpoints=t,this._sortedBreakpoints=Object.keys(t).map(function(e){return[e,t[e]]}).sort(function(e,t){return e[1]<t[1]?-1:1}).map(function(e){return e[0]});var a=this._sortedBreakpoints.slice(0,-1).reduce(function(e,t,n){return o(e).concat(o(r._sortedBreakpoints.slice(n+1).map(function(e){return[t,e]})))},[]);this._mediaQueries=(f(n={},i.at,this._createBreakpointQueries(i.at,this._sortedBreakpoints)),f(n,i.lessThan,this._createBreakpointQueries(i.lessThan,this._sortedBreakpoints.slice(1))),f(n,i.greaterThan,this._createBreakpointQueries(i.greaterThan,this._sortedBreakpoints.slice(0,-1))),f(n,i.greaterThanOrEqual,this._createBreakpointQueries(i.greaterThanOrEqual,this._sortedBreakpoints)),f(n,i.between,this._createBreakpointQueries(i.between,a)),n)}return d(e,null,[{key:"validKeys",value:function(){return[i.at,i.lessThan,i.greaterThan,i.greaterThanOrEqual,i.between]}}]),d(e,[{key:"toVisibleAtBreakpointSet",value:function(e){if((e=this._normalizeProps(e)).lessThan){var t=this.sortedBreakpoints.findIndex(function(t){return t===e.lessThan});return this.sortedBreakpoints.slice(0,t)}if(e.greaterThan){var n=this.sortedBreakpoints.findIndex(function(t){return t===e.greaterThan});return this.sortedBreakpoints.slice(n+1)}if(e.greaterThanOrEqual){var r=this.sortedBreakpoints.findIndex(function(t){return t===e.greaterThanOrEqual});return this.sortedBreakpoints.slice(r)}if(e.between){var i=e.between,a=this.sortedBreakpoints.findIndex(function(e){return e===i[0]}),o=this.sortedBreakpoints.findIndex(function(e){return e===i[1]});return this.sortedBreakpoints.slice(a,o)}return[]}},{key:"toRuleSets",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.validKeys();return Object.entries(n.reduce(function(e,n){return e[n]=t._mediaQueries[n],e},{})).reduce(function(e,t){var n=l(t,2),r=n[0];return n[1].forEach(function(t,n){e.push((0,a.createRuleSet)((0,a.createClassName)(r,n),"not all and ".concat(t)))}),e},[])}},{key:"shouldRenderMediaQuery",value:function(e,t){var n=this;if((e=this._normalizeProps(e)).lessThan){var r=this._breakpoints[e.lessThan];return Math.min.apply(Math,o(t.map(function(e){return n._breakpoints[e]})))<r}if(e.greaterThan){var i=this._breakpoints[this._findNextBreakpoint(e.greaterThan)];return Math.max.apply(Math,o(t.map(function(e){return n._breakpoints[e]})))>=i}if(e.greaterThanOrEqual){var a=this._breakpoints[e.greaterThanOrEqual];return Math.max.apply(Math,o(t.map(function(e){return n._breakpoints[e]})))>=a}if(e.between){var l=this._breakpoints[e.between[0]],s=this._breakpoints[e.between[1]],u=t.map(function(e){return n._breakpoints[e]});return!(Math.max.apply(Math,o(u))<l||Math.min.apply(Math,o(u))>=s)}return!1}},{key:"_normalizeProps",value:function(e){if(e.at){var t=this._sortedBreakpoints.indexOf(e.at),n=this._sortedBreakpoints[t+1];return n?{between:[e.at,n]}:{greaterThanOrEqual:e.at}}return e}},{key:"_createBreakpointQuery",value:function(e){if((e=this._normalizeProps(e)).lessThan){var t=this._breakpoints[e.lessThan];return"(max-width:".concat(t-.02,"px)")}if(e.greaterThan){var n=this._breakpoints[this._findNextBreakpoint(e.greaterThan)];return"(min-width:".concat(n,"px)")}if(e.greaterThanOrEqual){var r=this._breakpoints[e.greaterThanOrEqual];return"(min-width:".concat(r,"px)")}if(e.between){var i=this._breakpoints[e.between[0]],a=this._breakpoints[e.between[1]];return"(min-width:".concat(i,"px) and (max-width:").concat(a-.02,"px)")}throw Error("Unexpected breakpoint props: ".concat(JSON.stringify(e)))}},{key:"_createBreakpointQueries",value:function(e,t){var n=this;return t.reduce(function(t,r){return t.set(Array.isArray(r)?r.join("-"):r,n._createBreakpointQuery(f({},e,r))),t},new Map)}},{key:"_findNextBreakpoint",value:function(e){var t=this._sortedBreakpoints[this._sortedBreakpoints.indexOf(e)+1];if(!t)throw Error("There is no breakpoint larger than ".concat(e));return t}},{key:"sortedBreakpoints",get:function(){return this._sortedBreakpoints}},{key:"dynamicResponsiveMediaQueries",get:function(){return Array.from(this._mediaQueries[i.at].entries()).reduce(function(e,t){var n=l(t,2);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.forEach(function(t){f(e,t,n[t])})}return e}({},e,f({},n[0],n[1]))},{})}},{key:"largestBreakpoint",get:function(){return this._sortedBreakpoints[this._sortedBreakpoints.length-1]}}]),e}();t.Breakpoints=p},170118:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.createResponsiveComponents=function(){var e=a.default.createContext({});return e.displayName="Media.DynamicContext",{Consumer:e.Consumer,Provider:function(t){var n;function i(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,i),t=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return u(e)}(this,l(i).call(this,e)),c(u(u(t)),"isSupportedEnvironment",function(){return"undefined"!=typeof window&&void 0!==window.matchMedia}),c(u(u(t)),"setupMatchers",function(e){return Object.keys(e).reduce(function(t,n){return o({},t,c({},n,window.matchMedia(e[n])))},{})}),c(u(u(t)),"checkMatchers",function(e){return Object.keys(e).reduce(function(t,n){return o({},t,c({},n,e[n].matches))},{})}),c(u(u(t)),"mediaQueryStatusChangedCallback",function(){var e=t.checkMatchers(t.state.mediaQueryMatchers);t.setState({mediaQueryMatches:e})});var t,n,a=void 0;return t.isSupportedEnvironment()?(a=t.setupMatchers(e.mediaQueries),n=t.checkMatchers(a)):n=Object.keys(e.mediaQueries).reduce(function(t,n){return o({},t,c({},n,!!e.initialMatchingMediaQueries&&e.initialMatchingMediaQueries.includes(n)))},{}),t.state={mediaQueryMatchers:a,mediaQueryMatches:n},t}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,t),n=[{key:"componentDidMount",value:function(){if(this.state.mediaQueryMatchers){var e=this.mediaQueryStatusChangedCallback;Object.values(this.state.mediaQueryMatchers).forEach(function(t){t.addListener(e)})}}},{key:"componentWillUnmount",value:function(){if(this.state.mediaQueryMatchers){var e=this.mediaQueryStatusChangedCallback;Object.values(this.state.mediaQueryMatchers).forEach(function(t){return t.removeListener(e)})}}},{key:"shouldComponentUpdate",value:function(e,t){return!!this.state.mediaQueryMatchers&&(e.children!==this.props.children||!d(this.state.mediaQueryMatches,t.mediaQueryMatches))}},{key:"render",value:function(){return a.default.createElement(e.Provider,{value:this.state.mediaQueryMatches},this.props.children)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(i.prototype,n),i}(a.default.Component)}};var i,a=(i=n(429996))&&i.__esModule?i:{default:i};function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.forEach(function(t){c(e,t,n[t])})}return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e,t){for(var n in e)if(e[n]!==t[n])return!1;return!0}},233683:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Interactions=t.InteractionKey=void 0;var r,i=n(176879);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||o(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.InteractionKey=r,(r||(t.InteractionKey=r={})).interaction="interaction";var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),c(this,"_interactions",void 0),this._interactions=t}return u(e,null,[{key:"validKeys",value:function(){return[r.interaction]}}]),u(e,[{key:"toRuleSets",value:function(){return Object.entries(this._interactions).reduce(function(e,t){var n=a(t,2),s=n[0],u=n[1];return((function(e){if(Array.isArray(e))return l(e)})(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([(0,i.createRuleSet)((0,i.createClassName)(r.interaction,s),u)])},[])}},{key:"shouldRenderMediaQuery",value:function(e,t){return!!(t&&t.includes(e))}},{key:"interactions",get:function(){return Object.keys(this._interactions)}},{key:"dynamicResponsiveMediaQueries",get:function(){return Object.entries(this._interactions).reduce(function(e,t){var n=a(t,2);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.forEach(function(t){c(e,t,n[t])})}return e}({},e,c({},n[0],n[1]))},{})}}]),e}();t.Interactions=d},786015:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createMedia=function(e){var t,n=(0,l.castBreakpointsToIntegers)(e.breakpoints),r=new o.MediaQueries(n,e.interactions||{}),c=(0,a.createResponsiveComponents)(),d=i.default.createContext({});d.displayName="Media.Context";var f=i.default.createContext({hasParentMedia:!1,breakpointProps:{}});d.displayName="MediaParent.Context";var p=(0,l.memoize)(function(e){return{onlyMatch:e}}),m=c.Provider;return{Media:function(e){(function(e){var t=Object.keys(e).filter(function(e){return u.includes(e)});if(t.length<1)throw Error("1 of ".concat(u.join(", ")," is required."));if(t.length>1)throw Error("Only 1 of ".concat(t.join(", ")," is allowed at a time."))})(e),e.children;var t,n=e.className,a=e.style,o=e.interaction,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["children","className","style","interaction"]),c=i.default.useMemo(function(){return(0,l.memoize)(function(e){return{hasParentMedia:!0,breakpointProps:e}})},[]),p=i.default.useContext(f),m=c(s),v=i.default.useContext(d).onlyMatch,h=i.default.useId(),g="undefined"!=typeof window,b=(0,l.useIsFirstRender)();if(e.interaction)t=(0,l.createClassName)("interaction",e.interaction);else{e.at&&(r.breakpoints.largestBreakpoint,e.at);var x=(0,l.propKey)(s),y=s[x];t=(0,l.createClassName)(x,y)}var _=(!p.hasParentMedia||(0,l.intersection)(r.breakpoints.toVisibleAtBreakpointSet(p.breakpointProps),r.breakpoints.toVisibleAtBreakpointSet(s)).length>0)&&(void 0===v||r.shouldRenderMediaQuery(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.forEach(function(t){var r,i,a;r=e,i=t,a=n[t],i in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a})}return e}({},s,{interaction:o}),v)),S=" fresnel-".concat(h);return t+=S,g&&b&&!_&&Array.from(document.getElementsByClassName(S)).forEach(function(e){return e.innerHTML=""}),i.default.createElement(f.Provider,{value:m},e.children instanceof Function?e.children(t,_):i.default.createElement("div",{className:["fresnel-container",t,n].filter(Boolean).join(" "),style:a,suppressHydrationWarning:!0},_?e.children:null))},MediaContextProvider:function(e){var t=e.disableDynamicMediaQueries,n=e.onlyMatch,a=e.children;if(!t)return i.default.createElement(m,{mediaQueries:r.dynamicResponsiveMediaQueries,initialMatchingMediaQueries:(0,l.intersection)(r.mediaQueryTypes,n)},i.default.createElement(c.Consumer,null,function(e){var t=Object.keys(e).filter(function(t){return e[t]}),r=p((0,l.intersection)(t,n));return i.default.createElement(d.Provider,{value:r},a)}));var o=p(n);return i.default.createElement(d.Provider,{value:o},a)},createMediaStyle:r.toStyle,SortedBreakpoints:function(e){if(Array.isArray(e))return s(e)}(t=r.breakpoints.sortedBreakpoints)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return s(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),findBreakpointAtWidth:r.breakpoints.findBreakpointAtWidth,findBreakpointsForWidths:r.breakpoints.findBreakpointsForWidths,valuesWithBreakpointProps:r.breakpoints.valuesWithBreakpointProps}};var r,i=(r=n(429996))&&r.__esModule?r:{default:r},a=n(170118),o=n(403639),l=n(176879);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var u=o.MediaQueries.validKeys()},403639:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MediaQueries=void 0;var r=n(663418),i=n(233683),a=n(176879);function o(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){function e(t,n){var a=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),c(this,"_breakpoints",void 0),c(this,"_interactions",void 0),c(this,"toStyle",function(e){return[".fresnel-container{margin:0;padding:0;}"].concat(o(a._breakpoints.toRuleSets(e)),o(a._interactions.toRuleSets())).join("\n")}),this._breakpoints=new r.Breakpoints(t),this._interactions=new i.Interactions(n||{})}return u(e,null,[{key:"validKeys",value:function(){return o(r.Breakpoints.validKeys()).concat(o(i.Interactions.validKeys()))}}]),u(e,[{key:"shouldRenderMediaQuery",value:function(e,t){var n=e.interaction,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["interaction"]);if(n)return this._interactions.shouldRenderMediaQuery(n,t);var i=(0,a.intersection)(t,this._breakpoints.sortedBreakpoints);return this._breakpoints.shouldRenderMediaQuery(r,i)}},{key:"breakpoints",get:function(){return this._breakpoints}},{key:"mediaQueryTypes",get:function(){return o(this._breakpoints.sortedBreakpoints).concat(o(this._interactions.interactions))}},{key:"dynamicResponsiveMediaQueries",get:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.forEach(function(t){c(e,t,n[t])})}return e}({},this._breakpoints.dynamicResponsiveMediaQueries,this._interactions.dynamicResponsiveMediaQueries)}}]),e}();t.MediaQueries=d},176879:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.propKey=function(e){return Object.keys(e)[0]},t.intersection=function(e,t){return t?e.filter(function(e){return t.indexOf(e)>=0}):a(e)},t.createRuleSet=function(e,t){return"@media ".concat(t,"{.").concat(e,"{display:none!important;}}")},t.createClassName=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return["fresnel"].concat(a(t.reduce(function(e,t){return Array.isArray(t)?a(e).concat(a(t)):a(e).concat([t])},[]))).join("-")},t.castBreakpointsToIntegers=function(e){var t=Object.keys(e);return t.reduce(function(n,r,a){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.forEach(function(t){i(e,t,n[t])})}return e}({},n,i({},t[a],Math.round(Number(e[r]))))},{})},t.memoize=function(e){var t={};return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=JSON.stringify(r);return t[a]||(t[a]=e.apply(void 0,r)),t[a]}},t.useIsFirstRender=function(){var e=(0,r.useRef)(!0);return!!e.current&&(e.current=!1,!0)};var r=n(429996);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}},53837:function(e,t,n){Object.defineProperty(t,"createMedia",{enumerable:!0,get:function(){return r.createMedia}});var r=n(786015);n(663418)},508452:function(e,t,n){n.d(t,{U:function(){return i},j:function(){return a}});var r=n(771982);let i={PREFIX:`${r.T}-avatar`},a={SHAPE:["circle","square"],SIZE:["extra-extra-small","extra-small","small","default","medium","large","extra-large"],COLOR:["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"],OVERLAP_FROM:["start","end"]}},419977:function(e,t,n){n.d(t,{KT:function(){return o},UX:function(){return i},j2:function(){return a}});var r=n(771982);let i={PREFIX:`${r.T}-input`},a={SIZE:["small","large","default"],DEFAULT_SIZE:"default",STATUS:["default","error","warning","success"],CLEARBTN_CLICKED_EVENT_FLAG:"__fromClearBtn",MODE:["password"]},o={}},109044:function(e,t,n){n.d(t,{q7:function(){return r}});let r="Enter";t.ZP={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229}},199689:function(e,t,n){var r=n(429996),i=n(472934),a=n(444997),o=n(156287);class l extends r.PureComponent{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e)}render(){let e=Object.assign({},this.props),t=!!e.icon,n=!!e.loading,o=!!e.disabled;return t||n&&!o?r.createElement(a.Z,Object.assign({},e)):r.createElement(i.Z,Object.assign({},e))}}l.__SemiComponentName__="Button",l.propTypes=Object.assign(Object.assign({},i.Z.propTypes),a.Z.propTypes),l.defaultProps=(0,o.GW)(l.__SemiComponentName__),l.elementType="Button",t.Z=l},420531:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(429996),i=n(669160),a=n.n(i),o=n(295011),l=n.n(o),s=n(771982);let u={PREFIX:`${s.T}-skeleton`};var c=n(508452),d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let f=c.j.SIZE,p=c.j.SHAPE,m=e=>t=>n=>r.createElement(t,Object.assign({type:e},n));class v extends r.PureComponent{render(){let e=this.props,{prefixCls:t,className:n,type:i,size:o,shape:l}=e,s=d(e,["prefixCls","className","type","size","shape"]),u=a()(n,`${t}-${i}`,{[`${t}-${i}-${o}`]:"AVATAR"===i.toUpperCase()},{[`${t}-${i}-${l}`]:"AVATAR"===i.toUpperCase()});return r.createElement("div",Object.assign({className:u},s))}}v.propTypes={type:l().string,prefixCls:l().string,style:l().object,className:l().string,size:l().oneOf(f),shape:l().oneOf(p)},v.defaultProps={prefixCls:u.PREFIX,size:"medium",shape:"circle"};let h=m("avatar")(v),g=m("image")(v),b=m("title")(v),x=m("button")(v);class y extends r.PureComponent{render(){let{prefixCls:e,className:t,style:n,rows:i}=this.props,o=a()(t,`${e}-paragraph`);return r.createElement("ul",{className:o,style:n},[...Array(i)].map((e,t)=>r.createElement("li",{key:t})))}}y.propTypes={rows:l().number,prefixCls:l().string,style:l().object,className:l().string},y.defaultProps={prefixCls:u.PREFIX,rows:4};var _=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let S=u.PREFIX;class w extends r.PureComponent{render(){let e;let t=this.props,{placeholder:n,active:i,children:o,className:l,loading:s,style:u}=t,c=_(t,["placeholder","active","children","className","loading","style"]),d=a()(S,{[`${S}-active`]:!!i},l);return s?r.createElement("div",Object.assign({className:d,style:u},c,{"x-semi-prop":"placeholder"}),n):o}}w.Avatar=h,w.Title=b,w.Button=x,w.Paragraph=y,w.Image=g,w.defaultProps={loading:!0},w.propTypes={active:l().bool,placeholder:l().node,style:l().object,className:l().string,loading:l().bool,children:l().node};var k=w},396611:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(524518),i=n(511451),a=n(477041),o=n(429996),l=n(669160),s=n.n(l),u=n(295011),c=n.n(u),d=n(771982);let f={PREFIX:`${d.T}-space`},p="loose",m="medium",v="tight",h=e=>{let t=[];return o.Children.forEach(e,e=>{null!=e&&(Array.isArray(e)?t=t.concat(h(e)):(0,o.isValidElement)(e)&&e.type&&"Symbol(react.fragment)"===e.type.toString()&&e.props?t=t.concat(h(e.props.children)):t.push(e))}),t};var g=n(739185);let b=f.PREFIX;class x extends o.PureComponent{render(){let{children:e=null,style:t,className:n,spacing:l,wrap:u,align:c,vertical:d}=this.props,f=Object.assign({},t),x="",y="";(0,a.Z)(l)?(x=l,y=l):(0,r.Z)(l)?(f.rowGap=l,f.columnGap=l):(0,i.Z)(l)&&((0,a.Z)(l[0])?x=l[0]:(0,r.Z)(l[0])&&(f.columnGap=`${l[0]}px`),(0,a.Z)(l[1])?y=l[1]:(0,r.Z)(l[1])&&(f.rowGap=`${l[1]}px`));let _=s()(b,n,{[`${b}-align-${c}`]:c,[`${b}-vertical`]:d,[`${b}-horizontal`]:!d,[`${b}-wrap`]:(!u||!d)&&u,[`${b}-tight-horizontal`]:x===v,[`${b}-tight-vertical`]:y===v,[`${b}-medium-horizontal`]:x===m,[`${b}-medium-vertical`]:y===m,[`${b}-loose-horizontal`]:x===p,[`${b}-loose-vertical`]:y===p}),S=h(e),w=(0,g.Z)(this.props);return o.createElement("div",Object.assign({},w,{className:_,style:f,"x-semi-prop":"children"}),S)}}x.propTypes={wrap:c().bool,align:c().oneOf(["start","end","center","baseline"]),vertical:c().bool,spacing:c().oneOfType([c().string,c().number,c().array]),children:c().node,style:c().object,className:c().string},x.defaultProps={vertical:!1,wrap:!1,spacing:"tight",align:"center"};var y=x},550606:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(429996),i=n(295011),a=n.n(i),o=n(669160),l=n.n(o),s=n(70059),u=n(771982);let c=`${u.T}-spin`;var d=n(926778);class f extends d.Z{static get spinDefaultAdapter(){return{getProp:()=>void 0,setLoading:e=>void 0}}constructor(e){super(Object.assign(Object.assign({},f.spinDefaultAdapter),e))}updateLoadingIfNeedDelay(){let{spinning:e,delay:t}=this._adapter.getProps(),{delay:n}=this._adapter.getStates();if(n){let n=this;this._timer=setTimeout(()=>{n._adapter.setState({loading:e,delay:0})},t)}}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}}var p=n(279862),m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let v={PREFIX:c}.PREFIX;class h extends s.Z{constructor(e){super(e),this.foundation=new f(this.adapter),this.state={delay:e.delay,loading:!0}}static getDerivedStateFromProps(e){return e.delay?!1===e.spinning?{delay:0,loading:!1}:{delay:e.delay}:{loading:e.spinning}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setLoading:e=>{this.setState({loading:e})}})}componentWillUnmount(){this.foundation.destroy()}renderSpin(){let{indicator:e,tip:t}=this.props,{loading:n}=this.state;return n?r.createElement("div",{className:`${v}-wrapper`},e?r.createElement("div",{className:`${v}-animate`,"x-semi-prop":"indicator"},e):r.createElement(p.Z,null),t?r.createElement("div",{"x-semi-prop":"tip"},t):null):null}render(){this.foundation.updateLoadingIfNeedDelay();let e=this.props,{children:t,style:n,wrapperClassName:i,childStyle:a,size:o}=e,s=m(e,["children","style","wrapperClassName","childStyle","size"]),{loading:u}=this.state,c=l()(v,i,{[`${v}-${o}`]:o,[`${v}-block`]:t,[`${v}-hidden`]:!u});return r.createElement("div",Object.assign({className:c,style:n},this.getDataAttr(s)),this.renderSpin(),r.createElement("div",{className:`${v}-children`,style:a,"x-semi-prop":"children"},t))}}h.propTypes={size:a().oneOf(["small","middle","large"]),spinning:a().bool,children:a().node,indicator:a().node,delay:a().number,tip:a().node,wrapperClassName:a().string,childStyle:a().object,style:a().object},h.defaultProps={size:"middle",spinning:!0,children:null,indicator:null,delay:0};var g=h},856206:function(e,t,n){n.d(t,{o:function(){return a}});var r=n(429996),i=n(981479),a=function(e){return function(t,n){var a=(0,r.useRef)(),o=(0,r.useRef)(0);void 0!==n&&(0,i.k)(n,a.current)||(a.current=n,o.current+=1),e(t,[o.current])}}},448263:function(e,t,n){var r=n(429996),i=function(e,t){return!Object.is(e,t)};t.Z=function(e,t){void 0===t&&(t=i);var n=(0,r.useRef)(),a=(0,r.useRef)();return t(a.current,e)&&(n.current=a.current,a.current=e),n.current}},981479:function(e,t,n){n.d(t,{k:function(){return i}});var r=n(474227),i=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),(0,r.Z)(e,t)}},878533:function(e,t){var n=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;t.validate=function(e){if(!e||e.length>254||!n.test(e))return!1;var t=e.split("@");return!(t[0].length>64||t[1].split(".").some(function(e){return e.length>63}))}},353334:function(e,t,n){n.d(t,{d0:function(){return f},ZP:function(){return g},cn:function(){return p},Ix:function(){return m}});var r=n(751317),i=n(891853),a=n(429996),o=n(568120),l={disabled:!1},s=n(631433),u=n(603566),c="unmounted",d="exited",f="entering",p="entered",m="exiting",v=function(e){function t(t,n){r=e.call(this,t,n)||this;var r,i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=d,r.appearStatus=f):i=p:i=t.unmountOnExit||t.mountOnEnter?c:d,r.state={status:i},r.nextCallback=null,r}(0,i.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===c?{status:d}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==f&&n!==p&&(t=f):(n===f||n===p)&&(t=m)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){if(this.cancelNextCallback(),t===f){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:o.findDOMNode(this);n&&(0,u.Q)(n)}this.performEnter(e)}else this.performExit()}else this.props.unmountOnExit&&this.state.status===d&&this.setState({status:c})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[o.findDOMNode(this),r],a=i[0],s=i[1],u=this.getTimeouts(),c=r?u.appear:u.enter;if(!e&&!n||l.disabled){this.safeSetState({status:p},function(){t.props.onEntered(a)});return}this.props.onEnter(a,s),this.safeSetState({status:f},function(){t.props.onEntering(a,s),t.onTransitionEnd(c,function(){t.safeSetState({status:p},function(){t.props.onEntered(a,s)})})})},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:o.findDOMNode(this);if(!t||l.disabled){this.safeSetState({status:d},function(){e.props.onExited(r)});return}this.props.onExit(r),this.safeSetState({status:m},function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:d},function(){e.props.onExited(r)})})})},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:o.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(!n||r){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],l=i[1];this.props.addEndListener(a,l)}null!=e&&setTimeout(this.nextCallback,e)},n.render=function(){var e=this.state.status;if(e===c)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,r.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return a.createElement(s.Z.Provider,{value:null},"function"==typeof n?n(e,i):a.cloneElement(a.Children.only(n),i))},t}(a.Component);function h(){}v.contextType=s.Z,v.propTypes={},v.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:h,onEntering:h,onEntered:h,onExit:h,onExiting:h,onExited:h},v.UNMOUNTED=c,v.EXITED=d,v.ENTERING=f,v.ENTERED=p,v.EXITING=m;var g=v},631433:function(e,t,n){var r=n(429996);t.Z=r.createContext(null)},603566:function(e,t,n){n.d(t,{Q:function(){return r}});var r=function(e){return e.scrollTop}},95788:function(e,t){t.Z={"show-scrollbar-thumb":"show-scrollbar-thumb-noolpt",showScrollbarThumb:"show-scrollbar-thumb-noolpt"}},52799:function(e,t){t.Z={container:"container-gaxn1L","custom-area-wrapper":"custom-area-wrapper-eZ7eV6",customAreaWrapper:"custom-area-wrapper-eZ7eV6",placeholder:"placeholder-bH24LO","editor-container":"editor-container-FvjPyp",editorContainer:"editor-container-FvjPyp","editor-wrapper":"editor-wrapper-aTMAEc",editorWrapper:"editor-wrapper-aTMAEc","bottom-wrapper":"bottom-wrapper-HSqF30",bottomWrapper:"bottom-wrapper-HSqF30",editor:"editor-A1E_5W","left-tools-wrapper":"left-tools-wrapper-OPMrTB",leftToolsWrapper:"left-tools-wrapper-OPMrTB","right-tools-wrapper":"right-tools-wrapper-bTtSWY",rightToolsWrapper:"right-tools-wrapper-bTtSWY","tools-placeholder":"tools-placeholder-WzV9jb",toolsPlaceholder:"tools-placeholder-WzV9jb","input-content-container":"input-content-container-qGGCGi",inputContentContainer:"input-content-container-qGGCGi","input-popover":"input-popover-JQ8RRK",inputPopover:"input-popover-JQ8RRK","container-v2":"container-v2-TUi2lB",containerV2:"container-v2-TUi2lB"}},487149:function(e,t,n){n.d(t,{$j:function(){return L},pR:function(){return I},s8:function(){return j},po:function(){return u},Jt:function(){return k},wG:function(){return d},WC:function(){return M},Hi:function(){return f},Xv:function(){return S},$B:function(){return w},L9:function(){return F},im:function(){return P}});var r=n(429996),i=n(187370),a=n(627394);let o=r.createContext({open:!1,setOpen:()=>{},isHoveringMenuContentRef:r.createRef(),updateIsHoveringMenuContent:()=>{}}),l=()=>r.useContext(o);var s=n(126544);function u(e){let{...t}=e,n=(0,s.KX)(),{modal:l,...u}=t,{trigger:c="click"}=t;n&&(c="click");let[d,f]=r.useState(!1),p=r.useRef(!1),m=["contextMenu","hover"].includes(c),v=m?{onOpenChange:e=>{f(e)},open:d}:{},h="hover"!==c&&l;return r.useEffect(()=>{if(m){var e;null==t||null===(e=t.onOpenChange)||void 0===e||e.call(t,d)}},[d]),(0,a.jsx)(o.Provider,{value:{open:d,setOpen:f,isHoveringMenuContentRef:p,updateIsHoveringMenuContent:e=>{p.current=e},trigger:c},children:(0,a.jsx)(i.fC,{"data-slot":"dropdown-menu",modal:h,...u,...v})})}var c=n(966640);function d(e){let{className:t,...n}=e;return(0,a.jsx)(i.__,{"data-slot":"dropdown-menu-label",className:(0,c.cn)(`
          h-30 truncate px-10 pt-8 pb-4
          [font-size:12px]
          leading-18
          [font-weight:500]
          text-dbx-text-tertiary
        `,t),...n})}let f=r.forwardRef(function(e,t){let{className:n,...r}=e;return(0,a.jsx)(i.ck,{"data-slot":"dropdown-menu-item","data-selected":null==r?void 0:r.active,className:(0,c.cn)(`
          h-38 w-full items-center truncate rounded-dbx-sm px-10 py-4
          [font-size:14px]
          leading-30
          [font-weight:400]
          text-dbx-text-primary
          focus:bg-dbx-fill-trans-10-hover focus:outline-none
          data-[disabled]:cursor-not-allowed
          [&:not([data-disabled])]:hover:cursor-pointer
          [&:not([data-disabled])]:hover:bg-dbx-fill-trans-10-hover
        `,n),ref:t,...r})});var p=n(757658),m=n(461387);let v=(0,m.j)("flex",{variants:{direction:{horizontal:"",vertical:"h-auto py-8"}},defaultVariants:{direction:"horizontal"}}),h=(0,m.j)("mr-8 size-16 flex-shrink-0 text-dbx-text-primary",{variants:{direction:{horizontal:"",vertical:"mt-2 self-start"},themeType:{danger:"text-dbx-function-danger-default",disabled:"text-dbx-text-disable",default:""}},defaultVariants:{direction:"horizontal",themeType:"default"}}),g=(0,m.j)("flex flex-1 truncate leading-22",{variants:{direction:{horizontal:"justify-between",vertical:"flex-col"},themeType:{danger:"text-dbx-function-danger-default",disabled:"text-dbx-text-disable",default:""}},defaultVariants:{direction:"horizontal",themeType:"default"}}),b=(0,m.j)("truncate",{variants:{direction:{horizontal:"h-22 leading-22",vertical:"mb-2 h-20 leading-20"}},defaultVariants:{direction:"horizontal"}}),x=(0,m.j)(`
    truncate
    [font-weight:400]
  `,{variants:{direction:{horizontal:`
          ml-8 max-w-140 min-w-28 items-center text-right
          [font-size:14px]
          leading-22
        `,vertical:`
          flex flex-col
          [font-size:12px]
          leading-18 whitespace-normal
        `},themeType:{danger:"text-dbx-function-danger-default",disabled:"text-dbx-text-disable",default:"text-dbx-text-tertiary"}},defaultVariants:{direction:"horizontal",themeType:"default"}}),y=(0,m.j)("",{variants:{direction:{horizontal:"",vertical:"flex h-20 items-center self-start"}},defaultVariants:{direction:"horizontal"}}),_=(0,m.j)("",{variants:{direction:{horizontal:"size-14",vertical:"size-16"},themeType:{danger:"text-dbx-function-danger-default",disabled:"text-dbx-text-disable",default:""}},defaultVariants:{direction:"horizontal",themeType:"default"}}),S=e=>{let{icon:t,className:n,children:i,showTick:o=!0,extraInfo:l,classNames:s,extraInfoDirection:u="horizontal",rightNode:d,themeType:m="default",...S}=e,{active:w,disabled:k}=e,j=m;k&&(j="disabled");let M=(0,r.useMemo)(()=>d||o,[d,o]);return(0,a.jsxs)(f,{className:(0,c.cn)(v({direction:u}),n,null==s?void 0:s.wrapper),...S,children:[t?(0,a.jsx)("div",{className:(0,c.cn)(h({direction:u,themeType:j}),null==s?void 0:s.iconWrapper),children:r.isValidElement(t)?r.cloneElement(t,{width:16,height:16}):t}):null,(0,a.jsxs)("div",{className:(0,c.cn)(g({direction:u,themeType:j}),null==s?void 0:s.middleWrapper),children:[(0,a.jsx)("div",{className:(0,c.cn)(b({direction:u}),null==s?void 0:s.content),children:i}),l?(0,a.jsx)("div",{className:(0,c.cn)(x({direction:u,themeType:j}),null==s?void 0:s.extraInfo),children:l}):null]}),M?(0,a.jsx)("div",{className:(0,c.cn)(y({direction:u}),l&&"vertical"!==u?"ml-4":"ml-8",null==s?void 0:s.rightNodeWrapper),children:d||(o&&w?(0,a.jsx)(p.s,{className:(0,c.cn)(_({direction:u,themeType:j}))}):null)}):null]})};function w(e){let{className:t,...n}=e;return(0,a.jsx)(i.Z0,{"data-slot":"dropdown-menu-separator",className:(0,c.cn)("mx-8 my-4 h-[0.5px] bg-dbx-line-10",t),...n})}let k=r.forwardRef(function(e,t){let{className:n,sideOffset:r=4,align:o="start",side:s="bottom",collisionPadding:u={top:20,bottom:20,left:20,right:20},onCloseAutoFocus:d=e=>{e.preventDefault()},...f}=e,{trigger:p,updateIsHoveringMenuContent:m,setOpen:v}=l(),h="hover"===p?{onMouseLeave:e=>{var t;null==f||null===(t=f.onMouseLeave)||void 0===t||t.call(f,e),m(!1),v(!1)},onMouseEnter:e=>{var t;null==f||null===(t=f.onMouseEnter)||void 0===t||t.call(f,e),m(!0)}}:{};return(0,a.jsx)(i.VY,{"data-slot":"dropdown-menu-content",onCloseAutoFocus:d,align:o,side:s,sideOffset:r,collisionPadding:u,className:(0,c.cn)(`
          [max-height:min(var(--radix-popper-available-height),480px)]
          max-w-420 min-w-140 overflow-x-hidden overflow-y-auto rounded-dbx-lg
          [border-width:0.5px]
          border-solid border-dbx-line-10 bg-dbx-bg-float p-[3.5px]
          shadow-[0px_2px_4px_0px_rgba(0,0,0,0.02),0px_4px_10px_0px_rgba(0,0,0,0.03),0px_4px_16px_0px_rgba(0,0,0,0.03)]
          data-[side=bottom]:slide-in-from-top-2
          data-[side=left]:slide-in-from-right-2
          data-[side=right]:slide-in-from-left-2
          data-[side=top]:slide-in-from-bottom-2
          data-[state=closed]:animate-out data-[state=closed]:fade-out-0
          data-[state=closed]:zoom-out-95
          data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95
        `,"custom-scrollbar-style",n),ref:t,...f,...h})});function j(e){let{...t}=e;return(0,a.jsx)(i.Uv,{"data-slot":"dropdown-menu-portal",...t})}function M(e){let{className:t,sideOffset:n=4,style:r,alignOffset:o=-4,collisionPadding:l={top:20,bottom:20,left:20,right:20},...s}=e;return(0,a.jsx)(i.tu,{collisionPadding:l,alignOffset:o,sideOffset:n,"data-slot":"dropdown-menu-sub-content",style:{...r,"--tw-animation-duration":"300ms"},className:(0,c.cn)(`
          [max-height:min(var(--radix-popper-available-height),480px)]
          max-w-420 min-w-140 overflow-x-hidden overflow-y-auto rounded-dbx-lg
          [border-width:0.5px]
          border-solid border-dbx-line-10 bg-dbx-bg-float p-[3.5px]
          shadow-[0px_2px_4px_0px_rgba(0,0,0,0.02),0px_4px_10px_0px_rgba(0,0,0,0.03),0px_4px_16px_0px_rgba(0,0,0,0.03)]
          data-[side=bottom]:slide-in-from-top-2
          data-[side=left]:slide-in-from-right-2
          data-[side=right]:slide-in-from-left-2
          data-[side=top]:slide-in-from-bottom-2
          data-[state=closed]:animate-out data-[state=closed]:fade-out-0
          data-[state=closed]:zoom-out-95
          data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95
        `,"custom-scrollbar-style",t),...s})}let C=e=>r.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},r.createElement("path",{d:"M8.15146 4.84874C7.68283 4.38011 7.68283 3.6201 8.15146 3.15147C8.62009 2.68284 9.3801 2.68284 9.84872 3.15147L17.0001 10.3028C17.9373 11.2401 17.9374 12.7601 17.0001 13.6974L9.84873 20.8487L9.7579 20.9308C9.28657 21.3155 8.59091 21.2882 8.15146 20.8487C7.712 20.4093 7.68469 19.7136 8.06943 19.2423L8.15146 19.1515L15.3028 12.0001L8.15146 4.84874Z",fill:"currentColor"}));function I(e){let{className:t,children:n,...r}=e;return(0,a.jsxs)(i.fF,{"data-slot":"dropdown-menu-sub-trigger",className:(0,c.cn)(`
          flex h-38 w-full items-center truncate rounded-dbx-sm px-10 py-4
          [font-size:14px]
          [font-weight:400]
          text-dbx-text-primary
          hover:cursor-pointer
          focus:bg-dbx-fill-trans-10-hover focus:outline-none
          data-[disabled]:cursor-not-allowed
          data-[state=open]:bg-dbx-fill-trans-10-hover
          [&:not([data-disabled])]:hover:bg-dbx-fill-trans-10-hover
        `,t),...r,children:[n,(0,a.jsx)(C,{className:"ml-auto size-12 text-dbx-text-tertiary"})]})}let T=(0,m.j)("flex",{variants:{direction:{horizontal:"",vertical:"h-auto py-8"}},defaultVariants:{direction:"horizontal"}}),E=(0,m.j)("mr-8 size-16 flex-shrink-0 text-dbx-text-primary",{variants:{direction:{horizontal:"",vertical:"mt-2 self-start"},themeType:{danger:"text-dbx-function-danger-default",disabled:"text-dbx-text-disable",default:""}},defaultVariants:{direction:"horizontal",themeType:"default"}}),N=(0,m.j)("flex flex-1 truncate leading-22",{variants:{direction:{horizontal:"justify-between",vertical:"flex-col"},themeType:{danger:"text-dbx-function-danger-default",disabled:"text-dbx-text-disable",default:""}},defaultVariants:{direction:"horizontal",themeType:"default"}}),R=(0,m.j)("truncate",{variants:{direction:{horizontal:"h-22 leading-22",vertical:"mb-2 h-20 leading-20"}},defaultVariants:{direction:"horizontal"}}),B=(0,m.j)(`
    truncate
    [font-weight:400]
  `,{variants:{direction:{horizontal:`
          ml-8 max-w-140 min-w-28 items-center text-right
          [font-size:14px]
          leading-22
        `,vertical:`
          flex flex-col
          [font-size:12px]
          leading-18 whitespace-normal
        `},themeType:{danger:"text-dbx-function-danger-default",disabled:"text-dbx-text-disable",default:"text-dbx-text-tertiary"}},defaultVariants:{direction:"horizontal",themeType:"default"}}),O=(0,m.j)("",{variants:{direction:{horizontal:"",vertical:"flex h-20 items-center self-start"}},defaultVariants:{direction:"horizontal"}}),A=(0,m.j)("size-12 text-dbx-text-tertiary",{variants:{direction:{horizontal:"",vertical:""},themeType:{danger:"text-dbx-function-danger-default",disabled:"text-dbx-text-disable",default:""}},defaultVariants:{direction:"horizontal",themeType:"default"}}),L=e=>{let{icon:t,className:n,children:o,extraInfo:l,classNames:s,extraInfoDirection:u="horizontal",themeType:d="default",...f}=e,{disabled:p}=e,m=d;return p&&(m="disabled"),(0,a.jsxs)(i.fF,{"data-slot":"dropdown-menu-sub-trigger",className:(0,c.cn)(`
          flex h-38 w-full items-center truncate rounded-dbx-sm px-10 py-4
          [font-size:14px]
          [font-weight:400]
          text-dbx-text-primary
          hover:cursor-pointer
          focus:bg-dbx-fill-trans-10-hover focus:outline-none
          data-[disabled]:cursor-not-allowed
          data-[state=open]:bg-dbx-fill-trans-10-hover
          [&:not([data-disabled])]:hover:bg-dbx-fill-trans-10-hover
        `,T({direction:u}),n,null==s?void 0:s.wrapper),...f,children:[t?(0,a.jsx)("div",{className:(0,c.cn)(E({direction:u,themeType:m}),null==s?void 0:s.iconWrapper),children:r.isValidElement(t)?r.cloneElement(t,{width:16,height:16}):t}):null,(0,a.jsxs)("div",{className:(0,c.cn)(N({direction:u,themeType:m}),null==s?void 0:s.middleWrapper),children:[(0,a.jsx)("div",{className:(0,c.cn)(R({direction:u}),null==s?void 0:s.content),children:o}),l?(0,a.jsx)("div",{className:(0,c.cn)(B({direction:u,themeType:m}),null==s?void 0:s.extraInfo),children:l}):null]}),(0,a.jsx)("div",{className:(0,c.cn)(O({direction:u}),l&&"vertical"!==u?"ml-4":"ml-8",null==s?void 0:s.rightNodeWrapper),children:(0,a.jsx)(C,{className:(0,c.cn)(A({direction:u,themeType:m}))})})]})},P=r.forwardRef(function(e,t){let{setOpen:n,trigger:r,isHoveringMenuContentRef:o}=l(),s="hover"===r?{onMouseEnter:t=>{var r;null==e||null===(r=e.onMouseEnter)||void 0===r||r.call(e,t),n(!0)},onMouseLeave:t=>{var r;null==e||null===(r=e.onMouseLeave)||void 0===r||r.call(e,t),setTimeout(()=>{!o.current&&n(!1)},100)}}:"contextMenu"===r?{onContextMenu:e=>{e.preventDefault(),n(!0)}}:{};return(0,a.jsx)(i.xz,{"data-slot":"dropdown-menu-trigger",ref:t,...e,...s})});function F(e){let{...t}=e;return(0,a.jsx)(i.Tr,{"data-slot":"dropdown-menu-sub",...t})}i.Eh},838303:function(e,t,n){n.d(t,{r:function(){return o}});var r=n(177e3),i=n(34413),a=n(627394);let o=e=>{let t=(0,i.G)("Link",r.rU);return(0,a.jsx)(t,{...e})}},471549:function(e,t,n){n.d(t,{Z:function(){return a}}),n(429996);var r=n(339512),i=n(627394),a=(0,r.G)((0,i.jsx)(e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 28 28",...e,children:(0,i.jsx)("path",{d:"M14.007 28q-2.881 0-5.418-1.11a14.3 14.3 0 0 1-4.453-3.026 14.5 14.5 0 0 1-3.04-4.453Q0 16.875 0 13.993q0-2.868 1.095-5.404Q2.191 6.053 4.121 4.12A14.5 14.5 0 0 1 8.59 1.095Q11.124 0 13.993 0t5.404 1.095q2.536 1.096 4.467 3.026A14.2 14.2 0 0 1 26.89 8.59Q28 11.124 28 13.993q0 2.881-1.095 5.418a14.3 14.3 0 0 1-3.027 4.453 14.2 14.2 0 0 1-4.467 3.026Q16.876 28 14.007 28m.015-6.917q.518 0 .835-.317.332-.332.332-.836v-6.816l-.13-2.969 1.37 1.672 1.599 1.643q.316.33.807.331.475 0 .792-.303a.99.99 0 0 0 .332-.763q0-.475-.332-.807L14.944 7.22q-.433-.447-.922-.447-.476 0-.908.447L8.43 11.918q-.317.317-.317.807 0 .461.317.763.318.303.778.303.49 0 .807-.331l1.629-1.658 1.326-1.642-.116 2.954v6.816q0 .504.332.836.331.317.836.317"})}),{}))},744966:function(e,t,n){n.d(t,{Z:function(){return a}}),n(429996);var r=n(339512),i=n(627394),a=(0,r.G)((0,i.jsx)(e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,i.jsx)("path",{fill:"currentColor",d:"m3.543 8.883 7.042-7.047a2 2 0 0 1 2.828 0l7.043 7.046a1 1 0 0 1 0 1.415l-.701.701a1 1 0 0 1-1.414 0L13.3 5.956v15.792a1 1 0 0 1-1 1h-.99a1 1 0 0 1-1-1V6.342l-4.654 4.656a1 1 0 0 1-1.414 0l-.7-.7a1 1 0 0 1 0-1.415"})}),{}))},894844:function(e,t,n){n.d(t,{Z:function(){return a}}),n(429996);var r=n(339512),i=n(627394),a=(0,r.G)((0,i.jsx)(e=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:[(0,i.jsx)("path",{fill:"currentColor",d:"M10.586 12 8.464 9.879A1 1 0 1 1 9.88 8.464L12 10.586l2.121-2.122a1 1 0 0 1 1.415 1.415L13.414 12l2.122 2.121a1 1 0 0 1-1.415 1.415L12 13.414l-2.121 2.122a1 1 0 1 1-1.415-1.415z"}),(0,i.jsx)("path",{fill:"currentColor",d:"M1 12c0 6.075 4.925 11 11 11s11-4.925 11-11S18.075 1 12 1 1 5.925 1 12m20 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0"})]}),{}))},454249:function(e,t,n){n.d(t,{Z:function(){return a}}),n(429996);var r=n(339512),i=n(627394),a=(0,r.G)((0,i.jsx)(e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,i.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 22c4.035 0 7.513-2.39 9.093-5.832l-1.819-.834A8.001 8.001 0 0 1 4 12a8 8 0 0 1 14.245-5H16a1 1 0 1 0 0 2h4.5a1 1 0 0 0 1-1V3.5a1 1 0 1 0-2 0v1.885A9.98 9.98 0 0 0 12 2C6.477 2 2 6.477 2 12s4.477 10 10 10",clipRule:"evenodd"})}),{}))},345234:function(e,t,n){n.d(t,{g:function(){return l}});var r=n(669160),i=n.n(r),a="circle-nXxO7r",o=n(627394);let l=e=>{let{disabled:t=!1,...n}=e;return(0,o.jsxs)("div",{...n,className:i()("dot-flashing-yCwRNA",{"disabled-rz7SUF":t}),children:[(0,o.jsx)("div",{className:a}),(0,o.jsx)("div",{className:a})]})}},864802:function(e,t,n){n.d(t,{R:function(){return u}});var r=n(429996),i=n(669160),a=n.n(i),o=n(199689),l={"samantha-button":"samantha-button-BghSMg",samanthaButton:"samantha-button-BghSMg",primary:"primary-ILSaWX",secondary:"secondary-DFAUit",tertiary:"tertiary-o1h39p",quartary:"quartary-aYEGEv","danger-primary":"danger-primary-F4AGmu",dangerPrimary:"danger-primary-F4AGmu","danger-secondary":"danger-secondary-NmhtRe",dangerSecondary:"danger-secondary-NmhtRe","danger-tertiary":"danger-tertiary-NjiaGk",dangerTertiary:"danger-tertiary-NjiaGk","ai-primary":"ai-primary-y5Hq_o",aiPrimary:"ai-primary-y5Hq_o","rotate-anim":"rotate-anim-XYikfA",rotateAnim:"rotate-anim-XYikfA",large:"large-_ZK9JD","icon-only":"icon-only-BL0gii",iconOnly:"icon-only-BL0gii",icon:"icon-hKywyK",medium:"medium-VC3b8a",small:"small-e8_KcA","ai-secondary":"ai-secondary-HZfU02",aiSecondary:"ai-secondary-HZfU02","image-primary":"image-primary-wMDMhY",imagePrimary:"image-primary-wMDMhY","image-secondary":"image-secondary-ICUN7w",imageSecondary:"image-secondary-ICUN7w","image-primary-dark":"image-primary-dark-rSxm7a",imagePrimaryDark:"image-primary-dark-rSxm7a","image-secondary-dark":"image-secondary-dark-wxFd7P",imageSecondaryDark:"image-secondary-dark-wxFd7P",logo:"logo-MhfZK1","icon-right":"icon-right-FlEKpJ",iconRight:"icon-right-FlEKpJ"},s=n(627394);let u=r.forwardRef(function(e,t){let{type:n="primary",size:r="medium",logo:i=!1,...u}=e,{icon:c,iconPosition:d}=u,f=c||e.loading,p=c&&i;return(0,s.jsx)(o.Z,{ref:t,...u,theme:"solid",type:"primary",size:"default",className:a()(l["samantha-button"],l[n],l[r],{[l.icon]:f,[l["icon-right"]]:f&&"right"===d,[l["icon-only"]]:f&&!e.children,[l.logo]:p},u.className),children:e.children})})},424166:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(429996),i=n(999132);let a=e=>{let{interval:t=1e3,onChange:n}=e,a=(0,r.useRef)(-1),o=(0,r.useRef)(0),l=(0,r.useRef)(0),s=(0,r.useRef)(0),u=(0,i.Z)(function(e){0===s.current&&(s.current=e),l.current++,e-s.current>=t&&(o.current=Math.round(1e3*l.current/(e-s.current)),null==n||n(o.current),l.current=0,s.current=e),a.current=window.requestAnimationFrame(u)}),c=(0,i.Z)(()=>{l.current=0,s.current=0,a.current=window.requestAnimationFrame(u)}),d=(0,i.Z)(()=>{a.current&&window.cancelAnimationFrame(a.current)});return{fps:o.current,start:c,stop:d}}},720246:function(e,t,n){n.d(t,{i:function(){return a}});var r=n(429996),i=n(574367);function a(e){let t=(0,i.Z)(e),n=(0,r.useCallback)(function(){for(var e,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(e=t.current)||void 0===e?void 0:e.call(t,...r)},[]);return e&&n}},844550:function(e,t,n){n.d(t,{t:function(){return i}});var r=n(429996);let i=e=>{let t=(0,r.useRef)(!1);t.current||(t.current=!0,e())}},350538:function(e,t,n){n.d(t,{IC:function(){return i},N6:function(){return o},dM:function(){return l},vd:function(){return a}});var r=n(913602);let i="flow_web_has_login",a=()=>{r.yQ.setItem(i,"true")},o=()=>{r.yQ.removeItem(i)},l=()=>"true"===r.yQ.getItem(i)},900789:function(e,t,n){var r,i,a,o,l,s;n.d(t,{E7:function(){return c},KF:function(){return u},MZ:function(){return p},Tv:function(){return f},m9:function(){return m},nw:function(){return d}});let u=((r={})[r.MessageDelete=1]="MessageDelete",r[r.MessageLike=2]="MessageLike",r[r.MessageDislike=3]="MessageDislike",r[r.MessageIDLocalMapping=4]="MessageIDLocalMapping",r[r.MessageNotCompliant=5]="MessageNotCompliant",r[r.ConversationArchive=11]="ConversationArchive",r[r.ConversationAdd=12]="ConversationAdd",r[r.ConversationCreateSection=13]="ConversationCreateSection",r[r.ConversationClearHistory=14]="ConversationClearHistory",r[r.ConversationUpdate=15]="ConversationUpdate",r[r.ConversationRead=16]="ConversationRead",r[r.ConversationLandingInsert=17]="ConversationLandingInsert",r[r.OnboardingBegin=21]="OnboardingBegin",r[r.OnboardingFail=22]="OnboardingFail",r[r.OnboardingCancel=23]="OnboardingCancel",r[r.OnboardingNeedStart=26]="OnboardingNeedStart",r[r.UserBanned=31]="UserBanned",r[r.UserBanRelease=32]="UserBanRelease",r[r.UserLogout=33]="UserLogout",r[r.UserConfigUpdate=41]="UserConfigUpdate",r[r.NeedLocation=51]="NeedLocation",r[r.PushToast=60]="PushToast",r[r.TTSBegin=91]="TTSBegin",r[r.UserMute=101]="UserMute",r[r.UserMuteRelease=102]="UserMuteRelease",r[r.TouristReachChatLimit=1e3]="TouristReachChatLimit",r[r.NestedMessageStateChange=1001]="NestedMessageStateChange",r[r.TouristReachThreadLimit=1002]="TouristReachThreadLimit",r[r.MessageRefImagesNotCompliant=1003]="MessageRefImagesNotCompliant",r[r.MessageUpdate=1004]="MessageUpdate",r[r.MailboxActivated=1005]="MailboxActivated",r[r.QueryBroadcast=1006]="QueryBroadcast",r[r.SafetyResponseAnswer=1007]="SafetyResponseAnswer",r[r.FetchAnswer=1008]="FetchAnswer",r[r.GuidanceTaskCompleted=1009]="GuidanceTaskCompleted",r[r.DisableActionBar=1010]="DisableActionBar",r[r.DeepResearchFinished=1011]="DeepResearchFinished",r[r.SuperTaskFinished=1012]="SuperTaskFinished",r[r.SuperTaskNeedAskHuman=1013]="SuperTaskNeedAskHuman",r[r.CodeAssistantAsyncTaskFinished=1014]="CodeAssistantAsyncTaskFinished",r[r.SuperTaskModelCallOverload=1015]="SuperTaskModelCallOverload",r[r.SuperTaskApplyTrialSuccess=1016]="SuperTaskApplyTrialSuccess",r[r.ActionBarRefresh=1e4]="ActionBarRefresh",r),c=((i={})[i.User=0]="User",i[i.System=1]="System",i),d=((a={})[a.Default=0]="Default",a[a.Like=1]="Like",a[a.Unlike=2]="Unlike",a[a.Better=3]="Better",a[a.Almost=4]="Almost",a[a.BothBad=5]="BothBad",a[a.Form=6]="Form",a),f=((o={})[o.Unknown=0]="Unknown",o[o.File=1]="File",o[o.OCRImage=2]="OCRImage",o[o.Audio=3]="Audio",o[o.Video=4]="Video",o),p=((l={})[l.ParseState_Default=0]="ParseState_Default",l[l.ParseState_Success=1]="ParseState_Success",l[l.ParseState_Failed=2]="ParseState_Failed",l[l.ParseState_Processing=3]="ParseState_Processing",l),m=((s={})[s.ReviewState_Default=0]="ReviewState_Default",s[s.ReviewState_Access=1]="ReviewState_Access",s[s.ReviewState_NotCompliant=2]="ReviewState_NotCompliant",s[s.ReviewState_Processing=3]="ReviewState_Processing",s)},317774:function(e,t,n){var r;n.d(t,{b:function(){return i}});let i=((r={})[r.Unknown=0]="Unknown",r[r.Stream=1]="Stream",r[r.Normal=2]="Normal",r)},255627:function(e,t,n){n.d(t,{Q:function(){return l}});var r=n(669160),i=n.n(r),a=n(864802),o=n(627394);let l=e=>{let{text:t,className:n,onClick:r,type:l}=e;return(0,o.jsx)(a.R,{size:"small",type:"common"===l?"tertiary":void 0,onClick:r,className:i()("rounded-10",["btn-jFmnEl"],n,{"backBtn-RPdQ0z":"common"===l}),children:t})}},475949:function(e,t,n){n.d(t,{K:function(){return o}});var r=n(432626),i=n(445644),a=n(627394);let o=e=>(0,a.jsx)(i.x,{...e,t:r.X9})},445644:function(e,t,n){n.d(t,{x:function(){return b}});var r=n(529496),i=n(429996),a=n(669160),o=n.n(a),l=n(396611),s=n(644367),u=n(233034),c=n(255627),d=n(627394);let f="/chat/";var p=e=>{let{t}=e;if("undefined"==typeof window)return null;let n=(0,u.s)();return location.pathname!==f?(0,d.jsx)(c.Q,{type:"common",onClick:()=>{location.pathname.startsWith(f)?n(f):window.location.href=(0,r.C)(`${window.location.origin}${f}`,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$J-%lJXRXBxW$$NNWFX%ll%bkJp-lZaNlkzaz$iR051%25aamF%RnBZak5XZFZwSFJub*x$emw2WTIxTmRsa3lPWFJp$npsM$R*ZFdl$050T1hsT$dFSm9XakpWZ*1*SE9-%mF$ekZwWk$jM*RX%kl%alJa$0$wd$p*aE5Q%T09"})},text:t("back_to_homepage_btn")}):null},m=n.p+"static/image/avatar-head.5127e41f.png",v=n(584798),h={wrapper:"wrapper-wbjoYw",img:"img-EGsNhh",title:"title-qgOFOT","sub-title":"sub-title-l29HOv","button-wrapper":"button-wrapper-NxncZs","extra-wrapper":"extra-wrapper-G6nxIh"};let g=e=>{let{from:t,customReload:n,t:r}=e;return(0,v.Q)(t,r),(0,d.jsx)(c.Q,{type:"active",onClick:()=>{n?null==n||n():window.location.reload()},text:r("reload_page_btn")})},b=e=>{let{title:t,subTitle:n,showSubTitle:a,showAvatar:u,showHomeBtn:c,showReloadBtn:f,customReload:v,from:b,extraComp:x,t:y}=e;(0,i.useEffect)(()=>{s.k.persist.info({eventName:"boundary_common_error_page",meta:{from:b,title:t,is_package:1}})},[]);let _=x?(0,i.isValidElement)(x)?x:(0,d.jsx)(x,{}):null;return(0,d.jsxs)("div",{className:o()(h.wrapper,"common-error-page"),children:[u?(0,d.jsx)("img",{src:(0,r.C)(m,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$J-%lJXRXBxW$$NNWFX%ll%bkJp-lZaNlkzaz$iR051%25aamF%RnBZak5XZFZwSFJub*x$emw2WTIxTmRsa3lPWFJp$npsM$R*ZFdl$050T1hsT$dFSm9XakpWZ*1ReWJEQmhSemt4Wk$NeE1FeH$$bnBs%jBaN$dqTldlZz09"}),className:h.img}):null,(0,d.jsx)("div",{className:h.title,children:t||y("page_not_available")}),a&&(0,d.jsx)("div",{className:h["sub-title"],children:n||y("page_not_available_desc")}),(c||f)&&(0,d.jsxs)(l.Z,{className:h["button-wrapper"],vertical:!0,spacing:10,children:[f&&(0,d.jsx)(g,{from:b,customReload:v,t:y}),c&&(0,d.jsx)(p,{t:y})]}),(0,d.jsx)(l.Z,{className:o()(h["extra-wrapper"],"common-error-extra"),vertical:!0,spacing:10,children:_})]})}},584798:function(e,t,n){n.d(t,{Q:function(){return l}});var r=n(429996),i=n(551450),a=n(644367);let o="session_auto_reloaded",l=(e,t)=>{(0,r.useEffect)(()=>{a.k.persist.info({eventName:"boundary_auto_reload",meta:{from:e}}),sessionStorage.getItem(o)?a.k.persist.info({eventName:"boundary_auto_reload_failed",meta:{from:e}}):(i.FN.error({content:t("page_load_error_and_auto_refresh"),showClose:!1,theme:"light"}),setTimeout(()=>{try{sessionStorage.setItem(o,"1"),location.reload()}catch(t){a.k.persist.error({eventName:"boundary_auto_reload_catched",error:t,meta:{from:e}})}},1e3))},[])}},338212:function(e,t,n){n.d(t,{y:function(){return m},U:function(){return y}});var r,i=n(878533);let a="https?|s?ftp|ftps|nfs|ssh",o="\\b([/#?][\\-A-Z0-9@:%_+.~#?&'/=;$,!\\*\\[\\]\\(\\){}^|<>]*[-A-Z0-9&@#/%=~\\(\\)_|]?)?",l=RegExp(`((((${a})://)?(${/localhost(:[0-9]{2,5})?/.source}))|(((${a})://)(${/(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}(2[0-4][0-9]|25[0-5]|1[0-9]{2}|[1-9][0-9]|[0-9])(:[0-9]{2,5})?/.source})))${o}`,"gi"),s="([-A-Z0-9%_+~#@][\\-A-Z:0-9%_+~#@]{0,256}\\.){1,50}",u="[a-z\\-]{2,15}",c=RegExp(`(((${a}):\\/\\/${s}${u})|(${s}(com|cn|tk|de|net|org|uk|info|nl|ru|hk)))(:[0-9]{2,5})?${o}`,"gi"),d="[\\w.!#$%&'*+-/=?^_\\`{|}~]{1,2000}@[A-Za-z0-9_.-]+\\.",f=RegExp(`^(?!data:)((mailto:${d}${u})|(${d}(com|org|net|int|edu|gov|mil|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gh|gi|gl|gm|gn|gp|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|site|top|wtf|xxx|xyz|cloud|engineering|help|one)))\\b`,"gi"),p=RegExp(`(${l.source})|(${c.source})|(${f.source})`,"gi"),m=((r={})[r.text=0]="text",r[r.link=1]="link",r),v={"(":")","[":"]","{":"}","<":">"},h=Object.keys(v),g=Object.values(v),b=[".",",","!","?","'",":",";","@","#"],x=e=>{let t=-1,n=[];for(let r=0;r<e.length;++r){let i=e[r];if(h.includes(i))n.push({char:i,index:r});else if(g.includes(i)){if(n.length){let{char:e}=n[n.length-1];if(i===v[e])n.pop();else{({index:t}=n[0]);break}}else{t=r;break}}}for(n.length&&({index:t}=n[0]),-1===t&&(t=e.length);t>1&&b.includes(e[t-1]);)t--;return e.slice(0,t)},y=e=>{let t=[],n=0;for(p.lastIndex=0;;){let r=p.exec(e);if(!r)break;let{index:a,0:o}=r,l=e.slice(n,a);if(l&&t.push({type:m.text,text:l}),o){let e=/^(@|#|\+|-|%)+/.exec(o);if(e)t.push({type:m.text,text:e[0]}),n=r.index+e[0].length,p.lastIndex=n;else{let e=x(o);if(e)i.validate(e)?t.push({type:m.text,text:e}):t.push({type:m.link,url:e}),n=r.index+e.length,p.lastIndex=n;else{let e=o.slice(0,1);t.push({type:m.text,text:e}),n=r.index+e.length,p.lastIndex=n}}}}return n!==e.length&&t.push({type:m.text,text:e.slice(n)}),t}},28190:function(e,t,n){n.d(t,{C:function(){return r}});let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return new Promise((i,a)=>{e().then(i).catch(o=>{setTimeout(()=>{if(1===t){a(o);return}r(e,t-1,n).then(i,a)},n)})})}},997213:function(e,t,n){n.d(t,{$E:function(){return l},Cy:function(){return c},Dt:function(){return u},i1:function(){return o},kK:function(){return i},ww:function(){return s},xp:function(){return a}});var r=n(474227);let i=e=>"type"in e,a=e=>"paragraph"===e.type,o=e=>"labeled_input"===e.type,l=e=>"labeled_select"===e.type,s=e=>e.map(e=>{if(i(e)){if(l(e))return e.value;let{children:t}=e,n=t.map(e=>s([e])).join("");return a(e)?`${n}
`:n}return e.text}).join(""),u=()=>"undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),c=(e,t)=>(0,r.Z)(JSON.parse(JSON.stringify(e)),JSON.parse(JSON.stringify(t)))},12107:function(e,t,n){n.d(t,{I3:function(){return l},Iz:function(){return u},Z6:function(){return c},dz:function(){return o},on:function(){return s},yW:function(){return a}});var r=n(106307),i=n(997213);let a=e=>e.type===r.f.Select,o=e=>e.type===r.f.Text,l=e=>e.type===r.f.Placeholder,s=e=>e.map((t,n)=>{if((0,i.kK)(t)){if((0,i.xp)(t)){let{children:i}=t;return s(i).concat(n===e.length-1?[]:[{type:r.f.Text,text:"\n"}])}if((0,i.i1)(t)){let{children:e,placeholder:n,key:a,clickable:o}=t;return{type:r.f.Placeholder,placeholder:n,text:(0,i.ww)(e),key:a,clickable:o}}if((0,i.$E)(t)){let{value:e,options:n,title:i,key:a}=t;return{type:r.f.Select,title:i,key:a,optionList:n,value:e}}}return{type:r.f.Text,text:"text"in t?t.text:""}}).flat(),u=e=>{if(!e.length)return[{type:"paragraph",children:[{text:""}]}];let t=[{type:"paragraph",children:[]}];for(let n of e)if(n.type===r.f.Text&&"\n"===n.text)t.push({type:"paragraph",children:[]});else if(l(n)){let{text:e,placeholder:r,key:i,clickable:a}=n;t[t.length-1].children.push({type:"labeled_input",children:[{text:e}],placeholder:r,key:i,clickable:a})}else if(a(n)){let{optionList:e,value:r,title:i,key:a}=n;t[t.length-1].children.push({type:"labeled_select",title:i,key:a,options:e,value:r,children:[{text:""}]})}else if(o(n)){let{text:e}=n;t[t.length-1].children.push({text:e})}return t},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{stringifyItem:n}=t;return e.map(e=>{if(l(e))return e.text||e.placeholder;if(a(e)){var t;return null!==(t=null==n?void 0:n(e))&&void 0!==t?t:e.value}if(o(e))return e.text}).join("")}},862589:function(e,t,n){n.d(t,{D:function(){return s}});var r=n(429996),i=n(808414),a=n(720246),o=n(627394);window.ResizeObserver||(window.ResizeObserver=i.do);let l={offsetHeight:0,offsetWidth:0,height:0,width:0},s=e=>{let{children:t,onResize:n}=e,s=(0,r.useRef)(null),u=(0,r.useRef)(null),c=(0,a.i)(n),d=(0,r.useRef)();return(0,r.useLayoutEffect)(()=>{if(!c)return;let e=new i.do(e=>{let t=e.find(e=>e.target===s.current);if(!t)return;let{offsetWidth:n,offsetHeight:r}=t.target,{contentRect:{width:i,height:a},target:o}=t,l={width:i,height:a,offsetWidth:n,offsetHeight:r};null==c||c({current:l,previous:d.current,target:o,targetStandBy:u.current}),d.current=l});return s.current&&e.observe(s.current),()=>{s.current&&(null==c||c({current:l,previous:d.current,target:s.current,targetStandBy:u.current})),e.disconnect()}},[c]),(0,o.jsx)(o.Fragment,{children:t(s,u)})}},245867:function(e,t,n){n.d(t,{j:function(){return u}});var r=n(669160),i=n.n(r),a=n(910157),o=n(838303),l=n(627394),s={TEXT:1,URL:2};let u=e=>{let{jsonString:t,tips:n,isBlock:r}=e,u=null!=n?n:[];return(null==n?void 0:n.length)||!t||(u=(0,a.R)(t,[])),(0,l.jsx)(l.Fragment,{children:u.map(e=>{let{type:t,text:n,url:a}=e;return t===s.URL?(0,l.jsx)(o.r,{to:null!=a?a:"",target:"_blank",rel:"noopener noreferrer",className:i()("block px-4 text-[14px] leading-[22px] text-dbx-color-blue-600",{"mt-12":!r}),children:n}):t===s.TEXT?(0,l.jsx)("div",{className:i()("px-4 text-[14px] leading-[22px] text-dbx-text-tertiary",{"mt-12":!r}),children:n}):null})})}},105189:function(e,t,n){n.d(t,{R:function(){return o}});var r=n(429996),i=n(607278),a=n(627394);let o=(0,r.forwardRef)(function(e,t){let{className:n,style:o,children:l,enabled:s=!1,onClick:u,options:c}=e,d=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(s){var e;null===(e=d.current)||void 0===e||e.scrollIntoView(c)}},[s]);let f=(0,r.useCallback)(e=>{(0,i.Z)(t)?t(e):t&&(t.current=e),d.current=e},[]);return(0,i.Z)(l)?(0,a.jsx)(a.Fragment,{children:l(f)}):(0,a.jsx)("div",{ref:f,className:n,style:o,onClick:u,children:l})})},186326:function(e,t,n){n.d(t,{pf:function(){return S}});var r,i=n(429996),a=n(162063),o=n(607278),l=n(861431),s=n(669160),u=n.n(s),c=n(95788);let d=((r={}).Top="top",r.Bottom="bottom",r.Inner="inner",r);var f=n(577831);let p=()=>window.navigator.userAgent,m=e=>{if("undefined"==typeof window)return!1;let t=(0,f.vu)(e);if(!t)return!0;let{major:n}=t;return n>=83};var v={"scroll-view":"scroll-view-OEiNXD",before:"before-r3g_KU",after:"after-JU9dJg",content:"content-Xv_Zw0",scrollable:"scrollable-Se7zNt",reverse:"reverse-ZzkEud","disable-scroll":"disable-scroll-kmYrkh","show-scrollbar":"show-scrollbar-UJ9EoW","auto-show-scrollbar":"auto-show-scrollbar-oWvIcV","children-wrapper":"children-wrapper-NkFi7R"};let h=e=>{let{reverse:t,scrollStatusRef:n,onBeforeScroll:r,onAfterScroll:a}=e,o=m(p()),l=(0,i.useRef)(null),s=(0,i.useRef)(!1),u=(0,i.useRef)(0),c=()=>{let{current:e}=l;if(!e)throw Error("Not found ScrollView ref instance");return e},h=e=>{let n=c();return t?n.scrollHeight-n.offsetHeight+e:e},g=e=>{let n=c();return t?e-(n.scrollHeight-n.offsetHeight):e},b=e=>{let n=c();return(0,f.bH)()?t?Math.max(e,n.offsetHeight-n.scrollHeight+1):Math.min(e,n.scrollHeight-n.offsetHeight-1):e},x=()=>{let e=c();return t&&!o?e.scrollTop-(e.scrollHeight-e.offsetHeight):e.scrollTop},y=(e,n)=>{let i=c(),l=b(t&&!o?e+(i.scrollHeight-i.offsetHeight):e);null==r||r(),n?i.scrollTo({top:l,...n}):i.scrollTop=l,null==a||a()},_=(e,t)=>{if(!s.current)return y(g(e),t),new Promise(e=>{requestAnimationFrame(()=>{e()})})},S=async()=>{await _(0)},w=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{smooth:t=!1}=e,{scrollHeight:n,offsetHeight:r}=c();await _(h(n-r),{behavior:t?"smooth":void 0})},k=()=>{let{current:e}=l;if(!e)return 0;let{scrollHeight:n,offsetHeight:r}=e,i=x();return t?n-(r+-i):i},j=()=>{let{current:e}=l;return e?e.scrollHeight-k()-e.offsetHeight:0};return(0,i.useEffect)(()=>{var e,t;null===(e=l.current)||void 0===e||e.addEventListener("touchstart",()=>{s.current=!0}),null===(t=l.current)||void 0===t||t.addEventListener("touchend",()=>{s.current=!1})},[]),{ref:l,controller:{scrollTo:_,scrollToTop:S,scrollToBottom:w,getScrollTop:k,getScrollBottom:j,refreshAnchor:()=>{!(u.current>0)&&((null==n?void 0:n.current)===d.Top?S():(null==n?void 0:n.current)===d.Bottom&&w())},disableScroll:e=>{var t;s.current=!0,null===(t=l.current)||void 0===t||t.classList.add(e||v["disable-scroll"]),y(x()-1)},enableScroll:e=>{var t;s.current=!1,null===(t=l.current)||void 0===t||t.classList.remove(e||v["disable-scroll"])},isNearBottom:e=>j()<=e,getContainerHeight:()=>c().offsetHeight,getContainer:c,pauseScrollAnchoring:()=>(u.current+=1,()=>{u.current=Math.max(0,u.current-1)}),isScrollAnchoringPaused:()=>u.current>0}}},g=e=>{let{enable:t=!0,controller:n}=e;return{handleResize:e=>{let{current:{offsetHeight:r},previous:i}=e;if(!t)return;let a=n.getScrollBottom(),{offsetHeight:o}=null!=i?i:{};if(o)!(a>=10+(r-o))&&n.scrollToBottom()}}};var b=n(179246),x=n(496789),y=n(862589),_=n(627394);let S=(0,i.forwardRef)(function(e,t){let{style:n,className:r,children:s,scrollableClassName:f,childrenWrapperClassName:p,before:m,after:S,innerBefore:w,reverse:k=!1,reachTopThreshold:j,onReachTop:M,onLeaveTop:C,reachBottomThreshold:I,onReachBottom:T,onLeaveBottom:E,onContentResize:N,showScrollbar:R,autoShowScrollbar:B,onScroll:O,bottomAttaching:A=!1,...L}=e,P=k?d.Bottom:d.Top,F=(0,i.useRef)(P),Z=(0,i.useRef)(!1),{ref:D,controller:W}=h({reverse:k,scrollStatusRef:F,onBeforeScroll:()=>{Z.current=!0}}),{getScrollTop:z,getScrollBottom:U}=W,V=(0,i.useRef)(!1),$=(0,i.useRef)(!1),{onScroll:H}=(0,b.s)({onVisibleChange:e=>{D.current&&(e?D.current.classList.add(c.Z["show-scrollbar-thumb"]):D.current.classList.remove(c.Z["show-scrollbar-thumb"]))}});(0,i.useImperativeHandle)(t,()=>W,[W]);let G=(0,i.useMemo)(()=>(0,a.Z)(e=>{F.current=e},100),[]),K=e=>{let t=Z.current;if(Z.current=!1,!e.currentTarget)return;null==O||O(e);let{offsetHeight:n}=e.currentTarget;z()<(null!=j?j:n)?V.current||(V.current=!0,null==M||M()):V.current&&(V.current=!1,null==C||C()),U()<(null!=I?I:n)?$.current||($.current=!0,null==T||T()):$.current&&($.current=!1,null==E||E()),F.current=d.Inner,0>=z()&&0>=U()?G(P):0>=z()?G(d.Top):0>=U()?G(d.Bottom):G(d.Inner),t||H()},{handleResize:Q}=g({controller:W,enable:!k&&A}),X=()=>{let e=(0,o.Z)(s)?s(W):s;return k?e:(0,_.jsx)(y.D,{onResize:Q,children:t=>(0,_.jsx)("div",{ref:t,className:u()(v["children-wrapper"],"children-wrapper",p),children:e})})};return(0,_.jsx)(x.E,{containerRef:D,controller:W,children:(0,_.jsxs)("div",{"data-testid":"scroll_view",className:u()(v["scroll-view"],r),style:n,children:[m&&(0,_.jsx)("div",{className:u()(v.before),children:(0,o.Z)(m)?null==m?void 0:m(W):m}),(0,_.jsx)(y.D,{onResize:N,children:e=>(0,_.jsx)("div",{ref:e,className:u()(v.content),children:(0,_.jsxs)("div",{ref:D,className:u()(v.scrollable,f,{[v.reverse]:k,[v["show-scrollbar"]]:R,[v["auto-show-scrollbar"]]:B}),onScroll:K,...(0,l.Z)(L,"data-testid"),children:[X(),w&&(0,_.jsx)("div",{className:u()(v.before),children:(0,o.Z)(w)?null==w?void 0:w(W):w})]})})}),S&&(0,_.jsx)("div",{className:u()(v.after),children:(0,o.Z)(S)?null==S?void 0:S(W):S})]})})})},496789:function(e,t,n){n.d(t,{E:function(){return l},l:function(){return s}});var r=n(429996),i=n(350685),a=n(627394);let o=(0,r.createContext)(null),l=e=>{let{containerRef:t,controller:n,children:r}=e,{width:l,height:s}=(0,i.y)({ref:t});return(0,a.jsx)(o.Provider,{value:{ref:t,width:l,height:s,...n},children:r})},s=()=>{let e=(0,r.useContext)(o);if(!e)throw Error("require ScrollViewContext when calling useScrollView");return e}},179246:function(e,t,n){n.d(t,{D:function(){return l},s:function(){return s}});var r=n(429996),i=n(162063),a=n(640078),o=n(95788);let l=()=>{let[e,t]=(0,r.useState)(!1),n=(0,r.useMemo)(()=>(0,i.Z)(()=>t(!1),300,{leading:!1,trailing:!0}),[]),a=(0,r.useCallback)(()=>{e||t(!0),n()},[e]);return{className:e?o.Z["show-scrollbar-thumb"]:"",onScroll:a}},s=e=>{let{onVisibleChange:t}=e,n=(0,r.useRef)(!1),i=e=>{e!==n.current&&(n.current=e,null==t||t(e))},{run:o}=(0,a.Z)(()=>{i(!1)},{wait:300,leading:!1,trailing:!0});return{onScroll:()=>{n.current||i(!0),o()}}}},723998:function(e,t,n){n.d(t,{w:function(){return r}}),n(627394);let r=()=>null},851228:function(e,t,n){n.d(t,{OT:function(){return a},yy:function(){return r}});let r=((i={}).Reviewing="reviewing",i.Ban="ban",i.Delete="delete",i.Private="private",i.Rollback="rollback",i);var i,a={Compose:"compose",Reply:"reply"}},965944:function(e,t,n){n.d(t,{ce:function(){return l}});var r=n(429996),i=n(814986);let a=(0,r.createContext)({viewId:0,reportCollectContentCard:i.Z,reportFilteringOptionsShow:i.Z,reportFilteringOptionsClick:i.Z});a.Provider;let o=(0,r.createContext)({});o.Provider;let l=()=>{let e=(0,r.useContext)(a),t=(0,r.useContext)(o);return{...e,...t}}},316820:function(e,t,n){n.d(t,{J:function(){return g},A:function(){return h}});var r=n(429996),i=n(210230),a=n(51679),o=n(499050),l=n(46499);let s=/^https:\/\/(www\.)?arxiv\.org\/pdf\/.+$/i,u=e=>{let t=(0,l.P)(e);return s.test(t)},c=e=>/^https:\/\/.*\.pdf$/i.test(e),d=e=>u(e)||c(e),f=new Map,p=new Map,m=e=>f.get(e),v=async e=>{let t=p.get(e);if(t)return t;let n=0,r=async()=>{try{var t,o,l;let n=await a.mH.SniffUrl({urls:[e]}),r=null===(l=n.data)||void 0===l?void 0:null===(o=l.results)||void 0===o?void 0:null===(t=o.find(t=>t.url===e))||void 0===t?void 0:t.ContentType;if((0,i.Z)(r)||!r)throw Error("Invalid Response.");return/^application\/pdf\b/.test(r)}catch(e){if(n>1)return!1;return n++,await r()}},o=r();p.set(e,o);let l=await o;return f.set(e,l),p.delete(e),l},h=e=>{e=(0,l.P)(e);let[t,n]=(0,r.useState)(0),i=()=>{n(t+1)},a=!!(e&&(0,o.jv)(e,{allowedProtocols:["https:"]}))&&m(e);return void 0===a?(v(e).then(()=>{i()}),d(e)):a},g=async e=>{let t=(0,o.jv)(e,{allowedProtocols:["https:"]})&&m(e);return void 0!==t?t:t=await v(e)}},143312:function(e,t,n){n.d(t,{S:function(){return r}});let r=!1},557735:function(e,t,n){n.d(t,{C3:function(){return a},Uw:function(){return o},nb:function(){return i}});var r=n(829619);let i=e=>{if(e)return({[r.M.GUIDANCE_PAGE]:"landing",[r.M.GUIDANCE_SUGGESTIONS]:"input_bar_entrance",[r.M.SIDEBAR]:"sidebar_skill",[r.M.DEFAULT]:"direct_enter",[r.M.NEW_USER_TASK]:"new_user_task",[r.M.CHAT_ACTION_BAR]:"chat_action_bar"})[e]},a=e=>{if(e)return({[r.M.GUIDANCE_PAGE]:"landing",[r.M.GUIDANCE_SUGGESTIONS]:"landing",[r.M.SIDEBAR]:"sidebar_skill",[r.M.DEFAULT]:"direct_enter",[r.M.NEW_USER_TASK]:"new_user_task",[r.M.CHAT_ACTION_BAR]:"chat_action_bar"})[e]},o=e=>{if(e)return({[r.M.GUIDANCE_PAGE]:"chat_action_bar_landing",[r.M.GUIDANCE_SUGGESTIONS]:"chat_action_bar_landing",[r.M.SIDEBAR]:"sidebar_skill_click",[r.M.DEFAULT]:"direct_enter",[r.M.NEW_USER_TASK]:"new_user_task",[r.M.CHAT_ACTION_BAR]:"chat_action_bar_click"})[e]}},653019:function(e,t,n){n.d(t,{RL:function(){return s},UG:function(){return l},nC:function(){return o},p4:function(){return u},vO:function(){return c}});var r=n(93708),i=n(12107),a=n(106307);let o=()=>(0,r.sQ)("chatInputStore",e=>e.editorValue),l=()=>(0,r.sQ)("chatInputStore",e=>(0,i.Z6)(e.editorValue.data)),s=e=>(0,r.GX)("chatInputStore").setEditorValue(e),u=e=>{let t={data:[{type:a.f.Text,text:e}]};return(0,r.GX)("chatInputStore").setEditorValue(t)},c=()=>(0,r.GX)("chatInputStore").setEditorValue({data:[{type:a.f.Text,text:""}]})},190831:function(e,t,n){n.d(t,{Lv:function(){return u},UC:function(){return c},W2:function(){return f},ZO:function(){return d}});var r=n(429996),i=n(986091),a=n(474227),o=n(93708),l=n(543281),s=n(851510);let u=(e,t)=>{let n=e.refContentMap[t];if(!(!n||(0,i.Z)(n.refContents)))return n},c=e=>{let t=(0,o.sQ)("refContentStore",t=>u(t,e),a.Z),n=(0,o.sQ)("attachmentUploadStore",e=>e.preprocessTaskMap,a.Z);return(0,r.useMemo)(()=>{if(!t||(0,i.Z)(t.refContents))return;let e=t.refContents.filter(e=>{if("attachment"!==e.type)return!0;for(let t in n)if(n[t].key===e.fileKey)return n[t].reviewState!==l.m9.ReviewState_NotCompliant;return!0});return{...t,refContents:e}},[t,n])},d=e=>{let t=c(e);return(0,r.useMemo)(()=>({...t,refContents:(null==t?void 0:t.refContents)?(0,s._c)(t.refContents):void 0}),[t])},f=e=>!!(0,o.GX)("attachmentUploadStore").preprocessTaskMap[e]},562502:function(e,t,n){n.d(t,{b:function(){return r}});let r=e=>e.map(e=>e.toString()).filter(e=>!e.includes("infra:"))},613716:function(e,t,n){n.d(t,{Po:function(){return S},SQ:function(){return g},aP:function(){return w},dN:function(){return _},ff:function(){return y},fz:function(){return v},lE:function(){return h},mD:function(){return x},ob:function(){return b}});var r=n(429996),i=n(411358),a=n(669384),o=n(126628),l=n(708481),s=n(644367),u=n(562502),c=n(627394);let d=e=>{let{pluginIdentifier:t,contentBlock:n,pluginLoadCounter:a,duplicateIdentifierList:o,...u}=e,{plugin:d,loading:f,error:p}=(0,l.GG)(t),m=(0,r.useMemo)(()=>(0,i.Z)(),[t]);if((0,r.useEffect)(()=>{null==a||a(m,f)},[f]),(0,r.useEffect)(()=>(null==a||a(m,f),()=>{null==a||a(m,!1)}),[m]),p)throw p;if(f)return null;if(o.length>1){let e=Error(`${o.join(", ")}`);s.k.persist.warning({eventName:"duplicate_matcher_of_receive_message_block",error:e})}return d?(0,c.jsx)(d.Content,{contentBlock:n,...u},n.id):null},f=e=>{let{pluginIdentifier:t,contentBlock:n,pluginLoadCounter:a,...o}=e,{plugin:s,loading:u,error:d}=(0,l.RG)(t),f=(0,r.useMemo)(()=>(0,i.Z)(),[t]);if((0,r.useEffect)(()=>{null==a||a(f,u)},[u]),(0,r.useEffect)(()=>(null==a||a(f,u),()=>{null==a||a(f,!1)}),[f]),d)throw d;return u?null:s?(0,c.jsx)(s.Content,{contentBlock:n,...o},n.id):null},p=(e,t)=>{let{matcher:n}=(0,o.WO)();return{contentBlockRenderConfigs:e.filter(t).map(e=>{var t;let r=null==n?void 0:null===(t=n.filter(t=>{var n;return t.matchContentBlock(e.block_type,{resourceType:null===(n=e.content_obj)||void 0===n?void 0:n.resource_type})}))||void 0===t?void 0:t.map(e=>e.pluginIdentifier);if(r)return{block:e,pluginIdentifier:r[0],duplicateIdentifierList:r}}).filter(e=>!!e).map(e=>({block:e.block,pluginIdentifier:e.pluginIdentifier,PluginContentRender:d,duplicateIdentifierList:e.duplicateIdentifierList}))}},m=(e,t)=>{let{matcher:n}=(0,o.zi)();return{contentBlockRenderConfigs:e.filter(t).map(e=>{var t;let r=null==n?void 0:null===(t=n.filter(t=>{var n;return t.matchContentBlock(e.block_type,{resourceType:null===(n=e.content_obj)||void 0===n?void 0:n.resource_type})}))||void 0===t?void 0:t.map(e=>e.pluginIdentifier);if(r)return{block:e,pluginIdentifier:r[0],duplicateIdentifierList:r}}).filter(e=>!!e).map(e=>({block:e.block,pluginIdentifier:e.pluginIdentifier,PluginContentRender:f,duplicateIdentifierList:e.duplicateIdentifierList}))}},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return p(e,e=>e.block_type===a.zc.SamanthaSuggest)},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return p(e,e=>e.block_type!==a.zc.SamanthaSuggest)},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return m(e,e=>e.block_type!==a.zc.SamanthaSuggest)},b=e=>{let{matcher:t}=(0,o.qd)(),n=(null!=t?t:[]).map(t=>t.matchPlugin(e)?t.pluginIdentifier:void 0).filter(e=>void 0!==e),a=n[0],s=(0,r.useMemo)(()=>(0,i.Z)(),[a]),c=(0,u.b)(n),{plugin:d,loading:f,error:p}=(0,l.PM)(null!=a?a:"");if(p)throw p;return{pluginLoadId:s,plugin:d,pluginIdentifier:a,loading:f,duplicateIdentifierList:c}},x=e=>{let{matcher:t}=(0,o.tK)(),n=(null!=t?t:[]).map(t=>t.matchPlugin(e)?t.pluginIdentifier:void 0).filter(e=>void 0!==e),a=n[0],s=(0,r.useMemo)(()=>(0,i.Z)(),[a]),c=(0,u.b)(n),{plugin:d,loading:f,error:p}=(0,l.n)(null!=a?a:"");if(p)throw p;return{pluginLoadId:s,plugin:d,pluginIdentifier:a,loading:f,duplicateIdentifierList:c}},y=e=>{let{matcher:t=[]}=(0,o.WF)(),n=(null!=t?t:[]).map(t=>t.matchPlugin(e)?t.pluginIdentifier:void 0).filter(e=>void 0!==e),r=n[0],i=(0,u.b)(n),{plugin:a,loading:s}=(0,l.sx)(r);return{plugin:a,pluginIdentifier:r,loading:s,duplicateIdentifierList:i}},_=e=>{let{matcher:t=[]}=(0,o.sk)(),n=(null!=t?t:[]).map(t=>t.matchPlugin(e)?t.pluginIdentifier:void 0).filter(e=>void 0!==e),r=n[0],i=(0,u.b)(n),{plugin:a,loading:s}=(0,l.CD)(r);return{plugin:a,pluginIdentifier:r,loading:s,duplicateIdentifierList:i}},S=e=>{let{matcher:t=[]}=(0,o.mn)(),n=(null!=t?t:[]).map(t=>t.matchPlugin(e)?t.pluginIdentifier:void 0).filter(e=>void 0!==e),r=n[0],i=(0,u.b)(n),{plugin:a,loading:s}=(0,l.aI)(r);return{plugin:a,pluginIdentifier:r,loading:s,duplicateIdentifierList:i}},w=e=>{let{matcher:t=[]}=(0,o.p5)(),n=(null!=t?t:[]).map(t=>t.matchPlugin(e)?t.pluginIdentifier:void 0).filter(e=>void 0!==e),r=n[0],i=(0,u.b)(n),{plugin:a,loading:s}=(0,l.EF)(r);return{plugin:a,pluginIdentifier:r,loading:s,duplicateIdentifierList:i}}},536957:function(e,t,n){n.d(t,{JL:function(){return u},Nh:function(){return f},PU:function(){return c},Pf:function(){return s},X0:function(){return d},zu:function(){return p}});var r=n(429996),i=n(411358),a=n(126628),o=n(708481),l=n(562502);let s=e=>{let{matcher:t}=(0,a.dW)(),n=(null!=t?t:[]).map(t=>t.matchPlugin(e)?t.pluginIdentifier:void 0).filter(e=>void 0!==e),s=n[0],u=(0,r.useMemo)(()=>(0,i.Z)(),[s]),c=(0,l.b)(n),{plugin:d,loading:f,error:p}=(0,o.GM)(null!=s?s:"");if(p)throw p;return{pluginLoadId:u,plugin:d,pluginIdentifier:s,loading:f,duplicateIdentifierList:c}},u=e=>{let{matcher:t}=(0,a.MW)(),n=(null!=t?t:[]).map(t=>t.matchPlugin(e)?t.pluginIdentifier:void 0).filter(e=>void 0!==e),s=n[0],u=(0,r.useMemo)(()=>(0,i.Z)(),[s]),c=(0,l.b)(n),{plugin:d,loading:f,error:p}=(0,o.nR)(null!=s?s:"");if(p)throw p;return{pluginLoadId:u,plugin:d,pluginIdentifier:s,loading:f,duplicateIdentifierList:c}},c=e=>{let{matcher:t}=(0,a._c)(),n=(null!=t?t:[]).map(t=>t.matchPlugin(e)?t.pluginIdentifier:void 0).filter(e=>void 0!==e),r=n[0],i=(0,l.b)(n),{plugin:s,loading:u}=(0,o.n2)(null!=r?r:"");return{plugin:s,pluginIdentifier:r,loading:u,duplicateIdentifierList:i}},d=e=>{let{matcher:t}=(0,a.iJ)(),n=(null!=t?t:[]).map(t=>t.matchPlugin(e)?t.pluginIdentifier:void 0).filter(e=>void 0!==e),r=n[0],i=(0,l.b)(n),{plugin:s,loading:u}=(0,o.iW)(null!=r?r:"");return{plugin:s,pluginIdentifier:r,loading:u,duplicateIdentifierList:i}},f=e=>{let{matcher:t}=(0,a.O$)(),n=(null!=t?t:[]).map(t=>t.matchPlugin(e)?t.pluginIdentifier:void 0).filter(e=>void 0!==e),r=n[0],i=(0,l.b)(n),{plugin:s,loading:u}=(0,o.ag)(null!=r?r:"");return{plugin:s,pluginIdentifier:r,loading:u,duplicateIdentifierList:i}},p=e=>{let{matcher:t}=(0,a.w5)(),n=(null!=t?t:[]).map(t=>t.matchPlugin(e)?t.pluginIdentifier:void 0).filter(e=>void 0!==e),r=n[0],i=(0,l.b)(n),{plugin:s,loading:u}=(0,o.Vo)(null!=r?r:"");return{plugin:s,pluginIdentifier:r,loading:u,duplicateIdentifierList:i}}},775265:function(e,t,n){n.d(t,{T5:function(){return s},rP:function(){return f},wG:function(){return d}});var r=n(669384),i=n(41359),a=n(455746),o=n(317774),l=n(972640);let s=e=>{var t,n;return(null==e?void 0:e.content_type)===r.zc.SamanthaAiPodcastOutput||(null==e?void 0:e.content_type)===a.ContentType.Widget&&(null===(t=e.content_obj)||void 0===t?void 0:t.applet_id)===i.K1.Podcast&&(null===(n=e.content_obj)||void 0===n?void 0:n.widget_id)===i.W7.AIPodcast},u=e=>{if(!s(e))return;let t=null==e?void 0:e.content_obj,n=l.Y.parse(null==t?void 0:t.widget_data);return l.Y.parse(null==n?void 0:n.data)},c=e=>{var t,n,r;let i=null==e?void 0:null===(n=e.episodeList)||void 0===n?void 0:null===(t=n.episodes)||void 0===t?void 0:t[0];return(null==i?void 0:null===(r=i.meta)||void 0===r?void 0:r.protocol)===o.b.Normal},d=e=>c(u(e)),f=e=>{let t=u(e);return c(t)?null==t?void 0:t.waiting_reply:void 0}},829619:function(e,t,n){n.d(t,{M:function(){return r}});var r={GUIDANCE_PAGE:"guidance_page",SIDEBAR:"sidebar",DEFAULT:"default",NEW_USER_TASK:"new_user_task",GUIDANCE_SUGGESTIONS:"guidance_suggestions",CHAT_ACTION_BAR:"chat_action_bar"}},875160:function(e,t,n){n.d(t,{dT:function(){return u},wV:function(){return s}});var r=n(429996),i=n(999132),a=n(424166),o=n(644367);let l=e=>{let{eventName:t,interval:n}=e,l=(0,r.useRef)([]),s=(0,i.Z)(e=>{l.current.length>=120&&l.current.shift(),l.current.push(e)}),{start:u,stop:c}=(0,a.Z)({interval:n,onChange:s});return{startRecord:(0,i.Z)(()=>{l.current=[],u()}),reportFPS:(0,i.Z)(e=>{c();let n=l.current;if(n.length<1)return;let r=Math.round(n.reduce((e,t)=>e+t,0)/n.length),i=n.reduce((e,t)=>(t<20&&e++,e),0)>=3,a=n.reduce((e,t)=>(t<10&&e++,e),0)>=3,s=n.reduce((e,t)=>(t<3&&e++,e),0)>=3;o.k.persist.info({eventName:t,meta:{fps_list:n,avg_fps:r,is_minor_stuck:i,is_major_stuck:a,is_critical_stuck:s,...e}})})}},s=e=>{let{eventName:t}=e,n=(0,r.useRef)(!1),i=(0,r.useRef)(),{startRecord:a,reportFPS:s}=l({eventName:t}),u=e=>{i.current=setTimeout(()=>{s(e),n.current=!1},5e3)};return{onScrollForFPS:e=>{n.current?clearTimeout(i.current):(o.k.persist.info({eventName:t,meta:{...e,type:"start"}}),n.current=!0,a()),u(e)}}},u=e=>{let{eventName:t}=e,{startRecord:n,reportFPS:i}=l({eventName:t}),a=(0,r.useRef)(!1);return{startFPSRecord:()=>{a.current||(a.current=!0,n())},stopFPSRecord:e=>{a.current=!1,i(e)}}}},2445:function(e,t,n){n.d(t,{J:function(){return a},b:function(){return i}});var r=n(238e3);let i=(e,t)=>{r.x.setState(n=>{var r;let i=null!==(r=n.sendMessagePerformance[e])&&void 0!==r?r:{};return{sendMessagePerformance:{...n.sendMessagePerformance,[e]:{...i,...t}}}})},a=(e,t)=>{r.x.setState(n=>{var r;let i=null!==(r=n.receiveMessagePerformance[e])&&void 0!==r?r:{};return{receiveMessagePerformance:{...n.receiveMessagePerformance,[e]:{...i,...t}}}})}},238e3:function(e,t,n){n.d(t,{x:function(){return o}});var r=n(98490),i=n(293067);let a=()=>({sendMessagePerformance:{},receiveMessagePerformance:{}}),o=(()=>{let e=(0,r.XR)(a);return(0,i.Ue)()(e)})()},980402:function(e,t,n){n.d(t,{r:function(){return u},y:function(){return c}});var r=n(162063),i=n(644367),a=n(468494),o=n(322639),l=n(558882);let s={};async function u(e,t,n){a.useFeedStore.getState().updateConversationMessageIndex({conversationId:e,messageIndex:n,readMessageIndex:t,badgeCount:n,readBadgeCount:t}),await d(e)(t)}function c(e,t,n){if(n===e){u(e,t,t);return}let r=a.useFeedStore.getState().conversationMap[e];if(!n&&(0,o.kJ)(r)){u(e,t,t);return}a.useFeedStore.getState().updateConversationMessageIndex({conversationId:e,messageIndex:t,badgeCount:t})}let d=e=>(s[e]||(s[e]=(0,r.Z)(async t=>{try{return(await (0,l.E)()).markConversationRead({conversation_id:e,latest_read_idx:t})}catch(e){i.k.persist.error({message:"report conversation read index failed",error:e})}},500)),s[e])},205379:function(e,t,n){n.d(t,{zU:function(){return i}});var r=n(468494);function i(e){let{localConversationMap:t}=r.useFeedStore.getState();return e in t}},546336:function(e,t,n){n.d(t,{V:function(){return c}});var r=n(429996),i=n(344482),a=n(375292),o=n(444614);let l=e=>{let t=(0,r.useRef)(),n=()=>{t.current&&(clearTimeout(t.current),t.current=null)};return(0,r.useEffect)(()=>n,[]),{setExpired:r=>{if(n(),(0,o.Z)(r))return;let i=Math.max(r-Date.now(),0);t.current=window.setTimeout(()=>{e()},i)},reset:n}};var s=n(530836);let u=()=>{let{limitExpired:e,limitTips:t,isLimited:n}=(0,s.useMessageStore)(e=>e.rateLimitConfig,i.X);(0,r.useEffect)(()=>{a(e)},[e]);let{setExpired:a}=l(()=>{s.useMessageStore.getState().updateRateLimitConfig({isLimited:!1,limitExpired:void 0,limitTips:""})});return{limitTips:t,isLimited:n}},c=()=>{let{conversationDisabledParams:e}=(0,a.R)({optionalProvider:!0}),{isLimited:t,limitTips:n}=u();return(null==e?void 0:e.isDisabled)?{...e}:{disabledText:t?n:void 0,isDisabled:!!t}}},949377:function(e,t,n){n.d(t,{V:function(){return s},q:function(){return u}});var r=n(414817),i=n(644367),a=n(967037),o=n(744947),l=n(530836);let s=e=>{let{sendMessage:t,message:n,customPayload:a}=e;return()=>{if(!n)return;let e={conversation_id:n.conversation_id||n.local_conversation_id,message_id:(null==n?void 0:n.message_id)||n.local_message_id,is_local_message:(0,r.H)(n)};i.k.persist.info({eventName:"retry_send_message_start",meta:e});try{t([{conversationId:n.conversation_id||n.local_conversation_id,reportParams:{scene:"resend"},operation:{resend:{messageLink:{messageId:n.message_id||n.local_message_id||"",isLocalMessage:(0,r.H)(n)}}},...a}])}catch(t){i.k.persist.error({eventName:"retry_send_message_failed",meta:e,error:t})}}},u=e=>{let{sendMessage:t,message:n}=e;return()=>{if(!n)return;let e=(0,a.zQ)({eventName:"retry_receive_message",meta:{conversation_id:n.conversation_id,reply_id:null==n?void 0:n.reply_id,message_id:null==n?void 0:n.message_id}}),{reply_id:r}=n||{};if(!r){e.error({reason:"reply_id is null, retry failed"});return}let i={isLocalMessage:!1,messageId:r},s=(0,o.K9)(l.useMessageStore.getState(),n.conversation_id||"",i);try{t([{conversationId:n.conversation_id,operation:{replace:{messageLink:i}},reportParams:{scene:"resend"}}]),e.successIfIdle(3e3)}catch(t){e.error({reason:"send message happen error, retry failed",error:t,meta:{content_type:null==s?void 0:s.content_type,is_local_message:null==i?void 0:i.isLocalMessage}})}}}},561965:function(e,t,n){n.d(t,{kD:function(){return j},tC:function(){return I},BR:function(){return N},UD:function(){return k},UQ:function(){return E},Sd:function(){return x},Yc:function(){return y},BF:function(){return S},rM:function(){return M},rw:function(){return C},gr:function(){return T},aZ:function(){return _},pF:function(){return w}});var r=n(429996),i=n(344482),a=n(627426),o=n(474227),l=n(444614),s=n(148824),u=n(228535),c=n(468494),d=n(900789),f=n(640078),p=n(844108),m=n(530836);let v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.X,n=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(0,m.useMessageStore)(t=>e(t,...r),t)};return n.raw=e,n};var h=n(744947),g=n(63746),b=n(436462);let x=v(h.Hd);v(h.Sm);let y=v(h.C7),_=(e,t)=>{let{updateMessageFeedbackStore:n}=m.useMessageStore.getState(),{liked:i,disliked:s,detail:u,remoteFeedbackType:c,localFeedbackType:f}=(0,m.useMessageStore)(n=>{var r,i;let{feedback:o}=null!==(i=(0,h.K9)(n,e,{isLocalMessage:!1,messageId:t}))&&void 0!==i?i:{},l=null===(r=n.messageFeedbackMap[e])||void 0===r?void 0:r[t],s=(0,a.Z)({...l},{feedback_type:o});return{liked:s.feedback_type===d.nw.Like,disliked:s.feedback_type===d.nw.Unlike,detail:s,remoteFeedbackType:o,localFeedbackType:null==l?void 0:l.feedback_type}},o.Z);return(0,r.useEffect)(()=>{(0,l.Z)(c)||f===c||n({conversationId:e,messageId:t,detail:{feedback_type:c}})},[c]),{liked:i,disliked:s,detail:u}},S=v((e,t)=>e.messageMap[t]||{}),w=v((e,t)=>e.localMessageMap[t]||{}),k=v((e,t,n)=>{var r;if(n)return null===(r=(n.isLocalMessage?e.localMessageMap:e.messageMap)[t])||void 0===r?void 0:r[n.messageId]});v((e,t,n)=>{let r=(0,g.Wi)((0,g.xg)(e,t)),i=[];for(let e of n){let t=r(e);t&&i.push(t)}return i}),v((e,t,n)=>{var r;return n?null===(r=e.localMessageMap[t])||void 0===r?void 0:r[n]:void 0});let j=v((e,t)=>{var n,r;let i=t.conversation_id||"",{regenerateMessageMap:{[i]:a},messageLinkMap:{[i]:o},messageMap:{[i]:l}}=e,c=(()=>{if(!(null==t?void 0:t.reply_id)||!(0,s.bf)(t))return;let n=(0,g.Wi)({localMessageMap:e.localMessageMap[i],messageMap:e.messageMap[i]});return(0,u.qP0)(t)?(0,b.$n)({messageLinks:o,replyId:t.reply_id,getMessage:n}):null==o?void 0:o.filter(e=>{var r;return(null===(r=n(e))||void 0===r?void 0:r.reply_id)===t.reply_id})})(),d=null==t?void 0:t.reply_id,f=t.message_id||"";return{activeRegenerateMessage:(null==c?void 0:c.length)?null==a?void 0:null===(n=a.messageMap)||void 0===n?void 0:n[f]:void 0,regenerateActiveIndex:null==c?void 0:c.findIndex(e=>{let{messageId:n}=e;return n===t.message_id}),isRegenerateTail:(null==c?void 0:null===(r=c[c.length-1])||void 0===r?void 0:r.messageId)===t.message_id,regenerateMessageLinks:c,replyFromMessage:d&&(null==l?void 0:l[d])||void 0}}),M=v((e,t,n)=>{let r=e.suggestMessageMap[t];return(null==r?void 0:r.replyId)===n?r:void 0}),C=()=>(0,c.useFeedStore)(e=>t=>{(0,p.D)(m.useMessageStore,t||""),e.clearContext(t)},i.X),I=v((e,t)=>e.lastMessageMap[t]),T=(e,t)=>{try{let n=e.messageLinkMap[t],r=n[n.length-1];if(!r)return!0;let i=e.messageMap[t][r.messageId];if(!i)return!0;return!(0,s.zu)(i)}catch(e){return!0}},E=v(T),N=(e,t)=>{let{hasPreprocessTask:n,isLoggedIn:i}=t,{loadMoreMessageList:a}=m.useMessageStore.getState(),o=(0,r.useCallback)(()=>{var t;(null===(t=m.useMessageStore.getState().messageListStatusMap[e])||void 0===t?void 0:t.hasMore)&&a(e,!i,n)},[e,n,i]),{run:l}=(0,f.Z)(o,{trailing:!1,leading:!0,wait:2e3});return{loadMore:l}}},335146:function(e,t,n){n.d(t,{S0:function(){return l}});var r=n(613993),i=n(231462),a=n(561200);let o={batchDownloadSelected:!1,isAllSelectChecked:!1,selectedImageUrlWithMessageList:[]},l=(0,i.Ue)()((0,r.XR)((e,t)=>({...o,onUpdateBatchDownloadSelected:t=>{e((0,a.Uy)(e=>{e.batchDownloadSelected=t}))},onUpdateAllSelectChecked:t=>{e((0,a.Uy)(e=>{e.isAllSelectChecked=t}))},toggleImageUrl:(n,r)=>{let i=t().selectedImageUrlWithMessageList;e({selectedImageUrlWithMessageList:i.map(e=>e.url).includes(n)?i.filter(e=>e.url!==n):[...i,{url:n,message:r}]})},clearSelectedImageUrl:()=>{e((0,a.Uy)(e=>{e.selectedImageUrlWithMessageList=[]}))},checkAllImage:t=>{e((0,a.Uy)(e=>{e.selectedImageUrlWithMessageList=t}))}})))},840250:function(e,t,n){n.d(t,{v:function(){return i}});var r=n(468494);let i=e=>{var t;return(null===(t=r.useFeedStore.getState())||void 0===t?void 0:t.lastSectionIdMap[e.conversation_id||""])===e.section_id}},475434:function(e,t,n){n.d(t,{p:function(){return S}});var r=n(613993),i=n(231462),a=n(316649),o=n(810197),l=n(69345),s=n(87548),u=n(672697),c=n(669384),d=n(228535),f=n(775265),p=n(93708),m=n(729813),v=n(666396),h=n(455746),g=n(120012),b=n(644367),x=n(436462),y=n(744947);let _=[h.ContentType.Text,h.ContentType.Music,h.ContentType.Video,h.ContentType.Image,h.ContentType.File,h.ContentType.PluginSearchResult,h.ContentType.Composite,h.ContentType.Nested,h.ContentType.CopilotCard,h.ContentType.LyricsToSongMusic,h.ContentType.LyricsToSongLyric,h.ContentType.LyricsToSongsMusic,h.ContentType.PagesCard,h.ContentType.Outline,c.zc.SamanthaText,c.zc.SamanthaMusic,c.zc.SamanthaImageOutput,c.zc.SamanthaSearchCard,c.zc.SamanthaMusicGenOutput,c.zc.SamanthaSearchText,c.zc.SamanthaCodeAssistantInput,c.zc.SamanthaCodeAssistantOutput,c.zc.SamanthaVideoGenerationInput,c.zc.SamanthaVideoGenerationOutput,c.zc.SamanthaWriteArtifactOutput,c.zc.SamanthaWriteOutlineOutput,c.zc.SamanthaWritePagesCardOutput,c.zc.SamanthaBlockSuperTask,c.zc.SamanthaWritingGenerateInput],S=(0,i.Ue)()((0,r.XR)((e,t)=>({scene:void 0,isSelectMode:!1,messageIndexList:[],contentTypeWhiteListInitialized:!1,contentTypeWhiteList:_,preShareId:"",shareToken:"",preMessageIndexList:[],preShareType:g.yw.All,preShareVisibility:g.M7.Default,shareType:g.yw.All,shareActionPosition:"dropdown",shareTitle:"",extraInfo:{},setContentTypeWhiteList:t=>{e({contentTypeWhiteListInitialized:!0,contentTypeWhiteList:t})},enterSelectMode:async n=>{var r,i,a,o,l,s,u,c,d,f,v,h,b,x;let{scene:y,extraInfo:_={},data:S,justUpdateInfo:w}=n,{isSelectMode:k,scene:j}=t();if(k&&y===j&&!w)return;let M=await (0,p.TB)("chatMessageBoxLayoutStore");M.getState().updateSendMessageBoxConfig({containerDataAttr:"select-mode"}),M.getState().updateReceiveMessageBoxConfig({containerDataAttr:"select-mode"}),null===(r=M.getState().getLayoutSetter())||void 0===r||r.setLayoutAreaInVisible("bottom"),null===(i=M.getState().getLayoutSetter())||void 0===i||i.setLayoutAreaInVisible("top"),null===(a=M.getState().getLayoutSetter())||void 0===a||a.setLayoutAreaInVisible("right"),null===(o=M.getState().getLayoutSetter())||void 0===o||o.setLayoutAreaVisible("left"),e({extraInfo:_,scene:y,isSelectMode:!0,preShareId:(null==S?void 0:S.pre_share_id)||(null==S?void 0:null===(l=S.share_info)||void 0===l?void 0:l.share_id)||"",shareToken:null!==(h=null==S?void 0:S.share_token)&&void 0!==h?h:"",preMessageIndexList:(null==S?void 0:null===(s=S.share_info)||void 0===s?void 0:s.share_status)===2&&null!==(b=null==S?void 0:null===(u=S.share_info)||void 0===u?void 0:u.message_index_list)&&void 0!==b?b:[],preShareType:(null==S?void 0:null===(c=S.share_info)||void 0===c?void 0:c.share_type)||g.yw.All,preShareVisibility:null!==(x=null==S?void 0:null===(d=S.share_info)||void 0===d?void 0:d.share_visibility)&&void 0!==x?x:g.M7.Default,shareType:(null==S?void 0:null===(f=S.share_info)||void 0===f?void 0:f.share_type)||g.yw.All,shareTitle:null==S?void 0:null===(v=S.share_info)||void 0===v?void 0:v.share_name}),m.v.emit("chat.share.select",{scene:y,isSelectMode:!0})},exitSelectMode:async()=>{var n,r,i,a;if(!t().isSelectMode)return;let o=await (0,p.TB)("chatMessageBoxLayoutStore");o.getState().updateSendMessageBoxConfig({containerDataAttr:""}),o.getState().updateReceiveMessageBoxConfig({containerDataAttr:""}),null===(n=o.getState().getLayoutSetter())||void 0===n||n.setLayoutAreaVisible("bottom"),null===(r=o.getState().getLayoutSetter())||void 0===r||r.setLayoutAreaVisible("top"),null===(i=o.getState().getLayoutSetter())||void 0===i||i.setLayoutAreaInVisible("right"),null===(a=o.getState().getLayoutSetter())||void 0===a||a.setLayoutAreaInVisible("left"),e({scene:void 0,isSelectMode:!1,messageIndexList:[],preShareId:"",shareToken:"",preMessageIndexList:[],extraInfo:{}}),m.v.emit("chat.share.select",{scene:void 0,isSelectMode:!1})},toggleMessage:n=>{var r;let{conversationId:i,messageIndex:l,state:s}=n,{messageIndexList:u,getIsCheckboxDisabled:c,findMessageByIndex:d}=t(),f=u.includes(l),p=d({conversationId:i,state:s,messageIndex:l}),m=(0,y.sf)(s,i,null!==(r=null==p?void 0:p.message_id)&&void 0!==r?r:""),[h,...g]=m,b=l===h;if(f)return!b&&g.filter(e=>u.includes(e)).length>1?e({messageIndexList:(0,a.Z)(u,l)}):e({messageIndexList:(0,a.Z)(u,...m)}),t().messageIndexList;if(c({conversationId:i,messageIndex:l,state:s}))return t().messageIndexList;let x=m.filter(e=>!c({conversationId:i,messageIndex:e,state:s}));return u.length+x.length>v.zE?e({messageIndexList:[...u,l].sort((e,t)=>e-t)}):e({messageIndexList:(0,o.Z)([...u,...x]).sort((e,t)=>e-t)}),t().messageIndexList},selectAll:n=>{let{_getSelectAllIndexList:r}=t();return e({messageIndexList:r(n)}),t().messageIndexList},deselectAll:()=>{e({messageIndexList:[]})},findMessageByIndex:e=>{var t,n;let{conversationId:r,state:i,messageIndex:a}=e,o=i.messageMap[r],l=i.messageLinkMap[r];if(!o||!l)return;let s=Number(null===(t=o[null===(n=l[0])||void 0===n?void 0:n.messageId])||void 0===t?void 0:t.index),u=l[a-s];if(u){let e=(0,y.K9)(i,r,u);if((null==e?void 0:e.index)===a)return e}let c=Object.keys(o).find(e=>{var t;return Number(null===(t=o[e])||void 0===t?void 0:t.index)===a});if(c)return o[c]},_getSelectAllIndexList:e=>{var n,r,i,a,o,c;let{conversationId:d,state:f,lastMessageIndex:p}=e,{getIsCheckboxDisabled:m}=t(),v=f.messageMap[d],h=f.messageLinkMap[d];if(!v||!h)return[];let g=Number(null===(n=v[null===(r=h[0])||void 0===r?void 0:r.messageId])||void 0===n?void 0:n.index),b=Number(null===(i=v[null===(a=h[h.length-1])||void 0===a?void 0:a.messageId])||void 0===i?void 0:i.index);return b<h.length&&(b=null!==(c=(0,l.Z)(null===(o=(0,x.MF)(d))||void 0===o?void 0:o.map(e=>Number(e.index))))&&void 0!==c?c:h.length),(0,s.Z)(1,p+1).filter(e=>!(0,u.Z)(e,g,b+1)||!m({conversationId:d,messageIndex:e,state:f}))},getIsSelectAllChecked:e=>{let{messageIndexList:n,_getSelectAllIndexList:r}=t(),i=r(e);return n.length>0&&n.length>=i.length},getIsCheckboxDisabled:e=>{let{conversationId:n,state:r,messageIndex:i}=e,{messageIndexList:a,findMessageByIndex:o,_isMessageDisableSelect:l,contentTypeWhiteList:s}=t();if(a.includes(i))return!1;let u=o({state:r,messageIndex:i,conversationId:n}),c=l(u);if(c){var d;b.k.persist.info({eventName:"thread_share_checkbox_disabled",meta:{messageIndex:null==u?void 0:u.index,messageId:null==u?void 0:u.message_id,messageStatus:null==u?void 0:u.status,messageContentType:null==u?void 0:u.content_type,contentTypeWhiteList:s,isOnboarding:null==u?void 0:null===(d=u.ext)||void 0===d?void 0:d.onboarding,listLength:a.length}})}return c},_isMessageDisableSelect:e=>{var n;let{messageIndexList:r,contentTypeWhiteList:i,contentTypeWhiteListInitialized:a}=t();return a||b.k.persist.info({eventName:"thread_share_checkbox_disabled",meta:{whiteListInit:"0"}}),!!(!e||(0,d.N0s)(e)||(0,d.IEy)(e))||e.status===h.PushMessageStatus.InVisible||(null===(n=e.ext)||void 0===n?void 0:n.onboarding)==="1"||r.length>=v.zE||((0,f.T5)(e)?!(0,f.wG)(e):!(e.content_type&&i.includes(e.content_type)))},updateMessageIndexList:n=>{let{messageIndexList:r,_isMessageDisableSelect:i}=t(),a=[];for(let e of Object.values(n))-1!==r.indexOf(Number(e.index))&&i(e)&&a.push(Number(e.index));e({messageIndexList:r.filter(e=>!a.includes(e))})},setShareType:t=>{e({shareType:t})}})))},397175:function(e,t,n){n.d(t,{HS:function(){return s},Lp:function(){return o},UC:function(){return l},el:function(){return u}});var r=n(67864),i=n(900789),a=n(592333);let o=e=>!!e&&[r.z.Bot,r.z.ProfileBot].includes(e);function l(e){return e===i.MZ.ParseState_Failed}function s(e){return e===i.m9.ReviewState_NotCompliant}let u=e=>e===a.dm.Coco||e===a.dm.CocoWeb},297091:function(e,t,n){n.d(t,{M:function(){return r}});class r{on(e,t){var n;this.listeners[e]||(this.listeners[e]=[]),t&&(null===(n=this.listeners[e])||void 0===n||n.push(t))}off(e,t){var n,r;if(!this.listeners[e])return;let i=null===(n=this.listeners[e])||void 0===n?void 0:n.filter(e=>e!==t);this.listeners[e]=[],i&&(null===(r=this.listeners[e])||void 0===r||r.push(...i))}get(e){return this.listeners[e]||[]}constructor(){var e,t,n;t=void 0,(e="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e="listeners","string"))?n:n+"")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this.listeners={}}}},719684:function(e,t,n){n.d(t,{O:function(){return a},i:function(){return o}});var r=n(644367),i=n(530836);let a=e=>{var t,n,a,o,l,s;let{message:u,reason:c,error:d,from:f,meta:p}=e,m=null!=d?d:Error(c),v={success:"0",reason:c,content_type:String(null!==(a=null==u?void 0:u.content_type)&&void 0!==a?a:"unknown"),skill_id:String(null!==(o=null==u?void 0:null===(t=u.skill)||void 0===t?void 0:t.skill_id)&&void 0!==o?o:"generic"),message_from:null!==(l=null==u?void 0:null===(n=u.local_info)||void 0===n?void 0:n.from)&&void 0!==l?l:"unknown",user_type:String(null!==(s=null==u?void 0:u.user_type)&&void 0!==s?s:"unknown"),conversation_id:null==u?void 0:u.conversation_id,message_id:null==u?void 0:u.message_id,conversation_type:String(null==u?void 0:u.conversation_type),from:f||"unknown",...p},h=null==u?void 0:u.message_id;if(i.useMessageStore.getState().checkMessageShowErrorHasReported({messageId:h})){r.k.console.error({eventName:"message_show_error_duplicate",error:m,meta:v});return}i.useMessageStore.getState().updateMessageShowErrorHasReported({messageId:h}),r.k.persist.error({eventName:"message_show_error",error:m,meta:v})},o=e=>{let{element:t,hasImage:n=!1,defaultNaturalWidth:r=256,defaultNaturalHeight:i=192,onError:a}=e;if(n){let e=t.querySelectorAll("[data-testid=mdbox_image] picture");if(0===e.length)null==a||a({reason:"images_render_error"});else{let t=!1;e.forEach(e=>{let n=e.querySelector("img");(null==n?void 0:n.complete)&&n.naturalWidth&&n.naturalHeight&&(n.naturalWidth!==r||n.naturalHeight!==i)&&(t=!0)}),t||null==a||a({reason:"all_images_load_error"})}}}},100653:function(e,t,n){n.d(t,{H:function(){return r}});let r=e=>{var t,n,r,i;let a=[];return(null==e?void 0:null===(t=e.attachments)||void 0===t?void 0:t.length)?a=(null==e?void 0:null===(r=e.attachments)||void 0===r?void 0:r.map(e=>e.key))||[]:(null==e?void 0:null===(n=e.references)||void 0===n?void 0:n.length)&&(a=(null==e?void 0:null===(i=e.references)||void 0===i?void 0:i.map(e=>e.key))||[]),{collection_id:a.length?1===a.length?a[0]:JSON.stringify(a):void 0}}},878242:function(e,t,n){n.d(t,{o:function(){return f}}),n(429996);var r=n(344482),i=n(335146),a=n(475434),o=n(93708),l=n(126628),s=n(708481),u=n(541752);let c=()=>({voiceConversationId:"",voiceCallStartTime:0});var d=n(627394);let f=e=>{let{ChatInputSlot:t,chatId:n,chatType:f,chatKey:p,renderFallback:m}=e,v=(0,o.sQ)("chatGuidanceStore",e=>({activeSkillType:e.activeSkillIdentifier}),r.X),h=(0,i.S0)(e=>e.batchDownloadSelected),g={chatId:n,chatType:f,chatKey:p,guidance:v,share:(0,a.p)(e=>({isSelectMode:e.isSelectMode,scene:e.scene}),r.X),voiceCall:c(),batchDownload:{isBatchDownloadMode:null!=h&&h}},{matcher:b}=(0,l.Ci)(),x=null==b?void 0:b.map(e=>e(g)).find(e=>void 0!==e),{plugin:y}=(0,s.$4)(x);return(0,d.jsx)(u.SV,{errorBoundaryName:"chat_input_error",fallback:null,children:y?(0,d.jsx)(y.Content,{...g,ChatInputSlot:t}):(0,d.jsx)(d.Fragment,{children:null==m?void 0:m()})})}},304043:function(e,t,n){function r(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{s:function(){return i}});let i=new class{constructor(){r(this,"inputRef",null),r(this,"bindInputRef",e=>{this.inputRef=e}),r(this,"unbindInputRef",()=>{this.inputRef=null}),r(this,"focusOnInput",()=>{this.inputRef&&this.inputRef.focus()})}}},788988:function(e,t,n){n.d(t,{d:function(){return i}});var r=n(304043);class i{focusOnEditor(){r.s.focusOnInput()}updateEditorValue(){}clearEditorValue(){}}},931832:function(e,t,n){n.d(t,{qK:function(){return C.q},tz:function(){return E.tz},i_:function(){return j.i},mp:function(){return j.m},xg:function(){return N},Z8:function(){return E.Z8},m0:function(){return E.m0},U1:function(){return M.U},A_:function(){return E.A_},$c:function(){return E.$c},xz:function(){return E.xz},me:function(){return E.me},Tt:function(){return E.Tt},eg:function(){return E.eg}});var r=n(429996),i=n(344482),a=n(669160),o=n.n(a),l=n(789395),s=n(546336),u=n(93708),c=n(15348),d=n(708481),f=n(653019),p=n(308691),m=n(107599),v=n(886421),h=n(468494),g=n(205379),b=n(636674),x=n(999132),y=n(544888),_=n(894883),S=n(305919),w=n(693612),k=n(744787),j=n(286972),M=n(84397),C=n(846480),I={"guidance-input":"guidance-input-SO0KB2"},T=n(627394),E=n(122621);let N=e=>{let{chatId:t,chatType:n,className:a,disabled:o,reportParams:l,placeholder:d,enableArouseMoreSkill:w=!0,enableUpload:I=!0,enableUserUpload:E=!0,forceUseChatInputPlugin:N=!1,specificSkillID:O}=e,{isDisabled:A}=(0,s.V)(),L=o||A,[P,F]=(0,u.sQ)("chatInputStore",e=>[e.activeSkillTypeMap[t],e.skillMap],i.X),Z=w&&P?{...null==F?void 0:F[P],skill_type:P}:O?null==F?void 0:F[O]:void 0,D=(0,m.jw)(t,n),W=(0,v.yT)("",t),{reportParams:z}=(0,j.i)({chatId:t,chatType:n,activeSkill:Z}),U={botType:W,...l,...z},{trackParams:V}=(0,j.m)({chatId:t,chatType:n,activeSkill:Z});(0,y.Hf)(e=>{(0,u.GX)("chatInputStore").closeSkillPanel(e),(0,c.D)("chatInputStoreService").then(e=>{null==e||e.resetSkillReportEvent()}),(0,f.vO)()}),(0,r.useEffect)(()=>{let e=h.useFeedStore.subscribe(e=>e.lastSectionIdMap[t],()=>{!(0,g.zU)(t)&&(0,c.D)("refContentStoreService").then(e=>{null==e||e.clearRefContents(t,{retainDisableRef:!0})})});return()=>{e()}},[t]);let $=(0,M.U)({activeSkillType:null==Z?void 0:Z.skill_type,reportParams:U}),{isToolButtonSmall:H,inputWidthDivRef:G}=(0,_.W)(),K=(0,p.CU)(),Q=[b.SkillType.ReadPDF,b.SkillType.CodeInterpreter].includes(K),X=(0,x.Z)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return L?Promise.resolve(!1):$(...t)}),{isNewChatInput:q,loading:J}=(0,S.F)(),Y=q&&D&&!N&&!K,ee=(0,C.q)({chatId:t,chatType:n,disabled:L,trackParams:V,skill:null!=Z?Z:{},reportParams:U,onBeforeSubmit:X,isToolButtonSmall:H}),et=(0,r.useMemo)(()=>({...ee,enableArouseMoreSkill:w,placeholder:d,enableUpload:I,enableUserUpload:E,className:a}),[ee,w,d,I,E,a]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{ref:G,className:"h-0 w-full"}),(0,T.jsx)("div",{className:"w-full","data-testid":"chat_input","data-onboarding-id":"chat_input",children:J&&!N?(0,T.jsx)(k.Y,{className:a}):Y?(0,T.jsx)(B,{forceUseGenericInput:Q,activeSkill:Z,...et}):(0,T.jsx)(R,{forceUseGenericInput:Q,activeSkill:Z,...et})})]})},R=(0,r.memo)(function(e){let{activeSkill:t,forceUseGenericInput:n,...r}=e,{plugin:i,loading:a}=(0,d.os)(n?"generic":(null==t?void 0:t.skill_type)||"generic"),o=a||!i;return((0,w.J)(o),o||!n&&(null==i?void 0:i.skillType)!==(null==t?void 0:t.skill_type))?(0,T.jsx)(k.Y,{className:r.className}):(0,T.jsx)(T.Fragment,{children:null==i?void 0:i.render(r)})}),B=(0,r.memo)(function(e){let{activeSkill:t,forceUseGenericInput:n,...r}=e,{plugin:i,loading:a}=(0,d.cK)(n?"generic":(null==t?void 0:t.skill_type)||"generic"),s=a||!i;return((0,w.J)(s),s)?(0,T.jsx)(l.f,{className:o()(r.className,I["guidance-input"])}):(0,T.jsx)(i.Content,{...r,className:o()(r.className,I["guidance-input"]),exitSkillButtonTheme:"borderless"})})},846480:function(e,t,n){n.d(t,{q:function(){return w}});var r=n(162063),i=n(474227),a=n(145625),o=n(156217),l=n(15348),s=n(93708),u=n(308691),c=n(689337),d=n(685955),f=n(17135),p=n(432626),m=n(338212),v=n(393648),h=n(115866),g=n(761606),b=n(644367),x=n(877384),y=n(821192),_=n(639088);let S=()=>Promise.resolve(!0),w=e=>{var t;let{chatId:n,chatType:w,disabled:k,trackParams:j,skill:M,reportParams:C,onBeforeSubmit:I=S}=e,T=(0,h.Z)(I),E=M.skill_type,N={skill_type:E,skill_type_str:(0,c.ci)(E),skill_id:E?E.toString():null,...C},R=(0,p.g1)(),B=(0,x.n1)(n),O=(0,u.Es)(),A=(0,o.GL)("chatConfigService"),L=(0,o.GL)("chatInputService"),P=(0,v.nu)(),{enableSkillPin:F=!0}=null!==(t=null==A?void 0:A.featureGating)&&void 0!==t?t:{},{onBeforeSendMessage:Z}=(0,y.MR)({source:E?`send_message_${E}`:"send_message",eventName:"chat_input_guest_login",meta:{...N},chatId:n,chatType:w,checkNewGuidanceAb:!0,activeSkillType:B}),D=async e=>{await (0,_.GQ)(e)},W=async e=>{let{files:t}=e.clipboardData,n=e.clipboardData.getData("text"),r=n.trim(),i=(0,m.U)(r),a=1===i.length&&i[0].type===m.y.link;await (0,_.As)({event:e,trimText:r,text:n,files:t,isValidLink:a})},z=(0,h.Z)(()=>{(0,l.D)("refContentStoreService").then(e=>{null==e||e.clearRefContents(n,{retainDisableRef:!0})})}),U=(0,h.Z)(async function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!await (null==T?void 0:T({reportParams:N}))||!await Z({checkNewGuidanceAb:t.checkNewGuidanceAb}))return!1;let n=await (0,_.oW)();return("boolean"!=typeof n||!!n)&&((null===(e=t.clearRefContent)||void 0===e||e)&&z(),!0)}),V=(0,h.Z)(async e=>{let{exitSkill:t=!1}=e||{};await (0,_.WF)(),(0,l.D)("chatInputStoreService").then(e=>{B&&!O&&F&&P&&(null==e||e.pinSkill(B)),t?(0,s.GX)("chatInputStore").closeSkillPanel(n):B&&(0,s.GX)("chatInputStore").updateActiveSkillTypeMap(n,B,a.u.AfterSkill),b.k.persist.info({eventName:"skill_input_send_keep_input",meta:{...N,keep_input:t?"0":"1"}}),null==e||e.updateSelectedRecommendSkill(),null==e||e.updateSendMessageStatus(n,a.M.Sending)}),L.getAsrService().then(e=>{null==e||e.stopAsr()})}),$=(0,h.Z)((0,r.Z)(e=>{(0,f.trackEvent)("input_bar_enter",{click_scene:"skills_search_bar",...j,...(0,d.N)(e)})},1e3)),H=(0,h.Z)(e=>(0,f.trackEvent)("input_bar_edit",{action:"cancel_quote",...j,...(0,d.N)(e)}));return(0,g.D)({...e,chatId:n,chatType:w,disabled:k,sendMessageHoverText:R("send_button_hover_text"),trackParams:j,onKeyDown:D,onPaste:W,onBeforeSendMessage:U,onAfterSendMessage:V,debouncedReportFocus:$,removeRefContentEvent:H,reportParams:N},i.Z)}},84397:function(e,t,n){n.d(t,{U:function(){return o}});var r=n(689337),i=n(999132),a=n(644367);let o=e=>{let{activeSkillType:t,reportParams:n}=e,o=(0,i.Z)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;a.k.persist.info({eventName:"chat_input_send_start",meta:{...t?{skill_type:t,skill_type_str:(0,r.ci)(t),skill_id:(0,r.ci)(t)}:{skill_type_str:(0,r.ci)(),skill_id:(0,r.ci)()},...e}})});return function(){let{reportParams:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(e),Promise.resolve(!0)}}},286972:function(e,t,n){n.d(t,{i:function(){return g},m:function(){return h}});var r=n(429996),i=n(344482),a=n(177056),o=n(444614),l=n(67864),s=n(829619),u=n(93708),c=n(557735),d=n(308691),f=n(468494),p=n(234761),m=n(689337),v=n(22714);let h=e=>{var t;let{chatId:n,chatType:a,activeSkill:o,show_scene:l}=e,s=(0,d.Es)(),u=(0,r.useMemo)(()=>{if(s)return{sendMessageSecScene:"input"}},[s]),c={...(0,f.useFeedStore)(e=>{var t;let r=(0,p.IO)(e),i=(0,p.jo)(e,n),a=(0,p.dg)(e,n);return{conversation_id:n,bot_id:r,conversation_type:null!==(t=null==i?void 0:i.conversation_type)&&void 0!==t?t:null==a?void 0:a.conversation_type}},i.X),show_scene:l,chat_type:a,skill_id:null==o?void 0:null===(t=o.skill_type)||void 0===t?void 0:t.toString(),skill_name:(0,m.Nu)(null==o?void 0:o.skill_type),is_deepsearch_show:0,...u};return{trackMeta:u,trackParams:c}},g=e=>{let{chatId:t,chatType:n,activeSkill:r}=e,i=(0,d.Es)(),f=n===l.z.NewThread&&!i,p=(0,u.sQ)("chatGuidanceStore",e=>(0,c.Uw)(e.skillGuidancePageFrom||s.M.DEFAULT)),m=(0,u.sQ)("chatInputStore",e=>e.selectedRecommendSkill),h=(0,u.sQ)("chatInputStore",e=>e.activeSkillFromMap[t]);return{reportParams:(()=>{let e=(0,a.Z)({action_bar_recommended:m&&(null==r?void 0:r.skill_type)===m.skill_type?(0,v.M)(m.tag):void 0,skill_from:(null==r?void 0:r.skill_type)===(null==h?void 0:h.skillType)?null==h?void 0:h.skillFrom:void 0},o.Z);return i?Object.assign(e,{scene:p,send_source:"skill_guidance_page"}):f&&Object.assign(e,{send_source:"guidance_page"}),e})()}}},122621:function(e,t,n){n.d(t,{$c:function(){return c},A_:function(){return d},Tt:function(){return h},Z8:function(){return v},eg:function(){return b},m0:function(){return g},me:function(){return f},tz:function(){return p},xz:function(){return m}});var r=n(577518),i=n(986091),a=n(41359),o=n(15348),l=n(851510),s=n(631150),u=n(811208);let c=e=>({blob:e.file,local_key:e.localKey,from:e.from}),d=(e,t,n)=>({compositeContent:{text:e,images:[c(t)]},reportParams:n}),f=(e,t)=>({compositeContent:{text:e,files:[c(t)]},reportParams:{scene:"keyboard"}}),p=(e,t)=>({text:e,reportParams:t}),m=(e,t)=>({reportParams:t,image:e.file,local_key:e.localKey}),v=(e,t)=>({reportParams:t,file:e.file,local_key:e.localKey}),h=(e,t)=>({reportParams:t,file_key:e.key,file_name:e.fileName}),g=(e,t)=>{let{text:n,attachments:o,attachmentKeys:c,attachmentStates:d,enableImageVlm:f}=e,p=o.map((e,t)=>{var n,i,o,s;if((0,l.u$)(e))return;let p=c[t],m=null!==(i=e.fileName)&&void 0!==i?i:(0,u.G)("name")(e.file);if(!p)return;let v=(0,l.Q1)(e)?null!==(o=e.size)&&void 0!==o?o:0:null!==(s=null===(n=e.file)||void 0===n?void 0:n.size)&&void 0!==s?s:e.size,h=(0,l.Q1)(e)?(0,r.Z)():e.localKey,g=d[t],b={fileKey:p,fileName:m,size:v,identifier:h,parseState:g.parseState,reviewState:g.reviewState,md5:g.md5,localKey:g.localKey};return(0,l.Or)(e)?{...b,type:f?a.U3.Image:a.U3.File,fileType:a.bQ.OCRImage,image:{key:p,image_ori:{width:g.imageWidth,height:g.imageHeight}}}:{...b,type:a.U3.File,fileType:a.bQ.File}}).filter(s.Av);if(!(0,i.Z)(p))return{text:n,nestedItems:p,reportParams:{...t}}},b=async e=>{let t=await (0,o.D)("attachmentUploadStoreService"),n=null==t?void 0:t.popPreGeneratedId(e);return n?{pre_generate_id:n}:{}}},839157:function(e,t,n){n.d(t,{DT:function(){return f},K1:function(){return p},Mw:function(){return d}});var r=n(546336),i=n(107599),a=n(851228),o=n(592333),l=n(393648),s=n(275268),u={"disabled-tips":"disabled-tips-WW4kyE"},c=n(627394);let d=e=>function(t){let{chatId:n,chatType:r}=t,{isDisabled:i,disabledText:a}=e({chatId:n,chatType:r});return i?(0,c.jsx)("div",{className:u["disabled-tips"],children:a}):null},f=e=>{let{chatId:t}=e,n=(0,i.sX)(t),u=(null==n?void 0:n.bot_id)||t,c=s.chatInputServiceContainer.get("chatBotService"),d=(null==c?void 0:c.useBotInfoHook(u))||{},f=(0,l.nu)(),p=(0,r.V)();return(()=>{let e=(null==d?void 0:d.bot_mode)===o.J4.subject;return!!f&&d.disabled_tag!==a.yy.Ban&&(d.disabled_tag!==a.yy.Rollback||!e)})()?p:{isDisabled:!1}},p=d(f)},920541:function(e,t,n){n.d(t,{o:function(){return d}});var r=n(429996),i=n(210230),a=n(669160),o=n.n(a),l=n(471549),s={"chat-input":"chat-input-cgIC3I","single-line":"single-line-q5_dZN",bottom:"bottom-WH4r7v",placeholder:"placeholder-CvGPiw","box-shadow":"box-shadow-kLVNoV",small:"small-DKZGhJ","chat-input-with-upload":"chat-input-with-upload-a1r_Fz","chat-input-button":"chat-input-button-od14Gx","chat-input-content":"chat-input-content-yo1w8N","chat-input-tool":"chat-input-tool-nRZ3bR","chat-input-button-round":"chat-input-button-round-NLmTa0"},u=n(627394);let c=!1,d=e=>{let{placeholder:t,style:n,className:a,uploadIcon:d,boxShadow:f=!1,singleLine:p=!0}=e,m=(0,r.useRef)(null),[v,h]=(0,r.useState)(c);return(0,r.useEffect)(()=>{var e;let t=null===(e=m.current)||void 0===e?void 0:e.clientWidth,n=(0,i.Z)(t)||0===t?c:t<480;c=n,h(n)},[]),(0,u.jsx)("div",{ref:m,className:o()(s["chat-input"],p&&s["single-line"],f&&s["box-shadow"],v&&s.small,d&&s["chat-input-with-upload"],a),style:n,children:p?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:s["chat-input-content"]}),(0,u.jsx)("div",{className:s["chat-input-tool"]}),(0,u.jsx)("div",{className:s["chat-input-tool"]}),(0,u.jsx)("div",{className:s["chat-input-button-round"]})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("textarea",{disabled:!0,placeholder:t}),(0,u.jsxs)("div",{className:s.bottom,children:[d,(0,u.jsx)("div",{className:s.placeholder}),(0,u.jsx)(l.Z,{className:s["chat-input-button"]})]})]})})}},744787:function(e,t,n){n.d(t,{Y:function(){return p}});var r=n(669160),i=n.n(r),a=n(67864),o=n(46793),l=n(432626),s=n(393648),u=n(350538),c=n(920541),d={"center-input":"center-input-oFzOro"},f=n(627394);function p(){let{className:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.g1)(),n=(0,o.mC)(),r=(0,s.Dv)(),p=!(0,u.dM)(),m=r||p;return(0,f.jsx)(c.o,{className:i()(e,m&&n===a.z.NewThread&&d["center-input"]),placeholder:t(m?"homepage_centered_input_placeholder":"default_input_placeholder")})}},639088:function(e,t,n){n.d(t,{As:function(){return h},GQ:function(){return p},Kb:function(){return b},WF:function(){return m},oW:function(){return x},pe:function(){return v},xK:function(){return g}});var r=n(633906),i=n(607278),a=n(93708),o=n(126628),l=n(708481),s=n(910157),u=n(967037),c=n(644367);let d=()=>{let{chatId:e,chatType:t,chatKey:n}=(0,a.GX)("chatViewCoreStore").currentChatViewConfig||{},r={activeSkillType:(0,a.GX)("chatGuidanceStore").activeSkillIdentifier},i=e?(0,a.GX)("chatInputStore").activeSkillTypeMap[e]:void 0;return{chatId:e,chatType:t,chatKey:n,guidance:r,skillType:i}},f=function(e){let{needsReport:t=!0,reportReturnedValue:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){for(var a=arguments.length,f=Array(a),p=0;p<a;p++)f[p]=arguments[p];return new Promise((a,p)=>{(async()=>{let m=t?(0,u.zQ)({eventName:"chat_input_event",meta:{event:e}}):null;try{let t=await (0,o.mk)();null==m||m.addDurationPoint("get_matchers_success");let u=d();null==m||m.updateMeta({matcher_params:u});let p=t.map(e=>{let t=e(u);if(t)return t}).filter(r.Z);null==m||m.addDurationPoint("find_matcher_success"),null==m||m.updateMeta({plugin_identifiers:p.map(e=>e?e.toString():"undefined").join(",")});let v=await Promise.all(p.map(e=>(0,l.as)(e))),h=v.filter(e=>!!e);null==m||m.addDurationPoint("get_plugins_success"),null==m||m.updateMeta({plugins_ready:v.map(e=>e?"1":"0").join(",")});let g=f[0];n&&(null==m||m.updateMeta({origin_returned_value:(0,s.B)(g)}));for(let t=0;t<h.length;t++){let r=h[t][e],a=(e,t)=>t,o=(0,i.Z)(r)?r:a;try{g=await o(u,g,...f.slice(1)),null==m||m.addDurationPoint(`run_plugin_${t}_success`),n&&(null==m||m.updateMeta({[`plugin_${t}_returned_value`]:(0,s.B)(g)}))}catch(t){c.k.persist.error({error:t,message:`input lifecycle [${e}] execute failed, reason:${t.message}`})}}n&&(null==m||m.updateMeta({returned_value:(0,s.B)(g)})),null==m||m.success(),a(g)}catch(e){null==m||m.error({reason:"run_event_failed",error:e instanceof Error?e:Error(String(e))}),p(e)}})()})}},p=f("onKeyDown",{needsReport:!1}),m=f("onMessageSendingEnd"),v=f("onMessageSendingBefore",{reportReturnedValue:!1}),h=f("onPaste"),g=f("onEmptySlash"),b=f("onBeforeBreakMessage"),x=f("onBeforeSendMessage")},564634:function(e,t,n){n.d(t,{L:function(){return d}});var r=n(429996),i=n(107481),a=n(633126),o=n(17135),l=n(432626),s=n(51679),u=n(900789),c=n(698570);function d(e){var t,n;let{attachmentStates:d,trackParams:p,scene:m}=e,v=(0,l.g1)(),{data:h,enableUltraLongText:g}=(0,a.o)(),b=d.length>0,{data:x}=(0,c.Z)(async()=>{if(b){var e,t;return null!==(t=null===(e=(await s.mH.CheckUltraLongTextQuota()).data)||void 0===e?void 0:e.has_quota)&&void 0!==t&&t}},{refreshDeps:[b]}),y=Number((null==h?void 0:null===(t=h.ai_reader)||void 0===t?void 0:t.max_char_count)||1e5),_=Number((null==h?void 0:null===(n=h.ai_reader)||void 0===n?void 0:n.ult_max_char_count)||1e5);return(0,r.useMemo)(()=>{if(0===d.length)return{success:!0};if(d.some(e=>e.status===i.O.Retry))return{success:!1,tips:v("file_upload_failed")};if(d.some(e=>e.status===i.O.Uploading))return{success:!1,tips:v("file_uploading_cant_sent")};if(d.filter(f).some(e=>e.parseState===u.MZ.ParseState_Failed))return{success:!1,tips:v("multi_files_parse_failed")};if(d.filter(f).some(e=>{let{parseState:t=u.MZ.ParseState_Default}=e;return[u.MZ.ParseState_Default,u.MZ.ParseState_Processing].includes(t)}))return{success:!1,tips:v("skill_read_parsing")};let e=d.reduce((e,t)=>{var n;return e+(null!==(n=t.parsedCharCount)&&void 0!==n?n:0)},0),t=1===d.length,n=e>y,r=n?(y/e*100).toFixed(1):"100";return("attachmentArea"===m&&(0,o.trackEvent)("upload_parse",{all_token_length:e,single_file_token_length:d.map(e=>{let{parsedCharCount:t}=e;return t||0}).join(","),is_long_file:+!!n,file_cnt:d.length,success_cnt:d.length,...p}),t)?{success:!0,tips:n?v("single_file_exceed_limit",{postProcess:"sprintf",sprintf:["\u8C46\u5305",`${r}%`]}):void 0}:{success:!n,tips:n?v("multi_files_exceed_limit_alert",{postProcess:"sprintf",sprintf:["\u8C46\u5305",`${r}%`]}):void 0}},[d,v,y,g,x,_])}function f(e){return"file"===e.type||"directory"===e.type||e.isRepo}},693612:function(e,t,n){n.d(t,{J:function(){return o}});var r=n(429996),i=n(529537),a=n(729813);let o=e=>{let t=(0,r.useCallback)((0,i.Z)(()=>{a.v.emit("chat.chatInput.init")}),[]);(0,r.useEffect)(()=>{e||setTimeout(t)},[e,t])}},544888:function(e,t,n){n.d(t,{Fd:function(){return h.F},Hf:function(){return x},JM:function(){return g.J},Ll:function(){return c.L},MR:function(){return v.MR},OT:function(){return b.O},Pq:function(){return b.P},W2:function(){return m.W},ac:function(){return m.a},b6:function(){return s.b6},jw:function(){return f.j},ku:function(){return y},mZ:function(){return s.mZ},n:function(){return u.n},n1:function(){return s.n1},oQ:function(){return v.oQ},pO:function(){return u.pO},ri:function(){return v.ri},uy:function(){return d.u},vb:function(){return u.vb},x5:function(){return p.x},zP:function(){return s.zP}});var r=n(429996),i=n(291375),a=n(93708),o=n(468494),l=n(205379),s=n(877384),u=n(322828),c=n(564634),d=n(443682),f=n(160195),p=n(445620),m=n(894883),v=n(821192),h=n(305919),g=n(693612),b=n(268022);function x(e){let t=(0,a.sQ)("chatViewCoreStore",e=>{var t;return null===(t=e.currentChatViewConfig)||void 0===t?void 0:t.chatId}),n=(0,r.useRef)("");(0,r.useEffect)(()=>{var r;if(!t)return;let{localConversationMap:a,conversationMap:s}=o.useFeedStore.getState(),u=a[n.current||""]||s[n.current||""];if((0,l.zU)(n.current)&&(null==u?void 0:null===(r=u.local)||void 0===r?void 0:r.createStatus)===i.ns.Done){n.current=t;return}e(n.current||"",t),n.current=t},[t])}function y(e){let t=(0,a.sQ)("chatViewCoreStore",e=>{var t;return null===(t=e.currentChatViewConfig)||void 0===t?void 0:t.chatId}),n=(0,s.n1)(t||""),i=(0,r.useRef)(void 0);(0,r.useEffect)(()=>{t&&(i.current||n)&&(i.current!==n&&e(i.current,n),i.current=n)},[n])}},443682:function(e,t,n){n.d(t,{u:function(){return a}});var r=n(429996),i=n(432626);let a=e=>{let{showUltraLongText:t}=e,n=(0,i.g1)();return(0,r.useMemo)(()=>{if(t)return n("skill_copliotreading_btn_2M")},[t])}},894883:function(e,t,n){n.d(t,{W:function(){return u},a:function(){return l}});var r=n(429996),i=n(210230),a=n(190412),o=n(605743);let l=480,s=!1,u=()=>{var e;let t=(0,o.PG)(),n=(0,r.useRef)(null),u=null===(e=(0,a.Z)(n))||void 0===e?void 0:e.width,c=t||((0,i.Z)(u)||0===u?s:u<l);return s=c,{isToolButtonSmall:c,inputWidthDivRef:n}}},268022:function(e,t,n){n.d(t,{O:function(){return a},P:function(){return i}});var r=n(17135);let i=Object.freeze({Keyboard:"keyboard",Click:"click"}),a=function(){let{exitScene:e,trackParams:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.trackEvent)("skill_module_close",{exit_scene:e,...t}),(0,r.trackEvent)("exit_skill",{exit_scene:e,...t})}},160195:function(e,t,n){n.d(t,{j:function(){return c}});var r=n(93708),i=n(276971),a=n(995129),o=n(316820),l=n(999132),s=n(126473),u=n(445620);let c=e=>{let{attachmentStates:t,openFrom:n}=e,c="sm"===(0,i.y)({sm:800,md:1200}),d=(0,r.sQ)("chatViewCoreStore",e=>e.currentChatViewConfig),{openFileByKey:f,openFileByLink:p}=(0,u.x)({chatViewConfig:d});return{openReadCanvas:(0,l.Z)(async e=>{if(c)return;let r=t[0];if(!r)return;let i=(null==e?void 0:e.skillType)?{skillType:e.skillType}:{};if(["file","remote"].includes(r.type)){let{fileKey:t}=r,o=(0,s.JB)((0,s.lm)(r.fileName));if("Document"===o){let e=await (0,a.s)(t);e&&(t=e,o="PDF")}"PDF"===o&&f(t,o,{pdf:{fileName:r.fileName,realFileKey:r.fileKey},openFrom:(null==e?void 0:e.openFrom)||n,delayToIntension:!0},i)}else"link"===r.type&&r.url&&await (0,o.J)(r.url)&&p(r.url,{attchmentType:"pdf",openFrom:(null==e?void 0:e.openFrom)||n,delayToIntension:!0},i)})}}},275268:function(e,t,n){n.r(t),n.d(t,{ChatInputService:function(){return k},chatInputServiceContainer:function(){return j},createChatInputService:function(){return M}});var r=n(568120),i=n(429996),a=n(331102),o=n(444614),l=n(529537),s=n(144245),u=n(93708),c=n(708481),d=n(15348),f=n(322639),p=n(234761),m=n(468494),v=n(143312),h=n(432626),g=n(28659),b=n(28190),x=n(639088),y=n(788988),_=n(627394);function S(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let w=(0,i.lazy)(()=>(0,b.C)(()=>n.e("50309").then(n.bind(n,573591)).then(e=>({default:e.TextareaWidthMeasure}))));class k{async getAsrService(){if(!this.asrService){let{ChatAsrService:e}=await (0,b.C)(()=>n.e("38227").then(n.bind(n,529210)));this.asrService=new e(this.asrServiceInitParams)}return this.asrService}async getDirectoryService(){if(!this.directoryService){let{createMarsCodeDirectoryService:e}=await (0,b.C)(()=>n.e("38227").then(n.bind(n,579290)));this.directoryService=e()}return this.directoryService}get currentChatId(){var e,t;return null===(t=(0,u.GX)("chatViewCoreStore"))||void 0===t?void 0:null===(e=t.currentChatViewConfig)||void 0===e?void 0:e.chatId}initEventBinding(){g.l.on("app.init",this.onAppInit)}unbindEvent(){g.l.off("app.init",this.onAppInit)}async getCurrentService(){let{currentChatId:e}=this;if(!e)return null;let t=(0,u.Wp)("chatInputStore").getState().activeSkillTypeMap[e],n=t?(0,u.Wp)("chatInputStore").getState().skillMap[t]:void 0;if((0,o.Z)(n))return this.defaultChatInputService;let r=null==n?void 0:n.skill_type,i=await (0,c.wW)(r);return(null==i?void 0:i.service)||null}initTextAreaWidthMeasurer(){if(this.textareaContainerDom)return;let e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.left="-9999px",e.style.width="100%",e.style.opacity="0",(0,a.createRoot)(e).render((0,_.jsx)(w,{ref:this.textareaWidthMeasureRef})),document.body.appendChild(e),this.textareaContainerDom=e}destroyTextAreaWidthMeasurer(){var e;this.textareaContainerDom&&(r.unmountComponentAtNode(this.textareaContainerDom),null===(e=this.textareaContainerDom.parentNode)||void 0===e||e.removeChild(this.textareaContainerDom))}measureTextWidthInTextarea(e){var t,n;return null===(t=this.textareaWidthMeasureRef.current)||void 0===t||t.setText(e),null===(n=this.textareaWidthMeasureRef.current)||void 0===n?void 0:n.getTextWidth()}checkMaxFileCount(){var e,t,r,i,a;let o=this.currentChatId;if(!o)return!0;let{attachmentUploadConfig:{uploadMultiEntityConf:{maxFileCount:l},enabledSendMultiFileMessage:s}}=(0,u.GX)("attachmentUploadStore"),c=s||v.S,d=(0,f.Xo)((0,p.jo)(m.useFeedStore.getState(),o),null===(t=(0,u.GX)("chatViewCoreStore"))||void 0===t?void 0:null===(e=t.currentChatViewConfig)||void 0===e?void 0:e.chatType)&&c?l:1;return!((null!==(a=null===(i=(0,u.GX)("attachmentsStore").attachmentsMap)||void 0===i?void 0:null===(r=i[o])||void 0===r?void 0:r._default)&&void 0!==a?a:[]).length>=d)||((0,b.C)(()=>Promise.all([n.e("6973"),n.e("34986"),n.e("54033"),n.e("31372")]).then(n.bind(n,862047)).then(e=>e.SamanthaToast)).then(e=>e.error((0,h.X9)("file_token_limit",{postProcess:"sprintf",sprintf:["\u8C46\u5305",d.toString()]}))),!1)}async addAttachment(e){let t=this.currentChatId;if(!t||!this.checkMaxFileCount())return;let n=await (0,d.D)("attachmentsStoreService");return null==n?void 0:n.addAttachment({chatId:t,...e})}async addLink(e){let t=this.currentChatId;if(!t||!this.checkMaxFileCount())return;let n=await (0,d.D)("attachmentsStoreService");return null==n?void 0:n.addLink({chatId:t,...e})}async replaceLink(e){let t=this.currentChatId;if(!t)return;let n=await (0,d.D)("attachmentsStoreService");return null==n?void 0:n.replaceLink({chatId:t,...e})}async clearAttachments(){let e=await (0,d.D)("attachmentsStoreService");null==e||e.clearAllAttachments();let t=this.currentChatId;if(!t)return;let n=await (0,d.D)("attachmentUploadStoreService");return null==n?void 0:n.updatePreGeneratedLocalMessageId({chatId:t})}constructor({asrServiceInitParams:e}={}){S(this,"ctx",void 0),S(this,"defaultChatInputService",new y.d),S(this,"textareaContainerDom",null),S(this,"textareaWidthMeasureRef",(0,i.createRef)()),S(this,"asrService",null),S(this,"asrServiceInitParams",void 0),S(this,"directoryService",null),S(this,"destroy",()=>{var e;this.unbindEvent(),this.destroyTextAreaWidthMeasurer(),null===(e=this.asrService)||void 0===e||e.destroy(),this.asrService=null}),S(this,"focusOnEditor",async()=>{var e;let t=await this.getCurrentService();null==t||null===(e=t.focusOnEditor)||void 0===e||e.call(t)}),S(this,"updateEditorValue",async e=>{var t;let n=await this.getCurrentService();null==n||null===(t=n.updateEditorValue)||void 0===t||t.call(n,e)}),S(this,"clearEditorValue",()=>{this.updateEditorValue("")}),S(this,"getSkillService",async e=>{let t=await (0,c.wW)(e);return(null==t?void 0:t.service)||null}),S(this,"onAppInit",(0,l.Z)(()=>{this.initTextAreaWidthMeasurer()})),S(this,"emitBeforeBreakMessage",x.Kb),this.asrServiceInitParams=e,this.initEventBinding()}}let j=(0,s.B)(),M=e=>(j.service||(j.service=new k(e)),j.service)},621383:function(e,t,n){n.d(t,{d:function(){return s}});var r=n(669160),i=n.n(r),a=n(432626),o="line-N_UuiQ",l=n(627394);let s=e=>{var t;let n=(0,a.g1)(),{className:r,dividerItem:s}=e;if("shared"===s.dividerType&&!(null===(t=s.data)||void 0===t?void 0:t.isInvalidSourceShare))return null;let u=(()=>{switch(s.dividerType){case"shared":return n("share_content_violation");case"encrypt":return n("settings_encryption_message_viewOnMobile");default:return n("start_new_topic")}})();return(0,l.jsxs)("div",{className:i()("section-divider-cKPyZN",r),style:{willChange:"transform"},"data-testid":"message_section_divider",children:[(0,l.jsx)("span",{className:o}),(0,l.jsx)("span",{className:"text-JOV9FN",children:u}),(0,l.jsx)("span",{className:o})]})}},513370:function(e,t,n){n.d(t,{$5:function(){return w},Di:function(){return y},Xf:function(){return b},mJ:function(){return x},n2:function(){return C},zE:function(){return k}});var r=n(447269),i=n(563323),a=n(594175),o=n(511451),l=n(817835),s=n(474227),u=n(228535),c=n(744947),d=n(530836),f=n(886421),p=n(322639),m=n(468494),v=n(455746),h=n(910157),g=n(656022);let b=e=>(null==e?void 0:e.type)==="single",x=e=>"divider"===e.type,y=e=>"block"===e.type,_=(e,t)=>{let n=[],r=[];function i(e){n.push(e),r=[]}for(let n=0;n<t.length;n++){let a=t.at(n),o=t.at(n+1);if(!b(a))continue;let l=(0,c.K9)(d.useMessageStore.getState(),e,a.data);if(S(e,a)&&S(e,o)){r.push(a.data);continue}if(S(e,a)&&!S(e,o)){r.push(a.data),i({type:"divider",data:r,dividerType:"encrypt",showActionsAndSuggests:!1,id:`divider_${a.data.messageKey||a.data.messageId}`});continue}if((0,u.KQr)(l)){let r=t.slice(n+1).findIndex(t=>{if(function(e,t){if(!b(t))return!1;let n=(0,c.K9)(d.useMessageStore.getState(),e,t.data);return(0,u.Q5B)(n)}(e,t)){let n=(0,c.K9)(d.useMessageStore.getState(),e,t.data);return!((null==n?void 0:n.reply_id)&&(null==n?void 0:n.reply_id)===(null==l?void 0:l.reply_id))}return!0}),o=t.slice(n,-1===r?void 0:n+1+r),s=o.filter(t=>{let n=(0,c.K9)(d.useMessageStore.getState(),e,t.data);return(null==n?void 0:n.status)===v.PushMessageStatus.Available||(null==n?void 0:n.status)===v.PushMessageStatus.Broken});if(s.length)for(let t of s)i({type:"block",data:[t.data],showActionsAndSuggests:t.showActionsAndSuggests,id:`block_${t.data.messageKey||t.data.messageId}`,conversationId:e});else i({type:"block",data:o.map(e=>e.data),showActionsAndSuggests:a.showActionsAndSuggests,id:`batch_block_${a.data.messageKey||a.data.messageId}`,conversationId:e,isBatch:!0});n+=o.length-1;continue}r.push(a.data),i({type:"block",data:r,showActionsAndSuggests:a.showActionsAndSuggests,id:`block_${a.data.messageKey||a.data.messageId}`,conversationId:e})}return n};function S(e,t){if(!b(t)||!t.data)return!1;let n=(0,c.K9)(d.useMessageStore.getState(),e,t.data);return(0,u.awc)(n)}let w=(e,t,n)=>t.filter(t=>{let r=(0,c.K9)(d.useMessageStore.getState(),e,t),{conversation:i}=(0,f.lC)(e),a=(0,p.kJ)(i)||(0,p.p5)(i);return r&&(0,u.z_e)(r,n,a)}),k=e=>{var t;return(0,h.R)(null==e?void 0:null===(t=e.ext)||void 0===t?void 0:t.source_share,void 0)},j=(e,t)=>{var n,r;let{messageLinkMap:i}=t,a=null!==(r=i[e])&&void 0!==r?r:[],o=Number(null===(n=m.useFeedStore.getState().conversationMap[e])||void 0===n?void 0:n.message_cursor)||0,l=w(e,a,o).map(t=>({type:"single",data:t,showActionsAndSuggests:!0,id:`single_${t.messageKey||t.messageId}`,conversationId:e}));return _(e,l)},M=(e,t,n)=>{var s,f;let p;let{messageLinkMap:v}=t,h=m.useFeedStore.getState(),b=null!==(f=v[e])&&void 0!==f?f:[],y=Number(null===(s=h.conversationMap[e])||void 0===s?void 0:s.message_cursor)||0,S=(0,r.Z)(w(e,b,y),(n,r)=>{var a;let o=(0,c.K9)(t,e,r),l=(null===(a=k(o))||void 0===a?void 0:a.share_id)?g.l:null==o?void 0:o.section_id,s=+!!(0,u.z_e)(o,y),d=(0,i.Z)(n,e=>e.sectionId===l);return~d?(n[d].messageLinks.push(r),n[d].visibleMessageCount+=s):n.push({sectionId:l,visibleMessageCount:s,messageLinks:[r]}),n},[]),j=h.lastSectionIdMap[e],M=[];return S.forEach((r,i)=>{var l;let{sectionId:s,visibleMessageCount:f,messageLinks:m}=r,v=null===(l=S.at(i+1))||void 0===l?void 0:l.messageLinks[0],h=!1;if(v){let n=(0,c.K9)(t,e,v);h=(0,u.Kzj)(n)}let b=!!s&&f>0,y=i===S.length-1,w=!!j,C=y?b&&(w&&s!==j||s===g.l&&n)&&!h:b&&(s!==g.l||n)&&!h,I=y?w:b,T=m.map(t=>({type:"single",data:t,showActionsAndSuggests:!C&&I,id:`real_${t.messageId}`,conversationId:e}));M.push(..._(e,T));let E=(0,a.Z)(M);if(C&&!(E&&x(E))){let t;if(E){let n=(0,o.Z)(E.data)?E.data[E.data.length-1]:E.data;n&&(t=k((0,c.K9)(d.useMessageStore.getState(),e,n)))}if(s===g.l){let e={type:"divider",id:`divider_${s}`,dividerType:"shared",data:{sourceShare:t},showActionsAndSuggests:!1};M.push(e),p=e}else M.push({type:"divider",id:`divider_${s}`,dividerType:"normal",data:null,showActionsAndSuggests:!1})}}),p&&(0,l.Z)(p,"data.isInvalidSourceShare",!0),M},C=e=>{let{conversationId:t,segmented:n,shareReviewStatusRejected:r}=e;return{messageList:(0,d.useMessageStore)(e=>n?M(t,e,r):j(t,e),s.Z)}}},656022:function(e,t,n){n.d(t,{l:function(){return r}});let r="__thread_share_section__"},279947:function(e,t,n){n.d(t,{Q:function(){return f},h:function(){return p}});var r=n(429996),i=n(572231),a=n(530836),o=n(190831),l=n(468494),s=n(51679),u=n(393648),c=n(772145),d=n(967037);let f=()=>{let{canReport:e}=i.Z.getState(),t=(0,r.useRef)(null!=e&&e);return{initLoadMessageInChatPage:async(e,n)=>{let{reportFirstView:r=!1}=n||{};if(!e)return;l.useFeedStore.getState().updateChatCreateInFirstTime({conversationId:e,status:!1});let s=(0,u.M7)(),f=a.useMessageStore.getState().initMessageList({conversationId:e,messageIndex:Number.MAX_SAFE_INTEGER,isGuest:!s,hasPreprocessTask:o.W2});if(r&&t.current){var p,m;t.current=!1;let{chatLayoutCreateTime:n=0,chatLaunchSuccessTime:r=0,flowWebScriptJsFinish:o=0,enterPid:l}=i.Z.getState(),s=null===(m=a.useMessageStore.getState().messageLinkMap)||void 0===m?void 0:null===(p=m[e])||void 0===p?void 0:p.length,u=(0,d.zQ)({eventName:"init_chat_app_first_conversation",meta:{chat_cached:s?"1":"0",enter_pid:l,"page_time.origin":-n,"page_time.dom_interactive":o-n,"page_time.launch_success":r-n,"page_time.start":(0,c.z)()-n}});i.Z.setState({chatCached:!!s}),await f.then(e=>{(null==e?void 0:e.length)?(u.addDurationPoint("success"),u.success({meta:{"page_time.success":(0,c.z)()-n}}),i.Z.getState().addDurationPoint("load_chat_finish")):(u.error({reason:"init_msg_list_empty"}),i.Z.getState().error("init_msg_list_empty"))},e=>{throw u.error({error:e,reason:"init_msg_inner_error"}),i.Z.getState().error("init_msg_inner_empty",e),e})}else r?await f.then(e=>{(null==e?void 0:e.length)?i.Z.getState().addDurationPoint("load_chat_finish"):i.Z.getState().error("init_msg_list_empty")},e=>{throw i.Z.getState().error("init_msg_inner_empty",e),e}):await f}}},p=e=>{let[t,n]=(0,r.useState)(null),[i,a]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{a(!0),void 0!==e&&s.Ox.LanguageList({bot_id:e}).then(e=>{let{data:t}=e;(null==t?void 0:t.support_language_list)!==void 0&&n(t.support_language_list),a(!1)}).catch(()=>{a(!1)})},[]),{languages:t,loading:i}}},71536:function(e,t,n){n.d(t,{S:function(){return r}});let r=new(n(297091)).M},789395:function(e,t,n){n.d(t,{f:function(){return u}});var r=n(669160),i=n.n(r),a=n(744966),o=n(52799),l={"send-button":"send-button-IqFoMN",small:"small-MgSsit",icon:"icon-E_c9o3"},s=n(627394);let u=e=>{let{small:t,className:n}=e;return(0,s.jsx)("div",{className:i()(o.Z["input-content-container"],n),children:(0,s.jsx)("div",{className:i()(o.Z.container,"guidance-input-skeleton-container"),children:(0,s.jsxs)("div",{className:o.Z["editor-container"],children:[(0,s.jsx)("div",{className:o.Z.editor}),(0,s.jsxs)("div",{className:o.Z["bottom-wrapper"],children:[(0,s.jsx)("div",{className:o.Z["left-tools-wrapper"]}),(0,s.jsx)("div",{className:o.Z["tools-placeholder"]}),(0,s.jsx)("div",{className:o.Z["right-tools-wrapper"],children:(0,s.jsx)("div",{className:i()(l["send-button"],t&&l.small),children:(0,s.jsx)(a.Z,{className:l.icon})})})]})]})})})}},584086:function(e,t,n){n.d(t,{hf:function(){return p}});var r=n(669160),i=n.n(r),a=n(233441),o="message-area-flPDkB",l="title-caOsgg",s="skeleton-Qsh6Xl",u=n(627394);let c=()=>(0,u.jsxs)("div",{className:o,children:[(0,u.jsxs)("div",{className:"top-area-wt4My3",children:[(0,u.jsx)("div",{className:i()("rounded-60 mr-20 ml-10",s,"avatar-fihGlH")}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:i()("w-212 rounded-8 mb-6 ",s,l)}),(0,u.jsx)("div",{className:i()("w-360 rounded-8 ",s,l)})]})]}),(0,u.jsx)("div",{className:"bottom-area-vgvWeK",children:Array(9).fill(0).map((e,t)=>(0,u.jsx)("div",{className:i()("h-64 rounded-10 mb-10",s,"item-TSpSIt"),style:{opacity:1-(t+1)/10}},t))})]}),d=()=>(0,u.jsxs)("div",{className:i()(o),children:[(0,u.jsx)("div",{className:i()("h-36 rounded-8 mb-22 mt-6",s),style:{width:"66%"}}),(0,u.jsx)("div",{className:i()("h-36 rounded-8 mb-22",s),style:{width:"100%"}}),(0,u.jsx)("div",{className:i()("h-36 rounded-8 mb-22",s),style:{width:"33%"}})]}),f=()=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.J,{className:"mb-[24px] h-[24px] w-full"}),(0,u.jsx)(a.J,{className:"mb-[24px] h-[24px] w-full"}),(0,u.jsx)(a.J,{className:"h-[24px] w-[460px]"})]}),p=e=>{let{type:t="default",useNewUI:n}=e,r={thread:(0,u.jsx)(c,{}),default:(0,u.jsx)(d,{})};return n?(0,u.jsx)(f,{}):(0,u.jsx)("div",{className:"message-container-H7B_AA",children:r[t]})}},846216:function(e,t,n){n.d(t,{K:function(){return u}});var r=n(669160),i=n.n(r),a=n(184365),o=n(702534),l=n(627394);let s=e=>{let{children:t}=e;return(0,l.jsx)(l.Fragment,{children:t})},u=e=>{let{tooltipContent:t,disabled:n,onClick:r,prefix:u,suffix:c,children:d,className:f,...p}=e,m=(0,l.jsxs)(o.Z,{disabled:n,variant:"icon",onClick:()=>{null==r||r()},className:i()("text-dbx-text-secondary",f),...p,children:[u||null,d||null,c||null]}),v=n||!t?s:a.DbxTooltip;return(0,l.jsx)(v,{content:t,children:m})}},411319:function(e,t,n){n.d(t,{UG:function(){return c}});var r=n(743741),i=n(429996),a=n(669160),o=n.n(a),l=n(627394);let s=()=>{let[e,t]=(0,i.useState)(!1),n=(0,i.useRef)();return(0,i.useEffect)(()=>()=>{clearTimeout(n.current)},[]),{value:e,mouseEvents:{onMouseEnter:()=>{clearTimeout(n.current),n.current=setTimeout(()=>t(!0),150)},onMouseLeave:()=>{clearTimeout(n.current),n.current=setTimeout(()=>t(!1),150)}}}},u=()=>{let{ref:e,inView:t}=(0,r.YD)(),[n,a]=(0,i.useState)(t),o=(0,i.useRef)();return(0,i.useEffect)(()=>(clearTimeout(o.current),o.current=setTimeout(()=>{a(t)},150),()=>{clearTimeout(o.current)}),[t]),{inView:n,ref:e}},c=e=>{let{inlineEnd:t,className:n,MessageBoxTopFoundation:r,MessageBoxLeftFoundation:i,MessageBoxCenterFoundation:a,MessageBoxBottomFoundation:c,MessageBoxRightFoundation:d,dataAttributes:f}=e,{value:p,mouseEvents:m}=s(),{ref:v,inView:h}=u();return(0,l.jsxs)("div",{...f,ref:v,...m,className:o()("flex flex-row w-full",{"justify-end":t},n),children:[i&&(0,l.jsx)(i,{inView:h,mouseOver:p}),(0,l.jsxs)("div",{className:"flex flex-col flex-grow max-w-full min-w-0",children:[r&&(0,l.jsx)(r,{inView:h,mouseOver:p}),a&&(0,l.jsx)(a,{inView:h,mouseOver:p}),c&&(0,l.jsx)(c,{inView:h,mouseOver:p})]}),d&&(0,l.jsx)(d,{inView:h,mouseOver:p})]})}},629419:function(e,t,n){n.d(t,{B:function(){return l},u:function(){return s}});var r=n(429996),i=n(627394);let a="You are not able to invoke open returned by useDebugMessage, because DebugMessageProvider needed.",o=(0,r.createContext)({open:()=>{throw Error(a)},close:()=>{throw Error(a)}}),l=()=>(0,r.useContext)(o),s=e=>{let{children:t}=e;return(0,i.jsx)(i.Fragment,{children:t})}},973576:function(e,t,n){n.d(t,{q:function(){return a}});var r=n(454249),i=n(627394);let a=e=>{let{resetErrorBoundary:t}=e;return(0,i.jsx)("div",{className:"message-error-fallback-Ys_0Nu",onClick:()=>{t()},"data-testid":"message-error-fallback",children:(0,i.jsx)(r.Z,{className:"message-error-refresh-ol3P8W"})})}},179303:function(e,t,n){n.d(t,{nG:function(){return M},yH:function(){return j}});var r=n(429996),i=n(683653),a=n(67864),o=n(228535),l=n(148824),s=n(561965),u=n(840250),c=n(744947),d=n(530836),f=n(546336),p=n(589944),m=n(613716),v=n(46793),h=n(666396),g=n(393648),b=n(910157),x=n(644367),y=n(688201),_=n(627394);let S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.z.Conversation,{loading:n,failed:r,suggests:o}=(0,s.rM)(e.conversation_id||"",null==e?void 0:e.reply_id)||{};if((0,i.Z)([a.z.Bot,a.z.ProfileBot,a.z.CollectionLocalConversation],t)){var l;return{failed:!1,loading:!1,suggests:(0,b.R)(null==e?void 0:null===(l=e.ext)||void 0===l?void 0:l.sp,void 0)}}return{failed:r,loading:n,suggests:o,isRegen:!1}},w=e=>{let t=(0,v.JW)(),{loading:n=!1,suggests:r}=S(e,null==t?void 0:t.chatType);return r?{suggestListComponentNode:(0,_.jsx)(y.r,{message:e,suggests:r,loading:n},e.conversation_id),suggestLoading:n,suggestsLength:r.length}:null},k=e=>{var t,n;let r=null===(t=e.content_blocks_tree)||void 0===t?void 0:t.children,{contentBlockRenderConfigs:i}=(0,m.fz)(r),{block:a,PluginContentRender:o,pluginIdentifier:l,duplicateIdentifierList:s}=i[0]||{},u=null==a?void 0:null===(n=a.content_obj)||void 0===n?void 0:n.suggestions;return u?{suggestListComponentNode:(0,_.jsx)(o,{pluginIdentifier:l,message:e,contentBlock:a,duplicateIdentifierList:s},e.conversation_id),suggestLoading:!1,suggestsLength:u.length}:null},j=e=>{let{message:t}=e,n=(0,u.v)(t),r=(0,c.Jp)(d.useMessageStore.getState(),t.conversation_id||"",t.message_id||""),i=(0,o.RF2)(t),a=(0,l.zu)(t),s=(0,g.nu)(),{isDisabled:p}=(0,f.V)(),m=(0,o.LxO)(t),v=k(t),h=w(t);return m&&n&&r&&!i&&a&&(!s||!p)?v||h:null},M=(e,t,n)=>{let i=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!e||t>0){i.current&&clearTimeout(i.current);return}let{receiveSuggestStartTimeout:r=h.UD}=(0,p.$)("chatMessageConfig")||{};return i.current=setTimeout(()=>{x.k.persist.info({eventName:"suggest_list_timeout",meta:{message_id:null==n?void 0:n.message_id,conversation_id:null==n?void 0:n.conversation_id}})},r),()=>{i.current&&clearTimeout(i.current)}},[e,t])}},688201:function(e,t,n){n.d(t,{r:function(){return x}});var r=n(429996),i=n(986091),a=n(67864),o=n(100653),l=n(744947),s=n(530836),u=n(54642),c=n(15348),d=n(126628),f=n(708481),p=n(46793),m=n(729813),v=n(17135),h=n(393648),g=n(179303),b=n(627394);let x=e=>{let{message:t,suggests:n,loading:x,className:y}=e,_=(0,p.JW)(),S=(0,l.K9)(s.useMessageStore.getState(),(null==t?void 0:t.conversation_id)||"",{messageId:(null==t?void 0:t.reply_id)||"",isLocalMessage:!1}),w=()=>{let e=u.messageServiceContainer.get("chatConfigService"),{loginSource:r}=(null==e?void 0:e.chatReportParams)||{};(0,v.trackEvent)("show_suggested_prompt",{bot_id:null==t?void 0:t.bot_id,message_id:null==t?void 0:t.message_id,conversation_id:null==t?void 0:t.conversation_id,prompt_cnt:n.length,suggested_type:"suggested_prompt",collection_id:(0,o.H)(S).collection_id,...r?{previous_page:r}:{},web_show_method:"enter_chat",click_from:"direct"},{key:`${null==t?void 0:t.message_id}`}),n.forEach((e,n)=>{(0,v.trackEvent)("show_suggested_prompt_single_question",{bot_id:null==t?void 0:t.bot_id,message_id:null==t?void 0:t.message_id,conversation_id:null==t?void 0:t.conversation_id,prompt_position:n+1,collection_id:(0,o.H)(S).collection_id,...r?{previous_page:r}:{},web_show_method:"enter_chat",click_from:"direct"},{key:`${null==t?void 0:t.message_id}_${n}`,duration:300})})};(0,g.nG)(x,n.length,t),(0,r.useEffect)(()=>{(0,i.Z)(n)||3!==n.length||w()},[n.length,null==t?void 0:t.reply_id]);let{matcher:k}=(0,d.PP)(),{pluginIdentifier:j}=(null==k?void 0:k.find(e=>e.matchPlugin(t)))||{},{plugin:{Content:M}={}}=(0,f.HC)(j),C=(0,r.useMemo)(()=>n.length?[...n.map(e=>({value:e,label:e}))]:[],[n]);return M?(0,b.jsx)(M,{onTrackClickEvent:(e,n)=>{let r=(0,h.M7)(),i=u.messageServiceContainer.get("chatConfigService"),{loginSource:d}=(null==i?void 0:i.chatReportParams)||{},f=(0,l.K9)(s.useMessageStore.getState(),(null==t?void 0:t.conversation_id)||"",{messageId:(null==t?void 0:t.reply_id)||"",isLocalMessage:!1});if((0,v.trackEvent)("click_suggested_prompt",{bot_id:null==t?void 0:t.bot_id,message_id:null==t?void 0:t.message_id,click_position:n+1,conversation_id:null==t?void 0:t.conversation_id,suggested_type:"suggested_prompt",collection_id:(0,o.H)(f).collection_id,...d?{previous_page:d}:{},web_show_method:"enter_chat",click_from:"direct"}),!r&&(null==_?void 0:_.chatType)===a.z.Bot)return(0,c.D)("chatNavigateService").then(e=>null==e?void 0:e.navigateToLoginPage("unlog_click_bot_onboarding")),m.v.emit("chat.guest.login",{bot:!0,source:"unlog_click_bot_onboarding"})},loading:x,message:t,suggests:C,className:y}):null}},856556:function(e,t,n){n.d(t,{g:function(){return l}});var r=n(669160),i=n.n(r),a=n(345234),o=n(627394);let l=e=>{let{inlineEnd:t}=e;return(0,o.jsx)("div",{className:i()("flex items-baseline",{"flex justify-end":t}),children:(0,o.jsx)(a.g,{})})}},609050:function(e,t,n){n.d(t,{e:function(){return o}});var r=n(126628),i=n(708481),a=n(627394);let o=e=>{let{fallback:t=(0,a.jsx)("div",{className:"py-4 text-center text-[11px] leading-[16px] text-dbx-text-disable",children:"\u5185\u5BB9\u7531 AI \u751F\u6210"})}=e,{matcher:n}=(0,r.r$)(),o=null==n?void 0:n.map(e=>e()).find(e=>void 0!==e),{plugin:l,loading:s}=(0,i.Lx)(o);return!l||s?t:(0,a.jsx)(l.Content,{})}},597765:function(e,t,n){n.d(t,{E:function(){return a}}),n(429996);var r=n(165439),i=n(627394);let a=e=>t=>{let{pageInteractive:n}=(0,r.O)();return n?(0,i.jsx)(e,{...t}):null}},9629:function(e,t,n){n.d(t,{i:function(){return i}});var r=n(454083);let i={matcher:e=>e===r.G.AISpace_MinuteMettingOpen,handler:e=>n.e("22712").then(n.bind(n,638217)).then(t=>{t.default(e)}),prehandler:e=>n.e("12775").then(n.bind(n,977963)).then(t=>t.default(e))}},758635:function(e,t,n){n.r(t),n.d(t,{createBotStore:function(){return S},initBotStore:function(){return j},getDefaultBotState:function(){return b},useBotInfo:function(){return M},useBotStore:function(){return w},getRequestIdByBotId:function(){return C},useGuestBotStore:function(){return k}});var r=n(344482),i=n(613993),a=n(231462),o=n(342617),l=n(713273),s=n(447269),u=n(406421),c=n(561200),d=n(592333),f=n(51679),p=n(644367);let m={botMap:{},botIdToLocalConversationMap:{},botIdToRequestIdMap:{}},v=(e,t)=>({...m,updateBot:t=>{let{bot_id:n,id:r}=t,i=n||r;if(!i){p.k.persist.warning({message:"invalid botInfo to update",meta:{botInfo:t}});return}e((0,c.Uy)(e=>{e.botMap[i]={...e.botMap[i]||{},...t}}))},overrideBots:t=>{t.length&&e((0,c.Uy)(e=>{t.forEach(t=>{let{bot_id:n,id:r}=t,i=n||r;i&&(e.botMap[i]={...e.botMap[i]||{},...t})})}))},setLocalConversationIdForBot:t=>{let{botId:n,localConversationId:r}=t;e((0,c.Uy)(e=>{e.botIdToLocalConversationMap[n]=r}))},clearConversationIdForBot:t=>{let{botId:n}=t;e((0,c.Uy)(e=>{if(!n)return;let t=e.botMap[n];t&&(t.conversation_id="",t.has_conversation=!1)}))},fetchToUpdateBot:async t=>{var n;let{botId:r}=t,{data:i}=await f.Ox.RecommendBots({bot_ids:[r]}),a=(null==i?void 0:null===(n=i.bot_list)||void 0===n?void 0:n.length)?null==i?void 0:i.bot_list:[];return e((0,c.Uy)(e=>{var t;(null==i?void 0:null===(t=i.bot_list)||void 0===t?void 0:t.length)&&(e.botMap[r]=null==a?void 0:a[0])})),null==a?void 0:a[0]},getBot:e=>t().botMap[e],getBotIdFromLocalConversation:e=>{let{botIdToLocalConversationMap:n}=t();for(let t in n)if(n[t]===e)return t},getBotIdToLocalConversationMap:()=>t().botIdToLocalConversationMap,getBotIdToRequestIdMap:()=>t().botIdToRequestIdMap}),h=[],g=(h=[{apiTagID:102,newTagID:252},{apiTagID:104,newTagID:253},{apiTagID:103,newTagID:254},{apiTagID:228,newTagID:228},{apiTagID:105,newTagID:255}])[0].newTagID,b=()=>({discoveryBotCachedList:{},discoveryBotLinks:[],discoveryBotListStatus:{loading:!1,failed:!1,count:0,hasMore:!0,tagList:[],selectedTagId:-1,error:void 0},choicenessBotLinks:[],choicenessBotListStatus:{loading:!1,failed:!1,count:0,hasMore:!0},profileBotLinks:[],profileBotListStatus:{loading:!1,failed:!1,count:0,hasMore:!0,last_index:"0"},profileBotCount:0}),x=b(),y=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r,i]=t;return{...x,...v(...t),initRecommendBotList:e=>{let{size:t,recommendType:n,tagId:r,isSidebarRecommend:a}=e;i().loadRecommendBotList({index:1,size:t,recommendType:n,tagId:r,isSidebarRecommend:a})},loadRecommendBotList:async e=>{let{index:t,size:n,recommendType:a,tagId:u,isSidebarRecommend:m=!1}=e,v=m?1:h.map(e=>e.newTagID).includes(u)?u:g,b=a===d.UE.Discovery,x=b?"discoveryBotListStatus":"choicenessBotListStatus",y=b?"discoveryBotLinks":"choicenessBotLinks",S=1===t,w=i()[y];S&&b&&r((0,c.Uy)(e=>{var t;let n=null!==(t=e.discoveryBotCachedList[null!=v?v:""])&&void 0!==t?t:[];e.discoveryBotLinks=n,e.discoveryBotListStatus.count=n.length})),r((0,c.Uy)(e=>{let t=e[x];b?Object.assign(t,{loading:!0,selectedTagId:v||e.discoveryBotListStatus.selectedTagId}):Object.assign(t,{loading:!0})}));try{let e={recommend_type:a,page_index:t,page_size:n};v&&(e.tag_id=v);let{data:u}=await f.Ox.RecommendBots(e),{bot_list:d=[],has_more:p=!1,tag_list:m=[],selected_tag_id:g,trace_map:k}=u||{},j=i().discoveryBotListStatus.selectedTagId;if(g&&-1!==j&&g!==j)return;let{request_id:M}=k||{},C=(0,o.Z)((0,l.Z)(d||[],"bot_id"),e=>({botID:e.bot_id||""})),I=_(S?[]:w,C);r((0,c.Uy)(e=>{if(b){var t;let n=null!==(t=e.discoveryBotListStatus.tagList)&&void 0!==t?t:[],r=m.reduce((e,t)=>(t.tag_id&&(e[t.tag_id]=t),e),{}),i=h.reduce((e,t)=>{let n=r[t.apiTagID];return n&&e.push({...n,tag_id:t.newTagID}),e},[]),a=i.every((e,t)=>{var r;return e.tag_id===(null===(r=n[t])||void 0===r?void 0:r.tag_id)}),o=e.discoveryBotListStatus.selectedTagId,l={loading:!1,failed:!1,count:I.length,hasMore:p,tagList:a?n:i,selectedTagId:-1===o?g:o};null==d||d.map(t=>{t.bot_id&&(e.botIdToRequestIdMap[t.bot_id]=M)}),Object.assign(e[x],l)}else Object.assign(e[x],{loading:!1,failed:!1,count:I.length,hasMore:p});e[y]=I,"discoveryBotLinks"===y&&v&&(e.discoveryBotCachedList[v]=I),e.botMap=(0,s.Z)(d||[],(e,t)=>(t.bot_id&&(e[t.bot_id]=t),e),{...e.botMap})}))}catch(e){r((0,c.Uy)(t=>{Object.assign(t[x],{failed:!0,loading:!1,error:e})})),e instanceof Error&&p.k.persist.error({message:`loadBotList failed size:${n} index:${t}, type: ${a}`,error:e})}},initProfileBotList(e){let{size:t,visit_id:n}=e;i().loadProfileBotList({index:"0",size:t,visit_id:n})},async loadProfileBotList(e){let{index:t,size:n,visit_id:a}=e,{profileBotLinks:u}=i(),d="0"===t;r((0,c.Uy)(e=>{e.profileBotListStatus.loading=!0}));try{let{data:e}=await f.UZ.ProfileBotList({index:t,limit:n,visit_id:a}),{profile_bot_list:i=[],has_more:p=!1,last_index:m,total:v}=e||{},h=(i||[]).map(e=>{var t;return{...e,icon_url:null===(t=e.icon_image)||void 0===t?void 0:t.tiny_url}}),g=(0,o.Z)((0,l.Z)(h||[],"bot_id"),e=>({botID:e.bot_id||""})),b=_(d?[]:u,g);r((0,c.Uy)(e=>{Object.assign(e.profileBotListStatus,{loading:!1,failed:!1,count:b.length,hasMore:p,last_index:m}),e.profileBotLinks=b,e.profileBotCount=Number(v),e.botMap=(0,s.Z)(h||[],(e,t)=>(t.bot_id&&(e[t.bot_id]=t),e),{...e.botMap})}))}catch(e){throw r((0,c.Uy)(e=>{Object.assign(e.profileBotListStatus,{failed:!0,loading:!1})})),e instanceof Error&&p.k.persist.error({message:`loadBotList failed size:${n} index:${t}, type: profileBotLinks`,error:e}),e}},resetProfileBotListStatus(){r((0,c.Uy)(e=>{Object.assign(e.profileBotListStatus,x.profileBotListStatus)}))},deleteBotInChoicenessBotLinks(e){r((0,c.Uy)(t=>{t.choicenessBotLinks=t.choicenessBotLinks.filter(t=>t.botID!==e)}))},resetDiscoverBotListSelectedTagId(){r((0,c.Uy)(e=>{e.discoveryBotListStatus.selectedTagId=-1}))}}},_=(e,t)=>(0,u.Z)(e.concat(t),"botID"),S=(e,t)=>t?(0,a.Ue)()((0,i.mW)((0,i.XR)(y),{name:e})):(0,a.Ue)()((0,i.XR)(y)),w=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{_useBotStore:r}=w.prototype;if(r)return r(...t);throw Error("useBotStore is not initialized")},k=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{_useGuestBotStore:r}=k.prototype;if(r)return r(...t);throw Error("useBotStore is not initialized")};function j(e){let{_useBotStore:t}=w.prototype||{},{_useGuestBotStore:n}=k.prototype||{};if(!t){let t=S("flow-web-bot-store",e);Object.setPrototypeOf(w.prototype,t),Object.defineProperties(w,{...Object.getOwnPropertyDescriptors(t)}),w.prototype._useBotStore=t}if(!n){let t=S("flow-web-guest-bot-store",e);Object.setPrototypeOf(k.prototype,t),Object.defineProperties(k,{...Object.getOwnPropertyDescriptors(t)}),k.prototype._useGuestBotStore=t}}let M=e=>{let t=w(t=>e?t.botMap[e]:void 0,r.X),n=k(t=>e?t.botMap[e]:void 0,r.X);return t||n},C=e=>w.getState().botIdToRequestIdMap[e||""]},218523:function(e,t,n){n.d(t,{KA:function(){return l},R:function(){return u},Wr:function(){return c}});var r,i=n(231462),a=n(118200),o=n(561200);let l=((r={}).CLOSE="close",r.OPEN="open",r),s={routesStack:[],routesStateMap:{},payload:{},activeKey:void 0,state:"replace",lastShowStatus:{},mode:""},u=(0,i.Ue)()(e=>({...s,changeMode:t=>e(()=>({mode:t})),setPayload:t=>e(()=>({payload:t})),setStack:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e(()=>({routesStack:t,state:"replace",routesStateMap:(0,o.Uy)({},e=>{for(let n=0;n<Math.min(r.length,t.length);n+=1)e[n]=r[n]})}))},setActiveKey:t=>e(()=>({activeKey:t||void 0})),goBack:()=>e(e=>{let{routesStack:t,routesStateMap:n}=e;return{routesStack:[...t.slice(0,-1)],state:"pop",routesStateMap:(0,o.Uy)(n,e=>{delete e[t.length-1]})}}),push:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{state:r}=n;e(e=>{let{routesStack:n,routesStateMap:i}=e;return{routesStack:[...n,t],state:"push",routesStateMap:(0,o.Uy)(i,e=>{r&&(e[n.length]=r)})}})},setLastShowStatus:(t,n)=>e(e=>({lastShowStatus:{...e.lastShowStatus,[t]:n}}))})),c=()=>{var e;let{routesStateMap:t,routesStack:n}=u(e=>{let{routesStateMap:t,routesStack:n}=e;return{routesStateMap:t,routesStack:n}});return null!==(e=(0,a.Z)(t,n.length-1))&&void 0!==e?e:{}}},267458:function(e,t,n){n.d(t,{w:function(){return r}});let r=new(n(297091)).M},451630:function(e,t,n){let r,i;n.r(t),n.d(t,{default:function(){return iG}});var a,o=n(429996),l=n(873375),s=n(597765),u=n(165439),c=n(353334),d=n(327386),f=n(529537),p=n(669160),m=n.n(p),v=n(424228);let h=[n(493913).O];var g=n(829619),b=n(67864),x=n(93708),y=n(708481),_=n(15348),S=n(878242),w=n(821192),k=n(931832),j=n(308691),M=n(354187),C=n(210230),I=n(291375),T=n(145625),E=n(877384),N=n(557735),R=n(46793),B=n(468494),O=n(17135),A=n(432626),L=n(636674),P=n(448263),F=n(234761),Z=n(689337);let D=e=>{var t;let n=null!==(t=null==e?void 0:e.toString())&&void 0!==t?t:L.SkillType.Default.toString(),{currentChatViewConfig:r}=(0,x.sQ)("chatViewCoreStore");if(e)return{conversation_id:null==r?void 0:r.chatId,conversation_type:"default_new",bot_id:(0,F.IO)(B.useFeedStore.getState())||"",skill_id:n,skill_name:(0,Z.Nu)(e)||""}};var W=n(375292),z=n(894844),U=n(627394);let V=e=>{let{className:t}=e,{toChatPage:n}=(0,W.R)();return(0,U.jsx)("div",{className:"flex items-center cursor-pointer",children:(0,U.jsx)(z.Z,{className:m()("text-s-color-text-disable !text-18 p-3 hover:bg-s-color-bg-trans rounded-s-radius-xs",t),onClick:()=>{var e,t;null==n||n(),null===(e=(t=(0,x.GX)("chatGuidanceStore")).setActiveSkillGuidanceIdentifier)||void 0===e||e.call(t),(0,x.GX)("chatInputStore").resetActiveSkillTypeMap()},"data-testid":"skill-page-close"})})};var $={fade:"fade-ci4JUh","fade-entering":"fade-entering-Vx_6S1",fadeEntering:"fade-entering-Vx_6S1",fadein:"fadein-QtSmD0","fade-exiting":"fade-exiting-tvlSaY",fadeExiting:"fade-exiting-tvlSaY",fadeout:"fadeout-bFN06m","fade-exited":"fade-exited-BC0ttm",fadeExited:"fade-exited-BC0ttm","skill-guidance-view":"skill-guidance-view-O8YT5M",skillGuidanceView:"skill-guidance-view-O8YT5M","guidance-padding-right":"guidance-padding-right-M489VU",guidancePaddingRight:"guidance-padding-right-M489VU","guidance-max-width-container":"guidance-max-width-container-zzVZOi",guidanceMaxWidthContainer:"guidance-max-width-container-zzVZOi"},H=n(529496),G=n(607278),K=n(444614),Q=n(53837),X=n(577831),q=n(644367),J=n.p+"static/image/OnboardingAvatar.0f4f29a4.webp",Y=n.p+"static/image/OnboardingAvatar.683a7a39.gif",ee={header:"header-Q2Pwsb",thin:"thin-meIt5W","center-thin":"center-thin-Jin1lb",centerThin:"center-thin-Jin1lb","center-gray":"center-gray-tIYBvU",centerGray:"center-gray-tIYBvU","chrome70-header":"chrome70-header-R9VH9R",chrome70Header:"chrome70-header-R9VH9R"};let et=e=>{let{t,className:n,hideUsernameBr:r,theme:i,narrowScreen:a}=e;return(0,U.jsx)("div",{className:m()(ee.header,"chrome70-header flex items-center",n),children:(0,U.jsx)("div",{className:"flex justify-center flex-1",children:(0,U.jsxs)("div",{className:m()("m-0 s-font-h1 w-full select-none flex-1",{"!leading-20":a,[ee.thin]:"thin"===i,[ee["center-thin"]]:"center-thin"===i,[ee["center-gray"]]:"center-gray"===i}),children:[(0,U.jsx)("p",{className:"text-transparent bg-[rgba(153,153,153,0.1)] rounded-8",children:t("newChat_greeting_title_doubao")}),(0,U.jsx)("p",{className:m()("text-transparent bg-[rgba(153,153,153,0.1)] rounded-8",!r&&"!mt-12"),children:t("newChat_greeting_TitleLine2")})]})})})},{Media:en,MediaContextProvider:er}=(0,Q.createMedia)({breakpoints:{sm:0,md:560,"sidebar-expanded-md":840}}),ei=e=>{var t;let{className:n,avatar:r=!0,loading:i=!1,guest:a=!1,greeting:l,username:s,title:u,t:c,theme:d="default",dynamicGreetingSize:f=!1,extraNode:p,titleClassName:v,greetingClassName:h,hideUsernameBr:g=!1,narrowScreen:b=!1,greetingWrapperClassName:x,isSidebarExpanded:y}=e,_=(0,X.bH)()||(0,X.vU)(),S="";S=_?Y:J;let w="thin"===d,k=e=>a?e?c("touristMode_newChat_greeting_title_doubao"):c("newChat_greeting_title_doubao"):c("newChat_greeting_TitleLine1",{postProcess:"sprintf",sprintf:[s]}),j=w&&f,M=(0,o.useRef)(null),C=(0,o.useRef)(null),I=M.current,T=C.current,E=()=>{try{if(I&&window&&(0,G.Z)(window.getComputedStyle)&&j){let e=()=>{var t,n;let{width:r}=null!==(t=null==I?void 0:I.getBoundingClientRect())&&void 0!==t?t:{},{width:i}=null!==(n=null==T?void 0:T.getBoundingClientRect())&&void 0!==n?n:{},a=parseInt(getComputedStyle(I).fontSize.replace("px",""),10);i&&r&&r>i&&(a<=16?(I.style.overflow="hidden",I.style.textOverflow="ellipsis"):(I.style.fontSize=`${a-1}px`,I.style.overflow="visible",I.style.textOverflow="",e()))};e()}}catch(e){q.k.persist.error({eventName:"guidance_greeting_resize_error",error:e instanceof Error?e:Error(String(e))})}},{width:N}=null!==(t=null==T?void 0:T.getBoundingClientRect())&&void 0!==t?t:{};return((0,o.useEffect)(()=>{E()},[l,N]),(0,o.useEffect)(()=>{var e;(null===(e=window)||void 0===e?void 0:e.document.fonts)&&!(0,K.Z)(document.fonts.onloadingdone)&&(document.fonts.onloadingdone=E)},[]),i)?(0,U.jsx)(et,{t:c,className:n,narrowScreen:b,theme:d,hideUsernameBr:g}):(0,U.jsx)(er,{children:(0,U.jsxs)("div",{className:m()(ee.header,"chrome70-header flex items-center",n),children:[r&&(0,U.jsx)("img",{src:(0,H.C)(S,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$N-%lJNamw1$2xNNWFtRkhSakJNTW5od1dXa3hhb%ZI%mpCT$-y%XhZ$mRT-%dKdFRteE1NMD%1$1hrNWFtSXlNW*RpTWpWc1ltN$Jkb*96$m5C-$IwWjFX$EpWZEZvelNte*FXRkp3WW0xamRtRlhO$3Rh$0dkM$pHcEpk$1JJ$*pSWldFcH$aRmhO%FE9PQ"}),className:m()("rounded-full mr-20",ee.avatar),draggable:"false"}),(0,U.jsxs)("div",{className:m()("flex justify-between flex-1 max-w-full",{"flex-col":b}),children:[(0,U.jsxs)("div",{ref:C,className:m()("s-font-h1 !font-[Montserrat] overflow-hidden flex-1 text-s-color-text-primary",{"!leading-20":b,[ee.thin]:w,[ee["center-thin"]]:"center-thin"===d,[ee["center-gray"]]:"center-gray"===d},x),children:[(0,U.jsxs)(en,{lessThan:y?"sidebar-expanded-md":"md",children:[(0,U.jsx)("p",{className:m()(v),children:(0,K.Z)(u)?k(!1):u}),(0,U.jsx)("p",{ref:M,className:m()(u||s||a?"!mt-12":void 0,h),"data-testid":"skill-page-title",children:l})]}),(0,U.jsxs)(en,{greaterThanOrEqual:y?"sidebar-expanded-md":"md",children:[(0,U.jsx)("p",{className:m()(a&&"!inline",v),children:(0,K.Z)(u)?k(a):u}),(0,U.jsx)("p",{ref:M,className:m()(a&&"!inline",(u||s)&&!a?"!mt-12":void 0,h),"data-testid":"skill-page-title",children:l})]})]}),p]})]})})},ea=e=>{let{className:t,hideCloseBtn:n,inputSkillType:r,onBeforeSendMessage:i}=e,a=(0,A.g1)(),{activeSkillIdentifier:l,from:s,className:u,appear:d}=(0,x.sQ)("chatGuidanceStore",e=>({activeSkillIdentifier:e.activeSkillIdentifier,from:e.skillGuidancePageFrom,className:e.className,appear:e.appear}),M.X),f=(0,R.ae)(),p=(0,E.n1)(null!=f?f:""),v=(0,B.useFeedStore)(e=>{var t,n;return null===(n=e.localConversationMap[null!=f?f:""])||void 0===n?void 0:null===(t=n.local)||void 0===t?void 0:t.createStatus}),h=(0,P.Z)(r);(0,o.useEffect)(()=>{let e;if(r&&!(0,C.Z)(f)&&v===I.ns.Pending&&p!==r){let t=()=>(0,x.GX)("chatInputStore").updateActiveSkillTypeMap(f,r,T.u.ClickSkill);t(),e=setTimeout(t)}return()=>{clearTimeout(e)}},[r,p,f,v]),(0,o.useEffect)(()=>{!r&&h&&f&&(0,x.GX)("chatInputStore").resetActiveSkillTypeMap()},[r]);let{plugin:b}=(0,y.MM)(l),_=(0,j.ai)(),S=null==_?void 0:_.find(e=>e.skill_type===r),w=D(r),k=(0,N.C3)(s||g.M.DEFAULT),F=e=>{let{exitSkill:t}=e||{};return f&&p&&(t?(0,x.GX)("chatInputStore").closeSkillPanel(f):(0,x.GX)("chatInputStore").updateActiveSkillTypeMap(f,p,T.u.AfterSkill)),Promise.resolve()},Z=function(){let{className:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n?null:(0,U.jsx)(V,{className:e})},W=()=>{let e={renderClose:Z,renderHeader:e=>{let{theme:t="default",icon:n,title:i,greeting:o,className:l,titleClassName:s,close:u=!0,renderClose:c}=e,d=o?(0,U.jsx)(ei,{t:a,avatar:!1,title:null,theme:r===L.SkillType.ImageGeneration?"center-thin":"centered"===t?"center-gray":"thin",greeting:o,dynamicGreetingSize:!0,extraNode:u?c?c(Z):Z():null}):null;return"centered"===t?(0,U.jsxs)("div",{className:l,children:[i&&(0,U.jsx)("div",{className:`
                    mt-28 mb-10 flex items-center justify-center text-s-color-text-secondary
                  `,children:(0,U.jsx)("p",{className:m()("m-0 s-font-h1",s),children:i})}),d]}):(0,U.jsxs)("div",{className:m()("pb-10 pt-8",l),children:[(n||i)&&(0,U.jsxs)("div",{className:"mb-4 flex items-center text-s-color-text-primary",children:[n&&(0,U.jsx)("div",{className:"mr-4 flex h-20 w-20 items-center justify-center text-16",children:n}),(0,U.jsx)("p",{className:"m-0 s-font-small-em",children:i})]}),d]})},reportParams:{scene:(0,N.Uw)(s||g.M.DEFAULT),send_source:"skill_guidance_page_click"},trackParams:{...w,...k?{show_scene:k}:{}},skillConfig:S,from:s||g.M.DEFAULT,onBeforeSendMessage:i,onAfterSendMessage:F};return b?(0,U.jsx)(b.Content,{...e}):null},z=(0,N.nb)(s||g.M.DEFAULT);return(0,o.useEffect)(()=>{l&&(0,O.trackEvent)("enter_page",{enter_from:z})},[l]),(0,U.jsx)(c.ZP,{in:!0,appear:d,timeout:300,children:e=>(0,U.jsx)("div",{className:m()($[`fade-${e}`],$["skill-guidance-view"],"w-full overflow-auto",u,t),"data-testid":"skill-page-root",children:W()})},null!=l?l:"default")};var eo=n(541752),el=n(844550);let es=(e,t)=>{(0,el.t)(e),(0,o.useEffect)(e,t)};var eu=n(574367),ec=n(19755),ed=n(653118),ef=n(836031),ep=n(673520);let em={"skill-guidance-page":m()("w-full flex-1 min-h-0 flex flex-col items-center overflow-hidden","dbx-lg:mt-62"),"skill-guidance-page-footer":"pb-20 empty:pb-0","slide-up":"slide-up-lwvgbE",slideUp:"slide-up-lwvgbE","slide-down":"slide-down-zVXxFj",slideDown:"slide-down-zVXxFj","fade-entering":"fade-entering-yo34jh",fadeEntering:"fade-entering-yo34jh",fadein:"fadein-cokpEf","fade-exiting":"fade-exiting-G0lzGS",fadeExiting:"fade-exiting-G0lzGS",fadeout:"fadeout-A1TEpv","fade-exited":"fade-exited-GhYs2H",fadeExited:"fade-exited-GhYs2H"},ev=e=>{let{conversationId:t,conversationType:n,skillType:r}=e,i=(0,ef.T)(),{currentChatViewConfig:a}=(0,x.sQ)("chatViewCoreStore"),[l,s]=(0,o.useState)(!0);(0,v.C)({onReadyToParse:async()=>{await (0,ec.GR)(300)},plugins:[...h],isLazy:!1});let u=(0,j.CU)();(0,o.useEffect)(()=>(t&&s(!0),()=>{s(!1)}),[t]),(0,o.useEffect)(()=>{r===L.SkillType.ImageGeneration&&(0,y.Q3)("image-artifact-preview")},[r]);let p=(0,o.useMemo)(()=>{var e,t,n,r;let a=(null===(e=i.state)||void 0===e?void 0:e.from)||g.M.DEFAULT;return null===(r=window)||void 0===r||null===(n=r.history)||void 0===n||null===(t=n.replaceState)||void 0===t||t.call(n,(0,d.Z)(i.state,"from"),""),a},[i.state]);es(()=>{(0,_.D)("chatGuidanceService").then(e=>{var t;return null==e?void 0:null===(t=e.setSkillGuidancePageFrom)||void 0===t?void 0:t.call(e,p)})},[p]);let M=(0,eu.Z)(p),C=(0,eu.Z)(r),I=(0,o.useCallback)((0,f.Z)(()=>{q.k.persist.info({eventName:"skill_guidance_page_start",meta:{from:M.current,skill_type:C.current,skill_type_str:(0,Z.ci)(C.current),skill_id:(0,Z.ci)(C.current)}})}),[u]);(0,o.useLayoutEffect)(()=>{l&&u&&I()},[l,u]),es(()=>{(0,_.D)("chatGuidanceService").then(e=>{var t;return null==e?void 0:null===(t=e.setAppear)||void 0===t?void 0:t.call(e,!0)})},[]);let{onBeforeSendMessage:T}=(0,w.MR)({chatId:t,chatType:n,source:`skill_guidance_${r}`,activeSkillType:u}),E=(0,o.useCallback)(()=>(0,U.jsx)(k.xg,{chatId:(null==a?void 0:a.chatId)||"",chatType:b.z.NewThread,specificSkillID:r,forceUseChatInputPlugin:!0}),[null==a?void 0:a.chatId,r]);return(0,U.jsx)(c.ZP,{in:l,unmountOnExit:!0,timeout:400,children:e=>(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{className:em["skill-guidance-page"],children:(0,U.jsx)(ea,{className:m()(em[`fade-${e}`],em["slide-up"],"relative z-0 h-full"),hideCloseBtn:!0,inputSkillType:r,onBeforeSendMessage:T,skillGuidancePageFrom:p},null!=u?u:"default")}),(0,U.jsx)(ed.bo.MaxWidthLayout,{className:em["skill-guidance-page-footer"],children:(0,U.jsx)(S.o,{chatId:(null==a?void 0:a.chatId)||"",chatType:b.z.NewThread,chatKey:null==a?void 0:a.chatKey,ChatInputSlot:E,renderFallback:E})})]})})},eh=(0,o.memo)(function(e){return(0,U.jsx)(eo.SV,{errorBoundaryName:"skill_guidance_page_error",logger:q.k,errorBoundaryScope:eo.f.Page,FallbackComponent:ep.H,children:(0,U.jsx)(ev,{...e})})});var eg=n(475949),eb=n(57637),ex=n(125411),ey=n(454083);let e_={matcher:e=>ey.G.AISpace_DocCanvasOpen===e,handler:e=>n.e("99709").then(n.bind(n,645229)).then(t=>{t.default(e)})};var eS=n(9629),ew=n(426060),ek=n(668889),ej=n(218523);let eM=()=>{let{toChatPage:e}=(0,W.R)();return(0,o.useEffect)(()=>null==e?void 0:e({replace:!0,relative:"route"}),[]),null};var eC=n(629419),eI=n(561965),eT=n(572231),eE=n(231462);let eN={inViewMessageList:[],messageBoxElementsMap:{}},eR=(0,eE.Ue)(()=>({...eN})),eB=e=>{eR.setState({inViewMessageList:e})},eO=()=>{eR.setState(eN)},eA=(e,t)=>{eR.setState(n=>({messageBoxElementsMap:{...n.messageBoxElementsMap,[e]:t}}))};var eL=n(475434),eP=n(744947),eF=n(530836),eZ=n(986091),eD=n(508830);let eW=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,o.useRef)({}),[i,a]=function(e,t){let[n,r]=(0,o.useState)(e),i=(0,o.useRef)(null);return(0,o.useEffect)(()=>()=>{i.current&&clearTimeout(i.current)},[]),[n,e=>{i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{r(e)},200)}]}(!n,0),l=(0,o.useCallback)((e,t)=>{r.current[e]=+!t},[e]);return(0,o.useEffect)(()=>{if(n){a(!1),q.k.persist.info({eventName:"message_list_skeleton_hide_by_disabled"});return}let t=setInterval(()=>{1===((0,eZ.Z)(r.current)?0:(0,eD.Z)(r.current).reduce((e,t)=>e*t,1))&&(q.k.persist.info({eventName:"message_list_skeleton_hide_by_plugins_loaded"}),clearTimeout(i),clearInterval(t),a(!1))},100),i=setTimeout(()=>{q.k.persist.info({eventName:"message_list_skeleton_hide_by_plugins_load_timeout"}),clearInterval(t),a(!1)},4e3);return()=>{r.current={};let{currentChatViewConfig:n}=(0,x.GX)("chatViewCoreStore");(null==n?void 0:n.chatKey)!==e&&a(!0),clearInterval(t),clearTimeout(i)}},[e,n]),{skeletonShow:i&&!(null==e?void 0:null===(t=e.startsWith)||void 0===t?void 0:t.call(e,"local_")),pluginLoadCounter:l}};var ez=n(107599),eU=n(322639),eV=n(886421),e$=n(475879),eH=n(723998),eG=n(513370),eK=n(126628),eQ=n(562502);let eX=e=>{let{matcher:t,loading:n}=(0,eK.CS)();if(n||!t)return null;let r=t.map(t=>t(e)).filter(e=>void 0!==e),i=r.find(e=>void 0!==e),a=(0,eQ.b)(r);if(a.length>1){let e=Error(`${a.join(", ")}`);q.k.persist.warning({eventName:"duplicate_matcher_of_message_list_bottom_btn_plugin",error:e})}return i},eq=e=>{let{pluginIdentifier:t,...n}=e,{plugin:r,loading:i}=(0,y.mP)(t);if(i||!r)return null;let{Content:a}=r;return(0,U.jsx)(a,{...n})},eJ=e=>{let{conversationId:t,unionMessageList:n}=e,{isSelectMode:r}=(0,eL.p)(e=>({isSelectMode:e.isSelectMode}),M.X),{inViewMessageList:i}=eR(e=>({inViewMessageList:e.inViewMessageList}),M.X),a=eX({isSelectMode:r,inViewMessageList:i,conversationId:t,unionMessageList:n});return a?(0,U.jsx)(eq,{pluginIdentifier:a,conversationId:t,inViewMessageList:i,unionMessageList:n}):null};var eY=n(875160),e0=n(148824),e1=n(484480),e2=n(645007),e4=n(828652),e3=n(594175),e6=n(524518),e9=n(797763),e5=n(474227),e8=(0,n(856206).o)(o.useLayoutEffect),e7=n(720246);let te=()=>"undefined"!=typeof performance?performance.now():Date.now(),tt=e=>{let{heightMap:t,ids:n,scrollTop:r}=e,i=0;for(let e of n){var a;if(i>=r)return{id:e,top:i-r};i+=null!==(a=t[e])&&void 0!==a?a:0}return null};var tn=n(743741),tr=n(177056),ti=n(105189),ta=n(862589);function to(e){let{className:t,style:n,item:r,scrollIntoItemId:i,children:a,getId:o,onInView:l,onResize:s}=e;return(0,U.jsx)(ta.D,{onResize:s,children:(e,s)=>(0,U.jsx)(tn.df,{className:m()("container-PvPoAn",t),style:n,onChange:e=>{null==l||l(o(r),e)},children:(0,U.jsx)(ti.R,{className:"item-kDun2N",ref:s,enabled:!(0,K.Z)(i)&&i===(null==o?void 0:o(r)),children:a(r,{anchorTopRef:e})})})})}let tl=(0,o.memo)(to,(e,t)=>(0,e5.Z)((0,tr.Z)(e,G.Z),(0,tr.Z)(t,G.Z)));var ts=n(186326);let tu={offsetHeight:0,offsetWidth:0,height:0,width:0},tc=(0,o.forwardRef)(function(e,t){let{dataList:n,getId:r,children:i,top:a,bottom:l,keepedBottom:s,enableInterAnchor:u=!0,enableHorizontalAnchor:c=!0,enableVerticalAnchor:d=!0,reverse:f=!0,memorizeItem:p=!1,bottomAttaching:v=!0,anchorWhenOverflow:h=!0,overflowAnchorOffset:g=0,anchorWhenScrolling:b=!0,onScroll:x,onReachTop:y,onReachBottom:_,onInViewItemsChange:S,className:w,style:k,"data-testid":j}=e,M=(0,o.useRef)(null),C=(0,o.useRef)(),I=(0,o.useRef)(null),T=(0,o.useRef)(null),E=(0,o.useRef)(),N=(0,o.useRef)(),R=(0,o.useRef)(),B=(0,o.useRef)([]),O=(0,o.useMemo)(()=>n.map(r),[n]),A=(0,P.Z)(O),L=(0,o.useRef)(f),F=(0,o.useRef)(!f),Z=(0,o.useRef)(null),D=(0,o.useRef)(),[W,z]=(0,o.useState)();(0,o.useEffect)(()=>{(0,K.Z)(W)||z(void 0)},[W]),e8(()=>{if(!f&&(!A||!(0,e1.Z)(A,O).length)){var e;null===(e=M.current)||void 0===e||e.scrollToBottom()}},[O]),e8(()=>{B.current=B.current.filter(e=>O.includes(e)),f||J()},[O]);let V=(e,t)=>{C.current||(C.current={});let n=r(e);t!==C.current[n]&&(C.current[n]=t)},$=e=>{var t;return null===(t=C.current)||void 0===t?void 0:t[r(e)]},H=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;M.current&&(L.current=M.current.getScrollBottom()<10+e)},Q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;M.current&&(F.current=M.current.getScrollTop()<10+e)},q=()=>!!M.current&&10>M.current.getScrollBottom(),J=()=>{M.current&&L.current&&M.current.scrollToBottom()},Y=()=>(0,e2.Z)(B.current,e=>O.indexOf(e)),ee=e=>(0,e4.Z)(v)?v:v(e),et=e=>{var t,r,i,a;let{item:o,currentHeight:l,previousHeight:s}=e;if(!M.current||o!==(0,e3.Z)(n)||!((0,e4.Z)(h)?h:h(o))||!s)return!1;let u=M.current.getContainerHeight(),c=n.indexOf(o),d=(0,e6.Z)(g)?g:g(o),f=n.slice(c-d,c),p=(0,e9.Z)(f,e=>{var t;return null!==(t=$(e))&&void 0!==t?t:0});return l>u+10-(null!==(i=null===(t=I.current)||void 0===t?void 0:t.clientHeight)&&void 0!==i?i:0)-(null!==(a=null===(r=T.current)||void 0===r?void 0:r.clientHeight)&&void 0!==a?a:0)-p},en=e=>(0,G.Z)(b)?b(e):b,er=e=>{var t,n;let r=(0,G.Z)(u)?u(e):u;return(null===(n=M.current)||void 0===n||null===(t=n.isScrollAnchoringPaused)||void 0===t||!t.call(n))&&r},ei=()=>(0,K.Z)(N.current)?1/0:te()-N.current,ea=()=>(0,K.Z)(R.current)?1/0:te()-R.current,eo=async e=>{if(D.current!==e)D.current=e,!(!f||!c||q())&&(await ev(),eg())},el=async e=>{let{current:t,previous:n}=e;(!n||t.offsetWidth===n.offsetWidth&&t.offsetHeight!==n.offsetHeight&&(0,K.Z)(N.current))&&(await (0,ec.GR)(0),eg())},es=(e,t)=>{let{current:n,previous:i=tu}=t;if(!M.current)return;let{offsetHeight:a}=n,{offsetHeight:o}=null!=i?i:{},l=a-o;o&&(H(Math.max(0,l)),ee(e)&&!et({item:e,currentHeight:a,previousHeight:o})&&J());let s=Y();if(s&&O.indexOf(r(e))<O.indexOf(s)&&F.current){let e=M.current.getScrollTop();l&&M.current.scrollTo(e+l)}},eu=(e,t)=>{let{current:n,previous:i=tu,targetStandBy:a}=t,{offsetHeight:o,offsetWidth:l}=n,{offsetHeight:s,offsetWidth:u}=null!=i?i:{};if(!u||!l)return;if(l!==u){eo(l);return}if(!M.current||!er(e)||!a)return;let c=ei();if(c<50&&c>1&&!en(e)||(o&&a.offsetHeight!==o&&(a.style.height=`${o}px`),10>M.current.getScrollBottom()&&ee(e)&&!et({item:e,currentHeight:o,previousHeight:s})))return;let d=Y();if(!d||O.indexOf(r(e))<O.indexOf(d))return;let f=M.current.getScrollTop(),p=o-s;if(p<0&&-p>f){(0,K.Z)(E.current)||M.current.scrollTo(E.current);return}M.current.scrollTo(f-p),E.current=M.current.getScrollTop()},ed=(0,e7.i)((e,t)=>{t?B.current.includes(e)||B.current.push(e):B.current=B.current.filter(t=>t!==e),S&&S(B.current.map(e=>n.find(t=>r(t)===e)).filter(e=>!(0,K.Z)(e)))}),ef=(0,e7.i)((e,t)=>{let{current:{offsetHeight:n}}=t;V(e,n),f?eu(e,t):es(e,t)}),ep=(0,e7.i)(e=>{let{previous:t,current:n}=e;if(!f||!d||!t||!M.current||L.current)return;let{offsetHeight:r,offsetWidth:i}=t,{offsetHeight:a,offsetWidth:o}=n;if(o!==i)return;let l=M.current.getScrollTop();M.current.scrollTo(l+(a-r))}),em=(0,e7.i)(()=>{if(!Z.current||!M.current)return;let{id:e,top:t}=Z.current,n=O.indexOf(e);if(-1===n)return;let r=O.slice(0,n),i=(r.length?(0,e9.Z)(r,e=>{var t,n;return null!==(n=null===(t=C.current)||void 0===t?void 0:t[e])&&void 0!==n?n:0}):0)-t;if(i<0||1>Math.abs(M.current.getScrollTop()-i))return;let a=M.current.getContainer();!(i>a.scrollHeight-a.scrollTop)&&(M.current.scrollTo(i),R.current=te())}),ev=async()=>{for(let e=0;e<5;e++)await new Promise(e=>requestAnimationFrame(e)),em()},eh=(0,e7.i)(()=>{if(!M.current)return;let e=M.current.getScrollTop();!(ei()>50&&0===e||ei()>50||50>ea())&&eg()}),eg=(0,e7.i)(()=>{var e;if(!M.current)return;let t=M.current.getScrollTop(),n=tt({heightMap:null!==(e=C.current)&&void 0!==e?e:{},ids:O,scrollTop:t});!(0,e5.Z)(n,Z.current)&&(Z.current=n)}),eb=e=>e?{...e,scrollIntoItemsById:z}:null,ex=(0,o.useCallback)(e=>{let n=eb(e);(0,G.Z)(t)?t(n):t&&(t.current=n),M.current=e},[]),ey=(0,U.jsx)("div",{ref:T,className:"top-FLPRDF",children:(0,G.Z)(a)?a():a}),e_=(0,U.jsxs)("div",{ref:I,className:"bottom-C8bVRp",children:[(0,G.Z)(l)?l():l,(0,G.Z)(s)?s():s]}),eS=p?tl:to;return(0,U.jsxs)(ts.pf,{"data-testid":j,ref:ex,className:m()("container-gkoWqI",w,{"reverse-BdVQca":f}),style:k,showScrollbar:!(0,X.ct)(),reverse:f,onScroll:()=>{eh(),N.current=te(),null==x||x()},reachBottomThreshold:10,reachTopThreshold:10,onReachBottom:()=>{null==_||_(),H()},onLeaveBottom:H,onReachTop:()=>{null==y||y(),Q()},onLeaveTop:Q,onContentResize:ep,children:[f?e_:ey,(0,U.jsx)(ta.D,{onResize:el,children:e=>(0,U.jsx)("div",{ref:e,className:m()("inter-H_fm37"),children:n.map(e=>(0,U.jsx)(eS,{item:e,scrollIntoItemId:W,getId:r,onInView:ed,onResize:t=>{ef(e,t)},children:i},r(e)))})}),f?ey:e_]})});var td=n(563323),tf=n(228535);let tp=(e,t)=>{var n,r,i;let a=null===(r=window)||void 0===r?void 0:null===(n=r.navigator)||void 0===n?void 0:n.mimeTypes;for(let n in a)if((null==a?void 0:null===(i=a[n])||void 0===i?void 0:i[e])===t)return a[n];return null},tm=()=>!!(tp("type","application/cenroll.cenroll.version.1")||tp("type","application/hwepass2001.installepass2001")),tv=()=>"undefined"!=typeof navigator&&"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari/537.36"===navigator.userAgent&&tm(),th=e=>{if("divider"!==e.type)return"block"===e.type?(0,e3.Z)(e.data):e.data},tg=e=>{if("divider"===e.type)return!1;let t=th(e);if(!t)return!1;let{conversationId:n}=e,r=(0,eP.K9)(eF.useMessageStore.getState(),n,t);return!(!r||(0,tf.fdv)(r))&&!(0,e0.zu)(r)&&!(0,tf.FFC)(r)},tb=(e,t)=>{if("divider"===t.type)return 0;let{conversationId:n}=t,r=e.indexOf(t),i=(0,td.Z)(e.slice(0,r),e=>{let t=th(e);if(!t)return!1;let r=(0,eP.K9)(eF.useMessageStore.getState(),n,t);return(0,tf.Yns)(r)});return r-i},tx=e=>{if("divider"===e.type)return!0;let{conversationId:t}=e,n=th(e);if(!n)return!0;let r=(0,eP.K9)(eF.useMessageStore.getState(),t,n);return!((0,tf.fdv)(r)||(0,tf.N0s)(r))},ty=(0,o.forwardRef)(function(e,t){let{dataList:n,children:r,top:i,bottom:a,keepedBottom:l,onInViewItemsChange:s,className:u,style:c,onReachTop:d,onReachBottom:f,conversationId:p,...m}=e,{onScroll:v}=(0,W.R)({optionalProvider:!0}),{chatViewRef:h,scrollRef:g}=(0,e$.E)(),{onScrollForFPS:b}=(0,eY.wV)({eventName:"message-list-fps-report"}),y=(0,o.useCallback)(()=>{var e,t;null==v||v();let r=(0,e0.zu)((0,eP.Sv)(eF.useMessageStore.getState(),p||""));b({version:"0",message_count:n.length,last_message_is_finish:r?"1":"0",open_canvas:(null===(t=(0,x.Wp)("chatViewCanvasStore"))||void 0===t?void 0:null===(e=t.getState())||void 0===e?void 0:e.isExpand)?"1":"0"})},[v,b]),_=(0,o.useRef)(!0);(0,o.useImperativeHandle)(t,()=>({setEnableInterAnchor:S}),[]);let S=(0,e7.i)(e=>{_.current=e}),w=(0,e7.i)(()=>_.current);return(0,U.jsx)(tc,{...m,className:u,style:c,reverse:!tv(),dataList:n,getId:e=>{var t;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:""},top:i,bottom:a,keepedBottom:l,memorizeItem:!0,onReachTop:()=>{var e,t;null===(t=h.current)||void 0===t||null===(e=t.onLoadMore)||void 0===e||e.call(t),null==d||d()},onReachBottom:f,ref:g,onScroll:y,onInViewItemsChange:s,enableInterAnchor:w,anchorWhenOverflow:tg,overflowAnchorOffset:e=>tb(n,e),anchorWhenScrolling:tx,children:r})}),t_=e=>{let{bottomThreshold:t=0,onShow:n,onHide:r}=e,{inView:i,ref:a}=(0,tn.YD)({initialInView:!0});return(0,o.useEffect)(()=>{i?null==n||n():null==r||r()},[i]),(0,U.jsx)("div",{className:"container-E4s_D2",ref:a,style:{height:t}})};var tS=n(793878);let tw=e=>(0,U.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:46,height:46,fill:"none",viewBox:"0 0 46 46",...e,children:[(0,U.jsx)("path",{fill:"currentColor",d:"M1 23C1 10.85 10.85 1 23 1s22 9.85 22 22-9.85 22-22 22S1 35.15 1 23"}),(0,U.jsx)("circle",{cx:23,cy:23,r:22.3,stroke:"#0057FF",strokeOpacity:.1,strokeWidth:1.5}),(0,U.jsx)("path",{stroke:"url(#partial_border_svg__a)",strokeWidth:1.5,d:"M45 23c0-12.15-9.85-22-22-22"}),(0,U.jsx)("defs",{children:(0,U.jsxs)("linearGradient",{id:"partial_border_svg__a",x1:23,x2:49.163,y1:1,y2:8.171,gradientUnits:"userSpaceOnUse",children:[(0,U.jsx)("stop",{stopColor:"#0057FF",stopOpacity:0}),(0,U.jsx)("stop",{offset:.502,stopColor:"#0057FF",stopOpacity:.6}),(0,U.jsx)("stop",{offset:1,stopColor:"#0057FF",stopOpacity:0})]})})]}),tk=e=>{let{conversationId:t}=e;return(0,eF.useMessageStore)(e=>{if(!t)return!1;let n=(0,eP.M_)(e,t);return!!n&&(0,eP.Sv)(e,t)===n})};var tj={container:"container-qCMd_k",loading:"loading-Xckt1R",hidden:"hidden-WgOVOG","loading-border":"loading-border-HhwBfA"};let tM=(0,o.forwardRef)(function(e,t){let{className:n,style:r,initialVisible:i=!1,conversationId:a,onClick:l}=e,[s,u]=(0,o.useState)(i),c=tk({conversationId:a});return(0,o.useImperativeHandle)(t,()=>({setVisible:u}),[]),(0,U.jsxs)("div",{id:"to-bottom-button","data-testid":"to-bottom-button","data-visible":s,className:m()(tj.container,n,"relative !bg-dbx-bg-float !border-[0.5px] !border-dbx-line-15 !shadow-none",'after:absolute after:inset-0 after:rounded-full after:bg-transparent after:transition-colors after:duration-150 after:ease-out after:content-[""]',"hover:after:bg-dbx-fill-trans-10-hover",{[tj.hidden]:!s,[tj.loading]:c}),style:r,onClick:l,children:[c&&(0,U.jsx)(tw,{className:tj["loading-border"]}),(0,U.jsx)(tS.u,{className:"size-18 text-dbx-text-primary"})]})});var tC=n(584086);let tI=()=>(0,U.jsx)("div",{className:"float top w-full px-16 max-w-[708px] mx-auto mt-[60px]",children:(0,U.jsx)(tC.hf,{useNewUI:!0})});var tT=n(973576);let tE=e=>{let{className:t,MessageGroupBottomFoundation:n,MessageGroupCenterFoundation:r}=e;return(0,U.jsxs)("div",{className:m()("flex flex-col w-full",t),children:[r&&(0,U.jsx)(r,{}),n&&(0,U.jsx)(n,{})]})},tN=(0,o.createContext)({messages:null,conversationId:"",pluginLoadCounter:()=>null}),tR=()=>{let{messages:e,...t}=(0,o.useContext)(tN);return e?{...t,messages:e}:{...t,messages:[{is_delta:!1}]}};var tB=n(411358);let tO=(e,t)=>{let{matcher:n=[]}=(0,eK.Xu)(),r=(null!=n?n:[]).map(n=>n.matchPlugin(e,t)?n.pluginIdentifier:void 0).filter(e=>void 0!==e),i=r[0],a=(0,eQ.b)(r),{plugin:o,loading:l}=(0,y.KH)(i);return{plugin:o,pluginIdentifier:i,loading:l,duplicateIdentifierList:a}},tA=(e,t)=>{let{matcher:n=[]}=(0,eK.PH)(),r=(null!=n?n:[]).map(n=>n.matchPlugin(e,t)?n.pluginIdentifier:void 0).filter(e=>void 0!==e),i=r[0],a=(0,o.useMemo)(()=>(0,tB.Z)(),[i]),l=(0,eQ.b)(r),{plugin:s,loading:u}=(0,y.Ug)(i);return{pluginLoadId:a,plugin:s,pluginIdentifier:i,loading:u,duplicateIdentifierList:l}};var tL=n(411319);let tP=(0,o.createContext)({message:null}),tF=()=>{let{message:e,...t}=(0,o.useContext)(tP);return e?{...t,message:e}:{...t,message:{is_delta:!1}}};var tZ=n(856556),tD=n(613716),tW=n(245867);let tz=()=>null,tU=e=>{var t;let{message:n,inView:r}=e,i=(null===(t=n.content_blocks_tree)||void 0===t?void 0:t.children)||[],{contentBlockRenderConfigs:a}=(0,tD.lE)(i);return(null==a?void 0:a.length)?(0,U.jsx)("div",{className:m()("flex w-full flex-col","gap-14"),children:a.map(e=>{let{pluginIdentifier:t,PluginContentRender:i,block:a,duplicateIdentifierList:o}=e;return(0,U.jsx)(i,{pluginIdentifier:t,duplicateIdentifierList:o,contentBlock:a,message:n,inView:r})})}):null},tV=e=>{var t,n;let{message:r,inView:i,mouseOver:a}=e,{plugin:o,pluginIdentifier:l,loading:s,duplicateIdentifierList:u}=(0,tD.ob)(r);if(u.length>1){let e=Error(`${u.join(", ")}`);q.k.persist.warning({eventName:"duplicate_matcher_of_receive_message_box",error:e})}if(s)return(0,U.jsx)(tZ.g,{});if(!o)return null;let{Content:c=tz}=o;return(0,U.jsxs)("div",{"data-plugin-identifier":String(l),className:"w-full",children:[(0,U.jsx)(c,{message:r,inView:i,mouseOver:a}),(0,e0.zu)(r)&&(0,U.jsx)(tW.j,{jsonString:null===(n=r.verbose)||void 0===n?void 0:null===(t=n.extra)||void 0===t?void 0:t.risk_tips})]})};var t$=n(156217),tH=n(949377),tG=(0,n(339512).G)((0,U.jsx)(e=>(0,U.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18",...e,children:[(0,U.jsx)("rect",{width:16.5,height:16.5,x:.75,y:.75,stroke:"currentColor",strokeWidth:1.5,rx:8.25}),(0,U.jsx)("path",{fill:"currentColor",d:"M8.214 9.588q.026.753.779.753.735 0 .761-.762l.132-3.87a.77.77 0 0 0-.245-.63.93.93 0 0 0-.657-.246.9.9 0 0 0-.648.245.76.76 0 0 0-.236.622zM8.284 12.845q.297.263.709.263.42 0 .709-.254a.86.86 0 0 0 .297-.674q0-.403-.297-.666a1.01 1.01 0 0 0-.71-.262q-.42 0-.708.262a.86.86 0 0 0-.289.666q0 .402.289.665"})]}),{}));let tK=e=>{let{message:t}=e,{sendMessage:n}=(0,t$.GL)("chatMessageService"),r=(0,tf.FFC)(t),i=(0,tf.Jlm)(t)||(0,tf.aEU)(t),a=(0,tH.q)({sendMessage:n,message:t});return r&&!i?(0,U.jsx)(tG,{"data-testid":"message_box_failed_icon",className:"m-8 text-s-color-alert flex-shrink-0",onClick:a}):null},tQ=e=>{let{inView:t,mouseOver:n}=e,{message:r}=tF(),i=r.content_blocks_tree;return(0,U.jsxs)("div",{"data-testid":"receive_message","data-message-id":r.message_id,className:"flex flex-row w-full",children:[i?(0,U.jsx)(tU,{inView:t,mouseOver:n,message:r}):(0,U.jsx)(tV,{inView:t,mouseOver:n,message:r}),(0,U.jsx)(tK,{message:r})]})};var tX=n(612869),tq=n(713273),tJ=n(840250),tY=n(393648),t0=n(428884),t1=n(487149),t2=n(218708),t4=n(846216);let t3=e=>{let{children:t,unmountPopover:n}=e,r=(0,A.g1)(),i=(0,o.useRef)(null),a=(0,U.jsxs)("div",{children:[(0,U.jsx)("div",{className:"*:!z-1 opacity-100",ref:i}),(0,U.jsx)(t4.K,{tooltipContent:r("message_action_button_more_tooltip"),prefix:(0,U.jsx)(t2.V,{}),"data-testid":"message_action_more"})]});return n?a:(0,U.jsxs)(t1.po,{modal:!1,children:[(0,U.jsx)(t1.im,{children:a}),(0,U.jsx)(t1.s8,{container:i.current,children:(0,U.jsx)(t1.Jt,{side:"bottom",children:t})})]})},t6=((a={})[a.insert=0]="insert",a[a["re-translate"]=1]="re-translate",a[a["deep-search"]=2]="deep-search",a[a["canvas-read"]=3]="canvas-read",a[a["outline-gen"]=4]="outline-gen",a[a["outline-gen-doc"]=5]="outline-gen-doc",a[a.tts=6]="tts",a[a.edit=7]="edit",a[a.copy=8]="copy",a[a.regenerate=9]="regenerate",a[a["creation-download"]=10]="creation-download",a[a["create-doc-by-message"]=11]="create-doc-by-message",a[a.ref=12]="ref",a[a.aispace=13]="aispace",a[a["thread-share"]=14]="thread-share",a[a["thread-collection"]=15]="thread-collection",a[a.report=16]="report",a[a.delete=17]="delete",a[a.debug=18]="debug",a[a.feedback=19]="feedback",a),t9=e=>{var t;return null!==(t=t6[e])&&void 0!==t?t:Number.MAX_SAFE_INTEGER},t5=e=>null==e?void 0:e.sort((e,t)=>t9(e.actionType)-t9(t.actionType));var t8={"message-action-bar":"message-action-bar-raqbg0"};let t7=()=>null,ne="expanded_more_item",nt=(e,t,n,r,i)=>{if(e===ne)return nn(n,t,r,i);let{ButtonContentGroupLoader:a=t7,onEnterEditMode:o,onEnterActionMode:l}=e;return(0,U.jsx)(a,{pluginIdentifier:e.pluginIdentifier,message:t,onEnterEditMode:o,onEnterActionMode:l,reportParams:i,actionVisible:r},String(e.pluginIdentifier))},nn=(e,t,n,r)=>{let i=e.filter(e=>e!==ne).map(e=>{let{DropdownItemContentGroupLoader:i=t7,onEnterEditMode:a,onEnterActionMode:o}=e;return(0,U.jsx)(i,{pluginIdentifier:e.pluginIdentifier,message:t,onEnterEditMode:a,onEnterActionMode:o,reportParams:r,actionVisible:n},String(e.pluginIdentifier))});return(0,U.jsx)(t3,{unmountPopover:!n,children:i},ne)},nr=e=>{let t=(0,tf.xsI)(e),n=(0,tf.Ioq)(e)||(0,tf.$sc)(e),r=(0,tf.pp8)(e),i=(0,tf.mT2)(e),a=(0,tf.q8s)(e),o=(0,tf.gch)(e),l=(0,tY.M7)(),s=(0,eP.Jp)(eF.useMessageStore.getState(),e.conversation_id||"",e.message_id||"");return!l&&s||t||n&&!r&&!i||a||o},ni=e=>!(0,tY.M7)(),na=e=>{let t=(0,tf.pp8)(e),n=(0,tf.mT2)(e),r=(0,tf.G7Q)(e),i=(0,tf.lpb)(e),a=(0,tf.ZRq)(e),o=(0,tf.RF2)(e),l=(0,tf.vlk)(e),s=(0,tf.C_i)(e),u=(0,tY.M7)(),c=(0,tJ.v)(e),d=(0,eP.Jp)(eF.useMessageStore.getState(),e.conversation_id||"",e.message_id||""),f=(0,tf.Lyd)(e),p=!(0,tf.hWN)(e)&&u&&!(0,tf.Kzj)(e)&&c&&d&&a&&!o&&!l;return(r||t||n||i||s||f)&&p},no=e=>{let{message:t,pluginConfigs:n,mouseOver:r,inView:i,className:a,observeParents:o,reportParams:l}=e,s=t5(n),u=(0,tX.Z)((0,tq.Z)(s,e=>"main"===e.area),(e,t)=>!!e.actionType&&!!t.actionType&&e.actionType===t.actionType),c=(0,tX.Z)((0,tq.Z)(s,e=>"fold"===e.area),(e,t)=>!!e.actionType&&!!t.actionType&&e.actionType===t.actionType),d=(0,tX.Z)((0,tq.Z)(s,e=>"expand"===e.area),(e,t)=>!!e.actionType&&!!t.actionType&&e.actionType===t.actionType),f=(0,tX.Z)((0,tq.Z)(s,e=>"third"===e.area),(e,t)=>!!e.actionType&&!!t.actionType&&e.actionType===t.actionType),p=nr(t),v=na(t),h=ni(t);if(p)return null;if(h)return(0,U.jsx)("div",{className:m()("flex flex-col justify-end h-40 w-full select-none"),"data-testid":"message_action_bar"});let g=[...u,...c.length>0?[ne]:[]],b=v||r;return(0,U.jsx)("div",{className:m()("flex flex-col justify-end h-40 w-full select-none",b?"opacity-100":"opacity-0 pointer-events-none"),"data-testid":"message_action_bar",children:v||i?(0,U.jsxs)("div",{className:m()(t8["message-action-bar"],"flex flex-row w-full group",a),children:[(null==u?void 0:u.length)?(0,U.jsx)(t0.D,{className:m()("message-action-button-main","flex w-fit min-w-0 items-center gap-10 self-center"),items:g,minVisibleItems:0,visibleItemRenderer:e=>nt(e,t,c,b,l),collapseFrom:"end",overflowRenderer:e=>nn([...e,...c],t,b,l),observeParents:o}):null,(0,U.jsx)("div",{className:`
              mr-12 hidden h-12 w-0 items-center self-center rounded-[0.5px] border-[0.5px]
              border-solid border-[var(--s-color-border-secondary)]
              first:hidden
              last:hidden
              [&:has(+.message-action-button-expand)]:block
            `}),(null==d?void 0:d.length)?(0,U.jsx)("div",{className:m()("message-action-button-expand","flex w-fit min-w-0 items-center gap-10 self-center"),children:d.map(e=>nt(e,t,[],b,l))}):null,(0,U.jsx)("div",{className:`
              mx-12 hidden h-12 w-0 items-center self-center rounded-[0.5px] border-[0.5px]
              border-solid border-[var(--s-color-border-secondary)]
              first:hidden
              last:hidden
              [&:has(+.message-action-button-third)]:block
            `}),(null==f?void 0:f.length)?(0,U.jsx)("div",{className:m()("message-action-button-third","flex w-fit min-w-0 items-center gap-12 self-center"),children:f.map(e=>nt(e,t,[],b))}):null]}):null})},nl=e=>{let{message:t,pluginConfigs:n,inView:r,mouseOver:i,observeParents:a,reportParams:o}=e;return(0,U.jsx)(no,{className:"justify-end relative -right-10",message:t,pluginConfigs:n,inView:r,mouseOver:i,observeParents:a,reportParams:o})},ns=e=>{let{message:t,pluginConfigs:n,inView:r,mouseOver:i,observeParents:a,reportParams:o}=e;return(0,U.jsx)(no,{message:t,pluginConfigs:n,inView:r,mouseOver:i,observeParents:a,reportParams:o})},nu=e=>{let{pluginIdentifier:t,...n}=e,{plugin:r,loading:i}=(0,y.A6)(t);if(i)return null;let a=null==r?void 0:r.ButtonContentGroups;return(0,U.jsx)(U.Fragment,{children:a?a.map((e,t)=>(0,U.jsx)(e,{...n},t)):null})},nc=e=>{let{pluginIdentifier:t,...n}=e,{plugin:r,loading:i}=(0,y.A6)(t);if(i)return null;let a=null==r?void 0:r.DropdownItemContentGroups;return(0,U.jsx)(U.Fragment,{children:a?a.map((e,r)=>(0,U.jsx)(e,{...n},String(t)+r)):null})},nd=(e,t)=>{let{matcher:n=[]}=(0,eK.aU)();return{messageActionPluginConfig:(null!=n?n:[]).map(t=>t.matchPlugin(e)?t:void 0).filter(e=>(null==e?void 0:e.pluginIdentifier)!==void 0).map(e=>({pluginIdentifier:e.pluginIdentifier,area:e.area,actionType:e.actionType,onEnterActionMode:t,ButtonContentGroupLoader:nu,DropdownItemContentGroupLoader:nc}))}},nf=(e,t)=>{let{matcher:n=[]}=(0,eK.GQ)(),r=(null!=n?n:[]).map(n=>n.matchPlugin(e,t)?n.pluginIdentifier:void 0).filter(e=>void 0!==e),i=r[0],a=(0,eQ.b)(r),{plugin:o,loading:l}=(0,y.sw)(i);return{plugin:o,pluginIdentifier:i,loading:l,duplicateIdentifierList:a}},np=e=>{let{matcher:t=[]}=(0,eK.qP)(),n=(null!=t?t:[]).map(t=>t.matchPlugin(e)?t.pluginIdentifier:void 0).filter(e=>void 0!==e),r=n[0],i=(0,eQ.b)(n),{plugin:a,loading:o}=(0,y.Ny)(r);return{plugin:a,pluginIdentifier:r,loading:o,duplicateIdentifierList:i}},nm=()=>null,nv=e=>{let{message:t}=e,{plugin:n}=np(t),{Content:r=nm}=n||{};return(0,U.jsx)(r,{message:t})},nh=()=>null,ng=e=>{let{message:t,actionMode:n,updateActionMode:r}=e,{plugin:i}=nf(t,n),{Content:a=nh}=i||{};return(0,U.jsx)(a,{message:t,onExitActionMode:()=>r("")})},nb=e=>{let{message:t}=e,[n,r]=(0,o.useState)(""),{messageActionPluginConfig:i}=nd(t,r),a=i.filter(e=>["copy","debug","report","tts"].includes(e.actionType));return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)("div",{className:"flex flex-row flex-grow max-w-full min-w-0",children:[(0,U.jsx)(ns,{inView:!0,mouseOver:!0,message:t,pluginConfigs:a}),(0,U.jsx)(nv,{message:t})]}),(0,U.jsx)(ng,{message:t,actionMode:n,updateActionMode:()=>r("")})]})},nx=e=>{let{mouseOver:t,inView:n}=e,{message:r}=tF(),{plugin:i,duplicateIdentifierList:a}=(0,tD.ff)(r);if(a.length>1){let e=Error(`${a.join(", ")}`);q.k.persist.warning({eventName:"duplicate_matcher_of_send_message_box_bottom",error:e})}if(!i)return null;let{Content:o}=i;return(0,U.jsx)(o,{message:r,mouseOver:t,inView:n,actionBarComponentNode:(0,U.jsx)(nb,{message:r}),suggestList:null})},ny=e=>{let{message:t}=e,n=(0,x.sQ)("chatMessageBoxLayoutStore",e=>e.receiveMessageBoxConfig.containerDataAttr,M.X),r=(0,eP.Jp)(eF.useMessageStore.getState(),t.conversation_id||"",t.message_id||"");r&&eT.Z.getState().markMessageListPerformance("lastMessageBoxRenderStartTimestamp");let i=r?document.querySelector(`[data-message-id="${t.message_id}"]`):null;return(0,o.useEffect)(()=>{(null==i?void 0:i.clientHeight)&&eT.Z.getState().markMessageListPerformance("lastMessageBoxRenderFinishTimestamp")},[i]),(0,U.jsx)(tP.Provider,{value:{message:t},children:(0,U.jsx)(tL.UG,{dataAttributes:{"data-attr":n},className:m()("w-full max-w-full s-font-base text-s-color-text-secondary p-0 rounded-s-radius-s bg-transparent"),MessageBoxTopFoundation:null,MessageBoxLeftFoundation:null,MessageBoxBottomFoundation:nx,MessageBoxRightFoundation:null,MessageBoxCenterFoundation:tQ})})},n_=()=>{let{messages:e,conversationId:t,pluginLoadCounter:n}=tR(),{plugin:r,duplicateIdentifierList:i,loading:a,pluginLoadId:l}=tA("",e);if(i.length>1){let e=Error(`${i.join(", ")}`);q.k.persist.warning({eventName:"duplicate_matcher_of_receive_message_group_center",error:e})}if((0,o.useEffect)(()=>{n(l,a)},[a]),(0,o.useEffect)(()=>(n(l,a),()=>{null==n||n(l,!1)}),[l]),!r)return null;let{Content:s}=r;return(0,U.jsx)(s,{ReceiveMessageBox:ny,messages:e,conversationId:t})},nS=()=>{let{messages:e,conversationId:t}=tR(),{plugin:n,duplicateIdentifierList:r}=tO("",e);if(r.length>1){let e=Error(`${r.join(", ")}`);q.k.persist.warning({eventName:"duplicate_matcher_of_receive_message_group_bottom",error:e})}if(!n)return null;let{Content:i}=n;return(0,U.jsx)(i,{messages:e,conversationId:t})},nw=e=>{let{messages:t,conversationId:n,pluginLoadCounter:r}=e,{bottom:i}=(0,x.sQ)("chatMessageGroupLayoutStore",e=>e.getMessageGroupArea(),M.X);return(0,U.jsx)(tN.Provider,{value:{messages:t,conversationId:n,pluginLoadCounter:r},children:(0,U.jsx)(tE,{MessageGroupBottomFoundation:i.visible?nS:null,MessageGroupCenterFoundation:n_})})},nk=e=>{let{conversationId:t,messageLinks:n,pluginLoadCounter:r}=e,i=(0,eF.useMessageStore)(e=>n.map(n=>(0,eP.K9)(e,t,n)).filter(e=>!!e),M.X);return i.length?(0,U.jsx)(nw,{messages:i,conversationId:t,pluginLoadCounter:r}):null};var nj=n(719684),nM=n(536957);let nC=(0,o.createContext)({onEnterEditMode:()=>null,editMode:!1,message:null,onExitEditMode:()=>null,pluginLoadCounter:()=>null}),nI=()=>{let{message:e,...t}=(0,o.useContext)(nC);return e?{...t,message:e}:{...t,message:{is_delta:!1}}},nT=e=>{let{mouseOver:t,inView:n}=e,{message:r,editMode:i}=nI(),{plugin:a,duplicateIdentifierList:o}=(0,nM.X0)(r);if(o.length>1){let e=Error(`${o.join(", ")}`);q.k.persist.warning({eventName:"duplicate_matcher_of_send_message_box_top",error:e})}if(!a||i)return null;let{Content:l}=a;return(0,U.jsx)(l,{message:r,mouseOver:t,inView:n})},nE=e=>{let{mouseOver:t,inView:n}=e,{message:r,editMode:i}=nI(),{plugin:a,duplicateIdentifierList:o}=(0,nM.Nh)(r);if(o.length>1){let e=Error(`${o.join(", ")}`);q.k.persist.warning({eventName:"duplicate_matcher_of_send_message_box_right",error:e})}if(!a||i)return null;let{Content:l}=a;return(0,U.jsx)(l,{message:r,mouseOver:t,inView:n})},nN=e=>{let{mouseOver:t,inView:n}=e,{message:r,editMode:i}=nI(),{plugin:a,duplicateIdentifierList:o}=(0,nM.zu)(r);if(o.length>1){let e=Error(`${o.join(", ")}`);q.k.persist.warning({eventName:"duplicate_matcher_of_send_message_box_left",error:e})}if(!a||i)return null;let{Content:l}=a;return(0,U.jsx)(l,{message:r,mouseOver:t,inView:n})};var nR=n(238e3),nB=n(2445),nO=n(772145);let nA=e=>{let{message:t}=e,n=(0,tf.FFC)(t),{sendMessage:r}=(0,t$.GL)("chatMessageService"),i=(0,tH.V)({sendMessage:r,message:t});return n?(0,U.jsx)(tG,{"data-testid":"message_box_failed_icon",className:"m-8 text-s-color-alert flex-shrink-0",onClick:i}):null},nL=()=>null,nP=e=>{let{plugin:t,message:n}=e;(0,o.useEffect)(()=>{var e,r;let{sendMessagePerformance:i}=nR.x.getState(),{local_message_id:a}=null!=n?n:{},{start:o,duration:l}=null!==(r=i[null!==(e=null==n?void 0:n.local_message_id)&&void 0!==e?e:""])&&void 0!==r?r:{};if(!t||!a||!o||void 0!==l)return;let s=(0,nO.z)();(0,nB.b)(a,{end:s,duration:s-o});let u=nR.x.getState().sendMessagePerformance[a];u&&q.k.persist.info({eventName:"send_message_performance",meta:{...u}})},[t,n])},nF=e=>{let{inView:t,mouseOver:n}=e,{message:r,editMode:i,onExitEditMode:a,pluginLoadCounter:l}=nI(),{pluginIdentifier:s,plugin:u,loading:c,duplicateIdentifierList:d,pluginLoadId:f}=(0,nM.Pf)(r);if(d.length>1){let e=Error(`${d.join(", ")}`);q.k.persist.warning({eventName:"duplicate_matcher_of_send_message_box",error:e})}if(nP({plugin:u,message:r}),(0,o.useEffect)(()=>{l(f,c)},[f,c]),(0,o.useEffect)(()=>(l(f,c),()=>{l(f,!1)}),[f]),c)return(0,U.jsx)(tZ.g,{inlineEnd:!0});if(!u)return null;let{EditableContent:p=nL,Content:m=nL}=u;return(0,U.jsx)("div",{ref:e=>{e&&r.message_id&&eA(r.message_id,e)},"data-testid":"message_content","data-plugin-identifier":String(s),"data-message-id":r.message_id,className:"flex flex-row w-full justify-end",children:i?(0,U.jsx)(p,{message:r,onExit:a,inView:t,mouseOver:n}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(nA,{message:r}),(0,U.jsx)(m,{message:r,inView:t,mouseOver:n})]})})},nZ=e=>{let{pluginIdentifier:t,...n}=e,{plugin:r,loading:i}=(0,y.b7)(t);if(i)return null;let a=null==r?void 0:r.ButtonContentGroups;return(0,U.jsx)(U.Fragment,{children:a?a.map((e,r)=>(0,U.jsx)(e,{...n},String(t)+r)):null})},nD=e=>{let{pluginIdentifier:t,...n}=e,{plugin:r,loading:i}=(0,y.b7)(t);if(i)return null;let a=null==r?void 0:r.DropdownItemContentGroups;return(0,U.jsx)(U.Fragment,{children:a?a.map((e,r)=>(0,U.jsx)(e,{...n},String(t)+r)):null})},nW=(e,t)=>{let{matcher:n=[]}=(0,eK.CF)();return{messageActionPluginConfig:(null!=n?n:[]).map(t=>t.matchPlugin(e)?t:void 0).filter(e=>(null==e?void 0:e.pluginIdentifier)!==void 0).map(e=>({pluginIdentifier:e.pluginIdentifier,area:e.area,actionType:e.actionType,onEnterEditMode:t,ButtonContentGroupLoader:nZ,DropdownItemContentGroupLoader:nD}))}},nz=e=>{let{message:t,inView:n,mouseOver:r,onEnterEditMode:i}=e,{messageActionPluginConfig:a}=nW(t,i);return(0,U.jsx)(nl,{message:t,inView:n,mouseOver:r,pluginConfigs:a})},nU=e=>{let{mouseOver:t,inView:n}=e,{message:r,editMode:i,onEnterEditMode:a}=nI(),{plugin:o,duplicateIdentifierList:l}=(0,nM.PU)(r);if(l.length>1){let e=Error(`${l.join(", ")}`);q.k.persist.warning({eventName:"duplicate_matcher_of_send_message_box_bottom",error:e})}if(!o||i)return null;let{Content:s}=o;return(0,U.jsx)(s,{message:r,mouseOver:t,inView:n,actionBarComponentNode:(0,U.jsx)(nz,{message:r,mouseOver:t,inView:n,onEnterEditMode:a})})},nV=e=>{let{message:t,pluginLoadCounter:n}=e,[r,i]=(0,o.useState)(!1),a=(0,o.useCallback)(()=>{i(!0)},[i]),l=(0,o.useCallback)(()=>{i(!1)},[i]),s=(0,eP.Wz)(eF.useMessageStore.getState(),t.conversation_id||"",t.message_id||"")&&r,u=(0,x.sQ)("chatMessageBoxLayoutStore",e=>e.sendMessageBoxConfig.containerDataAttr,M.X),c=(0,x.sQ)("chatMessageBoxLayoutStore",e=>e.getMessageBoxArea(),M.X),d=(0,o.useMemo)(()=>({message:t,editMode:s,onEnterEditMode:a,onExitEditMode:l,pluginLoadCounter:n}),[t,s,a,l,n]);return(0,U.jsx)(nC.Provider,{value:d,children:(0,U.jsx)(tL.UG,{dataAttributes:{"data-attr":u,"data-testid":"send_message"},className:m()("w-full max-w-full s-font-base text-s-color-text-secondary p-0 rounded-s-radius-s bg-transparent","data-[attr=select-mode]:-mt-10 data-[attr=select-mode]:py-10 data-[attr=select-mode]:px-16 data-[attr=select-mode]:sm:p-10 data-[attr=select-mode]:hover:bg-s-color-bg-base data-[attr=select-mode]:hover:rounded-s-radius-xs","data-[attr=select-mode]:has-[:checked]:bg-s-color-bg-trans data-[attr=select-mode]:has-[:checked]:rounded-s-radius-xs","data-[attr=select-mode]:pointer-events-none"),inlineEnd:!0,MessageBoxTopFoundation:c.top.visible?nT:null,MessageBoxLeftFoundation:c.left.visible?nN:null,MessageBoxBottomFoundation:c.bottom.visible?nU:null,MessageBoxRightFoundation:c.right.visible?nE:null,MessageBoxCenterFoundation:nF})})},n$=(0,o.createContext)({message:null,pluginLoadCounter:()=>null,isLastMessage:void 0}),nH=()=>{let{message:e,...t}=(0,o.useContext)(n$);return e?{...t,message:e}:{...t,message:{is_delta:!1}}},nG=e=>{let{mouseOver:t,inView:n}=e,{message:r}=nH(),{plugin:i,duplicateIdentifierList:a}=(0,tD.dN)(r);if(a.length>1){let e=Error(`${a.join(", ")}`);q.k.persist.warning({eventName:"duplicate_matcher_of_receive_message_box_top",error:e})}if(!i)return null;let{Content:o}=i;return(0,U.jsx)(o,{message:r,mouseOver:t,inView:n})},nK=e=>{let{mouseOver:t,inView:n}=e,{message:r}=nH(),{plugin:i,duplicateIdentifierList:a}=(0,tD.aP)(r);if(a.length>1){let e=Error(`${a.join(", ")}`);q.k.persist.warning({eventName:"duplicate_matcher_of_receive_message_box_right",error:e})}if(!i)return null;let{Content:o}=i;return(0,U.jsx)(o,{message:r,mouseOver:t,inView:n})},nQ=e=>{let{mouseOver:t,inView:n}=e,{message:r}=nH(),{plugin:i,duplicateIdentifierList:a}=(0,tD.Po)(r);if(a.length>1){let e=Error(`${a.join(", ")}`);q.k.persist.warning({eventName:"duplicate_matcher_of_send_message_box_left",error:e})}if(!i)return null;let{Content:o}=i;return(0,U.jsx)(o,{message:r,mouseOver:t,inView:n})},nX=()=>null,nq=e=>{let{message:t,blockCount:n}=e;(0,o.useEffect)(()=>{var e;let{receiveMessagePerformance:r}=nR.x.getState(),{message_id:i}=null!=t?t:{},{start:a,duration:o}=null!==(e=r[null!=i?i:""])&&void 0!==e?e:{};if(0===n||!i||!a||void 0!==o)return;let l=(0,nO.z)();(0,nB.J)(i,{end:l,duration:l-a,type:"content_block",blockCount:n});let s=nR.x.getState().receiveMessagePerformance[i];s&&q.k.persist.info({eventName:"receive_message_performance",meta:{...s}})},[t,n])},nJ=e=>{var t;let{message:n,inView:r}=e,i=(null===(t=n.content_blocks_tree)||void 0===t?void 0:t.children)||[],{contentBlockRenderConfigs:a}=(0,tD.lE)(i);return(nq({message:n,blockCount:a.length}),null==a?void 0:a.length)?(0,U.jsx)("div",{className:m()("flex w-full flex-col","gap-14"),children:a.map(e=>{let{pluginIdentifier:t,PluginContentRender:i,block:a,duplicateIdentifierList:o}=e;return(0,U.jsx)(i,{pluginIdentifier:t,duplicateIdentifierList:o,contentBlock:a,message:n,inView:r},a.id)})}):null},nY=e=>{let{plugin:t,message:n,pluginIdentifier:r}=e;(0,o.useEffect)(()=>{var e;let{receiveMessagePerformance:i}=nR.x.getState(),{message_id:a}=null!=n?n:{},{start:o,duration:l}=null!==(e=i[null!=a?a:""])&&void 0!==e?e:{};if(!r||!t||!a||!o||void 0!==l)return;let s=(0,nO.z)();(0,nB.J)(a,{end:s,duration:s-o,pluginId:r.toString(),type:"content"});let u=nR.x.getState().receiveMessagePerformance[a];u&&q.k.persist.info({eventName:"receive_message_performance",meta:{...u}})},[t,n,r])},n0=e=>{var t,n;let{message:r,inView:i,mouseOver:a,pluginLoadCounter:l}=e,{plugin:s,pluginIdentifier:u,loading:c,duplicateIdentifierList:d,pluginLoadId:f}=(0,tD.ob)(r),p=(0,tf.FFC)(r);if(d.length>1){let e=Error(`${d.join(", ")}`);q.k.persist.warning({eventName:"duplicate_matcher_of_receive_message_box",error:e})}if(nY({pluginIdentifier:u,plugin:s,message:r}),(0,o.useEffect)(()=>{l(f,c)},[c]),(0,o.useEffect)(()=>(l(f,c),()=>{null==l||l(f,!1)}),[f]),c)return(0,U.jsx)(tZ.g,{});if(!s)return null;let{Content:m=nX}=s;return(0,U.jsxs)("div",{"data-plugin-identifier":String(u),className:p?"":"w-full",children:[(0,U.jsx)(m,{message:r,inView:i,mouseOver:a}),((0,e0.zu)(r)||(0,tf.vlk)(r))&&(0,U.jsx)(tW.j,{jsonString:null===(n=r.verbose)||void 0===n?void 0:null===(t=n.extra)||void 0===t?void 0:t.risk_tips})]})},n1=e=>{let{message:t}=e,{sendMessage:n}=(0,t$.GL)("chatMessageService"),r=(0,tf.FFC)(t),i=(0,tf.Jlm)(t)||(0,tf.aEU)(t),a=(0,tH.q)({sendMessage:n,message:t});return r&&!i?(0,U.jsx)(tG,{"data-testid":"message_box_failed_icon",className:"m-8 text-s-color-alert flex-shrink-0",onClick:a}):null},n2=e=>{let{inView:t,mouseOver:n}=e,{message:r,pluginLoadCounter:i}=nH(),a=r.content_blocks_tree;return(0,U.jsxs)("div",{"data-testid":"message_content","data-message-id":r.message_id,className:"flex flex-row w-full",children:[a?(0,U.jsx)(nJ,{inView:t,mouseOver:n,message:r,pluginLoadCounter:i}):(0,U.jsx)(n0,{inView:t,mouseOver:n,message:r,pluginLoadCounter:i}),(0,U.jsx)(n1,{message:r})]})};var n4=n(179303);let n3=()=>null,n6=e=>{let{message:t}=e,{plugin:n}=np(t),{Content:r=n3}=n||{};return(0,U.jsx)(r,{message:t})},n9=()=>null,n5=e=>{let{message:t,actionMode:n,updateActionMode:r}=e,{plugin:i}=nf(t,n),{Content:a=n9}=i||{};return(0,U.jsx)(a,{message:t,onExitActionMode:()=>r("")})},n8=e=>{let{message:t,inView:n,mouseOver:r}=e,[i,a]=(0,o.useState)(""),{messageActionPluginConfig:l}=nd(t,a);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)("div",{className:"flex-row flex max-w-full min-w-0 flex-grow",children:[(0,U.jsx)(ns,{inView:n,mouseOver:r,message:t,pluginConfigs:l}),(0,U.jsx)(n6,{message:t})]}),(0,U.jsx)(n5,{message:t,actionMode:i,updateActionMode:()=>a("")})]})},n7=e=>{let{mouseOver:t,inView:n}=e,{message:r}=nH(),{plugin:i,duplicateIdentifierList:a}=(0,tD.ff)(r);if(a.length>1){let e=Error(`${a.join(", ")}`);q.k.persist.warning({eventName:"duplicate_matcher_of_receive_message_box_bottom",error:e})}let o=(0,n4.yH)({message:r});if(!i)return null;let{Content:l}=i;return(0,U.jsx)(l,{message:r,mouseOver:t,inView:n,actionBarComponentNode:(0,U.jsx)(n8,{message:r,mouseOver:t,inView:n}),suggestList:o})},re=e=>{let{message:t,pluginLoadCounter:n,lastAvaliableMessageId:r}=e,i=(0,x.sQ)("chatMessageBoxLayoutStore",e=>e.receiveMessageBoxConfig.containerDataAttr,M.X),a=(0,x.sQ)("chatMessageBoxLayoutStore",e=>e.getMessageBoxArea(),M.X),l=r===t.message_id;l&&eT.Z.getState().markMessageListPerformance("lastMessageBoxRenderStartTimestamp");let s=l?document.querySelector(`[data-message-id="${t.message_id}"]`):null;(0,o.useEffect)(()=>{(null==s?void 0:s.clientHeight)&&eT.Z.getState().markMessageListPerformance("lastMessageBoxRenderFinishTimestamp")},[s]);let u=(0,o.useMemo)(()=>({pluginLoadCounter:n,message:t,isLastMessage:l}),[n,t,l]),{top:c,left:d,bottom:f,right:p}=a;return(0,U.jsx)(n$.Provider,{value:u,children:(0,U.jsx)(tL.UG,{dataAttributes:{"data-attr":i,"data-testid":"receive_message"},className:m()("w-full max-w-full s-font-base text-s-color-text-secondary p-0 rounded-s-radius-s bg-transparent","group data-[attr=select-mode]:-mt-10 data-[attr=select-mode]:py-10 data-[attr=select-mode]:px-16 data-[attr=select-mode]:sm:p-10 data-[attr=select-mode]:hover:bg-s-color-bg-base data-[attr=select-mode]:hover:rounded-s-radius-xs","data-[attr=select-mode]:has-[:checked]:bg-s-color-bg-trans data-[attr=select-mode]:has-[:checked]:rounded-s-radius-xs","data-[attr=select-mode]:pointer-events-none"),MessageBoxTopFoundation:c.visible?nG:null,MessageBoxLeftFoundation:d.visible?nQ:null,MessageBoxBottomFoundation:f.visible?n7:null,MessageBoxRightFoundation:p.visible?nK:null,MessageBoxCenterFoundation:n2})})},rt=e=>{let{conversationId:t,messageLink:n,pluginLoadCounter:r,lastAvaliableMessageId:i}=e,a=(0,eF.useMessageStore)(e=>(0,eP.K9)(e,t,n),M.X),o=(0,B.useFeedStore)(e=>{var n;return Number(null===(n=e.conversationMap[t])||void 0===n?void 0:n.message_cursor)||0},M.X),l=(0,tf.Yns)(a);return(0,tf.z_e)(a,o)&&a?(0,U.jsx)(eo.SV,{errorBoundaryName:"message_box_error",FallbackComponent:tT.q,onError:(e,n)=>{var r;(0,nj.O)({message:a,reason:"base_message_box_error",error:e,from:"base_message_box_error",meta:{info:n}}),q.k.persist.error({eventName:"message_box_error",error:e,meta:{info:n,conversation_id:t,message_id:a.message_id,content_type:String(null!==(r=null==a?void 0:a.content_type)&&void 0!==r?r:"unknown"),is_send:+!!l}})},children:l?(0,U.jsx)(nV,{message:a,pluginLoadCounter:r}):(0,U.jsx)(re,{message:a,pluginLoadCounter:r,lastAvaliableMessageId:i})}):null};var rn=n(345234);let rr=()=>{let e=(0,o.useRef)(null),t=(0,o.useCallback)(()=>{var t,n;let r=null===(t=e.current)||void 0===t?void 0:t.getBoundingClientRect().width;r&&(null===(n=e.current)||void 0===n||n.style.setProperty("--dbx-message-block-inline-size",`${r}px`))},[]);return(0,o.useLayoutEffect)(()=>{if(!e.current)return;t();let n=new ResizeObserver(t);return n.observe(e.current),()=>{n.disconnect()}},[t]),{ref:e}},ri=e=>{let{conversationId:t,messageLinks:n,pluginLoadCounter:r,isBatch:i=!1,...a}=e,{ref:l}=(0,tn.YD)(),{ref:s}=rr(),u=(0,o.useCallback)(e=>{l(e),s.current=e},[]);return(0,U.jsx)("div",{"data-testid":"message-block-container",className:m()("message-block-container-PggqdK","table-spillover-JXvmpR"),ref:u,style:{"--dbx-message-block-inline-size":"TO_BE_SET"},...a,children:n.length>1||i?(0,U.jsx)(nk,{conversationId:t,messageLinks:n,pluginLoadCounter:r}):1===n.length?(0,U.jsx)(rt,{messageLink:n[0],conversationId:t,pluginLoadCounter:r}):null})},ra=e=>{let{messageLinks:t,conversationId:n,children:r}=e;return(0,U.jsx)(o.Suspense,{fallback:(0,U.jsx)("span",{className:"flex items-baseline",children:(0,U.jsx)(rn.g,{})}),children:(0,U.jsx)(eo.SV,{errorBoundaryName:"message_block_error",FallbackComponent:tT.q,onError:(e,r)=>{t.forEach(t=>{var i;q.k.persist.error({eventName:"message_block_error",error:e,meta:{info:r,conversation_id:n,message_id:t.messageId,content_type:null===(i=(0,eP.K9)(eF.useMessageStore.getState(),n,t))||void 0===i?void 0:i.content_type}})})},children:r})})};function ro(e){let{conversationId:t,messageLinks:n,pluginLoadCounter:r,isBatch:i}=e;return(0,U.jsx)(ra,{messageLinks:n,conversationId:t,children:(0,U.jsx)(ri,{conversationId:t,messageLinks:n,pluginLoadCounter:r,isBatch:i})})}let rl=(0,o.forwardRef)((e,t)=>{let{conversationId:n,isSelectMode:r,dataList:i,children:a,top:l,bottom:s,className:u,bottomCenterButton:c,onInViewItemsChange:d,style:f,Container:p=ed.bo.MaxWidthLayout}=e,v=(0,o.useRef)(null),{scrollRef:h}=(0,e$.E)(),g=(0,o.useRef)(null);return(0,o.useEffect)(()=>{var e;null===(e=g.current)||void 0===e||e.setEnableInterAnchor(!0)},[i.length]),(0,U.jsxs)("div",{ref:t,"data-table-spillover":"true",className:m()("message-list-nV93qn","table-spillover-N7QicR",u),style:f,children:[(0,U.jsx)(ty,{"data-testid":"message-list",ref:g,dataList:i,top:(0,U.jsx)(p,{className:"top-item-ZCKiDN",children:(0,G.Z)(l)?l():l}),bottom:(0,U.jsx)(p,{className:"bottom-item-t73NLo",children:(0,G.Z)(s)?s():s}),keepedBottom:(0,U.jsx)(t_,{onShow:()=>{var e;null===(e=v.current)||void 0===e||e.setVisible(!1)},onHide:()=>{var e,t;null===(e=v.current)||void 0===e||e.setVisible(!0),null===(t=g.current)||void 0===t||t.setEnableInterAnchor(!0)},bottomThreshold:"min(100%, 50px)"}),onInViewItemsChange:d,onReachBottom:()=>{var e;null===(e=g.current)||void 0===e||e.setEnableInterAnchor(!1)},children:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,U.jsx)(p,{"data-target-id":"message-box-target-id",className:"inner-item-LkbyEB",containerClassName:m()({"select-mode-I5CnFZ":r}),ref:t.anchorTopRef,"data-testid":"union_message",centerContentMaxWidthDelta:32*!!r,children:a(e)})}}),(0,U.jsx)(p,{children:(0,U.jsxs)("div",{className:m()("bottom-center-button-fKzHWq","max-dbx-xs:!bottom-0"),children:[c,(0,U.jsx)(tM,{ref:v,className:m()("to-bottom-button-TzcfJm"),conversationId:n,onClick:()=>{var e,t,n;null===(e=v.current)||void 0===e||e.setVisible(!1),null===(t=g.current)||void 0===t||t.setEnableInterAnchor(!1),null===(n=h.current)||void 0===n||n.scrollToBottom({smooth:!0})}})]})}),(0,U.jsx)(eH.w,{name:"message_list_html_loaded"})]})}),rs=e=>{let{conversationId:t,segmented:n}=e,{status:{inIniting:r=!1},messageLinks:i,resolveConversationId:a}=(0,eI.Yc)(t),l=(0,ez.sX)(t),s=(0,eU.WC)(l),{messageList:u}=(0,eG.n2)({conversationId:t,segmented:n,shareReviewStatusRejected:s});return(0,o.useEffect)(()=>{r||eT.Z.getState().addDurationPoint("message_list_mount")},[r]),{unionMessageList:u,inIniting:r,resolveConversationId:a,rawMessageLinks:i}},ru=(0,o.memo)(function(e){var t;let{section:n=!0,LoadMoreSlot:r,InnerAfterMessageListSlot:i,SectionDividerSlot:a,MessageBeforeSlot:l,LargeAvatarSlot:s,enableLoadMore:u=!1,className:c,conversationId:d,disableSkeleton:f=!1,Container:p=ed.bo.MaxWidthLayout}=e,v=(0,o.useRef)(null),h=(0,y.LB)("chatMessageListLifeCyclePlugin"),{pluginList:g,loading:b}=(0,y.hX)(h),{unionMessageList:x,resolveConversationId:_}=rs({conversationId:d,segmented:n}),{skeletonShow:S,pluginLoadCounter:w}=eW(_,f);(0,o.useEffect)(()=>(eO(),()=>{eO()}),[]),(0,o.useEffect)(()=>{if(!b)return g.forEach(e=>{var t;null==e||null===(t=e.mounted)||void 0===t||t.call(e,{conversationId:d})}),()=>{g.forEach(e=>{var t;null==e||null===(t=e.unmounted)||void 0===t||t.call(e,{conversationId:d})})}},[b,d]);let{isSelectMode:k}=(0,eL.p)(e=>({isSelectMode:e.isSelectMode}),M.X),j=(0,eP.W0)(eF.useMessageStore.getState(),d,null!==(t=eF.useMessageStore.getState().messageLinkMap[d])&&void 0!==t?t:[]);return(0,o.useEffect)(()=>{if(_){let e=0,t=setInterval(()=>{var n,r;e++;let i=rc(v.current);if(i){let{pageNavigationType:e,enterPid:t}=eT.Z.getState();q.k.persist.success({eventName:"message_list_render",meta:{conversation_type:null===(n=(0,F.jo)(B.useFeedStore.getState(),_))||void 0===n?void 0:n.conversation_type,bot_type:(0,eV.yT)("",_),success:1,page_navigate_type:e,page_entry_pid:t}})}if(i||e>=10){if(e>=10){let{pageNavigationType:e,enterPid:t}=eT.Z.getState();q.k.persist.info({eventName:"message_list_render",meta:{conversation_type:null===(r=(0,F.jo)(B.useFeedStore.getState(),_))||void 0===r?void 0:r.conversation_type,bot_type:(0,eV.yT)("",_),success:0,page_navigate_type:e,page_entry_pid:t}})}clearInterval(t)}},1e3);return()=>clearInterval(t)}},[_]),(0,U.jsxs)(U.Fragment,{children:[S?(0,U.jsx)(tI,{}):null,(0,U.jsx)(rl,{className:m()(c,"opacity-0 transition-opacity duration-400",S?"":"opacity-100"),Container:p,ref:v,conversationId:_,isSelectMode:k,enableLoadMore:u,dataList:x,bottom:(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{className:"bottom-placeholder-SoWVQG"}),(0,U.jsx)("div",{className:m()("bottom-placeholder-intersect-input-d_EYCN","max-dbx-xs:hidden")}),i&&(0,U.jsx)(i,{})]}),top:(0,U.jsxs)(U.Fragment,{children:[l&&(0,U.jsx)(l,{}),u&&r&&(0,U.jsx)(r,{conversationId:_}),s&&(0,U.jsx)(s,{})]}),bottomCenterButton:(0,U.jsx)(eJ,{conversationId:_,unionMessageList:x}),onInViewItemsChange:e=>eB(e),children:e=>{if((0,eG.Di)(e)){let{id:t,data:n,showActionsAndSuggests:r,isBatch:i}=e;return(0,U.jsx)(ro,{messageLinks:n,conversationId:_,isShowActionsAndSuggests:r,isBatch:i,pluginLoadCounter:w,lastAvaliableMessageId:null==j?void 0:j.messageId},t)}if((0,eG.Xf)(e)){let{id:t,data:n,showActionsAndSuggests:r}=e;return(0,U.jsx)(ro,{messageLinks:[n],conversationId:_,isShowActionsAndSuggests:r,pluginLoadCounter:w,lastAvaliableMessageId:null==j?void 0:j.messageId},t)}if((0,eG.mJ)(e)){let{id:t}=e;return a&&(0,U.jsx)(a,{dividerItem:e},t&&`section-divider-${t}`)}return null}})]})}),rc=e=>{var t;return!!(null===(t=e||document)||void 0===t?void 0:t.querySelector('[data-target-id="message-box-target-id"]'))};var rd=n(550606);let rf=(0,o.forwardRef)(function(e,t){return(0,U.jsx)("div",{className:"load-more-wrapper-dKyUVg",ref:t,children:(0,U.jsx)(rd.Z,{size:"middle"})})});function rp(e){let{className:t,style:n}=e,{hasMore:r,inLoadingMore:i}=rv(e);return(0,U.jsx)(rm,{hasMore:r,inLoadingMore:i,className:t,style:n})}let rm=e=>{let{hasMore:t,inLoadingMore:n}=e,{inView:r,ref:i}=(0,tn.YD)(),{chatViewRef:a}=(0,e$.E)();return((0,o.useEffect)(()=>{if(r&&t){var e,n;null===(n=a.current)||void 0===n||null===(e=n.onLoadMore)||void 0===e||e.call(n)}},[r]),n)?(0,U.jsx)(rf,{ref:i}):null},rv=e=>{let{conversationId:t}=e;return(0,eF.useMessageStore)(e=>{var n,r;return{hasMore:(null===(n=e.messageListStatusMap[t])||void 0===n?void 0:n.hasMore)||!1,inLoadingMore:(null===(r=e.messageListStatusMap[t])||void 0===r?void 0:r.inLoadingMore)||!1}},M.X)};var rh=n(621383),rg=n(190831),rb=n(442971),rx=n(568120),ry=n(941236),r_=n(920485),rS=n(544888),rw=n(839157),rk=n(953260),rj=n(609050);let rM=e=>{var t;let{activeSkillType:n,className:r}=e,i=(0,x.sQ)("chatViewCoreStore",e=>e.currentChatViewConfig),a=(null==i?void 0:i.chatId)||"",o=(null==i?void 0:i.chatType)||b.z.Conversation,l=(0,ez.jw)(a,o),{selectSkill:s}=(0,r_.f)({});(0,rS.Hf)((e,t)=>{let n=(0,ry.E)(t,3),r=null==n?void 0:n[(null==n?void 0:n.length)-1];if((0,tf.ey$)(r)){var i;s({skillType:null==r?void 0:null===(i=r.skill)||void 0===i?void 0:i.skill_type})}});let{isExpand:u,inputPortalTarget:c}=(0,x.sQ)("chatViewCanvasStore",e=>({isExpand:e.isExpand,inputPortalTarget:e.inputPortalTarget}),M.X),d=()=>(0,U.jsx)(rw.K1,{chatId:a,chatType:o}),f=()=>l?(0,U.jsx)(rk.B,{activeSkillType:n,chatId:a,chatType:o,scene:"bottom_bar"}):(0,U.jsx)(k.xg,{chatId:a,chatType:o,forceUseChatInputPlugin:!0}),p=()=>u&&c?(0,rx.createPortal)(f(),c):f(),v=(0,t$.GL)("chatViewService"),h=(0,x.sQ)("chatViewCanvasStore",e=>e.canvasContent),g={chatView:{isImmersiveMode:null!==(t=null==i?void 0:i.isImmersiveMode)&&void 0!==t?t:!!v.exactImmersiveMode},chatCanvas:{...h}},{matcher:_}=(0,eK.TB)(),S=null==_?void 0:_.map(e=>e(g)).find(e=>void 0!==e),{plugin:w,loading:j}=(0,y.Dq)(S),C=()=>!w||j||void 0===o?null:(0,U.jsx)(w.Content,{chatId:a,chatType:o}),I=()=>(0,U.jsx)(rj.e,{});return(0,U.jsxs)("div",{className:m()("w-full max-w-[var(--content-max-width)]",r),children:[null==d?void 0:d(),null==C?void 0:C(),null==p?void 0:p(),null==I?void 0:I()]})};var rC=n(344482),rI=n(118200),rT=n(279947);let rE=async e=>{if(!B.useFeedStore.getState().conversationMap[e]){let t=new Promise(t=>{let n=B.useFeedStore.subscribe(t=>({conversation:t.conversationMap[e]}),e=>{let{conversation:r}=e;r&&(n(),t())},{fireImmediately:!0,equalityFn:rC.X})});await t}};var rN=n(205379),rR=n(980402),rB=n(965944),rO=n(986118),rA=n(796038),rL=n(640078),rP=n(71536);let rF=(e,t)=>{let{conversationId:n,extraExtRef:r}=t,{showBoundary:i}=(0,rA.cO)(),a=(0,o.useRef)(!0),l=(0,A.g1)(),{toChatPage:s,onChatPageLoaded:u,onChatPageDestroy:c,idInParams:d,locationKey:f,locationState:p}=(0,W.R)(),{scrollRef:m,chatInputRef:v,chatViewRef:h,chatPageTargetRef:g,chatDropTargetRef:y}=(0,e$.E)(),_=(0,x.sQ)("chatViewCoreStore",e=>{var t;return null===(t=e.currentChatViewConfig)||void 0===t?void 0:t.chatKey}),{run:S}=(0,rL.Z)(()=>null==s?void 0:s(),{wait:100,leading:!0,trailing:!1}),w=(0,B.useFeedStore)(e=>{let{latestArchivedConversationId:t}=e;return t});(0,o.useEffect)(()=>{n&&w===n&&S()},[n,w]);let{collectionId:k,collectionType:j}=(0,rB.ce)(),M={scrollRef:m,chatInputRef:v,chatViewRef:h,chatPageTargetRef:g,chatDropTargetRef:y},{initLoadMessageInChatPage:I}=(0,rT.Q)();(0,ez.rD)(n);let T=(0,o.useRef)(!1),E=(0,rO.p)(),[N,R,L,P]=(0,B.useFeedStore)(e=>[e.fetchUpdateConversationInfo,e.insertConversationToLinks,e.removeConversationFromLinks,e.removeConversationFromMap],rC.X),[Z,D]=(0,eF.useMessageStore)(e=>[e.loadMoreMessageList,e.clearConversationMessages],rC.X);(0,o.useImperativeHandle)(e,()=>({onLoadMore:async()=>{if(!T.current){T.current=!0;try{var e;let t=(null===(e=eF.useMessageStore.getState().messageListStatusMap[n])||void 0===e?void 0:e.hasMore)||!1,r=(0,tY.M7)();if(t)return await Z(n,!r,rg.W2)}finally{T.current=!1}}},syncData:()=>{z({toastWhenFailed:!1,navigateWhenFailed:!1,showErrorWhenFailed:!1})}}),[n]),(0,o.useEffect)(()=>{let e=async(e,t)=>{var i;if(!t.length||t[0].conversationId&&t[0].conversationId!==n)return t;await (null===(i=m.current)||void 0===i?void 0:i.scrollToBottom());let a=k?{collect_id:k,collect_type:j}:{},o=t.map(e=>({...e.extraExt,...null==r?void 0:r.current}));await rE(n);let l=t.map((e,t)=>{let{reportParams:r,...i}=e;return{...i,...(0,eZ.Z)(o[t])?{}:{extraExt:o[t]},reportParams:{...r,...a,from:r.from?String(r.from):"",enter_from:null==p?void 0:p.enter_from},conversationId:n,botId:(0,eV.SR)(n),chatType:b.z.Conversation,botType:(0,eU.jx)((0,F.jo)(B.useFeedStore.getState(),n))?"UGC":"Main"}});return R({conversationId:n,index:1}),l};return rP.S.on("processMessageBefore",e),()=>{rP.S.off("processMessageBefore",e)}},[n]);let z=async e=>{let{init:t,toastWhenFailed:r,navigateWhenFailed:a,showErrorWhenFailed:o,reportFirstView:s=!1,skipWhenIdEmpty:c=!1}=e;if((void 0===n||0===n.length||(0,rN.zU)(n))&&c){(0,O.trackEvent)("enter_page",{current_page:"chat",is_from_ug:"0"});return}let{error:f}=eT.Z.getState();async function p(){let e=await N(n,t?"initChatView":"refreshChatView");return(null==e?void 0:e.deleted)&&(L({conversationId:n}),P({conversationId:n}),D(n),null==S||S()),null==u||u({conversationId:n,botId:null==e?void 0:e.bot_id,...M}),e}try{let e=await p();await I(n,{reportFirstView:s}),e&&function(e){let{conversation_id:t,read_message_index:n,message_index:r,read_badge_count:i=n,badge_count:a=r}=e,o=(0,eP._H)(eF.useMessageStore.getState(),t||"");if(Number(i)!==o){let e=Math.max(o,Number(a));Number(i)<e&&(0,rR.r)(t||"",e)}}(e)}catch(t){let e="712013001"===(0,rI.Z)(t,"errorOption.code");if(r&&!e&&("boolean"!=typeof r?E[r.type](r.text):E.error(l("system_error_toast"))),a){let e=(0,tY.M7)();(0,C.Z)(d)&&e?i(t):null==S||S()}o&&i(t),s&&f("load_chat_failed",t instanceof Error?t:Error(String(t)))}};(0,o.useEffect)(()=>{var e,t,r,i;if(a.current){if(a.current=!1,eT.Z.getState().addDurationPoint("load_cache_end"),_&&(0,x.GX)("chatViewCoreStore").needSkipChatKey===_){(0,x.Wp)("chatViewCoreStore").setState({needSkipChatKey:void 0}),null==u||u({conversationId:n,botId:null===(e=(0,F.jo)(B.useFeedStore.getState(),n))||void 0===e?void 0:e.bot_id,...M});return}z({toastWhenFailed:{text:l("web_toast_chat_noAccess_homepage"),type:"info"},navigateWhenFailed:!0,showErrorWhenFailed:!1,init:!0,reportFirstView:f===eT.Z.getState().chatLayoutEnterPageKey,skipWhenIdEmpty:!0})}else null===(t=m.current)||void 0===t||t.scrollToBottom(),null===(r=v.current)||void 0===r||r.clear(),null===(i=m.current)||void 0===i||i.enableScroll(),z({toastWhenFailed:!1,navigateWhenFailed:!1,showErrorWhenFailed:!1});return()=>{null==c||c({conversationId:n,...M})}},[n]),(0,o.useEffect)(()=>{if(!(0,X.bH)())return;let e=eF.useMessageStore.subscribe(e=>[e.messageLinkMap[n],e.messageMap[n],e.localMessageMap[n]],e=>{var t,n;e&&(null===(n=m.current)||void 0===n||null===(t=n.refreshAnchor)||void 0===t||t.call(n))});return()=>{e()}},[])};var rZ=n(33021),rD=n(236543);let rW=e=>{let{chatId:t,chatType:n}=e,r=(0,tY.nu)();(0,rZ.Z)(()=>(0,x.Wp)("chatViewCoreStore").setState({currentLocalConversationId:""}));let{scrollRef:i}=(0,e$.E)(),a=(0,rD.s)({chatType:n});return((0,o.useEffect)(()=>{let e=async(e,r)=>{var o;return await (null===(o=i.current)||void 0===o?void 0:o.scrollToBottom()),t&&n!==b.z.Conversation?await a(t,r):r};return rP.S.on("processMessageBefore",e),()=>{rP.S.off("processMessageBefore",e)}},[a,t]),(0,rD.D)(t),!(0,ez.vf)(t)&&r)?(0,U.jsx)(eM,{}):null},rz=e=>{let{conversationId:t,conversationType:n}=e,{chatViewRef:r}=(0,e$.E)();(0,o.useEffect)(()=>{if(n!==b.z.Conversation)return;let e=()=>{if("visible"===document.visibilityState&&r&&"current"in r&&r.current){var e,t;null===(e=(t=r.current).syncData)||void 0===e||e.call(t)}};return window.addEventListener("visibilitychange",e),()=>{window.removeEventListener("visibilitychange",e)}},[t,n])},rU=()=>null,rV=(0,o.forwardRef)(function(e,t){let{conversationId:n,conversationType:r,extraExtRef:i}=e;return rz({conversationId:n,conversationType:r}),rF(t,{conversationId:n,extraExtRef:i}),null}),r$=e=>{let{conversationId:t,conversationType:n}=e;return(0,U.jsx)(rW,{chatId:t,chatType:n})},rH=(0,o.forwardRef)(function(e,t){let{conversationId:n,conversationType:r}=e,i=(0,ez.jw)(n,r),[a,l]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(0,ew.kZ)(l)},[]);let s=[];return(i&&s.push({Comp:rU,withRef:!1}),r===b.z.Conversation&&s.push({Comp:rV,withRef:!0}),r===b.z.ThreadLocalConversation&&s.push({Comp:r$,withRef:!1}),a)?(0,U.jsx)(U.Fragment,{children:s.map((n,r)=>{let{Comp:i,withRef:a}=n;return a?(0,o.createElement)(i,{...e,ref:t,key:r}):(0,o.createElement)(i,{...e,key:r})})}):null});var rG={"slide-up":"slide-up-_jqK4C",slideUp:"slide-up-_jqK4C","slide-down":"slide-down-NuAq2D",slideDown:"slide-down-NuAq2D","fade-entering":"fade-entering-s4s1pp",fadeEntering:"fade-entering-s4s1pp",fadein:"fadein-vatgKJ","fade-exiting":"fade-exiting-glKaEs",fadeExiting:"fade-exiting-glKaEs",fadeout:"fadeout-ZBMLGL","fade-exited":"fade-exited-xyWYmG",fadeExited:"fade-exited-xyWYmG","chat-header-placeholder":"chat-header-placeholder-PLJ4fG",chatHeaderPlaceholder:"chat-header-placeholder-PLJ4fG"};let rK=(0,o.lazy)(()=>(0,ew.Zv)(async()=>({default:await Promise.all([n.e("43850"),n.e("38237")]).then(n.bind(n,77986)).then(e=>e.EventTracker)}))),rQ=(0,o.memo)((0,o.forwardRef)(function(e,t){let{children:n,className:r,...i}=e;return(0,U.jsx)("div",{className:m()("px-12 dbx-xs:px-20 max-dbx-xs:pr-3  w-full","max-dbx-xs:supports-[-webkit-overflow-scrolling:touch]:pr-12"),ref:t,children:(0,U.jsx)("div",{className:m()("my-0 w-full mx-auto max-w-(--content-max-width)","has-[.side-by-side-messages]:mx-0 has-[.side-by-side-messages]:max-w-full"),children:(0,U.jsx)("div",{className:m()("w-full",r),...i,children:n})})})})),rX=()=>(0,U.jsx)("div",{className:m()("w-full h-0 dbx-lg:h-44",{hidden:(0,x.sQ)("chatViewCanvasStore",e=>e.isExpand)})}),rq=e=>{let{conversationId:t,conversationType:n}=e,{chatInputRef:r,chatViewRef:i}=(0,e$.E)(),a=(0,x.sQ)("chatViewCoreStore",e=>e.currentChatViewConfig,M.X),{chatId:l}=null!=a?a:{},s=(0,ej.R)(e=>e.activeKey),{activeSkillType:u}=(0,x.sQ)("chatInputStore",e=>{var t;return{activeSkillType:l?null===(t=e.activeSkillTypeMap)||void 0===t?void 0:t[l]:void 0}},M.X),{increaseContrastLevel2:d}=(0,ek.o)(),f=()=>{(0,_.D)("chatConversationService").then(e=>null==e?void 0:e.refreshConversationInfo({conversationId:t,scene:"refreshChatView"}))};(0,o.useEffect)(()=>{let e=()=>{document.visibilityState&&f()};return window.addEventListener("visibilitychange",e),()=>{window.removeEventListener("visibilitychange",e)}},[t]),(0,o.useEffect)(()=>{let e=!(0,X.D0)()&&s!==(null==a?void 0:a.chatKey);if(e){var t;null===(t=r.current)||void 0===t||t.focus()}let n=()=>{if("visible"===document.visibilityState&&e){var t;null===(t=r.current)||void 0===t||t.focus()}};return window.addEventListener("visibilitychange",n),()=>{window.removeEventListener("visibilitychange",n)}},[s,a]);let{loadMore:p}=(0,eI.BR)(t,{isLoggedIn:(0,tY.M7)(),hasPreprocessTask:rg.W2});return((0,o.useImperativeHandle)(i,()=>({onLoadMore:p,syncData:f}),[t]),!t||(0,eb.k)(t)||(0,eb.k)(t.replace("local_","")))?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(o.Suspense,{fallback:null,children:(0,U.jsx)(rK,{})}),(0,U.jsx)(o.Suspense,{fallback:null,children:(0,U.jsx)(c.ZP,{in:!0,timeout:400,appear:!1,exit:!1,children:e=>{var r;return(0,U.jsxs)("div",{className:"flex h-full min-h-0 w-full flex-1 flex-col",children:[(0,U.jsx)("div",{className:"relative min-h-0 flex-1",style:{"--message-message-list-bottom-placeholder-intersect-input-height":"64px"},children:(0,U.jsx)(eC.u,{enableMessageDebug:(0,rb.T)(),children:(0,U.jsx)(ru,{className:m()(rG[`fade-${e}`],rG["slide-up"],"!transition-none"),section:!0,conversationId:t,enableLoadMore:n===b.z.Conversation,LoadMoreSlot:rp,SectionDividerSlot:rh.d,Container:rQ,InnerAfterMessageListSlot:()=>null,MessageBeforeSlot:rX,LargeAvatarSlot:()=>null},null!==(r=null==a?void 0:a.chatKey)&&void 0!==r?r:null==a?void 0:a.chatId)})}),(0,U.jsx)("div",{className:m()("pointer-events-none relative w-[calc(100%-var(--scrollbar-width,9px))] max-dbx-xs:!mt-0"),style:{marginTop:"-64px"},children:(0,U.jsx)("div",{className:"absolute inset-x-0 top-0",style:{height:"64px"},children:(0,U.jsx)("div",{className:m()("h-full bg-linear-to-t from-dbx-bg-body-web to-transparent",{"from-dbx-bg-body-white":d})})})}),(0,U.jsx)("div",{className:m()("px-20 w-[calc(100%-var(--scrollbar-width,9px))] max-dbx-xs:px-8 max-dbx-xs:w-full"),children:(0,U.jsx)(S.o,{chatId:(null==a?void 0:a.chatId)||"",chatType:(null==a?void 0:a.chatType)||b.z.Conversation,chatKey:null==a?void 0:a.chatKey,ChatInputSlot:null,renderFallback:()=>(0,U.jsx)(rM,{className:m()("relative mx-auto rounded-dbx-4xl bg-dbx-bg-body-web",{"bg-dbx-bg-body-white":d}),activeSkillType:u})})})]})}})}),(0,U.jsx)(rH,{conversationId:t,conversationType:n})]}):(0,U.jsx)(eM,{})},rJ=(0,o.memo)(function(e){return(0,U.jsx)(eo.SV,{errorBoundaryName:"chat_page_error",logger:q.k,errorBoundaryScope:eo.f.Page,FallbackComponent:ep.H,children:(0,U.jsx)(rq,{...e})})}),rY={matcher:e=>ey.G.ReadPDF_LatestReading===e,handler:e=>n.e("63210").then(n.bind(n,177176)).then(t=>{t.default(e)})},r0={matcher:e=>e===ey.G.PptCanvasOpen,handler:e=>n.e("79068").then(n.bind(n,877924)).then(t=>{t.default(e)})},r1={matcher:e=>e===ey.G.Code_Artifacts_Share,handler:e=>Promise.all([n.e("277"),n.e("70942")]).then(n.bind(n,711449)).then(t=>{t.default(e)}),prehandler:e=>Promise.all([n.e("277"),n.e("11567")]).then(n.bind(n,81141)).then(t=>t.default(e))},r2={matcher:e=>e===ey.G.Code_Artifacts,handler:e=>Promise.all([n.e("277"),n.e("30489")]).then(n.bind(n,506151)).then(t=>{t.default(e)})},r4=(0,o.lazy)(()=>(0,ew.Zv)(()=>Promise.all([n.e("43361"),n.e("6973"),n.e("62192"),n.e("277"),n.e("34986"),n.e("68592"),n.e("54033"),n.e("54924"),n.e("33009"),n.e("74212"),n.e("43850"),n.e("33382"),n.e("86466"),n.e("197"),n.e("12067"),n.e("87048")]).then(n.bind(n,433408)))),r3=e=>{let{conversationId:t,conversationType:n}=e;return(0,v.C)({plugins:[e_,eS.i,r1,rY,r2,r0]}),(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(rJ,{conversationId:t,conversationType:n}),(0,U.jsx)(o.Suspense,{fallback:(0,U.jsx)(U.Fragment,{}),children:(0,U.jsx)(r4,{})})]})},r6=(e,t)=>{let n=(0,o.forwardRef)(function(n,r){let i={...n,...t};return(0,U.jsx)(e,{...i,ref:r})});return n.displayName=`${e.displayName||e.name}ComposedSlots`,n},r9=e=>{let{slots:t}=e,{MessageListLoadMore:n,InnerAfterMessageList:r,MessageList:i,MessageBefore:a,LargeAvatar:o}=t,l=r6(n,{});return r6(i,{LoadMoreSlot:l,InnerAfterMessageListSlot:null!=r?r:null,SectionDividerSlot:rh.d,MessageBeforeSlot:null!=a?a:null,LargeAvatarSlot:o})};var r5=n(567336),r8=n(758635),r7=n(293067),ie=n(814986),it=n(317085);let ir=e=>(0,eF.useMessageStore)(t=>(0,eP.eH)(t,e),rC.X);var ii=n(54642),ia=n(397175),io=n(420531),il={"font-h1":"font-h1-SGHVKl",fontH1:"font-h1-SGHVKl","font-footnote":"font-footnote-Te5vTE",fontFootnote:"font-footnote-Te5vTE","add-button":"add-button-iVfbZc",addButton:"add-button-iVfbZc","add-button-exiting":"add-button-exiting-TYysoM",addButtonExiting:"add-button-exiting-TYysoM","button-fadeout":"button-fadeout-jxABKx",buttonFadeout:"button-fadeout-jxABKx","add-button-exited":"add-button-exited-WEJecm",addButtonExited:"add-button-exited-WEJecm",fade:"fade-KWkCCN","fade-exiting":"fade-exiting-xvJqeR",fadeExiting:"fade-exiting-xvJqeR",fadeout:"fadeout-GtFwxT","fade-exited":"fade-exited-OjqHBD",fadeExited:"fade-exited-OjqHBD"};let is=(0,r7.Ue)(e=>({isLargeAvatarClosed:!1,hideAvatar:()=>(e({isLargeAvatarClosed:!0}),new Promise(t=>{e({resolve:t})})),resolve:ie.Z,resetIsLargeAvatarClosed:()=>{e({isLargeAvatarClosed:!1,resolve:ie.Z})}})),iu=e=>{var t;let{conversationId:n,botId:r}=e,{showBotHeat:i,enableBotProfileOpenJump:a,showBotHandleName:l}=(0,t$.GL)("chatConfigService").featureGating,s=(0,it.z)({key:"always_show_large_avatar",defaultValue:!1,featureGatingKey:"alwaysShowLargeAvatar"}),u=ir(n),c=(0,ez.sX)(n),d=(0,eU.kJ)(c)||(0,eU.p5)(c),f=ii.messageServiceContainer.get("chatBotService"),p=null==f?void 0:f.getBot(null!==(t=null==c?void 0:c.bot_id)&&void 0!==t?t:r),m=d?n:null==p?void 0:p.id,v=(0,eF.useMessageStore)(e=>{var t;return(null===(t=e.messageListStatusMap[n])||void 0===t?void 0:t.hasMore)||!1}),{isLargeAvatarClosed:h,resetIsLargeAvatarClosed:g,resolve:y}=is(e=>({isLargeAvatarClosed:e.isLargeAvatarClosed,resetIsLargeAvatarClosed:e.resetIsLargeAvatarClosed,resolve:e.resolve})),{currentChatViewConfig:_}=(0,x.sQ)("chatViewCoreStore"),S=(0,o.useMemo)(()=>(!!(0,eU.jx)(c)||(null==_?void 0:_.chatType)===b.z.Bot||(null==_?void 0:_.chatType)===b.z.ProfileBot)&&(null==_?void 0:_.chatType)!==b.z.NewThread&&(s?!v:!h&&u),[v,h,u,m,null==_?void 0:_.chatType]);return(0,o.useEffect)(()=>{g()},[u,m]),{hideButton:!1,enableShowHandleName:l,enableOpenJump:a,enableBotHeat:i,showLargeAvatar:S,isCocoOrCocoSub:d,botInfo:p,onExited:()=>{y()}}};var ic=n(729813),id=n(199689);let ip=e=>(0,U.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:24,fill:"none",viewBox:"0 0 16 24",...e,children:(0,U.jsx)("path",{fill:"currentColor",d:"M7.69 19.14q-1.566 0-2.734-.56-1.163-.561-1.809-1.572-.647-1.01-.647-2.363 0-.714.112-1.268.12-.555.284-.997.172-.45.344-.845.172-.396.283-.786.113-.39.113-.832 0-.218-.027-.475a6 6 0 0 1-.02-.39q0-.218.126-.356a.42.42 0 0 1 .33-.14q.35 0 .707.212.362.211.647.588.29.369.442.858l-.33.066q.158-.278.198-.488.045-.219.046-.443a3.4 3.4 0 0 0-.244-1.241 5.6 5.6 0 0 0-.594-1.116 13 13 0 0 0-.747-.997.9.9 0 0 1-.158-.244.6.6 0 0 1-.053-.251q0-.317.27-.476.278-.165.747-.165.872 0 1.836.212a9 9 0 0 1 1.92.647q.959.435 1.817 1.116a7.6 7.6 0 0 1 1.518 1.604 7.5 7.5 0 0 1 1.05 2.12q.383 1.195.383 2.674 0 1.326-.416 2.416a5.2 5.2 0 0 1-1.182 1.869q-.773.78-1.842 1.201-1.063.423-2.37.423m.152-1.854q.785 0 1.3-.344.522-.343.78-.904.257-.562.257-1.215a3.6 3.6 0 0 0-.251-1.3 3.9 3.9 0 0 0-.733-1.21q-.488-.553-1.215-.897-.046-.02-.072.006-.027.021-.02.066A5.7 5.7 0 0 1 7.86 13q-.111.694-.376 1.05a4 4 0 0 0-.284-.528 2 2 0 0 0-.383-.456q-.033-.026-.066-.013-.027.007-.033.053-.04.284-.185.522-.145.231-.317.488a3 3 0 0 0-.303.568 2 2 0 0 0-.126.746q0 .832.561 1.347.568.51 1.493.509"})}),im="w-120 h-120 rounded-full bg-[rgba(0,0,0,0.06)] object-cover cursor-pointer",iv=e=>{let{iconUrl:t,videoUrl:n,isMainBot:r,onClick:i,className:a}=e,[l,s]=(0,o.useState)(!1);return(0,U.jsx)(U.Fragment,{children:r&&!l?(0,U.jsx)("video",{src:(0,H.C)(n,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$N-%lJNamw1$2xNNWFtRkhSakJNTW5od1dXa3hhb%ZI%mpCT$Z6RnNZek5P-%Zve$Z-WmpNMHBx$ERKS2NH$nBN$3BpTWp*M1lqSTFiR0p1$$haa$IwWj$XakpWZEZsW$dta*tSMFo1$ERKR01sbFl$bWhq-$R*MFlqTmFjRnB%TlRCak0ya*9ZMjFrT$dOM1B%MD0"}),playsInline:!0,autoPlay:!0,muted:!0,loop:!0,className:im,onError:()=>s(!0),onClick:i}):(0,U.jsx)("img",{src:(0,H.C)(t,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$N-%lJNamw1$2xNNWFtRkhSakJNTW5od1dXa3hhb%ZI%mpCT$Z6RnNZek5P-%Zve$Z-WmpNMHBx$ERKS2NH$nBN$3BpTWp*M1lqSTFiR0p1$$haa$IwWj$XakpWZEZsW$dta*tSMFo1$ERKR01sbFl$bWhq-$R*MFlqTmFjRnB%TlRCak0ya*9ZMjFrT$dOM1B%MD0"}),className:m()(im,a),onClick:i})})},ih=(e,t)=>{let n=(0,B.useFeedStore)(e=>e.conversationMap,rC.X),{currentChatViewConfig:r}=(0,x.sQ)("chatViewCoreStore"),i=(null==r?void 0:r.chatType)===b.z.Bot||(null==r?void 0:r.chatType)===b.z.ProfileBot;return(0,r8.useBotStore)(r=>{let{choicenessBotLinks:a,choicenessBotListStatus:o}=r,l=a.some(e=>e.botID===t),s=(0,r5.Z)(n,e);return o.loading||0===o.count&&!o.failed?!i:s||l})},ig=(r=e=>{let{botInfo:t,enableBotHeat:n,enableOpenJump:r,enableShowHandleName:i,hideButton:a,localConversationId:l,largeAvatarVideoUrl:s}=e,{icon_image:u,name:d,bot_stats:f,creator_info:p,bot_feature_label:v}=null!=t?t:{},{creator_handle:h}=p||{},g=(0,A.g1)(),{toUserProfile:b,onOpenCurrentBotSideBar:x,onCreateConversationByBot:y}=(0,W.R)(),[S,w]=(0,o.useState)(!1),k=(0,ia.el)(null==t?void 0:t.bot_type),j=()=>{null==x||x({enterFrom:"click_onboarding_head_bot_name"})},M=async()=>{if(!(0,tY.M7)())return(0,_.D)("chatNavigateService").then(e=>null==e?void 0:e.navigateToLoginPage("unlog_click_add_bot_to_chat")),ic.v.emit("chat.guest.login",{bot:!0,source:"unlog_click_add_bot_to_chat"});w(!0);try{(null==t?void 0:t.id)&&await (null==y?void 0:y({botId:t.id,localConversationId:l,createFrom:"click_plus_chat"}))}catch(n){var e;q.k.persist.warning({eventName:"create_conversation_by_bot_error",meta:{bot_id:null==t?void 0:t.id,error_str:null==n?void 0:null===(e=n.toString)||void 0===e?void 0:e.call(n)}})}finally{w(!1)}};return k?(0,U.jsx)(U.Fragment,{}):(0,U.jsxs)("div",{className:m()("flex items-center mb-26","sm:block sm:text-center",a?"mt-24":"md:pt-84 lg:pt-84 sm:pt-24"),children:[(0,U.jsx)(iv,{className:"shrink-0 align-bottom",isMainBot:k,videoUrl:k&&s||"",iconUrl:(null==u?void 0:u.tiny_url)||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAQEElEQVR4nO3d3XIU17kG4Hf1jJCMsNQDRlEKxTNjp+KUXRWEc5BDFOc8Zjvn22xfQIxzAZHxBQR8AwFyAbG5gGA5F2DErrJrOxW7RyBibTB0S5HwSJrpLwfTLUbS/HVPd6/+eZ8qqkDqGS2JfvWtn+5eChQLy5YaABPAYtnArOuirgzMQlCTzsdN79Duvx/leH+ggAY6f2mIi03DgNVyseZ9frVeUU6c309RKd0NyDovCItlA1UBFkWwCMAPR5IcAA0FNNqCewBWwOCMjQEJyLJlqWzgvAiWBAdhSLOGAlaVwkrLxb16Ra3oblCWMCBDWLYslg1cFMElLxBJV4aoOV5gPm25+LxeUau6G5RmDEgPli1LBnAJCm8j/RViXA2lsNJ2cYvV5TgGxNMVineR/SoRFsNyRKEDYtlilg287wquoLih6KcBwW0XuF6vqIbuxuhSyIBYtiyVFJYFWNLdlixQwIph4ObCjLqluy1JK0xAWC0iYZUMXN1v4/OiVJXcB4TBiIU/Vrma96DkNiAMRjKUws08ByV3AWEw9MhrUHITEAYjFRqGws2fzKqruhsSlVwExLLlkqFwDflf1MsKq2Tgah5mvTIdEMuWWknhBqdr00kBn7QFf8hyt8vQ3YCwHmzKsqFwl+FILwH+y1D49sGmLOtuS1iZqyCWLUuGwg2wO5U1lit4K2vVJFMV5P6mXDMUPgPDkUX1LFaTTFQQy5aaofAJOpebU/ZlppqkvoI82JT3DYW7YDjypG4ofGHZckV3Q4ZJbQWxbDFLBpals65BOaUUrrVdfJTWW4NTGRB2qQontV2u1HWxvFkqdqmKpW4o3LFsSd2UfaoC4o03PgMvFSmiuqFwJ22zXKkJyINNWXYF13W3g7RSrmA5TSHRPgbxBuPXRHBZd1soPRRw42VTvZeCduhj2WJ6XSqON6iXu97gXdsMl7YuljdTxXDQIBe8wbu2Kye0VJCucPCSERqFtmngxAPCcFBIWkKSaEAYDhpT4iFJLCAckFNEEh24JzZIZzgoIv7APZHF5EQCcn9TboDhoOhcKCn8KYkvFHtAHmzKMhcBKWoCXE5ixT3WMYh3+ciHcX4NKjRxOw+FiO0SpdgC4l2V+1lc70/kEW/QHst2DbEEhNO5lDDbFbwZx/Rv5AHxpnPvguGgZMUy/Rv5IL1kYBkMByXvQsnAH6N+00gD8mBT3uc95KSLCK5E/SCIyLpY3rjjLng3IOkV6XgksgrCW2UpJSqGwl+jerNIAuIt2HDcQWlx4f6mRLLSPnYXy+taWVE0hihCkayPjF1BuBhIKaUMhT+P+yZjBYRdK0q5umXLWJc6he5isWtFGTHWrFboClLqbHlGlHaVUmc/mVBCBcSy5bIAl8J+UaIkCXDRsiXU+Rqqi7XmiAWOPShbLK+rFeharcAVhANzyqg6EPwyqEAVhJexU8bZruCVIFUkUAUxgA/BcFB2VRCwioxcQTitSzkRqIqMXEG86kGUdYGqyEgVhNWDcmbkKjJSBWH1oJwZuYoMrSCcuaKcGqmKjFJBlsBwUP6MVEWGVhCumlOO2VVTnR50wMAKYtlyGQwH5Zc5bOvpgQEpKbwbbXuIUkWVFAY+37dvF4tTu1QQ4gpO9xusD6ogfL4VFYHCgHO9b0AMhbdjaQ5RyhgKv+/7uV4f9AYuHJxTUfQdrPcMiAFueEOFotDnDtmeg3SuffTXarXx/9872N5pAgDKpRLOnH4R5sy05pYd5mzt4MnTf6PVbgMATk1P4UzlRUxNntDcstTquSZyLCDc+Ka/bxobWN940vNzp6an8MbPfqL9BGzu7uHrb/4FZ2un5+drC3OoLpxNuFWZ0PNBc8e6WOxe9fblP+73DQcAbO80ce+rBpq7ewm26rDm7h7ufdXoGw4AaKw/wr2vEttmPEt6drOOj0EULibRmixZW3+E75/+e+hxzd19fPn1gwRa1FsnoPtDj3O2dtBYf5xAi7LFUPjtsY91/8OyZREcexzSarWxvvF05OO3nzXxvT08TFHbeOyMFA7fw40naLXaMbYok2peBg4crSADr0spImdrJ/CJ9OTpVkytie5rtlptLUHOgEMZOBSQEhcHj9l+1kzkNeMKUj2ev0bfeCml1NFu1qGACLAIGpuOros/nUtj693F8lYSuUMUFd2hVfXuCsLqQdRxkIWDgJQ4vUsEdNZDDrJwEBCOP4g6DIXzB38HAMsWE1z/IPLVLFtqwPMKwupB1OVEqVNF/IBwgbCPcrkU+DWTGi5YLJeCtzPMa4pir4064AWk1NXnosNOnZxK5DXjmp05Gfg1p6aTb2dGqJLRVUGE44++zJlpTE1OBHrNwo/PxNSa/l46PRPo+KnJidTdw5ImIoe7WAzIAK+9em7kY8/NnwkcqCiYM9M4Nz/wGWiHvFr9cYytyYXOIN2bweIK+gDmzPRINxnNzpzET2vzCbSot9rCHF46/eLQ46ojHldwpmVLTfEOwtFt7zTxz7XvsLn17NDHy2UD1XNzWrpWvWw8drC2/ujYBYyzMydRW5hj12o04greVJYtlwyFT3S3Jkuau/to7u6hubuHU9MvaBmUj6L7Uv1T0y9o6fplmLiC98rg+COwqckJ72RL929iVoqxmQYYEKJeFICqAQ7QiXoqGTCNkkJVd0OI0siVTgUhoh4UYBpcRSfqy2QFIRqAg3Si/kwGhKg/drGIBmFAiAZgQIgGYECIBmBAiAYoA3DAmazItFptNHf3sf3sB7TbLvZbbeyGeLD0KCYnJzBRLmHyxATK5RKv3o2ew4BEoNVq4+HGUzhbOwN3d0qCOTON+bMmZmdOat8OLgecsu4WZN3DjSdorD9Cq+XqbgoAHIR0anICtYU5/Ogsf/eNw0CnglAIDzee4J+NjdSEo1tzdx//981DrH83+u5YdJgADUMxIKE0d/ew/l3/TT3TYu3hI261NgajLVjT3YgscraehdrVKWmtVhsbj/k7MAwDaLCLFdL2zg+6mzCyHQ1bwuVBW7BpAOCm2SG02ukbd1CkBKwgRP2dKHUCsqq7IVlULmXnIoQSn+Ieyl6708ViBQlhaio7i3B8YFxoq0a9ohpgSAJL69MUe+E2B6E49Ypy/H4CB+oBmTPToTbXSRq3OQitAXhX87qCe3rbkk0/emlWdxOGYjjCcb31Qb+CcKAeQtBNa3Q4N5+OJ85n0CrwPCDsYoVgzkzDDLH1WVJmZ6Y5/ghHAHwOPA/Iir62ZFt1YU53E/r6eYCdseiY5xWkXlEOWEVCCbr1WVKqC3Oc3g2v4WXi+S23iuOQ0GoLc6ma9u3cCzJ8yzjqrXvS6iAgben0uSi4crmEN157ORW/sacmJ3D+9bruZmSZoGvI0X29BCvIGKYmJ/DGay9rXRsplw2cf72eiqBm3EEFUd0fXXPEBu9PH0tzdx/3vrISv1fED2iaunoZZVdNdTCoPHTFHcch4/O7OEn+Fj91cgrnX68zHBGQIxk4FJC24HayzcmnqckJ/OrCz0baW31c5+bPsFsVHZEjGTj6VBOuh0SotjCH+bMVfPn1fWxHfFcf9zyPzaHJKnX0s2uOWOCuU5HbeOxg47GNza1nY70PgxErq2qqV7o/cOy5WK7gtqHwfnJtKob5sybmz5po7u5j47GN759uYefZ7kivnZ056T0QrsKuVIxUjx7UsQpi2bJkKHyWTJOKrdVysf3sBzR3947Nek1NTmBq8gROnXwB5XJ27l7MMHEFb9Ur6lBIjgUE4HQvFdKx7hXQ5+nuruBW/O0hSo9e3Sug//YHn8bYFqK0kbbgL70+0bOLBbCbRYXSs3sFDNhAxxV8HF97iNLDHbBA3reCWLaYhoIdT5OIUkNcwSve032O6VtB6hXl9Bu4EOWFACv9wgEM2aOwLbgafZOIUkPKCjcHHdC3i+XjYJ1yrO/g3Dd0iZaDdcopKSl8OOygUa5huA4+mpTyp7Hv4u/DDhoakHpFOawilDdqyOC867jhvClfCxyLUD4MnNrtNtJloqwilCcKuDlKOLxjR8MqQjkxcvUARqwgAKsI5YIEqR5AgIB4OKNFWdZoCz4K8oJAAWEVoQwTV3ArSPUAAoxBfN5Y5AsAfL4lZcnQVfNeAt/s7FWRPwR9HZFGI62a9xK4gvjWHLkD4NdhX0+UFAE+qZnqnTCvDf24DFfwHjhgp/QTGaPHEzog9YpqcMBOKSeu4GrQgXm30F0s35oj34IDdkqnb6umenWcNxj7iWReV4sobcQV/GbcNxk7IPWKWnEF18d9H6IIjd218o3dxfKtOfIFgAtRvR/RGMbuWvkie+irK3gH4FNQSDs7iq6VL7KAeLNaga5zIYpYZF0rX6SPDa9X1HWOR0gTcQUf1ysq0qWHOJ6rfxXA3Rjel2gQC4j+MVWRDdK7WbbUvAsaK3G8P9ERlre3R2RdK18sO7N445F30NmUnShO4greiyMcQEwBAQ7WR3jVL8XJH5TH9ojcWPf28gbtfHwpxcEPR6znVyxjkKMsW24YCpeT+FpUCP7dgf8T9xdKKiCmoXAHXGmnaHxRNdUvk/hCiWyf6t2F+BY4/UvjuxvlSvkwiVQQnzf9ewe8PJ7CiW06t59EAwIwJBRa4uEANAQEYEgoMC3hABIagxzlLSRyTEKjuKsrHICmCuLj7BYNIPAG5PWK0vZwEC0VxFevKKdqqjddGbxPHBWOuIJbusMBaK4g3SxbPjQUlnW3g7RLZIV8VKkJCHAQkj8iZe2ixIgr+CDqezrGkboT0bJlyVD4MzjDVTRPXcHv4rzwMIzUBQTgNHDBCIBVV/COrpmqQbQO0vvxpoHf9G7f5T0l+SWu4GOd07jDpLKCdLNsueKNS3h3Yr7Y3mA8NeONXlIfEIBdrpzx1zd+l9aq0S0TAfFxlivz/CePfKC7IaPK3InWcKSugL+B1SRLBEDDu3c8VbNUw2QuID5Wk8ywvaqRioW/oDJ9clm21JTCNQW8jYx/LzkkAqxIjE8cSUIuTirLlsteNWG3Sz+/O/VBvaJu627MuHIREJ/X7fpvMCg6CAB/m/CPdV9kGJVcBQTodLsA+EHJ3feXQrkMhi+3JxCDErtcB8OX+xPHC8qyoXARQA0F+J5jVohg+ApzsnhBWfIG8wxKcIUKhq+QJ4lly+WSwrsCXERBfwYB+NO1H2VtkS8KhT45vKpyxVD4LVhVuhWyWvTCE8Jj2bIE4N0Cj1X8UNwCcLuI1aKXop0EI+kRFiB/Pyv/PpuGK7gNhqKnvP2nR86yZbFs4KIreBvAIgDT+1TWfnZ+IBwBVksKn7Zc/L1eUataW5VyWftP1s6yZals4LwILkonMGmsMN13YTYUsKoUVlou/pdVIpg0/admkmWLiU5QlkoKv3CBmuqExjxyaNQ/66O3IjsCNIxOGFZbLtYAfF7kAXYUGJCYdAXHLBuotlzUSgZMEVS9Q/zKY+J4mHyO9wcCOKrzp9EWbJYNNFouHAD3ADhZvmI2zf4D1iEEUcUnTJIAAAAASUVORK5CYII=",onClick:j}),(0,U.jsxs)("div",{className:m()("ml-20 shrink overflow-hidden","sm:ml-0 sm:mt-20 sm:text-center"),children:[(0,U.jsx)("div",{className:m()("md:truncate lg:truncate cursor-pointer font-[Montserrat]","sm:line-clamp-2 sm:text-22 sm:leading-30",il["font-h1"]),onClick:j,children:d}),(0,U.jsxs)("div",{className:m()("h-24 mt-8 text-[var(--s-color-text-tertiary)] truncate",il["font-footnote"]),children:[n&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(ip,{className:"align-[-7px]"}),(0,U.jsx)("span",{className:"ml-4",children:null==f?void 0:f.display_heat_score})]}),n&&i&&!!h&&(0,U.jsx)("span",{className:"inline-block text-center w-8 ml-4 mr-6",children:"\xb7"}),i&&!!h&&(0,U.jsx)("span",{className:m()("cursor-pointer",r&&"hover:text-[#1c1f23]"),onClick:()=>{if(r){var e,n;(null==t?void 0:null===(e=t.creator_info)||void 0===e?void 0:e.creator_id)?null==b||b({userId:null==t?void 0:null===(n=t.creator_info)||void 0===n?void 0:n.creator_id,enterFrom:"click_onboarding_head_name"}):q.k.console.warning({eventName:"message_box_open_user_profile_error"})}},children:v?`${v}${h}`:g("created_by_username",{postProcess:"sprintf",sprintf:[h]})})]}),(0,U.jsx)(c.ZP,{in:!k&&!a,timeout:200,children:e=>(0,U.jsx)(id.Z,{theme:"solid",loading:S,onClick:M,className:m()("px-10 py-8 !rounded-s-radius-xs mt-8",il["add-button"],il[`add-button-${e}`]),"data-testid":"chat_add_bot_button",children:g("add_bot_hover")})})]})]})},i=e=>{let{conversationId:t,botId:n}=e,r=iu({conversationId:t,botId:n}),i=ih(t,n);return{...r,hideButton:i,enableBotHeat:!0,enableOpenJump:!0,enableShowHandleName:!0}},function(){var e,t,n,a;let o,l;let{locationState:s}=(0,W.R)(),{currentChatViewConfig:u}=(0,x.sQ)("chatViewCoreStore"),d=null!==(e=null==u?void 0:u.chatId)&&void 0!==e?e:"",f=ii.messageServiceContainer.get("chatBotService"),p=(0,ia.Lp)(null==u?void 0:u.chatType),{botInfo:v,enableBotHeat:h,enableOpenJump:g,enableShowHandleName:b,hideButton:y,isCocoOrCocoSub:_,showLargeAvatar:S,largeAvatarVideoUrl:w,onExited:k}=i({conversationId:o=p?(null==f?void 0:null===(t=f.getBotIdToLocalConversationMap())||void 0===t?void 0:t[d])||"":d,botId:d}),j=_?o:null==v?void 0:v.id;l=v?(null===(n=v.onboarding)||void 0===n?void 0:n.message_list)&&(null===(a=v.onboarding)||void 0===a?void 0:a.message_list.length)>=2:!!(null==s?void 0:s.showSkeleton);let M=(0,U.jsx)(U.Fragment,{children:!l&&(0,U.jsxs)("div",{className:m()("flex items-center mb-26","sm:flex-col",y?"mt-24":"md:pt-84 lg:pt-84 sm:pt-24"),children:[(0,U.jsx)(io.Z.Avatar,{className:"w-120 h-120 shrink-0"}),!_&&(0,U.jsxs)("div",{className:"ml-20 shrink sm:ml-0 sm:mt-20 sm:flex sm:flex-col sm:items-center",children:[(0,U.jsx)(io.Z.Title,{className:"w-209 h-36"}),(0,U.jsx)(io.Z.Title,{className:"w-220 h-24 mt-8"}),p?(0,U.jsx)(io.Z.Button,{className:"w-97 h-32 mt-8 rounded-10"}):null]})]})});return(0,U.jsx)(c.ZP,{in:S,timeout:200,unmountOnExit:!0,onExited:k,children:e=>(0,U.jsx)(io.Z,{loading:!(null==v?void 0:v.id),placeholder:M,active:!0,children:(0,U.jsx)("div",{className:il[`fade-${e}`],children:(0,U.jsx)(r,{localConversationId:o,enableBotHeat:h,enableOpenJump:g,enableShowHandleName:b,largeAvatarVideoUrl:w,hideButton:y,botInfo:v})})})},`avatar-${j}`)});var ib=n(509403),ix=n(75699),iy=n(267458),i_=n(803515),iS=n(456402),iw=n(81307),ik=n(900730);let ij=e=>({onboarding_content_source:(0,rI.Z)(e,["ext","onboarding_content_source"],"")});var iM=n(386870),iC=n(666396),iI=n(592333),iT=n(51679),iE=n(455746),iN=n(1082),iR=n(499050),iB=n(233034),iO=n(967037);let iA=()=>{let e=(0,r8.useBotStore)(e=>e.choicenessBotLinks,rC.X),[t,n]=(0,r8.useBotStore)(e=>[e.botMap,e.botIdToLocalConversationMap],rC.X),[r]=(0,B.useFeedStore)(e=>[e.conversationLinks],rC.X);return e.filter(e=>{var i;let a=t[e.botID],o=n[e.botID]||"";return!a.has_conversation&&(null===(i=a.action)||void 0===i?void 0:i.action_type)===iI.W8.ArchiveConversation&&!r.find(e=>e.conversationId===o)})},iL=()=>(0,r8.useBotStore)(e=>e.discoveryBotListStatus||{},rC.X),iP=e=>(0,r8.useBotStore)(t=>e?t.botIdToLocalConversationMap[e]:void 0),iF=e=>{let t=B.useFeedStore.getState().addNewLocalConversation({conversation:{conversation_type:iw.VI.Bot}});return r8.useBotStore.getState().setLocalConversationIdForBot({botId:e,localConversationId:t}),t};async function iZ(e,t){if(2!==Number(null==e?void 0:e.version))return{msgList:[],onboarding_content_source:"preset"};let n=null==e?void 0:e.message_list,r={};if((null==e?void 0:e.call_mode)===iI.L6.Real||(null==e?void 0:e.call_mode)===iI.L6.RealNone)try{n=(null==e?void 0:e.call_mode)===iI.L6.Real?e.message_list:[];let{data:i}=await iT.Ox.GetFirstMet({bot_id:t});r=i}catch(e){}if(!(0,eZ.Z)(null==r?void 0:r.message_list)){var i;n=null==r?void 0:null===(i=r.message_list)||void 0===i?void 0:i.slice()}let a=ij(null==n?void 0:n[0]);return{msgList:n,...a}}async function iD(e,t,n,r){let i=(0,ik.J)(iC.YR);if(2===Number(null==t?void 0:t.version)&&!(0,eZ.Z)(n)){if(n)for(let[t,a]of(0,ib.Z)(n)){let n={...a,message_id:iC.YR+t,local_message_id:i+t,conversation_id:e,local_conversation_id:e,reply_id:iC.YR,status:iE.PushMessageStatus.Available,conversation_type:iw.VI.Bot,user_type:iE.UserType.Bot};if(!(0,tf.DRY)(n)){let e=await (0,iM.m)(n);r.draftMessageLinks.push({isLocalMessage:!1,messageId:iC.YR+t}),r.draftMessageMap[iC.YR+t]={...e,is_delta:!1}}}return}2!==Number(null==t?void 0:t.version)&&function(e,t,n,r,i,a){let o={is_delta:!1,content_obj:{text:a},content_type:iE.ContentType.Text,conversation_id:t,create_time:Date.now(),local_info:{from:iw.Fz.Api,log_id:"none"},ext:{is_finish:"1",onboarding:"1",stream:"1",sp:JSON.stringify(i)},is_finish:!0,index:1,local_message_id:n,message_id:iC.YR,message_type:iE.MessageType.Message,meta_infos:void 0,reply_id:iC.YR,status:iE.PushMessageStatus.Available},l={isLocalMessage:!1,messageId:iC.YR};r.draftMessageLinks.push(l),r.draftMessageMap[iC.YR]=o}(0,e,i,r,[],null==t?void 0:t.content)}let iW=(0,o.forwardRef)(e=>{let{chatId:t,chatType:n,MessageListSlot:r}=e,i=(0,iB.s)(),a=(0,ef.T)(),{enter_from:l,from_visit_page:s,bot_position:u}=(0,iR.Qt)(a.search)||{},c=iP(t),d=(0,r8.useBotInfo)(t),f=(0,o.useRef)(0),p=(0,o.useRef)(!1),{tagList:m,selectedTagId:v}=iL(),h=iA(),[g,x]=(0,eF.useMessageStore)(e=>[e.updateMessageList,e.clearConversationMessages],rC.X),[y]=(0,r8.useBotStore)(e=>[e.fetchToUpdateBot],rC.X);return(0,o.useEffect)(()=>{let e=(e,n)=>n.map(e=>{var n,r;return{...e,localConversationId:c,botId:t,reportEvents:{create_conversation_by_message:(0,iO.zQ)({eventName:"create_conversation_by_message",meta:{scene:"new_bot_conversation"}})},reportParams:{...e.reportParams,enter_from:(null==a?void 0:null===(n=a.state)||void 0===n?void 0:n.enter_from)||l,from:(null===(r=e.reportParams)||void 0===r?void 0:r.from)||""},chatType:b.z.Bot,botType:"UGC"}}),n=(e,t)=>(i(a.pathname.concat(a.search),{state:{backToRoute:void 0}}),t);return rP.S.on("processMessageBefore",e),rP.S.on("beforeMessageSending",n),()=>{rP.S.off("processMessageBefore",e),rP.S.off("beforeMessageSending",n)}},[c]),(0,o.useEffect)(()=>{var e,r,o,_,S,w,k;let j=iF(t);async function M(e){var r;let o;if((n===b.z.Bot||n===b.z.ProfileBot)&&!(o=r8.useBotStore.getState().botMap[t]))try{o=await y({botId:t})}catch(e){q.k.persist.error({message:"fetchToUpdateBotInfo Error",error:e})}if((null==o?void 0:o.has_conversation)&&o.conversation_id){let e=`${i_.fU}${o.conversation_id}`,{guest_landing:t,login_source:n}=(0,iR.Qt)(a.search);if(1===Number(t)){let t={guest_landing:"1"};n&&(t.login_source=n),e=(0,iR.ju)(`${i_.fU}${o.conversation_id}`,t)}return i(e,{state:{create_chat_type:"chat_with_bot",page_start_time:f.current}})}if(!o&&(null==a?void 0:null===(r=a.state)||void 0===r?void 0:r.shareFallbackToChatNew)){let e=(0,iR.DI)(i_.G5,{botId:t,enter_from:"url_new_invisible"});return(0,tY.Po)()&&await (0,tY.EL)(),(0,tY.M7)()?i(e):i((0,iS.Mn)((0,iR.DI)(i_.Zd,{loginSuccessBackUrl:e})))}let{onboarding:l}=o||{},s={onboarding_content_source:""};if(l&&j){x(j);let{msgList:e=[],onboarding_content_source:n="preset"}=await iZ(l,t);g({conversationId:j,immerUpdate:async t=>{await iD(j,l,e,t),s={onboarding_content_source:n}}})}(0,O.trackEvent)("enter_page",{...e,...s})}let C=(0,iS.W8)(a),T="bot_discover"===((null==a?void 0:null===(e=a.state)||void 0===e?void 0:e.enter_from)||l),E=(null===(r=a.state)||void 0===r?void 0:r.from_visit_page)||s,N={current_page:ix.aG.CHAT,previous_page:C||E||"other"},R={...N,page:"chat",bot_id:t,is_tts:0,enter_method:"bot_discover"===((null==a?void 0:null===(o=a.state)||void 0===o?void 0:o.enter_from)||l)?"bot_list_discover":null!==(w=(null==a?void 0:null===(_=a.state)||void 0===_?void 0:_.enter_from)||l)&&void 0!==w?w:"other",bot_position:null!==(k=String((null==a?void 0:null===(S=a.state)||void 0===S?void 0:S.bot_position)||u))&&void 0!==k?k:"other",chat_type:(0,eV.yT)("","",d),user_id:T?(0,iN.n5)():void 0,req_id:T?(0,r8.getRequestIdByBotId)(t):void 0,recommend_from:T?"bot_list_discover":void 0};f.current=Date.now(),M(R);let A=B.useFeedStore.subscribe(e=>e.localConversationMap[j],e=>{var n,r,a,o,l,s,u,d;if((null==e?void 0:null===(n=e.local)||void 0===n?void 0:n.createStatus)===I.ns.Done&&(null==e?void 0:null===(r=e.local)||void 0===r?void 0:r.newConversationId)){null===(o=e.local)||void 0===o||null===(a=o.reportEvent)||void 0===a||a.success();let{botInfo:n}=(0,eV.lC)(e.local.newConversationId),r={...N,enter_method:null==e?void 0:null===(l=e.local)||void 0===l?void 0:l.createFrom,click_from:"chatted",bot_id:t,chat_type:(0,eV.yT)("",null===(s=e.local)||void 0===s?void 0:s.newConversationId,n),discover_page_bot_type:T?null===(u=m.find(e=>e.tag_id===v))||void 0===u?void 0:u.tag_name:void 0,user_id:T?(0,iN.n5)():void 0,req_id:T?(0,r8.getRequestIdByBotId)(t):void 0,recommend_from:T?"bot_list_discover":void 0};p.current=!0,h.find(e=>e.botID===t)||(0,O.trackEvent)("follow_bot",r),i(`${i_.fU}${null===(d=e.local)||void 0===d?void 0:d.newConversationId}`,{state:{create_chat_type:"chat_with_bot",page_start_time:f.current,enter_from:T?"bot_discover":"other_default",localConversationId:c}})}});return()=>{var e;A();let n="bot_discover"===((null==a?void 0:null===(e=a.state)||void 0===e?void 0:e.enter_from)||l);p.current||(0,O.trackEvent)("leave_chat_page",{...N,bot_id:t,duration:String(Date.now()-f.current),chat_type:(0,eV.yT)("","",d),user_id:n?(0,iN.n5)():void 0,recommend_from:n?"bot_list_discover":void 0,req_id:n?(0,r8.getRequestIdByBotId)(t):void 0})}},[t]),(0,o.useEffect)(()=>{let e=async(e,t)=>{if("UGC"===t[0].botType&&(0,eP.eH)(eF.useMessageStore.getState(),t[0].conversationId||"")){let e=(0,iO.zQ)({eventName:"hide_large_avatar"});await Promise.race([is.getState().hideAvatar(),new Promise(e=>setTimeout(()=>e(!0),250))])?e.error({reason:"timeout",meta:{visibility:document.visibilityState}}):e.success()}return t};return iy.w.on("processMessageBefore",e),()=>{iy.w.off("processMessageBefore",e)}},[]),c?(0,U.jsx)(r,{section:!1,conversationId:c}):null}),iz=e=>{let{chatId:t,chatType:n}=e,r=r9({slots:{MessageList:ru,MessageListLoadMore:rp,SectionDivider:rh.d,LargeAvatar:ig}});return(0,U.jsx)(iW,{chatId:t,chatType:n,MessageListSlot:r})},iU=(0,o.lazy)(()=>(0,ew.Zv)(()=>Promise.all([n.e("43361"),n.e("6973"),n.e("62192"),n.e("277"),n.e("34986"),n.e("68592"),n.e("54033"),n.e("54924"),n.e("33009"),n.e("74212"),n.e("43850"),n.e("33382"),n.e("86466"),n.e("197"),n.e("12067"),n.e("87048")]).then(n.bind(n,433408)))),iV=e=>{let{conversationId:t,conversationType:n}=e;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(iz,{chatId:t,chatType:n}),(0,U.jsx)("div",{className:"flex flex-col items-center pb-20 px-28 mx-auto max-w-[var(--content-max-width)] w-full",children:(0,U.jsx)(k.xg,{chatId:t,chatType:n,forceUseChatInputPlugin:!0})}),(0,U.jsx)(o.Suspense,{fallback:(0,U.jsx)(U.Fragment,{}),children:(0,U.jsx)(iU,{})})]})},i$=(0,s.E)(()=>{let e=(0,A.g1)();return(0,U.jsx)(eg.K,{title:e("page_can_not_find_title"),subTitle:e("page_can_not_find_desc"),from:"Page404Global",showHomeBtn:!0})}),iH=e=>e&&((0,eb.k)(e)||(0,eb.k)(null==e?void 0:e.replace("local_","")));var iG=(0,o.memo)(()=>{var e,t,n;let r=(0,ex.S)(),i=r[r.length-1],a=(null==i?void 0:null===(e=i.params)||void 0===e?void 0:e.id)||"",{currentChatViewConfig:s}=(0,x.sQ)("chatViewCoreStore"),c=null!==(t=null==s?void 0:s.chatId)&&void 0!==t?t:"",d=null!==(n=null==s?void 0:s.chatType)&&void 0!==n?n:b.z.NewThread,f=(0,o.useMemo)(()=>{var e,t;let n=(0,l.Og)(a);return null===(e=(t=(0,x.GX)("chatGuidanceStore")).setActiveSkillGuidanceIdentifier)||void 0===e||e.call(t,n),n},[a]),p=(0,o.useMemo)(()=>(0,l.qc)(a),[a]),{businessInit:m}=(0,u.O)();return m?d===b.z.Bot||d===b.z.ProfileBot?(0,U.jsx)(iV,{conversationId:c,conversationType:d}):iH(a)?(0,U.jsx)(r3,{conversationId:c,conversationType:d}):f?(0,U.jsx)(eh,{conversationId:c,conversationType:d,skillType:p}):(0,U.jsx)(i$,{}):null})},757658:function(e,t,n){n.d(t,{s:function(){return i}});var r=n(429996);let i=e=>r.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},r.createElement("path",{d:"M21.0082 6.43261C21.3244 6.12129 21.8347 6.12303 22.1487 6.43652C22.4627 6.75002 22.4609 7.25605 22.1447 7.56738L11.3999 18.1475C10.8493 18.6896 9.96103 18.6896 9.41046 18.1475L2.85521 11.6924C2.53906 11.381 2.53731 10.875 2.85127 10.5615C3.1457 10.2675 3.6129 10.2475 3.93068 10.5029L3.99175 10.5576L10.4052 16.8721L21.0082 6.43261Z",fill:"currentColor"}))},218708:function(e,t,n){n.d(t,{V:function(){return i}});var r=n(429996);let i=e=>r.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},r.createElement("path",{d:"M5 10.5C5.82843 10.5 6.5 11.1716 6.5 12C6.5 12.8284 5.82843 13.5 5 13.5C4.17157 13.5 3.5 12.8284 3.5 12C3.5 11.1716 4.17157 10.5 5 10.5Z",fill:"currentColor"}),r.createElement("path",{d:"M12 10.5C12.8284 10.5 13.5 11.1716 13.5 12C13.5 12.8284 12.8284 13.5 12 13.5C11.1716 13.5 10.5 12.8284 10.5 12C10.5 11.1716 11.1716 10.5 12 10.5Z",fill:"currentColor"}),r.createElement("path",{d:"M19 10.5C19.8284 10.5 20.5 11.1716 20.5 12C20.5 12.8284 19.8284 13.5 19 13.5C18.1716 13.5 17.5 12.8284 17.5 12C17.5 11.1716 18.1716 10.5 19 10.5Z",fill:"currentColor"}))},718025:function(e,t){t.Z=function(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}},587245:function(e,t){t.Z=function(e,t){return e<t}},900485:function(e,t){t.Z=function(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);void 0!==a&&(n=void 0===n?a:n+a)}return n}},672697:function(e,t,n){n.d(t,{Z:function(){return l}});var r=Math.max,i=Math.min,a=n(101823),o=n(637825),l=function(e,t,n){var l,s,u;return t=(0,a.Z)(t),void 0===n?(n=t,t=0):n=(0,a.Z)(n),(l=e=(0,o.Z)(e))>=i(s=t,u=n)&&l<r(s,u)}},69345:function(e,t,n){var r=n(349504),i=n(210428),a=n(129144);t.Z=function(e){return e&&e.length?(0,r.Z)(e,a.Z,i.Z):void 0}},645007:function(e,t,n){var r=n(349504),i=n(348344),a=n(587245);t.Z=function(e,t){return e&&e.length?(0,r.Z)(e,(0,i.Z)(t,2),a.Z):void 0}},87548:function(e,t,n){n.d(t,{Z:function(){return s}});var r=Math.ceil,i=Math.max,a=function(e,t,n,a){for(var o=-1,l=i(r((t-e)/(n||1)),0),s=Array(l);l--;)s[a?l:++o]=e,e+=n;return s},o=n(173581),l=n(101823),s=function(e,t,n){return n&&"number"!=typeof n&&(0,o.Z)(e,t,n)&&(t=n=void 0),e=(0,l.Z)(e),void 0===t?(t=e,e=0):t=(0,l.Z)(t),n=void 0===n?e<t?1:-1:(0,l.Z)(n),a(e,t,n,void 0)}},447269:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(718025),i=n(824915),a=n(348344),o=function(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n},l=n(511451),s=function(e,t,n){var s=(0,l.Z)(e)?r.Z:o,u=arguments.length<3;return s(e,(0,a.Z)(t,4),n,u,i.Z)}},797763:function(e,t,n){var r=n(348344),i=n(900485);t.Z=function(e,t){return e&&e.length?(0,i.Z)(e,(0,r.Z)(t,2)):0}},612869:function(e,t,n){var r=n(923583);t.Z=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?(0,r.Z)(e,void 0,t):[]}},316649:function(e,t,n){var r=n(524004),i=n(219291),a=n(773047),o=(0,i.Z)(function(e,t){return(0,a.Z)(e)?(0,r.Z)(e,t):[]});t.Z=o},743741:function(e,t,n){let r;n.d(t,{YD:function(){return p},df:function(){return f}});var i=n(429996);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let o=new Map,l=new WeakMap,s=0;function u(e,t,n={},i=r){if(void 0===window.IntersectionObserver&&void 0!==i){let r=e.getBoundingClientRect();return t(i,{isIntersecting:i,target:e,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),()=>{}}let{id:a,observer:c,elements:d}=function(e){let t=Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{var n;return`${t}_${"root"===t?(n=e.root)?(l.has(n)||(s+=1,l.set(n,s.toString())),l.get(n)):"0":e[t]}`}).toString(),n=o.get(t);if(!n){let r;let i=new Map,a=new IntersectionObserver(t=>{t.forEach(t=>{var n;let a=t.isIntersecting&&r.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=a),null==(n=i.get(t.target))||n.forEach(e=>{e(a,t)})})},e);r=a.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:a,elements:i},o.set(t,n)}return n}(n),f=d.get(e)||[];return d.has(e)||d.set(e,f),f.push(t),c.observe(e),function(){f.splice(f.indexOf(t),1),0===f.length&&(d.delete(e),c.unobserve(e)),0===d.size&&(c.disconnect(),o.delete(a))}}let c=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function d(e){return"function"!=typeof e.children}class f extends i.Component{constructor(e){super(e),this.node=null,this._unobserveCb=null,this.handleNode=e=>{!this.node||(this.unobserve(),e||this.props.triggerOnce||this.props.skip||this.setState({inView:!!this.props.initialInView,entry:void 0})),this.node=e||null,this.observeNode()},this.handleChange=(e,t)=>{e&&this.props.triggerOnce&&this.unobserve(),d(this.props)||this.setState({inView:e,entry:t}),this.props.onChange&&this.props.onChange(e,t)},this.state={inView:!!e.initialInView,entry:void 0}}componentDidUpdate(e){(e.rootMargin!==this.props.rootMargin||e.root!==this.props.root||e.threshold!==this.props.threshold||e.skip!==this.props.skip||e.trackVisibility!==this.props.trackVisibility||e.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())}componentWillUnmount(){this.unobserve(),this.node=null}observeNode(){if(!this.node||this.props.skip)return;let{threshold:e,root:t,rootMargin:n,trackVisibility:r,delay:i,fallbackInView:a}=this.props;this._unobserveCb=u(this.node,this.handleChange,{threshold:e,root:t,rootMargin:n,trackVisibility:r,delay:i},a)}unobserve(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)}render(){if(!d(this.props)){let{inView:e,entry:t}=this.state;return this.props.children({inView:e,entry:t,ref:this.handleNode})}let e=this.props,{children:t,as:n}=e,r=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,c);return i.createElement(n||"div",a({ref:this.handleNode},r),t)}}function p({threshold:e,delay:t,trackVisibility:n,rootMargin:r,root:a,triggerOnce:o,skip:l,initialInView:s,fallbackInView:c,onChange:d}={}){var f;let[m,v]=i.useState(null),h=i.useRef(),[g,b]=i.useState({inView:!!s,entry:void 0});h.current=d,i.useEffect(()=>{let i;if(!l&&m)return i=u(m,(e,t)=>{b({inView:e,entry:t}),h.current&&h.current(e,t),t.isIntersecting&&o&&i&&(i(),i=void 0)},{root:a,rootMargin:r,threshold:e,trackVisibility:n,delay:t},c),()=>{i&&i()}},[Array.isArray(e)?e.toString():e,m,a,r,o,l,n,c,t]);let x=null==(f=g.entry)?void 0:f.target,y=i.useRef();m||!x||o||l||y.current===x||(y.current=x,b({inView:!!s,entry:void 0}));let _=[v,g.inView,g.entry];return _.ref=_[0],_.inView=_[1],_.entry=_[2],_}}}]);
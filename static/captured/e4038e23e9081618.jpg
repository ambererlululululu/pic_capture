"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["98483"],{229360:function(e,t,n){e.exports=n.p+"static/image/default-avatar.2b32f3b3.png"},365283:function(e,t,n){n.d(t,{NavLink:function(){return l}});var i=n(713738),a=n(186995),o=n(532430),r=n(345660);let l=(0,i.forwardRef)((e,t)=>{let n=(0,o.getFromInstance)("NavLink",a.NavLink);return(0,r.jsx)(n,{...e,ref:t})})},830802:function(e,t,n){n.d(t,{default:function(){return o}}),n(713738);var i=n(430261),a=n(345660),o=(0,i.IconFactory)((0,a.jsx)(e=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:[(0,a.jsx)("path",{fill:"currentColor",d:"M11 8a1 1 0 1 1 2 0v3h3a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M12 23c6.075 0 11-4.925 11-11S18.075 1 12 1 1 5.925 1 12s4.925 11 11 11m0-2a9 9 0 1 1 0-18 9 9 0 0 1 0 18"})]}),{}))},996830:function(e,t,n){n.d(t,{default:function(){return o}}),n(713738);var i=n(430261),a=n(345660),o=(0,i.IconFactory)((0,a.jsx)(e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 2.5h3v1a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1h3v19H6zm12-2H6c-1 0-2 1-2 2v19c0 1 1 2 2 2h12c1 0 2-1 2-2v-19c0-1-1-2-2-2M9.75 19a.75.75 0 0 0 0 1.5h4.5a.75.75 0 0 0 0-1.5z",clipRule:"evenodd"})}),{}))},828617:function(e,t,n){n.d(t,{useLatestFunction:function(){return o}});var i=n(713738),a=n(580622);function o(e){let t=(0,a.default)(e),n=(0,i.useCallback)(function(){for(var e,n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return null===(e=t.current)||void 0===e?void 0:e.call(t,...i)},[]);return e&&n}},20315:function(e,t,n){n.d(t,{SidebarSection:function(){return v},SidebarSectionConfigProvider:function(){return u},SidebarStyle:function(){return m}});var i=n(713738),a=n(812650),o=n.n(a),r=n(398356),l={section:"section-YNwCJ1","section-item":"section-item-a3Yv28",sectionItem:"section-item-a3Yv28",active:"active-KHfO8U","section-item-title":"section-item-title-AQqE5v",sectionItemTitle:"section-item-title-AQqE5v",plain:"plain-H_NGX5","section-item-icon":"section-item-icon-oQoBrd",sectionItemIcon:"section-item-icon-oQoBrd"},s=n(345660);let c=(0,i.createContext)({}),d=()=>i.useContext(c),u=c.Provider,v=(0,i.forwardRef)(function(e,t){let{children:n,className:i,...a}=e;return(0,s.jsx)("div",{ref:t,className:o()([l.section,i]),...a,children:n})});v.Item=e=>{var t;let{children:n,className:i,theme:a,...r}=e,c=d(),u=null!==(t=null!=a?a:c.theme)&&void 0!==t?t:"default";return(0,s.jsx)("div",{"data-testid":"sidebar-section-item",className:o()(l["section-item"],i,"plain"===u?l.plain:void 0),...r,children:n})},v.ItemTitle=e=>{let{className:t,children:n,...i}=e;return(0,s.jsx)("div",{className:o()([l["section-item-title"],t]),...i,children:n})},v.ItemIcon=e=>{let{className:t,svg:n,...i}=e;return(0,s.jsx)(r.default,{svg:n,className:o()([l["section-item-icon"],t]),...i})};let m=l},912161:function(e,t,n){n.d(t,{DisabledTag:function(){return i},WritingSkillTemplateType:function(){return o}});let i=((a={}).Reviewing="reviewing",a.Ban="ban",a.Delete="delete",a.Private="private",a.Rollback="rollback",a);var a,o={Compose:"compose",Reply:"reply"}},542737:function(e,t,n){n.d(t,{SidebarApplicationUI:function(){return m}});var i=n(456602),a=n(713738),o=n(678669),r=n(812650),l=n.n(r),s=n(803147),c=n(20315),d=n(270061),u={"nav-link":"nav-link-niM1IA","drag-overlay":"drag-overlay-pFNF7g",dragging:"dragging-QsZrJz","overflow-popover":"overflow-popover-hvb5Jz",active:"active-PrF9FT",title:"title-bt78aP"},v=n(345660);let m=(0,a.forwardRef)(function(e,t){let{renderIcon:n,text:r,popoverTitle:m,className:g,forceActive:h,titleClassName:p,state:f,renderAfterTitle:_,onClick:b,onShow:k,"data-testid":w,isOverflowPopover:T,isDragging:C,isDragOverlay:S,...x}=e,y=(0,a.useRef)(null),[I]=(0,d.default)(y,{threshold:.5});(0,a.useEffect)(()=>{I&&(null==k||k())},[I]);let N=(0,o.default)(x,["NavLink","url","target","isOverflow","recommendType","isOver","hasDragging"]),F=e=>{var t;let n=null!==(t=null!=h?h:e)&&void 0!==t&&t,i="function"==typeof g?g(n):g;return l()(c.SidebarStyle["section-item"],u["nav-link"],n&&(T?u.active:c.SidebarStyle.active),C&&!S&&u.dragging,S&&u["drag-overlay"],T&&u["overflow-popover"],i)},j=e=>{var t;let a=null!==(t=null!=h?h:e)&&void 0!==t&&t;return(0,v.jsxs)(v.Fragment,{children:[n({isActive:a,className:"text-16 p-2"}),(0,v.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,v.jsxs)(c.SidebarSection.ItemTitle,{title:null!=m?m:"string"==typeof r?r:"",className:l()(u.title,p),children:[r,_?_({isActive:a}):null]}),a&&T&&(0,v.jsx)(i.default,{className:"text-16 text-s-color-brand-primary-default"})]})]})};return(0,v.jsx)(c.SidebarSection,{ref:e=>{y.current=e,"function"==typeof t?t(e):t&&(t.current=e)},"data-testid":w,...N,children:"NavLink"in x?(0,v.jsx)(x.NavLink,{to:x.url,state:{from:s.SkillGuidancePageFrom.SIDEBAR,...f},draggable:!1,className:e=>{let{isActive:t}=e;return F(t)},target:x.target,onClick:b,children:e=>{let{isActive:t}=e;return j(t)}}):(0,v.jsx)("div",{className:F(),onClick:b,children:j()})})})},61156:function(e,t,n){n.d(t,{useGetThreadAvatarByIntentionType:function(){return C},getThreadMobileAvatar:function(){return T}});var i=n(713738),a=n(210128),o=n.p+"static/image/writing.light.61519af2.png",r=n.p+"static/image/writing.dark.e59b26b4.png",l=n.p+"static/image/mobile.light.a389a33c.png",s=n.p+"static/image/mobile.dark.9f6fa4a5.png",c=n.p+"static/image/meeting-record.light.b33f0e37.png",d=n.p+"static/image/meeting-record.dark.962facdb.png",u=n.p+"static/image/image-gen.light.796c389a.png",v=n.p+"static/image/image-gen.dark.456d8f24.png",m=n.p+"static/image/default.light.0851495d.png",g=n.p+"static/image/default.dark.88d31d4e.png",h=n.p+"static/image/deep-research.light.cd6a4b30.png",p=n.p+"static/image/deep-research.dark.144c095d.png",f=n.p+"static/image/ai-code.light.5537a995.png",_=n.p+"static/image/ai-code.dark.e2a1dfc1.png",b=n(327587);let k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"light";switch(e){case b.ConversationIntentionType.Writing:return"light"===t?o:r;case b.ConversationIntentionType.ImageGen:return"light"===t?u:v;case b.ConversationIntentionType.MeetingRecord:return"light"===t?c:d;case b.ConversationIntentionType.AICode:return"light"===t?f:_;case b.ConversationIntentionType.Mobile:return"light"===t?l:s;case b.ConversationIntentionType.DeepResearch:return"light"===t?h:p;case b.ConversationIntentionType.Default:default:return"light"===t?m:g}},w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return k(b.ConversationIntentionType.Default,e)},T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return k(b.ConversationIntentionType.Mobile,e)},C=()=>{let{value:e}=(0,a.useTeaVar)({key:"thread_intention_avatar",defaultValue:"disabled"}),t="by_intention"===e;return(0,i.useMemo)(()=>t?k:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"light";return w(t)},[t])}},838708:function(e,t,n){n.d(t,{ChatItemMenuSlotContext:function(){return i}});let i=(0,n(713738).createContext)(()=>null)},37142:function(e,t,n){n.d(t,{ChatItemForConversation:function(){return G}});var i=n(713738),a=n(865607),o=n(845647),r=n(389174),l=n(651610),s=n(230932),c=n(971857),d=n(212183),u=n(777422),v=n(888130),m=n(640380),g=n(996830),h=n(949789),p=n(557298),f=n(828438),_=n(812650),b=n.n(_),k=n(101874);function w(e){var t,n;if(e)return(null===(t=e.icon_image)||void 0===t?void 0:t.tiny_url)||(null===(n=e.icon_image)||void 0===n?void 0:n.origin_url)||e.icon_url}var T=n(912161),C=n(20315),S=n(915299),x=n(102249),y=n(7625),I=n(992847),N=n(441259),F=n(556166),j=n(311783),R=n(214902),$=n(365283);let E={[C.SidebarStyle.plain]:!1};var L=n(838708),M=n(689368),D=n(516655),B=n(345660);let P=e=>{let{identifier:t,...n}=e,{plugin:i,loading:a}=(0,M.useFeedListItemToolButtonPlugin)(t);return!i||a?null:(0,B.jsx)(i.Content,{...n},String(t))},O=e=>{let{conversation:t,lastMessageIndex:n,inView:i}=e,{matcher:a}=(0,D.useFeedListItemToolButtonPluginMatcher)(),o=(null!=a?a:[]).map(e=>e(t)).filter(e=>void 0!==e);return(0,B.jsx)(B.Fragment,{children:null==o?void 0:o.map((e,a)=>(0,B.jsx)(P,{inView:i,identifier:e,conversation:t,lastMessageIndex:n},String(e||a)))})};var W=n(61156),A=n(229360),H={avatar:"avatar-bmETFp",wrapper:"wrapper-VfRFsF",content:"content-fPccND",title:"title-U4bT3h",overallTitle:"overallTitle-TA8Ih3",pinned:"pinned-mgjVVn",tag:"tag-_oULiZ","ban-tag":"ban-tag-_3ydO1",banTag:"ban-tag-_3ydO1","review-tag":"review-tag-e2ZPTc",reviewTag:"review-tag-e2ZPTc",extra:"extra-tWqa8b","chat-item-menu-wrapper":"chat-item-menu-wrapper-UU1OKN",chatItemMenuWrapper:"chat-item-menu-wrapper-UU1OKN","active-link":"active-link-KlbNDV",activeLink:"active-link-KlbNDV",left:"left-fwPkF2","chat-item":"chat-item-XHPPHk",chatItem:"chat-item-XHPPHk","contain-skeleton":"contain-skeleton-yzF6Ln",containSkeleton:"contain-skeleton-yzF6Ln","avatar-skeleton":"avatar-skeleton-ACjPJg",avatarSkeleton:"avatar-skeleton-ACjPJg","wrapper-skeleton":"wrapper-skeleton-mfT3HU",wrapperSkeleton:"wrapper-skeleton-mfT3HU","title-skeleton":"title-skeleton-qVsHYF",titleSkeleton:"title-skeleton-qVsHYF","msg-skeleton":"msg-skeleton-EjDeUN",msgSkeleton:"msg-skeleton-EjDeUN","keep-menu":"keep-menu-DVgZ1d",keepMenu:"keep-menu-DVgZ1d",msg:"msg-mB5R_Q",summary:"summary-uLFHZ2","remove-btn":"remove-btn-jHiNyh",removeBtn:"remove-btn-jHiNyh","chat-item-overflow-tooltip-trigger":"chat-item-overflow-tooltip-trigger-zZpes1",chatItemOverflowTooltipTrigger:"chat-item-overflow-tooltip-trigger-zZpes1","desktop-section-item":"desktop-section-item-Ruwxnu",desktopSectionItem:"desktop-section-item-Ruwxnu"};let Z=e=>(null==e?void 0:e.disabled_tag)===T.DisabledTag.Reviewing?H["review-tag"]:(null==e?void 0:e.disabled_tag)===T.DisabledTag.Ban||(null==e?void 0:e.disabled_tag)===T.DisabledTag.Rollback?H["ban-tag"]:H.tag,U=(e,t,n)=>e?!(0,r.isCocoSubConversation)(n)&&[T.DisabledTag.Reviewing,T.DisabledTag.Ban,T.DisabledTag.Rollback].includes(null==t?void 0:t.disabled_tag):!(0,r.isCocoSubConversation)(n)&&(null==t?void 0:t.disabled_tag)===T.DisabledTag.Ban,V=e=>{var t;let{navTo:n,switchChat:a,conversation:o,bot:m,lastMessageIndex:p,hasBotShow:_,hasMenu:C=!0,conversationType:x,className:y,onClick:I,enableOverflowTooltip:j=!0,isOverallChatItem:$,...E}=e,M=(0,S.useTranslateFn)(),D=(0,r.isCocoConversationType)(x),P=(0,i.useContext)(L.ChatItemMenuSlotContext),[W,A]=(0,f.useInView)({triggerOnce:!0,initialInView:!1,threshold:1}),V=(0,v.useUserInfo)(),{botInfo:J}=(0,d.getInfoByConversationId)(null==o?void 0:o.conversation_id),{bot_id:K,creator_info:X,name:q}=J||m||{},G=(null==X?void 0:X.creator_id)===(null==V?void 0:V.user_id_str),Q=function(e){let t=(0,S.useTranslateFn)();switch(e){case T.DisabledTag.Reviewing:return t("voice_in_moderation");case T.DisabledTag.Ban:case T.DisabledTag.Rollback:return t("tag_review_failed");default:return""}}(null!==(t=null==J?void 0:J.disabled_tag)&&void 0!==t?t:""),Y=U(G,J,o),ee=Z(J),et=(0,i.useRef)(null),[en,ei]=(0,i.useState)(!1),[ea,eo]=(0,i.useState)(!1),er=(0,N.getIsIPad)(),el=(0,l.getThreadLinksFromConversationLinks)(s.useFeedStore.getState()),{conversationLinks:es}=(0,c.useConversationList)(),ec=(0,i.useMemo)(()=>($?es:el).findIndex(e=>e.conversationId===(null==o?void 0:o.conversation_id)),[el,es]);return(0,i.useEffect)(()=>{if(A){if(o&&(0,r.isCocoSubConversation)(o)&&!(null==_?void 0:_(K||"",null==o?void 0:o.conversation_id))){let{name:e,conversation_id:t,conversation_type:n}=o;(0,u.trackEvent)("historic_thread_single_show",{thread_rnk:ec>-1?ec+1:void 0,thread_topic:e,conversation_id:t,conversation_type:n,chat_type:"default_new"})}else(null==_?void 0:_(K||""))&&(0,u.trackEvent)("show_bot_chat",{bot_id:null!=K?K:null==o?void 0:o.bot_id,enter_from:"bot_list",chat_type:(0,d.getChatTypeForTea)((0,v.getUserId)(),null==o?void 0:o.conversation_id,J),conversation_type:null==o?void 0:o.conversation_type})}},[A]),(0,B.jsx)(z,{ref:W,id:(null==o?void 0:o.conversation_id)?`conversation_${null==o?void 0:o.conversation_id}`:`bot_${null==m?void 0:m.bot_id}`,className:y,alt:q,conversationType:x,isOverallChatItem:$,navTo:n,switchChat:a,intentionType:null==o?void 0:o.intention_type,avatarSrc:w(o)||w(m),onClick:I,renderContent:()=>{var e;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:b()(H.wrapper,{"!h-32":D||(0,r.isCocoSubConversation)(o)}),onMouseEnter:()=>ei(!0),onMouseLeave:()=>ei(!1),children:(0,B.jsxs)("div",{className:H.content,children:[(0,B.jsx)("span",{"data-testid":"chat_list_item_title",className:b()(H.title,{[H.mainTitle]:D,[H.overallTitle]:$}),ref:et,children:(0,r.isCocoConversation)(o)&&V?M("recent_chats_main_bot_doubao_title"):(null==o?void 0:o.name)||(null==m?void 0:m.name)}),Y&&(0,B.jsx)(R.SamanthaTooltip,{content:Q,autoAdjustOverflow:!0,arrowPointAtCenter:!0,showArrow:!0,motion:!0,trigger:"hover",children:(0,B.jsx)(F.default,{size:"small",shape:"circle",className:ee,children:Q})}),(!(0,r.isCocoSubConversation)(o)||$)&&(null==o?void 0:o.pinned)&&(0,B.jsx)(h.default,{"data-testid":"chat_list_item_pin_icon",className:H.pinned,autoFitRTL:!0}),(0,r.isCocoConversation)(o)&&V&&!$&&(0,B.jsx)(R.SamanthaTooltip,{content:M("recent_chats_main_bot_doubao_tooltip"),children:(0,B.jsx)("div",{className:"flex",children:(0,B.jsx)(g.default,{className:b()("text-13 ml-2 text-s-color-text-quaternary",er?"-mt-1":"mt-1")})})})]})}),(0,B.jsxs)("div",{className:b()(H.extra,"flex items-center justify-end gap-6"),"data-testid":`chat_list_item_setting_more_${null==o?void 0:o.conversation_id}`,children:[C?(0,B.jsx)("div",{className:b()(H["chat-item-menu-wrapper"],{[H.keepMenu]:ea}),children:(0,B.jsx)(P,{conversation:o,bot:m,isOverallChatItem:$,trackParams:{click_from:"chat_bot_list"},overallTrackParams:{click_from:"sidebar_list_more",thread_rnk:ec>-1?ec+1:void 0},onClickShowIcon:e=>{ei(!1),eo(e),(0,u.trackEvent)("historic_thread_single_more",{conversation_id:null==o?void 0:o.conversation_id,thread_rnk:ec>-1?ec+1:void 0,thread_topic:null==o?void 0:o.name,conversation_type:(null==o?void 0:o.conversation_type)===k.PcchatExprConversationType.Bot?"ai_agent":"main_bot"})}})}):null,(0,B.jsx)(O,{inView:A,conversation:o,lastMessageIndex:p})]}),(0,B.jsx)(R.SamanthaTooltip,{className:"chat-item-overflow-tooltip",trigger:"custom",position:"right",visible:!!(j&&en&&(null===(e=et.current)||void 0===e?void 0:e.offsetWidth)&&et.current.offsetWidth<et.current.scrollWidth),content:(0,B.jsx)("span",{"data-testid":"chat_item_overflow_tooltip",children:(null==o?void 0:o.name)||(null==m?void 0:m.name)}),onClickOutSide:()=>{ei(!1)},children:(0,B.jsx)("div",{className:H["chat-item-overflow-tooltip-trigger"]})})]})},...E})},z=(0,i.forwardRef)(function(e,t){let{id:n,navTo:a,switchChat:o,avatarSrc:l,intentionType:s,renderContent:c,alt:d,className:u,conversationType:v,onClick:m,suspenseAvatar:g,isOverallChatItem:h,...f}=e,_=(0,i.useRef)(void 0===g);_.current=_.current||!1===g;let k=(0,r.isCocoConversationType)(v),w=(0,r.isCocoSubConversationType)(v),T=h||!(0,r.isCocoSubConversationType)(v)&&!k,[S,F]=(0,i.useState)(),R=(0,W.useGetThreadAvatarByIntentionType)(),L=(0,x.useFGValue)(y.FGLocalDebugKeys.forceDarkMode,{source:I.FGBuiltinNames.debugStorage,defaultValue:!1})?"dark":"light",M=(0,i.useRef)(!1),D=(0,N.getIsMobileOrIPad)()&&(0,N.isAppleWebkit)();return(0,B.jsx)($.NavLink,{id:n,to:a,className:e=>{let{isActive:t}=e;return b()(C.SidebarStyle["section-item"],H["chat-item"],{[H["active-link"]]:t,[C.SidebarStyle.active]:t,"e2e-test-active":t,"!pl-8":(0,r.isBotConversationType)(v),"!h-38":h,"!h-32":!h&&(k||(0,r.isCocoSubConversationType)(v)),...E},"no-select",u,"")},onClick:e=>(null==m||m(),o(),e.preventDefault()),onTouchStart:D?()=>{M.current=!1}:void 0,onTouchMove:D?()=>{M.current=!0}:void 0,onTouchEnd:D?()=>{M.current||o()}:void 0,draggable:"false",ref:t,...f,children:e=>{let{isActive:t}=e;return(0,B.jsxs)(B.Fragment,{children:[T&&(_.current?(0,B.jsx)(j.default,{"data-testid":"chat_list_item_avatar",className:b()(H.avatar),src:(0,p.filterUrlModule)(k&&(0,W.getThreadMobileAvatar)(L)||w&&R(s,L)||S||l||A,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb*t5-%doa1F6RnpX$mhzZ*1SW$$-WmpNMHBx$ERKT2RtSllRblpp-lZaM$pFaE5kb*t5-%doa1F6RnpZ$mhPT%$4W$RtO$pXRXBz$2tNNWFtRkhSakJN$jNod1l6TlJkR0ZZ$W14a$$6bHFZakl4ZDJJe%5Xe*libEo2$ERKS2FHTXlWWFZr%0%0MFdWaEtib$JZ$FQwPQ"}),alt:d||"",onError:e=>{F(A)}}):(0,B.jsx)("div",{className:"w-20 h-20 mr-8"})),c({isActive:t})]})}})});var J=n(746904);let K=(e,t)=>{if(!t)return;let n=e.findIndex(e=>e.conversationId===t.conversation_id);return n>-1?n+1:void 0},X=(e,t,n)=>{if((0,r.isCocoConversation)(e))return 0;if((0,r.isCocoSubConversation)(e))return K((0,l.getThreadLinksFromConversationLinks)(s.useFeedStore.getState()),e);let i=(0,l.getBotConversationListFromConversationLinks)(s.useFeedStore.getState()),a=K(i,e);return a||((null==t?void 0:t.bot_id)&&(null==n?void 0:n.length)&&(a=n.findIndex(e=>e.botID===t.bot_id))>-1?i.length+a+1:void 0)},q=e=>{let{hasMenu:t,conversationLink:n,bot:i,hasBotShow:g,onClick:h,enableOverflowTooltip:p,...f}=e,_=(0,m.useNavigate)(),b=(0,s.useFeedStore)(e=>e.lastMessageIndexMap[(null==n?void 0:n.conversationId)||""],a.shallow),k=(0,c.useConversation)((null==n?void 0:n.conversationId)||""),w=k?`/chat/${k.conversation_id}`:`/chat/${null==i?void 0:i.bot_id}?type=${o.ChatType.Bot}`;return i||k?(0,B.jsx)(V,{hasMenu:t,hasBotShow:g,conversationType:null==k?void 0:k.conversation_type,navTo:w,switchChat:()=>{if(k||i){if(k&&(0,r.isCocoSubConversation)(k)){let{name:e,conversation_id:t,conversation_type:n}=k,i=(0,d.getChatTypeForTea)((0,v.getUserId)(),null==k?void 0:k.conversation_id),a=(0,l.getThreadLinksFromConversationLinks)(s.useFeedStore.getState()).findIndex(e=>e.conversationId===(null==k?void 0:k.conversation_id));(0,u.trackEvent)("historic_thread_single_click",{thread_rnk:a>-1?a+1:void 0,thread_topic:e,conversation_id:t,conversation_type:n,chat_type:i,click_from:"chat"})}(0,u.trackEvent)("sidebar_button_click",{button_name:(0,r.isBotConversation)(k)?"ugc_bot":"history_chat"}),_(w,{state:{enter_from:"click_chat",bot_position:X(k,i)}}),(0,J.toggleMobileSidebarExpand)()}},conversation:k,lastMessageIndex:b,bot:i,onClick:h,enableOverflowTooltip:p,...f}):null},G=(0,i.memo)(function(e){let{hasMenu:t,conversationLink:n,bot:i,hasBotShow:a,onClick:o,enableOverflowTooltip:r,...l}=e;return(null==n?void 0:n.isLocalConversation)?null:(0,B.jsx)(q,{hasMenu:t,hasBotShow:a,conversationLink:n,bot:i,onClick:o,enableOverflowTooltip:r,...l})})},316934:function(e,t,n){n.d(t,{useReportThreadFeedUILoad:function(){return l}});var i=n(713738),a=n(230932),o=n(910321),r=n(856392);let l=(e,t)=>{let n=(0,i.useId)(),[l]=(0,i.useState)(()=>`${n}_${Math.round((0,o.safelyGetNow)())}`);(0,i.useEffect)(()=>{let i;if(!t)return;let s=0,c=setInterval(()=>{i=null!=i?i:(0,r.createReportEvent)({eventName:"thread_feed_load",meta:{enter_key:l,create_key:`${n}_${Math.round((0,o.safelyGetNow)())}`}});let t=!!document.querySelector(e);(t||s>=30)&&(c&&clearInterval(c),t?i.success():i.error({reason:"queryTimeout",meta:{count:s,thread_list_status:JSON.stringify({...a.useFeedStore.getState().overallListStatus,nextIndex:a.useFeedStore.getState().overallListStatus.nextIndex?"1":"0"}),thread_list_length:a.useFeedStore.getState().conversationLinks.length}})),s++},1e3);return()=>{clearInterval(c),null==i||i.error({reason:"quit"})}},[t])}},360882:function(e,t,n){n.d(t,{useSidebarOpenTemporarily:function(){return c}});var i=n(713738),a=n(351415),o=n(698392),r=n(863733),l=n(580622),s=n(620411);let c=e=>{var t,n;let{sidebarRef:c,disabled:d,getIsExpand:u,getIsOpenTemporarily:v,onSetIsOpenTemporarily:m}=e,g=(0,r.default)(c),h=(0,l.default)(null!==(t=null==g?void 0:g.width)&&void 0!==t?t:266),p=(0,l.default)(null!==(n=null==g?void 0:g.height)&&void 0!==n?n:450),f=(0,l.default)(d),_=()=>{(null==v?void 0:v())||f.current||null==m||m(!0)},b=()=>{(null==v?void 0:v())&&(null==m||m(!1))};(0,i.useEffect)(()=>{let e=(0,a.default)(e=>{var t;if((null==u?void 0:u())||(null===(t=(0,o.getChatSlice)("chatViewCanvasStore"))||void 0===t?void 0:t.isExpand)||d)return;let{innerWidth:n}=window,i=(null==v?void 0:v())?h.current+14:Math.min((n-Math.min(n,s.CENTER_CONTENT_MAX_WIDTH))/2+24-40,60),a=p.current+54+40,{clientX:r,clientY:l}=e;l<=54?r<=48?_():b():l>54&&l<=a&&r<=i&&i>=36?_():b()},200);return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}},[])}}}]);
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["60521"],{856392:function(e,t,r){r.d(t,{createReportEvent:function(){return i}});var a=r(705033),n=r(178230);let o=e=>{let t,{eventName:r,logger:o=n.logger,meta:i,once:s=!1}=e,l=[],c=0,u=!1,d=()=>{c=Date.now(),o.persist.info({eventName:`${r}_start`,meta:{...p()}})},p=()=>({...i,...u?{event_has_finished:!0}:{}}),h=()=>{if(0!==l.length)return l.reduce((e,t,r)=>{let{pointName:n}=t;return e[n]=t.time-c,(0,a.default)(e,["interval",n],0===r?e[n]:t.time-l[r-1].time),e},{})},f=function(){let{meta:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(!s||!u)&&(o.persist.success({eventName:r,meta:{...p(),success:1,duration:h(),...e}}),u=!0)},g=e=>{let{reason:t,error:a,meta:n}=e;(!s||!u)&&(o.persist.error({eventName:r,error:a||Error(t),meta:{...p(),success:0,reason:t,duration:h(),...n}}),u=!0)};return d(),{name:"ReportEvent",start:d,cancel:()=>{clearTimeout(t),u=!0},success:f,successIfIdle:(e,r,a)=>{clearTimeout(t),t=setTimeout(()=>u?void 0:(f(r),null==a?void 0:a()),e)},error:g,errorIfIdle:(e,r,a)=>{clearTimeout(t),t=setTimeout(()=>u?void 0:(g(r),null==a?void 0:a()),e)},addDurationPoint:function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=arguments.length>2?arguments[2]:void 0,a=l.find(t=>t.pointName===e);a?(t&&(a.time=Date.now()),r&&(a.time=r)):l.push({pointName:e,time:r||Date.now()}),l.sort((e,t)=>e.time-t.time)},getDuration:h,getDurationTimestamp:()=>{if(0!==l.length)return l.reduce((e,t)=>{let{pointName:r}=t;return e[r]=t.time,e},{})},reportDurationPoint:function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=l.find(t=>t.pointName===e);(!t||null==a||!a.reported)&&(o.persist.info({eventName:`${r}_duration_${e}`,meta:{...p()}}),a&&(a.reported=!0))},getMeta:p,updateMeta:e=>{i={...i,...e}},getFinishStatus:()=>u,setStartTime:e=>{c=e}}},i=e=>{let{logger:t=n.logger,...r}=e;return o({logger:t,...r})}},137343:function(e,t,r){r.d(t,{default:function(){return o}}),r(713738);var a=r(430261),n=r(345660),o=(0,a.IconFactory)((0,n.jsx)(e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"currentColor",d:"M16.293 2.293a1 1 0 0 1 0 1.414L8 12l8.293 8.293a1 1 0 0 1-1.414 1.414l-8.293-8.293a2 2 0 0 1 0-2.828l8.293-8.293a1 1 0 0 1 1.414 0"})}),{}))},167838:function(e,t,r){r.d(t,{default:function(){return o}}),r(713738);var a=r(430261),n=r(345660),o=(0,a.IconFactory)((0,n.jsx)(e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"currentColor",d:"M7.707 21.707a1 1 0 0 1 0-1.414L16 12 7.707 3.707a1 1 0 0 1 1.414-1.414l8.293 8.293a2 2 0 0 1 0 2.828l-8.293 8.293a1 1 0 0 1-1.414 0"})}),{}))},474932:function(e,t,r){r.d(t,{default:function(){return o}}),r(713738);var a=r(430261),n=r(345660),o=(0,a.IconFactory)((0,n.jsx)(e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"currentColor",d:"M20.307 20.307a.997.997 0 0 0 .003-1.412l-6.845-6.844 6.845-6.845a.997.997 0 0 0-.003-1.412.997.997 0 0 0-1.412-.002l-6.844 6.844-6.845-6.845a.997.997 0 0 0-1.412.003.997.997 0 0 0-.002 1.412l6.844 6.844-6.845 6.845a.997.997 0 0 0 .003 1.412.997.997 0 0 0 1.412.003l6.844-6.845 6.845 6.845a.997.997 0 0 0 1.412-.003"})}),{}))},749848:function(e,t,r){r.d(t,{default:function(){return o}}),r(713738);var a=r(430261),n=r(345660),o=(0,a.IconFactory)((0,n.jsx)(e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11M10.756 7.299a1.245 1.245 0 1 1 2.488 0l-.227 5.227a1.018 1.018 0 0 1-2.034 0zM12 16.9a1.2 1.2 0 1 0 0-2.4 1.2 1.2 0 0 0 0 2.4",clipRule:"evenodd"})}),{}))},610015:function(e,t,r){r.d(t,{default:function(){return o}}),r(713738);var a=r(430261),n=r(345660),o=(0,a.IconFactory)((0,n.jsx)(e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11M12 6.5a1 1 0 1 1 0 2 1 1 0 0 1 0-2m-1 9v-4a1 1 0 1 1 0-2h1.004c.55 0 .998.446.999.996q.001 1.503-.001 3.004l-.002 2h.5a1 1 0 1 1 0 2h-3a1 1 0 1 1 0-2z",clipRule:"evenodd"})}),{}))},153228:function(e,t,r){r.d(t,{default:function(){return o}}),r(713738);var a=r(430261),n=r(345660),o=(0,a.IconFactory)((0,n.jsx)(e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"currentColor",d:"M1 12c0 6.075 4.925 11 11 11s11-4.925 11-11S18.075 1 12 1 1 5.925 1 12m14.795-2.674a.994.994 0 0 1 1.404.01.994.994 0 0 1 .01 1.404q-2.833 2.827-5.66 5.659a1 1 0 0 1-1.418 0q-1.477-1.479-2.956-2.956a.993.993 0 0 1 .01-1.403.99.99 0 0 1 1.403-.012l2.252 2.252z"})}),{}))},253515:function(e,t,r){r.d(t,{default:function(){return o}}),r(713738);var a=r(430261),n=r(345660),o=(0,a.IconFactory)((0,n.jsx)(e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"m1.147 17.969 8.5-14.793c1.032-1.835 3.674-1.835 4.706 0l8.5 14.793c1.013 1.8-.288 4.023-2.353 4.023h-17c-2.065 0-3.366-2.223-2.353-4.023m9.61-9.178a1.245 1.245 0 1 1 2.487 0l-.227 5.227a1.018 1.018 0 0 1-2.034 0zM12 18.392a1.2 1.2 0 1 0 0-2.4 1.2 1.2 0 0 0 0 2.4",clipRule:"evenodd"})}),{}))},430261:function(e,t,r){r.d(t,{IconFactory:function(){return s}});var a=r(713738),n=r(602530),o=r(123544),i=r(345660);let s=e=>(0,a.forwardRef)(function(t,r){let{className:a,autoFitRTL:s,...l}=t;return(0,i.jsx)(o.default,{svg:e,...l,className:a,ref:r,style:s&&(0,n.isRTL)()?{transform:"scaleX(-1)"}:{}})})},101297:function(e,t,r){r.d(t,{DeprecatedFlowButton:function(){return p}});var a=r(713738),n=r(218679),o=r(344417),i=r(812650),s=r.n(i),l=r(345660);let c=e=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:17,height:17,fill:"none",viewBox:"0 0 17 17",...e,children:[(0,l.jsx)("g",{clipPath:"url(#white-loading_svg__a)",children:(0,l.jsx)("path",{stroke:"url(#white-loading_svg__b)",strokeLinecap:"round",strokeWidth:1.778,d:"M15.61 8.5A7.111 7.111 0 0 0 2.097 5.405"})}),(0,l.jsxs)("defs",{children:[(0,l.jsxs)("linearGradient",{id:"white-loading_svg__b",x1:2.096,x2:15.611,y1:8.5,y2:8.5,gradientUnits:"userSpaceOnUse",children:[(0,l.jsx)("stop",{stopColor:"#fff",stopOpacity:0}),(0,l.jsx)("stop",{offset:.399,stopColor:"#fff",stopOpacity:.5}),(0,l.jsx)("stop",{offset:1,stopColor:"#fff"})]}),(0,l.jsx)("clipPath",{id:"white-loading_svg__a",children:(0,l.jsx)("path",{fill:"#fff",d:"M.5.5h16v16H.5z"})})]})]}),u=e=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:17,height:17,fill:"none",viewBox:"0 0 17 17",...e,children:[(0,l.jsx)("g",{clipPath:"url(#black-loading_svg__a)",children:(0,l.jsx)("path",{stroke:"url(#black-loading_svg__b)",strokeLinecap:"round",strokeWidth:1.778,d:"M15.61 8.5A7.111 7.111 0 0 0 2.097 5.405"})}),(0,l.jsxs)("defs",{children:[(0,l.jsxs)("linearGradient",{id:"black-loading_svg__b",x1:2.096,x2:15.611,y1:8.5,y2:8.5,gradientUnits:"userSpaceOnUse",children:[(0,l.jsx)("stop",{stopOpacity:0}),(0,l.jsx)("stop",{offset:.399,stopOpacity:.5}),(0,l.jsx)("stop",{offset:1})]}),(0,l.jsx)("clipPath",{id:"black-loading_svg__a",children:(0,l.jsx)("path",{fill:"#000",d:"M.5.5h16v16H.5z"})})]})]});var d={button:"button-CUZGhK",clickable:"clickable-oWEGE7","type-primary":"type-primary-tb0Zul",typePrimary:"type-primary-tb0Zul","type-dashed":"type-dashed-CY5WDF",typeDashed:"type-dashed-CY5WDF","type-danger":"type-danger-HrYUaj",typeDanger:"type-danger-HrYUaj",disabled:"disabled-i5XuYJ","width-fit":"width-fit-ho_MAO",widthFit:"width-fit-ho_MAO","width-full":"width-full-ut94d8",widthFull:"width-full-ut94d8",loading:"loading-edyV_o",rotate:"rotate-AoCVlA",rotation:"rotation-rs4SZE"};let p=e=>{let{disabled:t=!1,loading:r=!1,width:i="full",type:p="primary",onClick:h,onDisableClick:f,onLoadingClick:g,icon:m,className:_,style:v,children:y,...w}=e,[b,k]=(0,a.useState)(!1),[S,E]=(0,a.useState)(!1),x=b||r,P=S||t,T={setDisabled:E,setLoading:k},N=async()=>{if(x){null==g||g(T);return}if(P){null==f||f(T);return}let e=null==h?void 0:h(T);if(e){k(!0);try{await e}finally{k(!1)}}};return(0,l.jsxs)("div",{className:s()(d.button,_,d[`type-${p}`],(0,n.default)(i)?d[`width-${i}`]:void 0,{[d.disabled]:P,[d.clickable]:!!h&&(!!g||!r)&&!t}),style:{...v,width:(0,o.default)(i)?i:void 0},onClick:N,"data-disabled":t,...w,children:[x?"dashed"===p?(0,l.jsx)(u,{className:s()(d.loading,d.rotate)}):(0,l.jsx)(c,{className:s()(d.loading,d.rotate)}):m,y]})}},242251:function(e,t,r){r.d(t,{InputI18n:function(){return d},FormInputI18n:function(){return h}});var a=r(713738),n=r(812650),o=r.n(n),i=r(445244),s=r(398025),l=r(844553),c=r(62777),u=r(345660);let d=(0,a.forwardRef)(function(e,t){var r;let{onlyAlighRightWhenRTL:n=!1,...l}=e,{defaultValue:d,value:p,onChange:h,className:f}=l,g=(0,c.useRTL)(),[m,_]=(0,a.useState)(""),v=(0,i.useGetLanguageDirectionOfText)(String(null!==(r=null!=p?p:m)&&void 0!==r?r:d),!0);return(0,u.jsx)(s.default,{ref:t,dir:g&&!n?v:"ltr",...l,className:o()(f,{"align-right-_nGfLP":n&&g}),onChange:(e,t)=>{_(e),null==h||h(e,t)}})}),p=(0,l.default)(d,{maintainCursor:!0}),h=e=>(0,u.jsx)(p,{...e})},559425:function(e,t,r){r.d(t,{SamanthaButton:function(){return c}});var a=r(713738),n=r(812650),o=r.n(n),i=r(424785),s={"samantha-button":"samantha-button-Gqjh9l",samanthaButton:"samantha-button-Gqjh9l",primary:"primary-d32WlZ",secondary:"secondary-ra2OFJ",tertiary:"tertiary-a_ZJsN",quartary:"quartary-Q8wual","danger-primary":"danger-primary-XKkX_5",dangerPrimary:"danger-primary-XKkX_5","danger-secondary":"danger-secondary-iF2djV",dangerSecondary:"danger-secondary-iF2djV","danger-tertiary":"danger-tertiary-CSFOpp",dangerTertiary:"danger-tertiary-CSFOpp","ai-primary":"ai-primary-G3mWE1",aiPrimary:"ai-primary-G3mWE1","rotate-anim":"rotate-anim-7BPij4",rotateAnim:"rotate-anim-7BPij4",large:"large-xWa_nG","icon-only":"icon-only-bBTFy7",iconOnly:"icon-only-bBTFy7",icon:"icon-kJ70hQ",medium:"medium-MN8t8q",small:"small-vbX31F","ai-secondary":"ai-secondary-kuy78f",aiSecondary:"ai-secondary-kuy78f","image-primary":"image-primary-a_cXiS",imagePrimary:"image-primary-a_cXiS","image-secondary":"image-secondary-lGH5WJ",imageSecondary:"image-secondary-lGH5WJ","image-primary-dark":"image-primary-dark-jXpQD8",imagePrimaryDark:"image-primary-dark-jXpQD8","image-secondary-dark":"image-secondary-dark-D6_S6V",imageSecondaryDark:"image-secondary-dark-D6_S6V",logo:"logo-PwSOWQ","icon-right":"icon-right-KdmYwS",iconRight:"icon-right-KdmYwS"},l=r(345660);let c=a.forwardRef(function(e,t){let{type:r="primary",size:a="medium",logo:n=!1,...c}=e,{icon:u,iconPosition:d}=c,p=u||e.loading,h=u&&n;return(0,l.jsx)(i.default,{ref:t,...c,theme:"solid",type:"primary",size:"default",className:o()(s["samantha-button"],s[r],s[a],{[s.icon]:p,[s["icon-right"]]:p&&"right"===d,[s["icon-only"]]:p&&!e.children,[s.logo]:h},c.className),children:e.children})})},47563:function(e,t,r){r.d(t,{Toast:function(){return p},SamanthaToastFactory:function(){return h},SamanthaToast:function(){return p}});var a=r(610015),n=r(253515),o=r(749848),i=r(153228);r(713738);var s=r(812650),l=r.n(s),c=r(233486),u=r(345660);function d(e){return[{method:"info",icon:(0,u.jsx)(a.default,{className:"text-18"})},{method:"success",icon:(0,u.jsx)(i.default,{className:"text-18"})},{method:"warning",icon:(0,u.jsx)(n.default,{className:"text-18"})},{method:"error",icon:(0,u.jsx)(o.default,{className:"text-18"})}].forEach(t=>{let{method:r,icon:a}=t,n=e[r];e[r]=t=>{let r=t;return"string"==typeof t&&(r={content:t}),n.call(e,Object.assign({showClose:!1,icon:a},r,{className:l()("samantha-toast",r.className||"")},{theme:"light"}))}}),e}let p=d(c.ToastFactory.create({zIndex:5e3})),h={create:e=>d(c.ToastFactory.create(e))}},62777:function(e,t,r){r.d(t,{RTLProvider:function(){return o},useRTL:function(){return n}});let a=(0,r(713738).createContext)(null),n=()=>!1,o=a.Provider},952041:function(e,t,r){r.d(t,{assert:function(){return o}});var a=r(427184);class n extends Error{constructor(...e){var t,r,a;super(...e),r="assert_error",(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t="name","string"))?a:a+"")in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r}}let o=(e,t)=>{if(!e){if((0,a.default)(t))throw t;throw new n(t)}}},296493:function(e,t,r){r.d(t,{autoExpandFunction:function(){return f},convertBytes:function(){return m},findAndGet:function(){return w},getByIndex:function(){return k},isStringArray:function(){return p},loadScript:function(){return h},notUndefined:function(){return g},toArray:function(){return b},toValidBoolean:function(){return y},toValidNumber:function(){return _},toValidString:function(){return v}});var a=r(605173),n=r(218679),o=r(344417),i=r(385093),s=r(217957),l=r(467851),c=r(578789),u=r.n(c),d=r(172320);let p=e=>(0,a.default)(e)&&e.every(n.default),h=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{timeout:r}=t,a=new Promise((t,r)=>{u()(e,e=>{e?r(e):t()})});(0,o.default)(r)?await Promise.race([a,(0,d.timeoutPromise)(r)]):await a},f=e=>(0,i.default)(e)?e():e,g=e=>!(0,s.default)(e),m=e=>{if(e<0)return"0B";let t=Math.floor(e);return t<1024?`${t}B`:t<1048576?`${Math.round(t/1024)}KB`:t<0x40000000?`${Math.round(t/1048576)}MB`:`${Math.round(t/0x40000000)}GB`},_=e=>{let t=Number(e);if(!isNaN(t))return t},v=e=>{if((0,n.default)(e))return e},y=e=>{if((0,l.default)(e))return e},w=(e,t)=>{for(let r of e){let e=t(r);if(!1!==e)return[r,e]}},b=e=>(0,s.default)(e)?[]:(0,a.default)(e)?e:[e],k=(e,t)=>null==e?void 0:e[t]},771677:function(e,t,r){r.d(t,{getEntry:function(){return o},setEntry:function(){return n}});let a="";function n(e){a=e}function o(){return a}},828617:function(e,t,r){r.d(t,{useLatestFunction:function(){return o}});var a=r(713738),n=r(580622);function o(e){let t=(0,n.default)(e),r=(0,a.useCallback)(function(){for(var e,r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];return null===(e=t.current)||void 0===e?void 0:e.call(t,...a)},[]);return e&&r}},445244:function(e,t,r){r.d(t,{useGetLanguageDirectionOfText:function(){return u},getLanguageDirection:function(){return s}});var a=r(713738),n=r(602530);let o=["ae","aeb","ajt","apc","apd","ar","ara","arb","arc","arq","ars","ary","arz","ave","avl","bal","bcc","bej","bft","bgn","bqi","brh","cja","ckb","cld","dcc","dgl","div","drw","dv","fa","fas","fia","fub","gbz","gjk","gju","glk","grc","gwc","gwt","haz","he","heb","hnd","hno","iw","ji","kas","kby","khw","ks","kvx","kxp","kzh","lad","lah","lki","lrc","luz","mde","mfa","mki","mvy","myz","mzn","nqo","oru","ota","otk","oui","pal","pbu","per","pes","phl","phn","pnb","pra","prd","prs","ps","pus","rhg","rmt","scl","sd","sdh","shu","skr","smp","snd","sog","swb","syr","tnf","trw","ug","uig","ur","urd","wni","xco","xld","xmn","xmr","xna","xpr","xsa","ydd","yi","yid","zdj"];var i=r(643404);let s=e=>(0,n.isRTL)(e)?"rtl":"ltr",l=e=>RegExp(`^[^A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u{2B8}\u{300}-\u{590}\u{800}-\u{1FFF}\u{2C00}-\u{FB1C}\u{FDFE}-\u{FE6F}\u{FEFD}-\u{FFFF}]*[\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC]`).test(e),c=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{let a=e.trim();if(!a)return t;let{franc:n}=await (0,i.retryLoad)(()=>r.e("35510").then(r.bind(r,226291))),s=n(a,{minLength:20});if("und"===s)return l(a.charAt(0));return o.includes(s)}catch(e){return t}},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[r,n]=(0,a.useState)("ltr"),o=async()=>{n(await c(e,t)?"rtl":"ltr")};return(0,a.useEffect)(()=>{o()},[e,t]),r}},602530:function(e,t,r){r.d(t,{getUnreactiveLanguage:function(){return o},isRTL:function(){return i}});var a=r(422992),n=r(88335);let o=()=>"undefined"==typeof navigator?"":navigator.language,i=e=>{var t,r,i;return!!(void 0!==n&&[null==n?void 0:null===(t=n.env)||void 0===t?void 0:t.DEPLOY_CDN_REGION,null==n?void 0:null===(r=n.env)||void 0===r?void 0:r.REGION].every(e=>"cn"!==e))&&null!==(i=(0,a.isRtlLang)(null!=e?e:o()))&&void 0!==i&&i}},712980:function(e,t,r){r.d(t,{addQuery:function(){return l},changeUrlParams:function(){return p},getQueryObjBySearch:function(){return m},getUrlParams:function(){return u},getUrlQuery:function(){return _},getValidUrl:function(){return f},isMobileNativeLink:function(){return g},isValidUrl:function(){return d},parseHashOrQuery:function(){return s},removeQueryBykey:function(){return v},safeParseUrl:function(){return c},toURL:function(){return i}});var a=r(810364),n=r(678669),o=r(486677);let i=(e,t)=>{try{let r=new URL(e);return Object.entries(t).forEach(e=>{let[t,a]=e;r.searchParams.append(t,String(a))}),r.toString()}catch(n){let r=a.default.stringify(t);return`${e}${r?`?${r}`:""}`}},s=e=>{let t=e.startsWith("#")||e.startsWith("?")?e.slice(1):e,r={},a=/([^&=]+)=([^&]*)/g,n=null;for(;n=a.exec(t);){let[,e,t]=n;try{r[decodeURIComponent(e)]=decodeURIComponent(t)}catch(e){continue}}return r},l=(e,t)=>{let r={...s(e.split("#")[0].split("?")[1]||""),...s(e.split("#")[1]||"")};return i(e.split("#")[0].split("?")[0],{...r,...t}).replace(/\?$/,"")},c=e=>{try{return new URL(e)}catch(e){return null}},u=e=>"undefined"==typeof window?null:new URLSearchParams(new URL(window.location.href).search).get(e),d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var r;let a=new URL(e);return(!t.allowedProtocols||t.allowedProtocols.includes(a.protocol))&&(!t.allowedExtensions||t.allowedExtensions.map(e=>e.toLowerCase()).includes(null!==(r=a.pathname.split(".").pop())&&void 0!==r?r:""))&&(!t.allowedHosts||t.allowedHosts.includes(a.host))}catch(e){return!1}},p=e=>{let{operationType:t="set",originalUrl:r,paramsList:a,hashParamsList:n}=e;try{let e=new URL(r);null==a||a.forEach(r=>{let{name:a,value:n}=r;if(a){if("set"===t&&n){e.searchParams.set(a,n);return}"delete"===t&&e.searchParams.delete(a)}});let o=h(e.hash);if(null==n||n.forEach(e=>{let{name:r,value:a}=e;if(r){if("set"===t&&a){o[r]=encodeURIComponent(a);return}"delete"===t&&r in o&&delete o[r]}}),Object.keys(o).length>0){let t=Object.entries(o).map(e=>{let[t,r]=e;return`${t}=${r}`}).join("&");e.hash=`#${t}`}else e.hash="";return e.toString()}catch(e){return r}},h=e=>{let t={};return(null==e?void 0:e.startsWith("#"))&&e.slice(1).split("&").forEach(e=>{let[r,a]=e.split("=");t[r]=a}),t},f=e=>{try{return e?new URL(e).toString():""}catch(e){return""}},g=e=>{if(e.startsWith("sslocal://flow"))return!0;let t=c(e);return!!t&&!!("coco:"===t.protocol&&"applet"===t.host&&t.searchParams.get("appletId"))},m=e=>(e.split("?")[1]||"").split("&").reduce((e,t)=>{let[r,a]=t.split("=");return Reflect.set(e,r,a),e},{});function _(e,t){var r;let a=new URL(e),n=null!==(r=m(a.search))&&void 0!==r?r:{};return{url:a,query:n,keysValue:t.reduce((e,t)=>{var r;return e[t]=null!==(r=a.searchParams.get(t))&&void 0!==r?r:"",e},{})}}function v(e){if("undefined"==typeof window)return;let t=m(location.search);if(!t[e])return;let r=new URL(window.location.href),a=(0,n.default)(t,[e]),i=(0,o.default)(a).map(e=>{let[t,r]=e;return`${t}=${r}`}).join("&");r.search=`?${i}`,window.history.replaceState({},document.title,r.toString())}},547709:function(e,t,r){r.d(t,{destoryWorkspaceLoadingToast:function(){return l},showWorkspaceLoadingToast:function(){return c}});var a=r(915299),n=r(48766),o=r(47563),i=r(345660);let s="",l=()=>{s&&o.SamanthaToast.close(s)},c=()=>{s=o.SamanthaToast.info({icon:(0,i.jsx)(n.default,{spinning:!0,size:"middle"}),content:(0,a.getUnreactiveTranslate)("enterprise_status_loading"),duration:0})}},272124:function(e,t,r){var a;r.d(t,{LoginClickType:function(){return n},passportSDKConfig:function(){return o}});let n=((a={}).sendMobileCode="send_mobile_code",a.resendMobileCode="resend_mobile_code",a.googleBtn="google_btn",a.appleBtn="apple_btn",a.facebookBtn="facebook_btn",a.lineBtn="line_btn",a.awemeBtn="aweme_btn",a.qrcodeScanned="qrcode_scanned",a),o={isOversea:!1,appKey:"2094abfcccefaeaffd24c622475fba10",isBoe:!1,region:"cn"}},148409:function(e,t,r){r.r(t),r.d(t,{FlowAccount:function(){return eK}});var a,n,o=r(557298),i=r(4137),s=r(459735),l=r(915299),c=r(910214),u=r(769783),d=r(712980),p=r(47563),h=r(178230),f=r(856392),g=r(876500);let m=()=>({[g.PassportErrorCodes.ALREADY_BIND_CONFLICT]:{content:void 0},[g.PassportErrorCodes.TARGET_BIND_CONFLICT]:{content:void 0},[g.PassportErrorCodes.PHONE_ALREADY_REGISTERED]:{content:(0,l.getUnreactiveTranslate)("phone_number_binding_conflict"),type:"warning"},[g.PassportErrorCodes.PHONE_BIND_CONFLICT]:{content:(0,l.getUnreactiveTranslate)("phone_number_binding_conflict"),type:"warning"},[g.PassportErrorCodes.LAST_PASSPORT]:{content:(0,l.getUnreactiveTranslate)("unbind_failure_only"),type:"warning"},[g.PassportErrorCodes.DOUBAO_NON_CN_MOBILE_REGISTRY_BAN]:{content:(0,l.getUnreactiveTranslate)("web_phoneNumber_msg_registerUnsupported_cn"),type:"warning"},[g.PassportErrorCodes.DOUBAO_APPLE_REGISTRY_BAN]:{content:(0,l.getUnreactiveTranslate)("pc_login_toast_phoneNo_cn"),type:"warning"}});var _=r(154922);function v(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class y{emit(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return this.events.emit(e,...r)}constructor(){v(this,"events",new _.default),v(this,"on",(e,t)=>{this.events.on(e,t)}),v(this,"off",(e,t)=>{this.events.off(e,t)})}}var w=r(886941),b=r(222493),k=r(474932),S=r(137343),E=r(713738),x=r(812650),P=r.n(x),T=r(559425);let N=((a={})[a.phone=0]="phone",a[a.code=1]="code",a),C=((n={})[n.SwitchCheck=53]="SwitchCheck",n[n.CheckCAccount=26]="CheckCAccount",n);var A=r(177978),j=r(125417),O=r(345660);let R=e=>{var t,r;let{useUserPhone:a,phone:n,type:o,onFinish:i,mobileInputProps:s,codeInputProps:c,onClose:u,onSendCode:d}=e,[p,h]=(0,E.useState)(!1),[f,g]=(0,E.useState)(null!=n?n:""),[m,_]=(0,E.useState)(a?N.code:N.phone),v=async e=>{let t=null!=e?e:f;if(t)return h(!0),d(t,{type:o}).finally(()=>{h(!1)})},y=async e=>{await v(e),g(e),_(N.code)},w=async e=>await (null==i?void 0:i({code:e,phone:f})),b=()=>{a||m===N.phone?null==u||u():_(N.phone)};return(0,E.useEffect)(()=>{a&&(h(!0),d("",{type:o}).then(e=>{g(e.mobile)}).finally(()=>{h(!1)}))},[a]),(0,O.jsx)("div",{className:"flex flex-column",children:m===N.phone?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(T.SamanthaButton,{type:"quartary",size:"small",className:"cursor-pointer self-end",onClick:b,icon:(0,O.jsx)(k.default,{})}),(0,O.jsx)(A.MobileInput,{...s,className:P()("mt-20",null==s?void 0:s.className),onNextClick:y,defaultMobilePhone:n,loading:p,autoFocus:!0,onlyCNCode:!0})]}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(T.SamanthaButton,{type:"quartary",size:"small",className:"cursor-pointer self-start",onClick:b,icon:(0,O.jsx)(S.default,{})}),(0,O.jsx)("div",{className:"mb-8 text-s-color-text-secondary s-font-h2 text-center",children:(0,l.getUnreactiveTranslate)("enter_digit_code")}),(0,O.jsx)("div",{className:"mb-20 h-18 text-s-color-text-quaternary s-font-xs text-center",children:f?(0,l.getUnreactiveTranslate)("phone_code_sent_note",{postProcess:"sprintf",sprintf:[f]}):null}),(0,O.jsx)(j.CodeInputPanel,{...c,length:null!==(t=null==c?void 0:c.length)&&void 0!==t?t:6,retryTime:null!==(r=null==c?void 0:c.retryTime)&&void 0!==r?r:60,onResend:async()=>{await v()},onFinish:w})]})})},U=e=>{let t=async()=>{var t;await (null==e?void 0:null===(t=e.onClose)||void 0===t?void 0:t.call(e)),a.destroy()},r=async t=>{var r;await (null==e?void 0:null===(r=e.onFinish)||void 0===r?void 0:r.call(e,t)),a.destroy()},a=b.SamanthaModal.info({width:368,size:"small",icon:!1,zIndex:1020,closable:!1,centered:!0,bodyStyle:{padding:0},onCancel:t,content:(0,O.jsx)(R,{...e,onClose:t,onFinish:r}),closeOnEsc:!1,footer:null})};var W=r(793905),D=r(623209),F=r(72516),L=r(272124),$=r(547709),I=r(658373);function B(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class M extends y{getPassportSDK(){return this.createPassportSDK()}async getEncryptParams(){return this.encryptParams||await this.createPassportSDK(),this.encryptParams}async createPassportSDK(){let e=L.passportSDKConfig;if(!this._passportSDK){var t,a;let{WebInterfaceSdk:n,encryptParams:o}=await Promise.all([r.e("67885"),r.e("63303"),r.e("48500"),r.e("80325")]).then(r.bind(r,393967)),i=null!==(a=await (null===(t=this.getGeneralSDKParams)||void 0===t?void 0:t.call(this)))&&void 0!==a?a:Promise.resolve({});this._passportSDK=new n({...e,...this.passinSDKConfig,...i,generalParams:i,aid:this.aid}),this.encryptParams=o}return this._passportSDK}async passportExceptionWrapper(e){try{let t=await e;if((0,g.isAccountErrorResponse)(t))throw g.PassportApiError.from(t);return t}catch(e){if((0,g.isAccountError)(e))throw new g.PassportApiError(e.error_code,e.description,e);throw e}}async passportServiceWrapper(e,t){let{successText:r,successEventName:a,errorText:n,errorEventName:o,errorContext:s,disableDefaultErrorText:l=!1}=t;try{let t=await this.passportExceptionWrapper(e);return r&&p.SamanthaToast.success({content:r,showClose:!1}),a&&h.logger.persist.info({message:a,eventName:a,meta:s}),t}catch(r){if((0,D.isAgeGateError)(r)||(0,g.isCloseCaptchaError)(r)||(0,D.isAgeGateCancelError)(r)||(0,g.isPassportApiWorkspaceSelectError)(r)||(0,W.isWorkspaceUserSelectCancelError)(r))throw r;o&&h.logger.persist.error({eventName:o,error:r,meta:s});let e=n,t="error";if((0,g.isPassportApiError)(r)){var c,u;let a=null===(c=r.code)||void 0===c?void 0:c.toString(),n=Object.entries(m()).find(e=>{let[t]=e;return t===a});(0,i.default)(n)?e=r.description:(e=n[1].content,t=null!==(u=n[1].type)&&void 0!==u?u:"error")}if(l&&(e=void 0),e){let r={content:e,showClose:!1};"warning"===t?p.SamanthaToast.warning(r):p.SamanthaToast.error(r)}throw r}}triggerAfterLogout(){this.emit("afterLogout")}async sendCode(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{type:a}=r,n=await this.createPassportSDK();return this.passportServiceWrapper(n.login.sendCode({mobile:e,registerOnly:!1,extra_params:(0,s.default)({type:a,mix_mode:1,is6Digits:1},i.default)}),{successText:(0,l.getUnreactiveTranslate)("verification_code_sent"),successEventName:"send_code_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"send_code_error",errorContext:{type:a,country_code:null===(t=e.split(" "))||void 0===t?void 0:t[0],account:`${e.slice(0,e.length-3)}***`}})}async _smsLogin(e,t,r){let a=await this.createPassportSDK();try{return await this.passportExceptionWrapper(a.login.smsLogin({mobile:e,code:t,login_only:!1,extra_params:{need_query_sub_account:+!!this.enableWorkspaceSSO}}))}catch(r){if((0,g.isPassportApiWorkspaceSelectError)(r)){var n,o;let i=null===(n=r.raw)||void 0===n?void 0:n.sms_code_key;if(!i)throw Error("sms_code_key is undefined when sms_login_only(workspace select)");let s=null===(o=r.raw)||void 0===o?void 0:o.sub_account,l=await this.workspace.selectSubAccount(s,this.enableWorkspaceSSO,{type:"phone_verify_code"});if(!l)throw new W.WorkspaceUserSelectCancelError;let c=await this.getEncryptParams();return await this.passportExceptionWrapper(a.login.smsLogin({mobile:e,code:t,extra_params:c({sec_uid:l,sms_code_key:i,need_query_sub_account:+!!this.enableWorkspaceSSO},["sms_code_key"])}))}throw r}}async smsLogin(e,t,r){var a;return this.passportServiceWrapper(this._smsLogin(e,t,r),{successEventName:"sms_login_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"sms_login_error",errorContext:{country_code:null===(a=e.split(" "))||void 0===a?void 0:a[0]}})}async _authLogin(e,t,r){let a=await this.createPassportSDK(),n=(t,r)=>this.passportExceptionWrapper(a.login.authLogin({...e,profile_key:r,login_only:t,extra_params:{need_query_sub_account:+!!this.enableWorkspaceSSO}}));if("sso"===t)return await n(!1,e.profile_key);try{return await n(!1,e.profile_key)}catch(t){if((0,g.isPassportApiWorkspaceSelectError)(t)){var o,i;let r=null===(o=t.raw)||void 0===o?void 0:o.profile_key;if(!r)throw Error("profile_key is undefined when auth/login_only(workspace select)");let n=null===(i=t.raw)||void 0===i?void 0:i.sub_account,s=await this.workspace.selectSubAccount(n,this.enableWorkspaceSSO,{type:"aweme_v2"});if(!s)throw new W.WorkspaceUserSelectCancelError;return this.passportExceptionWrapper(a.login.authLogin({platform_app_id:e.platform_app_id,profile_key:r,extra_params:{sec_uid:s,need_query_sub_account:+!!this.enableWorkspaceSSO}}))}throw t}}authLogin(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{showError:r=!0,platform:a,ageGateDisplayScene:n}=t;return this.passportServiceWrapper(this._authLogin(e,a,n),{successEventName:"auth_login_success",errorText:r?(0,l.getUnreactiveTranslate)("log_in_internet_error"):void 0,errorEventName:"auth_login_error",errorContext:{platform:a}})}async bindWithMobileLogin(e,t){let r={...e,platform_app_id:e.platformAppId,need_mobile:e.needMobile,check_mobile:e.checkMobile,change_bind:e.changeBind,access_token:e.accessToken},a=await this.createPassportSDK();return this.passportServiceWrapper(a.request({url:"/passport/web/auth/bind_with_mobile_login/",method:"POST",data:r,params:{need_query_sub_account:+!!this.enableWorkspaceSSO}}),{successEventName:"bind_with_mobile_login_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"bind_with_mobile_login_error",disableDefaultErrorText:null==t?void 0:t.disableDefaultErrorText,errorContext:{platform:e.platform}})}async _checkLogin(){return(await this.createPassportSDK()).login.checkLogin({})}async checkLogin(){return this.passportServiceWrapper(this._checkLogin(),{successEventName:"check_login_success",errorEventName:"check_login_error",disableDefaultErrorText:!0})}async userCheck(){let e=await this.createPassportSDK();return this.passportServiceWrapper(e.request({url:"/passport/cancel/user_check/",method:"POST"}),{successEventName:"user_check_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"user_check_error"})}async validateCode(e){let t=await this.createPassportSDK();return this.passportServiceWrapper(t.password.validateMobile({code:e}),{successEventName:"validate_code_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"validate_code_failed"})}async cancelConfirm(e,t,r){let a=await this.createPassportSDK();return this.passportServiceWrapper(a.cancel.confirm((0,s.default)({value_ticket:t,token:e,cancel_ticket:r},i.default)),{successEventName:"cancel_confirm_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"cancel_confirm_error"})}async cancelCheck(e){let t=await this.createPassportSDK();return this.passportServiceWrapper(t.cancel.checkIfPass({value_ticket:e}),{successEventName:"cancel_confirm_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"cancel_confirm_error"})}async authorize(e){let{code:t,accessToken:r,accessTokenSecret:a,platform:n,platformAppId:o,redirectUri:i}=e,s=await this.createPassportSDK();return this.passportServiceWrapper(s.request({url:"/passport/web/auth/authorize/",method:"POST",data:{code:t,access_token:r,access_token_secret:a,platform:n,platform_app_id:o,redirect_uri:i}}),{successEventName:"authorize_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"authorize_error",errorContext:{platform:n}})}async logout(){var e,t;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{navigate:a,reason:n,trackMeta:i,loginRoute:s,state:c}=r,u=await this.createPassportSDK();h.logger.persist.info({eventName:"logout_start",meta:{reason:n,...i}});let p=e=>this.logoutPathPostProcess?this.logoutPathPostProcess(e):e,f=null!==(e=null!=s?s:this.logoutRoute)&&void 0!==e?e:"/",g=p((null!==(t=this.logoutBaseRoute)&&void 0!==t?t:"")+f),m=p(f);await this.passportServiceWrapper(u.login.logout({next:g,need_redirect:0}),{successEventName:"logout_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"logout_error"}),(0,F.resetUserInfos)(),(0,w.removeWorkspaceParams)(),location.search.includes("from_logout=1")||(a?a((0,d.addQuery)(m,{from_logout:"1"}),{state:c}):location.href=(0,o.filterUrlModule)((0,d.addQuery)(m,{from_logout:"1",...c}),null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$J-%lJXRXBxW$$NNWFX%ll%bkJp-lZaNlkzaz$hRmt5$*5aa1Z6$Xd%RE5PZ$ZsN%9-c*FXRW95W$ZkT2JFd3pRbWhqTTA1M1lqTktNRXd5-khW-$IxWTB%Rz$TZWxsW$NtNWtXRTA5"})),this.emit("afterLogout")}async authBind(e){let t=await this.createPassportSDK();return this.passportServiceWrapper(t.bind.bindAuth({...e,access_token:e.accessToken,access_token_secret:e.accessTokenSecret,platform_app_id:e.platformAppId,extra_params:e.extraParams}),{successEventName:"auth_bind_success",errorText:(0,l.getUnreactiveTranslate)("bind_failure"),errorEventName:"auth_bind_error",errorContext:{platformAppId:e.platformAppId}})}async authUnbind(e){let t=await this.createPassportSDK();return this.passportServiceWrapper(t.bind.unbindAuth({...e}),{successText:(0,l.getUnreactiveTranslate)("unbind_success"),successEventName:"auth_unbind_success",errorText:(0,l.getUnreactiveTranslate)("unbind_failure"),errorEventName:"auth_unbind_error",errorContext:{platform:e.platform}})}async sendCodeToOldMobile(e){var t,r;let a=await this.createPassportSDK();return this.passportServiceWrapper(a.rebind.sendCodeToOldMobile({...e,use_bind_mobile:null==e?void 0:e.useBindMobile,extra_params:{is6Digits:1}}),{successText:(0,l.getUnreactiveTranslate)("verification_code_sent"),successEventName:"send_code_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"send_code_error",errorContext:{country_code:null==e?void 0:null===(r=e.mobile)||void 0===r?void 0:null===(t=r.split(" "))||void 0===t?void 0:t[0],type:22}})}async validateOldMobile(e){let t=await this.createPassportSDK();return this.passportServiceWrapper(t.rebind.validateOldMobile({...e,use_bind_mobile:e.useBindMobile}),{successEventName:"validate_old_mobile_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"validate_old_mobile_error"})}async sendCodeToNewMobile(e){var t;let r=await this.createPassportSDK();return this.passportServiceWrapper(r.rebind.sendCodeToNewMobile({...e,old_mobile:e.oldMobile,extra_params:{is6Digits:1}}),{successText:(0,l.getUnreactiveTranslate)("verification_code_sent"),successEventName:"send_code_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"send_code_error",errorContext:{country_code:null===(t=e.mobile.split(" "))||void 0===t?void 0:t[0],type:20}})}async rebindMobile(e){var t;let r=await this.createPassportSDK();return this.passportServiceWrapper(r.rebind.rebindMobile({...e,kick_other:e.kickOther}),{successText:(0,l.getUnreactiveTranslate)("change_phone_success"),successEventName:"rebind_mobile_success",errorText:(0,l.getUnreactiveTranslate)("change_phone_failure"),errorEventName:"rebind_mobile_error",errorContext:{country_code:null===(t=e.mobile.split(" "))||void 0===t?void 0:t[0]}})}async bindSendCode(e){var t;let r=await this.createPassportSDK();return this.passportServiceWrapper(r.bind.sendCode({...e,unbind_exist:e.unbindExist,extra_params:{is6Digits:1}}),{successText:(0,l.getUnreactiveTranslate)("verification_code_sent"),successEventName:"send_code_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"send_code_error",errorContext:{country_code:null===(t=e.mobile.split(" "))||void 0===t?void 0:t[0],type:17}})}async bindMobile(e){var t;let r=await this.createPassportSDK();return this.passportServiceWrapper(r.bind.bindMobile({...e,unbind_exist:e.unbindExist}),{successEventName:"bind_mobile_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"bind_mobile_error",errorContext:{country_code:null===(t=e.mobile.split(" "))||void 0===t?void 0:t[0]}})}async authLoginAutoBindMobile(e,t){if((0,i.default)(e.code)&&(0,i.default)(e.access_token)||(0,i.default)(t))throw Error("Unexcepted error: code, access_token or platform is undefined");let r=null;try{r=await this.bindWithMobileLogin({code:e.code,accessToken:e.access_token,platformAppId:e.platform_app_id,platform:t},{disableDefaultErrorText:!0})}catch(i){var a,n;let o=(0,g.isPassportApiError)(i);if(h.logger.persist.error({eventName:"bindWithMobileLogin_catch",error:i,meta:{isPassportErr:o,raw:o?i.raw:void 0,code:o?i.code:void 0}}),o&&(null===(a=i.raw)||void 0===a?void 0:a.profile_key))r=await this.authLogin({profile_key:i.raw.profile_key,platform_app_id:e.platform_app_id},{showError:!1,platform:t,ageGateDisplayScene:D.AgeGateDisplayScene.dialog});else if(o&&(null===(n=i.code)||void 0===n?void 0:n.toString())===g.PassportErrorCodes.BIND_TOO_OFTEN.toString())throw p.SamanthaToast.error({content:i.description,showClose:!1}),i;else throw i}if((0,i.default)(r))throw Error("Unexcepted error: userInfo is null");return r}async checkMobileCode(e){let{mobile:t,code:r}=e,a=await this.createPassportSDK(),n=await this.getEncryptParams();return this.passportServiceWrapper(a.request({url:"/passport/web/mobile/check_code/",method:"POST",data:n({mobile:t,code:r,type:C.CheckCAccount},["mobile","code","type"])}),{successEventName:(0,l.getUnreactiveTranslate)("check_mobile_code_success"),errorEventName:(0,l.getUnreactiveTranslate)("check_mobile_code_error")})}async ticketLogin(e){let{biz_ticket:t}=e,r=await this.createPassportSDK();return this.passportServiceWrapper(r.request({url:"/passport/user/ticket_login/",method:"POST",data:{biz_ticket:t}}),{successText:(0,l.getUnreactiveTranslate)("enterprise_toast_sso_loginSucess"),successEventName:(0,l.getUnreactiveTranslate)("ticket_login_success"),errorText:(0,l.getUnreactiveTranslate)("enterprise_toast_sso_loginFail"),errorEventName:(0,l.getUnreactiveTranslate)("ticket_login_error")})}async authWorkspaceSSO(e){var t;let{code:r,email:a,redirectUri:n}=e,o=(0,f.createReportEvent)({logger:h.logger,eventName:"workspace_sso_auth",meta:{code:r,email:a,redirectUri:n}}),i=await c.workspaceApiService.AGWWorkspaceSSOSubmitAuthCode({auth_code:r,email:a,redirect_uri:n}),s=null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.login_ticket;if(s)return this.ticketLogin({biz_ticket:s}).then(e=>(o.success(),e));let d=async e=>{var t,r;(null==e?void 0:e.code)&&(null==e?void 0:e.phone)&&(s=(await this.checkMobileCode({mobile:e.phone,code:e.code})).ticket);let a=null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.profile_key;if(!s||!a){let e=Error("Unexcepted error(authWorkspaceSSO): ticket and profileKey is null");throw o.error({reason:"handle_login_fail",error:e,meta:{ticket:s,profileKey:a}}),e}let n=null===(r=(await c.workspaceApiService.AGWWorkspaceSSOSubmitForCreateAccount({profile_key:a,verify_ticket:s})).data)||void 0===r?void 0:r.login_ticket;if(!n){let e=Error("Unexcepted error(authWorkspaceSSO): loginTicket is null");throw o.error({reason:"handle_login_fail",error:e,meta:{loginTicket:n}}),h.logger.persist.error({eventName:"workspace_sso_auth_fail",error:e,meta:{loginTicket:n}}),e}return this.ticketLogin({biz_ticket:n}).then(e=>(o.success(),e))};return new Promise(e=>{(0,$.destoryWorkspaceLoadingToast)(),U({type:C.CheckCAccount,mobileInputProps:{title:(0,l.getUnreactiveTranslate)("enterprise_sso_bindPhone_header"),desc:(0,l.getUnreactiveTranslate)("enterprise_sso_bindPhone_desc")},onClose:()=>{o.error({reason:"workspace_auth_sso_bind_phone_close",error:Error("close")}),location.reload()},onFinish:async t=>{try{(0,$.showWorkspaceLoadingToast)();let r=await d(t);e(r)}catch(e){var r,a;throw(0,$.destoryWorkspaceLoadingToast)(),o.error({reason:"handle_login_fail_on_finish_catch",error:e instanceof Error?e:Error(String(e)),meta:{verifyData:t}}),(0,u.isApiError)(e)&&(null==e?void 0:null===(r=e.errorOption)||void 0===r?void 0:r.message)&&p.SamanthaToast.error({content:null==e?void 0:null===(a=e.errorOption)||void 0===a?void 0:a.message}),e}},onSendCode:this.sendCode.bind(this)})})}async uploadAvatar(e){let{avatar:t}=e,r=await this.createPassportSDK();return this.passportServiceWrapper(r.user.uploadAvatar({avatar:t}),{successEventName:"upload_avatar_success",errorEventName:"upload_avatar_error"})}async getQrcode(){let e=await this.createPassportSDK();return this.passportServiceWrapper(e.qrcodeLogin.getQrcode({next:"https://www.doubao.com"}),{successEventName:"get_qrcode_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"get_qrcode_error"})}async checkQrconnect(e){let t=await this.createPassportSDK();try{return await this.passportServiceWrapper(t.qrcodeLogin.checkQrconnect({next:"https://www.doubao.com",token:e,extra_params:{need_query_sub_account:+!!this.enableWorkspaceSSO}}),{successEventName:"check_qrconnect_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"check_qrconnect_error"})}catch(e){if((0,g.isPassportApiWorkspaceSelectError)(e))return{redirect_url:"",...e.raw,status:I.CheckQrconnectStatus.WaitSubAccount};throw e}}async qrcodeLoginWithSubAccount(e){let t=e.sub_account||[],r=e.token;if(!r)throw Error("tokenForWorkspace is undefined when checkQrconnect(workspace select)");if(!t)throw Error("subAccounts is undefined when checkQrconnect(workspace select)");let a=await this.workspace.selectSubAccount(t,this.enableWorkspaceSSO,{type:"mobile_scan_qr_code"});if(!a)throw new W.WorkspaceUserSelectCancelError;let n=await this.createPassportSDK();return this.passportServiceWrapper(n.qrcodeLogin.checkQrconnect({next:"https://www.doubao.com",token:r,extra_params:{sec_uid:a,need_query_sub_account:+!!this.enableWorkspaceSSO}}),{successEventName:"check_qrconnect_success",errorText:(0,l.getUnreactiveTranslate)("log_in_internet_error"),errorEventName:"check_qrconnect_error"})}async switchAccount(e){let{sec_user_id:t,onVerifyPhone:r}=e;h.logger.persist.log({eventName:"workspace_switch_account"});let a=await this.createPassportSDK(),n=await this.getEncryptParams(),o=e=>{let{code:t,sec_user_id:r}=e;return this.passportServiceWrapper(a.request({url:"/passport/account_relation/switch/",method:"POST",data:n({code:t,sec_user_id:r},["code"])}),{successEventName:(0,l.getUnreactiveTranslate)("switch_account_success"),errorText:(0,l.getUnreactiveTranslate)("enterprise_toast_switchSpace_fail"),errorEventName:(0,l.getUnreactiveTranslate)("switch_account_error")})};try{return await o({sec_user_id:t})}catch(e){if((0,g.isPassportApiSwitchAccountCheckError)(e))return h.logger.persist.error({eventName:"workspace_switch_account_check_error",error:e}),null==r||r(),new Promise(e=>{U({type:C.SwitchCheck,useUserPhone:!0,onFinish:async r=>{if(!(null==r?void 0:r.code)){let e=Error("verify phone code is undefined when switch account");throw h.logger.persist.error({eventName:"workspace_switch_account_onFinish_error",error:e,meta:{verifyData:r}}),e}e(await o({code:r.code,sec_user_id:t}))},onSendCode:this.sendCode.bind(this)})});throw e}}constructor(e){super(),B(this,"_passportSDK",void 0),B(this,"ageGate",void 0),B(this,"workspace",void 0),B(this,"logoutBaseRoute",void 0),B(this,"logoutRoute",void 0),B(this,"logoutPathPostProcess",void 0),B(this,"aid",void 0),B(this,"passinSDKConfig",void 0),B(this,"getGeneralSDKParams",void 0),B(this,"enableWorkspaceSSO",void 0),B(this,"encryptParams",(e,t)=>e);let{logoutBaseRoute:t,logoutRoute:r,logoutPathPostProcess:a,ageGate:n,aid:o,passinSDKConfig:i,enableWorkspaceSSO:s=!1,getGeneralSDKParams:l,workspace:c}=e;this.logoutBaseRoute=t,this.logoutRoute=r,this.logoutPathPostProcess=a,this.ageGate=n,this.workspace=c,this.aid=o,this.passinSDKConfig=i,this.getGeneralSDKParams=l,this.enableWorkspaceSSO=s}}var G=r(358033),z=r(193907),K=r(167838),Z=r(404012);let q=e=>{let{data:t,onClick:r}=e,a=(0,E.useMemo)(()=>{try{return JSON.parse(t.extra)}catch(e){return null}},[t]),n=t.passport_enterprise_user_type===z.PassportEnterpriseUserTypeEnum.Workspace,i=n?null==a?void 0:a.workspace_name:(0,l.getUnreactiveTranslate)("enterprise_selectSpace_menuOption_privateSpace");return(0,O.jsxs)("div",{className:`
        flex h-58 w-full min-w-300 shrink-0 cursor-pointer items-center justify-center gap-8
        rounded-s-radius-s bg-s-color-bg-content-base pr-10 pl-12 s-font-xs-strong
      `,onClick:()=>r(t.sec_uid),children:[(0,O.jsxs)("div",{className:"flex grow items-center",children:[(0,O.jsx)("img",{src:(0,o.filterUrlModule)(n?null==a?void 0:a.workspace_avatar:t.avatar,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$J-%lJXRXBxW$$NNWFX%ll%bkJp-lZaNlkzaz$hRmt5$*5aa1Z6$Xd%RE5PZ$ZsN%9Xb*hXRzkw$1RJNWRHTkhPWFZh$np$d1kzaz$NMkl6%25Kak0wSm9X$EpWZ*1Re%9-b*hNMD%z$1ZkT2JFeFl%bXhp%jFac$pFTT$jR0p0$W14bFF6$XdZek5v-%dOdFpERmpkejA5"}),className:"h-28 w-28 rounded-[50%] border border-[var(--s-color-border-tertiary)]"}),(0,O.jsx)("span",{children:(0,O.jsx)(Z.default.Text,{className:"ml-6 text-s-color-text-secondary! s-font-small-strong",ellipsis:{showTooltip:{opts:{content:i}}},style:{maxWidth:182},children:i})}),n?(0,O.jsx)("span",{className:`
            ml-4 flex h-20 shrink-0 items-center justify-center rounded-s-radius-xxs
            bg-s-color-system-info-lighten px-4 text-s-color-system-info-darken s-font-xxs-em
          `,children:(0,l.getUnreactiveTranslate)("enterprise_space_tag")}):null]}),(0,O.jsx)(K.default,{})]})},H=e=>{let{subAccounts:t,onSelect:r,onClose:a}=e;return(0,O.jsxs)("div",{children:[(0,O.jsx)(T.SamanthaButton,{type:"quartary",size:"small",className:"cursor-pointer",onClick:a,icon:(0,O.jsx)(S.default,{})}),(0,O.jsxs)("div",{className:"text-center",children:[(0,O.jsx)("h2",{className:"my-0 text-s-color-text-secondary s-font-h2",children:(0,l.getUnreactiveTranslate)("enterprise_login_selectSpace_header")}),(0,O.jsx)("span",{className:"mt-6 text-s-color-text-tertiary s-font-small",children:(0,l.getUnreactiveTranslate)("enterprise_login_selectSpace_desc")})]}),(0,O.jsx)("div",{className:P()("flex flex-col gap-8 mt-24 max-h-245 overflow-y-auto overflow-x-hidden","workspace-scroll-VA6MKy"),children:t.map(e=>(0,O.jsx)(q,{data:e,onClick:r},e.sec_uid))})]})},J=e=>new Promise(t=>{let r=b.SamanthaModal.info({width:368,size:"small",icon:!1,zIndex:1020,closable:!1,centered:!0,onCancel:()=>{t(""),r.destroy()},content:(0,O.jsx)(H,{subAccounts:e,onSelect:e=>{t(e),r.destroy()},onClose:()=>{t(""),r.destroy()}}),closeOnEsc:!1,footer:null})});class X{async selectSubAccount(e,t,r){var a,n,o,i;let s;let l=(0,f.createReportEvent)({eventName:"workspace_select_sub_account",meta:{enableWorkspaceSSO:t,originLength:e.length,...r}}),c=V(e),u=null===(a=c.find(e=>e.passport_enterprise_user_type===z.PassportEnterpriseUserTypeEnum.Normal))||void 0===a?void 0:a.sec_uid;if(l.updateMeta({finalLength:c.length}),t&&c.length>1){null===(o=this.tea)||void 0===o||o.trackEvent("choose_space_popup_show",{workspace_cnt:c.length,...r});let e=await J(c);null===(i=this.tea)||void 0===i||i.trackEvent("choose_space_popup_click",{...r}),s=e}else s=u;let d=null===(n=c.find(e=>e.sec_uid===s))||void 0===n?void 0:n.passport_enterprise_user_type;return(0,w.updateWorkspaceParams)({type:d}),l.success({meta:{finalId:s}}),s}constructor(e){var t,r;(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t="tea","string"))?r:r+"")in this?Object.defineProperty(this,t,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[t]=null,this.tea=e}}let Q=(e,t)=>{var r,a;return(null===(r=e.parsedExtra)||void 0===r?void 0:r.joined_time)?(null===(a=t.parsedExtra)||void 0===a?void 0:a.joined_time)?e.parsedExtra.joined_time<t.parsedExtra.joined_time?-1:+(e.parsedExtra.joined_time>t.parsedExtra.joined_time):1:-1},Y=(e,t)=>e.passport_enterprise_user_type<t.passport_enterprise_user_type?-1:+(e.passport_enterprise_user_type>t.passport_enterprise_user_type),V=e=>e.map(e=>{try{let t=JSON.parse(e.extra);return{...e,parsedExtra:t}}catch(t){return{...e,parsedExtra:null}}}).filter(e=>{var t,r;return e.passport_enterprise_user_type===z.PassportEnterpriseUserTypeEnum.Normal||!!(null===(t=e.parsedExtra)||void 0===t?void 0:t.workspace_id)&&(null===(r=e.parsedExtra)||void 0===r?void 0:r.workspace_user_status)!==void 0&&[G.WorkspaceUserStatus.WorkspaceUserStatusDefault,G.WorkspaceUserStatus.WorkspaceUserStatusNormal].includes(e.parsedExtra.workspace_user_status)}).sort(Y).sort(Q);var ee=r(993478),et=r(952041),er=r(771677),ea=r(369422),en=r(253647),eo=r(928367);let ei=e=>{let{onNextClick:t}=e,[r,a]=(0,E.useState)(""),[n,o]=(0,E.useState)(!1),i=async()=>{var e;if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r)){p.SamanthaToast.error((0,l.getUnreactiveTranslate)("enterprise_toast_emailVerify_fail"));return}o(!0);try{let e=c.workspaceApiService.AGWWorkspaceSSOGetConfig({email:r}),a=await e;if(!(null==a?void 0:a.data))throw Error((0,l.getUnreactiveTranslate)("enterprise_login_sso_toast_spaceNotFound"));t({email:r,configPromise:e})}catch(t){throw p.SamanthaToast.error(((0,u.isApiError)(t)?null==t?void 0:null===(e=t.errorOption)||void 0===e?void 0:e.message:null==t?void 0:t.message)||"unknown error"),h.logger.persist.error({eventName:"workspace_getConfig_fail",error:t instanceof Error?t:Error(String(t)),meta:{email:r}}),t}finally{o(!1)}};return{email:r,setEmail:a,clicking:n,handleNextClick:i}},es=e=>{let{onNextClick:t,onBackClick:r}=e,{email:a,setEmail:n,handleNextClick:o,clicking:i}=ei({onNextClick:t});return(0,O.jsxs)("div",{children:[(0,O.jsx)(T.SamanthaButton,{type:"quartary",size:"small",className:"cursor-pointer",onClick:r,icon:(0,O.jsx)(S.default,{})}),(0,O.jsxs)("div",{className:"text-center",children:[(0,O.jsx)("div",{className:"s-font-h2 text-s-color-text-secondary my-0",children:(0,l.getUnreactiveTranslate)("enterprise_login_sso_header")}),(0,O.jsx)("div",{className:"s-font-small text-s-color-text-tertiary mt-6",children:(0,l.getUnreactiveTranslate)("enterprise_login_sso_desc")}),(0,O.jsx)(eo.SamanthaInput,{className:"mt-20",size:"large",placeholder:(0,l.getUnreactiveTranslate)("enterprise_login_sso_placeholder_enterEmail"),value:a,onChange:n,onEnterPress:o}),(0,O.jsx)(T.SamanthaButton,{className:"w-full mt-16",type:"primary",size:"large",disabled:!a,loading:i,onClick:o,children:(0,l.getUnreactiveTranslate)("next")})]})]})},el=()=>new Promise((e,t)=>{let r=(0,en.getPageType)(),a=()=>{(0,en.updatePageType)(r),t(new W.UserCanceledError),n.destroy()};(0,en.updatePageType)(ea.LoginPageType.WORKSPACE_SSO_INPUT);let n=b.SamanthaModal.info({width:368,size:"small",icon:!1,zIndex:1020,closable:!1,centered:!0,bodyStyle:{padding:0},onCancel:a,content:(0,O.jsx)(es,{onNextClick:t=>{e(t)},onBackClick:a}),closeOnEsc:!1,footer:null})});var ec=r(296493),eu=r(611833),ed=r(317142);let ep="oauth_token";class eh{async createCsrfToken(){let e=(0,eu.default)();return await this.cookie.set(ep,e)}async getCsrfToken(){return await this.cookie.get(ep)}async getCsrfTokenWithCreation(){return await this.getCsrfToken()||await this.createCsrfToken(),await this.getCsrfToken()}async checkCsrf(e){if(!e)return{result:!1};let t=await this.getCsrfToken();return{result:e===t,csrfToken:t}}constructor(){var e,t,r;e="cookie",t=ed.DefaultCookieService,(e="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string"))?r:r+"")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}}function ef(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class eg extends Error{}class em extends Error{}class e_{get config(){if(!this._config)throw Error("BaseThirdPlatform is not initialized");return this._config}constructor(e){ef(this,"cookieService",void 0),ef(this,"sdkScriptUrl",void 0),ef(this,"getRedirectUrl",void 0),ef(this,"platform",void 0),ef(this,"scriptLoaded",!1),ef(this,"_config",void 0),ef(this,"loadSDKScript",async()=>{if(!this.scriptLoaded&&this.sdkScriptUrl)try{await (0,ec.loadScript)(this.sdkScriptUrl,{timeout:2e3}),this.scriptLoaded=!0}catch(e){h.logger.error({eventName:`fail_to_load_${this.platform}_auth_js`,error:e instanceof Error?e:Error(String(e))})}}),ef(this,"oauth2Redirect",async(e,t)=>{let r=await this.getRedirectUrl()||this.config.redirectUrl;if(!r)throw new em;(0,ed.oauth2Redirect)(r,e,t)}),ef(this,"sdkAuth",void 0),ef(this,"redirectAuth",void 0),ef(this,"auth",async e=>{let{oauth2Config:t,sdkOnly:r,forceRedirect:a=!1}=e;h.logger.persist.info({eventName:"third_party_auth_start",meta:{platform:this.platform}});let n=(0,f.createReportEvent)({logger:h.logger,eventName:"third_party_auth_complete",meta:{platform:this.platform}}),o=null;if(a)h.logger.persist.info({eventName:"oauth2_redirect_when_force_redirect",meta:{platform:this.platform,oauth2Config:t}});else try{await this.loadSDKScript();let e=await this.sdkAuth();return n.success({meta:{from:"sdk"}}),e}catch(e){if(o=e,(0,W.isUserCanceledError)(e))throw n.error({reason:"cancel"}),e;if(r)throw e;h.logger.persist.info({eventName:"oauth2_redirect_when_sdk_failed",meta:{platform:this.platform,oauth2Config:t,error:e}})}if(await this.redirectAuth({...t,csrfToken:await this.cookieService.getCsrfTokenWithCreation()},o),!(0,ed.isPollingUserInfoRedirect)(t.redirectMethod))return new Promise((e,t)=>{setTimeout(()=>{n.error({reason:"timeout"}),t(Error("long time no redirect, may be blocked by browser"))},3e3)})}),this._config=e,this.cookieService=new eh}}function ev(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ey(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ew(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eb(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ek(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eS=r(441259);function eE(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ex=r(744863);function eP(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let eT={apple:class extends e_{constructor(...e){super(...e),eP(this,"sdkScriptUrl","https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js"),eP(this,"getRedirectUrl",()=>Promise.resolve("https://appleid.apple.com/auth/authorize")),eP(this,"initialed",!1),eP(this,"platform","apple"),eP(this,"constructExtraData",async e=>{let{encryptParams:t}=await Promise.all([r.e("67885"),r.e("63303"),r.e("48500"),r.e("80325")]).then(r.bind(r,393967)),a="";try{if(e){var n;let r=(0,ex.default)(e);a=null===(n=t({json_str:JSON.stringify({email:null==r?void 0:r.email})},["json_str"]))||void 0===n?void 0:n.json_str}}catch(t){h.logger.persist.error({eventName:"apple_id_token_decode_failed",error:t,meta:{id_token:e}})}return a}),eP(this,"sdkAuth",async()=>{if(!window.AppleID)throw Error("Apple module is not loaded when initialize");let{clientId:e,platformId:t,callbackUrl:r}=this.config;this.initialed||(AppleID.auth.init({clientId:e,scope:"email",redirectURI:r,usePopup:!0}),this.initialed=!0);try{let e=await AppleID.auth.signIn();if(!e)throw alert("AppleID.auth.signIn return undefined when not use popup"),Error("AppleID.auth.signIn return undefined when not use popup");h.logger.persist.info({eventName:"apple_auth_callback"});let{authorization:{code:r,id_token:a}}=e;return{platform_app_id:t,code:r,extra_params:{extra_data:this.constructExtraData(a),mix_mode:1}}}catch(e){if((null==e?void 0:e.error)==="popup_closed_by_user"||(null==e?void 0:e.error)==="user_cancelled_authorize"||(null==e?void 0:e.error)==="user_trigger_new_signin_flow")throw new W.UserCanceledError({appleError:e});if((null==e?void 0:e.error)==="popup_blocked_by_browser")throw new W.BlockedByBrowserError({appleError:e});throw e}}),eP(this,"redirectAuth",async(e,t)=>{if((0,W.isBlockedByBrowserError)(t))return;let{type:r,navigatePath:a=location.pathname,extra:n,scope:o="",redirectMethod:i,csrfToken:s,customThirdOpenRedirectFn:l}=e,{clientId:c,callbackUrl:u}=this.config;return this.oauth2Redirect({client_id:c,redirect_uri:u,response_type:"code id_token",scope:o,state:{...{entry:(0,er.getEntry)(),...n},platform:"apple",navigatePath:a,type:r,method:i,csrfToken:s}},{extraParameter:{response_mode:"fragment"},redirectMethod:i,customThirdOpenRedirectFn:l})})}},aweme_v2:class extends e_{constructor(...e){super(...e),eE(this,"getRedirectUrl",()=>Promise.resolve("https://open.douyin.com/platform/oauth/connect")),eE(this,"sdkScriptUrl",null),eE(this,"platform","aweme_v2"),eE(this,"sdkAuth",()=>{throw new eg}),eE(this,"redirectAuth",e=>{let{type:t,navigatePath:r=location.pathname,scope:a="user_info,mobile",optionalScope:n="mobile,1",extra:o,redirectMethod:i,csrfToken:s,customThirdOpenRedirectFn:l}=e,{clientId:c,callbackUrl:u}=this.config,d={},p=(0,eS.isWeChat)()||(0,eS.isInSuperApp)();return(0,eS.getIsMobileOrIPad)()&&!p&&(d.is_call_app=1),this.oauth2Redirect({client_id:c,redirect_uri:u,response_type:"code",scope:a,state:{...{entry:(0,er.getEntry)(),...o},platform:"aweme_v2",navigatePath:r,type:t,method:i,timestamp:Date.now(),csrfToken:s},...d},{extraParameter:{client_key:c,optionalScope:n},redirectMethod:i,customThirdOpenRedirectFn:l})})}},facebook:class extends e_{constructor(...e){super(...e),ek(this,"getRedirectUrl",()=>Promise.resolve(null)),ek(this,"sdkScriptUrl","https://connect.facebook.net/en_US/sdk.js"),ek(this,"platform","facebook"),ek(this,"sdkAuth",async()=>{let{clientId:e,platformId:t}=this.config;return new Promise((r,a)=>{if(!e||!t)return a(Error("Facebook is not abled"));if("undefined"==typeof FB)return a(Error("Facebook module is not loaded when initialize"));let n=(e,o)=>{if("connected"===e.status){let{accessToken:a,userID:n}=e.authResponse;r({openid:n,platform_app_id:t,access_token:a})}else{if(!o)return a(new W.UserCanceledError);FB.login(e=>{n(e,!1)})}};FB.init({appId:e,xfbml:!0,version:"v18.0"}),FB.getLoginStatus(e=>{n(e,!0)})})}),ek(this,"redirectAuth",e=>{let{type:t,navigatePath:r=location.pathname,extra:a,scope:n="",redirectMethod:o,csrfToken:i,customThirdOpenRedirectFn:s}=e,{clientId:l,callbackUrl:c}=this.config;return this.oauth2Redirect({client_id:l,redirect_uri:c,response_type:"",scope:n,state:{...{entry:(0,er.getEntry)(),...a},platform:"facebook",navigatePath:r,type:t,method:o,csrfToken:i}},{redirectMethod:o,customThirdOpenRedirectFn:s})})}},google:class extends e_{constructor(...e){super(...e),eb(this,"getRedirectUrl",()=>Promise.resolve("https://accounts.google.com/o/oauth2/v2/auth")),eb(this,"sdkScriptUrl","https://accounts.google.com/gsi/client"),eb(this,"platform","google"),eb(this,"sdkAuth",async()=>new Promise((e,t)=>{let{clientId:r,platformId:a}=this.config;return r&&a?"undefined"==typeof google?t(Error("Google module is not loaded when initialize")):void(google.accounts.id.initialize({client_id:r,callback:t=>{let{credential:r,select_by:n}=t;h.logger.persist.info({eventName:"google_accounts_callback",meta:{select_by:n}}),e({platform_app_id:a,access_token_secret:r})}}),google.accounts.id.prompt(e=>{let r=e.getSkippedReason(),a=e.isSkippedMoment()&&"unknown_reason"===r;return e.isDisplayMoment()&&e.isNotDisplayed()||a?t(Error("Google popup is banned.")):e.isSkippedMoment()?t(new W.UserCanceledError):void 0})):t(Error("google is not abled"))})),eb(this,"redirectAuth",async e=>{let{type:t,navigatePath:r=location.pathname,extra:a,scope:n="email profile",redirectMethod:o,csrfToken:i,customThirdOpenRedirectFn:s}=e,{clientId:l,callbackUrl:c}=this.config;if(!l){h.logger.warning("google is not abled");return}return this.oauth2Redirect({client_id:l,redirect_uri:c,response_type:"token",scope:n,state:{...{entry:(0,er.getEntry)(),...a},platform:"google",navigatePath:r,type:t,method:o,csrfToken:i}},{redirectMethod:o,customThirdOpenRedirectFn:s})})}},line:class extends e_{constructor(...e){super(...e),ew(this,"getRedirectUrl",()=>Promise.resolve("https://access.line.me/oauth2/v2.1/authorize")),ew(this,"sdkScriptUrl",null),ew(this,"platform","line"),ew(this,"sdkAuth",()=>{throw new eg}),ew(this,"redirectAuth",e=>{let{type:t,navigatePath:r=location.pathname,extra:a,scope:n="openid profile",redirectMethod:o,csrfToken:i,customThirdOpenRedirectFn:s}=e,{clientId:l,callbackUrl:c}=this.config;return this.oauth2Redirect({client_id:l,redirect_uri:c,response_type:"code",scope:n,state:{entry:(0,er.getEntry)(),...a,platform:"line",navigatePath:r,type:t,method:o,csrfToken:i}},{extraParameter:{},redirectMethod:o,customThirdOpenRedirectFn:s})})}},sso:class extends e_{constructor(...e){super(...e),ey(this,"getRedirectUrl",()=>Promise.resolve("https://sso.bytedance.com/oauth2/authorize")),ey(this,"sdkScriptUrl",null),ey(this,"platform","sso"),ey(this,"sdkAuth",()=>{throw new eg}),ey(this,"redirectAuth",e=>{let{navigatePath:t}=e,{clientId:r,callbackUrl:a}=this.config,n=new URL(location.href);return t&&(n.search=t.split(/(?=\?)/)[1]||""),this.oauth2Redirect({access_type:"online",client_id:r,redirect_uri:a,response_type:"code",state:n.toString()},{encodeState:!1})})}},workspace_sso:class extends e_{constructor(...e){super(...e),ev(this,"email",""),ev(this,"configPromise",void 0),ev(this,"getConfigs",async()=>{if(!this.email){let e=await el();this.email=e.email,this.configPromise=e.configPromise}}),ev(this,"getRedirectUrl",async()=>{try{var e,t;await this.getConfigs();let r=await this.configPromise;return null!==(t=null==r?void 0:null===(e=r.data)||void 0===e?void 0:e.auth_url)&&void 0!==t?t:""}catch(e){return h.logger.persist.error({eventName:"workspace_getRedirectUrl_fail",error:e instanceof Error?e:Error(String(e))}),""}}),ev(this,"sdkScriptUrl",null),ev(this,"platform","workspace_sso"),ev(this,"sdkAuth",()=>{throw new eg}),ev(this,"redirectAuth",async e=>{var t;let{type:r,navigatePath:a=location.pathname,scope:n="openid email profile",extra:o,redirectMethod:i,customThirdOpenRedirectFn:s,csrfToken:l}=e,{callbackUrl:c}=this.config;await this.getConfigs();let u=await this.configPromise,d=null==u?void 0:null===(t=u.data)||void 0===t?void 0:t.client_id;if(!d)throw Error("workspace client_id is empty");return this.oauth2Redirect({client_id:d,redirect_uri:c,response_type:"code",scope:n,state:{...{entry:(0,er.getEntry)(),...o},platform:"workspace_sso",navigatePath:a,type:r,method:i,csrfToken:l,extra:{email:this.email}}},{extraParameter:{client_key:d},redirectMethod:i,customThirdOpenRedirectFn:s})})}}},eN=e=>"sso"===e.platform;class eC{async getThirdPlatform(e){return Promise.resolve(this.getThirdPlatformSync(e))}getThirdPlatformSync(e){return this.thirdPlatforms.find(t=>t.platform===e)}ssoOauth2Redirect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getThirdPlatformSync("sso");if(!t){h.logger.persist.error({eventName:"sso_oauth_redirect_error",error:Error("Not support to ssoOauth2Redirect"),meta:e});return}(0,et.assert)(eN(t)),t.redirectAuth(e)}thirdPartyAuth(e,t){var r;let a=this.getThirdPlatformSync(e);if(!a)throw Error("Not support platform to thirdPartyAuth");return a.auth({...t,forceRedirect:null!==(r=t.forceRedirect)&&void 0!==r?r:"google"===e})}constructor({thirdPlatformConfig:e}){var t,r,a;r=[],(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t="thirdPlatforms","string"))?a:a+"")in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r,this.thirdPlatforms=(0,ee.default)(e).filter(t=>e[t]).map(t=>{let r=e[t];return r?new eT[t](r):null}).filter(Boolean)}}var eA=r(436114),ej=r(717888),eO=r(38848),eR=r(996776),eU=r(101297);let eW=e=>(0,O.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e,children:(0,O.jsx)("path",{fill:"#06F",fillRule:"evenodd",d:"M12 23c6.075 0 11-4.925 11-11S18.075 1 12 1 1 5.925 1 12s4.925 11 11 11m2-16a2 2 0 1 1-4 0 2 2 0 0 1 4 0m-5 3.75a.75.75 0 0 1 .75-.75h2.75a1 1 0 0 1 1 1v5.5h.75a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5h.75v-5h-.75a.75.75 0 0 1-.75-.75",clipRule:"evenodd"})});var eD=r(172320),eF=r(960232),eL=r(615863),e$=r(274353),eI={"age-gate":"age-gate-MZhXlU",title:"title-bWO_l9",desc:"desc-WP95Ot","date-picker":"date-picker-OfkmTu","next-button":"next-button-OSh2us",age:"age-GtMeQC",err:"err-Wh4t9Q"};let eB=e=>{let{onPass:t,onFail:r,tea:a}=e,[n,o]=(0,E.useState)(null),[i,s]=(0,E.useState)(!1),[u,d]=(0,E.useState)(!1),h=async()=>{if(n){s(!0),null==a||a.trackEvent("age_verification_window_click",{type:eO.FlowLocalStorage.getItem("platform")||"",click_from:"next"},{key:"",withSlardar:!0});try{let{data:e}=await c.safetyApiService.AgeGateReport({scene:ej.AgeGateScene.Launch,pass:!0,birthday:Number(String(n.valueOf()).slice(0,-3))});(null==e?void 0:e.pass)?null==t||t():(null==e?void 0:e.forbidden_reason)===ej.AgeGateForbiddenReason.TooMinAge?(d(!0),s(!1)):(await (0,eD.timeoutPromise)(2e3),s(!1),null==r||r())}catch(e){s(!1),p.SamanthaToast.error({content:(0,l.getUnreactiveTranslate)("log_in_internet_error"),showClose:!1})}}};return(0,O.jsxs)("div",{className:eI["age-gate"],children:[(0,O.jsx)("h2",{className:eI.title,children:(0,l.getUnreactiveTranslate)("age_gate_question")}),(0,O.jsx)("p",{className:eI.desc,children:(0,l.getUnreactiveTranslate)("age_gate_toast")}),(0,O.jsx)(eL.default,{locale:eF.default,children:(0,O.jsx)(e$.default,{style:{"--semi-color-bg-0":"#F6F6F6","--color-neutral-1":"#F6F6F6"},className:eI["date-picker"],disabled:i,disabledDate:e=>{let t=new Date(new Date().getFullYear(),0,1);return!!e&&e.getTime()>=t.getTime()},placeholder:"YYYY-MM-DD",onChange:e=>{e?(o(e),d(!1)):o(null)}})}),n&&!u&&(0,O.jsx)("div",{className:eI.age,children:(0,l.getUnreactiveTranslate)("age_gate_age",{postProcess:"sprintf",sprintf:[(0,D.handleAge)(n)]})}),u&&(0,O.jsx)("div",{className:eI.err,children:(0,l.getUnreactiveTranslate)("age_gate_error",{postProcess:"sprintf",sprintf:[(0,D.handleAge)(n)]})}),(0,O.jsx)(eU.DeprecatedFlowButton,{className:eI["next-button"],disabled:null===n||u,loading:i,onClick:h,children:(0,l.getUnreactiveTranslate)("age_gate_next")})]})};function eM(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class eG extends y{async getAgeGateCheck(e){if(!e&&null!==this.ageGateCheckData)return this.ageGateCheckData;try{let{data:e={}}=await c.safetyApiService.AgeGateCheck({scene:ej.AgeGateScene.Launch});return this.ageGateCheckData=e,e}catch(e){throw new D.AgeGateError(e instanceof Error?e.message:String(e))}}clearAgeGateCheckData(){this.ageGateCheckData=null}triggerPass(){this.emit("pass")}triggerFail(){this.emit("fail")}async alertNeutralAgeGate(e,t,r){return new Promise((a,n)=>{let o=eA.default,i=()=>{c(),o(),a(),this.confirmAgeGateSuccess(t)},s=async e=>{null==e||e(),c(),o(),await this.confirmAgeGateFail(0,t,r),n(new D.AgeGateError)},l=()=>{var e;null===(e=this.tea)||void 0===e||e.trackEvent("age_verification_window_click",{type:t,click_from:"back"},{key:"",withSlardar:!0}),this.confirmAgeGateCancel(t),c(),o(),n(new D.AgeGateCancelError)},c=()=>{this.off("pass",i),this.off("fail",s)};if(this.emit("start_check"),this.on("pass",i),this.on("fail",s),e===D.AgeGateDisplayScene.dialog){var u;o=eR.default.info({zIndex:1020,closable:!1,icon:null,centered:!0,onCancel:()=>l(),content:(0,O.jsx)(eB,{onPass:i,onFail:s,tea:this.tea}),closeOnEsc:!1,footer:null}).destroy,null==r||null===(u=r.getDestroyFnOfConfirmModal)||void 0===u||u.call(r,o)}})}confirmAgeGateSuccess(e){var t;null===(t=this.tea)||void 0===t||t.trackEvent("age_verification_result",{type:e,success:1},{key:"",withSlardar:!0})}confirmAgeGateCancel(e){var t;null===(t=this.tea)||void 0===t||t.trackEvent("age_verification_result",{type:e,success:-1},{key:"",withSlardar:!0})}confirmAgeGateFail(e,t,r){var a,n,o;return null===(a=this.tea)||void 0===a||a.trackEvent("age_verification_result",{type:t,success:0},{key:"",withSlardar:!0}),e?null===(n=this.tea)||void 0===n||n.trackEvent("age_block_login_freeze_window_show",{type:t},{key:"",withSlardar:!0}):null===(o=this.tea)||void 0===o||o.trackEvent("age_block_login_window_show",{type:t},{key:"",withSlardar:!0}),new Promise(t=>{var a;let{destroy:n}=eR.default.warning({closable:!1,closeOnEsc:!1,centered:!0,maskClosable:!1,title:e?(0,l.getUnreactiveTranslate)("age_gate_retry",{postProcess:"sprintf",sprintf:[(0,D.handleHour)(e)]}):(0,l.getUnreactiveTranslate)("age_gate_reject"),footer:(0,O.jsx)(eU.DeprecatedFlowButton,{loading:!1,onClick:()=>{var e;n(),t(),null==r||null===(e=r.onFailedModalClose)||void 0===e||e.call(r)},children:(0,l.getUnreactiveTranslate)("age_gate_next")})});null==r||null===(a=r.getDestroyFnOfFailedModal)||void 0===a||a.call(r,n)})}alertNonNeutralAgeGate(e,t){return new Promise((r,a)=>{var n;let{destroy:o}=eR.default.confirm({zIndex:1020,title:(0,l.getUnreactiveTranslate)("age_gate_title"),content:(0,l.getUnreactiveTranslate)("age_gate_text",{postProcess:"sprintf",sprintf:[(0,l.getUnreactiveTranslate)("brandName_doubao")]}),cancelText:(0,l.getUnreactiveTranslate)("age_gate_no"),okText:(0,l.getUnreactiveTranslate)("age_gate_confirm"),icon:(0,O.jsx)(eW,{style:{height:24,width:24}}),centered:!0,onOk:()=>{var t;null===(t=this.tea)||void 0===t||t.trackEvent("age_verification_window_click",{click_from:"yes_18",type:e},{key:"",withSlardar:!0}),this.confirmAgeGateSuccess(e),r(!0)},onCancel:()=>{var t;eR.default.destroyAll(),null===(t=this.tea)||void 0===t||t.trackEvent("age_verification_window_click",{click_from:"white_18",type:e},{key:"",withSlardar:!0}),this.confirmAgeGateCancel(e),a(new D.AgeGateCancelError)},cancelButtonProps:{onClick:async()=>{var r;null===(r=this.tea)||void 0===r||r.trackEvent("age_verification_window_click",{click_from:"no_18",type:e},{key:"",withSlardar:!0}),eR.default.destroyAll(),await this.confirmAgeGateFail(0,e,{...t,onFailedModalClose:()=>{var e;return null==t||null===(e=t.onFailedModalClose)||void 0===e||e.call(t),a(new D.AgeGateError)}})}}});null==t||null===(n=t.getDestroyFnOfConfirmModal)||void 0===n||n.call(t,o)}).then(()=>{let e={pass:!0,scene:ej.AgeGateScene.Launch};c.safetyApiService.AgeGateReport(e).catch(eA.default)}).catch(e=>{if((0,D.isAgeGateError)(e)){let e={pass:!1,scene:ej.AgeGateScene.Launch};c.safetyApiService.AgeGateReport(e).catch(eA.default)}return Promise.reject(e)})}async confirmAgeGate(e){var t,r,a;let{scene:n,platform:o,ageGateOptions:i,checkWithoutCache:s}=null!=e?e:{};null===(t=this.tea)||void 0===t||t.trackEvent("login_status",{status:"age_gate_validation"},{key:"",withSlardar:!0});let l=null!=n?n:D.AgeGateDisplayScene.dialog;eO.FlowLocalStorage.setItem("platform",o||"");let c=await this.getAgeGateCheck(null==s||s);if((null==c?void 0:c.decision)===ej.AgeGateDecision.Forbid)throw await this.confirmAgeGateFail(null==c?void 0:c.cold_down_remain_minutes,o,i),new D.AgeGateError("age gate if forbid");if((null==c?void 0:c.decision)===ej.AgeGateDecision.Pass){this.confirmAgeGateSuccess(o);return}return(null==c?void 0:c.type)===ej.AgeGateType.Neutral?(null===(r=this.tea)||void 0===r||r.trackEvent("age_verification_window_show",{type:o,age_gate:"neutral"},{key:"",withSlardar:!0}),this.alertNeutralAgeGate(l,o,i)):(null===(a=this.tea)||void 0===a||a.trackEvent("age_verification_window_show",{type:o,age_gate:"non_neutral"},{key:"",withSlardar:!0}),this.alertNonNeutralAgeGate(o,i))}constructor(e){super(),eM(this,"tea",null),eM(this,"ageGateCheckData",null),this.tea=e}}function ez(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class eK{get ageGate(){return this.ageGateIns||(this.ageGateIns=new eG(this.tea)),this.ageGateIns}get workspace(){return this.workspaceIns||(this.workspaceIns=new X(this.tea)),this.workspaceIns}get passportApi(){return this.passportApiIns||(this.passportApiIns=new M({ageGate:this.ageGate,workspace:this.workspace,aid:this.aid,enableWorkspaceSSO:this.localConfig.enableWorkspaceSSO,...this.passportConfig})),this.passportApiIns}get third(){return this.thirdIns||(this.thirdIns=new eC({thirdPlatformConfig:this.thirdPlatformConfig})),this.thirdIns}get cookie(){return this.cookieIns||(this.cookieIns=new eh),this.cookieIns}get tea(){return this.teaIns}get config(){return this.localConfig}constructor({tea:e,aid:t,logoutBaseRoute:r,logoutPathPostProcess:a,logoutRoute:n,passportSDKConfig:o,thirdPlatformConfig:i,getGeneralSDKParams:s,config:l={}}){ez(this,"teaIns",void 0),ez(this,"aid",void 0),ez(this,"localConfig",void 0),ez(this,"passportApiIns",void 0),ez(this,"ageGateIns",void 0),ez(this,"workspaceIns",void 0),ez(this,"thirdIns",void 0),ez(this,"cookieIns",void 0),ez(this,"thirdPlatformConfig",void 0),ez(this,"passportConfig",void 0),this.teaIns=e,this.aid=t,this.thirdPlatformConfig=i,this.localConfig=l,this.passportConfig={logoutBaseRoute:r,logoutPathPostProcess:a,logoutRoute:n,passinSDKConfig:o,getGeneralSDKParams:s}}}},193907:function(e,t,r){var a;r.d(t,{PassportEnterpriseUserTypeEnum:function(){return n}});let n=((a={})[a.Normal=0]="Normal",a[a.Workspace=101]="Workspace",a)},658373:function(e,t,r){var a;r.d(t,{CheckQrconnectStatus:function(){return n}});let n=((a={}).NewState="new",a.ScannedState="scanned",a.ConfirmedState="confirmed",a.RefusedState="refused",a.ExpiredState="expired",a.LoginState="login",a.WaitSubAccount="wait_sub_account",a)},253647:function(e,t,r){r.d(t,{getPageType:function(){return o},updatePageType:function(){return n}});var a=r(484439);let n=e=>{a.useLoginPanelStore.setState({pageType:e})},o=()=>a.useLoginPanelStore.getState().pageType},369422:function(e,t,r){var a;r.d(t,{LoginPageType:function(){return n}});let n=((a={}).LOGIN="login",a.CODE="code",a.MOBILE="mobile",a.NEUTRAL_AGE_GATE="neutral_age_gate",a.WORKSPACE_SSO_INPUT="workspace_sso_input",a.NONE="",a)},484439:function(e,t,r){r.d(t,{useLoginPanelStore:function(){return l}});var a=r(642220),n=r(580296),o=r(369422);let i=()=>({pageType:o.LoginPageType.LOGIN}),s=()=>(0,n.create)()((0,a.subscribeWithSelector)(i)),l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let{_useLoginPanelStore:a}=l.prototype;a||function(){let{_useLoginPanelStore:e}=l.prototype||{};if(!e){let e=s();Object.setPrototypeOf(l.prototype,e),Object.defineProperties(l,{...Object.getOwnPropertyDescriptors(e)}),l.prototype._useLoginPanelStore=e}}();let{_useLoginPanelStore:n}=l.prototype;if(n)return n(...t);throw Error("useLoginPanelStore is not initialized")}},623209:function(e,t,r){var a;r.d(t,{AgeGateCancelError:function(){return l},AgeGateDisplayScene:function(){return i},AgeGateError:function(){return s},handleAge:function(){return o},handleHour:function(){return n},isAgeGateCancelError:function(){return c},isAgeGateError:function(){return u}});let n=e=>e<60?1:Math.floor(e/60),o=e=>{let t=new Date,r=t.getFullYear()-e.getFullYear(),a=t.getMonth()-e.getMonth();return(a<0||0===a&&t.getDate()<e.getDate())&&r--,r},i=((a={})[a.panel=0]="panel",a[a.dialog=1]="dialog",a);class s extends Error{}class l extends Error{}let c=e=>e instanceof l,u=e=>e instanceof s},317142:function(e,t,r){r.d(t,{resetAuthLoginDataFromRoute:function(){return y},isPollingUserInfoRedirect:function(){return h},oauth2Redirect:function(){return v},parseOAuthUrl:function(){return E},DefaultCookieService:function(){return x},isOAuth2RouteParameter:function(){return f}});var a,n=r(557298),o=r(218679),i=r(340002),s=r(165482),l=r(712980);let c=(e,t)=>{let r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;return{left:r/2-e/2+window.screenLeft,top:a/2-t/2+window.screenTop}},u=e=>{let{path:t,width:r=700,height:a=700}=e,{left:o,top:i}=c(r,a);window.open((0,n.filterUrlModule)(t,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$J-%lJXRXBxW$$NNWFWbFl%bXhNTTFZd1lWZDRla3d6$*5sWm$%a3pZ$mMx-TJJelkz%mlNMEpzWW1rM%1HTXlSbmxhTTFaNg"}),"_blank",`width=${r},height=${a},left=${o},top=${i},resizable=no,location=no,menubar=no`)},d=((a={}).ASSIGN="assign",a.POPUP_AUTO_LOGIN="popup_auto_login",a.CUSTOM_OPEN="custom_open",a),p=e=>e&&[d.POPUP_AUTO_LOGIN].includes(e),h=e=>p(e),f=e=>(null==e?void 0:e.authLoginData)&&(0,o.default)(null==e?void 0:e.type),g=e=>(0,o.default)(e)?e:(0,s.stringifyJSON)(e),m=e=>globalThis.btoa(g(e)),_=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{state:a,...n}=t,{encodeState:o=!0,extraParameter:i}=r;return(0,l.toURL)(e,{...i,...n,state:o?m(a):g(a)})},v=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{redirectMethod:a=d.ASSIGN,customThirdOpenRedirectFn:o}=r,i=_(e,t,r);switch(a){case d.ASSIGN:location.assign((0,n.filterUrlModule)(i,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$J-%lJXRXBxW$$NNWFX%ll%bkJp-lZaNlkzaz$hRmt5$*5aa1Z6$Xd%RE5PZ$ZsN%9%RmtSMnh6WTNrNWRsbFlWakJo%k$sM$pFaE9hR050WkR*amR6MDk"}));return;case d.POPUP_AUTO_LOGIN:u({path:i});return;case d.CUSTOM_OPEN:null==o||o(i);return;default:return}},y=()=>{window.history.replaceState({},"")},w=e=>null!=e,b=e=>!!w(e)&&(0,o.default)(e.platform)&&(0,o.default)(e.navigatePath)&&(0,o.default)(e.type),k=e=>{let t=globalThis.atob(e);try{let e=JSON.parse(t);if(b(e))return e;throw Error("Wrong structure of json stringified Oauth2String")}catch(e){if(e instanceof SyntaxError)return t;throw e}},S=e=>!!w(e)&&((0,o.default)(e.access_token)||(0,o.default)(e.code))&&(0,o.default)(e.state),E=e=>{let t=(0,l.parseHashOrQuery)(e.hash||e.search);if(!S(t))throw Error("Wrong structure of oauth2 callback parameter");let r=k(t.state);if((0,o.default)(r))throw Error("OAuth2 state in flow third party login must not be string");let{access_token:a,code:n}=t;return{access_token:a,code:n,state:r}},x={get:e=>Promise.resolve(i.default.get(e)),set:(e,t)=>Promise.resolve(i.default.set(e,t))}},876500:function(e,t,r){r.d(t,{PassportApiError:function(){return i},PassportErrorCodes:function(){return o},isAccountError:function(){return d},isAccountErrorResponse:function(){return p},isCloseCaptchaError:function(){return u},isPassportApiError:function(){return s},isPassportApiSwitchAccountCheckError:function(){return c},isPassportApiWorkspaceSelectError:function(){return l}});var a,n=r(217957);let o=((a={})[a.NOT_LOGGED_IN=13]="NOT_LOGGED_IN",a[a.APP_NO_ACCESS=16]="APP_NO_ACCESS",a[a.ALREADY_BIND_CONFLICT=1041]="ALREADY_BIND_CONFLICT",a[a.TARGET_BIND_CONFLICT=1030]="TARGET_BIND_CONFLICT",a[a.NO_BIND_MOBILE=1342]="NO_BIND_MOBILE",a[a.LAST_PASSPORT=1038]="LAST_PASSPORT",a[a.PHONE_BIND_CONFLICT=1057]="PHONE_BIND_CONFLICT",a[a.PHONE_ALREADY_REGISTERED=1001]="PHONE_ALREADY_REGISTERED",a[a.VERIFY_CODE_EXCEED=1206]="VERIFY_CODE_EXCEED",a[a.CSRF_TOKEN_ERROR=2035]="CSRF_TOKEN_ERROR",a[a.BIND_TOO_OFTEN=2068]="BIND_TOO_OFTEN",a[a.DOUBAO_NON_CN_MOBILE_REGISTRY_BAN=0x128bf1a21]="DOUBAO_NON_CN_MOBILE_REGISTRY_BAN",a[a.DOUBAO_APPLE_REGISTRY_BAN=0x128bf1a22]="DOUBAO_APPLE_REGISTRY_BAN",a);class i extends Error{static from(e){var t,r;let a=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.description,n=null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.error_code,o=null==e?void 0:e.data;return new i(n,a?String(a):void 0,o)}constructor(e,t,r){super(t),this.code=e,this.description=t,this.raw=r}}let s=e=>e instanceof i,l=e=>s(e)&&1454===e.code,c=e=>s(e)&&2002===e.code,u=e=>"CLOSE_CAPTCHA"===e,d=e=>!(0,n.default)(null==e?void 0:e.description)&&!(0,n.default)(null==e?void 0:e.error_code),p=e=>(null==e?void 0:e.message)==="error"},793905:function(e,t,r){r.d(t,{BlockedByBrowserError:function(){return u},UserCanceledError:function(){return i},WorkspaceUserSelectCancelError:function(){return s},isBlockedByBrowserError:function(){return d},isUserCanceledError:function(){return c},isWorkspaceUserSelectCancelError:function(){return l}});var a=r(178230);function n(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends Error{constructor(e={}){let{message:t,appleError:r}=e;super(t),this.options=e,n(this,"name","apple_error"),n(this,"appleError",void 0),this.appleError=r}}class i extends o{constructor(...e){super(...e),n(this,"name","user_canceled_error")}}class s extends Error{constructor(...e){super(...e),n(this,"name","workspace_user_select_cancel_error")}}let l=e=>{let t=e instanceof s;return a.logger.persist.log({eventName:"workspace_user_select_cancel_error",meta:{result:t}}),t},c=e=>e instanceof i;class u extends o{constructor(...e){super(...e),n(this,"name","blocked_by_browser_error")}}let d=e=>e instanceof u},886941:function(e,t,r){r.d(t,{WORKSPACE_TYPE_NAME:function(){return l},getWorkspaceParams:function(){return d},removeWorkspaceParams:function(){return p},updateWorkspaceParams:function(){return u}});var a=r(286528),n=r(38848),o=r(178230),i=r(193907);let s="workspace_data",l={[i.PassportEnterpriseUserTypeEnum.Workspace]:"workspace",[i.PassportEnterpriseUserTypeEnum.Normal]:"personal"},c=()=>{try{return JSON.parse(n.FlowLocalStorage.getItem(s)||"{}")}catch(e){return{}}},u=e=>{var t,r;let{cuid:i,type:c}=e;if(void 0===i&&void 0===c)return;let u=d(),p={},h=(0,a.getTeaInstance)();i&&(p.cuid=i,null==h||null===(t=h.config)||void 0===t||t.call(h,{cuid:i})),void 0!==c&&(p.type=c,null==h||null===(r=h.config)||void 0===r||r.call(h,{space_type:l[c]}));let f={...u,...p};o.logger.persist.info({eventName:"workspace_params_update",meta:f}),n.FlowLocalStorage.setItem(s,JSON.stringify(f))},d=()=>{let e=c();return o.logger.persist.info({eventName:"workspace_params_get",meta:e}),{cuid:e.cuid,type:e.type}},p=()=>{o.logger.persist.info({eventName:"workspace_params_remove"}),n.FlowLocalStorage.removeItem(s)}},717888:function(e,t,r){var a,n,o,i,s;r.d(t,{AgeGateDecision:function(){return l},AgeGateForbiddenReason:function(){return c},AgeGateScene:function(){return u},AgeGateType:function(){return d},ReportType:function(){return p}});let l=((a={})[a.Pass=1]="Pass",a[a.Forbid=2]="Forbid",a[a.Display=3]="Display",a),c=((n={})[n.NotAllowedAge=1]="NotAllowedAge",n[n.TooMinAge=2]="TooMinAge",n),u=((o={})[o.Launch=1]="Launch",o),d=((i={})[i.NonNeutral=1]="NonNeutral",i[i.Neutral=2]="Neutral",i),p=((s={})[s.Bot=1]="Bot",s[s.Message=2]="Message",s[s.User=3]="User",s[s.Conversation=4]="Conversation",s[s.ConversationTemplate=5]="ConversationTemplate",s[s.CiciUser=6]="CiciUser",s[s.PersonWorkMusic=7]="PersonWorkMusic",s[s.PersonWorkPic=8]="PersonWorkPic",s[s.MusicCard=9]="MusicCard",s[s.ShareConversation=10]="ShareConversation",s[s.PcFolder=11]="PcFolder",s[s.PcTextSelection=12]="PcTextSelection",s[s.AiSpaceFolderShare=13]="AiSpaceFolderShare",s[s.BotComment=14]="BotComment",s[s.Artifact=15]="Artifact",s[s.OtterPage=16]="OtterPage",s[s.PodCast=17]="PodCast",s)},777422:function(e,t,r){r.r(t),r.d(t,{trackEvent:function(){return d}});var a=r(178230),n=r(347134);let o={};var i=r(286528);let s=new Map(["picture_message_show","show_suggested_prompt_single_question","show_suggested_prompt","video_card_show","show_onboarding_card_single_question","show_onboarding_card","music_card_show"].map(e=>[e,0])),l=(e,t)=>{var r,a;if(!e||!s.has(e))return!1;let n,o=300;"string"==typeof t?n=t:"object"==typeof t&&(n=null==t?void 0:t.key,o=null!==(r=null==t?void 0:t.duration)&&void 0!==r?r:o);let i=Date.now(),l=void 0===n?e:`${e}_${n}`;return!!s.has(l)&&!(i-(null!==(a=null==s?void 0:s.get(l))&&void 0!==a?a:0)>o)||(s.set(l,i),!1)},c=e=>"object"==typeof e&&e.withSlardar,u=(e,t)=>{let{getTrackEventContext:r,getOriginTrackEventContextList:a}=n.useTrackEventContextStore.getState(),o=t.map(t=>{let a=r(t,{eventName:e});if(!a)return{};let{value:n,extra:o}=a,{enableEventName:i}=o;return!(null==i?void 0:i.length)||i.length&&i.includes(e)?n:{}}),i=a({eventName:e}).filter(t=>{let{global:r,enableEventName:a}=t.extra||{};if(r&&(!(null==a?void 0:a.length)||a.length&&a.includes(e)))return!0}).map(e=>e.value)||[],s={};return o.concat(i).forEach(e=>{Object.assign(s,e)}),s},d=(e,t,r,n)=>{let s=(0,i.getTeaInstance)();if(!s)return;if(void 0!==r&&l(e,r)){a.logger.persist.log({eventName:"trackevent_debounce",meta:{event:e,options:r}});return}let d=u(e,(null==r?void 0:r.ctx)||[]),p={current_page:d.current_page,previous_page:d.previous_page};(!d.current_page||"other"===d.current_page&&(null==t?void 0:t.current_page))&&delete p.current_page,(!d.previous_page||"other"===d.previous_page&&(null==t?void 0:t.previous_page))&&delete p.previous_page;try{let i={...d,...t,...p},l=o.event||null;l?l(e,i):null==s||s.event(e,i),n&&(null==s||s.clearEventCache()),c(r)&&a.logger.persist.log({eventName:e,meta:i})}catch(r){r instanceof Error&&a.logger.persist.error({eventName:"track_event_error",error:r,meta:{event:e,params:t}})}}},347134:function(e,t,r){r.d(t,{useTrackEventContextStore:function(){return u}});var a=r(642220),n=r(580296),o=r(217957),i=r(401301),s=r(623005),l=r(178230);let c=(e,t)=>({contextMap:{},setTrackEventContext(r,a,n){if(!r||(0,o.default)(a)){l.logger.console.warning("[Tea] ctxName \u6216 ctxPayload \u4E3A\u7A7A");return}r.startsWith("ctx")||l.logger.console.warning(`[Tea] key ${r} must start with "ctx_".`);let{contextMap:c}=t();(0,i.default)(c,(e,t)=>{if(e&&r!==t){let n=(0,s.default)(Object.keys(e.value),Object.keys(a));n.length&&l.logger.persist.warning(`[Tea] ${r} \u{548C} ${t} \u{4E2D}\u{5305}\u{542B}\u{6709}\u{76F8}\u{540C}\u{7684}\u{4E0A}\u{4E0B}\u{6587}\u{5185}\u{5BB9} ${n.toString()}`)}});let{global:u=!1,enableEventName:d=null}=n||{};c[r]={value:a,extra:{global:u,enableEventName:d}},e({contextMap:c})},getTrackEventContext(e,r){let a;if(!e){l.logger.console.warning("ctxName \u4E3A\u7A7A");return}let{contextMap:n}=t(),o=n[e];if(!o){l.logger.console.warning(`Context ${e} \u{4E3A}\u{7A7A}.`);return}let i=o.value;return{value:"function"==typeof i?null==i?void 0:i(r):i,extra:o.extra}},getOriginTrackEventContextList(e){let{contextMap:r,getTrackEventContext:a}=t();return Object.keys(r).map(t=>{let r=a(t,e);return r?{ctxName:t,...r}:{ctxName:t,value:{},extra:{}}})},clearTrackEventContext(t){e(e=>{let r={...e.contextMap};return delete r[t],{contextMap:{...r}}})},getAllTrackEventContext(e,r){let a={},{contextMap:n,getTrackEventContext:o}=t();return(0,i.default)(n,(t,n)=>{let{value:i,extra:s}=o(n,r)||{};(!e||e&&(null==s?void 0:s.global))&&(a={...a,...i})}),a}}),u=(()=>{let e=(0,a.subscribeWithSelector)(c);return(0,n.create)()(e)})()}}]);
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["54894"],{769110:function(e,n,t){t.d(n,{Link:function(){return s}});var o=t(186995),l=t(532430),i=t(345660);let s=e=>{let n=(0,l.getFromInstance)("Link",o.Link);return(0,i.jsx)(n,{...e})}},167838:function(e,n,t){t.d(n,{default:function(){return i}}),t(713738);var o=t(430261),l=t(345660),i=(0,o.IconFactory)((0,l.jsx)(e=>(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,l.jsx)("path",{fill:"currentColor",d:"M7.707 21.707a1 1 0 0 1 0-1.414L16 12 7.707 3.707a1 1 0 0 1 1.414-1.414l8.293 8.293a2 2 0 0 1 0 2.828l-8.293 8.293a1 1 0 0 1-1.414 0"})}),{}))},403649:function(e,n,t){t.d(n,{RiskTips:function(){return d}});var o=t(812650),l=t.n(o),i=t(165482),s=t(769110),r=t(345660),a={TEXT:1,URL:2};let d=e=>{let{jsonString:n,tips:t,isBlock:o}=e,d=null!=t?t:[];return(null==t?void 0:t.length)||!n||(d=(0,i.parseJSON)(n,[])),(0,r.jsx)(r.Fragment,{children:d.map(e=>{let{type:n,text:t,url:i}=e;return n===a.URL?(0,r.jsx)(s.Link,{to:null!=i?i:"",target:"_blank",rel:"noopener noreferrer",className:l()("block text-sm/[24px] text-s-color-brand-primary-default",{"mt-12":!o}),children:t}):n===a.TEXT?(0,r.jsx)("div",{className:l()("text-sm/[24px] text-s-color-text-quaternary",{"mt-12":!o}),children:t}):null})})}},119570:function(e,n,t){t.d(n,{useReportOnMessageShowError:function(){return i}});var o=t(713738),l=t(580622);let i=e=>{let{inView:n,reportOnInView:t,getElement:i,enable:s=!0,checkMessageShowError:r,onError:a}=e,d=(0,l.default)(s),u=(0,l.default)(r),v=(0,l.default)(a),c=(0,o.useRef)(n);c.current=c.current||n,(0,o.useLayoutEffect)(()=>()=>{var e,n;if(!d.current)return;let o=i();if(!o){null===(e=v.current)||void 0===e||e.call(v,{reason:"element_mount_error"});return}(c.current||!t)&&(null===(n=u.current)||void 0===n||n.call(u,{element:o,onError:v.current}))},[])}},459046:function(e,n,t){t.d(n,{checkImagesShowError:function(){return s},reportMessageShowError:function(){return i}});var o=t(178230),l=t(83990);let i=e=>{var n,t,i,s,r,a;let{message:d,reason:u,error:v,from:c,meta:_}=e,g=null!=v?v:Error(u),m={success:"0",reason:u,content_type:String(null!==(i=null==d?void 0:d.content_type)&&void 0!==i?i:"unknown"),skill_id:String(null!==(s=null==d?void 0:null===(n=d.skill)||void 0===n?void 0:n.skill_id)&&void 0!==s?s:"generic"),message_from:null!==(r=null==d?void 0:null===(t=d.local_info)||void 0===t?void 0:t.from)&&void 0!==r?r:"unknown",user_type:String(null!==(a=null==d?void 0:d.user_type)&&void 0!==a?a:"unknown"),conversation_id:null==d?void 0:d.conversation_id,message_id:null==d?void 0:d.message_id,conversation_type:String(null==d?void 0:d.conversation_type),from:c||"unknown",..._},h=null==d?void 0:d.message_id;if(l.useMessageStore.getState().checkMessageShowErrorHasReported({messageId:h})){o.logger.console.error({eventName:"message_show_error_duplicate",error:g,meta:m});return}l.useMessageStore.getState().updateMessageShowErrorHasReported({messageId:h}),o.logger.persist.error({eventName:"message_show_error",error:g,meta:m})},s=e=>{let{element:n,hasImage:t=!1,defaultNaturalWidth:o=256,defaultNaturalHeight:l=192,onError:i}=e;if(t){let e=n.querySelectorAll("[data-testid=mdbox_image] picture");if(0===e.length)null==i||i({reason:"images_render_error"});else{let n=!1;e.forEach(e=>{let t=e.querySelector("img");(null==t?void 0:t.complete)&&t.naturalWidth&&t.naturalHeight&&(t.naturalWidth!==o||t.naturalHeight!==l)&&(n=!0)}),n||null==i||i({reason:"all_images_load_error"})}}}},763943:function(e,n,t){t.d(n,{useCodeInterpreterCodeBarConfig:function(){return s}});var o=t(713738),l=t(915299);let i=/```\w+\s+type="interpreter"/g;function s(e){let n=(0,l.useTranslateFn)(),t=(0,o.useRef)(!1),s=t.current;return!s&&e&&(s=i.test(e),t.current=s),(0,o.useMemo)(()=>s?(e,t)=>{let{isBroken:o,isFailed:l,isFinished:i}=t;return{finished:i||l||o,defaultExpand:!1,expandedFinishedText:n("deepResearch_tool_genCode_done"),unExpandFinishedText:n("deepResearch_tool_genCode_done"),codeBarLoadingText:n("deepResearch_tool_genCode"),compact:!0}}:void 0,[s])}},47405:function(e,n,t){t.d(n,{messageShareThemeCss:function(){return o}});let o={coco:{cssVar:{"--send-text-content-link-color":"var(--s-color-text-invert-secondary, rgba(255, 255, 255, 0.85))","--send-text-content-link-decoration-color":"var(--s-color-text-invert-intact-quaternary,rgba(255, 255, 255, 0.35))"},sendClassNames:["text-white","!bg-[#06f]","rounded-2xl","py-16","px-12"],receiveClassNames:["py-16","px-12","rounded-2xl","bg-[#f5f5f5]","!w-fit","max-w-full","min-w-0"]},"coco-immerse":{cssVar:{"--send-text-content-link-color":"var(--Text-color_text_invert_secondary, rgba(255, 255, 255, 0.85))","--send-text-content-link-decoration-color":"var(--s-color-text-invert-intact-quaternary,rgba(255, 255, 255, 0.35))"},sendClassNames:["text-white","!bg-black","rounded-2xl","py-16","px-12"],receiveClassNames:["py-16","px-12","rounded-2xl","bg-[#f5f5f5]","!w-fit","max-w-full","min-w-0"]},samantha:{cssVar:{},sendClassNames:["!text-[length:var(--message-send-text-content-font-size,16px)]"],receiveClassNames:[],receivePluginContainerClassNames:[]}}},296557:function(e,n,t){t.d(n,{PREVIEWABLE_LANGUAGES:function(){return d},useShowRun:function(){return u}});var o=t(713738),l=t(102249),i=t(992847);let s=["python","c","cpp","java"],r=["javascript","go"],a=["rust","php","csharp","bash","r","typescript"],d=["html"],u=()=>{let e=(0,l.useFGValue)("coding_sandbox_run_multi_lang_new",{source:i.FGBuiltinNames.tea,defaultValue:!1});return{showRun:(0,o.useCallback)(n=>n?d.includes(n)?"preview":s.includes(n)||r.includes(n)||e&&a.includes(n)?"run":null:null,[e])}}},535373:function(e,n,t){t.d(n,{DefaultReceiveMessageBox:function(){return E},DefaultReceiveMessageBoxLitePure:function(){return B}});var o=t(713738),l=t(519428),i=t(792433),s=t(812650),r=t.n(s),a=t(750874),d=t(744322),u=t(296557),v=t(629006),c=t(674157),_=t(456712),g=t(540498),m=t(274372),h=t(47405),k=t(763943),p=t(459046),x=t(119570),f=t(637319),T=t(83990),b=t(212183),S=t(588426),C=t(334312),w=t(777422),y=t(403649),M=t(522715),j=t(345660);let E=e=>{var n,t,s,r,m,h,E,B,L,I,R;let{ref:F,inView:N,message:D,messageBlockMeta:A,messageBlockText:O,messageBlockTextFinish:V,messageBlockTextBroken:P,imageOptions:U,customRenderOptions:H,showRiskTips:q=!1}=e,z=(0,v.isTextMessageWithDeepThiking)(D),W=(0,c.isMessageFinished)(D),G=z&&!(null==D?void 0:D.think_reason_is_hide),K=(0,v.isBrokenMessage)(D),X=!!O||(null==D?void 0:null===(n=D.content_obj)||void 0===n?void 0:n.text)!==void 0,J=(0,_.getDeepThinkStatusFromExt)(null==D?void 0:D.ext),Q=!!(null==D?void 0:null===(t=D.content_obj)||void 0===t?void 0:t.think)&&!!(null==D?void 0:null===(s=D.content_obj)||void 0===s?void 0:s.text)&&!J||W,{isLoadingInThinking:Y,loadingTitle:Z}=(0,o.useMemo)(()=>{var e,n,t;let o=!1,l="",{text:i=""}=null!==(t=null==D?void 0:null===(e=D.loading_state)||void 0===e?void 0:e.current_state)&&void 0!==t?t:{};return{isLoadingInThinking:o=null!=D&&null!==(n=D.loading_state)&&void 0!==n&&!!n.in_loading&&!J&&!K,loadingTitle:i}},[null==D?void 0:null===(r=D.loading_state)||void 0===r?void 0:r.current_state,J]),$=(0,o.useRef)(null);(0,x.useReportOnMessageShowError)({getElement:()=>$.current,enable:!!G,checkMessageShowError:e=>(0,a.checkDeepThinkingShowError)(e),onError:e=>(0,p.reportMessageShowError)({...e,message:D,from:"generic_receive_deep_thinking"})});let ee=(0,M.useCustomSlots)({bizMessage:D}),en=(0,k.useCodeInterpreterCodeBarConfig)(O||(null==D?void 0:null===(m=D.content_obj)||void 0===m?void 0:m.text)),{showRun:et}=(0,u.useShowRun)(),eo=(0,o.useMemo)(()=>{var e;let n=null!==(e=(0,l.default)(H))&&void 0!==e?e:{};return(0,i.default)({getCodebarConfig:en,customSlots:ee},n,{customSlotsProps:{CodeBlock:{showRun:et}}})},[H,en]);return(0,j.jsxs)(j.Fragment,{children:[G&&(0,j.jsx)(d.DeepThinkingContent,{ref:$,meta:null==D?void 0:D.meta_infos,isThinkingFinished:Q,isThinkingBroken:J,thinkExpandStatus:!0,content:(null==D?void 0:null===(h=D.content_obj)||void 0===h?void 0:h.think)||"",onTrackEvent:(e,n)=>{var t,o,l;if(!(null==D?void 0:D.conversation_id))return;let i=(0,f.getMessageSelector)(T.useMessageStore.getState(),null==D?void 0:D.conversation_id,{isLocalMessage:!1,messageId:null!==(l=null==D?void 0:D.reply_id)&&void 0!==l?l:""});(0,w.trackEvent)(e,{bot_id:null==D?void 0:D.bot_id,message_id:String(null==D?void 0:D.message_id),chat_type:(0,b.getChatTypeForTea)("",null==D?void 0:D.conversation_id),conversation_id:null==D?void 0:D.conversation_id,conversation_type:(0,S.getConversationTypeById)(null==D?void 0:D.conversation_id),skill_id:null==i?void 0:null===(t=i.skill)||void 0===t?void 0:t.skill_id_no_default,skill_name:(0,C.getSkillTeaNameByType)(null==i?void 0:null===(o=i.skill)||void 0===o?void 0:o.skill_type_no_default),...n})},options:{isInSearchLoading:Y,loadingTitle:Z},messageId:null==D?void 0:D.message_id,botId:null==D?void 0:D.bot_id,skillType:null==D?void 0:null===(E=D.skill)||void 0===E?void 0:E.skill_type_no_default,skillId:null==D?void 0:null===(B=D.skill)||void 0===B?void 0:B.skill_id_no_default,conversationId:null==D?void 0:D.conversation_id,messageText:(null==D?void 0:null===(L=D.content_obj)||void 0===L?void 0:L.text)||""}),X&&(0,j.jsx)(g.MessageTextContent,{ref:F,inView:N,messageBlockText:O,messageBlockMeta:A,messageBlockTextFinish:V,messageBlockTextBroken:P,message:D,imageOptions:U,customRenderOptions:eo}),q&&((0,c.isMessageFinished)(D)||(0,v.isBrokenMessage)(D))?(0,j.jsx)(y.RiskTips,{jsonString:null===(R=D.verbose)||void 0===R?void 0:null===(I=R.extra)||void 0===I?void 0:I.risk_tips}):null]})},B=e=>{var n,t,o,l,i,s,a,u,g,p,x;let{ref:f,inView:T,theme:b="samantha",message:S,messageBlockMeta:C,messageBlockText:w,messageBlockTextFinish:E,messageBlockTextBroken:B,imageOptions:L,customRenderOptions:I,showRiskTips:R=!1}=e,F=(0,v.isTextMessageWithDeepThiking)(S),N=(0,c.isMessageFinished)(S),D=F&&!(null==S?void 0:S.think_reason_is_hide),A=!!w||(null==S?void 0:null===(n=S.content_obj)||void 0===n?void 0:n.text)!==void 0,O=(0,_.getDeepThinkStatusFromExt)(null==S?void 0:S.ext),V=!!(null==S?void 0:null===(t=S.content_obj)||void 0===t?void 0:t.think)&&!!(null==S?void 0:null===(o=S.content_obj)||void 0===o?void 0:o.text)&&!O||N,P=(0,k.useCodeInterpreterCodeBarConfig)(w||(null==S?void 0:null===(l=S.content_obj)||void 0===l?void 0:l.text)),{customSlots:U,...H}=I||{},q=(0,M.useCustomSlots)({bizMessage:S});return(0,j.jsxs)("div",{className:r()(null===(i=h.messageShareThemeCss[b])||void 0===i?void 0:i.receiveClassNames),style:h.messageShareThemeCss[b].cssVar,children:[D&&(0,j.jsx)(d.DeepThinkingContent,{meta:null==S?void 0:S.meta_infos,isThinkingFinished:V,isThinkingBroken:O,thinkExpandStatus:!1,isShare:!0,content:(null==S?void 0:null===(s=S.content_obj)||void 0===s?void 0:s.think)||"",messageId:null==S?void 0:S.message_id,botId:null==S?void 0:S.bot_id,skillType:null==S?void 0:null===(a=S.skill)||void 0===a?void 0:a.skill_type_no_default,skillId:null==S?void 0:null===(u=S.skill)||void 0===u?void 0:u.skill_id_no_default,conversationId:null==S?void 0:S.conversation_id,messageText:(null==S?void 0:null===(g=S.content_obj)||void 0===g?void 0:g.text)||""}),A&&(0,j.jsx)(m.MessageTextContentLitePure,{ref:f,inView:T,messageBlockText:w,messageBlockMeta:C,messageBlockTextFinish:E,messageBlockTextBroken:B,imageOptions:L,customRenderOptions:{getCodebarConfig:P,customSlots:{...q,...U},...H},theme:b,message:null!=S?S:e.message}),R&&((0,c.isMessageFinished)(S)||(0,v.isBrokenMessage)(S))?(0,j.jsx)(y.RiskTips,{jsonString:null===(x=S.verbose)||void 0===x?void 0:null===(p=x.extra)||void 0===p?void 0:p.risk_tips}):null]})}},522715:function(e,n,t){t.d(n,{useCustomSlots:function(){return a}});var o=t(713738),l=t(559891),i=t(345660);let s=(0,l.withSuspense)((0,o.lazy)(()=>Promise.all([t.e("8019"),t.e("25649"),t.e("5628")]).then(t.bind(t,348680)).then(e=>({default:e.MdboxCILink})))),r=(0,l.withSuspense)((0,o.lazy)(()=>Promise.all([t.e("8019"),t.e("25649"),t.e("5628")]).then(t.bind(t,348680)).then(e=>({default:e.MdBoxCIImage})))),a=e=>{var n,t,l,a;let{eventTrigger:d,bizMessage:u}=e,v=(0,o.useCallback)(e=>{var n,t;return(0,i.jsx)(s,{...e,events:d?{onDownloadEvent:d.onClickDownloadAttachmentEvent,onClickAttachment:d.onClickAttachmentEvent}:void 0,uriToUrlMap:null==u?void 0:null===(t=u.content_obj)||void 0===t?void 0:null===(n=t.ci_meta)||void 0===n?void 0:n.uri_to_url})},[null==u?void 0:null===(t=u.content_obj)||void 0===t?void 0:null===(n=t.ci_meta)||void 0===n?void 0:n.uri_to_url]),c=(0,o.useCallback)(e=>{var n,t;return(0,i.jsx)(r,{...e,uriToUrlMap:null==u?void 0:null===(t=u.content_obj)||void 0===t?void 0:null===(n=t.ci_meta)||void 0===n?void 0:n.uri_to_url})},[null==u?void 0:null===(a=u.content_obj)||void 0===a?void 0:null===(l=a.ci_meta)||void 0===l?void 0:l.uri_to_url]);return(0,o.useMemo)(()=>({Link:v,Image:c}),[c,v])}}}]);
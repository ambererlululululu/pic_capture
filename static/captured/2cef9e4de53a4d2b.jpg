"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["93220"],{162603:function(e,t,n){n.d(t,{default:function(){return o}}),n(713738);var i=n(430261),l=n(345660),o=(0,i.IconFactory)((0,l.jsx)(e=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:[(0,l.jsx)("path",{fill:"currentColor",d:"M12 14.019a2.02 2.02 0 1 0 0-4.04 2.02 2.02 0 0 0 0 4.04"}),(0,l.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.059 6.209c-.14-.932-.098-2.259.897-3.253.994-.995 2.321-1.037 3.253-.897.98.147 2.02.556 3.026 1.084.878.46 1.81 1.052 2.765 1.753a22 22 0 0 1 2.765-1.753c1.007-.527 2.046-.937 3.026-1.084.932-.14 2.259-.097 3.253.897s1.037 2.321.897 3.253c-.147.98-.557 2.02-1.084 3.026-.46.878-1.052 1.81-1.753 2.765a22 22 0 0 1 1.753 2.765c.527 1.007.937 2.046 1.084 3.026.14.932.098 2.259-.897 3.253-.994.994-2.321 1.037-3.253.897-.98-.147-2.02-.557-3.026-1.084A22 22 0 0 1 12 19.104a22 22 0 0 1-2.766 1.754c-1.006.527-2.045.936-3.025 1.083-.932.14-2.259.098-3.253-.897-.995-.994-1.037-2.321-.897-3.253.147-.98.556-2.02 1.084-3.026A22 22 0 0 1 4.896 12a22 22 0 0 1-1.753-2.766C2.616 8.228 2.206 7.19 2.059 6.21m2.325-1.825c.892-.892 3.238-.1 5.969 1.816-.724.613-1.45 1.28-2.161 1.992a36 36 0 0 0-1.992 2.16c-1.916-2.73-2.708-5.076-1.816-5.968M9.62 9.62A33 33 0 0 0 7.455 12a33 33 0 0 0 2.165 2.38A33 33 0 0 0 12 16.545a33 33 0 0 0 2.38-2.165A33 33 0 0 0 16.545 12a33 33 0 0 0-2.165-2.38A33 33 0 0 0 12 7.455 33 33 0 0 0 9.62 9.62m-5.236 9.996c-.892-.892-.1-3.238 1.816-5.969.613.724 1.28 1.449 1.992 2.16.712.713 1.437 1.38 2.161 1.993-2.73 1.916-5.077 2.708-5.97 1.816m15.232 0c-.892.892-3.238.1-5.969-1.816a36 36 0 0 0 2.16-1.992 36 36 0 0 0 1.993-2.161c1.916 2.73 2.708 5.077 1.816 5.969M15.808 8.192a36 36 0 0 1 1.992 2.16c1.915-2.73 2.708-5.076 1.816-5.968s-3.238-.1-5.969 1.816c.724.613 1.45 1.28 2.161 1.992",clipRule:"evenodd"})]}),{}))},287214:function(e,t,n){n.d(t,{Dropdown:function(){return T},DropdownMenu:function(){return g}});var i=n(456602),l=n(913821),o=n(812650),a=n.n(o),r=n(949627),s=n(345660),c=n(713738);let d=e=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...e,children:(0,s.jsx)("path",{fill:"#000",d:"M10 13.831a.73.73 0 0 1-.52-.226L4.518 8.526a.8.8 0 0 1-.144-.212.65.65 0 0 1-.055-.266.66.66 0 0 1 .09-.342.65.65 0 0 1 .238-.246.7.7 0 0 1 .35-.089q.28 0 .484.198l4.847 4.963h-.663l4.84-4.963a.71.71 0 0 1 .834-.109.66.66 0 0 1 .335.588.67.67 0 0 1-.198.478l-4.97 5.073a.7.7 0 0 1-.233.177.7.7 0 0 1-.273.055"})});var u={"dropdown-button":"dropdown-button-G3Do8n",text:"text-IDYAhT",arrow:"arrow-HwTKoO","arrow-rotate":"arrow-rotate-i3fooA"};let h=e=>{let{text:t,component:n,onClick:i,visible:l,customArrowIcon:o}=e;if(!t&&!n)return null;let r=()=>{null==i||i()},c=()=>t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:u.text,children:t}),o||(0,s.jsx)(d,{className:a()(u.arrow,{[u["arrow-rotate"]]:l})})]}):n?(0,s.jsx)(s.Fragment,{children:n}):null;return(()=>{let e=c();return e?(0,s.jsx)("div",{className:a()(u["dropdown-button"],"flow-dropdown-button"),onClick:r,children:e}):null})()};var p={"flow-dropdown":"flow-dropdown-myzVOv",selected:"selected-70r6xx","flow-dropdown-menu":"flow-dropdown-menu-qAbs5J"};function g(e){let{list:t,value:n,onChange:o,showTick:d,semiDropdownMenuProps:u,semiDropdownItemProps:h,itemRender:g=e=>(0,s.jsx)(s.Fragment,{children:e})}=e,T=t.map((e,t)=>{let u=(0,l.default)(n,e);return(0,c.createElement)(r.default.Item,{...h,"data-testid":"dropdown-menu-item",key:t,onClick:()=>{null==o||o(e,t)},className:a()(null==h?void 0:h.className,{active:u})},g(e,t),d&&u&&(0,s.jsx)(i.default,{className:p.selected}))});return(0,s.jsx)(r.default.Menu,{...u,className:a()(null==u?void 0:u.className,"flow-dropdown-menu",p["flow-dropdown-menu"]),children:T})}function T(e){var t;if(!(null===(t=e.list)||void 0===t?void 0:t.length))return null;let{buttonText:n,visibleState:i,triggerElement:l,semiDropdownProps:o,containerClassName:c,itemRender:d,list:u,semiDropdownMenuProps:T,showTick:w,value:f,onChange:v,customArrowIcon:m}=e;return(0,s.jsx)("div",{className:a()(c,"flow-dropdown-container"),children:(0,s.jsx)(r.default,{trigger:"click",position:"bottom",clickToHide:!0,onVisibleChange:null==i?void 0:i[1],render:(0,s.jsx)(g,{itemRender:d,list:u,semiDropdownMenuProps:T,showTick:w,value:f,onChange:v}),...o,className:a()(null==o?void 0:o.className,"flow-dropdown",p["flow-dropdown"]),children:(0,s.jsx)("div",{children:l||(0,s.jsx)(h,{text:n,visible:null==i?void 0:i[0],customArrowIcon:m})})})})}},986443:function(e,t,n){n.d(t,{ToolButtonUI:function(){return c}});var i=n(713738),l=n(812650),o=n.n(l),a=n(559425),r={button:"button-VMDZon",overflow:"overflow-jQwWSh",active:"active-yFXB5l",small:"small-lWyHoI"},s=n(345660);let c=(0,i.forwardRef)(function(e,t){let{className:n,renderIcon:i,title:l,small:c,isOverflow:d,active:u,renderExtra:h,buttonProps:p,onMouseUp:g,onMouseEnter:T,...w}=e,f=null==i?void 0:i({className:c?"!text-14 p-2":"!text-16"}),v=u&&!(null==p?void 0:p.disabled);return(0,s.jsx)(a.SamanthaButton,{ref:t,"data-checked":v,...w,type:d?"quartary":"tertiary",icon:f,size:c?"small":"medium",onMouseUp:g,onMouseEnter:T,...p,className:o()(n,r.button,d&&r.overflow,v&&r.active,c&&r.small,null==p?void 0:p.className),children:(l||h)&&(0,s.jsxs)("div",{className:o()("flex items-center",d&&!c&&"ml-8"),children:[l,null==h?void 0:h()]})})})},764965:function(e,t,n){n.d(t,{TrackDeepThinkingSwitch:function(){return h},useCheckLoginState:function(){return d},useDeepThinkingButtonSyncUIState:function(){return g},useDeepThinkingSwitchButton:function(){return p},useMemoOrResetSwitchValue:function(){return u}});var i=n(713738),l=n(453157),o=n(698392),a=n(334312),r=n(777422),s=n(198660),c=n(366119);let d=()=>{let e=(0,s.useIsLoggedIn)(),t=(0,s.useIsLoginLoading)(),n=(0,i.useRef)(!1);(0,i.useEffect)(()=>{!t&&!n.current&&(n.current=!0,(0,o.getChatStore)("deepThinkingControlStore").setState(t=>void 0!==t.lastTriggerLoginState&&t.deepThinkingSwitchValue?{deepThinkingSwitchValue:e===t.lastTriggerLoginState}:{}))},[e,t])},u=(e,t)=>{let n=(0,o.useChatSlice)("deepThinkingControlStore",e=>e.memoDeepThinkingSwitchValue);(0,i.useEffect)(()=>{!n&&(0,o.getChatStore)("deepThinkingControlStore").setState({deepThinkingSwitchValue:!1})},[t,e,n])},h=e=>{let{activeSkillType:t}=e,{run:n}=(0,c.default)(()=>{var e;(0,r.trackEvent)("deep_thinking_switch_show",{skill_id:null!==(e=null==t?void 0:t.toString())&&void 0!==e?e:null,skill_name:(0,a.getSkillTeaNameByType)(t)})},{leading:!0,trailing:!1,wait:100});return(0,i.useEffect)(()=>{let e=!0,t=setTimeout(()=>e&&n(),200);return()=>(e=!1,clearTimeout(t))},[]),null},p=()=>{let{enableDeepThinkingSwitch:e}=(0,o.useChatSlice)("deepThinkingControlStore",e=>({enableDeepThinkingSwitch:e.enableDeepThinkingSwitch}),l.shallow);return{enableDeepThinkingSwitch:e}},g=e=>{let{disabled:t}=e;(0,i.useEffect)(()=>{(0,o.getChatStore)("deepThinkingControlStore").setState({uiHasDeepThinkBtnDisabled:t})},[t]),(0,i.useEffect)(()=>((0,o.getChatStore)("deepThinkingControlStore").setState({uiHasDeepThinkBtn:!0}),()=>{(0,o.getChatStore)("deepThinkingControlStore").setState({uiHasDeepThinkBtn:!1,uiHasDeepThinkBtnDisabled:!1})}),[])}},911200:function(e,t,n){n.d(t,{DeepThinkingSwitchButton:function(){return O}});var i=n(453157),l=n(698392),o=n(764965),a=n(162603),r=n(986443),s=n(334312),c=n(777422),d=n(915299),u=n(198660),h=n(366119),p=n(85736),g=n(345660);let T=e=>{let{disabled:t,isToolButtonSmall:n,isOverflow:i,chatId:T,activeSkillType:w}=e,f=(0,l.useChatSlice)("deepThinkingControlStore",e=>(0,p.getDeepThinkingActiveType)(e,t));(0,o.useMemoOrResetSwitchValue)(T,w);let v=(0,d.useTranslateFn)(),{run:m}=(0,h.default)(()=>{!t&&(0,l.getChatStore)("deepThinkingControlStore").setState(e=>{var t;let{deepThinkingSwitchValue:n}=e;return(0,c.trackEvent)("deep_thinking_switch_click",{skill_id:null!==(t=null==w?void 0:w.toString())&&void 0!==t?t:null,skill_name:(0,s.getSkillTeaNameByType)(w),click_status:n?"close":"open"}),{deepThinkingSwitchValue:!n,lastTriggerLoginState:n?void 0:(0,u.getIsLoggedIn)(),userSwitchValueTime:Date.now()/1e3|0}})},{leading:!0,wait:100,maxWait:500});return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.TrackDeepThinkingSwitch,{activeSkillType:w}),(0,g.jsx)("div",{"data-testid":"use-deep-thinking-switch-btn",className:"action-item-X7HILj",children:(0,g.jsx)(r.ToolButtonUI,{small:n,isOverflow:i,renderIcon:()=>(0,g.jsx)(a.default,{}),title:v("web_search_deep_think_toggle_label"),buttonProps:{disabled:t,title:void 0},active:f&&f!==p.DeepThinkingActiveType.Off,onMouseUp:m})})]})};var w=n(713738),f=n(430261),v=(0,f.IconFactory)((0,g.jsx)(e=>(0,g.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:[(0,g.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.059 6.209c-.14-.932-.098-2.259.897-3.253.994-.995 2.321-1.037 3.253-.897.98.147 2.02.556 3.026 1.084.878.46 1.81 1.052 2.765 1.753a22 22 0 0 1 2.765-1.753c1.007-.527 2.046-.937 3.026-1.084.932-.14 2.259-.097 3.253.897s1.037 2.321.897 3.253c-.147.98-.557 2.02-1.084 3.026-.46.878-1.052 1.81-1.753 2.765l.055.075a6.2 6.2 0 0 0-2.86.22l.246-.295a33 33 0 0 0-2.165-2.38A33 33 0 0 0 12 7.455 33 33 0 0 0 9.62 9.62 33 33 0 0 0 7.455 12a33 33 0 0 0 2.165 2.38A33 33 0 0 0 12 16.545q.147-.121.294-.245a6.2 6.2 0 0 0-.219 2.859L12 19.104a22 22 0 0 1-2.766 1.754c-1.006.527-2.045.936-3.025 1.083-.932.14-2.259.098-3.253-.897-.995-.994-1.037-2.321-.897-3.253.147-.98.556-2.02 1.084-3.026A22 22 0 0 1 4.896 12a22 22 0 0 1-1.753-2.766C2.616 8.228 2.206 7.19 2.059 6.21m2.325-1.825c.892-.892 3.238-.1 5.969 1.816-.724.613-1.45 1.28-2.161 1.992a36 36 0 0 0-1.992 2.16c-1.916-2.73-2.708-5.076-1.816-5.968m0 15.232c-.892-.892-.1-3.238 1.816-5.969.613.724 1.28 1.449 1.992 2.16.712.713 1.437 1.38 2.161 1.993-2.73 1.916-5.077 2.708-5.97 1.816M15.808 8.192a36 36 0 0 1 1.992 2.16c1.915-2.73 2.708-5.076 1.816-5.968s-3.238-.1-5.969 1.816c.724.613 1.45 1.28 2.161 1.992",clipRule:"evenodd"}),(0,g.jsx)("path",{fill:"currentColor",d:"M12 14.019a2.02 2.02 0 1 0 0-4.04 2.02 2.02 0 0 0 0 4.04M19.512 18.989l-.99-2.63h-.035l-.999 2.63z"}),(0,g.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M24 18.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0m-6.307-2.655a.87.87 0 0 1 1.614 0l1.912 4.755a.51.51 0 1 1-.949.372l-.449-1.177h-2.642l-.45 1.177a.51.51 0 1 1-.948-.372z",clipRule:"evenodd"})]}),{})),m=(0,f.IconFactory)((0,g.jsx)(e=>(0,g.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:[(0,g.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.059 6.209c-.14-.932-.098-2.259.897-3.253.994-.995 2.321-1.037 3.253-.897.98.147 2.02.556 3.026 1.084.878.46 1.81 1.052 2.765 1.753a22 22 0 0 1 2.765-1.753c1.007-.527 2.046-.937 3.026-1.084.932-.14 2.259-.097 3.253.897s1.037 2.321.897 3.253c-.147.98-.557 2.02-1.084 3.026-.46.878-1.052 1.81-1.753 2.765l.021.03a6.485 6.485 0 0 0-2.934.392q.18-.212.354-.422a33 33 0 0 0-2.165-2.38A33 33 0 0 0 12 7.455 33 33 0 0 0 9.62 9.62 33 33 0 0 0 7.455 12a33 33 0 0 0 2.165 2.38A33 33 0 0 0 12 16.545q.21-.173.422-.354a6.5 6.5 0 0 0-.392 2.934l-.03-.021a22 22 0 0 1-2.766 1.754c-1.006.527-2.045.936-3.025 1.083-.932.14-2.259.098-3.253-.897-.995-.994-1.037-2.321-.897-3.253.147-.98.556-2.02 1.084-3.026A22 22 0 0 1 4.896 12a22 22 0 0 1-1.753-2.766C2.616 8.228 2.206 7.19 2.059 6.21m2.325-1.825c.892-.892 3.238-.1 5.969 1.816-.724.613-1.45 1.28-2.161 1.992a36 36 0 0 0-1.992 2.16c-1.916-2.73-2.708-5.076-1.816-5.968m0 15.232c-.892-.892-.1-3.238 1.816-5.969.613.724 1.28 1.449 1.992 2.16.712.713 1.437 1.38 2.161 1.993-2.73 1.916-5.077 2.708-5.97 1.816M15.808 8.192a36 36 0 0 1 1.992 2.16c1.915-2.73 2.708-5.076 1.816-5.968s-3.238-.1-5.969 1.816c.724.613 1.45 1.28 2.161 1.992",clipRule:"evenodd"}),(0,g.jsx)("path",{fill:"currentColor",d:"M12 14.019a2.02 2.02 0 1 0 0-4.04 2.02 2.02 0 0 0 0 4.04"}),(0,g.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M18.5 24a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11m2.6-6.832a.497.497 0 0 0-.703-.005L17.92 19.64l-1.126-1.126a.496.496 0 0 0-.701.006.496.496 0 0 0-.006.701l.329.329 1.15 1.15a.5.5 0 0 0 .708 0q1.023-1.025 2.048-2.049l.782-.781a.497.497 0 0 0-.005-.702",clipRule:"evenodd"})]}),{})),k=n(456602),_=n(812650),S=n.n(_),x=n(287214),D=n(525029);let A={[p.DeepThinkingActiveType.Auto]:v,[p.DeepThinkingActiveType.On]:m,[p.DeepThinkingActiveType.Off]:a.default};function j(e){let{isActive:t,label:n,desc:i,Icon:l,...o}=e;return(0,g.jsxs)("div",{...o,className:S()("flex items-start gap-8 w-full",t?"text-s-color-brand-primary-default":"text-s-color-text-secondary"),children:[(0,g.jsx)(l,{className:"mt-3 text-16"}),(0,g.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,g.jsx)("div",{className:"flex-1 min-w-0 truncate s-font-small-strong",children:n}),(0,g.jsx)("div",{className:"text-s-color-text-tertiary truncate",children:i})]}),t&&(0,g.jsx)(k.default,{className:"mt-3 text-16"})]})}let y=e=>(0,g.jsx)(C,{...e}),b=e=>{let t=(0,d.useTranslateFn)(),n={[p.DeepThinkingActiveType.Auto]:{value:p.DeepThinkingActiveType.Auto,label:t("web_search_deepThink_mode_auto"),desc:t("web_search_deepThink_mode_auto_desc"),Icon:v},[p.DeepThinkingActiveType.On]:{value:p.DeepThinkingActiveType.On,label:t("web_search_deepThink_mode_on_tag"),desc:t("web_search_deepThink_mode_on_desc"),Icon:m},[p.DeepThinkingActiveType.Off]:{value:p.DeepThinkingActiveType.Off,label:t("web_search_deepThink_mode_off"),desc:t("web_search_deepThink_mode_off_desc"),Icon:a.default}};return t=>{let i=n[t];return(0,g.jsx)(j,{"data-testid":`deep_think_select_item_${t}`,isActive:t===e,...i},t)}},C=e=>{let{disabled:t,isToolButtonSmall:n,isOverflow:i,chatId:a,activeSkillType:u}=e,h=(0,d.useTranslateFn)(),T=(0,l.useChatSlice)("deepThinkingControlStore",e=>(0,p.getDeepThinkingActiveType)(e,t));(0,o.useMemoOrResetSwitchValue)(a,u);let[f,v]=(0,w.useState)(!1),m=b(T);return(0,g.jsx)(D.SamanthaPopover,{trigger:"custom",visible:f,position:"bottomLeft",className:"popover-container-Ui0RER",content:(0,g.jsx)(x.DropdownMenu,{list:[p.DeepThinkingActiveType.Auto,p.DeepThinkingActiveType.On,p.DeepThinkingActiveType.Off],semiDropdownMenuProps:{className:"dropdown-qKRuOi"},semiDropdownItemProps:{className:"!pl-12"},itemRender:m,onChange:e=>{var t;(0,c.trackEvent)("deep_thinking_switch_click",{skill_id:null!==(t=null==u?void 0:u.toString())&&void 0!==t?t:null,skill_name:(0,s.getSkillTeaNameByType)(u),click_status:e===p.DeepThinkingActiveType.Auto?"auto":e===p.DeepThinkingActiveType.On?"open":"close"}),v(!1),(0,l.getChatStore)("deepThinkingControlStore").setState({deepThinkingSwitchValue:e===p.DeepThinkingActiveType.On,deepThinkingSwitchUseAutoCot:e===p.DeepThinkingActiveType.Auto,userSwitchValueTime:Date.now()/1e3|0})}}),onClickOutSide:()=>v(!1),children:(0,g.jsx)(r.ToolButtonUI,{"data-testid":"deep_think_select_button",small:n,isOverflow:i,renderIcon:()=>(0,w.createElement)(A[T]),title:T===p.DeepThinkingActiveType.Auto?`${h("web_search_deep_think_toggle_label")}: ${h("web_search_deepThink_mode_auto")}`:T===p.DeepThinkingActiveType.On?`${h("web_search_deep_think_toggle_label")}: ${h("web_search_deepThink_mode_on_tag")}`:h("web_search_deep_think_toggle_label"),buttonProps:{disabled:t,title:void 0},active:T&&T!==p.DeepThinkingActiveType.Off,onMouseUp:()=>v(!0)})})},O=e=>{let{disabled:t,isToolButtonSmall:n,disabledTooltip:a,isOverflow:r,content:s,activeSkillType:c}=e,d=!!t,{enableDeepThinkingSwitch:u,deepThinkingAutoCotMode:h,showDeepThinkingBinaryMode:p}=(0,l.useChatSlice)("deepThinkingControlStore",e=>({enableDeepThinkingSwitch:e.enableDeepThinkingSwitch,deepThinkingAutoCotMode:e.deepThinkingAutoCotMode,showDeepThinkingBinaryMode:e.showDeepThinkingBinaryMode}),i.shallow);return((0,o.useCheckLoginState)(),(0,o.useDeepThinkingButtonSyncUIState)({disabled:d}),"hidden_force"!==h&&u)?"optional"!==h||p?(0,g.jsx)(T,{disabled:d,disabledTooltip:a,isToolButtonSmall:n,isOverflow:r,content:s}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.TrackDeepThinkingSwitch,{activeSkillType:c}),(0,g.jsx)(y,{activeSkillType:c,disabled:d,isToolButtonSmall:n,isOverflow:r})]}):null}},85736:function(e,t,n){var i;n.d(t,{DeepThinkingActiveType:function(){return l},getDeepThinkingActiveType:function(){return o}});let l=((i={}).Auto="2",i.On="1",i.Off="0",i),o=(e,t)=>{let{deepThinkingAutoCotMode:n,deepThinkingSwitchUseAutoCot:i,deepThinkingSwitchValue:o,showDeepThinkingBinaryMode:a}=e;return t?l.Off:("optional"===n&&i||"hidden_force"===n)&&!a?l.Auto:o?l.On:l.Off}}}]);
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["60967"],{569648:function(e,l,t){t.d(l,{default:function(){return a}}),t(713738);var n=t(430261),r=t(345660),a=(0,n.IconFactory)((0,r.jsx)(e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M12.793 3.793a1 1 0 0 1 1.414 0l7.5 7.5a1 1 0 0 1 0 1.414l-7.5 7.5a1 1 0 0 1-1.414-1.414L18.586 13H3a1 1 0 1 1 0-2h15.586l-5.793-5.793a1 1 0 0 1 0-1.414",clipRule:"evenodd"})}),{}))},901257:function(e,l,t){t.d(l,{TextContent:function(){return a}});var n={text:"text-OGgTzK",prefix:"prefix-K0O6nF",similarity:"similarity-hfAZvT",suffix:"suffix-QVvpJ1"},r=t(345660);let a=e=>{let{prefix_content:l,suffix_content:t,similarity_content:a}=e;return(0,r.jsxs)("div",{className:n.text,children:[l&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:n.prefix,style:{maskImage:"linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 1) 35px, rgba(0, 0, 0, 1) 100%)"},children:`${l.length>25?"...":""}${l.slice(-25)}`})}),a&&(0,r.jsx)("div",{className:n.similarity,children:a}),t&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:n.suffix,style:{maskImage:"linear-gradient(0deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 1) 35px, rgba(0, 0, 0, 1) 100%)"},children:t})})]})}},114999:function(e,l,t){t.d(l,{RefContentCircle:function(){return i}});var n=t(713738),r=t(812650),a=t.n(r),o=t(345660);let i=(0,n.forwardRef)(function(e,l){let{page:t,style:n,onMouseEnter:r,onMouseLeave:i,onClick:s,...d}=e;return(0,o.jsx)("span",{ref:l,...d,"data-testid":"ref_content_circle",className:a()("ref_content_circle","container-Pzn_Tw",{"short-GhBGRg":t<100,"clickable-gWNcw0":!!s}),style:n,onClick:()=>null==s?void 0:s(),onMouseEnter:()=>null==r?void 0:r(),onMouseLeave:()=>null==i?void 0:i(),children:t>999?"999+":t})})},481923:function(e,l,t){t.d(l,{getInsertElements:function(){return K}});var n=t(302958),r=t(486677),a=t(843174),o=t(195624),i=t(557298),s=t(828438),d=t(713738),c=t(217957),u=t(910214),m=t(971210),p=t(231149),h=t(837921),f=t(114999),v=t(254228),x=t(812650),g=t.n(x),$={container:"container-Oc5zuD",spacing:"spacing-pqonAn"},k=t(345660);let R=(0,d.forwardRef)(function(e,l){let t,{style:n,data:r,isLastRef:a,onMouseEnter:o,onMouseLeave:i,onClick:s}=e,d=null==r?void 0:r.insert_text,c=null==d?void 0:d.startsWith("__LINK_ICON"),u=null==d?void 0:d.match(/^\s*\((.*?)\)\s*$/);if(!(d=(null==u?void 0:u[1])||d))try{if(null==(d=new URL((null==r?void 0:r.url)||"").hostname)?void 0:d.startsWith("www.")){let[,e]=d.split("www.");d=e}}catch(e){}return d?(t=$.container,(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{className:$.spacing}),(0,k.jsx)("span",{ref:l,style:n,className:t,onClick:s,onMouseEnter:o,onMouseLeave:i,children:c?(0,k.jsx)(v.default,{className:"text-14"}):d}),a&&(0,k.jsx)("span",{className:g()($.spacing,"!w-2")})]})):null});var w=t(901257),W=t(569648),b={info:"info-jHtRYn","info-withoud-highligt":"info-withoud-highligt-guXVTD",title:"title-Dr__te",footer:"footer-UuZzJD","footer-withoud-highligt":"footer-withoud-highligt-W1YR7W","footer-img":"footer-img-UUUkXg","footer-border":"footer-border-z3i1YI","footer-website":"footer-website-soMYLm",arrow:"arrow-mXKaaX","svg-rounded-50":"svg-rounded-50-SnF7U0"};let N=e=>{let{url:l,title:t,icon:n,loading:r,website_name:a,shouldShowHighLightContent:o,onClick:s}=e;return(0,k.jsxs)("div",{className:g()(b.info,{[b["info-withoud-highligt"]]:!r&&!o}),onClick:()=>null==s?void 0:s(l),children:[(0,k.jsx)("div",{className:g()(b.title),children:t}),(0,k.jsxs)("div",{className:g()(b.footer,`${r||o?"footer":""}`,{[b["footer-withoud-highligt"]]:!r&&!o}),children:[(0,k.jsxs)("div",{className:"flex flex-1 items-center gap-4",children:[n?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("img",{className:b["footer-img"],src:(0,i.filterUrlModule)(n,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$N-%lJNamw1$2xNNWFtRkhSakJNTTBKelp*Z*tjR0pwT$cxa%0xWjFXa2RHT%d*WE9-$k1WMD%yWWxoQ2RtSnRWblZr%0%xMll6Tktha3d5T$d4ak0wNW9XakpWZ*1SSFZq%mtRekZxWWpJM%1*cFhO$EJNTW14M$l6Sldl$1JET$d4a$IxWjBXb*MxT%dON%9-c*FWMFo1$1RKbmRHTnRWbTFNTWs1MllsaENkb%p0$m5Wa1NFMTJZekpX-%dOdFRtO%1WMXAyWWpO%2JHTnBN$3BpTWp$d1ds-zFNRXd5-khW-$IxWTB%Rz$TZW1WSFJub*FNM$o2"})}),(0,k.jsx)("div",{className:b["footer-border"]})]}):(0,k.jsx)(v.default,{className:g()(b["svg-rounded-50"],"text-gray-500")}),(0,k.jsx)("span",{className:b["footer-website"],children:a})]}),(0,k.jsx)(W.default,{className:b.arrow})]})]})},j=()=>(0,k.jsx)("div",{className:"flex w-full flex-col gap-12",children:Array.from({length:7}).map((e,l)=>(0,k.jsx)("div",{className:g()("input-eob4Ok","flash-BTXjZY")},l))}),T=e=>{let{loading:l,highLightData:t}=e,{similarity_content:n=""}=null!=t?t:{},r=""!==n&&!l;return(0,k.jsxs)("div",{className:"content-yEbzMD",children:[(0,k.jsx)(N,{shouldShowHighLightContent:r,...e}),l?(0,k.jsx)(j,{}):(0,k.jsx)(k.Fragment,{children:r?(0,k.jsx)(w.TextContent,{...t}):null})]})},_=e=>{let{trackEvent:l,url:t,doc_id:n}=e;return(0,d.useEffect)(()=>{null==l||l("search_reference_show",{url:t,doc_id:n,show_from:"in_text_hover"})},[]),(0,k.jsx)(T,{...e})},S=e=>{let{data:l,text:t,useNewUI:n=!1,isLastRef:r=!1,customRefRender:a,options:o,message:v,trackEvent:x,refPosition:g}=e,{title:$,insert_text:w,website_name:W,url:b,icon:N,summary:j,pos:T,start_index:S,doc_id:y,quota_show_type:F}=null!=l?l:{},{enableHightLight:M=!0,getPopupContainer:E}=null!=o?o:{},[Z,C]=(0,s.useInView)({triggerOnce:!0,initialInView:!1,threshold:1}),[J,O]=(0,d.useState)({}),[L,I]=(0,d.useState)(!1),z={title:$,website_name:W,url:b,icon:N,doc_id:y,trackEvent:x},P=(0,m.useComputeValue)(()=>{let e="number";switch(F){case 0:default:e="number";break;case 1:e="icon";break;case 2:e="link"}return{search_url:b,doc_id:y,inline_type:e,inline_text:w,doc_position:g,reply_id:null==v?void 0:v.reply_id}}),X=e=>{e&&(window.open((0,i.filterUrlModule)(e,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$N-%lJNamw1$2xNNWFtRkhSakJNTTBKelp*Z*tjR0pwT$cxa%0xWjFXa2RHT%d*WE9-$k1WMD%yWWxoQ2RtSnRWblZr%0%xMll6Tktha3d5T$d4ak0wNW9XakpWZ*1SSFZq%mtRekZxWWpJM%1*cFhO$EJNTW14M$l6Sldl$1JET$d4a$IxWjBXb*MxT%dON%9-c*FWMFo1$1RKbmRHTnRWbTFNTW14M$drZFdORXh1$W5wbFIwWj$Xak5XZWc9PQ"})),null==x||x("search_reference_click",{...P}))},{loading:B,run:H}=(0,p.default)(async()=>!j||!t||(0,c.default)(S)?{}:await u.samanthaApiService.GetSearchHighlight({content:(null==T?void 0:T[0])?t.slice(Number(S),T[0]):"",summary:j}),{manual:!0,onSuccess(e){var l;O(null!==(l=null==e?void 0:e.data)&&void 0!==l?l:{})}});(0,d.useEffect)(()=>{C&&(null==x||x("message_reference_show",{...P}))},[C]);let D=()=>{};return(0,c.default)(w)?null:n&&"function"!=typeof a?(0,k.jsx)(h.default,{style:{boxShadow:"none",borderRadius:"12px"},autoAdjustOverflow:!0,mouseEnterDelay:200,mouseLeaveDelay:200,onVisibleChange:e=>I(e),getPopupContainer:E,position:void 0,content:(0,k.jsx)(k.Fragment,{children:M?(0,k.jsx)(_,{...z,loading:B,onClick:X,highLightData:J}):null}),children:(0,k.jsx)(R,{ref:Z,style:L?{background:"var(--s-color-brand-primary-hover, #004ad9)",color:"var(--s-color-text-invert-primary, #fff) !important"}:{},data:l,isLastRef:r,onMouseEnter:D,onClick:()=>X(null==z?void 0:z.url)})}):(0,k.jsx)(h.default,{style:{boxShadow:"none",borderRadius:"12px",background:"var(--s-color-bg-float)"},autoAdjustOverflow:!0,mouseEnterDelay:200,mouseLeaveDelay:200,onVisibleChange:e=>I(e),getPopupContainer:E,position:void 0,content:(0,k.jsx)(k.Fragment,{children:M?(0,k.jsx)(_,{...z,loading:B,onClick:X,highLightData:J}):null}),children:"function"==typeof a?a({active:L,onMouseEnter:D,onClick:()=>X(null==z?void 0:z.url)}):(0,k.jsx)(f.RefContentCircle,{ref:Z,style:L?{background:"var(--s-color-brand-primary-hover, #004ad9)",color:"var(--s-color-text-invert-primary, #fff) !important"}:{},page:Number(w),onMouseEnter:D,onClick:()=>X(null==z?void 0:z.url)})})},y=(e,l)=>l.map(l=>{var t,n,r,a;let{data:o}=l;return{...l,data:{...o,index:(null===(t=o.pos)||void 0===t?void 0:t[0])?e[null!==(a=null===(n=o.pos)||void 0===n?void 0:n[0])&&void 0!==a?a:0]:null===(r=o.pos_rune)||void 0===r?void 0:r[0]}}}),F=e=>{let{metaInfos:l,message:t,messageText:i,options:s,useNewSearchRef:d=!1,onTrackEvent:c}=e,u=l.filter(o.isSearchRefMetaInfo),m=l.filter(o.isBrandSuperscriptMetaInfo),p=(0,n.default)(u,e=>{var l,t;return null===(t=e.data)||void 0===t?void 0:null===(l=t.pos)||void 0===l?void 0:l[0]}),h=m.map(e=>[e.data.pos,e.data.pos]).flat(2).filter(e=>void 0!==e).map(e=>Number(e)),f=y(a.utf8.posCalcRange(i,h),m),v=(0,n.default)(f,e=>e.data.index),x=[],g=[],$=0;for(let[e,l]of(0,r.default)(v)){let n=[];for(let[e,a]of(0,r.default)(l))$+=1,n.push((0,k.jsx)(S,{data:a.data,text:i,message:t,refPosition:$,isLastRef:Number(e)===(null==l?void 0:l.length)-1,useNewUI:!0,options:s,trackEvent:c},e));x.push({range:Number(e),render:()=>(0,k.jsx)("span",{children:n.map(e=>e)})})}for(let[e,l]of(0,r.default)(p)){l.sort((e,l)=>{var t,n;return Number(null===(t=e.data)||void 0===t?void 0:t.insert_text)-Number(null===(n=l.data)||void 0===n?void 0:n.insert_text)});let n=[];l.map(e=>{var l;(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.insert_text)&&!g.find(l=>{var t,n;return Number(null==l?void 0:null===(t=l.data)||void 0===t?void 0:t.insert_text)===Number(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.insert_text)})&&(n.push(e),g.push(e))}),n.length>=3&&(n=n.slice(0,2)),0===n.length&&(n=(null==l?void 0:l[0])?[l[0]]:[]);let a=d?n:l,o=[];for(let[e,l]of(0,r.default)(a))$+=1,o.push((0,k.jsx)(S,{data:l.data,text:i,message:t,refPosition:$,trackEvent:c,isLastRef:Number(e)===(null==a?void 0:a.length)-1,useNewUI:d,options:s},e));x.push({range:Number(e),render:()=>(0,k.jsx)("span",{children:o.map(e=>e)})})}return x};var M=t(241107),E=t(959790),Z=t(687765),C=t(712980);let J=(0,d.forwardRef)(function(e,l){let{title:t,link:n,onTrackEvent:r}=e,a=(0,m.useComputeValue)(()=>{let e=n?(0,C.safeParseUrl)(n):null;return e?e.searchParams.get("url"):""});return a?(0,k.jsx)("span",{ref:l,children:(0,k.jsx)("a",{className:"blue-link-up7Qrf",onClick:()=>{null==r||r("named_entity_recognition_click",{name:t})},href:(0,i.filterUrlModule)(a||void 0,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$N-%lJNamw1$2xNNWFtRkhSakJNTTBKelp*Z*tjR0pwT$cxa%0xWjFXa2RHT%d*WE9-$k1WMD%yWWxoQ2RtSnRWblZr%0%xMll6Tktha3d5T$d4ak0wNW9XakpWZ*1SSFZq%mtRekZxWWpJM%1*cFhO$EJNTW14M$l6Sldl$1JET$d4a$IxWjBXb*MxT%dON%9-b*FXR%p6$1ZkT2J*bFhTbk5h$Xpsc$lqSXhkMkl5Tld4aWJsSjZ%REpL-zJSWFZ-%mlSMngxW$hrM%1HTXphR2hq-ldReFkz-zlQ%T09"}),target:"_blank",children:t})}):null}),O=e=>{let{onLinkClick:l,onTrackEvent:t,onSendMessage:n,value:{replace_text:r="",source_type:a=""}}=e,{groups:c}=(0,M.getReplaceTextGroups)(r),[u,m]=(0,s.useInView)({triggerOnce:!0,initialInView:!1,threshold:1}),p=a===o.ReplaceableMetaSourceType.SearchCtrip;return((0,d.useEffect)(()=>{m&&(null==t||t("named_entity_recognition_show",{name:null==c?void 0:c.title}))},[m]),(null==c?void 0:c.title)&&(null==c?void 0:c.link))?p?(0,k.jsx)(J,{ref:u,title:c.title,link:c.link}):(0,k.jsx)("span",{ref:u,className:"mdbox-link-sjvrdV",children:(0,k.jsx)(Z.Link,{className:"link-WPhGc1",href:(0,i.filterUrlModule)(null==c?void 0:c.link,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$N-%lJNamw1$2xNNWFtRkhSakJNTTBKelp*Z*tjR0pwT$cxa%0xWjFXa2RHT%d*WE9-$k1WMD%yWWxoQ2RtSnRWblZr%0%xMll6Tktha3d5T$d4ak0wNW9XakpWZ*1SSFZq%mtRekZxWWpJM%1*cFhO$EJNTW14M$l6Sldl$1JET$d4a$IxWjBXb*MxT%dON%9-b*FXR%p6$1ZkT2J*bFhTbk5h$Xpsc$lqSXhkMkl5Tld4aWJsSjZ%REpzZFZwSFZq%k1ibEo2Wl$kR2$Wb3pWbm89"}),onLinkClick:(e,n)=>{null==t||t("named_entity_recognition_click",{name:null==c?void 0:c.title}),null==l||l(e,n)},onSendMessage:n,children:null==c?void 0:c.title})}):null},L=e=>{let{metaInfos:l,messageText:t,onTrackEvent:n,onLinkClick:r,onSendMessage:i}=e,s=l.filter(o.isReplaceableMetaInfo),d=[],u=s.map(e=>[e.data.start,e.data.end]).flat(2).filter(e=>void 0!==e).map(e=>Number(e)),m=a.utf8.posCalcRange(t,u);for(let e of s){var p,h;let{data:{start:l,end:t,replace_text:a="",source_type:o=""}}=e,{groups:s}=(0,M.getReplaceTextGroups)(a);if((0,c.default)(l)||(0,c.default)(t)||(0,M.isUnSupportedReplaceText)(null!==(p=null==s?void 0:s.link)&&void 0!==p?p:"",o))continue;let u=m[l],f=m[t];if(!((0,c.default)(u)||(0,c.default)(f))){if((0,M.isFPALink)(null!==(h=null==s?void 0:s.link)&&void 0!==h?h:"")){let e=(0,E.toReplacementLink)(s.link);if(!e)continue;d.push({range:[u,f],render:()=>`[${s.title}](${e})`,mode:"raw"})}else d.push({range:[u,f],render:()=>(0,k.jsx)(O,{value:e.data,onTrackEvent:n,onLinkClick:r,onSendMessage:i})})}}return d};var I=t(165482),z=(0,t(430261).IconFactory)((0,k.jsx)(e=>(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,k.jsx)("path",{fill:"currentColor",d:"M12 3.142a3.97 3.97 0 0 1 3.858-.458 3.97 3.97 0 0 1 2.404 3.053 3.97 3.97 0 0 1 3.053 2.404A3.97 3.97 0 0 1 20.857 12a3.97 3.97 0 0 1 .458 3.858 3.97 3.97 0 0 1-3.053 2.404 3.97 3.97 0 0 1-2.404 3.053A3.97 3.97 0 0 1 12 20.857a3.97 3.97 0 0 1-3.859.458 3.97 3.97 0 0 1-2.404-3.053 3.97 3.97 0 0 1-3.053-2.404A3.97 3.97 0 0 1 3.142 12a3.97 3.97 0 0 1-.458-3.859 3.97 3.97 0 0 1 3.053-2.404 3.97 3.97 0 0 1 2.404-3.053A3.97 3.97 0 0 1 12 3.142m-.916 1.615a2.14 2.14 0 0 0-3.555 1.78.917.917 0 0 1-.992.992 2.14 2.14 0 0 0-1.56 3.77.917.917 0 0 1 0 1.403 2.14 2.14 0 0 0 1.56 3.768.918.918 0 0 1 .992.993 2.14 2.14 0 0 0 3.555 1.78zm4.073-.38a2.14 2.14 0 0 0-2.24.379v14.488a2.14 2.14 0 0 0 3.554-1.781.917.917 0 0 1 .992-.993 2.14 2.14 0 0 0 1.56-3.77.917.917 0 0 1 0-1.401 2.141 2.141 0 0 0-1.56-3.77.917.917 0 0 1-.992-.992 2.14 2.14 0 0 0-1.314-2.16"})}),{})),P=t(525029),X={memoryContent:"memoryContent-xRoVLp","memoryContent-update":"memoryContent-update-Wczd65",memoryText:"memoryText-Zle8hp",memoryIcon:"memoryIcon-dyJUVS",popoverWrapper:"popoverWrapper-MZFoRj",popoverTitle:"popoverTitle-VKp1dM",popoverDesc:"popoverDesc-cksBGN"};let B=(e,l)=>(0,k.jsxs)("div",{className:"flex flex-column !items-start gap-4",children:[(0,k.jsx)("div",{className:X.popoverTitle,children:e}),(0,k.jsx)("div",{className:X.popoverDesc,children:l})]}),H=e=>{let{value:l,isUpdate:t,trackEvent:n}=e,[r,a]=(0,d.useState)(!1),[o]=(0,s.useInView)({triggerOnce:!0,initialInView:!1,threshold:1,onChange:e=>{e&&(null==n||n("show_memory_content_detail",{content:null==l?void 0:l.memory_action_tag}))}}),{memoryText:i,popoverTitle:c,popoverContent:u}=(0,m.useComputeValue)(()=>{var e;let{memory_action_title:n,memory_actions:r}=null!=l?l:{};if(t)return{memoryText:n,popoverTitle:"",popoverContent:""};let{memory_tip_title:a,memory_tip_sub_title:o}=null!==(e=null==r?void 0:r[0])&&void 0!==e?e:{};return{memoryText:n,popoverTitle:a,popoverContent:o}}),p=()=>{a(!r),null==n||n("click_memory_content_detail",{content:null==l?void 0:l.memory_action_tag})},h=()=>(0,k.jsxs)("div",{ref:o,className:g()(X.memoryContent,{[X["memoryContent-update"]]:t}),onClick:p,children:[(0,k.jsx)(z,{className:g()(X.memoryIcon,"memoryIcon")}),(0,k.jsx)("div",{className:g()(X.memoryText,"memoryText"),children:i})]});return(0,k.jsx)(k.Fragment,{children:t?h():(0,k.jsx)(P.SamanthaPopover,{className:X.popoverWrapper,showArrow:!0,position:"top",trigger:"custom",visible:r,onClickOutSide:()=>a(!1),content:B(c,u),children:h()})})},D=e=>{let{metaInfos:l,messageText:t,options:a,onTrackEvent:i}=e,s=l.filter(o.isMemoryMetaInfo),d=(0,n.default)(s,e=>{var l;return null===(l=e.data)||void 0===l?void 0:l.pos}),{isFinishedMessage:c=!0}=null!=a?a:{},u=[];for(let[e,l]of(0,r.default)(d)){let n=Number(e);if(n<0){if(!c)continue;n=t.length}let r=l.find(e=>{var l,t;return null!==(l=e.data)&&void 0!==l&&!!l.can_replace&&!!(0,I.parseJSON)(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.value,{}).memory_loading_hide}),a=l.find(e=>{var l;return null===(l=e.data)||void 0===l||!l.can_replace}),o=a||l.find(e=>{var l;return null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.can_replace});!r&&u.push({range:n,type:"newline",render:()=>{var e;return(0,k.jsx)(H,{isUpdate:!a,value:(0,I.parseJSON)(null==o?void 0:null===(e=o.data)||void 0===e?void 0:e.value,{}),trackEvent:i})}})}return u},U=e=>"custom"===e.type,V=e=>{let{metaInfos:l}=e;return l.filter(U).map(e=>e.data)};var A=t(610620);let K=e=>[...L(e),...V(e),...(0,A.getRichMediaTypeInsertElements)(e),...F(e),...D(e)]},959790:function(e,l,t){t.d(l,{fromReplacementLink:function(){return i},toReplacementLink:function(){return o}});var n=t(441259),r=t(712980);let a="fpa_replacement",o=e=>{if((0,n.isMobile)())return e.startsWith("coco://")&&(e=`doubao://${e.slice(7)}`),`coco://${a}?raw=${encodeURIComponent(e)}`;{let l=(0,r.safeParseUrl)(e),t=null==l?void 0:l.searchParams.get("pc_link");if(t)return t.startsWith("/")?`${location.origin}${t}`:t}},i=e=>{let l=new URL(e);return l.host!==a?null:l.searchParams.get("raw")}}}]);
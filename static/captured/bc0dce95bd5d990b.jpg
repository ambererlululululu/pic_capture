"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["18325"],{886783:function(e,t,i){i.d(t,{x:function(){return d}});var r=i(633424),n=i(56231),a=i(176022),l=(0,i(582577).d)(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),o=i(919572),s=i(776888),d=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,r.ZT)(t,e),t.prototype.lift=function(e){var t=new c(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new l},t.prototype.next=function(e){var t=this;(0,s.x)(function(){var i,n;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var a=(0,r.XA)(t.currentObservers),l=a.next();!l.done;l=a.next())l.value.next(e)}catch(e){i={error:e}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}}})},t.prototype.error=function(e){var t=this;(0,s.x)(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var i=t.observers;i.length;)i.shift().error(e)}})},t.prototype.complete=function(){var e=this;(0,s.x)(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,i=this.hasError,r=this.isStopped,n=this.observers;return i||r?a.Lc:(this.currentObservers=null,n.push(e),new a.w0(function(){t.currentObservers=null,(0,o.P)(n,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,i=this.thrownError,r=this.isStopped;t?e.error(i):r&&e.complete()},t.prototype.asObservable=function(){var e=new n.y;return e.source=this,e},t.create=function(e,t){return new c(e,t)},t}(n.y),c=function(e){function t(t,i){var r=e.call(this)||this;return r.destination=t,r.source=i,r}return(0,r.ZT)(t,e),t.prototype.next=function(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)},t.prototype.error=function(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:a.Lc},t}(d)},467271:function(e,t,i){i.d(t,{z:function(){return a}});var r=i(51114),n=i(900205);function a(e,t){var i="object"==typeof t;return new Promise(function(a,l){var o=new n.Hp({next:function(e){a(e),o.unsubscribe()},error:l,complete:function(){i?a(t.defaultValue):l(new r.K)}});e.subscribe(o)})}},51114:function(e,t,i){i.d(t,{K:function(){return r}});var r=(0,i(582577).d)(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}})},891049:function(e,t,i){i.d(t,{Z:function(){return a}}),i(429996);var r=i(339512),n=i(627394),a=(0,r.G)((0,n.jsx)(e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M20.25 5.25H3.75v10.068l1.844-1.536a2 2 0 0 1 2.581.017L9.811 15.2l4.119-3.463a2 2 0 0 1 2.508-.054l3.812 2.939zm-16.5-2a2 2 0 0 0-2 2v13.5a2 2 0 0 0 2 2h16.5a2 2 0 0 0 2-2V5.25a2 2 0 0 0-2-2zM8.5 11.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4",clipRule:"evenodd"})}),{}))},914759:function(e,t,i){i.d(t,{P:function(){return h}});var r=i(429996),n=i(477041),a=i(524518),l=i(669160),o=i.n(l),s=i(627394);let d=e=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:17,height:17,fill:"none",viewBox:"0 0 17 17",...e,children:[(0,s.jsx)("g",{clipPath:"url(#white-loading_svg__a)",children:(0,s.jsx)("path",{stroke:"url(#white-loading_svg__b)",strokeLinecap:"round",strokeWidth:1.778,d:"M15.61 8.5A7.111 7.111 0 0 0 2.097 5.405"})}),(0,s.jsxs)("defs",{children:[(0,s.jsxs)("linearGradient",{id:"white-loading_svg__b",x1:2.096,x2:15.611,y1:8.5,y2:8.5,gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#fff",stopOpacity:0}),(0,s.jsx)("stop",{offset:.399,stopColor:"#fff",stopOpacity:.5}),(0,s.jsx)("stop",{offset:1,stopColor:"#fff"})]}),(0,s.jsx)("clipPath",{id:"white-loading_svg__a",children:(0,s.jsx)("path",{fill:"#fff",d:"M.5.5h16v16H.5z"})})]})]}),c=e=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:17,height:17,fill:"none",viewBox:"0 0 17 17",...e,children:[(0,s.jsx)("g",{clipPath:"url(#black-loading_svg__a)",children:(0,s.jsx)("path",{stroke:"url(#black-loading_svg__b)",strokeLinecap:"round",strokeWidth:1.778,d:"M15.61 8.5A7.111 7.111 0 0 0 2.097 5.405"})}),(0,s.jsxs)("defs",{children:[(0,s.jsxs)("linearGradient",{id:"black-loading_svg__b",x1:2.096,x2:15.611,y1:8.5,y2:8.5,gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopOpacity:0}),(0,s.jsx)("stop",{offset:.399,stopOpacity:.5}),(0,s.jsx)("stop",{offset:1})]}),(0,s.jsx)("clipPath",{id:"black-loading_svg__a",children:(0,s.jsx)("path",{fill:"#000",d:"M.5.5h16v16H.5z"})})]})]});var u={button:"button-PgvIWh",clickable:"clickable-lhEBND","type-primary":"type-primary-E2c9e5",typePrimary:"type-primary-E2c9e5","type-dashed":"type-dashed-JJCe_r",typeDashed:"type-dashed-JJCe_r","type-danger":"type-danger-A2WVaH",typeDanger:"type-danger-A2WVaH",disabled:"disabled-VV18vy","width-fit":"width-fit-jIb4dX",widthFit:"width-fit-jIb4dX","width-full":"width-full-Hzpzu1",widthFull:"width-full-Hzpzu1",loading:"loading-Hpz2Cf",rotate:"rotate-inUE7z",rotation:"rotation-_IiPC_"};let h=e=>{let{disabled:t=!1,loading:i=!1,width:l="full",type:h="primary",onClick:m,onDisableClick:p,onLoadingClick:v,icon:g,className:f,style:A,children:b,...w}=e,[y,x]=(0,r.useState)(!1),[k,j]=(0,r.useState)(!1),S=y||i,_=k||t,R={setDisabled:j,setLoading:x},T=async()=>{if(S){null==v||v(R);return}if(_){null==p||p(R);return}let e=null==m?void 0:m(R);if(e){x(!0);try{await e}finally{x(!1)}}};return(0,s.jsxs)("div",{className:o()(u.button,f,u[`type-${h}`],(0,n.Z)(l)?u[`width-${l}`]:void 0,{[u.disabled]:_,[u.clickable]:!!m&&(!!v||!i)&&!t}),style:{...A,width:(0,a.Z)(l)?l:void 0},onClick:T,"data-disabled":t,...w,children:[S?"dashed"===h?(0,s.jsx)(c,{className:o()(u.loading,u.rotate)}):(0,s.jsx)(d,{className:o()(u.loading,u.rotate)}):g,b]})}},949024:function(e,t,i){i.d(t,{B:function(){return w}});var r=i(429996),n=i(727499),a=i(806033),l=i(162063),o=class{setTrue(){this.value=!0}setFalse(){this.value=!1}isFalse(){return!this.value}isTrue(){return this.value}constructor(e){var t,i;(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t="value","string"))?i:i+"")in this?Object.defineProperty(this,t,{value:!1,enumerable:!0,configurable:!0,writable:!0}):this[t]=!1,this.value=!!e}};function s(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d=class{setState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state={...this.state,...e},this.onChangeState&&this.onChangeState(this.state)}cancelPolling(){void 0!==this.pollingTimer&&(window.clearTimeout(this.pollingTimer),this.pollingTimer=void 0)}dontPolling(){this.setState({isPolling:!1})}_run(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this.cancelPolling(),this.count+=1;let r=this.count;return this.setState({loading:!0,params:t,isPolling:!!this.options.pollingInterval}),this.requestFn(...t).then(e=>{if(this.unmountedFlag.isTrue()||r!==this.count)return;let i=this.options.formatResult?this.options.formatResult(e):e;return this.setState({loading:!1,error:void 0,data:i}),this.options.onSuccess&&this.options.onSuccess(i,t,this.dontPolling.bind(this.that)),i}).catch(e=>{if(!this.unmountedFlag.isTrue()&&r===this.count){if(this.setState({data:void 0,error:e,loading:!1}),this.options.onError&&this.options.onError(e,t,this.dontPolling.bind(this.that)),this.options.throwOnError)throw e;return e}}).finally(()=>{!this.unmountedFlag.isTrue()&&r===this.count&&this.options.pollingInterval&&this.state.isPolling&&(this.pollingTimer=window.setTimeout(()=>{this._run(...t)},this.options.pollingInterval))})}run(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let{debounceFn:r,throttleFn:n}=this;return(this.unmountedFlag.setFalse(),r)?(r(...t),Promise.resolve(null)):n?(n(...t),Promise.resolve(null)):this._run(...t)}cancel(){let{debounceFn:e,throttleFn:t,pollingTimer:i}=this;e&&e.cancel(),t&&t.cancel(),void 0!==i&&this.cancelPolling(),this.count+=1,this.setState({loading:!1,isPolling:!1})}unmount(){this.unmountedFlag.setTrue(),this.cancel()}refresh(){return this.unmountedFlag.setFalse(),this.run(...this.state.params)}refreshOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.options={...this.options,...e},this.run(...this.state.params)}changeData(e){"function"==typeof e?this.setState({data:e(this.state.data)||{}}):this.setState({data:e})}constructor(e,t,i,r){s(this,"options",void 0),s(this,"requestFn",void 0),s(this,"debounceFn",void 0),s(this,"throttleFn",void 0),s(this,"pollingTimer",void 0),s(this,"count",0),s(this,"unmountedFlag",new o),s(this,"that",this),s(this,"onChangeState",void 0),s(this,"state",{loading:!1,run:this.run.bind(this.that),data:void 0,error:void 0,isPolling:!1,unmountedFlag:this.unmountedFlag,cancel:this.cancel.bind(this.that),refresh:this.refresh.bind(this.that),refreshOptions:this.refreshOptions.bind(this.that),changeData:this.changeData.bind(this.that),unmount:this.unmount.bind(this.that),params:[]});let{debounceThrottleOptions:n,initData:d,debounceInterval:c,throttleInterval:u}=t;if(this.requestFn=e,this.options=t,this.onChangeState=i,this.state.data=d,r&&(this.state={...this.state,...r}),this.pollingTimer=void 0,void 0!==c)this.debounceFn=c?(0,l.Z)(this._run.bind(this.that),c):void 0;else if(void 0!==u)this.throttleFn=u?(0,a.Z)(this._run.bind(this.that),u):void 0;else if(void 0!==n){let{type:e,interval:t,leading:i="debounce"!==e,trailing:r=!0}=n;"debounce"===e?this.debounceFn=(0,l.Z)(this._run.bind(this.that),t,{leading:i,trailing:r}):"throttle"===e&&(this.throttleFn=(0,a.Z)(this._run.bind(this.that),t,{leading:i,trailing:r}))}}},c=i(843951),u=i(913602);function h(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let m="BYTED_HOOKS_REQUEST_CACHE_STORAGE",p=new class{syncStorage(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{e.setItem(m,JSON.stringify(t))}catch(r){i||(e.removeItem(m),this.syncStorage(e,this.compressStorage(t),!0))}}compressStorage(e){let t={};return Object.entries(e).forEach(e=>{let[i,r]=e;(-1===r.expireTime||r.expireTime>Date.now())&&(t[i]=r)}),t}constructor(){h(this,"memoryValue",void 0),h(this,"localStorageValue",void 0),h(this,"sessionStorageValue",void 0),h(this,"getValue",(e,t)=>{switch(t){case"memory":default:return this.memoryValue.get(e);case"sessionStorage":return this.sessionStorageValue[e];case"localStorage":return this.localStorageValue[e]}}),h(this,"setValue",(e,t,i)=>{switch(i){case"memory":default:this.memoryValue.set(e,t);break;case"sessionStorage":this.sessionStorageValue[e]=t,this.syncStorage(u.Ie,this.sessionStorageValue);break;case"localStorage":this.localStorageValue[e]=t,this.syncStorage(u.yQ,this.localStorageValue)}}),h(this,"removeItem",(e,t)=>{switch(t){case"memory":default:this.memoryValue.delete(e);break;case"sessionStorage":delete this.sessionStorageValue[e],this.syncStorage(u.Ie,this.sessionStorageValue);break;case"localStorage":delete this.localStorageValue[e],this.syncStorage(u.yQ,this.localStorageValue)}}),this.memoryValue=new Map;try{var e,t,i,r;this.localStorageValue=this.compressStorage(JSON.parse(null!==(i=null===(e=window)||void 0===e?void 0:e.localStorage.getItem(m))&&void 0!==i?i:"{}")),this.sessionStorageValue=this.compressStorage(JSON.parse(null!==(r=null===(t=window)||void 0===t?void 0:t.sessionStorage.getItem(m))&&void 0!==r?r:"{}"))}catch(e){this.localStorageValue={},this.sessionStorageValue={}}}},v=(e,t,i,r)=>{let n=Date.now();p.setValue(e,{data:i,expireTime:-1!==t?n+t:t,startTime:n},r)},g=(e,t)=>{var i;let r=p.getValue(e,t);if(r&&((null==r?void 0:r.expireTime)===-1||(null!==(i=null==r?void 0:r.expireTime)&&void 0!==i?i:0)>Date.now()))return(0,c.Z)(r);p.removeItem(e,t)};var f=i(115866);let A="_BYTED_HOOKS_DEFAULT_KEY_";var b=function(e){var t,i,a,l;let s,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{staleTime:u=3e5}=c,{auto:h=!1,defaultParams:m=[],refreshDeps:p=[],initData:b,ready:w=!0,cacheKey:y,cacheStoreType:x="memory",cacheTime:k=3e5,loadingCheck:j=!1,errorCheck:S=!1,formatResult:_,requestKey:R,onError:T,onSuccess:N}=c,E=(0,f.Z)(e),F=(0,f.Z)(N),M=(0,f.Z)(T),I=_?(0,f.Z)(_):void 0,W=(0,f.Z)(R),$=(0,r.useCallback)((e,t)=>{z(i=>({...i,[e]:t}))},[]),O=(0,r.useRef)(y);O.current=y;let Z=(0,r.useRef)(x);Z.current=x;let P=(0,r.useRef)(w);P.current=w;let C=(0,r.useRef)(A),B=()=>{if(O.current){let{data:e,startTime:t=0}=g(O.current,Z.current)||{},i=-1===u||new Date().getTime()-t<=u;if(e&&i){C.current=e.currentRequestKey;let t={};return Object.keys(e.requests).forEach(i=>{let r=e.requests[i],n=new d(E,{...c,onSuccess:F,onError:M,formatResult:I},$.bind(null,i),{loading:r.loading,params:r.params,data:r.data,error:r.error});t[i]=n.state}),t}}return{}},[D,z]=(0,r.useState)(()=>B()),V=(0,r.useRef)(D);V.current=D;let H=(0,r.useRef)(),J=(0,r.useCallback)(function(){let e;for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];if(!w){H.current=i;return}if(R){let t=W(...i);C.current=t,e=V.current[t]}else e=V.current[C.current];if(!e){let e=new d(E,{...c,onSuccess:F,onError:M,formatResult:I},$.bind(null,C.current)).state;return z(t=>({...t,[C.current]:e})),e.run(...i)}return e.run(...i)},[R,w]);(0,n.Z)(()=>{O.current&&v(O.current,k,{requests:D,currentRequestKey:C.current},Z.current)},[D]);let U=(0,r.useCallback)(()=>{Object.values(V.current).forEach(e=>{e.unmount()}),C.current=A,z({}),V.current={}},[z]),X=(0,r.useRef)(!1);(0,n.Z)(()=>{w&&(!X.current&&H.current&&J(...H.current),X.current=!0)},[w]),(0,r.useEffect)(()=>(w&&h&&(Object.keys(B()).length>0?Object.values(D).forEach(e=>{e.refresh()}):J(...m)),()=>{Object.values(V.current).forEach(e=>{e.unmount()})}),[w]),(0,n.Z)(()=>{if(P.current&&h){let e=B();0===Object.keys(e).length?Object.values(D).forEach(e=>{e.refresh()}):z(e)}},[...p]);let L=[c.debounceInterval,c.throttleInterval,null===(t=c.debounceThrottleOptions)||void 0===t?void 0:t.type,null===(i=c.debounceThrottleOptions)||void 0===i?void 0:i.interval,null===(a=c.debounceThrottleOptions)||void 0===a?void 0:a.leading,null===(l=c.debounceThrottleOptions)||void 0===l?void 0:l.trailing,c.pollingInterval];return((0,n.Z)(()=>{Object.values(D).forEach(e=>{!e.unmountedFlag.isTrue()&&(void 0!==c.debounceInterval?e.refreshOptions({debounceInterval:c.debounceInterval,pollingInterval:c.pollingInterval}):void 0!==c.throttleInterval?e.refreshOptions({throttleInterval:c.throttleInterval,pollingInterval:c.pollingInterval}):e.refreshOptions({debounceThrottleOptions:c.debounceThrottleOptions,pollingInterval:c.pollingInterval}))})},[...L]),s=D[C.current]?{...D[C.current],run:J,reset:U,requests:D}:{loading:h&&w,isPolling:!1,data:b,error:void 0,unmountedFlag:new o,params:[],cancel:()=>{},unmount:()=>{},reset:()=>{},refresh:()=>{},refreshOptions:()=>{},changeData:()=>{},run:J,requests:D},"undefined"!=typeof Proxy)?new Proxy(s,{get:(e,t)=>e[t]}):s};function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{ready:i=!0,resetDeps:a=[],refreshDeps:l=[],itemKey:o,initPageSize:s=10,ref:d,threshold:c=100,...u}=t,{hasMoreHanlder:h,isNoMore:m,hasMoreHandler:p}=t,{noMoreHandler:v}=t;v=v||p||h||m;let g=t.incrementSize||s,[f,A]=(0,r.useState)(!1),[w,y]=(0,r.useState)(1),x=(0,r.useRef)(0),k=(0,r.useRef)(new Date().getTime()),j={data:{list:[]},current:1,pageSize:s,offset:0,startTime:k.current},S="boolean"!=typeof u.auto||u.auto,[_,R]=(0,r.useState)(),T=b(e,{...u,ready:i,auto:S,defaultParams:[j],requestKey:e=>{var t,i;return((null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(t=i.list)||void 0===t?void 0:t.length)||0)+k.current},onSuccess:function(){for(var e,i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];(null==_?void 0:null===(e=_.list)||void 0===e?void 0:e.length)&&d&&d.current&&(d.current.scrollTop=0),R(void 0),A(!1),y(e=>e+1),t.onSuccess&&t.onSuccess(...r)},onError:function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];A(!1),t.onError&&t.onError(...i)}}),{data:N,run:E,error:F,reset:M,loading:I,requests:W}=T,$=(0,r.useMemo)(()=>{let e=[],t=N||{};return Object.keys(W).sort((e,t)=>Number(e)-Number(t)).forEach(i=>{var r,n;let a=W[i];(null===(r=a.data)||void 0===r?void 0:r.list)&&(e=e.concat(null===(n=a.data)||void 0===n?void 0:n.list)),a.loading||(t=a.data)}),{...t,list:e}},[W,N]),O=!!(!I&&!f&&(v?v(N,F,$):!(null==N?void 0:N.list.length)||N.total&&$.list.length>=N.total)),Z=(0,r.useCallback)(()=>{let{list:e}=$;return{data:$,current:w,pageSize:1===w?s:g,offset:e.length,id:o&&e.length>0?((e,t)=>{let i="function"==typeof o?o(e,t):e[o];return void 0===i?t:i})(e[e.length-1],e.length-1):void 0,startTime:k.current}},[w,s,g,$]),P=(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&R($),M(),y(1),k.current=new Date().getTime(),E(j)},[E,M,$]),C=(0,r.useRef)(P);C.current=P,(0,n.Z)(()=>{i&&S&&C.current()},[...a,...l]);let B=(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R(void 0),!O&&!I&&!f&&(A(!0),E({...Z(),...e}))},[O,I,f,E,$,Z]);(0,r.useEffect)(()=>{if(!(null==d?void 0:d.current))return()=>{};let e=()=>{(null==d?void 0:d.current)&&(x.current<d.current.scrollTop&&d.current.scrollHeight-d.current.scrollTop<=d.current.clientHeight+c&&B(),x.current=d.current.scrollTop)};return d.current.addEventListener("scroll",e),()=>{(null==d?void 0:d.current)&&d.current.removeEventListener("scroll",e)}},[null==d?void 0:d.current,B]);let D=(0,r.useMemo)(()=>{var e;return(null==_?void 0:null===(e=_.list)||void 0===e?void 0:e.length)?_:$},[_,_,$]);return{...T,reset:C.current,current:w,data:D,reload:P,loading:I&&!!(null==_?void 0:_.list.length)||I&&0===$.list.length,loadMore:B,loadingMore:f,noMore:O,hasMore:O}}},185446:function(e,t,i){i.d(t,{FeedbackModal:function(){return e$},hF:function(){return eI}});var r,n,a=i(429996),l=i(886783),o=i(467271),s=i(51114),d=i(669160),c=i.n(d),u=i(531336),h=i(58070),m=i(432626),p=i(33021),v=i(19755),g=i(7415),f=i(845869),A=i(736257),b=i(551450),w=i(561686),y=i(222334),x=i(124901);let k={image:["jpeg","jpg","png","gif","bmp"],video:["mp4","quicktime","x-m4v","x-flv","x-matroska","webm","3gpp"]},j=e=>null==e?void 0:e.map(e=>{var t,i;return null!==(i=null===(t=k[e])||void 0===t?void 0:t.map(t=>`${e}/${t.toLowerCase()}`))&&void 0!==i?i:[`${e}/*`]}).flat(),S=((r={}).SUBMIT="submit",r.HISTORY="history",r);var _=i(627394);let R=e=>(0,_.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:21,fill:"none",viewBox:"0 0 22 21",...e,children:(0,_.jsx)("path",{fill:"#FC8800",fillRule:"evenodd",d:"M9.227 1.399.526 18.075C-.17 19.406.797 21 2.299 21H19.7c1.502 0 2.468-1.594 1.774-2.925L12.773 1.399c-.748-1.434-2.799-1.434-3.546 0M12.14 13.01a1.153 1.153 0 0 1-2.283 0l-.575-4.03a1.735 1.735 0 1 1 3.434 0zm.359 4.49a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0",clipRule:"evenodd"})});var T=i(529496),N=i(444614),E=i(561200),F=i(185614),M=i.n(F),I=i(640078),W=i(913602),$=i(442291),O=i(914759),Z=i(864802),P=i(891049);let C=(e,t)=>{let i=e.mediaData.mediaType;if(!t.includes(i))throw Error(`Not allowed media type: ${i}, only allowed ${t.join(", ")} now.`)},B=((n={})[n.UPLOADING=0]="UPLOADING",n[n.FAILED=1]="FAILED",n[n.FINISHED=2]="FINISHED",n),D=e=>(0,_.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...e,children:(0,_.jsx)("path",{fill:"#fff",d:"M3.525 16q-1.21 0-1.87-.613Q1 14.773 1 13.599V6.474q0-1.176.676-1.825.676-.65 1.85-.649h7.524q1.209 0 1.842.649.633.65.633 1.817v7.06q0 1.176-.662 1.825-.654.65-1.863.649zm11.1-3.57V7.62l2.368-2.04q.244-.21.489-.332.252-.13.496-.13.454 0 .734.295Q19 5.71 19 6.2v7.658q0 .491-.288.786-.28.296-.734.296-.244 0-.496-.13a2.7 2.7 0 0 1-.49-.339z"})}),z=e=>(0,_.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:30,height:30,fill:"none",viewBox:"0 0 30 30",...e,children:(0,_.jsx)("path",{fill:"#fff",d:"M5.146 16.287q0-2.042.762-3.83a9.872 9.872 0 0 1 5.23-5.241 9.6 9.6 0 0 1 4.668-.728q.408.045.783.121l-2.67-2.637a1.2 1.2 0 0 1-.221-.331 1 1 0 0 1-.077-.397q0-.465.298-.773.31-.32.761-.32.464 0 .761.31l4.524 4.612q.343.33.343.794 0 .22-.089.42a1.1 1.1 0 0 1-.254.375l-4.524 4.568q-.286.298-.76.298-.442 0-.751-.309a1.03 1.03 0 0 1-.31-.761q0-.21.078-.387.088-.187.232-.342l3.001-2.968a8 8 0 0 0-.916-.132 9 9 0 0 0-1.037-.056 7.5 7.5 0 0 0-3.001.596 7.7 7.7 0 0 0-2.428 1.656 7.7 7.7 0 0 0-1.644 2.45 7.7 7.7 0 0 0-.585 3.012 7.6 7.6 0 0 0 .596 3A8 8 0 0 0 9.56 21.75a7.8 7.8 0 0 0 2.45 1.655 7.7 7.7 0 0 0 3.001.585q1.59 0 2.98-.585a7.6 7.6 0 0 0 2.449-1.655 7.9 7.9 0 0 0 1.655-2.461 7.6 7.6 0 0 0 .596-3.001q0-.497.287-.806.298-.309.772-.309.497 0 .795.309.309.31.309.806a9.8 9.8 0 0 1-.762 3.85 9.7 9.7 0 0 1-2.107 3.145 9.7 9.7 0 0 1-3.145 2.108 9.7 9.7 0 0 1-3.829.761 9.8 9.8 0 0 1-3.85-.761 9.6 9.6 0 0 1-3.135-2.108 10.1 10.1 0 0 1-2.118-3.144 9.8 9.8 0 0 1-.762-3.852"})}),V=e=>(0,_.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18",...e,children:[(0,_.jsx)("rect",{width:18,height:18,fill:"#000",fillOpacity:.6,rx:9}),(0,_.jsx)("path",{fill:"#fff",d:"M5.797 12.199a.6.6 0 0 1-.16-.278.66.66 0 0 1 .005-.318.6.6 0 0 1 .15-.27L8.123 9l-2.33-2.33a.6.6 0 0 1-.15-.269.7.7 0 0 1 0-.318.6.6 0 0 1 .155-.277.55.55 0 0 1 .277-.16.7.7 0 0 1 .323 0 .56.56 0 0 1 .273.151L9 8.122l2.326-2.326a.56.56 0 0 1 .274-.15.622.622 0 0 1 .596.16.6.6 0 0 1 .159.276.63.63 0 0 1-.152.592L9.878 8.999l2.326 2.33a.56.56 0 0 1 .15.274.66.66 0 0 1-.004.318.56.56 0 0 1-.155.277.57.57 0 0 1-.277.155.66.66 0 0 1-.318.005.54.54 0 0 1-.274-.155L9 9.877l-2.33 2.33a.57.57 0 0 1-.273.146.63.63 0 0 1-.319 0 .6.6 0 0 1-.281-.155"})]});var H=i(775313);let J=()=>{let e=(0,a.useRef)(0);return()=>e.current++},U=e=>(0,a.useMemo)(()=>H.x.create({getPopupContainer:()=>e.current}),[]);var X=i(814986);let L=()=>{let[e,t]=(0,a.useState)(!0);return{_logPath:{},submitLoading:!1,setSubmitLoading:X.Z,logChecker:e,setLogChecker:t,handleUploadLog:e=>"api request",preHandleSubmitApi:()=>({}),getTimeoutPromise:()=>Promise.resolve("timeout")}};var q=e=>{let{children:t}=e;return(0,_.jsx)(_.Fragment,{children:null!=t?t:null})},G=i(353334),Q=i(557067),K=i(727499),Y=i(319837),ee={container:"container-yOqpNS",animated:"animated-_d1a1i",forward:"forward-TY0VkA",entering:"entering-GUysfQ",entered:"entered-kq9zbg",exiting:"exiting-KZic2b",exited:"exited-PsxGE7",unmounted:"unmounted-Q_O1yE"};let et=e=>{let{isEnabled:t=!0,isFinished:i,className:r,style:n,children:l}=e,[o,s]=(0,a.useState)(0);return(0,Q.Z)(()=>{s(Math.min(o+20,80))},i&&t?void 0:1e3,{immediate:!0}),(0,K.Z)(()=>{i?s(100):s(0)},[i]),(0,_.jsx)(G.ZP,{in:!i&&t,mountOnEnter:!0,timeout:300,children:e=>(0,_.jsxs)(_.Fragment,{children:[null==l?void 0:l(c()(ee.animated,ee.reverse,ee[e])),"exited"!==e&&"unmounted"!==e&&(0,_.jsx)("div",{className:c()(r,ee.container,ee.animated,ee.forward,ee[e]),style:n,children:(0,_.jsx)(Y.Z,{percent:o,type:"circle",size:"small",stroke:"white",width:20,strokeWidth:2.5,strokeLinecap:"square",orbitStroke:"rgba(255,255,255,0.6)"})})]})})};var ei={container:"container-kvfYQX",entered:"entered-J8BEIY",entering:"entering-KgAMT2",exiting:"exiting-jfjktb",exited:"exited-NOV_dM",unmounted:"unmounted-NF2kkW",loading:"loading-M6LwvI",icon:"icon-_242Yu",rotate:"rotate-WfwsMX",rotation:"rotation-EuDMmY"};let er=e=>{let{loading:t,title:i,toast:r}=e,n=(0,a.useRef)();return(0,a.useEffect)(()=>{t?n.current=r.success({icon:(0,_.jsx)("div",{className:ei.loading,children:(0,_.jsx)("img",{className:c()(ei.icon,ei.rotate),src:(0,T.C)("data:image/png;base64,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",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$J-%lJXRXBxW$$NNWFX%ll%bkJp-lZaNlkzaz$i$nB-$m10WmJ$WnFZW*s1ZW1OdFR-WlpNamwwWTBjNWRWcFhO$EJqZ$RsdFdsZFdhMWx0%m1wa*$%RjZaRmRLZEd*W$$-%mpSMFox$2xkM2Rsa3lPWFJq%npsM$ds-zFNR041T1cxa1-zaHp%RmhD-%Zve$Z-%mlSemxv$2tkc2RWcD$PWEJp-lZKc1p$TTFNR016-%doamJX%XhZM2M5%FE9PQ"})})}),content:i,duration:1e8,showClose:!1}):n.current&&(r.close(n.current),n.current=void 0)},[t]),(0,_.jsx)(G.ZP,{in:t,mountOnEnter:!0,unmountOnExit:!0,timeout:150,children:e=>(0,_.jsx)("div",{className:c()(ei.container,ei[e])})})};var en={container:"container-LwM3r9",content:"content-Ydsu8O",textarea:"textarea-ruJG5c",white:"white-j4Npmi",grey:"grey-g1VtNz",input:"input-h1Ac6h",count:"count-ckbaor",red:"red-zLxYm9","file-list":"file-list-I8ou3c",fileList:"file-list-I8ou3c",item:"item-sfCJID",background:"background-j0PWfa",close:"close-jZI9Mc",icon:"icon-evtwC3",uploading:"uploading-W20qX8",failed:"failed-DTAJ6E","video-overlay":"video-overlay-fb3ryR",videoOverlay:"video-overlay-fb3ryR",adder:"adder-usmXoP","add-icon":"add-icon-CfUpRi",addIcon:"add-icon-CfUpRi","submit-button":"submit-button-FBcvEp",submitButton:"submit-button-FBcvEp",tapable:"tapable-FvJKul",hoverable:"hoverable-AQMoJO",clientSubmitButton:"clientSubmitButton-m3Ormn","bottom-bar":"bottom-bar-MS08ML",bottomBar:"bottom-bar-MS08ML"};let ea=e=>"image"===e.mediaData.mediaType&&e.size>5242880||"video"===e.mediaData.mediaType&&e.size>0x3200000,el=e=>{var t;let{className:i,contentClassName:r,textAreaClassName:n,fileUploadClassName:l,style:o,theme:s="white",onChooseMedia:d,onUploadMedia:u,onSubmit:h,onChange:p,onChangeLogChecker:v,submitButtonClassName:f,submitButtonDisabled:A=!1,textAreaPlaceholderTitle:b,submitButtonTitle:w,logRemindText:y,showFullPageSubmitLoading:x,notAllAssetsFinishedTitle:k,oversizeToastTitle:j,allowedMediaType:S,renderTextArea:R,renderContentChild:F,mobile:H=!1}=e,[X,G]=(0,a.useState)(""),{submitLoading:Q,logChecker:K,setLogChecker:Y,handleUploadLog:ee,preHandleSubmitApi:ei,getTimeoutPromise:el}=L(),eo=(0,m.g1)(),es=(0,a.useRef)(null),ed=U(es),[ec,eu]=(0,a.useState)([]),[eh,em]=(0,a.useState)(!1),ep=J();(0,a.useEffect)(()=>{null==p||p({content:X,choosedMediaList:ec})},[X,ec]);let ev=async e=>{let t=(0,g.ug)(e.base64PreviewImage);return t?await u({type:"file",mimeType:"image/png",mediaType:"image",value:t},ed):null},eg=async()=>{let e=!1;if(!X)return;if(ec.some(e=>e.status!==B.FINISHED)){ed.error(k);return}let t=ec.filter(e=>"image"===e.mediaData.mediaType),i=ec.find(e=>"video"===e.mediaData.mediaType),r=t.map(e=>e.uploaded).filter(e=>!!e);em(!0);let n=i&&await ev(i),a=M().getParser(navigator.userAgent),l=async()=>{var e,t,l,o,s;let d=ei();await h({content:X,image_list:r,video_cover_height:null==n?void 0:n.image_height,video_cover_width:null==n?void 0:n.image_width,video_cover_url:null!==(o=null==n?void 0:n.image_uri)&&void 0!==o?o:"",video_play_url:null!==(s=null==i?void 0:null===(e=i.uploaded)||void 0===e?void 0:e.image_uri)&&void 0!==s?s:"",extra_params:JSON.stringify({is_private_video:1,is_private_image:1,path:location.pathname+location.search,version:String((null===(t=window.gfdatav1)||void 0===t?void 0:t.ver)||"unknown"),ug_url:W.yQ.getItem("flow_web_landing_page_url"),is_samantha_client:"0",os:a.getOSName(),browser:a.getBrowserName(),browser_version:a.getBrowserVersion(),tea_uid:null===(l=window.Tea)||void 0===l?void 0:l.getConfig("user_unique_id"),...d}),multi_image:"1"})};try{await Promise.race([ee(e),el()]),e||(e=!0,await l())}finally{em(!1)}},ef=e=>{eu((0,E.Uy)(t=>{let i=t.findIndex(t=>t.id===e);-1!==i&&t.splice(i,1)}))},eA=()=>{let e=["image"];return ec.filter(e=>"video"===e.mediaData.mediaType).length<1&&e.push("video"),S?e.filter(e=>null==S?void 0:S.includes(e)):e},{run:eb}=(0,I.Z)(async e=>{if(ec.length>=4)return;let t=null!=e?e:ep(),i=eA(),r=!(0,N.Z)(e)&&ec.find(t=>t.id===e);if(r){let{status:e,mediaData:{mediaType:t}}=r;if(e===B.FAILED)i.includes(t)||i.push(t);else throw Error(`Not allow to reupload because it's not failed status: ${e}`,{cause:r})}let n=r||await d({allowedMediaType:i},ed);if(n){if(C(n,i),ea(n)){ed.warning(j);return}eu((0,E.Uy)(i=>{let r=i.find(t=>t.id===e);r?r.status=B.UPLOADING:i.push({...n,id:t,status:B.UPLOADING})}));try{let e=await u(n.mediaData,ed);eu((0,E.Uy)(i=>{let r=i.find(e=>e.id===t);r&&(r.status=B.FINISHED,r.uploaded=e)}))}catch(e){eu((0,E.Uy)(e=>{let i=e.find(e=>e.id===t);i&&(i.status=B.FAILED)}))}}},{leading:!0,trailing:!1,wait:500}),ew={placeholder:b,value:X,onChange:e=>{G(e.slice(0,300))},className:en.input,rows:10,autosize:!0,disabled:eh};return(0,_.jsxs)("div",{"data-testid":"feedback_submit_panel",className:c()(en.container,i),style:o,ref:es,children:[(0,_.jsxs)("div",{className:c()(en.content,r),children:[(0,_.jsxs)("div",{className:c()(en.textarea,en[s],n),children:[null!==(t=null==R?void 0:R(ew))&&void 0!==t?t:(0,_.jsx)($.Z,{...ew}),(0,_.jsxs)("div",{className:en["bottom-bar"],children:[(null==S?void 0:S.length)?(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{className:en["file-list"],children:ec.map(e=>(0,_.jsxs)("div",{"data-testid":"feedback_image",className:c()(en.item,l),children:[(0,_.jsx)(et,{className:en.uploading,isFinished:e.status===B.FINISHED,isEnabled:e.status!==B.FAILED,children:t=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("img",{className:c()(en.background,t),src:(0,T.C)(e.base64PreviewImage,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$J-%lJXRXBxW$$NNWFX%ll%bkJp-lZaNlkzaz$i$nB-$m10WmJ$WnFZW*s1ZW1OdFR-WlpNamwwWTBjNWRWcFhO$EJqZ$RsdFdsZFdhMWx0%m1wa*$%RjZaRmRLZEd*W$$-%mpSMFox$2xkM2RtRlhO$3Rh$0dkM$pFaE9ORmxZ%201a1dFMDk"})}),e.status===B.FAILED&&(0,_.jsx)("div",{className:c()(en.failed,en.tapable,t,{[en.hoverable]:!H}),onClick:()=>{eb(e.id)},children:(0,_.jsx)(z,{className:en.icon})}),e.status===B.FINISHED&&"video"===e.mediaData.mediaType&&(0,_.jsx)("div",{className:c()(en["video-overlay"]),children:(0,_.jsx)(D,{className:en.icon})})]})}),(0,_.jsx)("div",{className:c()(en.close,en.tapable,{[en.hoverable]:!H}),onClick:()=>{ef(e.id)},children:(0,_.jsx)(V,{className:en.icon})})]},e.id))}),(0,_.jsx)("div",{className:c()(en[s]),onClick:()=>eb(),children:(0,_.jsxs)(Z.R,{type:"tertiary",disabled:ec.length>=4||eh,icon:(0,_.jsx)(P.Z,{}),children:[eo("skill_video_input_upload_image")," (",ec.length,"/",4,")"]})})]}):null,(0,_.jsxs)("div",{"data-testid":"feedback_submit_panel_input_count",className:c()(en.count,{[en.red]:X.length>=300}),children:[X.length,"/",300]})]})]}),(0,_.jsx)("div",{children:F})]}),(0,_.jsx)(q,{logChecker:K,logRemindText:y,setLogChecker:e=>{Y(null!=e&&e),null==v||v(null!=e&&e)},children:(0,_.jsx)(()=>(0,_.jsx)(O.P,{"data-testid":"feedback_submit_panel_submit",className:c()(en["submit-button"],f,""),width:"full",loading:Q,onClick:async()=>{x?eg():await eg()},disabled:!X||A,children:w}),{})}),x&&(0,_.jsx)(er,{loading:eh,title:x.submittingToastTitle,toast:ed})]})};var eo=i(949024),es=i(550606),ed=i(694812),ec=i(409316);let eu=e=>(0,_.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...e,children:(0,_.jsx)("path",{fill:"#fff",d:"M3.525 16q-1.21 0-1.87-.613Q1 14.773 1 13.599V6.474q0-1.176.676-1.825.676-.65 1.85-.649h7.524q1.209 0 1.842.649.633.65.633 1.817v7.06q0 1.176-.662 1.825-.654.65-1.863.649zm11.1-3.57V7.62l2.368-2.04q.244-.21.489-.332.252-.13.496-.13.454 0 .734.295Q19 5.71 19 6.2v7.658q0 .491-.288.786-.28.296-.734.296-.244 0-.496-.13a2.7 2.7 0 0 1-.49-.339z"})});var eh=i.p+"static/image/doubao_logo.5604ea40.jpeg",em={itemContent:"itemContent-TIkE6W",avatar:"avatar-NyH8oq",contentInfo:"contentInfo-h5lBu6",contentHeader:"contentHeader-Oyrfld",time:"time-yob2wZ",content:"content-6s60pp",media:"media-hBO5St",item:"item-lfWakZ",image:"image-twQEMZ","video-overlay":"video-overlay-YuCKOM",icon:"icon-SzgvGX"};let ep=e=>10>Number(e)?`0${e}`:e,ev=e=>{if(!e)return;let t=new Date(1e3*Number(e)),i=`${t.getFullYear()}/`,r=`${t.getMonth()+1<10?`0${t.getMonth()+1}`:t.getMonth()+1}/`,n=`${t.getDate()} `,a=`${t.getHours()}`,l=`${t.getMinutes()}`,o=`${t.getSeconds()}`;return`${i+r+n+ep(a)}:${ep(l)}:${ep(o)}`},eg=e=>{let{item:t,userAvatar:i,className:r,style:n,selfUserTitle:a,botUserTitle:l}=e,{content:o,pub_date:s,type:d,image_list:u,video_cover_url:h}=t;return(0,_.jsxs)("div",{"data-testid":"feedback_history_item",className:c()(em.itemContent,r),style:n,children:[(0,_.jsx)("div",{className:em.avatar,children:(0,_.jsx)(ed.Z,{src:(0,T.C)(0===t.type?i:eh,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$J-%lJXRXBxW$$NNWFX%ll%bkJp-lZaNlkzaz$i$nB-$m10WmJ$WnFZW*s1ZW1OdFR-WlpNamwwWTBjNWRWcFhO$EJqZ$RsdFdsZFdhMWx0%m1wa*$%RnZZ$mhPT%dJelNq$k1XR%pvWW0x$2Mwd3l%blpp$0$KMlltM$dk$1JJ$Fha-WJWWnNXa2RL-%ZreWMz%mhXRkpzWWxNNWNHSnR$bXhs%Xp$d1l6Tm9hR050WkR*amR6MDk"}),size:"default"})}),(0,_.jsxs)("div",{className:em.contentInfo,children:[(0,_.jsxs)("div",{className:em.contentHeader,children:[(0,_.jsx)("strong",{children:0===d?a:l}),(0,_.jsx)("div",{className:em.time,children:ev(s)})]}),(0,_.jsx)("div",{className:em.content,children:o}),(0,_.jsxs)("div",{className:em.media,children:[null==u?void 0:u.map((e,t)=>{let{image_url:i}=e;return(0,_.jsx)("div",{className:em.item,children:(0,_.jsx)(ec.ZP,{className:em.image,src:(0,T.C)(i,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$J-%lJXRXBxW$$NNWFX%ll%bkJp-lZaNlkzaz$i$nB-$m10WmJ$WnFZW*s1ZW1OdFR-WlpNamwwWTBjNWRWcFhO$EJqZ$RsdFdsZFdhMWx0%m1wa*$%RnZZ$mhPT%dJelNq$k1XR%pvWW0x$2Mwd3l%blpp$0$KMlltM$dk$1JJ$Fha-WJWWnNXa2RL-%ZreWMz%mhXRkpzWWxNNWNHSnR$bXhs%Xp$d1l6Tm9hR050WkR*amR6MDk"}),preview:!1})},t)}),h&&(0,_.jsxs)("div",{className:em.item,children:[(0,_.jsx)(ec.ZP,{className:em.image,src:(0,T.C)(h,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$J-%lJXRXBxW$$NNWFX%ll%bkJp-lZaNlkzaz$i$nB-$m10WmJ$WnFZW*s1ZW1OdFR-WlpNamwwWTBjNWRWcFhO$EJqZ$RsdFdsZFdhMWx0%m1wa*$%RnZZ$mhPT%dJelNq$k1XR%pvWW0x$2Mwd3l%blpp$0$KMlltM$dk$1JJ$Fha-WJWWnNXa2RL-%ZreWMz%mhXRkpzWWxNNWNHSnR$bXhs%Xp$d1l6Tm9hR050WkR*amR6MDk"}),preview:!1}),(0,_.jsx)("div",{children:(0,_.jsx)("div",{className:em["video-overlay"],children:(0,_.jsx)(eu,{className:em.icon})})})]})]})]})]})};var ef={container:"container-nGimP6",item:"item-aKddM_","bottom-loading":"bottom-loading-ps5s7f","show-scrollbar":"show-scrollbar-BZWgRz",empty:"empty-DWaX8N",emptyHistory:"emptyHistory-jyqmME"};let eA=e=>{let{className:t,emptyClassName:i,style:r,showScrollBar:n=!0,userAvatar:l,onFeedbackListFetch:o,emptyListTitle:s,selfUserTitle:d,botUserTitle:u,forceLoading:h=!1}=e,m=(0,a.useRef)(null),{data:p,loading:v,loadingMore:g,noMore:f}=(0,eo.B)(async e=>{var t,i,r,n,a;let{current:l,pageSize:s}=e,d=s*(l-1)-1;if(-1!==d&&!(null==p?void 0:null===(i=p.list)||void 0===i?void 0:null===(t=i[d])||void 0===t?void 0:t.id))return{list:[],total:null==p?void 0:p.total};let c=await o({max_id:null==p?void 0:null===(n=p.list)||void 0===n?void 0:null===(r=n[d])||void 0===r?void 0:r.id,count:s});return{list:c,total:(null!==(a=null==p?void 0:p.total)&&void 0!==a?a:0)+c.length+1}},{ref:m,initPageSize:20,incrementSize:20});return(0,_.jsx)("div",{"data-testid":"feedback_history_panel",ref:m,className:c()(ef.container,t,{[ef.empty]:!(null==p?void 0:p.list.length),[ef["show-scrollbar"]]:n}),style:r,children:h||v?(0,_.jsx)(es.Z,{size:"middle"}):(0,_.jsx)(_.Fragment,{children:(null==p?void 0:p.list)&&p.list.length>0?(0,_.jsxs)(_.Fragment,{children:[p.list.map(e=>(0,_.jsx)(eg,{className:ef.item,userAvatar:l,item:e,selfUserTitle:d,botUserTitle:u},e.id)),!f&&g&&(0,_.jsx)("div",{className:ef["bottom-loading"],children:(0,_.jsx)(es.Z,{size:"middle"})})]}):(0,_.jsx)("div",{className:c()(ef.emptyHistory,i),children:s})})})};var eb=i(910157),ew=i(607278),ey=i(445863),ex=i(477041),ek=i(524518),ej=i(828652),eS=i(210230);function e_(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let eR=e=>{try{return JSON.stringify(e)}catch(e){return""}};class eT extends Error{constructor(e){super(),e_(this,"code",void 0),e_(this,"extra",void 0),this.code=e.code,this.extra=e.extra}}let eN=e=>{let t={};for(let i of(0,ey.Z)(e)){let r=e[i];(0,ex.Z)(r)||(0,ek.Z)(r)||(0,ej.Z)(r)||(0,eS.Z)(r)?t[i]=r:t[i]=eR(r)||String(r)}return t},eE=async e=>{let{data:t,isPost:i=!1,commonParams:r,logger:n,onPost:a,onGet:l}=e,o=eN({...t,...r}),s={"Content-Type":"application/x-www-form-urlencoded"};try{let e=i?await a({data:o,headers:s}):await l({params:o,headers:s});if("error"===e.message)throw new eT({code:e.err_code,extra:e});return e}catch(e){throw null==n||n.persist.error({eventName:"feedback_request_error",error:e}),e}};var eF=i(318754);let eM=async e=>{let{url:t,data:i,isPost:r=!1,logger:n,aid:a,deviceId:l,appName:o,appkey:s,baseUrl:d="",reqQueryParams:c}=e,u=e=>(0,ew.Z)(d)?d(e):d+e;return eE({data:i,isPost:r,logger:n,commonParams:{aid:a,device_id:l,appName:o,appkey:s},onPost:async e=>{let{params:i,headers:r,data:n}=e,{data:a}=await (0,eF.normalRequest)({method:"POST",url:u(t),data:n,params:{...i||{},...c||{}},headers:r},{overrideConfig:{ignoreResponseInterceptors:!0}});return a},onGet:async e=>{let{params:i,headers:r}=e,{data:n}=await (0,eF.normalRequest)({method:"GET",url:u(t),params:{...i||{},...c||{}},headers:r},{overrideConfig:{ignoreResponseInterceptors:!0}});return n}})},eI=async(e,t)=>{let{channel:i}=t;return eM({url:"/feedback/2/post_message/",data:{...e,channel:i,extra_persistent_params:JSON.stringify({samantha_web:1,...(0,eb.R)(e.extra_persistent_params,{})})},isPost:!0,...t})};var eW={container:"container-qmRnvC",tabs:"tabs-Ogroba",item:"item-UhijaA","feedback-submit-panel":"feedback-submit-panel-OPssiI","feedback-history-panel":"feedback-history-panel-YBntAD",close:"close-OhYJvE",icon:"icon-Rc1KN1","modal-icon":"modal-icon-sjeRam",hoverable:"hoverable-BXCpIq","file-input":"file-input-SAfXBC"};let e$=e=>{let{containerClassName:t,userAvatar:i,userId:r,showFeedbackList:n=!0,getFeedbackList:d,visible:k,onClose:T,showFileList:N=!0,submitButtonDisabled:E,source:F,extraParams:M={},zIndex:I,renderContentChild:W,...$}=e,O=(0,m.g1)(),{logger:Z,aid:P}=$,[C,B]=(0,a.useState)({}),[D,z]=(0,a.useState)(),V=(0,a.useRef)(null),H=(0,a.useRef)(null),[J,U]=(0,a.useState)(S.SUBMIT);(0,p.Z)(()=>{var e;null===(e=H.current)||void 0===e||e.complete()}),(0,a.useEffect)(()=>{U(S.SUBMIT)},[k]);let X=(0,u.j)({userId:r,appId:P,logger:Z,scene:h.cj.FEEDBACK,type:h.kZ.Image}),L=async()=>{if(!V.current)throw Error("File input element is not exist");return H.current&&(H.current.complete(),H.current=null),H.current=new l.x,V.current.value="",V.current.click(),await (0,o.z)(H.current)},q=async e=>{let{allowedMediaType:t}=e;if(!t.length)return!1;z(t),await (0,v.GR)(200);try{let e=await L();if(1!==e.length)return!1;let t=e[0],i=(0,g.$f)(t.type)?await (0,g.VP)(t):t,r=i&&await (0,g.tw)(i);return{base64PreviewImage:null!=r?r:"",mediaData:{type:"file",value:t,mimeType:t.type,mediaType:(0,g.$f)(t.type)?"video":"image"},size:t.size}}catch(e){if(e instanceof s.K)return!1;throw e}},G=async e=>{try{var t;let{feedback_id:i}=await eI({...e,extra_params:JSON.stringify({...JSON.parse(null!==(t=e.extra_params)&&void 0!==t?t:"{}"),...M})},$);Z.persist.success({eventName:"feedback_submit_success",meta:{feedback_id:i,source:F}}),b.pJ.success({content:O("feedback_submit_success"),showClose:!1}),T({type:"success",feedback_id:i})}catch(e){throw b.pJ.error({content:O("feedback_submit_failed"),showClose:!1}),Z.persist.error({eventName:"feedback_submit_error",error:e,meta:{source:F}}),e}},Q=()=>{var e;C.content||(null===(e=C.choosedMediaList)||void 0===e?void 0:e.length)?(U(S.SUBMIT),w.T.confirm({icon:(0,_.jsx)(R,{className:eW["modal-icon"]}),title:O("feedback_leave_confirmation_title"),okText:O("feedback_leave_confirmation_leave"),cancelText:O("feedback_leave_confirmation_cancel"),zIndex:1020,centered:!0,okButtonProps:{type:"danger-primary"},onOk:()=>{T({type:"close"})}})):T({type:"close"})};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(w.T,{zIndex:I,"data-testid":"feedback_modal",className:c()(eW.container,t),visible:k,title:null,footer:null,closable:!1,maskClosable:!1,closeOnEsc:!1,width:540,centered:!0,onCancel:Q,keepDOM:!1,children:[(0,_.jsxs)(f.Z,{className:eW.tabs,type:"line",activeKey:J,onChange:e=>U(e),children:[(0,_.jsx)(A.Z,{className:eW.item,tab:O("submit_feedback"),itemKey:S.SUBMIT,children:(0,_.jsx)(el,{className:eW["feedback-submit-panel"],theme:"grey",onChooseMedia:q,onUploadMedia:X,onSubmit:G,onChange:B,submitButtonDisabled:E,textAreaPlaceholderTitle:O("feedback_placeholder"),submitButtonTitle:O("feedback_submit_button"),oversizeToastTitle:O("feedback_file_large_error"),notAllAssetsFinishedTitle:O("feedback_file_uploading_error"),allowedMediaType:N?["image"]:[],renderContentChild:W,renderTextArea:e=>(0,_.jsx)(y.N,{theme:"default",...e})})}),n&&(0,_.jsx)(A.Z,{className:eW.item,tab:O("feedback_history"),itemKey:S.HISTORY,children:(0,_.jsx)(eA,{className:eW["feedback-history-panel"],emptyListTitle:O("no_feedback_history"),selfUserTitle:O("feedback_history_user"),botUserTitle:O("feedback_platform_cn"),onFeedbackListFetch:async e=>{let{appkey:t}=$,{data:i=[]}=await d({...e,appkey:t});return i},userAvatar:i||"data:image/png;base64,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"})})]}),(0,_.jsx)("div",{className:c()(eW.close,eW.hoverable),onClick:Q,children:(0,_.jsx)(x.Z,{className:eW.icon})})]}),(0,_.jsx)("input",{className:eW["file-input"],multiple:!1,type:"file",ref:V,accept:D&&j(D).join(", "),onChange:e=>{var t,i;let r=[...null!==(i=e.target.files)&&void 0!==i?i:[]];null===(t=H.current)||void 0===t||t.next(r)}})]})}},58070:function(e,t,i){var r,n;i.d(t,{kZ:function(){return o},cj:function(){return d},wV:function(){return s},ZZ:function(){return l}});let a=((r={})[r.Unknown=0]="Unknown",r[r.File=1]="File",r[r.Image=2]="Image",r[r.Audio=3]="Audio",r[r.Video=4]="Video",r[r.URL=5]="URL",r),l=((n={}).COMMON_IMAGE="image/png, image/jpeg, image/jpg",n.ALL_IMAGE="image/*",n.VIDEO="video/*",n.ALL="*",n),o={Image:a.Image,File:a.File,Video:a.Video},s={[a.Image]:"image",[a.File]:"object",[a.Video]:"video"},d={FEEDBACK:"20",BOT_CHAT:"5",AI_SPACE:"19"}},531336:function(e,t,i){i.d(t,{j:function(){return s}});var r=i(7415),n=i(751516);let a=e=>{if("path"===e.type)throw Error("Cannot get Blob from PathMediaData");return"base64"===e.type?(0,r.ug)(e.value):e.value},l=e=>o(e),o=e=>{let t,{userId:i,appId:r,logger:l,scene:o,type:s}=e,d=null;return t=async e=>{(null==d?void 0:d.client)||(d=new n.UploaderService({type:s,scene:o,userId:i,appId:r}));let t=d;return new Promise((i,r)=>{let n=a(e);t.upload(n,{complete:e=>{var t;let{Uri:n,ImageHeight:a=0,ImageWidth:l=0}=null!==(t=e.uploadResult)&&void 0!==t?t:{};if(!n){r(Error("uploaded result is empty"));return}i({image_uri:n,image_height:a,image_width:l})},error:e=>{r(e)}})})},async e=>{try{return await t(e)}catch(e){throw l.persist.error({eventName:`${o}_upload_to_imagex_error`,error:e}),e}}},s=e=>{let t=l(e);return async e=>{if("path"===e.type)throw Error("Not support to upload PathMedia");return t(e)}}},751516:function(e,t,i){i.r(t),i.d(t,{UploaderService:function(){return v}});var r=i(861431),n=i(985871),a=i.n(n),l=i(51679),o=i(811208),s=i(967037),d=i(644367),c=i(329531),u=i.n(c),h=i(58070);function m(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let p=u();class v{get stsToken(){var e,t,i,r,n,a,l,o,s,d;return{CurrentTime:(null===(t=this.authToken)||void 0===t?void 0:null===(e=t.auth)||void 0===e?void 0:e.current_time)||"",ExpiredTime:(null===(r=this.authToken)||void 0===r?void 0:null===(i=r.auth)||void 0===i?void 0:i.expired_time)||"",SessionToken:(null===(a=this.authToken)||void 0===a?void 0:null===(n=a.auth)||void 0===n?void 0:n.session_token)||"",AccessKeyId:(null===(o=this.authToken)||void 0===o?void 0:null===(l=o.auth)||void 0===l?void 0:l.access_key_id)||"",SecretAccessKey:(null===(d=this.authToken)||void 0===d?void 0:null===(s=d.auth)||void 0===s?void 0:s.secret_access_key)||""}}get tokenExpired(){var e,t;if(!this.authToken)return!0;let i=a()(),r=a()(null===(t=this.authToken)||void 0===t?void 0:null===(e=t.auth)||void 0===e?void 0:e.expired_time);return i.isAfter(r)}get localParams(){return{type:this.type,scene:this.scene}}async refreshToken(){let e=(0,s.zQ)({eventName:"uploader_service_refresh_token",meta:this.localParams});try{var t,i,r,n,a,o,d,c;let s=null;if(this.type!==h.kZ.Video){let{data:e}=await l.SI.ResourcePrepareUpload({tenant_id:"5",scene_id:this.scene,resource_type:this.type});s={...e,auth:{...null==e?void 0:e.upload_auth_token,access_key_id:null==e?void 0:null===(t=e.upload_auth_token)||void 0===t?void 0:t.access_key,secret_access_key:null==e?void 0:null===(i=e.upload_auth_token)||void 0===i?void 0:i.secret_key}}}else if(this.type===h.kZ.Video){let{data:e}=await l.mH.GetMediaUploadToken();s={auth:null==e?void 0:e.sts_token,upload_host:null==e?void 0:null===(r=e.upload_info)||void 0===r?void 0:r.video_host,space_name:null==e?void 0:null===(n=e.upload_info)||void 0===n?void 0:n.space_name}}if(s)return this.authToken=s,null===(a=this.client)||void 0===a||a.refreshSTSToken(this.stsToken),this.type===h.kZ.Image?null===(o=this.client)||void 0===o||o.setOption({imageHost:`https://${null==s?void 0:s.upload_host}`,imageConfig:{serviceId:(null==s?void 0:s.service_id)||""}}):this.type===h.kZ.Video?null===(d=this.client)||void 0===d||d.setOption({videoHost:s.upload_host,videoConfig:{spaceName:s.space_name}}):null===(c=this.client)||void 0===c||c.setOption({imageHost:`https://${null==s?void 0:s.upload_host}`,objectConfig:{serviceId:(null==s?void 0:s.service_id)||""}}),e.success(),Promise.resolve(s);return e.error({reason:"GetUploadAuthToken empty",error:Error("GetUploadAuthToken empty")}),Promise.reject(Error("GetUploadAuthToken empty"))}catch(t){return e.error({reason:"GetUploadAuthToken catch",error:t}),Promise.reject(t)}}onComplete(e){if(this.callbackMap[e.key]){var t,i;null===(i=this.callbackMap[e.key])||void 0===i||null===(t=i.complete)||void 0===t||t.call(i,e),delete this.callbackMap[e.key]}}onError(e){if(this.callbackMap[e.key]){var t,i;null===(i=this.callbackMap[e.key])||void 0===i||null===(t=i.error)||void 0===t||t.call(i,e)}}onProgress(e){var t,i;null===(i=this.callbackMap[e.key])||void 0===i||null===(t=i.progress)||void 0===t||t.call(i,e)}async upload(e,t){var i,n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=(0,s.zQ)({eventName:"uploader_service_upload",meta:this.localParams});if(!this.client)return l.error({reason:"client is empty"}),null;if(this.tokenExpired)try{await this.refreshToken()}catch(e){return l.error({reason:"refreshToken error",error:e}),null==t||null===(n=t.error)||void 0===n||n.call(t,{startTime:0,endTime:0,stageStartTime:0,stageEndTime:0,duration:0,fileSize:0,key:"",oid:"",percent:0,signature:"",sliceLength:0,stage:"",status:3,task:null,uploadID:"",type:"error",extra:{error:e,message:"refreshToken error"}}),null}if(!(null===(i=this.authToken)||void 0===i?void 0:i.auth))throw l.error({reason:"authToken is empty"}),Error("authToken is empty");let d={file:e,stsToken:this.stsToken,type:h.wV[this.type],useDirectUpload:this.useDirectUpload,callbackArgs:a.callbackArgs};l.updateMeta({authTokenReady:!0,file_size:e.size,file_name_length:(0,o.G)("name")(e).length});let c=null;try{c=this.type===h.kZ.Image?this.client.addImageFile(d):this.client.addFile(d),l.updateMeta({added:!0})}catch(e){l.error({reason:"catch add file",error:e})}if(!c)return l.error({reason:"fileKey is empty"}),null;this.callbackMap[c]={...t,complete:e=>{var i;l.success({meta:(0,r.Z)(e,["duration","fileType","realtimeSpeed","speed","totalDuration"])}),null===(i=t.complete)||void 0===i||i.call(t,e)},error:e=>{var i,r,n,a;l.error({reason:"upload error",error:null===(i=e.extra)||void 0===i?void 0:i.error,meta:{sdk_error_msg:null===(r=e.extra)||void 0===r?void 0:r.message,sdk_error_code:null===(n=e.extra)||void 0===n?void 0:n.errorCode}}),null===(a=t.error)||void 0===a||a.call(t,e)}};try{l.updateMeta({started:!0}),this.client.start(c)}catch(e){return l.error({reason:"catch start",error:e}),null}return c}pause(e){var t;d.k.persist.log({eventName:"uploader_service_upload_pause",meta:{fileKey:e}}),null===(t=this.client)||void 0===t||t.pause(e)}resume(e){var t;d.k.persist.log({eventName:"uploader_service_upload_resume",meta:{fileKey:e}}),null===(t=this.client)||void 0===t||t.start(e)}getInstance(){return this.client}constructor(e){m(this,"type",void 0),m(this,"scene",void 0),m(this,"authToken",void 0),m(this,"client",void 0),m(this,"useDirectUpload",void 0),m(this,"callbackMap",{});let{type:t,scene:i,userId:r,appId:n,useDirectUpload:a=!1,retryUploadTime:l=2}=e;this.useDirectUpload=a,this.type=t,this.scene=i;let o=(0,s.zQ)({eventName:"uploader_service_init",meta:this.localParams});try{var d,c,u;this.client=new p({appId:n,userId:r,useFileExtension:!0,retryUploadTime:null!=l?l:2}),null===(d=this.client)||void 0===d||d.on("complete",this.onComplete.bind(this)),null===(c=this.client)||void 0===c||c.on("error",this.onError.bind(this)),null===(u=this.client)||void 0===u||u.on("progress",this.onProgress.bind(this)),o.success()}catch(e){o.error({reason:"init error",error:e})}}}}}]);
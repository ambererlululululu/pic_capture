"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["77709"],{832274:function(e,t,o){function i(e){let{ciciFillWWW:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"==typeof location||!e)return e||"";let{origin:o,host:i}=location;if(!e||!/^https?/i.test(o))return e;let n=/(?:[\w-]+\.)*cici\.com/i.test(i),s=/(?:[\w-]+\.)*ciciai\.com/i.test(i);if(!n&&!s)return e;let r=/^\w+\:\/\/(?:[\w-]+\.)*cici\.com/i.test(e),c=/^\w+\:\/\/(?:[\w-]+\.)*ciciai\.com/i.test(e),l=e;return n&&c&&(l=e.replace(/(^\w+\:\/\/(?:[\w-]+\.)*)ciciai\.com(.*)/i,"$1cici.com$2")),s&&r&&(l=e.replace(/(^\w+\:\/\/(?:[\w-]+\.)*)cici\.com(.*)/i,"$1ciciai.com$2")),n&&t&&/^\w+\:\/\/cici\.com/i.test(l)&&(l=l.replace(/(^\w+\:\/\/(?:[\w-]+\.)*)cici\.com(.*)/i,"$1www.cici.com$2")),l}o.d(t,{autoReplaceCiciDomain:function(){return i}}),"undefined"!=typeof location&&location.host&&/^((www|beta|inhouse)\.)?cici\.com/i.test(location.host),"undefined"!=typeof location&&location.host&&(/^((www|beta|inhouse)\.)?cici\.com/i.test(location.host)||["chrome:","doubao:","cici:"].includes(location.protocol))},843174:function(e,t,o){o.d(t,{utf8:function(){return s}});var i=o(519428),n=o(436041);let s={length(e){let t=0,o=0;for(let i=0;i<e.length;++i)(o=e.charCodeAt(i))<128?t+=1:o<2048?t+=2:(64512&o)==55296&&(64512&e.charCodeAt(i+1))==56320?(++i,t+=4):t+=3;return t},read(e,t,o){if(o-t<1)return"";let i="";for(let n=t;n<o;){let t=e[n++];if(t<=127)i+=String.fromCharCode(t);else if(t>=192&&t<224)i+=String.fromCharCode((31&t)<<6|63&e[n++]);else if(t>=224&&t<240)i+=String.fromCharCode((15&t)<<12|(63&e[n++])<<6|63&e[n++]);else if(t>=240){let o=((7&t)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;i+=String.fromCharCode(55296+(o>>10)),i+=String.fromCharCode(56320+(1023&o))}}return i},write(e,t,o){let i,n;let s=o;for(let s=0;s<e.length;++s)(i=e.charCodeAt(s))<128?t[o++]=i:(i<2048?t[o++]=i>>6|192:((64512&i)==55296&&(64512&(n=e.charCodeAt(s+1)))==56320?(i=65536+((1023&i)<<10)+(1023&n),++s,t[o++]=i>>18|240,t[o++]=i>>12&63|128):t[o++]=i>>12|224,t[o++]=i>>6&63|128),t[o++]=63&i|128);return o-s},posCalcRange(e,t){let o=0,s={},r=(0,i.default)(t);r=(0,n.default)(r.sort((e,t)=>e-t));for(let t=0;t<e.length&&(o===r[0]&&(s[r[0]]=t,r.shift()),(64512&e[t].charCodeAt(0))==55296&&(64512&e[t+1].charCodeAt(0))==56320?(o+=this.length(`${e[t]}${e[t+1]}`),t++):o+=this.length(e[t]),r.length);t++);return s},posCalc(e,t){let o="",i=0;for(let n=0;n<e.length;n++)if(o+=e[n],this.length(o)===t){i=n+1;break}return i}}},92941:function(e,t,o){o.r(t),o.d(t,{SocketClient:function(){return v}});var i=o(486677),n=o(154922),s=o(832274),r=o(165482),c=o(843174),l=o(178230),a=o(896855),d=o(808649),u=o(557298);async function f(e){var t;return"undefined"!=typeof window&&window&&(null===(t=document)||void 0===t?void 0:t.body)?new Promise(t=>{let o;try{let i=document.createElement("script");o=setTimeout(()=>{t("jsonp timeout")},1e3);let n=`flowJSONP_${Date.now()}`;window[n]=e=>{document.body.removeChild(i),delete window[n],o&&clearTimeout(o),o=void 0,t(e.msg||"unknown reason")},i.type="text/javascript",i.src=(0,u.filterUrlModule)(`${e.replace(/^ws/,"http")}&jscallback=${n}`,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$N-%lJNamw1$2xNNWFtRkhSakJNTWs1dldWaFJkRmx0%m5w-$$6bDZZakpP-2xwW$$-%lpNbmh3$2xjM%1Fd3p%bmxaZ$RreFpFZHNjMk41TlRCak1rWj$Xak5XZWc9PQ"});try{document.body.appendChild(i)}catch(e){document.body.removeChild(i)}}catch(e){window.flowJSONP=void 0,o&&clearTimeout(o),o=void 0,t("unknown reason")}}):(l.logger.console.info(e),Promise.resolve("unknown reason"))}function h(e,t,o){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}let m={0:"CONNECTING",1:"OPEN",2:"CLOSING",3:"CLOSED"};function w(e,t){let o=null==t?void 0:t(e);return{fpID:e.ws_product_id||"",aID:e.ws_app_id||"",accessKey:e.ws_access_key||"",url:(0,s.autoReplaceCiciDomain)(e.ws_domain||""),service:Number(e.message_service_id)||0,ttwID:e.ttwid,customParams:{version_code:a.VERSION_CODE,device_platform:a.DEVICE_PLATFORM,device_id:e.web_id&&"0"!==e.web_id?e.web_id:"",...o||{}}}}class v extends n.default{_onDocumentFocus(){var e,t,o;(null===(e=this.fws)||void 0===e?void 0:e.readyState)!==(null===(t=this.fws)||void 0===t?void 0:t.OPEN)?this._reconnect("reconnecting on focus"):null===(o=this.fws)||void 0===o||o.pingOnce().catch(()=>{this._record.closeCount=0,this._record.lastDisconnectTime=0,this._reconnect("reconnecting on focus")})}async _reconnect(e){var t,o,i,n,s,r;l.logger.persist.info({namespace:"socket",message:"ws_reconnect",meta:{readyState:null===(t=this.fws)||void 0===t?void 0:t.readyState,reason:e}});let c=await (null===(i=this._options)||void 0===i?void 0:null===(o=i.refreshSocketConfig)||void 0===o?void 0:o.call(i));if(c&&(this._config=c),this._config&&(this._frontierInitOptions=w(this._config,null===(s=this._options)||void 0===s?void 0:s.getSocketParams),this._frontierInitOptions)){null===(r=this.fws)||void 0===r||r.reconnect(this._frontierInitOptions);return}null===(n=this.fws)||void 0===n||n.reconnect()}checkConnection(){var e,t,o;(null===(e=this.fws)||void 0===e?void 0:e.readyState)!==(null===(t=this.fws)||void 0===t?void 0:t.OPEN)?this.reconnect("reconnecting on readyState != OPEN"):null===(o=this.fws)||void 0===o||o.pingOnce().catch(()=>{this._record.closeCount=0,this._record.lastDisconnectTime=0,this.reconnect("reconnecting on ping failure")})}reconnect(e){this._reconnect(e)}init(e){let{config:t,options:o}=e;if(this._options=o,this._config=t,this._frontierInitOptions=w(t,null==o?void 0:o.getSocketParams),this.fws=new d.FWS({...this._frontierInitOptions,maxRetries:10,maxMessageQueueLength:0}),this.fws.onopen=()=>{this._record.hasConnected=!0,this._record.lastDisconnectTime=0,this._record.closeCount=0,l.logger.persist.info({namespace:"socket",eventName:"ws_online",meta:{offline_duration:Date.now()-this._record.lastDisconnectTime,offline_close_count:this._record.closeCount}}),this.emit("open")},this.fws.onmessage=e=>{var t,o,i,n;let s=(0,r.parseJSON)(e.message.payload?c.utf8.read(e.message.payload,0,null===(t=e.message.payload)||void 0===t?void 0:t.byteLength):"",{});(null===(o=this._options)||void 0===o?void 0:o.consoleSocketPacket)&&l.logger.console.info({namespace:"socket",message:"Socket Packet Received",meta:{frontier_event:e,push_event:s}});let a=null===(n=e.message.headers)||void 0===n?void 0:null===(i=n.find(e=>"x_frontier_traceid"===e.key))||void 0===i?void 0:i.value;if(!s||"object"!=typeof s){l.logger.console.warning({namespace:"socket",message:"invalid message",meta:{data:s}});return}this.emit("message",{data:s,trace_id:a})},this.fws.onclose=async e=>{var t,o,i,n,s,r,c,a,d,u,h;this._record.closeCount+=1;let w="";0===this._record.lastDisconnectTime&&(this._record.lastDisconnectTime=Date.now()),this._record.closeCount%3==0&&(w=await f((null===(h=this.fws)||void 0===h?void 0:h.url)||""));let v=Error(`code=${null==e?void 0:e.code}, ${null==e?void 0:e.reason}`);l.logger.persist.error({namespace:"socket",eventName:(null==e?void 0:e.code)===1e3?"ws_normal_closed":"ws_offline",error:v,meta:{config:{ws_domain:null===(t=this._frontierInitOptions)||void 0===t?void 0:t.url,ws_ttwid:null===(o=this._frontierInitOptions)||void 0===o?void 0:o.ttwID,ws_product_id:null===(i=this._frontierInitOptions)||void 0===i?void 0:i.fpID,device_id:null===(n=this._frontierInitOptions)||void 0===n?void 0:n.deviceID,ws_access_key:null===(s=this._frontierInitOptions)||void 0===s?void 0:s.accessKey,ws_app_id:null===(r=this._frontierInitOptions)||void 0===r?void 0:r.aID},has_connected:null===(c=this._record)||void 0===c?void 0:c.hasConnected,offline_count:null===(a=this._record)||void 0===a?void 0:a.closeCount,retry_count:null===(d=this.fws)||void 0===d?void 0:d.retryCount,will_reconnect:null==e?void 0:e.willReconnect,code:null==e?void 0:e.code,ws_detection:w,readyState:m[null===(u=this.fws)||void 0===u?void 0:u.readyState]}}),this.emit("close")},this.fws.onerror=e=>{if(!(null==e?void 0:e.message))return;let t=Error(`code=${null==e?void 0:e.code}, ${null==e?void 0:e.message}`);l.logger.persist.error({namespace:"socket",eventName:"ws_error",error:t,meta:{message:null==e?void 0:e.message,code:null==e?void 0:e.code}}),this.emit("error",e)},"undefined"!=typeof window){var i,n,s,a;null===(n=window)||void 0===n||null===(i=n.removeEventListener)||void 0===i||i.call(n,"focus",this._onDocumentFocus),null===(a=window)||void 0===a||null===(s=a.addEventListener)||void 0===s||s.call(a,"focus",this._onDocumentFocus)}}async send(e,t){if(!this.fws)throw Error("fws send error: expect fws instance");return this.fws.send(e,{headers:(0,i.default)(null==t?void 0:t.headers).map(e=>{let[t,o]=e;return{key:t,value:o}})})}close(){var e;null===(e=this.fws)||void 0===e||e.close()}get readyState(){var e;return null===(e=this.fws)||void 0===e?void 0:e.readyState}destroy(){var e,t,o,i,n,s;this.close(),null===(e=this.fws)||void 0===e||e.off("open"),null===(t=this.fws)||void 0===t||t.off("close"),null===(o=this.fws)||void 0===o||o.off("message"),null===(i=this.fws)||void 0===i||i.off("error"),this.fws&&(this.fws.onmessage=null),this.fws&&(this.fws.onerror=null),this.fws&&(this.fws.onclose=null),this.fws&&(this.fws.onopen=null),"undefined"!=typeof window&&(null===(s=window)||void 0===s||null===(n=s.removeEventListener)||void 0===n||n.call(s,"focus",this._onDocumentFocus))}constructor(){super(),h(this,"fws",void 0),h(this,"_record",{lastDisconnectTime:0,closeCount:0,hasConnected:!1}),h(this,"_config",null),h(this,"_options",null),h(this,"_frontierInitOptions",null),this._onDocumentFocus=this._onDocumentFocus.bind(this)}}},436041:function(e,t,o){var i=o(293831);t.default=function(e){return e&&e.length?(0,i.default)(e):[]}}}]);
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["25880"],{856392:function(e,r,t){t.d(r,{createReportEvent:function(){return i}});var o=t(705033),n=t(178230);let a=e=>{let r,{eventName:t,logger:a=n.logger,meta:i,once:s=!1}=e,l=[],c=0,u=!1,E=()=>{c=Date.now(),a.persist.info({eventName:`${t}_start`,meta:{...g()}})},g=()=>({...i,...u?{event_has_finished:!0}:{}}),p=()=>{if(0!==l.length)return l.reduce((e,r,t)=>{let{pointName:n}=r;return e[n]=r.time-c,(0,o.default)(e,["interval",n],0===t?e[n]:r.time-l[t-1].time),e},{})},d=function(){let{meta:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(!s||!u)&&(a.persist.success({eventName:t,meta:{...g(),success:1,duration:p(),...e}}),u=!0)},m=e=>{let{reason:r,error:o,meta:n}=e;(!s||!u)&&(a.persist.error({eventName:t,error:o||Error(r),meta:{...g(),success:0,reason:r,duration:p(),...n}}),u=!0)};return E(),{name:"ReportEvent",start:E,cancel:()=>{clearTimeout(r),u=!0},success:d,successIfIdle:(e,t,o)=>{clearTimeout(r),r=setTimeout(()=>u?void 0:(d(t),null==o?void 0:o()),e)},error:m,errorIfIdle:(e,t,o)=>{clearTimeout(r),r=setTimeout(()=>u?void 0:(m(t),null==o?void 0:o()),e)},addDurationPoint:function(e){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t=arguments.length>2?arguments[2]:void 0,o=l.find(r=>r.pointName===e);o?(r&&(o.time=Date.now()),t&&(o.time=t)):l.push({pointName:e,time:t||Date.now()}),l.sort((e,r)=>e.time-r.time)},getDuration:p,getDurationTimestamp:()=>{if(0!==l.length)return l.reduce((e,r)=>{let{pointName:t}=r;return e[t]=r.time,e},{})},reportDurationPoint:function(e){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=l.find(r=>r.pointName===e);(!r||null==o||!o.reported)&&(a.persist.info({eventName:`${t}_duration_${e}`,meta:{...g()}}),o&&(o.reported=!0))},getMeta:g,updateMeta:e=>{i={...i,...e}},getFinishStatus:()=>u,setStartTime:e=>{c=e}}},i=e=>{let{logger:r=n.logger,...t}=e;return a({logger:r,...t})}},547709:function(e,r,t){t.d(r,{destoryWorkspaceLoadingToast:function(){return l},showWorkspaceLoadingToast:function(){return c}});var o=t(915299),n=t(48766),a=t(47563),i=t(345660);let s="",l=()=>{s&&a.SamanthaToast.close(s)},c=()=>{s=a.SamanthaToast.info({icon:(0,i.jsx)(n.default,{spinning:!0,size:"middle"}),content:(0,o.getUnreactiveTranslate)("enterprise_status_loading"),duration:0})}},623209:function(e,r,t){var o;t.d(r,{AgeGateCancelError:function(){return l},AgeGateDisplayScene:function(){return i},AgeGateError:function(){return s},handleAge:function(){return a},handleHour:function(){return n},isAgeGateCancelError:function(){return c},isAgeGateError:function(){return u}});let n=e=>e<60?1:Math.floor(e/60),a=e=>{let r=new Date,t=r.getFullYear()-e.getFullYear(),o=r.getMonth()-e.getMonth();return(o<0||0===o&&r.getDate()<e.getDate())&&t--,t},i=((o={})[o.panel=0]="panel",o[o.dialog=1]="dialog",o);class s extends Error{}class l extends Error{}let c=e=>e instanceof l,u=e=>e instanceof s},793905:function(e,r,t){t.d(r,{BlockedByBrowserError:function(){return u},UserCanceledError:function(){return i},WorkspaceUserSelectCancelError:function(){return s},isBlockedByBrowserError:function(){return E},isUserCanceledError:function(){return c},isWorkspaceUserSelectCancelError:function(){return l}});var o=t(178230);function n(e,r,t){var o;return(r="symbol"==typeof(o=function(e,r){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,r||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"))?o:o+"")in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}class a extends Error{constructor(e={}){let{message:r,appleError:t}=e;super(r),this.options=e,n(this,"name","apple_error"),n(this,"appleError",void 0),this.appleError=t}}class i extends a{constructor(...e){super(...e),n(this,"name","user_canceled_error")}}class s extends Error{constructor(...e){super(...e),n(this,"name","workspace_user_select_cancel_error")}}let l=e=>{let r=e instanceof s;return o.logger.persist.log({eventName:"workspace_user_select_cancel_error",meta:{result:r}}),r},c=e=>e instanceof i;class u extends a{constructor(...e){super(...e),n(this,"name","blocked_by_browser_error")}}let E=e=>e instanceof u},21197:function(e,r,t){var o;t.d(r,{BizWebPageErrorBoundaryName:function(){return n}});let n=((o={}).NoAccess="no access",o.NetworkError="network error",o.RegionRestricted="region restricted",o.DoubaoRegionBan="doubao region ban",o.Default="Default",o)},342470:function(e,r,t){t.d(r,{useCheckAuth:function(){return X}});var o=t(557298),n=t(713738),a=t(980825),i=t(776140),s=t(30999),l=t(949349),c=t(369682),u=t(690619),E=t(198660),g=t(715056),p=t(640380),d=t(227587),m=t(856392),_=t(156272),f=t(393454),v=t(996080),h=t(257029),A=t(780464),R=t(105802);let w=()=>{(0,u.getFlowAccount)().passportApi.on("afterLogout",()=>{var e;(0,A.notifyLoginStatusChange)(!1),null===(e=(0,h.resetTeaToken)())||void 0===e||e.then(h.updateTeaGuestUid),(0,c.setStorageNotLogined)(),N(),(0,R.onAccountChange)()})},N=()=>{window[v.PromiseName.Launch]&&(window[v.PromiseName.Launch]=Promise.resolve(null))};var S=t(810364),k=t(385093),T=t(829175),P=t(510534),$=t(274088),y=t(387978),I=t(21197),O=t(72516),b=t(547709),L=t(197343),F=t(690671),W=t(178230),B=t(586382),C=t(793905),U=t(876500),D=t(623209);let x={},G="checkLogin",j="passport_fe_beating_status",H=e=>{let{navigate:r,aid:t,onBeforeAuth:o,onError:a,onNetworkError:i,onPassportError:s,onUnknownError:l,checkLogin:c,appendParams:E}=e,g=(0,n.useRef)(),p=()=>{let e=(0,m.createReportEvent)({eventName:"init_session_beat",meta:{aid:t,hasInstance:!!g.current}});if(t)try{if(!g.current){let o="true"===(0,F.getCookie)(j);o&&(0,F.setCookie)(j,!1,{path:"/",domain:window.location.host}),g.current=new B.SessionBeat({aid:t,type:"web",onDrop:()=>{(0,u.getFlowAccount)().passportApi.logout({navigate:r,reason:"session_beat_drop"})},...E,...x}),e.updateMeta({isCookieSet:+!!o,hasInstance:+!!g.current}),g.current.init(),e.success()}}catch(r){e.error({reason:"olympus_login_session_beat_init_error",error:r})}},d=async()=>(null==o||o(),c?c():(0,u.getFlowAccount)().passportApi.checkLogin()),_=e=>{let t=W.logger.persist.createLoggerWith({ctx:{meta:{loginType:G},error:e}});(0,L.isAxiosError)(e)?(t.error({eventName:"olympus_login_axios_network_error",error:e}),i(e)):(0,C.isWorkspaceUserSelectCancelError)(e)?(0,u.getFlowAccount)().passportApi.logout({navigate:r,reason:"workspace_user_select_close",trackMeta:{error:e}}):(0,D.isAgeGateError)(e)?(W.logger.persist.error({eventName:"olympus_login_age_gate_canceled_error",error:e}),(0,u.getFlowAccount)().passportApi.logout({navigate:r,reason:"age_gate_cancel",trackMeta:{error:e}})):(0,D.isAgeGateCancelError)(e)?(0,u.getFlowAccount)().passportApi.logout({navigate:r,reason:"age_gate_close",trackMeta:{error:e}}):(0,U.isPassportApiError)(e)?(W.logger.persist.error({eventName:"olympus_login_passport_error",error:e,meta:{code:e.code,message:e.message,loginType:G}}),s(e)):(W.logger.persist.error({eventName:"olympus_login_unknown_error",error:e}),l(e))};return async()=>{try{let e=await d();if(p(),!e)throw Error("userInfo is undefined");return W.logger.persist.success({eventName:"olympus_login_success",meta:{loginType:G}}),{isSuccess:!0,userInfo:e}}catch(e){return null==a||a(e),_(e),{isSuccess:!1,error:e instanceof Error?e:Error(String(e))}}}};var M=t(38848),Z=t(223952),z=t(811742),K=t(546833);let V=()=>({}),J=e=>{let{navigatePath:r,loginRoute:t=s.LOGIN_PAGE_ROUTE,authFailedAction:n,ssoOnly:a=!1,skipSso:l=!1,getAuthState:c,onAuthUpdate:E,exemptionNetworkErrorBoundary:g=!1,isHref:d=!1,checkLogin:m}=e,{showBoundary:f}=(0,y.useErrorBoundary)(),v=(0,p.useNavigate)(),{Tea:R}=(0,Z.useRuntimeContext)().Plugins,w=()=>{if(location.pathname!==s.LOGIN_PAGE_ROUTE){let e=t===s.LOGIN_PAGE_ROUTE?(0,_.addHideHomepageUrl)((0,_.addLoginSuccessBackUrl)(s.LOGIN_PAGE_ROUTE,location.pathname,location.search)):(0,_.addLoginSuccessBackUrl)(t,r,location.search);if(W.logger.persist.info({eventName:"olympus_login_to_login",meta:{url:e}}),d){let r=window.location.origin,t=e.startsWith("/")?`${r}${e}`:`${r}/${e}`;window.location.href=(0,o.filterUrlModule)(t,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb*x-$*1wa%0xWjFaR%01ZW1OdFR-WmhSemwyW$ROTmRt%ll%bXhN$jBZeFpF-zRkR0pIT1c1aFZ6%jFaRWhP-%dOdFpERmpkejA5"});return}v(e,{state:{navigatePath:r}})}},N=e=>{var t,o,n;if(!r)return;let a=null===(n=S.default.parseUrl(r))||void 0===n?void 0:null===(o=n.url)||void 0===o?void 0:null===(t=o.replace)||void 0===t?void 0:t.call(o,/\/$/,"");!location.pathname.includes(a)&&v(r)},L=e=>{(0,T.reloadForLanguageChange)();let r=(0,$.getSlardar)();r("context.set","sso_email",(0,z.getSSOEmail)()),e?((0,h.configTeaUserId)(R,e.user_id_str,!1),r("context.set","account_user_id",e.user_id_str),M.FlowLocalStorage.setItem("for_ban_appeal_sec_user_id",e.sec_user_id),(0,O.updateUserInfo)(e).then(()=>{(0,b.destoryWorkspaceLoadingToast)()}),e.first_login_app):W.logger.persist.error({error:Error(),eventName:"olympics_login_success_without_user_info"}),(0,i.reportUetWebRegisterEvent)(e),N(e),(0,A.notifyLoginStatusChange)(!0)},F=V(),B=H({navigate:v,aid:(0,P.getAid)(),checkLogin:m,onNetworkError:()=>{!g&&f(Error(I.BizWebPageErrorBoundaryName.NetworkError))},onPassportError:async()=>{var e;let r=(0,k.default)(n)?await n(location.pathname):n;if("stay"!==r)null===(e=(0,u.getFlowAccount)().passportApi)||void 0===e||e.triggerAfterLogout(),"logout_but_stay"!==r&&w()},onUnknownError:async()=>{"stay"!==((0,k.default)(n)?await n(location.pathname):n)&&w()},onError:()=>{null==E||E(K.AuthState.Failed)},onBeforeAuth:()=>{null==E||E(K.AuthState.InCheckLogin)},appendParams:F});return async()=>{try{null==E||E(K.AuthState.BeforeAll);let e=await B();if(e.isSuccess){let{userInfo:r}=e;L(r)}else(0,O.updateUserInfoLoaded)(),null==E||E(K.AuthState.Failed);return e}finally{(null==c?void 0:c())!==K.AuthState.Failed&&(null==E||E(K.AuthState.Finished))}}},X=e=>{let{navigatePath:r,loginRoute:t=s.LOGIN_PAGE_ROUTE,authFailedAction:v,ssoOnly:h,skipSso:A,getAuthState:R,onAuthUpdate:N,checkLogin:S=f.deprecatedCheckLoginWithPrefetchForInjectScript,exemptionNetworkErrorBoundary:k=!1,isHref:T=!1}=e,P=J({checkLogin:S,navigatePath:r,loginRoute:t,authFailedAction:v,ssoOnly:h,skipSso:A,getAuthState:R,onAuthUpdate:N,exemptionNetworkErrorBoundary:k,isHref:T}),$=(0,p.useNavigate)(),y=(0,d.useLocation)(),I=e=>{if(e.key===c.FLOW_WEB_LOGIN_KEY&&(0,a.default)(e.newValue)&&y.pathname!==s.LOGIN_PAGE_ROUTE&&"stay"!==v){if((0,u.getFlowAccount)().passportApi.triggerAfterLogout(),T){let e=`${window.location.origin}${s.LOGIN_PAGE_ROUTE}`;window.location.href=(0,o.filterUrlModule)(e,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb*x-$*1wa%0xWjFaR%01ZW1OdFR-WmhSemwyW$ROTmRt%ll%bXhN$jA1dldsZE9ja3h-%mp*a1IyZDFaRWhP-%dOdFpERmpkejA5"});return}$((0,_.addLoginSuccessBackUrl)(s.LOGIN_PAGE_ROUTE,y.pathname,y.search))}},O=async()=>{let e=(0,m.createReportEvent)({eventName:"check_auth"});(0,E.subscribeLoginState)(e=>{e===g.LoginState.Failed?(0,c.setStorageNotLogined)():e===g.LoginState.Success&&(0,c.setStorageHasLogined)()});let r=await P();if(!r){e.error({reason:"autoLogin fail"});return}if((r.isSuccess?e.success:e.error)({reason:r.isSuccess?"autoLogin success":"autoLogin fail",error:r.isSuccess?void 0:r.error,meta:{type:"checkLogin"}}),null==r?void 0:r.isSuccess){var t;(0,i.reportOCPC)((null===(t=r.userInfo)||void 0===t?void 0:t.new_user)?"register":"login")}r&&!r.isSuccess&&l.apiErrorEventEmitter.clear(),l.apiErrorEventEmitter.start(),window.addEventListener("storage",I)},b=()=>{window.removeEventListener("storage",I)};(0,n.useEffect)(()=>(w(),O(),()=>{b()}),[])}},36852:function(e,r,t){t.d(r,{useInitApiErrorEvent:function(){return f}});var o=t(713738),n=t(756817),a=t(674853),i=t(30999),s=t(689368),l=t(915299),c=t(387978),u=t(21197),E=t(910214),g=t(949349),p=t(690619),d=t(47563),m=t(640380),_=t(178230);let f=()=>{let{showBoundary:e}=(0,c.useErrorBoundary)(),r=(0,a.useLocationNavigate)(!0),t=(0,l.useTranslateFn)(),f=(0,m.useNavigate)(),v=(0,n.default)((e,t)=>{d.Toast.warning({content:e,showClose:!1}),(0,p.getFlowAccount)().passportApi.logout({navigate:r,reason:"limited",trackMeta:{msg:e,logId:t}})},5e3,{leading:!0}),h=(0,n.default)((r,t)=>{v(r,t),e(Error(u.BizWebPageErrorBoundaryName.RegionRestricted,{cause:{msg:r,logId:t}}))},5e3,{leading:!0}),A=(0,n.default)((r,t)=>{e(Error(u.BizWebPageErrorBoundaryName.DoubaoRegionBan,{cause:{msg:r,logId:t,isNotError:!0}}))},5e3,{leading:!0}),R=()=>{d.Toast.error({content:t("log_in_internet_error"),showClose:!1})},w=async(e,t)=>{await (0,p.getFlowAccount)().passportApi.logout({navigate:r,reason:"unauthorized",trackMeta:{msg:e,logId:t}})},N=(r,t)=>{e(Error(u.BizWebPageErrorBoundaryName.NoAccess,{cause:{msg:r,logId:t}}))},S=()=>{f(i.CHAT_PAGE_ROUTE)},k=()=>{f(i.WAITLIST_ROUTE)},T=(0,n.default)(async(e,t)=>{let o=await (0,s.getChatProtocolPlugin)("AliceChatSocket");null==o||o.drop(),e&&d.Toast.warning({content:e,showClose:!1}),_.logger.persist.log({message:"user banned [banned]",meta:{msg:e}});let n=null;E.safetyApiService.GetBanInfoRequest().then(e=>{var r;return n=(null==e?void 0:null===(r=e.ban_info)||void 0===r?void 0:r.content)||null,e}).finally(()=>{(0,p.getFlowAccount)().passportApi.logout({navigate:r,state:{showAppeal:!0,appealData:n},reason:"user_banned",trackMeta:{msg:e,logId:t}})})},5e3,{leading:!0}),P=(0,n.default)(async(e,t)=>{let o=await (0,s.getChatProtocolPlugin)("AliceChatSocket");null==o||o.drop(),d.Toast.warning(e),_.logger.persist.log({message:"user banned [released\u3001appealing\u3001failed]",meta:{msg:e}}),(0,p.getFlowAccount)().passportApi.logout({navigate:r,reason:"user_banned_other",trackMeta:{msg:e,logId:t}})},5e3,{leading:!0}),$=()=>{g.apiErrorEventEmitter.stop(),g.apiErrorEventEmitter.off(g.APIErrorEvent.NETWORK_ERROR,R),g.apiErrorEventEmitter.on(g.APIErrorEvent.UNAUTHORIZED,w),g.apiErrorEventEmitter.on(g.APIErrorEvent.NOACCESS,N),g.apiErrorEventEmitter.on(g.APIErrorEvent.COUNTRY_RESTRICTED,h),g.apiErrorEventEmitter.on(g.APIErrorEvent.DOUBAO_REGION_BAN,A),g.apiErrorEventEmitter.on(g.APIErrorEvent.SHARK_BLOCK,v),g.apiErrorEventEmitter.on(g.APIErrorEvent.CONVERSATION_INVALID,S),g.apiErrorEventEmitter.on(g.APIErrorEvent.NEED_TO_WAIT,k),g.apiErrorEventEmitter.on(g.APIErrorEvent.USER_BANNED,T),g.apiErrorEventEmitter.on(g.APIErrorEvent.USER_BANNED_OTHER,P),g.apiErrorEventEmitter.start()},y=()=>{g.apiErrorEventEmitter.off(g.APIErrorEvent.NETWORK_ERROR,R),g.apiErrorEventEmitter.off(g.APIErrorEvent.UNAUTHORIZED,w),g.apiErrorEventEmitter.off(g.APIErrorEvent.NOACCESS,N),g.apiErrorEventEmitter.off(g.APIErrorEvent.COUNTRY_RESTRICTED,h),g.apiErrorEventEmitter.off(g.APIErrorEvent.SHARK_BLOCK,v),g.apiErrorEventEmitter.off(g.APIErrorEvent.CONVERSATION_INVALID,S),g.apiErrorEventEmitter.off(g.APIErrorEvent.NEED_TO_WAIT,k),g.apiErrorEventEmitter.off(g.APIErrorEvent.USER_BANNED,T),g.apiErrorEventEmitter.off(g.APIErrorEvent.USER_BANNED_OTHER,P)};(0,o.useEffect)(()=>($(),()=>{y()}),[])}}}]);
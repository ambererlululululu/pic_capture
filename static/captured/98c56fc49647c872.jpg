"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["28371"],{48766:function(e,t,a){a.d(t,{default:function(){return v}});var n=a(713738),r=a(362269),i=a.n(r),l=a(812650),o=a.n(l),s=a(526675),u=a(35834);let d=`${u.BASE_CLASS_PREFIX}-spin`;var c=a(135410);class h extends c.default{static get spinDefaultAdapter(){return{getProp:()=>void 0,setLoading:e=>void 0}}constructor(e){super(Object.assign(Object.assign({},h.spinDefaultAdapter),e))}updateLoadingIfNeedDelay(){let{spinning:e,delay:t}=this._adapter.getProps(),{delay:a}=this._adapter.getStates();if(a){let a=this;this._timer=setTimeout(()=>{a._adapter.setState({loading:e,delay:0})},t)}}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}}var f=a(367727),g=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)0>t.indexOf(n[r])&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]]);return a};let p={PREFIX:d}.PREFIX;class m extends s.default{constructor(e){super(e),this.foundation=new h(this.adapter),this.state={delay:e.delay,loading:!0}}static getDerivedStateFromProps(e){return e.delay?!1===e.spinning?{delay:0,loading:!1}:{delay:e.delay}:{loading:e.spinning}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setLoading:e=>{this.setState({loading:e})}})}componentWillUnmount(){this.foundation.destroy()}renderSpin(){let{indicator:e,tip:t}=this.props,{loading:a}=this.state;return a?n.createElement("div",{className:`${p}-wrapper`},e?n.createElement("div",{className:`${p}-animate`,"x-semi-prop":"indicator"},e):n.createElement(f.default,null),t?n.createElement("div",{"x-semi-prop":"tip"},t):null):null}render(){this.foundation.updateLoadingIfNeedDelay();let e=this.props,{children:t,style:a,wrapperClassName:r,childStyle:i,size:l}=e,s=g(e,["children","style","wrapperClassName","childStyle","size"]),{loading:u}=this.state,d=o()(p,r,{[`${p}-${l}`]:l,[`${p}-block`]:t,[`${p}-hidden`]:!u});return n.createElement("div",Object.assign({className:d,style:a},this.getDataAttr(s)),this.renderSpin(),n.createElement("div",{className:`${p}-children`,style:i,"x-semi-prop":"children"},t))}}m.propTypes={size:i().oneOf(["small","middle","large"]),spinning:i().bool,children:i().node,indicator:i().node,delay:i().number,tip:i().node,wrapperClassName:i().string,childStyle:i().object,style:i().object},m.defaultProps={size:"middle",spinning:!0,children:null,indicator:null,delay:0};var v=m},751825:function(e,t,a){var n=a(92477),r=a(351415),i=a(713738),l=a(580622),o=a(239686),s=a(956811),u=a(425537);t.default=function(e,t){u.default&&(0,s.isFunction)(e);var a,d=(0,l.default)(e),c=null!==(a=null==t?void 0:t.wait)&&void 0!==a?a:1e3,h=(0,i.useMemo)(function(){return(0,r.default)(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.current.apply(d,(0,n.__spreadArray)([],(0,n.__read)(e),!1))},c,t)},[]);return(0,o.default)(function(){h.cancel()}),{run:h,cancel:h.cancel,flush:h.flush}}},326945:function(e,t){t.default={"cookie-banner":"cookie-banner-aGZVKX",cookieBanner:"cookie-banner-aGZVKX","consent-content":"consent-content-fNgPuX",consentContent:"consent-content-fNgPuX","banner-link":"banner-link-WBRWsO",bannerLink:"banner-link-WBRWsO","cookie-footer":"cookie-footer-Jw3rnN",cookieFooter:"cookie-footer-Jw3rnN",button:"button-fouYKv",icon:"icon-lgTKkO",modal:"modal-EXAiU8"}},190665:function(e,t,a){a.d(t,{useMatches:function(){return i}});var n=a(915317),r=a(532430);let i=()=>(0,r.getFromInstance)("useMatches",n.useMatches)()},501108:function(e,t,a){a.d(t,{useParams:function(){return i}});var n=a(915317),r=a(532430);let i=()=>(0,r.getFromInstance)("useParams",n.useParams)()},450309:function(e,t,a){a.d(t,{default:function(){return i}}),a(713738);var n=a(430261),r=a(345660),i=(0,n.IconFactory)((0,r.jsx)(e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"currentColor",d:"M11.834 2.44a1 1 0 0 1 0 2h-4.79a3 3 0 0 0-3 3v9.58a3 3 0 0 0 3 3h9.58a3 3 0 0 0 3-3v-4.79a1 1 0 0 1 2 0v4.79a5 5 0 0 1-5 5h-9.58a5 5 0 0 1-5-5V7.44a5 5 0 0 1 5-5zm4.723.779a3.03 3.03 0 0 1 4.286 0l.109.113a3.03 3.03 0 0 1 0 4.06l-.109.114-6.976 6.976-.25.23a4 4 0 0 1-.553.39l-.299.16-2.49 1.192c-1.703.815-3.482-.965-2.667-2.667l1.192-2.49c.147-.306.332-.592.55-.85l.23-.25zm2.872 1.414a1.03 1.03 0 0 0-1.458 0l-6.977 6.977c-.16.16-.292.346-.39.55l-1.192 2.49 2.489-1.192c.204-.098.392-.23.552-.39l6.976-6.976a1.03 1.03 0 0 0 0-1.46"})}),{}))},340661:function(e,t,a){a.d(t,{default:function(){return i}}),a(713738);var n=a(430261),r=a(345660),i=(0,n.IconFactory)((0,r.jsx)(e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M21 5H11v14h10zM3 5h6v14H3zm0-2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2zm2 4.25a.75.75 0 0 0 0 1.5h2a.75.75 0 0 0 0-1.5zm-.75 3.5A.75.75 0 0 1 5 10h2a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1-.75-.75m.75 2a.75.75 0 0 0 0 1.5h2a.75.75 0 0 0 0-1.5z",clipRule:"evenodd"})}),{}))},626803:function(e,t,a){a.d(t,{useForceUpdate:function(){return r}});var n=a(713738);let r=()=>(0,n.useReducer)(e=>e+1,0)},831744:function(e,t,a){a.d(t,{NoSSR:function(){return l},withNoSSR:function(){return i}});var n=a(713738),r=a(345660);let i=(e,t)=>{var a;let i=a=>{let[i,l]=(0,n.useState)(!1);return(0,n.useEffect)(()=>l(!0),[]),i?(0,r.jsx)(e,{...a}):t?(0,r.jsx)(t,{...a}):null};return i.displayName=null!==(a=e.displayName)&&void 0!==a?a:null==t?void 0:t.displayName,i},l=e=>{let{children:t,fallback:a,defaultMounted:i=!1}=e,[l,o]=(0,n.useState)(i);return(0,n.useEffect)(()=>o(!0),[]),(0,r.jsx)(r.Fragment,{children:l?t:a})}},574885:function(e,t,a){a.d(t,{Sash:function(){return d}});var n=a(713738),r=a(812650),i=a.n(r),l=a(273637),o=a(626803),s=a(751825),u=a(345660);let d=(0,n.forwardRef)(function(e,t){let{orientation:a="horizontal",onDrag:r,onDragEnd:d,className:c,style:h}=e,f=(0,l.default)(r),g=(0,l.default)(d),{current:p}=(0,n.useRef)({dragging:!1,startPos:0,curPos:0}),m=(0,n.useRef)(null),[,v]=(0,o.useForceUpdate)(),{run:S}=(0,s.default)(e=>{if(!p.dragging)return;let t={delta:e-p.curPos,curPos:e,prevPos:p.curPos,startPos:p.startPos};p.curPos=e,f(t)},{leading:!0,trailing:!0,wait:15}),b=(0,n.useCallback)(e=>{S("horizontal"===a?e.clientX:e.clientY)},[a]),w=(0,n.useCallback)(e=>{var t;p.dragging&&(p.dragging=!1,null===(t=m.current)||void 0===t||t.releasePointerCapture(e.pointerId),null==g||g(),v())},[]);return(0,n.useImperativeHandle)(t,()=>({get dragging(){return p.dragging}}),[]),(0,u.jsxs)("div",{className:i()("sash flex flex-col items-center","opacity-0 hover:opacity-60 active:opacity-100 transition-opacity",c),style:{cursor:"horizontal"===a?"col-resize":"row-resize",...(null==p?void 0:p.dragging)?{opacity:1}:{},...h},"data-testid":"chat_route_layout_sash",onPointerDown:e=>{var t;e.preventDefault(),p.dragging=!0,p.curPos=p.startPos="horizontal"===a?e.clientX:e.clientY,null===(t=m.current)||void 0===t||t.setPointerCapture(e.pointerId)},onPointerUp:w,onPointerMove:b,ref:m,children:[(0,u.jsx)("div",{className:"bg-s-color-border-primary w-1 flex-1 min-h-0"}),(0,u.jsx)("div",{className:"w-6 h-20 flex-shrink-0 border-[1px] border-solid border-s-color-border-primary bg-s-color-bg-body rounded-3"}),(0,u.jsx)("div",{className:"bg-s-color-border-primary w-1 flex-1 min-h-0"})]})})},928921:function(e,t,a){a.d(t,{useSashDragging:function(){return s}});var n=a(713738),r=a(698392),i=a(626803),l=a(214492);let o=(e,t)=>Number((100*e/t).toFixed(2)),s=(e,t)=>{var a;let s=(0,n.useRef)(null),u=(0,n.useCallback)(t=>{let{curPos:a}=t;e&&((0,r.getChatStore)("chatViewCanvasStore").setState(t=>{let{sashPctMap:n}=t;return{sashPctMap:{...n,[e]:o(a,document.body.clientWidth)}}}),a<=l.CENTER_MIN_WIDTH&&(0,r.getChatStore)("sidebarStore").setState(()=>({isExpand:!1})))},[e]),[,d]=(0,i.useForceUpdate)();return{sashRef:s,onDrag:u,onDragEnd:t?()=>{t(),d()}:d,dragging:null===(a=s.current)||void 0===a?void 0:a.dragging}}},901034:function(e,t,a){a.d(t,{useFlowWebSashPct:function(){return i}});var n=a(865607),r=a(698392);let i=()=>(0,r.useChatSlice)("chatViewCanvasStore",e=>{let t=e.isExpand?e.matchedCanvasPluginIdentifier:void 0;return t?{sashPct:e.sashPctMap[String(t)],canvasExpandWithPreRender:e.isExpand&&!!e.preRenderNodeId,matchedPluginName:String(t)}:{}},n.shallow)},355890:function(e,t,a){a.d(t,{checkAndPauseMusicOnDeleteConversation:function(){return i},destroyMusicPlayerManager:function(){return r}});let n=()=>window.thirdXgPlayerManager,r=()=>{window.thirdXgPlayerManager&&(window.thirdXgPlayerManager.destroy(),window.thirdXgPlayerManager=null)};function i(e){let t=n();if(!e||!t||!t.playerProperties.isPlaying)return;let{conversationId:a}=t.currentMusicInfo||{};e===a&&t.requestPlayerHandler().pause()}},899607:function(e,t,a){a.d(t,{useExpandButtonVisible:function(){return o},useIsSidebarResponsiveHide:function(){return l}});var n=a(713738),r=a(214492),i=a(480268);let l=e=>{let[t]=(0,n.useState)(()=>"undefined"==typeof document?1/0:document.body.clientWidth),a=(0,i.useMedia)({maxWidth:r.BREAK_POINT_MIN_LEFT-1},t<r.BREAK_POINT_MIN_LEFT),l=(0,i.useMedia)({maxWidth:r.BREAK_POINT_ALL-1},t<r.BREAK_POINT_ALL);return e?l:a},o=e=>{let{isLeftSideExpand:t,isRightBarExpand:a}=e,n=l(a);return{visible:!t||n,isSidebarResponsiveHide:n}}},633161:function(e,t,a){a.d(t,{MobileProvider:function(){return o},mobileContext:function(){return l},useMobile:function(){return s}});var n=a(713738),r=a(436114),i=a(345660);let l=(0,n.createContext)(null),o=e=>{let{children:t}=e,[a,r]=(0,n.useState)(!1),o=(0,n.useMemo)(()=>({mobileSidebarVisible:a,setMobileSidebarVisible:r}),[a,r]);return(0,i.jsx)(l.Provider,{value:o,children:t})},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{optionalProvider:t=!1}=e,a=(0,n.useContext)(l);if(!a){if(t)return{mobileSidebarVisible:!1,setMobileSidebarVisible:r.default};throw Error("Expect mobileContext")}return a}},605657:function(e,t,a){a.d(t,{useLayoutStateWithSkeleton:function(){return s}});var n=a(865607),r=a(57392),i=a(698392),l=a(794267),o=a(64206);let s=e=>{let[t]=(0,o.useSearchParams)(),a=Number(t.get("skeleton_type")),{rightSideExpand:s,rightSideMode:u,rightOpeningRect:d}=(0,i.useChatSlice)("chatViewCanvasStore",e=>{let{isExpand:t,canvasLayoutState:a,openingRect:n,preRenderNodeId:i}=e;return{rightSideExpand:t,rightSideMode:a===r.CanvasLayoutState.FULL_PANEL||a===r.CanvasLayoutState.FULL_IMMERSIVE?"full":a===r.CanvasLayoutState.NARROW_SIDE_PANEL?"narrow":"default",preRenderNodeId:i,rightOpeningRect:i?void 0:n}},n.shallow),c=(0,l.default)(s,{wait:500}),h=(0,l.default)(e,{wait:500});return{leftSideExpand:a%2==1?a>3:e,rightSideExpand:s,rightSideMode:u,leftSideIsStale:h!==e,rightSideIsStale:c!==s,inCanvasSkeleton:a%2==1,rightOpeningRect:d}}},964503:function(e,t,a){a.d(t,{useConfigCanvasAbility:function(){return s},useLinkageChatLayout:function(){return u}});var n=a(713738),r=a(831566),i=a(792642),l=a(297547),o=a(64206);let s=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=arguments.length>1?arguments[1]:void 0,a=(0,i.useIsMediumScreen)();(0,n.useEffect)(()=>{null==t||t(e,!e||!a)},[e,a])},u=e=>{let{leftSideExpand:t,rightSideExpand:a,rightSideMode:i,needAutoExitSkeleton:s,handleLinkageToggleSidebar:u,handleLinkageCloseCanvasPanel:d}=e,[c,h]=(0,o.useSearchParams)();(0,n.useEffect)(()=>{if(s&&c.get("skeleton_type")){let e=()=>{let e=new URLSearchParams(c);e.delete("skeleton_type"),h(e,{replace:!0})},t=setTimeout(e,3e3);return r.DeprecatedChatEvent.on("chat.canvas.entered",e),()=>(r.DeprecatedChatEvent.off("chat.canvas.entered",e),clearTimeout(t))}},[c,s]);let f=(0,l.default)(u);(0,n.useEffect)(()=>{if(t&&a&&("full"===i||("narrow"===i?window.innerWidth<=1080&&window.innerWidth>800:window.innerWidth<=1920&&window.innerWidth>800)))return f(!1),()=>f(!0)},[a,"narrow"===i]),(0,n.useEffect)(()=>{t&&a&&"full"!==i&&window.innerWidth<=1080&&d()},[t])}},211270:function(e,t,a){a.d(t,{useShouldShowCookieBanner:function(){return r}}),a(557298),a(386827);var n=a(713738);a(395847),a(812650),a(326945),a(345660);let r=(e,t)=>{(0,n.useEffect)(()=>{},[])}},227427:function(e,t,a){a.d(t,{CreateNewChatButton:function(){return d}});var n=a(450309),r=a(812650),i=a.n(r),l=a(915299),o=a(643043),s=a(290693),u=a(345660);let d=e=>{let{className:t}=e,a=(0,s.useCreateNewChat)("chat_detail"),r=(0,l.useTranslateFn)(),d=(0,o.useIsNewThreadFromURL)();return(0,u.jsxs)("button",{className:i()("py-6 pl-8 pr-10 rounded-16 flex items-center bg-s-color-bg-body text-s-color-brand-primary-default","whitespace-nowrap",d?"cursor-not-allowed opacity-30":"cursor-pointer hover:text-s-color-text-invert-intact-primary","create-chat-eoxiW5",t),disabled:d,onClick:()=>{d||a()},children:[(0,u.jsx)("div",{className:"size-16 mr-3 flex items-center justify-center",children:(0,u.jsx)(n.default,{className:"text-13"})}),(0,u.jsx)("p",{className:"s-font-xs-strong",children:r("new_chat_button")})]})}},290693:function(e,t,a){a.d(t,{useCreateNewChat:function(){return d}});var n=a(30999),r=a(698392),i=a(971857),l=a(212183),o=a(777422),s=a(366119),u=a(640380);let d=e=>{var t;let a=(0,u.useNavigate)(),{conversationId:d}=null!==(t=(0,i.useMainConversationLink)())&&void 0!==t?t:{},c=(0,l.getBotIdByConversationId)(d,!0),{run:h}=(0,s.default)(()=>{var t,i;return(0,o.trackEvent)("create_new_chat",{click_from:e,conversation_id:d,bot_id:c}),null===(t=(i=(0,r.getChatSlice)("chatGuidanceStore")).setActiveSkillGuidanceIdentifier)||void 0===t||t.call(i),(0,r.getChatStore)("chatViewCoreStore").setState({currentLocalConversationId:""}),a(n.CHAT_PAGE_ROUTE)},{wait:500,trailing:!1,leading:!0});return h}},643043:function(e,t,a){a.d(t,{useIsNewThreadFromURL:function(){return r}});var n=a(190665);let r=()=>{var e;let t=(0,n.useMatches)();return(null==t?void 0:null===(e=t[2])||void 0===e?void 0:e.id)==="main_chat/page"||"/chat/"===window.location.pathname}},790351:function(e,t,a){a.d(t,{useGuestGuidanceAutoCloseSidebar:function(){return u}});var n=a(713738),r=a(746904),i=a(198660),l=a(441259),o=a(38848);let s=()=>{let e=(0,i.useIsLoggedIn)();return{loading:(0,i.useIsLoginLoading)(),value:e?"expanded":"collapsed"}},u=()=>{let{value:e,loading:t}=s(),a=(0,r.useHasExpandInteracted)();(0,n.useEffect)(()=>{t||a||"expanded"===e||(0,l.isSamanthaClient)()||((0,r.setSidebarExpandWithoutInteraction)(!1),o.FlowLocalStorage.setItem("hasExpandInteracted","true"))},[t,e,a])}},185687:function(e,t,a){a.r(t),a.d(t,{default:function(){return tu}});var n,r=a(340661),i=a(474932),l=a(713738),o=a(251913),s=a(816295),u=a(559891);let d=(0,u.withSuspense)((0,s.afterAppInitLazyComponent)(()=>Promise.all([a.e("71862"),a.e("19439"),a.e("24872")]).then(a.bind(a,873318))));var c=a(227427),h=a(500825),f=a(530088),g=a(211270),p=a(30999),m=a(746904),v=a(633161),S=a(953423),b=a(501461),w=a(156272),x=a(103092),_=a(63321),E=a(355890),y=a(368107),P=a(698392);let C=()=>(0,P.useChatSlice)("launcherRawSettingStore",e=>e.launchStatus===y.LaunchStatus.Success);var N=a(643404);let T=(0,u.withSuspense)(l.lazy(()=>(0,N.retryLoadWithFallBack)({fn:async()=>{let{AppealLoginPage:e}=await a.e("40779").then(a.bind(a,804490));return{default:e}}})));var k=a(964503),I=a(605657),R=a(340002);let $=e=>{(0,l.useEffect)(()=>(0,P.getChatStore)("sidebarStore").subscribe(e=>e.hasExpandLinkageChanged?!e.isExpand:e.isExpand,e=>R.default.set("flow_ssr_sidebar_expand",e?"1":"0"),{fireImmediately:!0}),[])};var L=a(870823),j=a(666196),A=a(190665);let W=["main_chat/page","main_chat/(id$)/page","main_chat/new-doc/page","main_chat/url-action/page"],O=["main_chat/(id$)/page","main_chat/page","main_chat/new-doc/page"],F=["main_chat/(id$)/page","main_chat/new-doc/page"],M=()=>{let e=(0,L.useSidebarFromCookie)(),t=(0,m.useSideBarExpanded)();return $(e),t},D=e=>{e?(0,m.getSidebarExpandHasLinkageChanged)()&&((0,m.setSidebarExpand)(!0),(0,m.setSidebarExpandHasLinkageChanged)(!1)):((0,m.setSidebarExpand)(!1),(0,m.setSidebarExpandHasLinkageChanged)(!0),(0,m.setIsOpenTemporarily)(!1))},z=()=>{let e=(0,A.useMatches)(),t=(0,j.useChatService)("chatViewService"),a=e.some(e=>F.includes(e.id)),n=e.some(e=>O.includes(e.id)),r=e.some(e=>W.includes(e.id));(0,k.useConfigCanvasAbility)(r,(e,a)=>{t.canvasEnabled=e,t.canvasAutoOpenEnaled=a});let i=M(),{rightSideExpand:o,rightSideMode:s,leftSideExpand:u,...d}=(0,I.useLayoutStateWithSkeleton)(!!i),c=(0,l.useCallback)(()=>t.closeCanvasPanel(),[t]);return(0,k.useLinkageChatLayout)({leftSideExpand:u,rightSideExpand:o,needAutoExitSkeleton:n,rightSideMode:s,handleLinkageToggleSidebar:D,handleLinkageCloseCanvasPanel:c}),{hasRightSide:a,rightSideExpand:o,rightSideMode:s,leftSideExpand:u,...d}};var U=a(500978),B=a(242167),G=a(899607),H=a(901034),Z=a(928921),X=a(574885),V=a(600662),K=a(48766),J=a(337524),q=a(345660);let Q=()=>(0,q.jsx)(J.SamanthaLayout.MaxWidthLayout,{children:(0,q.jsx)(K.default,{wrapperClassName:"content-loading-o_vnXd"})});var Y=a(206805),ee=a(876853),et=a(426156);let ea=(0,et.withErrorBoundary)((0,u.withSuspense)((0,s.afterAppInitLazyComponent)(async()=>{let{PluginCanvasPanel:e}=await a.e("2317").then(a.bind(a,687897));return{default:e}}),ee.ChatCanvasSkeleton),{FallbackComponent(e){let{resetErrorBoundary:t}=e;return(0,l.useEffect)(()=>{var e;if((null===(e=performance)||void 0===e?void 0:e.now())>6e4)return;let a=setTimeout(()=>t(),5e3);return()=>clearTimeout(a)},[]),(0,q.jsx)(ee.ChatCanvasSkeleton,{})},errorBoundaryName:"canvas_panel_load_error"});var en=a(41650);let er=e=>{let{left:t}=e,a=(0,en.useIsChatPage)(),n=(0,en.useIsChatPageOther)(),r=(0,U.useIsSkillGuidancePage)(),i=(0,en.useIsShareOrChatNewPage)(),l=(0,en.useIsCollectionPage)(),o=C(),s=(0,en.useIsUrlActionPage)(),{sashPct:u,canvasExpandWithPreRender:d,matchedPluginName:c}=(0,H.useFlowWebSashPct)(),{leftSideIsStale:h,rightSideExpand:f,rightSideMode:g,leftSideExpand:p,rightSideIsStale:v,hasRightSide:S,rightOpeningRect:b,inCanvasSkeleton:w}=z(),x=(0,G.useIsSidebarResponsiveHide)(f),_=(0,m.useIsOpenTemporarily)(),E=(f||w)&&"narrow"!==g,{sashRef:y,dragging:P,onDragEnd:N,onDrag:T}=(0,Z.useSashDragging)(c);return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(B.ChatRouteLayoutUI,{maxWidthLayoutTransition:!w&&("narrow"===g?h||v:h&&!v),style:E?{"--chat-bg-color":"var(--s-color-bg-content-base, #f9fafb)","--chat-md-codeblock-bg-color":"var(--s-color-bg-base, #f3f4f6)","--chat-md-codeblock-header-bg-color":"var(--s-color-bg-quaternary, #ebecef)"}:{},leftSideNode:t,leftSideProps:{expand:!x&&p,openTemporarily:_,transition:h||!p},centerNode:o||a||r||i||n||l||s?(0,q.jsx)(V.Outlet,{}):(0,q.jsx)(Q,{}),centerSashPct:u,rightSideNode:S?(0,q.jsxs)(q.Fragment,{children:["narrow"!==g&&!d&&c&&(0,q.jsx)(X.Sash,{ref:y,className:"absolute w-6 -left-3 h-full",style:{zIndex:1002},onDrag:T,onDragEnd:N}),(0,q.jsx)(ea,{containerClassName:P?"pointer-events-none":void 0})]}):null,rightSideProps:{expand:f,mode:g,noTransition:w,openingRect:b}}),w&&(!f||v)&&(0,q.jsx)("div",{className:"fixed inset-0 z-[1003]",children:(0,q.jsx)(Y.ChatSkeletonFull,{showInput:!n})})]})};var ei=a(956801),el=a(453157),eo=a(516655),es=a(387978),eu=a(910321),ed=a(172320),ec=a(227587),eh=a(64206),ef=a(501108),eg=a(640380),ep=a(371273),em=a(271617),ev=a(689368),eS=a(165994),eb=a(178230);async function ew(e,t,a,n){var r;let i=await Promise.allSettled(null!==(r=null==e?void 0:e.map(e=>(0,ev.getLauncherDataLoaderPlugin)(e)))&&void 0!==r?r:[]),l=[];return Promise.all(i.map(async(r,i)=>{try{if((null==r?void 0:r.status)==="fulfilled"){var o,s,u,d,c,h,f;switch((null===(o=r.value)||void 0===o?void 0:o[t])&&l.push(e[i]),t){case"onEnter":await (null===(u=r.value)||void 0===u?void 0:null===(s=u.onEnter)||void 0===s?void 0:s.call(u,a,n));break;case"onEntered":case"onIdle":a.isCurrent&&(null===(c=r.value)||void 0===c||null===(d=c[t])||void 0===d||d.call(c,a));break;case"onExit":null===(f=r.value)||void 0===f||null===(h=f.onExit)||void 0===h||h.call(f,a)}}else eb.logger.persist.error({eventName:"launcher_data_loader_exec_error",error:null==r?void 0:r.reason,meta:{reason:"load_plugin_err",pharse:t}})}catch(e){eb.logger.persist.error({eventName:"launcher_data_loader_exec_error",error:e instanceof Error?e:Error(String(e)),meta:{reason:"exec_plugin_err",pharse:t}})}}))}let ex=(0,l.memo)(e=>{let{matchers:t}=e,a=(0,A.useMatches)(),n=(0,ec.useLocation)(),[r]=(0,eh.useSearchParams)(),i=(0,ef.useParams)(),{showBoundary:o}=(0,es.useErrorBoundary)(),s=(0,eg.useNavigate)(),{pluginIdentifiers:u}=(0,l.useMemo)(()=>({pluginIdentifiers:null==t?void 0:t.map(e=>null==e?void 0:e({matches:a})).filter(e=>!!e),updateAt:(0,eu.safelyGetNow)()}),[a]),{removedItems:d,addedItems:c,leftItems:h}=function(e){let t=(0,eS.default)(e);return(0,l.useMemo)(()=>({prevItems:null!=t?t:[],removedItems:(0,ep.default)(null!=t?t:[],null!=e?e:[]),addedItems:(0,ep.default)(null!=e?e:[],null!=t?t:[]),leftItems:(0,em.default)(null!=e?e:[],null!=t?t:[])}),[e])}(u),f=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e={matches:a,params:i,searchParams:r,location:n,navigate:s,showBoundary:o,isCurrent:!0};return f.current&&(clearTimeout(f.current),f.current=null),ew(d,"onExit",e),Promise.all([Promise.all([ew(h,"onEnter",e,!0),ew(c,"onEnter",e,!1)]).then(async()=>{e.isCurrent&&await ew(c,"onEntered",e)}),(0,ed.timeoutPromise)(3e3)]).then(async()=>{e.isCurrent&&await ew(c,"onIdle",e)}),()=>{e.isCurrent=!1,f.current=setTimeout(()=>{f.current=null,ew(null!=u?u:[],"onExit",e)},50)}},[u]),null},(e,t)=>(0,el.shallow)(e.matchers,t.matchers)||!!(e.matchers.length&&!t.matchers.length)),e_=()=>{let{matcher:e,loading:t}=(0,eo.useLauncherDataLoaderPluginMatcher)();return t?null:(0,q.jsx)(ex,{matchers:e})};var eE=a(777422),ey=a(946576),eP=a(198660),eC=a(239686),eN=a(792642),eT=a(38848),ek=a(424785),eI=a(350169),eR=a(116243),e$=a(924666),eL=a(946537),ej=a(557298);let eA="https://www.doubao.com";var eW=()=>(0,q.jsxs)("div",{style:{display:"none"},children:[(0,q.jsx)("a",{href:(0,ej.filterUrlModule)(`${eA}/download/desktop`,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xsW$FuZE1WMXB6WWpOamRH%XlWbWxNTTA1N$d-az$hb%l5T$hka%1q$nNZbT$TZWt3elRte*ll$EZxWWpJe*QySXlO$3hp-mxKNlREST$N$1JI$m5sT$-zaHdZbTEwZWt4d$$uc*xSMFo1$2pO$2$nPT0"}),children:"\u4E0B\u8F7D\u8C46\u5305\u684C\u9762\u7AEF"}),(0,q.jsx)("a",{href:(0,ej.filterUrlModule)(`${eA}/browser-extension/landing`,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xsW$FuZE1WMXB6WWpOamRH%XlWbWxNTTA1N$d-az$hb%l5T$hka%1q$nNZbT$TZWt3elRte*ll$EZxWWpJe*QySXlO$3hp-mxKNlREST$N$1JI$m5sT$-zaHdZbTEwZWt4d$$uc*xSMFo1$2pO$2$nPT0"}),children:"\u5B89\u88C5\u8C46\u5305AI\u63D2\u4EF6"})]}),eO=a(603076),eF=a(344417),eM=a(915873),eD=a(777765),ez=a(739044);let eU=e=>eb.logger.console.error({error:e}),eB=(0,u.withSuspense)(l.lazy(async()=>{let e=(0,ez.getIsChatPage)(location.pathname);try{if(e){let e=async()=>{let e=e=>(0,eF.default)(e.chat_input_mount)&&((0,eF.default)(e.guidance_group_mount)||(0,eF.default)(e.message_list_mount));e(ei.useTracingStore.getState().duration)||await new Promise(t=>{let a=setTimeout(()=>{eb.logger.persist.info({eventName:"sidebar_lazy",meta:{chat_ready:0}}),t(!0),n()},6e3),n=ei.useTracingStore.subscribe(r=>{e(r.duration)&&(eb.logger.persist.info({eventName:"sidebar_lazy",meta:{chat_ready:1}}),clearTimeout(a),n(),t(!0))})})};await (0,N.retryAsync)(e,4,200)}}catch(e){eb.logger.persist.error({eventName:"sidebar_lazy",error:e})}let{SideBar:t}=await Promise.all([a.e("70991"),a.e("10108"),a.e("77970"),a.e("98483"),a.e("11287")]).then(a.bind(a,802192)).catch(e=>(eU(e),{SideBar:()=>null}));return{default:t}}),()=>{let e=(0,eM.getIsSidebarResponsiveHide)();return(0,q.jsx)(eD.SidebarSkeleton,{className:e?"md:hidden":void 0})},{shouldForwardRef:!1});a(692445);var eG=a(865607),eH=a(256595),eZ=a(589141),eX=a(167655);let eV=()=>{let e=(0,P.useChatSlice)("launcherRawSettingStore",e=>e.launchData,eG.shallow);(0,l.useEffect)(()=>{e&&(0,s.afterAppInitLazyLoad)(()=>a.e("64845").then(a.bind(a,371083)).then(e=>({default:e.handleLaunchData}))).then(t=>{let{default:a}=t;return a(e)}),e&&eZ.chatKit.initData({launchData:e})},[e]);let t=(0,l.useCallback)(()=>(0,eH.getInitialChatServiceContextParams)({launchConfig:null==e?void 0:e.config}),[null==e?void 0:e.config]);return(0,eX.useChatServiceContextProviderValue)(t)};var eK=a(790351),eJ=a(778247);a(962195);var eq=a(466204);let eQ=(0,a(831744).withNoSSR)((0,u.withSuspense)((0,s.afterAppInitLazyComponent)(()=>a.e("59798").then(a.bind(a,609977)))));var eY=a(674414);let e0=()=>!0,e1=eK.useGuestGuidanceAutoCloseSidebar,e3=()=>{let e=(0,eP.useIsGuest)(),t=(0,ec.useLocation)();(0,l.useEffect)(()=>{e&&eT.FlowLocalStorage.setItem("hasEnterGuest","1")},[e]);let{openLoginModal:a}=(0,S.useLoginModal)(),n=e0();(0,l.useEffect)(()=>{let t=(0,eR.getGuestHideHomepageUrl)(),n=(0,eR.hasUGRedirectQuery)();(t||n)&&e&&a({trackInfo:{source:t?b.LoginOpenSource.OTHER:b.LoginOpenSource.UG},onSuccess:m.openSidebarIfDid})},[n,t.search,e])},e2=[eL.UPDATE_PAGE,p.DESKTOP_AI_GUIDANCE_ROUTE],e5=[eL.SETTINGS_PAGE,eL.UPDATE_PAGE,eL.Collection_ROUTE],e6=[eL.PROFILE_PAGE_ROUTE],e7=e=>e2.includes(e),e4=e=>!!(e5.includes(e)||e6.some(t=>e.startsWith(t))),e9=[eL.UPDATE_PAGE,p.DESKTOP_AI_GUIDANCE_ROUTE],e8=e=>{if(e9.includes(e))return!0},te=[],tt=()=>{let e=(0,ec.useLocation)(),t=(0,eg.useNavigate)(),a=C();e3(),(0,eC.default)(()=>{(0,E.destroyMusicPlayerManager)()}),e1(),(0,l.useEffect)(()=>{if(!a)return;let e=Date.now(),t=()=>{Date.now()-e>36e5&&(e=Date.now(),(0,f.pullFeatureConfigFromUserConfigSingle)({reason:ey.UserConfigPullReason.Polling}))};return(0,f.pullFeatureConfigFromUserConfigSingle)(),window.addEventListener("focus",t),()=>window.removeEventListener("focus",t)},[a]);let n=(0,l.useRef)(null);(0,g.useShouldShowCookieBanner)(n,"cookie-banner-without-sidebar-sqyFD3");let o=M(),s=(0,eN.useIsNarrowScreen)(),u=te.some(t=>e.pathname.startsWith(t));return(0,q.jsxs)("div",{className:"container-7axYER",children:[(!!e7(e.pathname)||!s)&&e4(e.pathname)&&(0,q.jsx)(ek.default,{className:"absolute top-14 right-20 z-10 h-36 w-36 rounded-s-radius-xs p-0",icon:(0,q.jsx)(i.default,{className:"p-3 text-22 text-s-color-text-secondary"}),theme:"borderless",onClick:()=>{var a;t((null===(a=e.state)||void 0===a?void 0:a.previous)||eL.CHAT_PAGE_ROUTE)}}),e8(e.pathname)&&(e7(e.pathname)?!o||s:!o)&&(0,q.jsxs)("div",{className:"absolute top-12 left-20 z-10 flex items-center gap-12",children:[(0,q.jsx)(ek.default,{className:"h-36 w-36 rounded-s-radius-xs p-0",theme:"borderless",icon:(0,q.jsx)(r.default,{className:"text-20 text-s-color-text-secondary"}),onClick:()=>{s?(0,m.toggleMobileSidebarExpand)():((0,eE.trackEvent)("sidebar_showstatus_change",{after_click_status:"open"}),(0,m.setSidebarExpand)(!0))}}),(0,q.jsx)(c.CreateNewChatButton,{})]}),(0,q.jsx)(eW,{}),(0,q.jsx)(eQ,{}),(0,q.jsx)(er,{left:u?void 0:(0,q.jsx)(eB,{})}),(0,q.jsx)(d,{}),(0,q.jsx)(eI.DbxDialoger,{})]})},ta=(0,o.default)(()=>{ei.useTracingStore.getState().addDurationPoint("chat_layout_first_render")}),tn=eL.CHAT_PAGE_ROUTE,tr=()=>{var e,t;ta();let a=(0,ec.useLocation)(),n=(0,q.jsx)(v.MobileProvider,{children:(0,q.jsx)(tt,{})});return(null==a?void 0:null===(e=a.state)||void 0===e?void 0:e.showAppeal)?(0,q.jsx)(T,{data:null==a?void 0:null===(t=a.state)||void 0===t?void 0:t.appealData,children:n}):n},ti=(0,w.getLoginSuccessBackUrl)()||tn,tl=[eL.CHAT_PAGE_ROUTE,eL.NEW_THREAD_ROUTE,eL.CHAT_PAGE_WITHOUT_END_SLASH,eL.UPDATE_PAGE,p.URL_ACTION_ROUTE,h.SkillGuidancePageRoute[h.SkillGuidancePageType.Search],h.SkillGuidancePageRoute[h.SkillGuidancePageType.Write],h.SkillGuidancePageRoute[h.SkillGuidancePageType.Image],h.SkillGuidancePageRoute[h.SkillGuidancePageType.Pdf],h.SkillGuidancePageRoute[h.SkillGuidancePageType.Coding],h.SkillGuidancePageRoute[h.SkillGuidancePageType.AiPPT]],to=e=>/\/chat(\/\d*)?$/.test(e),ts=(n=(0,et.withErrorBoundary)((0,eY.withRequireAuthWithFallback)((0,eq.withBotInit)(function(){(0,e$.useInitChatAppLegacy)(),(0,x.usePcMainBotConfigResource)(eJ.webConfigResourceOptions);let e=eV();return ei.useTracingStore.getState().addDurationPoint("chat_view_interactive_v2"),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(e_,{}),(0,q.jsx)(j.ChatServiceContextProvider,{value:e,children:(0,q.jsx)(tr,{})})]})}),{successNavigatePath:ti,authFailedAction:e=>{let t=e.endsWith("/")?e.slice(0,e.length-1):e;return tl.includes(e)||tl.includes(t)||to(e)?"logout_but_stay":"redirect"}}),{errorBoundaryName:"chat_page_error",FallbackComponent:eO.BizWebPageErrorFallback,errorBoundaryScope:et.ErrorBoundaryScopeEnum.Page}),e=>((0,_.logPerfTiming)("chat_layout_wrapper_first_render"),(0,q.jsx)(n,{...e})));(0,_.logPerfTiming)("chat_layout_script_loaded");var tu=ts},371273:function(e,t,a){var n=a(799212),r=a(425865),i=a(158932),l=a(41274),o=(0,i.default)(function(e,t){return(0,l.default)(e)?(0,n.default)(e,(0,r.default)(t,1,l.default,!0)):[]});t.default=o},271617:function(e,t,a){var n=a(972821),r=a(198472),i=a(158932),l=a(896287),o=(0,i.default)(function(e){var t=(0,n.default)(e,l.default);return t.length&&t[0]===e[0]?(0,r.default)(t):[]});t.default=o}}]);
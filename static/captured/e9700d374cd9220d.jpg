(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["98907"],{539404:function(e,t,i){var r;r=function(){"use strict";function t(e,t,i){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){o(r.response,t,i)},r.onerror=function(){},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(i){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof i.g&&i.g.global===i.g?i.g:void 0,s=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,i,s){var o=n.URL||n.webkitURL,l=document.createElement("a");i=i||e.name||"download",l.download=i,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?a(l):r(l.href)?t(e,i,s):a(l,l.target="_blank")):(l.href=o.createObjectURL(e),setTimeout(function(){o.revokeObjectURL(l.href)},4e4),setTimeout(function(){a(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,i,n){if(i=i||e.name||"download","string"!=typeof e){var s;navigator.msSaveOrOpenBlob((void 0===(s=n)?s={autoBom:!1}:"object"!=typeof s&&(s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e),i)}else if(r(e))t(e,i,n);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout(function(){a(o)})}}:function(e,i,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return t(e,i,r);var o="application/octet-stream"===e.type,l=/constructor/i.test(n.HTMLElement)||n.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||o&&l||s)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=d?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},u.readAsDataURL(e)}else{var h=n.URL||n.webkitURL,c=h.createObjectURL(e);a?a.location=c:location.href=c,a=null,setTimeout(function(){h.revokeObjectURL(c)},4e4)}});n.saveAs=o.saveAs=o,e.exports=o},"function"==typeof define&&define.amd?define([],r):r()},57305:function(e,t,i){"use strict";i.d(t,{default:function(){return n}}),i(713738);var r=i(430261),a=i(345660),n=(0,r.IconFactory)((0,a.jsx)(e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"currentColor",d:"M12 23.002q-2.1 0-3.93-.792a10.284 10.284 0 0 1-5.401-5.401 9.9 9.9 0 0 1-.782-3.92q0-1.574.463-3.025A10.15 10.15 0 0 1 5.724 5.02q.402-.35.864-.298a.96.96 0 0 1 .72.39.96.96 0 0 1 .196.813 1.32 1.32 0 0 1-.453.73 8 8 0 0 0-2.664 3.817 7.8 7.8 0 0 0-.37 2.418q0 1.656.617 3.107.617 1.44 1.718 2.541a8.1 8.1 0 0 0 2.54 1.708 7.7 7.7 0 0 0 3.108.627q1.656 0 3.096-.627a8.1 8.1 0 0 0 2.552-1.708 8 8 0 0 0 1.718-2.541 7.85 7.85 0 0 0 .617-3.107q0-1.4-.442-2.644a7.836 7.836 0 0 0-3.138-4.002 7.9 7.9 0 0 0-2.346-1.06v1.214q0 .535-.36.67-.36.133-.761-.155L9.767 4.618q-.318-.227-.329-.546 0-.33.33-.565l3.157-2.295q.412-.308.772-.164.36.133.36.69v1.254a9.8 9.8 0 0 1 3.169 1.245q1.47.895 2.562 2.222a10.1 10.1 0 0 1 1.707 2.963 9.7 9.7 0 0 1 .617 3.467 9.8 9.8 0 0 1-.792 3.92 10.1 10.1 0 0 1-2.17 3.22q-1.39 1.4-3.22 2.18a9.8 9.8 0 0 1-3.93.793m-2.593-6.204q-.36 0-.566-.216-.195-.226-.195-.586v-5.185h-.031l-.844.627q-.092.072-.175.114a.6.6 0 0 1-.195.03.53.53 0 0 1-.391-.154.55.55 0 0 1-.144-.39q0-.35.34-.598l.977-.72q.257-.195.514-.319a1.2 1.2 0 0 1 .576-.133q.412 0 .648.226.237.216.237.628v5.874a.82.82 0 0 1-.206.576q-.195.226-.545.226m4.774.072q-.648 0-1.286-.329-.628-.339-.854-.936a1.3 1.3 0 0 1-.124-.257.8.8 0 0 1-.051-.278q0-.288.165-.453.164-.165.452-.164.422 0 .648.442.135.33.391.556a.97.97 0 0 0 .648.216.87.87 0 0 0 .772-.412q.267-.411.267-.977 0-.525-.257-.936-.256-.422-.771-.422a.9.9 0 0 0-.494.134q-.205.133-.37.34a1 1 0 0 1-.289.267.76.76 0 0 1-.38.082q-.36 0-.535-.237a.9.9 0 0 1-.154-.586l.174-2.716q.052-.823.823-.823h2.788q.587 0 .587.607a.59.59 0 0 1-.165.432.55.55 0 0 1-.422.165H13.39l-.155 2.057h.041q.196-.381.566-.586.37-.206.844-.206.946 0 1.45.71.515.71.515 1.666 0 1.153-.659 1.904-.658.74-1.81.74"})}),{}))},476698:function(e,t,i){"use strict";i.d(t,{default:function(){return n}}),i(713738);var r=i(430261),a=i(345660),n=(0,r.IconFactory)((0,a.jsx)(e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"currentColor",d:"M19.207 12.707a1 1 0 0 0-1.414-1.414L13 16.086V2a1 1 0 1 0-2 0v14.086l-4.793-4.793a1 1 0 0 0-1.414 1.414l6.5 6.5c.195.195.45.293.706.293H5a1 1 0 1 0 0 2h14a1 1 0 1 0 0-2h-6.999a1 1 0 0 0 .706-.293z"})}),{}))},590677:function(e,t,i){"use strict";i.d(t,{default:function(){return n}}),i(713738);var r=i(430261),a=i(345660),n=(0,r.IconFactory)((0,a.jsx)(e=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:[(0,a.jsx)("path",{fill:"currentColor",d:"M10.303 1.047q.35-.144.771.164l3.159 2.294q.328.237.319.566 0 .32-.32.546L11.065 6.91q-.411.288-.761.154t-.35-.669V5.182a7.9 7.9 0 0 0-2.366 1.06 7.92 7.92 0 0 0-3.128 4.002 7.8 7.8 0 0 0-.442 2.644q0 1.656.617 3.107.617 1.44 1.718 2.541a8.1 8.1 0 0 0 2.541 1.708A7.7 7.7 0 0 0 12 20.87a7.7 7.7 0 0 0 3.097-.627 8.1 8.1 0 0 0 2.551-1.708 8 8 0 0 0 1.718-2.541 7.9 7.9 0 0 0 .618-3.107 7.6 7.6 0 0 0-.381-2.418 7.7 7.7 0 0 0-1.06-2.119 8 8 0 0 0-1.605-1.697q-.36-.31-.452-.73a1 1 0 0 1 .206-.814.98.98 0 0 1 .72-.39q.452-.052.864.298a10 10 0 0 1 2.037 2.17 9.8 9.8 0 0 1 1.327 2.675q.473 1.451.473 3.025a9.8 9.8 0 0 1-.792 3.92 10.1 10.1 0 0 1-2.17 3.22q-1.39 1.399-3.22 2.18a9.8 9.8 0 0 1-3.93.793q-2.1 0-3.93-.792a10.284 10.284 0 0 1-5.401-5.401 9.9 9.9 0 0 1-.784-3.92q.001-1.831.608-3.467a10.4 10.4 0 0 1 1.708-2.963 10.3 10.3 0 0 1 2.562-2.222A9.9 9.9 0 0 1 9.953 2.99V1.736q0-.555.35-.69"}),(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M15.257 9.26q.957.001 1.523.566.576.555.823 1.44a6.6 6.6 0 0 1 .257 1.852 6.7 6.7 0 0 1-.257 1.852q-.247.885-.823 1.45-.566.567-1.523.567-.956 0-1.532-.566-.567-.566-.823-1.45a6.9 6.9 0 0 1-.247-1.853q0-.966.247-1.841.256-.885.823-1.45.566-.567 1.532-.567m0 1.142q-.39 0-.648.36-.257.351-.39.957a7 7 0 0 0-.124 1.4q0 .78.123 1.399.135.617.391.977.258.35.648.35.391 0 .649-.35.267-.36.39-.977.135-.618.134-1.4 0-.781-.133-1.388-.124-.617-.392-.968-.256-.36-.648-.36",clipRule:"evenodd"}),(0,a.jsx)("path",{fill:"currentColor",d:"M9.023 9.291q.987 0 1.667.515.69.504.689 1.46 0 .629-.37 1.101-.36.474-.998.618v.02q.659.062 1.131.504.484.432.484 1.266 0 1.038-.751 1.625-.75.576-1.831.576-.772 0-1.492-.36t-.906-1.08a1.2 1.2 0 0 1-.061-.37q0-.288.164-.453.175-.165.474-.165a.56.56 0 0 1 .36.124q.165.113.257.319.134.39.432.617t.792.226q.514 0 .823-.308.32-.308.319-.803 0-.627-.37-.895-.37-.277-.957-.277H8.61a.62.62 0 0 1-.4-.124q-.145-.134-.145-.38 0-.237.134-.381.144-.144.411-.144h.268q.514 0 .833-.288.33-.288.33-.813 0-.464-.278-.74-.268-.279-.73-.279-.412 0-.68.206-.267.206-.401.638a.7.7 0 0 1-.237.34.68.68 0 0 1-.411.113q-.298 0-.443-.165a.66.66 0 0 1-.133-.411q0-.195.04-.35.156-.66.793-1.07a2.64 2.64 0 0 1 1.46-.412"})]}),{}))},532558:function(e,t,i){"use strict";i.d(t,{default:function(){return n}}),i(713738);var r=i(430261),a=i(345660),n=(0,r.IconFactory)((0,a.jsx)(e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 22c4.035 0 7.513-2.39 9.093-5.832l-1.819-.834A8.001 8.001 0 0 1 4 12a8 8 0 0 1 14.245-5H16a1 1 0 1 0 0 2h4.5a1 1 0 0 0 1-1V3.5a1 1 0 1 0-2 0v1.885A9.98 9.98 0 0 0 12 2C6.477 2 2 6.477 2 12s4.477 10 10 10",clipRule:"evenodd"})}),{}))},955977:function(e,t,i){"use strict";i.d(t,{downloadByBytes:function(){return d},downloadFileByLink:function(){return l},downloadFileByUrl:function(){return o},downloadImageByUrl:function(){return s},downloadVideoByUrl:function(){return u}});var r=i(557298),a=i(539404),n=i.n(a);let s=async(e,t,i,r,a,s,o)=>{if(e)try{null==o||o();let l=await fetch(e).then(e=>{if(!e.ok)throw Error(`download_fail,status\u{FF1A}${e.status}`);return e.blob()}).catch(e=>{null==a||a(e)});l||null==a||a(Error("download_fail_without_blob"));let d=e.split("?")[0],u=d.substring(d.lastIndexOf(".")+1),h=`${t||Date.now()}.${i&&"image"===u?i:u}`;null==s||s(),n().saveAs(l||e,h),null==r||r()}catch(e){null==a||a(e)}},o=async(e,t)=>{if(!e)return;let i=await fetch(e).then(e=>e.blob()).catch(e=>{});n().saveAs(i||e,t)},l=e=>{if(!e)return;let t=document.createElement("iframe");t.style.display="none",t.style.height="0px",t.src=(0,r.filterUrlModule)(e,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$J-%lJXRXBxW$$NNWFWbFl%bXhNTTFZd1lWZDRla3d6$*5sWm$%bHJZak5rZFdKSE9Xa*FRel$3WXpKR2$Wb3pWbm89"}),document.body.appendChild(t),t.onload=()=>{t.remove()}},d=e=>{let{bytes:t,fileName:i,mimeType:a}=e,n=new Blob([t],{type:a}),s=document.createElement("a");s.href=(0,r.filterUrlModule)(window.URL.createObjectURL(n),null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$J-%lJXRXBxW$$NNWFWbFl%bXhNTTFZd1lWZDRla3d6$*5sWm$%bHJZak5rZFdKSE9Xa*FRel$3WXpKR2$Wb3pWbm89"}),s.download=i,s.click()},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"video";if(e)return fetch(e).then(e=>e.blob()).then(e=>{let i=new File([e],t,{type:"video/mp4"});n().saveAs(i)}).catch(e=>{})}},366959:function(e,t,i){"use strict";var r,a;i.d(t,{ContentType:function(){return n},Protocol:function(){return s}});let n=((r={})[r.Unknown=0]="Unknown",r[r.Podcast=1]="Podcast",r[r.Story=2]="Story",r[r.DeepResearch=3]="DeepResearch",r[r.File=4]="File",r[r.Message=5]="Message",r[r.Link=6]="Link",r[r.UserPrompt=7]="UserPrompt",r),s=((a={})[a.Unknown=0]="Unknown",a[a.Stream=1]="Stream",a[a.Normal=2]="Normal",a)},904629:function(e,t,i){"use strict";i.d(t,{getAIPodcastReplyTextContent:function(){return c},isAIPodcastMessage:function(){return l},isAIPodcastMessageGenerated:function(){return h}});var r=i(226982),a=i(778816),n=i(458524),s=i(366959),o=i(292335);let l=e=>{var t,i;return(null==e?void 0:e.content_type)===r.ContentType.SamanthaAiPodcastOutput||(null==e?void 0:e.content_type)===n.ContentType.Widget&&(null===(t=e.content_obj)||void 0===t?void 0:t.applet_id)===a.FpaBizAppletId.Podcast&&(null===(i=e.content_obj)||void 0===i?void 0:i.widget_id)===a.FPAPodcastWidgetId.AIPodcast},d=e=>{if(!l(e))return;let t=null==e?void 0:e.content_obj,i=o.SafeJson.parse(null==t?void 0:t.widget_data);return o.SafeJson.parse(null==i?void 0:i.data)},u=e=>{var t,i,r;let a=null==e?void 0:null===(i=e.episodeList)||void 0===i?void 0:null===(t=i.episodes)||void 0===t?void 0:t[0];return(null==a?void 0:null===(r=a.meta)||void 0===r?void 0:r.protocol)===s.Protocol.Normal},h=e=>u(d(e)),c=e=>{let t=d(e);return u(t)?null==t?void 0:t.waiting_reply:void 0}},60795:function(e,t,i){"use strict";i.d(t,{EventStreamContentType:function(){return a},LastEventId:function(){return r}});let r="last-event-id",a="text/event-stream"},292615:function(e,t,i){"use strict";i.d(t,{createFetchStream:function(){return m}});var r=i(605173),a=i(678669),n=i(154922),s={CONNECTING:0,OPEN:1,CLOSED:2},o=i(843174);function l(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let d={decode:e=>e?o.utf8.read(e,0,e.byteLength):""};class u{feed(e){this._append(e),this._readLineLoop()}_new(){return{data:void 0,event:void 0,id:void 0,retry:void 0}}_readLineLoop(){let e=this._buffer.length;if(e)for(-1!==this._line.end&&(this._line.start=0);this._pos<e&&(this._line.end=-1,this._readLine(),-1!==this._line.end);)this._readField(this._buffer.subarray(this._line.start,this._line.end)),this._line.start=this._pos,this._fieldLen=-1,0!==this._line.start&&(this._buffer=this._buffer.subarray(this._line.start),this._pos-=this._line.start,this._line.start=this._pos)}_readLine(){let e=this._buffer.length;for(;this._pos<e&&-1===this._line.end;){switch(this._buffer[this._pos]){case 58:-1===this._fieldLen&&(this._fieldLen=this._pos-this._line.start);break;case 13:this._line.end=this._pos,this._skipTrailingNewLine();break;case 10:this._line.end=this._pos}this._pos+=1}}_skipTrailingNewLine(){10===this._buffer[this._pos+1]&&this._pos++}_readField(e){if(0===e.length&&(this._onMessage(this._message),this._message=this._new()),-1===this._fieldLen){let t=this._decoder.decode(e);this._writeField(t,"");return}if(this._fieldLen===e.length-1){let t=this._decoder.decode(e.subarray(0,this._fieldLen));this._writeField(t,"");return}if(this._fieldLen){let t=this._decoder.decode(e.subarray(0,this._fieldLen)),i=this._fieldLen+1;32===e[this._fieldLen+1]&&(i+=1);let r=this._decoder.decode(e.subarray(i));this._writeField(t,r);return}}_writeField(e,t){switch(e){case"data":void 0!==this._message.data?this._message.data=`${this._message.data}
${t}`:this._message.data=t;break;case"event":this._message.event=t;break;case"id":this._message.id=t;break;case"retry":this._message.retry=function(e){let t=Number(e);if(!Number.isNaN(t))return t}(t)}}_append(e){let t=this._buffer.length,i=new Uint8Array(t+e.length);i.set(this._buffer),i.set(e,t),this._buffer=i}constructor(e,t=d){this._onMessage=e,this._decoder=t,l(this,"_buffer",new Uint8Array),l(this,"_pos",void 0),l(this,"_fieldLen",void 0),l(this,"_line",void 0),l(this,"_message",void 0),this._message=this._new(),this._line={start:0,end:-1},this._fieldLen=-1,this._pos=0,this.feed=this.feed.bind(this)}}async function h(e,t){let i;let r=e.getReader(),a=new u(t);for(;!(i=await r.read()).done;)a.feed(i.value)}var c=i(60795);function p(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let f=class{async _startFetch(){try{var e,t;this._readyState=s.CONNECTING;let i=new AbortController,{headers:n}=this._requestOptions;n instanceof Headers&&this._lastEventId?n.set(c.LastEventId,String(this._lastEventId)):n=(0,r.default)(n)?[...n,[c.LastEventId,String(this._lastEventId)]]:{...n,[c.LastEventId]:String(this._lastEventId)},this._fetchInstance=fetch(this._input,{...(0,a.default)(this._requestOptions,"openInterceptor"),headers:n,signal:i.signal}),this._abortController=i;let o=await this._fetchInstance;await (null===(e=(t=this._requestOptions).openInterceptor)||void 0===e?void 0:e.call(t,o)),this._readyState=s.OPEN,await this._onOpen(o)}catch(e){this._onError(e)}}async _onOpen(e){let t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(c.EventStreamContentType)))throw Error("Invalid Content-Type");if(!(null==e?void 0:e.ok)||!(null==e?void 0:e.body))throw Error("Invalid Response");this._emitter.emit("open",e),await h(e.body,this._onMessage.bind(this)),this._emitter.emit("close","done")}_onError(e){this._fetchInstance=void 0,this._readyState=s.CLOSED,this._emitter.emit("error",e)}_onMessage(e){this._lastEventId=Number(e.id),this._emitter.emit("message",e)}get lastEventId(){return this._lastEventId}get isAborted(){var e;return!!(null===(e=this._abortController)||void 0===e?void 0:e.signal.aborted)}get abortReason(){var e;return null===(e=this._abortController)||void 0===e?void 0:e.signal.reason}get readyState(){return this._readyState}start(){!this._fetchInstance&&this._startFetch()}on(e,t,i){this._emitter.on(e,t,i)}off(e,t,i,r){this._emitter.off(e,t,i,r)}cancel(e){var t;null===(t=this._abortController)||void 0===t||t.abort(e),this._fetchInstance=void 0}constructor(e,t){this._input=e,this._requestOptions=t,p(this,"CONNECTING",s.CONNECTING),p(this,"OPEN",s.OPEN),p(this,"CLOSED",s.CLOSED),p(this,"_emitter",void 0),p(this,"_readyState",s.CLOSED),p(this,"_lastEventId",void 0),p(this,"_fetchInstance",void 0),p(this,"_abortController",void 0),this._emitter=new n.default,this._startFetch()}},m=(e,t)=>{let i=new f(e,(0,a.default)(t,["onClose","onOpen","onError","onMessage"]));return t.onOpen&&i.on("open",t.onOpen),t.onClose&&i.on("close",t.onClose),t.onMessage&&i.on("message",t.onMessage),t.onError&&i.on("error",t.onError),i}},416973:function(e,t,i){"use strict";i.d(t,{PodcastContent:function(){return ez}});var r,a,n=i(713738),s=i(953423),o=i(501461),l=i(698392),d=i(212183),u=i(334312),h=i(198660),c=i(273637),p=i(761515),f=i(572965),m=i(865607),v=i(321647),g=i(913821),y=i(351415),b=i(746479),_=i(955977),w=i(292335),P=i(178230);let S=((r={})[r.NotPlayed=0]="NotPlayed",r[r.Playing=1]="Playing",r[r.Paused=2]="Paused",r[r.Finished=3]="Finished",r[r.Failed=4]="Failed",r[r.Loading=5]="Loading",r);var x=i(810364);function E(e){if(!e)return!1;try{let t=x.default.parseUrl(e).query,i=t["x-orig-expires"],r=t["x-expires"],a=i||r;if(!a)return!1;let n=parseInt(a,10);if(isNaN(n))return!1;let s=n<1e10?1e3*n:n,o=Date.now();if(o>=s||s-o<432e5)return!0;return!1}catch(e){return!1}}let C=e=>{let{podcast_cover_thumbnail:t,playback_model:i}=(null==e?void 0:e.meta)||{};return!!E(t)||E(null==i?void 0:i.audio_link)};function j(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class k{start(){!this.isRunning&&(this.isRunning=!0,this.retryCount=0,this.pollCount=0,this.startTime=Date.now(),this.executePolling())}cancel(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.isRunning=!1}get interval(){return this.intervalFn(this)}executePolling(){if(this.isRunning&&!this.isFetching){if(this.getElapsedTime()>=this.maxPollingTime&&this.checkPollingFail()){var e;null===(e=this.onRejectCallback)||void 0===e||e.call(this,Error("Max polling time exceeded")),this.cancel();return}this.pollCount++,this.isFetching=!0,this.fetchFn().then(e=>{this.retryCount=0,this.onResolveCallback&&this.onResolveCallback(e),this.scheduleNextPoll()}).catch(e=>{if(this.retryCount++,this.retryCount>=this.maxRetries){this.onRejectCallback&&this.onRejectCallback(e),this.cancel();return}this.scheduleNextPoll()}).finally(()=>{this.isFetching=!1})}}scheduleNextPoll(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.isRunning&&(this.timer=setTimeout(()=>{this.executePolling()},this.interval))}getRetryCount(){return this.retryCount}getElapsedTime(){return(Date.now()-this.startTime)/1e3}getPollCount(){return this.pollCount}constructor(e){var t,i,r,a;j(this,"fetchFn",void 0),j(this,"maxRetries",void 0),j(this,"retryCount",0),j(this,"pollCount",0),j(this,"intervalFn",void 0),j(this,"timer",null),j(this,"isRunning",!1),j(this,"onResolveCallback",void 0),j(this,"onRejectCallback",void 0),j(this,"startTime",0),j(this,"maxPollingTime",30),j(this,"isFetching",!1),j(this,"checkPollingFail",void 0),j(this,"forceFetch",async e=>this.fetchFn(!0,e)),this.fetchFn=e.fetchFn,this.maxRetries=null!==(t=e.maxRetries)&&void 0!==t?t:2,this.intervalFn=e.interval,this.onResolveCallback=null!==(i=e.onResolve)&&void 0!==i?i:null,this.onRejectCallback=null!==(r=e.onReject)&&void 0!==r?r:null,this.checkPollingFail=null!==(a=e.checkPollingFail)&&void 0!==a?a:()=>!1}}var L=i(495635),R=i(797840);async function T(e,t){try{var i,r;let a;try{a=null===(r=R.useFlowAccountStore.getState().userInfo)||void 0===r?void 0:r.user_id_str}catch(e){}let n={scene:"FPA_Podcast",payload:JSON.stringify({api_name:e,params:JSON.stringify(t)})},{data:s}=await (0,L.normalRequest)({method:"POST",url:"/api/doubao/do_action_v2",data:n,params:{uid:a}},{overrideConfig:{ignoreResponseInterceptors:!0}});if((null==s?void 0:s.code)!==0||!(null===(i=s.data)||void 0===i?void 0:i.resp)||!s.data.success)throw Error(`ai podcast request failed: 
 ${JSON.stringify(s)}`);return JSON.parse(s.data.resp)}catch(e){throw Error(e)}}let N=e=>T("GetGenPodcastDetail",e),B=e=>T("ReportMsgIDByEpisodeID",e),F=e=>T("GetGenPodcastVideoUrl",e),$=e=>10>e.getPollCount()?1e3:5e3,M=e=>{let t=new k({fetchFn:async(i,r)=>{let{getIsGenerated:a,updateState:n,getPodcast:s,handleSwitchPlayer:o}=e(),{podcast:l}=e();if(!l)return;let d=await N({id:l.id,...r&&{referer:location.href}});if(a()&&!i){t.cancel();return}let u=d.episode,h=s();(0,f.checkUpdatePodcastEnable)(h,u)&&(n(e=>{e.localPodcast=u}),a()&&(o(),t.cancel()))},interval:$,checkPollingFail:()=>{let{getIsLoading:t}=e();return t()},onReject:()=>{let{updateState:t,getIsLoading:i}=e();i()&&t(e=>{e.pollingError=!0})}});return t};var I=i(154922),O=i(292615);let A=e=>{let t=new URLSearchParams;return Object.keys(e).forEach(i=>{let r=e[i];t.append(i,String(r))}),t.toString()};function W(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class D{constructor(e){var t=this;W(this,"options",void 0),W(this,"sseInstance",void 0),W(this,"fetchData",async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((i,r)=>{let{getCommonParams:a,onOpen:n,onError:s,onMessage:o,onClose:l}=t.options,d=A({...e,gen_type:1,encode_type:"text/event-stream",...null==a?void 0:a()});t.sseInstance=(0,O.createFetchStream)(`/chat/podcast/chunk?${d}`,{method:"POST",headers:[["content-type","application/json"]],credentials:"same-origin",onError:e=>{null==s||s(e),r(e)},onMessage:e=>{null==o||o(e)},onOpen:e=>{null==n||n(e),i(e)},onClose:l})})}),W(this,"cancelFetch",()=>{var e;null===(e=this.sseInstance)||void 0===e||e.cancel()}),W(this,"getSSEInstance",()=>this.sseInstance),this.options=e}}function q(e,t,i){for(let r=0;r<i.length;r++)e.setUint8(t+r,i.charCodeAt(r))}let U=e=>{let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),i=0;return e.forEach(e=>{t.set(e,i),i+=e.length}),t};function Z(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class X{constructor(e){this.options=e,Z(this,"startFetchStreamData",e=>{throw Error("startFetchStreamData must be implemented")}),Z(this,"retryLoadStream",()=>{throw Error("retryLoadStream must be implemented")}),Z(this,"destroy",()=>{throw Error("destroy must be implemented")}),this.options=Object.assign({},e,{chunkSize:10})}}function H(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class J extends X{constructor(e){super(e),H(this,"fetchStreamReqParams",void 0),H(this,"retryCount",0),H(this,"status","init"),H(this,"audioStreamSSEInstance",void 0),H(this,"soundBuffer",{sound:[]}),H(this,"receivedBufferIndex",-1),H(this,"sendPlayerBufferCount",0),H(this,"setStatus",e=>{this.status!==e&&(this.status=e)}),H(this,"initSSE",()=>{let{getCommonParams:e}=this.options;this.audioStreamSSEInstance=new D({onError:e=>{var t;(null==e||null===(t=e.name)||void 0===t||!t.includes("AbortError"))&&this.handleError({type:"fetch_error",msg:(null==e?void 0:e.message)||"fetch_error"})},getCommonParams:e,onMessage:this.handleMessage})}),H(this,"handleError",e=>{if(this.retryCount<3){this.retryCount++,this.retryLoadStream();return}let{onError:t}=this.options;this.setStatus("ended"),null==t||t({errorInfo:{type:(null==e?void 0:e.type)||"unknown",msg:(null==e?void 0:e.msg)||"unknown"},errorBufferIndex:this.receivedBufferIndex+1})}),H(this,"handleMessage",e=>{try{if("ended"===this.status)return;"json"===e.event&&e.data&&this.handleNewBuffer(e.data,Number(e.id||"0")),"done"===e.event&&this.handleBufferStreamEnd()}catch(e){this.handleError({type:"handle_message_error",msg:(null==e?void 0:e.message)||"handle_message_error"})}}),H(this,"handleNewBuffer",(e,t)=>{let i=function(e){for(;e.length%4!=0;)e+="=";let t=atob(e),i=new Uint8Array(new ArrayBuffer(t.length));for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}(e);this.soundBuffer.sound.push(i.slice(0)),this.receivedBufferIndex=t;let{chunkSize:r=10}=this.options;this.soundBuffer.sound.length>=r&&this.sendWavDataToPlayer()}),H(this,"sendWavDataToPlayer",()=>{this.sendPlayerBufferCount++;let{onAudioStreamUpdate:e}=this.options,t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24e3,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16,a=e.length,n=new ArrayBuffer(44+a),s=new DataView(n);q(s,0,"RIFF"),s.setUint32(4,44+a-8,!0),q(s,8,"WAVE"),q(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,1,!0),s.setUint16(22,i,!0),s.setUint32(24,t,!0),s.setUint32(28,t*i*(r/8),!0),s.setUint16(32,r/8*i,!0),s.setUint16(34,r,!0),q(s,36,"data"),s.setUint32(40,a,!0);let o=new Uint8Array(n);return o.set(e,44),o}(U(this.soundBuffer.sound));null==e||e({audioArrayBuffer:t.buffer.slice(0)}),this.soundBuffer.sound=[]}),H(this,"handleBufferStreamEnd",()=>{if("ended"===this.status)return;let{onAudioStreamEnd:e}=this.options;this.soundBuffer.sound.length&&this.sendWavDataToPlayer(),null==e||e({totalBufferCount:this.sendPlayerBufferCount}),this.setStatus("ended")}),H(this,"startFetchStreamData",async e=>{var t;"fetching"!==this.status&&(this.setStatus("fetching"),this.fetchStreamReqParams=e,this.receivedBufferIndex=Number((null==e?void 0:e.seq_no)||0)-1,await (null===(t=this.audioStreamSSEInstance)||void 0===t?void 0:t.fetchData(e)))}),H(this,"retryLoadStream",async()=>{var e;this.setStatus("fetching"),await (null===(e=this.audioStreamSSEInstance)||void 0===e?void 0:e.fetchData({...this.fetchStreamReqParams||{},seq_no:this.receivedBufferIndex+1}))}),H(this,"destroy",()=>{if("fetching"===this.status){var e;null===(e=this.audioStreamSSEInstance)||void 0===e||e.cancelFetch()}this.setStatus("ended"),this.retryCount=0,this.fetchStreamReqParams={},this.sendPlayerBufferCount=0,this.receivedBufferIndex=-1,this.soundBuffer={sound:[]}}),this.initSSE()}}function z(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class V{constructor(e,t){this.player=e,this.options=t,z(this,"timerID",void 0),z(this,"monitorPlayBackFluency",(0,y.default)(async()=>{let{interval:e=.5,onWaitingEnd:t,onWaiting:i}=this.options.playBackFluencyOptions||{},r=this.player.getCurrentTime();r-this.player.getDuration()>=e?(await this.player.pauseAudioContext(),null==i||i()):(this.player.resumeAudioContext(),null==t||t())},50,{trailing:!1})),z(this,"monitorPlayTime",(0,y.default)(()=>{if("waiting"===this.player.getStatus())return;let{onPlayTimeUpdate:e}=this.options.playTimeOptions||{};null==e||e({currentTime:Number(this.player.getCurrentTime().toFixed(3))})},50,{trailing:!1})),z(this,"startMonitor",()=>{var e;!["paused","ended","init"].includes(null===(e=this.player)||void 0===e?void 0:e.getStatus())&&(this.monitorPlayBackFluency(),this.monitorPlayTime(),this.timerID=requestAnimationFrame(this.startMonitor))}),z(this,"endMonitor",()=>{this.timerID&&(cancelAnimationFrame(this.timerID),this.timerID=void 0)}),this.player=e,this.options=t}}let G=e=>new Promise(t=>{setTimeout(t,e)});function K(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Q{constructor(e){this.options=e,K(this,"firstPlayed",!0),K(this,"status","init"),K(this,"error",null),K(this,"alreadyParseComplete",!1),K(this,"startTime",0),K(this,"realDuration",0),K(this,"audioCtx",void 0),K(this,"errorBufferIndex",-1),K(this,"audioDataList",[]),K(this,"totalBufferCount",-1),K(this,"currentBufferIndex",0),K(this,"playerMonitor",void 0),K(this,"initMonitor",()=>{let{onPlayTimeUpdate:e}=this.options;this.playerMonitor=new V(this,{playTimeOptions:{onPlayTimeUpdate:e},playBackFluencyOptions:{onWaiting:this.handleWaiting,onWaitingEnd:()=>{this.setStatus("playing")}}})}),K(this,"handlePlayEnd",async()=>{var e,t,i;this.setStatus("ended"),null===(e=this.audioCtx)||void 0===e||e.close();let{onPlayEnd:r}=this.options;null==r||r({currentTime:(null===(t=this.audioCtx)||void 0===t?void 0:t.currentTime)||0,totalDuration:(null===(i=this.audioCtx)||void 0===i?void 0:i.currentTime)||0}),await this.destroyAudioCtx(),this.resetState({status:"ended"})}),K(this,"handleEveryBufferEnd",e=>{if("ended"!==this.status){if(this.errorBufferIndex>=0&&e===this.errorBufferIndex){var t,i;this.handlePlayError({error:{type:(null===(t=this.error)||void 0===t?void 0:t.type)||"unknow",msg:(null===(i=this.error)||void 0===i?void 0:i.msg)||"unknow"},errorBufferIndex:this.errorBufferIndex})}else e===this.totalBufferCount-1&&this.handlePlayEnd()}}),K(this,"playAudioBuffer",(e,t,i)=>{if(["paused","ended","destroyed"].includes(this.status))return!1;let r=e.createBufferSource();this.realDuration+=t.duration,r.buffer=t,r.loop=!1,r.onended=()=>{this.handleEveryBufferEnd(i)};let{onFirstPlayStart:a,onPlayStart:n}=this.options;e.onstatechange=()=>{"running"===e.state&&(null==n||n(),this.playerMonitor.startMonitor())},r.connect(e.destination);try{var s;let e=(null===(s=this.audioCtx)||void 0===s?void 0:s.currentTime)||0;e-this.startTime>0&&(this.startTime=e),r.start(this.startTime)}catch(e){}return"running"!==e.state?e.suspend():(this.playerMonitor.startMonitor(),this.firstPlayed&&(this.firstPlayed=!1,null==a||a(),null==n||n())),this.startTime+=t.duration,!0}),K(this,"handleWaiting",()=>{this.setStatus("waiting");let{onWaiting:e}=this.options;null==e||e()}),K(this,"loopCreateStreamBufferAndPlay",async()=>{if(-1!==this.totalBufferCount&&this.currentBufferIndex>=this.totalBufferCount){this.alreadyParseComplete=!0;return}if(["paused","ended","destroyed"].includes(this.status)||this.alreadyParseComplete)return;if(0===this.audioDataList.length){this.handleWaiting(),await G(50),this.loopCreateStreamBufferAndPlay();return}if(this.audioDataList.length>0&&this.currentBufferIndex>=this.audioDataList.length){await G(50),this.loopCreateStreamBufferAndPlay();return}this.setStatus("playing");let e=this.audioDataList[this.currentBufferIndex];this.audioCtx||(this.audioCtx=new AudioContext,this.audioCtx.resume());let t=null;if(e.audioBufferData)t=e.audioBufferData;else try{if(!(t=await this.audioCtx.decodeAudioData(e.audioArraybuffer)))throw Error("decode_error, no audio buffer")}catch(e){this.errorBufferIndex=this.currentBufferIndex,this.handlePlayError({error:{type:"decode_error",msg:(null==e?void 0:e.message)||"decode error"},errorBufferIndex:this.currentBufferIndex});return}if(e.audioBufferData=t,!this.playAudioBuffer(this.audioCtx,t,this.currentBufferIndex)){await G(300),this.loopCreateStreamBufferAndPlay();return}this.currentBufferIndex+=1,this.loopCreateStreamBufferAndPlay()}),K(this,"setStatus",e=>{if(this.status===e)return;let{onStatusChange:t}=this.options;["init","start_play"].includes(e)||null==t||t(e),this.status=e}),K(this,"resetState",e=>{let{status:t}=e||{status:"init"};this.alreadyParseComplete=!1,this.audioCtx=void 0,this.audioDataList=[],this.errorBufferIndex=-1,this.currentBufferIndex=0,this.totalBufferCount=-1,this.error=null,this.firstPlayed=!1,this.realDuration=0,this.startTime=0,this.setStatus(t),this.playerMonitor.endMonitor()}),K(this,"handlePlayError",e=>{var t;let{error:i,errorBufferIndex:r}=e,{onPlayError:a}=this.options;this.error=i,null==a||a({error:i,errorBufferIndex:r}),this.setStatus("ended"),this.pauseAudioContext(),null===(t=this.audioCtx)||void 0===t||t.close(),this.playerMonitor.endMonitor()}),K(this,"addData",e=>{"ended"!==this.status&&this.audioDataList.push({audioArraybuffer:e})}),K(this,"togglePlay",()=>{["init","paused","ended","destroyed"].includes(this.status)?this.play():["start_play","playing","waiting"].includes(this.status)&&this.pause()}),K(this,"play",async()=>{if(["init","paused","ended","destroyed"].includes(this.status)){var e;this.setStatus("start_play"),await (null===(e=this.audioCtx)||void 0===e?void 0:e.resume()),await this.loopCreateStreamBufferAndPlay()}}),K(this,"pause",()=>{if(["start_play","playing","waiting"].includes(this.status)){var e;this.playerMonitor.endMonitor();let{onPause:t}=this.options;null==t||t((null===(e=this.audioCtx)||void 0===e?void 0:e.currentTime)||0),this.setStatus("paused"),this.pauseAudioContext()}}),K(this,"pauseAudioContext",async()=>{var e,t;(null===(e=this.audioCtx)||void 0===e?void 0:e.state)==="running"&&await (null===(t=this.audioCtx)||void 0===t?void 0:t.suspend().catch(()=>{}))}),K(this,"resumeAudioContext",async()=>{var e,t;(null===(e=this.audioCtx)||void 0===e?void 0:e.state)!=="running"&&await (null===(t=this.audioCtx)||void 0===t?void 0:t.resume().catch(()=>{}))}),K(this,"setTotalBufferCount",e=>{this.totalBufferCount=e}),K(this,"destroyAudioCtx",async()=>{var e,t;await (null===(e=this.audioCtx)||void 0===e?void 0:e.suspend().catch(()=>{})),await (null===(t=this.audioCtx)||void 0===t?void 0:t.close().catch(()=>{}))}),K(this,"destroy",async()=>{await this.destroyAudioCtx(),this.resetState({status:"destroyed"})}),K(this,"getCurrentTime",()=>{var e;return(null===(e=this.audioCtx)||void 0===e?void 0:e.currentTime)||0}),K(this,"getDuration",()=>this.startTime||0),K(this,"getStatus",()=>this.status),this.options=e,this.initMonitor()}}function Y(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ee{createPlayer(){let e=this.createStreamPlayerOptions();this.player=new Q(e)}createLoader(){let e=this.createStreamLoaderOptions();this.streamLoader=new X(e)}play(e){["init","ended","destroyed"].includes(this.player.getStatus())&&this.streamLoader.startFetchStreamData(e),this.player.play()}pause(){this.player.pause()}constructor(e){Y(this,"playerOptions",void 0),Y(this,"loaderOptions",void 0),Y(this,"player",void 0),Y(this,"streamLoader",void 0),Y(this,"init",()=>{this.createPlayer(),this.createLoader()}),Y(this,"createStreamLoaderOptions",()=>{let{onAudioStreamEnd:e,onAudioStreamUpdate:t,onError:i,...r}=this.loaderOptions;return{onAudioStreamUpdate:e=>{var i;null==t||t(e),null===(i=this.player)||void 0===i||i.addData(e.audioArrayBuffer)},onAudioStreamEnd:t=>{var i;null==e||e(t),null===(i=this.player)||void 0===i||i.setTotalBufferCount(t.totalBufferCount)},onError:e=>{let{errorBufferIndex:t,errorInfo:r}=e;this.player.pause(),null==i||i({errorBufferIndex:t,errorInfo:r})},...r}}),Y(this,"createStreamPlayerOptions",()=>{let{onPlayEnd:e,...t}=this.playerOptions;return{onPlayEnd:t=>{null==e||e(t),this.streamLoader.destroy()},...t}}),Y(this,"retryLoadStreamAndPlay",()=>{this.streamLoader.retryLoadStream(),this.player.play()}),Y(this,"destroy",()=>{this.streamLoader.destroy(),this.player.destroy()});let{streamLoaderOptions:t,streamPlayerOptions:i}=e;this.loaderOptions=t,this.playerOptions=i,this.init()}}class et extends ee{createLoader(){let e=this.createStreamLoaderOptions();this.streamLoader=new J(e)}}var ei=i(557298);function er(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ea{init(){this.initEventListener()}initEventListener(){this.audio.addEventListener("canplay",this.handleCanPlay.bind(this)),this.audio.addEventListener("play",this.handlePlay.bind(this)),this.audio.addEventListener("pause",this.handlePause.bind(this)),this.audio.addEventListener("ended",this.handleEnded.bind(this)),this.audio.addEventListener("timeupdate",this.handleTimeUpdate.bind(this)),this.audio.addEventListener("error",this.handleError.bind(this)),this.audio.addEventListener("loadedmetadata",this.handleLoadedMetadata.bind(this)),this.audio.addEventListener("waiting",this.handleWaiting.bind(this))}getPlaySrc(){return this.audio.src}play(){this.audio.paused&&this.audio.play().then(()=>{this.isPlaying=!0}).catch(e=>this.emitEvent("error",e))}pause(){this.audio.paused||(this.audio.pause(),this.isPlaying=!1)}togglePlayPause(){this.isPlaying?this.pause():this.play()}seekTo(e){this.audio.currentTime=Math.max(0,Math.min(this.getDuration(),e))}fastForward(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultSeekStep;this.seekTo(this.audio.currentTime+e)}rewind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultSeekStep;this.seekTo(this.audio.currentTime-e)}setVolume(e){this.audio.volume=Math.max(0,Math.min(1,e))}increaseVolume(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;this.setVolume(this.audio.volume+e)}decreaseVolume(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;this.setVolume(this.audio.volume-e)}mute(){this.audio.muted=!0}unmute(){this.audio.muted=!1}toggleMute(){this.audio.muted=!this.audio.muted}setPlaybackRate(e){this.audio.playbackRate=Math.max(.5,Math.min(4,e))}getCurrentTime(){return this.audio.currentTime}getDuration(){return this.audio.duration||0}getVolume(){return this.audio.volume}getPlaybackRate(){return this.audio.playbackRate}isMuted(){return this.audio.muted}on(e,t){return this.eventListeners[e]&&this.eventListeners[e].push(t),this}off(e,t){return this.eventListeners[e]&&(this.eventListeners[e]=this.eventListeners[e].filter(e=>e!==t)),this}emitEvent(e,t){this.eventListeners[e]&&this.eventListeners[e].forEach(e=>e(t))}handlePlay(){this.isPlaying=!0,this.emitEvent("play")}handlePause(){this.isPlaying=!1,this.emitEvent("pause")}handleEnded(){this.isPlaying=!1,this.emitEvent("ended")}handleTimeUpdate(){this.emitEvent("timeupdate",{currentTime:this.audio.currentTime,duration:this.audio.duration})}handleError(e){this.emitEvent("error",e)}handleLoadedMetadata(){this.emitEvent("loadedmetadata",{duration:this.audio.duration})}handleWaiting(e){this.emitEvent("waiting",e)}handleCanPlay(){this.emitEvent("canplay")}destroy(){this.pause(),this.audio.src="",Object.keys(this.eventListeners).forEach(e=>{this.eventListeners[e]=[]}),this.audio.removeEventListener("play",this.handlePlay),this.audio.removeEventListener("pause",this.handlePause),this.audio.removeEventListener("ended",this.handleEnded),this.audio.removeEventListener("timeupdate",this.handleTimeUpdate),this.audio.removeEventListener("error",this.handleError),this.audio.removeEventListener("loadedmetadata",this.handleLoadedMetadata),this.audio.removeEventListener("canplay",this.handleCanPlay)}constructor(){er(this,"audio",void 0),er(this,"isPlaying",void 0),er(this,"defaultSeekStep",void 0),er(this,"eventListeners",void 0),er(this,"setPlaySrc",e=>(this.audio.src=(0,ei.filterUrlModule)(e,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb*x0-kRaT$-wWXhXa2RzZ*t4W$FuTlpXR3hzWTJrNW$tTnR%WFpaTWpsMFls-z$k$XhZ%W5OWldHeHNZMms1-0dKdF$te*xRel$3WXpKR2$Wb3pWbm89"}),this)),this.audio=new Audio,this.isPlaying=!1,this.defaultSeekStep=1,this.eventListeners={play:[],pause:[],ended:[],timeupdate:[],error:[],loadedmetadata:[],waiting:[],canplay:[]},this.init()}}var en=((a=en||{}).Play="play",a);let es=new I.EventEmitter,eo=e=>`podcast_play_${e||""}'}`,el=e=>{var t;return null!==(t=({playing:S.Playing,paused:S.Paused,waiting:S.Loading,ended:S.Finished,destroyed:S.NotPlayed})[e])&&void 0!==t?t:S.NotPlayed},ed=e=>{let{getStore:t}=e;return new et({streamLoaderOptions:{},streamPlayerOptions:{onStatusChange:e=>{let i=t(),{updateState:r,getIsGenerated:a,currentStreamPlayTime:n,trackEvent:s,playStatus:o}=i,l="ended"===e&&o!==S.Failed;r(t=>{let i=el(e);t.playStatus=i});let d=a();l&&(r(e=>{e.localTotalPlayTime=n}),s("podcast_play_finish",{end_type:"auto_complete",if_complete_play:"true",duration:Math.floor(1e3*n)})),l&&!d&&i.refreshChat()},onPlayTimeUpdate:(0,y.default)(e=>{let{updateState:i}=t();i(t=>{t.currentStreamPlayTime=e.currentTime})},200),onPlayError:()=>{let{updateState:e}=t();e(e=>{e.playStatus=S.Failed})}}})},eu=e=>{let{getStore:t}=e,i=new ea;return i.on("timeupdate",(0,y.default)(e=>{let{updateState:r}=t();r(t=>{let{currentTime:r,duration:a}=e,n=Math.min(Math.max(r/a*100,0),100);t.currentPlayTime=r,t.progress=n,t.playStatus=i.audio.paused?S.Paused:S.Playing})},200)),i.on("ended",()=>{let{updateState:e,trackEvent:i,currentPlayTime:r}=t();e(e=>{e.playStatus=S.Finished}),i("podcast_play_finish",{end_type:"auto_complete",if_complete_play:"true",duration:Math.floor(1e3*(r||0))})}),i.on("error",()=>{let{updateState:e}=t();e(e=>{e.playStatus=S.Failed})}),i.on("waiting",()=>{let{updateState:e}=t();e(e=>{e.playStatus=S.Loading})}),i.on("play",()=>{let{updateState:e}=t();e(e=>{e.playStatus=S.Playing})}),i.on("pause",()=>{let{updateState:e}=t();e(e=>{e.playStatus=S.Paused})}),i},eh=e=>{let{playStatus:t,currentPlayTime:i}=e();return[S.Playing,S.Paused,S.Loading].includes(t)&&!!i},ec=e=>{let t,i;let{initMsg:r,getStore:a}=e,n=null==r?void 0:r.content_obj,s=ed(e),o=eu(e),{podcast:l}=(0,f.getPodcastFromMsgContent)(n),d=(0,f.checkIsGenerated)(l),u=eo((null==r?void 0:r.message_id)||""),h=()=>{var e,t;let{getPodcast:i}=a(),r=i(),n=null==r?void 0:null===(t=r.meta)||void 0===t?void 0:null===(e=t.playback_model)||void 0===e?void 0:e.audio_link;return{isStream:!(0,f.checkIsGenerated)(r),podcastUrl:n}};es.on(en.Play,e=>{e!==u&&(o.pause(),s.pause())});let c=!d,p={play:()=>{var e,r,n,l;es.emit(en.Play,u);let{playStatus:d,currentPlaySpeed:p}=a();if(!eh(a)){let{isStream:e,podcastUrl:r}=h();c=e,e?t=r:i=r}if(c){if(!t)return;let i=null===(r=x.default.parseUrl(t))||void 0===r?void 0:null===(e=r.query)||void 0===e?void 0:e.resource_id;if(!i)return;s.play({resource_id:i}),o.pause()}else{let e=i;if(!e){let{getPodcast:t}=a(),r=t();i=e=null==r?void 0:null===(l=r.meta)||void 0===l?void 0:null===(n=l.playback_model)||void 0===n?void 0:n.audio_link}if(!e)return;let t=o.getPlaySrc();d===S.Failed&&t===e&&(o.setPlaySrc(""),o.setPlaySrc(e)),o.getPlaySrc()||o.setPlaySrc(e),s.pause(),o.play(),o.getPlaybackRate()!==p&&o.setPlaybackRate(p)}},pause:()=>{let{trackEvent:e,currentPlayTime:t}=a();e("podcast_play_finish",{end_type:"user_end",if_complete_play:"false",duration:Math.floor(1e3*(t||0))}),c?s.pause():o.pause()},playForward:e=>{o.fastForward(e)},playBackword:e=>{o.rewind(e)},setPlaySpeed:e=>{o.setPlaybackRate(e)},seekTo:e=>{let{updateState:t}=a(),r=o.getDuration();if(o.getPlaySrc())o.seekTo(e/100*r),t(t=>{t.progress=e}),o.audio.paused&&p.play();else{p.play();let r=i,n=()=>void 0,s=()=>o.off("canplay",n);t(t=>{t.progress=e}),n=()=>{if(s(),o.getPlaySrc()!==r)return;let t=a().getDuration()||0;o.seekTo(e/100*t)},o.on("canplay",n)}},changePlayType:()=>{c=!c},destroy:()=>{s.destroy(),o.destroy()},switchPlayer:()=>{let{currentStreamPlayTime:e,playStatus:t,updateState:r}=a();if(c&&t===S.Playing){p.play();let t=i,n=()=>void 0,s=()=>o.off("canplay",n);n=()=>{if(s(),o.getPlaySrc()!==t)return;o.seekTo(e);let i=a().getDuration()||0;r(t=>{t.progress=e/i*100})},o.on("canplay",n)}}};return p},ep=e=>{let{initMsg:t,trackEvent:i,refreshChat:r,isShare:a}=e,n=(0,v.create)((e,n)=>{let s=M(n),o=ec({getStore:n,initMsg:t});return{polling:s,player:o,playStatus:S.NotPlayed,progress:0,currentPlaySpeed:1,currentStreamPlayTime:0,currentPlayTime:0,trackEvent:i,refreshChat:r,updateMessageContent:(t,i)=>{var r,o;let l=n(),{msgContent:d,getPodcast:u,localPodcast:h}=l;if((0,g.default)(d,t))return;let c=u(),{podcast:p}=(0,f.getPodcastFromMsgContent)(t);if(!(i||(0,f.checkUpdatePodcastEnable)(c,p)))return;let m=w.SafeJson.parse(null==t?void 0:t.widget_data),v=w.SafeJson.parse(null==m?void 0:m.data),y=null==v?void 0:null===(o=v.episodeList)||void 0===o?void 0:null===(r=o.episodes)||void 0===r?void 0:r[0],b={msgContent:t,podcast:y,localPodcast:null!=y?y:h,replyMessage:null==v?void 0:v.waiting_reply};i?(Object.assign(l,b),(0,f.checkIsGenerated)(y)?C(y)&&s.forceFetch(a):s.start()):e(b)},updateState:t=>{e((0,b.produce)(t))},getPodcast:()=>{let{podcast:e,localPodcast:t}=n();return null!=t?t:e},getIsLoading:()=>{let{getPodcast:e}=n(),t=e();return(0,f.checkIsLoading)(t)},getIsGenerated:()=>{let{getPodcast:e,getIsLoading:t}=n(),i=e(),r=(0,f.checkIsGenerated)(i);return!t()&&r},handlePlaySpeedChange:e=>{let{updateState:t}=n();t(t=>{t.currentPlaySpeed=e}),o.setPlaySpeed(e)},handlePlayPause:()=>{i("podcast_play_click",{previous_button_status:"pause",current_button_status:"continue"}),o.pause()},handlePlayFinish:()=>{},handlePlay:()=>{i("podcast_play_click",{previous_button_status:"continue",current_button_status:"pause"}),o.play()},handlePlayFailed:()=>{},handlePlayBackward:()=>{o.playBackword(15)},handleSeekTo:e=>{o.seekTo(e)},handlePlayForward:()=>{o.playForward(30)},handleRetry:()=>{let{getIsGenerated:e,pollingError:t,updateState:i}=n();!e()&&t&&(i(e=>{e.pollingError=!1}),s.start())},handleSwitchPlayer:()=>{let{getIsGenerated:e}=n();e()&&o.switchPlayer()},getDuration:()=>{var e,t;let{getPodcast:i,localTotalPlayTime:r}=n(),a=i(),s=null==a?void 0:null===(t=a.meta)||void 0===t?void 0:null===(e=t.playback_model)||void 0===e?void 0:e.duration;return s?Number.parseInt(s):r},downloadAudio:(0,y.default)(async()=>{let{getPodcast:e}=n(),t=e(),r=null==t?void 0:t.id;if(!r){P.logger.persist.error({eventName:"ai_podcast_download_failed",error:Error("podcast id is empty")});return}let a=(await F({episode_id:r})).video_url;if(!a){P.logger.persist.error({eventName:"ai_podcast_download_failed",error:Error("podcast video url is empty")});return}i("download",{content_type:"podcast"}),(0,_.downloadFileByLink)(a)},1e3),getCurrentPlayTime:()=>{let{getIsGenerated:e,currentStreamPlayTime:t,currentPlayTime:i}=n();return e()?i:t},destroy:()=>{null==s||s.cancel(),null==o||o.destroy()}}});return{usePodcastStore:n,usePodcastStoreShallow:function(e){return n(e,m.shallow)}}},ef=e=>{let{cardProps:t,getStore:i,trackEvent:r,inView:a}=e,{isGenerated:s,loading:o}=t,l=(0,n.useRef)(!!s),d=(0,n.useRef)(!!o);(0,n.useEffect)(()=>{if(!l.current&&s){var e,t;let{getDuration:a,getPodcast:n}=i();r("complete_generate_podcast",{epoise_id:null===(t=n())||void 0===t?void 0:null===(e=t.meta)||void 0===e?void 0:e.podcast_id,podcast_duration:a()})}},[s]),(0,n.useEffect)(()=>{if(d.current&&!o){var e,t;let{getPodcast:a}=i();r("podcast_can_play",{epoise_id:null===(t=a())||void 0===t?void 0:null===(e=t.meta)||void 0===e?void 0:e.podcast_id})}},[o]);let u=(0,c.default)(()=>{var e,a;let{status:n}=t,{getPodcast:s}=i(),o=null===(a=s())||void 0===a?void 0:null===(e=a.meta)||void 0===e?void 0:e.podcast_id;r("podcast_play_show",{button_status:n===S.Playing?"pause":"continue",epoise_id:o})});(0,n.useEffect)(()=>{a&&u()},[a])};var em=i(812650),ev=i.n(em);let eg=e=>{let{loading:t,progress:i,onProgressChangeEnd:r}=e,[a,s]=(0,n.useState)(!1),[o,l]=(0,n.useState)(void 0),[d,u]=(0,n.useState)(!1),h=(0,n.useRef)(null),p=(0,n.useRef)(null);(0,n.useEffect)(()=>()=>{p.current&&clearTimeout(p.current)},[]);let f=(0,c.default)(e=>{if(h.current){let t=h.current.getBoundingClientRect();return Math.max(0,Math.min(e-t.left,t.width))/t.width*100}return 0}),m=(0,c.default)(e=>{!t&&(l(i),s(!0),l(f(e)),p.current&&(clearTimeout(p.current),u(!1)))}),v=(0,c.default)(e=>{a&&!t&&l(f(e))}),g=(0,c.default)(()=>{a&&!t&&(s(!1),void 0!==o&&(null==r||r(o)),u(!0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{u(!1)},500))});return(0,n.useEffect)(()=>{if(!a)return;let e=e=>{v(e.clientX)},t=()=>{g()},i=e=>{e.touches.length>0&&v(e.touches[0].clientX)},r=()=>{g()};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),document.addEventListener("touchmove",i),document.addEventListener("touchend",r),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",i),document.removeEventListener("touchend",r)}},[a,v,g]),{isDragging:a,localProgress:o,isLocked:d,progressBarRef:h,onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),m(e.clientX)},onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),e.touches.length>0&&m(e.touches[0].clientX)},onWrapperClick:(0,c.default)(e=>{let t=f(e.clientX);l(t),null==r||r(t)})}};var ey={wrapper:"wrapper-V1skiq",dragging:"dragging-VaBV3f","bar-not-playing":"bar-not-playing-GUMjlG","bar-loading":"bar-loading-mVb_ht","bar-playing":"bar-playing-F_vNLm",progress:"progress-jid8EO","bar-wrapper":"bar-wrapper-qg2pBk","progress-bar":"progress-bar-k4VnZQ"},eb=i(345660);let e_=(0,n.memo)(e=>{let{className:t,loading:i,progress:r=0,playing:a,onProgressChangeEnd:n,...s}=e,{localProgress:o,isDragging:l,isLocked:d,progressBarRef:u,onMouseDown:h,onTouchStart:c,onWrapperClick:p}=eg({loading:i,onProgressChangeEnd:n,progress:r}),f=l||d?o:r,m=Math.min(100,Math.max(0,null!=f?f:r||0));return(0,eb.jsx)("div",{...s,className:ev()(t,ey.wrapper,{[ey.dragging]:l}),onTouchStart:c,ref:u,children:i?a?(0,eb.jsx)("div",{className:ev()(ey["bar-loading"],{[ey["bar-playing"]]:a})}):(0,eb.jsx)("div",{className:ey["bar-not-playing"]}):(0,eb.jsx)("div",{className:ey.progress,onClick:p,children:(0,eb.jsx)("div",{className:ey["bar-wrapper"],style:{width:`${m}%`},children:(0,eb.jsx)("div",{className:ey["progress-bar"],onMouseDown:h})})})})});e_.displayName="PodcastProgressMemo";var ew=i(532558),eP=i(915299);let eS=e=>(0,eb.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none",viewBox:"0 0 32 32",...e,children:(0,eb.jsx)("path",{fill:"#0057FF",fillRule:"evenodd",d:"M16 30.667c8.1 0 14.667-6.566 14.667-14.666S24.1 1.334 16 1.334 1.334 7.9 1.334 16.001 7.9 30.667 16 30.667M14.79 10.223c-.881-.646-2.122-.017-2.122 1.076v9.404c0 1.092 1.24 1.72 2.122 1.075l6.412-4.702a1.333 1.333 0 0 0 0-2.15z",clipRule:"evenodd"})}),ex=e=>(0,eb.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none",viewBox:"0 0 32 32",...e,children:(0,eb.jsx)("path",{fill:"#0057FF",fillRule:"evenodd",d:"M30.667 16c0 8.1-6.567 14.667-14.667 14.667S1.333 24.101 1.333 16.001 7.9 1.334 16 1.334 30.667 7.9 30.667 16.001m-19.334-4.333a1.667 1.667 0 1 1 3.334 0v8.667a1.667 1.667 0 1 1-3.334 0zM19 10.001c-.92 0-1.667.746-1.667 1.666v8.667a1.667 1.667 0 1 0 3.334 0v-8.667c0-.92-.747-1.666-1.667-1.666",clipRule:"evenodd"})}),eE=e=>(0,eb.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:30,height:30,fill:"none",viewBox:"0 0 30 30",...e,children:[(0,eb.jsx)("rect",{width:29.6,height:29.6,fill:"#0057FF",rx:14.8}),(0,eb.jsxs)("g",{clipPath:"url(#podcast-loading_svg__a)",children:[(0,eb.jsx)("g",{clipPath:"url(#podcast-loading_svg__b)","data-figma-skip-parse":"true",children:(0,eb.jsx)("foreignObject",{width:3334.59,height:3334.59,x:-1667.29,y:-1667.29,transform:"matrix(.00614 0 0 .00615 15.03 15.551)",children:(0,eb.jsx)("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{background:"conic-gradient(from 90deg,rgba(255,255,255,.7) 0deg,rgba(255,255,255,0) 108.453deg,rgba(255,255,255,0) 168.031deg,rgba(255,255,255,.7) 360deg)",height:"100%",width:"100%",opacity:1}})})}),(0,eb.jsx)("path",{d:"M15.03 10.057a5.494 5.494 0 0 0-3.57 9.67.97.97 0 1 1-1.262 1.473 7.433 7.433 0 1 1 12.265-5.649.97.97 0 0 1-1.939 0 5.494 5.494 0 0 0-5.494-5.494",clipRule:"evenodd","data-figma-gradient-fill":'{"type":"GRADIENT_ANGULAR","stops":[{"color":{"r":1.0,"g":1.0,"b":1.0,"a":0.69999998807907104},"position":0.0},{"color":{"r":1.0,"g":1.0,"b":1.0,"a":0.0},"position":0.30125698447227478},{"color":{"r":1.0,"g":1.0,"b":1.0,"a":0.0},"position":0.46675261855125427}],"stopsVar":[{"color":{"r":1.0,"g":1.0,"b":1.0,"a":0.69999998807907104},"position":0.0},{"color":{"r":1.0,"g":1.0,"b":1.0,"a":0.0},"position":0.30125698447227478},{"color":{"r":1.0,"g":1.0,"b":1.0,"a":0.0},"position":0.46675261855125427}],"transform":{"m00":12.280944824218750,"m01":3.9888575997792941e-07,"m02":8.8896598815917969,"m10":-3.2526048698855448e-07,"m11":12.304538726806641,"m12":9.3990945816040039},"opacity":1.0,"blendMode":"NORMAL","visible":true}'})]}),(0,eb.jsxs)("defs",{children:[(0,eb.jsx)("clipPath",{id:"podcast-loading_svg__b",children:(0,eb.jsx)("path",{fillRule:"evenodd",d:"M15.03 10.057a5.494 5.494 0 0 0-3.57 9.67.97.97 0 1 1-1.262 1.473 7.433 7.433 0 1 1 12.265-5.649.97.97 0 0 1-1.939 0 5.494 5.494 0 0 0-5.494-5.494",clipRule:"evenodd"})}),(0,eb.jsx)("clipPath",{id:"podcast-loading_svg__a",children:(0,eb.jsx)("path",{fill:"#fff",d:"M4.8 4.8h20v20h-20z"})})]})]}),eC=e=>(0,eb.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:30,height:30,fill:"none",viewBox:"0 0 30 30",...e,children:[(0,eb.jsx)("g",{clipPath:"url(#loading_svg__a)","data-figma-skip-parse":"true",children:(0,eb.jsx)("foreignObject",{width:3309.21,height:3309.21,x:-1654.61,y:-1654.61,transform:"matrix(.00921 0 0 .00923 15 14.9)",children:(0,eb.jsx)("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{background:"conic-gradient(from 90deg,#0057ff 0deg,rgba(0,87,255,0) 108.453deg,rgba(0,87,255,0) 168.031deg,#0057ff 360deg)",height:"100%",width:"100%",opacity:1}})})}),(0,eb.jsx)("path",{d:"M15 6.658a8.241 8.241 0 0 0-5.356 14.505 1.454 1.454 0 0 1-1.892 2.21 11.13 11.13 0 0 1-3.902-8.474C3.85 8.741 8.842 3.75 15 3.75S26.15 8.742 26.15 14.9a1.454 1.454 0 1 1-2.909 0A8.24 8.24 0 0 0 15 6.66",clipRule:"evenodd","data-figma-gradient-fill":'{"type":"GRADIENT_ANGULAR","stops":[{"color":{"r":0.0,"g":0.34117648005485535,"b":1.0,"a":1.0},"position":0.0},{"color":{"r":0.0,"g":0.34117648005485535,"b":1.0,"a":0.0},"position":0.30125698447227478},{"color":{"r":0.0,"g":0.34117648005485535,"b":1.0,"a":0.0},"position":0.46675261855125427}],"stopsVar":[{"color":{"r":0.0,"g":0.34117648005485535,"b":1.0,"a":1.0},"position":0.0},{"color":{"r":0.0,"g":0.34117648005485535,"b":1.0,"a":0.0},"position":0.30125698447227478},{"color":{"r":0.0,"g":0.34117648005485535,"b":1.0,"a":0.0},"position":0.46675261855125427}],"transform":{"m00":18.421421051025391,"m01":5.9832876786458655e-07,"m02":5.7892022132873535,"m10":-4.8789087259137887e-07,"m11":18.456811904907227,"m12":5.6709084510803223},"opacity":1.0,"blendMode":"NORMAL","visible":true}'}),(0,eb.jsx)("defs",{children:(0,eb.jsx)("clipPath",{id:"loading_svg__a",children:(0,eb.jsx)("path",{fillRule:"evenodd",d:"M15 6.658a8.241 8.241 0 0 0-5.356 14.505 1.454 1.454 0 0 1-1.892 2.21 11.13 11.13 0 0 1-3.902-8.474C3.85 8.741 8.842 3.75 15 3.75S26.15 8.742 26.15 14.9a1.454 1.454 0 1 1-2.909 0A8.24 8.24 0 0 0 15 6.66",clipRule:"evenodd"})})})]});var ej={wrapper:"wrapper-ldBplh",loading:"loading-w2r_Db",icon:"icon-dVQvAK",playLoading:"playLoading-KTjunu"};let ek=(e,t)=>{if(e)return(0,eb.jsx)(eC,{className:ej.icon});switch(t){case S.Playing:return(0,eb.jsx)(ex,{});case S.Loading:return(0,eb.jsx)(eE,{className:ej.playLoading});default:return(0,eb.jsx)(eS,{})}},eL=e=>{let{className:t,status:i,loading:r,...a}=e,n=ek(null!=r&&r,i);return(0,eb.jsx)("div",{...a,className:ev()(t,ej.wrapper,{[ej.loading]:r}),children:n})},eR=e=>(0,eb.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...e,children:(0,eb.jsx)("path",{fill:"currentColor",d:"M10 1.25a9.167 9.167 0 0 1 4.832 16.958.834.834 0 0 1-.88-1.416q.282-.175.548-.374a7.5 7.5 0 1 0-8.452.374.834.834 0 0 1-.88 1.416A9.167 9.167 0 0 1 10 1.25m0 3.542a5.625 5.625 0 0 1 2.78 10.516.833.833 0 0 1-.824-1.449q.268-.153.508-.344a3.96 3.96 0 1 0-4.419.345.834.834 0 0 1-.826 1.448 5.616 5.616 0 0 1-2.845-4.89A5.625 5.625 0 0 1 10 4.791m0 3.958a1.667 1.667 0 1 1 0 3.334 1.667 1.667 0 0 1 0-3.334"})});var eT=i.p+"static/image/cover_placeholder.c8b9f069.png",eN={topContainer:"topContainer-NTs5Vi",cover:"cover-QfNZ2v",contentWrapper:"contentWrapper-YbyAB7",contentLine:"contentLine-rg4Epj",contentIcon:"contentIcon-jmc5fz",title:"title-VDO85G",author:"author-jl197v",playBtn:"playBtn-r5ba6A",error:"error-nvnKan",errorIcon:"errorIcon-CXXCei"};let eB=(0,n.memo)(e=>{let{cover:t,title:i,podcastTitle:r,loading:a,status:n,isError:s,onPlay:o,onPause:l,onPlayBtnClick:d,onRetry:u,className:h,...p}=e,f=(0,eP.useTranslateFn)(),m=s?f("podcast_status_generationFail"):i||f("podcast_status_generating"),v=s?f("podcast_btn_regenerate"):r,g=(0,c.default)(e=>{if(e.stopPropagation(),!a)switch(null==d||d(),n){case S.Playing:null==l||l();break;case S.Loading:break;default:null==o||o()}}),y=(0,c.default)(e=>{if(e.stopPropagation(),!s){g(e);return}null==u||u()}),b=f("podcast_brandAI",{brandName:f("brandName_doubao")});return(0,eb.jsxs)("div",{className:ev()(eN.topContainer,h,{[eN.error]:s}),...p,onClick:y,children:[s?(0,eb.jsx)("div",{className:ev()(eN.errorIcon,eN.cover),children:(0,eb.jsx)(ew.default,{size:"inherit"})}):(0,eb.jsx)("img",{src:(0,ei.filterUrlModule)(t||eT,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRP$2xr$0%1d1ltM$dlb%41T1hOaF-wbDBX$Epv-%dSRE1Xb*hXRzkwWTBjNWExa3lSbnBr%XpsNlkyM%5kb*x0-kRaT$-wNTJZb*hDZ*1KdFZu$mtRemwzWWpK%2FsbFl%akJN$jA1MlltN$NiR0p1$$haWk1qbDBZM*M1ZFZwWE5%Qmpl$*wzWWpK%2FsbFl%akJN$jA1MlltN$NiR0p1$$haaFZ6$nJXb*huZFdSS$Rq%lpXRXB1WkZoTlBRPT0"}),className:eN.cover}),(0,eb.jsxs)("div",{className:eN.contentWrapper,children:[(0,eb.jsxs)("div",{className:eN.contentLine,children:[(0,eb.jsx)(eR,{className:eN.contentIcon}),(0,eb.jsxs)("div",{className:eN.title,children:[" ",m]})]}),(0,eb.jsx)("div",{className:eN.author,children:v||b})]}),!s&&(0,eb.jsx)(eL,{loading:a,status:n,onClick:g,className:eN.playBtn})]})});eB.displayName="PodcastContentMemo";var eF=i(476698),e$=i(590677),eM=i(57305),eI=i(214902),eO=i(525029),eA=i(307097),eW={popoverContent:"popoverContent-T4XxCb",item:"item-BlCTB0",btn:"btn-cvdSOL"};let eD=e=>{let{className:t,currentPlaySpeed:i,onPlaySpeedChange:r,disabled:a,...n}=e,s=(0,eb.jsx)("div",{...n,className:ev()(t,eW.btn),children:(0,eb.jsxs)("div",{children:[i||1,"x"]})});return a?s:(0,eb.jsx)(eO.SamanthaPopover,{position:"rightTop",clickToHide:!0,trigger:"click",content:(0,eb.jsx)("div",{className:eW.popoverContent,children:eA.PlaySpeedList.map((e,t)=>(0,eb.jsxs)("div",{className:eW.item,onClick:()=>{null==r||r(e)},children:[e,"x"]},t))}),children:s})};var eq={wrapper:"wrapper-UkIXB3",left:"left-knYugt",actionBtn:"actionBtn-PIKo0q",disabled:"disabled-Y62iBI",downloadBtn:"downloadBtn-C89q_n",right:"right-MmKEAl",timeLine:"timeLine-vWhBni"};let eU=e=>e<10?`0${e}`:`${e}`,eZ=e=>{if(!e)return"00:00";let t=Math.floor(e/60),i=Math.floor(e%60);return`${eU(t)}:${eU(i)}`},eX=(0,n.memo)(e=>{let{className:t,loading:i,currentPlayTime:r,totalPlayTime:a,currentPlaySpeed:n,onPlaySpeedChange:s,onPlayBackward:o,onPlayForward:l,loadingTxt:d,onDownload:u,hideDownload:h,...c}=e,p=eZ(null!=r?r:0),f=i?"--:--":eZ(null!=a?a:0),m=(0,eP.useTranslateFn)(),v=null!=d?d:m("podcast_toast_opsUnsupported_generating"),g=(0,eb.jsx)(eD,{currentPlaySpeed:n,onPlaySpeedChange:s,disabled:i,className:ev()(eq.actionBtn,{[eq.disabled]:i})});return(0,eb.jsxs)("div",{...c,className:ev()(t,eq.wrapper),children:[(0,eb.jsxs)("div",{className:eq.left,children:[(0,eb.jsx)(eI.SamanthaTooltip,{content:i?v:m("podcast_play_btn_backward"),children:(0,eb.jsx)("div",{className:ev()(eq.actionBtn,{[eq.disabled]:i}),onClick:o,children:(0,eb.jsx)(eM.default,{})})}),(0,eb.jsx)(eI.SamanthaTooltip,{content:i?v:m("podcast_play_btn_forward"),children:(0,eb.jsx)("div",{className:ev()(eq.actionBtn,{[eq.disabled]:i}),onClick:l,children:(0,eb.jsx)(e$.default,{})})}),i?(0,eb.jsx)(eI.SamanthaTooltip,{content:v,children:g}):g,h?null:(0,eb.jsx)(eI.SamanthaTooltip,{content:i?v:m("podcast_tooltip_download"),children:(0,eb.jsx)("div",{className:ev()(eq.actionBtn,{[eq.disabled]:i}),onClick:i?void 0:u,children:(0,eb.jsx)(eF.default,{className:eq.downloadBtn})})})]}),(0,eb.jsxs)("div",{className:eq.right,children:[p,(0,eb.jsx)("span",{className:eq.timeLine,children:"\uFF5C"}),f]})]})});eX.displayName="PodcastActionMemo";var eH={wrapper:"wrapper-NpUwUt",showAction:"showAction-m9rYeG",progress:"progress-qJqe_i",replyMessage:"replyMessage-oirrUL"};let eJ=e=>{let{title:t,loading:i,isGenerated:r,progress:a,cover:n,podcastTitle:s,status:o,error:l,currentPlayTime:d,totalPlayTime:u,currentPlaySpeed:h,onPlaySpeedChange:c,onPlay:p,onPause:f,onRetry:m,onPlayBackward:v,onPlayForward:g,className:y,waitingReply:b,onProgressChangeEnd:_,onPlayBtnClick:w,onDownload:P,hideDownload:x,loadingTxt:E,...C}=e,j=!i&&!l;return(0,eb.jsxs)("div",{children:[b&&(0,eb.jsx)("div",{className:eH.replyMessage,children:b}),(0,eb.jsxs)("div",{className:ev()(eH.wrapper,y,{[eH.showAction]:j}),...C,children:[(0,eb.jsx)(eB,{cover:n,title:t,podcastTitle:s,loading:i,status:o,isError:l,onPlay:p,onPause:f,onRetry:m,onPlayBtnClick:w}),j&&(0,eb.jsxs)(eb.Fragment,{children:[(0,eb.jsx)(e_,{loading:!r,progress:a,className:eH.progress,playing:o===S.Playing,onProgressChangeEnd:_}),(0,eb.jsx)(eX,{loadingTxt:E,loading:!r,currentPlayTime:d,totalPlayTime:u,currentPlaySpeed:h,onPlaySpeedChange:c,className:eH.action,onPlayBackward:v,onPlayForward:g,onDownload:P,hideDownload:x})]})]})]})};function ez(e){var t,i;let{message:r,inView:a,disableTrack:m,trackEventFn:v,refreshChat:g,isShare:y,...b}=e,_=(0,l.useChatSlice)("chatViewCoreStore",e=>e.currentChatViewConfig),w=(0,c.default)((e,t)=>{var i,a,n;if(m)return;let s=(0,d.getBotIdByConversationId)(null==r?void 0:r.conversation_id),o=null===(i=(0,f.getPodcastFromMsgContent)(null==r?void 0:r.content_obj))||void 0===i?void 0:i.podcast,l=null==o?void 0:o.id;if(!l)return;let h={...t,epoise_id:l,message_id:null==r?void 0:r.message_id,conversation_id:null==r?void 0:r.conversation_id,bot_id:s,chat_type:null==_?void 0:_.chatType,reply_id:null==r?void 0:r.reply_id,skill_id:null==r?void 0:null===(a=r.skill)||void 0===a?void 0:a.skill_id_no_default,skill_name:(0,u.getSkillTeaNameByType)(null==r?void 0:null===(n=r.skill)||void 0===n?void 0:n.skill_type_no_default)};null==v||v(e,h)}),[{usePodcastStoreShallow:P,store:S}]=(0,n.useState)(()=>{let e=ep({initMsg:r,trackEvent:w,refreshChat:g,isShare:y});return e.usePodcastStore.getState().updateMessageContent(r.content_obj,!0),{usePodcastStoreShallow:e.usePodcastStoreShallow,store:e}}),x=(0,h.useIsLoggedIn)(),{openLoginModal:E}=(0,s.useLoginModal)(),C=P(e=>{var t;let{getPodcast:i,getIsLoading:r,getIsGenerated:a,currentPlaySpeed:n,handlePlaySpeedChange:s,getCurrentPlayTime:l,playStatus:d,progress:u,pollingError:h,handleRetry:c,handlePlay:p,handlePlayPause:f,handlePlayBackward:m,handlePlayForward:v,handleSeekTo:g,replyMessage:b,downloadAudio:_}=e,{title:w,podcast_title:P,podcast_cover_thumbnail:S,playback_model:C}=(null===(t=i())||void 0===t?void 0:t.meta)||{},{duration:j}=C||{},k=r(),L=a();return{title:w,podcastTitle:P,cover:S,loading:k,isGenerated:L,currentPlaySpeed:n,currentPlayTime:l(),totalPlayTime:j?Number.parseInt(j):0,progress:u,onPlaySpeedChange:s,onRetry:c,error:h,onPlay:()=>{if(!x&&!y){E({trackInfo:{source:o.LoginOpenSource.PLAY_AI_PODCAST}});return}p()},onPause:f,onPlayBackward:m,onPlayForward:v,status:d,waitingReply:b,onProgressChangeEnd:g,onDownload:_}});if(ef({cardProps:C,message:r,trackEvent:w,getStore:S.usePodcastStore.getState,inView:a}),(0,n.useEffect)(()=>{var e;let t=null===(e=(0,f.getPodcastFromMsgContent)(null==r?void 0:r.content_obj))||void 0===e?void 0:e.podcast;return B({episode_id:null==t?void 0:t.id,msg_id:r.message_id}),()=>{S.usePodcastStore.getState().destroy()}},[]),(0,p.default)(()=>{S.usePodcastStore.getState().updateMessageContent(r.content_obj)},[r]),!(null==r?void 0:null===(t=r.content_obj)||void 0===t?void 0:t.widget_data)){let e=null==r?void 0:null===(i=r.content_obj)||void 0===i?void 0:i.text;return"string"==typeof e&&e?(0,eb.jsx)("div",{children:e}):null}return(0,eb.jsx)(eJ,{...C,...b})}},307097:function(e,t,i){"use strict";i.d(t,{PlaySpeedList:function(){return a},allowedHosts:function(){return r}});let r=["www.arxiv.org","arxiv.org"],a=[.75,1,1.25,1.5,2]},572965:function(e,t,i){"use strict";i.d(t,{checkIsGenerated:function(){return o},checkIsLoading:function(){return s},checkUpdatePodcastEnable:function(){return l},getPodcastFromMsgContent:function(){return n}});var r=i(366959),a=i(292335);let n=e=>{var t,i;let r=a.SafeJson.parse(null==e?void 0:e.widget_data),n=a.SafeJson.parse(null==r?void 0:r.data),s=null==n?void 0:null===(i=n.episodeList)||void 0===i?void 0:null===(t=i.episodes)||void 0===t?void 0:t[0];return{widgetData:n,podcast:s}},s=e=>{let{title:t}=(null==e?void 0:e.meta)||{};return!t},o=e=>{let{protocol:t}=(null==e?void 0:e.meta)||{};return!s(e)&&t===r.Protocol.Normal},l=(e,t)=>{let i=s(e),r=s(t);return!e||!!i||!r}},615188:function(e,t,i){"use strict";i.d(t,{getSemChannel:function(){return a}});var r=i(712980);let a=e=>{var t;return(0,r.parseHashOrQuery)(null===(t=e||location)||void 0===t?void 0:t.search).channel}}}]);
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["10652"],{615288:function(e,t){t.default={fade:"fade-m0SUfJ","fade-entering":"fade-entering-A0_s9J",fadeEntering:"fade-entering-A0_s9J",fadein:"fadein-QZnFSd","fade-exiting":"fade-exiting-VlWgqD",fadeExiting:"fade-exiting-VlWgqD",fadeout:"fadeout-uLXCAl","fade-exited":"fade-exited-eTV7eJ",fadeExited:"fade-exited-eTV7eJ","skill-guidance-view":"skill-guidance-view-J2D7ak",skillGuidanceView:"skill-guidance-view-J2D7ak","guidance-padding-right":"guidance-padding-right-b7SN1K",guidancePaddingRight:"guidance-padding-right-b7SN1K","guidance-max-width-container":"guidance-max-width-container-ZazIpr",guidanceMaxWidthContainer:"guidance-max-width-container-ZazIpr"}},616339:function(e,t){t.default={container:"container-QrxCka","custom-area-wrapper":"custom-area-wrapper-e6UKsv",customAreaWrapper:"custom-area-wrapper-e6UKsv",placeholder:"placeholder-Kgrpqi","editor-container":"editor-container-yj5w_H",editorContainer:"editor-container-yj5w_H","editor-wrapper":"editor-wrapper-AdiwSu",editorWrapper:"editor-wrapper-AdiwSu","bottom-wrapper":"bottom-wrapper-PqK2vl",bottomWrapper:"bottom-wrapper-PqK2vl",editor:"editor-u_GcDR","left-tools-wrapper":"left-tools-wrapper-INTHKl",leftToolsWrapper:"left-tools-wrapper-INTHKl","right-tools-wrapper":"right-tools-wrapper-HlP9ga",rightToolsWrapper:"right-tools-wrapper-HlP9ga","tools-placeholder":"tools-placeholder-QV9wFb",toolsPlaceholder:"tools-placeholder-QV9wFb","input-content-container":"input-content-container-zs4WWA",inputContentContainer:"input-content-container-zs4WWA","input-popover":"input-popover-_eegNS",inputPopover:"input-popover-_eegNS","container-v2":"container-v2-DjA1C3",containerV2:"container-v2-DjA1C3"}},941114:function(e,t){t.default={"slide-up":"slide-up-DojkpW",slideUp:"slide-up-DojkpW","slide-down":"slide-down-LkrGKH",slideDown:"slide-down-LkrGKH","fade-entering":"fade-entering-_qf9ae",fadeEntering:"fade-entering-_qf9ae",fadein:"fadein-qTmax8","fade-exiting":"fade-exiting-NPFbX9",fadeExiting:"fade-exiting-NPFbX9",fadeout:"fadeout-LrJ63V","fade-exited":"fade-exited-LLN4RE",fadeExited:"fade-exited-LLN4RE","chat-header-placeholder":"chat-header-placeholder-llToWW",chatHeaderPlaceholder:"chat-header-placeholder-llToWW"}},853588:function(e,t,a){a.d(t,{Navigate:function(){return l}});var n=a(915317),r=a(532430),o=a(345660);let l=e=>{let t=(0,r.getFromInstance)("Navigate",n.Navigate);return(0,o.jsx)(t,{...e})}},342857:function(e,t,a){a.d(t,{default:function(){return o}}),a(713738);var n=a(430261),r=a(345660),o=(0,n.IconFactory)((0,r.jsx)(e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"currentColor",d:"m3.543 8.883 7.042-7.047a2 2 0 0 1 2.828 0l7.043 7.046a1 1 0 0 1 0 1.415l-.701.701a1 1 0 0 1-1.414 0L13.3 5.956v15.792a1 1 0 0 1-1 1h-.99a1 1 0 0 1-1-1V6.342l-4.654 4.656a1 1 0 0 1-1.414 0l-.7-.7a1 1 0 0 1 0-1.415"})}),{}))},2551:function(e,t,a){a.d(t,{default:function(){return o}}),a(713738);var n=a(430261),r=a(345660),o=(0,n.IconFactory)((0,r.jsx)(e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.5 17a2 2 0 0 0-1.082.318L8.5 19.837V17h-5V4h17v13zm7 2h-7l-5.46 3.51a1 1 0 0 1-1.54-.842V19h-3a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h17a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2M7.3 11.8a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6m6-1.3a1.3 1.3 0 1 1-2.6 0 1.3 1.3 0 0 1 2.6 0m3.4 1.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6",clipRule:"evenodd"})}),{}))},474932:function(e,t,a){a.d(t,{default:function(){return o}}),a(713738);var n=a(430261),r=a(345660),o=(0,n.IconFactory)((0,r.jsx)(e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"currentColor",d:"M20.307 20.307a.997.997 0 0 0 .003-1.412l-6.845-6.844 6.845-6.845a.997.997 0 0 0-.003-1.412.997.997 0 0 0-1.412-.002l-6.844 6.844-6.845-6.845a.997.997 0 0 0-1.412.003.997.997 0 0 0-.002 1.412l6.844 6.844-6.845 6.845a.997.997 0 0 0 .003 1.412.997.997 0 0 0 1.412.003l6.844-6.845 6.845 6.845a.997.997 0 0 0 1.412-.003"})}),{}))},394872:function(e,t,a){a.d(t,{default:function(){return o}}),a(713738);var n=a(430261),r=a(345660),o=(0,n.IconFactory)((0,r.jsx)(e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M19.502 9.5a.514.514 0 0 0 .512-.454c.24-1.433.451-2.169.906-2.625s1.187-.666 2.612-.907a.513.513 0 0 0-.002-1.026c-1.423-.241-2.155-.453-2.61-.908-.455-.457-.666-1.192-.906-2.622A.514.514 0 0 0 19.502.5a.52.52 0 0 0-.515.456c-.241 1.432-.452 2.167-.907 2.624-.454.455-1.185.667-2.607.909a.514.514 0 0 0-.473.513.52.52 0 0 0 .47.512c1.425.24 2.156.447 2.61.9.455.454.666 1.19.907 2.634a.52.52 0 0 0 .515.452m-7.44-.995 1.432-2.047c.395.501.976.818 1.558.907l.222.038-1.575 2.249-.569.812 2.715 3.878a4.002 4.002 0 0 1 3.698 7.023 4 4 0 0 1-5.336-5.876l-2.297-3.281-2.298 3.281a4.002 4.002 0 0 1-5.335 5.876 4 4 0 0 1 3.697-7.023l2.715-3.878L5.53 3.098A1 1 0 0 1 7.17 1.951l4.74 6.77zm3.548 10.73a2 2 0 1 1 3.277-2.293 2 2 0 0 1-3.277 2.294m-7.4 0a2 2 0 1 0-3.277-2.293 2 2 0 0 0 3.276 2.294",clipRule:"evenodd"})}),{}))},28414:function(e,t,a){a.d(t,{default:function(){return o}}),a(713738);var n=a(430261),r=a(345660),o=(0,n.IconFactory)((0,r.jsx)(e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"currentColor",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18m0 2C5.925 23 1 18.075 1 12S5.925 1 12 1s11 4.925 11 11-4.925 11-11 11m-1-7.5v-4a1 1 0 1 1 0-2h1.004c.55 0 .998.446.999.996.002 1.668-.003 3.336-.003 5.004h.5a1 1 0 1 1 0 2h-3a1 1 0 1 1 0-2zm1-7a1 1 0 1 1 0-2 1 1 0 0 1 0 2"})}),{}))},806889:function(e,t,a){a.d(t,{default:function(){return o}}),a(713738);var n=a(430261),r=a(345660),o=(0,n.IconFactory)((0,r.jsx)(e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"currentColor",d:"M14.152 21.5q-.4 0-.705-.27a1.18 1.18 0 0 1-.368-.684 32 32 0 0 0-.58-2.687q-.294-1.079-.725-1.763a3.3 3.3 0 0 0-1.105-1.1q-.684-.414-1.746-.664a31 31 0 0 0-2.62-.477 1.2 1.2 0 0 1-.716-.363q-.273-.3-.273-.716 0-.415.284-.715.285-.312.715-.363a26 26 0 0 0 2.641-.415q1.074-.24 1.768-.654a3.4 3.4 0 0 0 1.126-1.12q.442-.705.715-1.794.273-1.1.515-2.697.064-.426.358-.685.306-.27.716-.27t.705.27q.305.26.378.685.285 1.597.569 2.686.294 1.08.725 1.764.432.683 1.116 1.1.683.414 1.736.663a30 30 0 0 0 2.62.467q.442.072.715.373.285.3.284.706 0 .425-.284.736-.284.3-.726.342-1.557.177-2.63.425-1.074.24-1.778.654a3.3 3.3 0 0 0-1.126 1.12q-.432.706-.705 1.795a30 30 0 0 0-.516 2.697 1.1 1.1 0 0 1-.368.684q-.294.27-.715.27M6.366 9.078q-.525 0-.589-.54a18 18 0 0 0-.252-1.565q-.127-.57-.421-.861-.295-.301-.884-.446-.59-.146-1.641-.29Q2 5.291 2 4.793t.516-.58a24 24 0 0 0 1.683-.343q.61-.156.905-.435.294-.291.42-.84.127-.561.253-1.546.063-.55.59-.55.515 0 .589.529.126 1.037.252 1.618.137.581.431.871.295.281.895.415.6.136 1.662.28.23.022.379.187.147.165.147.394 0 .488-.505.581-1.083.177-1.694.343-.6.155-.894.446-.295.279-.421.84T6.956 8.56a.58.58 0 0 1-.2.373.58.58 0 0 1-.39.145"})}),{}))},525029:function(e,t,a){a.d(t,{SamanthaPopover:function(){return s}});var n=a(713738),r=a(812650),o=a.n(r),l=a(837921),i=a(345660);let s=n.forwardRef(function(e,t){return(0,i.jsx)(l.default,{ref:t,...e,className:o()("samantha-popover-DRtvK_",e.className),children:e.children})})},843174:function(e,t,a){a.d(t,{utf8:function(){return o}});var n=a(519428),r=a(436041);let o={length(e){let t=0,a=0;for(let n=0;n<e.length;++n)(a=e.charCodeAt(n))<128?t+=1:a<2048?t+=2:(64512&a)==55296&&(64512&e.charCodeAt(n+1))==56320?(++n,t+=4):t+=3;return t},read(e,t,a){if(a-t<1)return"";let n="";for(let r=t;r<a;){let t=e[r++];if(t<=127)n+=String.fromCharCode(t);else if(t>=192&&t<224)n+=String.fromCharCode((31&t)<<6|63&e[r++]);else if(t>=224&&t<240)n+=String.fromCharCode((15&t)<<12|(63&e[r++])<<6|63&e[r++]);else if(t>=240){let a=((7&t)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;n+=String.fromCharCode(55296+(a>>10)),n+=String.fromCharCode(56320+(1023&a))}}return n},write(e,t,a){let n,r;let o=a;for(let o=0;o<e.length;++o)(n=e.charCodeAt(o))<128?t[a++]=n:(n<2048?t[a++]=n>>6|192:((64512&n)==55296&&(64512&(r=e.charCodeAt(o+1)))==56320?(n=65536+((1023&n)<<10)+(1023&r),++o,t[a++]=n>>18|240,t[a++]=n>>12&63|128):t[a++]=n>>12|224,t[a++]=n>>6&63|128),t[a++]=63&n|128);return a-o},posCalcRange(e,t){let a=0,o={},l=(0,n.default)(t);l=(0,r.default)(l.sort((e,t)=>e-t));for(let t=0;t<e.length&&(a===l[0]&&(o[l[0]]=t,l.shift()),(64512&e[t].charCodeAt(0))==55296&&(64512&e[t+1].charCodeAt(0))==56320?(a+=this.length(`${e[t]}${e[t+1]}`),t++):a+=this.length(e[t]),l.length);t++);return o},posCalc(e,t){let a="",n=0;for(let r=0;r<e.length;r++)if(a+=e[r],this.length(a)===t){n=r+1;break}return n}}},568388:function(e,t,a){var n,r;a.d(t,{ParseState:function(){return o},ReviewState:function(){return l}});let o=((n={})[n.ParseState_Default=0]="ParseState_Default",n[n.ParseState_Success=1]="ParseState_Success",n[n.ParseState_Failed=2]="ParseState_Failed",n[n.ParseState_Processing=3]="ParseState_Processing",n),l=((r={})[r.ReviewState_Default=0]="ReviewState_Default",r[r.ReviewState_Access=1]="ReviewState_Access",r[r.ReviewState_NotCompliant=2]="ReviewState_NotCompliant",r[r.ReviewState_Processing=3]="ReviewState_Processing",r)},831744:function(e,t,a){a.d(t,{NoSSR:function(){return l},withNoSSR:function(){return o}});var n=a(713738),r=a(345660);let o=(e,t)=>{var a;let o=a=>{let[o,l]=(0,n.useState)(!1);return(0,n.useEffect)(()=>l(!0),[]),o?(0,r.jsx)(e,{...a}):t?(0,r.jsx)(t,{...a}):null};return o.displayName=null!==(a=e.displayName)&&void 0!==a?a:null==t?void 0:t.displayName,o},l=e=>{let{children:t,fallback:a,defaultMounted:o=!1}=e,[l,i]=(0,n.useState)(o);return(0,n.useEffect)(()=>i(!0),[]),(0,r.jsx)(r.Fragment,{children:l?t:a})}},845647:function(e,t,a){a.d(t,{ChatType:function(){return n}});var n={Conversation:0,Bot:1,ThreadLocalConversation:2,ProfileBot:3,NewThread:4,CollectionLocalConversation:6,SharedThreadContinueChat:8,NewDoc:9}},588426:function(e,t,a){a.d(t,{getConversationTypeById:function(){return o},getThreadIdByConversationId:function(){return l}});var n=a(785926),r=a(230932);let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,n.conversationTypeByIdSelector)(r.useFeedStore.getState(),e,t)},l=e=>(0,n.threadIdByConversationIdSelector)(r.useFeedStore.getState(),e)},300841:function(e,t,a){a.d(t,{isDirectoryAttachment:function(){return o},isLongCtxBot:function(){return s},isRefAttachment:function(){return n},isRefImage:function(){return r},isRefLink:function(){return l},isRefText:function(){return i},isRegenerate:function(){return d}});let n=e=>(null==e?void 0:e.type)==="attachment"||(null==e?void 0:e.type)==="file",r=e=>(null==e?void 0:e.type)==="image",o=e=>(null==e?void 0:e.type)==="directory",l=e=>(null==e?void 0:e.type)==="link",i=e=>(null==e?void 0:e.type)==="text";function s(e){return!!e&&["7400765672814379027","7411132181101838390","7264586389273018423"].includes(e)}let d=e=>{var t;return!!(e.operation&&"regenerate"in e.operation&&(null===(t=e.operation)||void 0===t?void 0:t.regenerate))}},442571:function(e,t,a){a.d(t,{isAttachmentNameReviewNotCompliant:function(){return s},isAttachmentParseFailed:function(){return i},isBotChat:function(){return l},isCocoBotType:function(){return d}});var n=a(845647),r=a(722038),o=a(773289);let l=e=>!!e&&[n.ChatType.Bot,n.ChatType.ProfileBot].includes(e);function i(e){return e===r.ParseState.ParseState_Failed}function s(e){return e===r.ReviewState.ReviewState_NotCompliant}let d=e=>e===o.BotType.Coco||e===o.BotType.CocoWeb},537624:function(e,t,a){a.r(t),a.d(t,{GuidanceInputFoundation:function(){return S}});var n=a(713738),r=a(453157),o=a(4137),l=a(444463),i=a(970377),s=a(698392),d=a(689368),u=a(922851),c=a(242315),h=a(644143),p=a(100651),g=a(111329),f=a(415592),m=a(857200),v=a(653322),w=a(481219),_=a(345660);let S=(0,n.memo)(function(e){let{reportParams:t,className:a,chatId:S,chatType:b,showExitSkillButton:x,specificSkillType:k,enableArouseMoreSkill:$=!0,renderFallback:T}=e,{activeSkillType:C,activeSkill:N}=(0,s.useChatSlice)("chatInputStore",e=>{var t,a;let n=(0,o.default)(k)?S?null===(t=e.activeSkillTypeMap)||void 0===t?void 0:t[S]:void 0:"generic"===k?void 0:k,r=n&&S?{...null===(a=e.skillMap)||void 0===a?void 0:a[n],skill_type:n}:void 0;return{activeSkillType:n,activeSkill:r}},r.shallow),{isNewChatInputInChat:R}=(0,c.useNewChatInputAb)({chatId:S,chatType:b}),{inputWidthDivRef:y,isToolButtonSmall:j}=(0,h.useIsToolButtonSmall)(),{reportParams:E}=(0,p.useInputReportParams)({chatId:S,chatType:b,activeSkill:N}),I=(0,g.useTrackOnBeforeSubmit)({activeSkillType:C,reportParams:{...E,...t}}),{trackParams:P}=(0,p.useInputTrackParams)({chatId:S,chatType:b,activeSkill:N}),{isDisabled:F}=(0,i.useConversationDisabled)(),{plugin:B,loading:W}=(0,d.useGuidanceInputPlugin)(C||"generic"),M=(0,f.useInputPluginProps)({chatId:S,chatType:b,disabled:F,trackParams:P,skill:null!=N?N:{},reportParams:{...E,...t},onBeforeSubmit:I,isToolButtonSmall:j}),D=(0,n.useCallback)(()=>W||!B?(null==T?void 0:T({small:j}))||(0,_.jsx)(l.GuidanceInputSkeleton,{small:j}):(0,_.jsx)(B.Content,{...M,className:a,showExitSkillButton:x,exitSkillButtonTheme:R?"borderless":"default",enableArouseMoreSkill:$}),[N,B,W,M,x,j,R]);return(0,m.useOnSwitchConversation)(e=>{(0,s.getChatSlice)("chatInputStore").closeSkillPanel(e),(0,u.getChatService)("chatInputStoreService").then(e=>{null==e||e.resetSkillReportEvent()}),(0,w.resetInputEditorValue)()}),(0,v.useEmitInputInit)(!B||W),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{ref:y,className:"h-0 w-full"}),D()]})})},717554:function(e,t,a){a.d(t,{useInitNewThread:function(){return f},useInitNewThreadOuterChatView:function(){return g}});var n=a(713738),r=a(101874),o=a(845647),l=a(698392),i=a(230932),s=a(604889),d=a(915299),u=a(441259),c=a(856392),h=a(178230),p=a(651159);let g=e=>{let{chatId:t,chatType:a,navigate:n}=e,s=(0,d.useTranslateFn)();return{localThreadSendMessage:(0,p.useLocalThreadSendMessage)({chatType:a}),sendMessageHelper:()=>{let e=t||i.useFeedStore.getState().addNewLocalConversation({reportEvent:(0,c.createReportEvent)({eventName:"create_conversation",meta:{from:"header"}}),conversation:{conversation_type:r.PcchatExprConversationType.CocoWebSub,name:s("sidebar_newChat_placeholder")},conversationId:t});return{resolveLocalConversationId:e,toNewChat:function(a){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2?arguments[2]:void 0;setTimeout(()=>{r&&(0,l.getChatStore)("chatInputStore").getState().updateHidePopoverWhenMount(t,!0);let s=new URLSearchParams({...i,type:`${o.ChatType.ThreadLocalConversation}`});null==n||n(`/chat/${e}?${s.toString()}`,{replace:a})},100)}}}}},f=e=>{let{chatId:t,chatType:a,eventPrefix:r="new_thread_view",navigate:o}=e,{chatInputRef:l}=(0,s.useChatRef)();return(0,n.useEffect)(()=>{if(!(0,u.getIsMobileOrIPad)()){var e;null===(e=l.current)||void 0===e||e.focus()}return h.logger.persist.info({eventName:`${r}_show`,meta:{localConversationId:t}}),()=>{t||h.logger.persist.warning({eventName:`${r}_without_localConversationId`})}},[]),g({chatId:t,chatType:a,navigate:o})}},248155:function(e,t,a){a.d(t,{DebugMessageProvider:function(){return s},useDebugMessage:function(){return i}});var n=a(713738),r=a(345660);let o="You are not able to invoke open returned by useDebugMessage, because DebugMessageProvider needed.",l=(0,n.createContext)({open:()=>{throw Error(o)},close:()=>{throw Error(o)}}),i=()=>(0,n.useContext)(l),s=e=>{let{children:t}=e;return(0,r.jsx)(r.Fragment,{children:t})}},755846:function(e,t,a){a.d(t,{useGuestOnlyChatPageProps:function(){return v}});var n=a(30999),r=a(746904),o=a(953423),l=a(512523),i=a(501461),s=a(156272),d=a(845647),u=a(761473),c=a(198660),h=a(297547),p=a(366119),g=a(640380),f=a(754495);let m={landing:{type:l.GuestLandingType.CHAT_CAN_USE},trackInfo:{source:i.LoginOpenSource.OTHER}},v=e=>{let t=(0,c.useIsGuest)(),{openLoginModal:a}=(0,o.useLoginModal)(),v=(0,g.useNavigate)(),w=(0,h.default)((e,n)=>{if(!t)return;let o={...m};e&&(o.trackInfo={source:e}),n&&(o.loginNavigateQuery=n),a({onSuccess:r.openSidebarIfDid,...o})}),_=(0,h.default)(n=>{t&&(null==e?void 0:e.chatType)===d.ChatType.Bot&&a({landing:{type:l.GuestLandingType.CHAT,botId:(null==e?void 0:e.chatId)||""},trackInfo:{source:n},onSuccess:r.openSidebarIfDid})}),{toChatPage:S}=(0,f.useToChatPage)(v),{run:b}=(0,p.default)(function(){let{backToRoot:e=!1,bot:t=!1,source:a=i.LoginOpenSource.OTHER,loginNavigateQuery:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e?v((0,s.addHideHomepageUrl)(n.CHAT_PAGE_ROUTE),{replace:!0}):t?_(a):w(a,r)},{leading:!0,trailing:!1,wait:250});return(0,u.useDeprecatedChatEventEffect)("chat.guest.login",b),{...t?{toChatPage:S}:{}}}},754495:function(e,t,a){a.d(t,{useConversationDisabledParams:function(){return k},useHandleChatPageHooks:function(){return x},useToChatPage:function(){return $}});var n=a(713738),r=a(865607),o=a(459735),l=a(217957),i=a(506979),s=a(30999),d=a(783477),u=a(156272),c=a(244848),h=a(442571),p=a(212183),g=a(230932),f=a(721118),m=a(777422),v=a(915299),w=a(888130),_=a(712980),S=a(227587),b=a(669986);let x=e=>{let t=(0,S.useLocation)(),a=(0,n.useRef)(0),r=(0,n.useRef)(""),{initDesktopSendMessage:o}=(0,b.useDesktopInitMessageFromState)();return{handleChatPageDestroy:e=>{var n,r,o;let{conversationId:l}=e,s=(null==t?void 0:null===(n=t.state)||void 0===n?void 0:n.enter_from)==="bot_discover",{botInfo:u}=(0,p.getInfoByConversationId)(l),c=Date.now()-(null!==(o=null==t?void 0:null===(r=t.state)||void 0===r?void 0:r.page_start_time)&&void 0!==o?o:a.current),h=(0,p.getBotIdByConversationId)(l,!0);(0,m.trackEvent)("leave_chat_page",{current_page:i.VisitPage.CHAT,bot_id:h,duration:String(c),stay_time:c,chat_type:(0,p.getChatTypeForTea)((0,w.getUserId)(),l,u),user_id:s?(0,w.getUserId)():void 0,req_id:s?null===d.getRequestIdByBotId||void 0===d.getRequestIdByBotId?void 0:(0,d.getRequestIdByBotId)(h):void 0,recommend_from:s?"bot_list_discover":void 0})},handleChatPageLoaded:n=>{var l,s,c,h,g,f;let{conversationId:v,botId:_}=n;o({conversationId:v,botId:_});let{botInfo:S,conversation:b}=(0,p.getInfoByConversationId)(v),x=(null==t?void 0:null===(l=t.state)||void 0===l?void 0:l.enter_from)==="bot_discover";if((!(null==t?void 0:null===(s=t.state)||void 0===s?void 0:s.create_chat_type)||"chat_with_bot"!==t.state.create_chat_type)&&r.current!==v){r.current=v,a.current=Date.now();let n=(0,p.getBotIdByConversationId)(v,!0),o=(0,u.getLoginSourceQuery)(t),l={...e,page:i.VisitPage.CHAT,current_page:i.VisitPage.CHAT,bot_id:n,is_tts:0,conversation_id:v,conversation_type:null==b?void 0:b.conversation_type,enter_method:null!==(g=null==t?void 0:null===(c=t.state)||void 0===c?void 0:c.enter_from)&&void 0!==g?g:"other",bot_position:null!==(f=String(null==t?void 0:null===(h=t.state)||void 0===h?void 0:h.bot_position))&&void 0!==f?f:"other",is_from_ug:"0",chat_type:(0,p.getChatTypeForTea)((0,w.getUserId)(),v,S),user_id:x?(0,w.getUserId)():void 0,req_id:x?null===d.getRequestIdByBotId||void 0===d.getRequestIdByBotId?void 0:(0,d.getRequestIdByBotId)(n):void 0,recommend_from:x?"bot_list_discover":void 0,...o?{previous_page:o}:{}};(0,m.trackEvent)("enter_page",l)}}}},k=function(){var e;let{chatType:t,chatId:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,v.useTranslateFn)(),o=(0,h.isBotChat)(t),l=(0,g.useFeedStore)(e=>{var t;return null===(t=(0,f.conversationSelector)(e,a))||void 0===t?void 0:t.bot_id}),i=o?a:l,s=e=>{if(null==e?void 0:e.disabled_tag)return({[c.DisabledTag.Reviewing]:n("bot_ban_under_review"),[c.DisabledTag.Ban]:n("bot_disabled_profile"),[c.DisabledTag.Delete]:n("disable_input_del_bot"),[c.DisabledTag.Private]:n("chat_page_notice")})[e.disabled_tag]||(null==e?void 0:e.disabled_desc)},u=e=>o?[c.DisabledTag.Ban,c.DisabledTag.Reviewing].includes(null==e?void 0:e.disabled_tag):!!(null==e?void 0:e.disabled),p=e=>{let t=i&&e.botMap[i];if(t)return{isDisabled:u(t),disabledText:s(t)}},m=(0,d.useBotStore)(p,r.shallow),w=(0,d.useGuestBotStore)(p,r.shallow);return null!==(e=null!=m?m:w)&&void 0!==e?e:{isDisabled:!1}},$=e=>({toChatPage:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{conversationId:a,query:n,...r}=t,i=`${s.CHAT_PAGE_ROUTE}${null!=a?a:""}`,d=n?(0,_.toURL)(i,(0,o.default)(n,e=>!(0,l.default)(e))):i;null==e||e(d,r)}})},944720:function(e,t,a){a.d(t,{ChatPageBaseSlots:function(){return n}});let n={Tooltip:a(214902).SamanthaTooltip}},669986:function(e,t,a){a.d(t,{DesktopSendMessageScene:function(){return u},DesktopSendMessageSecScene:function(){return c},useDesktopInitMessageFromState:function(){return h}});var n,r,o=a(678669),l=a(845647),i=a(382757),s=a(227587),d=a(640380);let u=((n={}).GlobalLauncher="global_launcher",n.TextSelectionBar="text_selection_bar",n),c=((r={}).SuggestedPrompt="suggested_prompt",r),h=()=>{let e=(0,s.useLocation)(),t=(0,d.useNavigate)();return{initDesktopSendMessage(a){var n;let{message:r,scene:s,sec_scene:d}=null!==(n=e.state)&&void 0!==n?n:{};if(!r||![u.TextSelectionBar,u.GlobalLauncher].includes(s))return;let c={text:String(r),reportParams:{scene:s,sec_scene:d},chatType:l.ChatType.Conversation,botType:"Main",...a};(0,i.sendSupportedMessage)([c]);let h=(0,o.default)(e.state,"message","scene");e.state=h,t(`${e.pathname}${e.search}`,{replace:!0,state:h})}}}},244848:function(e,t,a){var n,r;a.d(t,{BOT_DISCOVER_ROUTE:function(){return s},BotItemFromPage:function(){return l},CHAT_PAGE_ROUTE:function(){return d},CREATE_BOT_ROUTE:function(){return i},DisabledTag:function(){return o}});let o=((n={}).Reviewing="reviewing",n.Ban="ban",n.Delete="delete",n.Private="private",n.Rollback="rollback",n),l=((r={}).Discover="discover",r.Profile="profile",r),i="/chat/bot/create",s="/chat/bot/discover",d="/chat/"},502590:function(e,t,a){a.d(t,{useBrandLogoUrl:function(){return g},BrandLogo:function(){return f}});var n=a(557298),r=a(713738),o=a(812650),l=a.n(o),i=a(102249),s=a(7625),d=a(992847),u=a(231149),c={title:"title-UzWwBg",skeleton:"skeleton-Ocm8XN",clickable:"clickable-QnEMyq","avatar-wrap":"avatar-wrap-Sweopk","extra-icon":"extra-icon-EpWJsJ"},h=a(345660);let p={"white-bg":{doubao:e=>"dark"===e?a.e("269").then(a.t.bind(a,200906,17)).then(e=>e.default):a.e("66752").then(a.t.bind(a,352498,17)).then(e=>e.default),cici:()=>Promise.resolve("https://sf-flow-web-cdn.ciciaicdn.com/obj/ocean-flow-web-us/samantha/logo-icon-white-bg.png")},"blue-bg":{doubao:e=>"dark"===e?a.e("45591").then(a.t.bind(a,878272,17)).then(e=>e.default):a.e("17996").then(a.t.bind(a,566513,17)).then(e=>e.default),cici:()=>a.e("66422").then(a.t.bind(a,560485,17)).then(e=>e.default)},"grey-bg":{doubao:()=>a.e("26772").then(a.t.bind(a,382555,17)).then(e=>e.default),cici:()=>a.e("43482").then(a.t.bind(a,157395,17)).then(e=>e.default)}},g=e=>{let t=(0,i.useFGValue)(s.FGLocalDebugKeys.forceDarkMode,{source:d.FGBuiltinNames.debugStorage,defaultValue:!1})?"dark":"light",{data:a=""}=(0,u.default)(async()=>p[e].doubao(t),{refreshDeps:[e,t]});return a},f=(0,r.forwardRef)(function(e,t){let{className:a,size:r,brandName:o,theme:i,onClick:s,icon:d,...u}=e,p=g(i);return(0,h.jsxs)("div",{ref:t,...u,className:l()(a,"flex items-center",{[c.clickable]:s}),onClick:s,children:[(0,h.jsxs)("div",{className:c["avatar-wrap"],children:[p?(0,h.jsx)("img",{src:(0,n.filterUrlModule)(p,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb*x1$m5waFZ6$nNZek5OZEZre%9-%mpSemwx$2xjM%1HTj$PWHBq-l%xMlkwaFdl$nB%T1dsamJ$WjFXa014-zJJe$pIWk1NbXgx$2tk$05FeH$$bnBs%jBaN$dqTldlZz09"}),style:{width:r,height:r},draggable:!1}):(0,h.jsx)("div",{className:l()("rounded-full flex-shrink-0 opacity-[0.1]",c.skeleton),style:{width:r,height:r}}),d?(0,h.jsx)("div",{className:c["extra-icon"],children:d}):null]}),o&&(0,h.jsx)("div",{className:c.title,children:o})]})})},86019:function(e,t,a){a.d(t,{asyncDesktopShellApi:function(){return n}});let n=async()=>{let{ClientNeotixChannel:e,ShellApiBookmarks:t,ShellApiScreenshot:n,ShellApiPinWindow:r,ShellApiCloudConfig:o,ShellApiLocalLLM:l,ShellApiBrowserSettings:i,ShellApiScreenShare:s,ShellApiVoiceChat:d,ShellApiTabs:u,ShellApiLocalStorage:c,ShellApiRuntimeStorage:h,ShellApiDevice:p,ShellApiTea:g,ShellApiPreload:f,ShellApiDefaultBrowser:m,ShellApiBuiltin:v,ShellApiStartupMetric:w,ShellApiAudioCapture:_,ShellApiAgentTask:S,ShellApiSystem:b,ShellApiFs:x,ShellApiBrowserWindow:k}=await a.e("65125").then(a.bind(a,840134));return{ClientNeotixChannel:e,ShellApiBookmarks:t,ShellApiScreenshot:n,ShellApiPinWindow:r,ShellApiCloudConfig:o,ShellApiLocalLLM:l,ShellApiBrowserSettings:i,ShellApiScreenShare:s,ShellApiVoiceChat:d,ShellApiTabs:u,ShellApiLocalStorage:c,ShellApiRuntimeStorage:h,ShellApiDevice:p,ShellApiTea:g,ShellApiPreload:f,ShellApiDefaultBrowser:m,ShellApiBuiltin:v,ShellApiStartupMetric:w,ShellApiAudioCapture:_,ShellApiAgentTask:S,ShellApiSystem:b,ShellApiFs:x,ShellApiBrowserWindow:k}}},604985:function(e,t,a){a.d(t,{HeadlessDownloadClientBtn:function(){return h}});var n=a(557298),r=a(713738),o=a(178230),l=a(856392),i=a(551222),s=a(52083),d=a(651895),u=a(900545),c=a(345660);let h=e=>{let{children:t,utmSource:a=d.UG_UTM_SOURCE.web,trackMeta:h,className:p,placeholder:g}=e,f=(0,r.useRef)(!1),{currentAppConfig:m}=(0,u.useClientDownloadUrl)(a),{download_url:v,onClick:w,keyWord:_}=m;if((0,r.useEffect)(()=>{v&&!f.current&&h.showFrom&&(o.logger.persist.info({eventName:"download_window_show",meta:{type:_,scene:h.showFrom,...h}}),(0,s.trackDownloadShow)({type:_,show_from:h.showFrom,...h}),f.current=!0)},[v,h.showFrom]),!v)return g||(0,c.jsx)("div",{className:p});let S=(0,r.isValidElement)(t)?t:t(m),b=async()=>{let e=(0,l.createReportEvent)({eventName:"click_download_item",meta:{type:_,scene:h.showFrom,...h}});if(await (0,i.doubaoBanDownloadOversea)()){e.error({reason:"banned"});return}null==w||w(),(0,s.isSeoUser)(),window.open((0,n.filterUrlModule)(v||"",null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkbHBIT1ROaWJ-aDJX$mRSZEZwdFZta*tTRlo1$2xoTmRtTXpTbXBNTWs1MllsaENkb%p0$m5Wa1NFMTJZ$WRX-%ZwS*$He*pNMDEw$2tjN%0ySnRlSFpa$jF*MFd%SjRjRnB-TlRCT$-wb3dZbWs1-0dKdF$te*xRel$3WXpOb2FHTnRaREZqZHowOQ"})),e.success(),(0,s.trackDownload)({type:_,click_from:h.showFrom,...h})};return(0,c.jsx)("div",{className:p,onClick:b,children:S})};t.default=h},651895:function(e,t,a){var n,r,o;a.d(t,{DownloadPlatform:function(){return s},UG_DOWNLOAD_FROM:function(){return i},UG_UTM_SOURCE:function(){return l}});let l=((n={}).lark="401",n.nvidia="403",n.web="1002",n.seo="1003",n.loginModal="1004",n.sidebar="1005",n.unloginGuidence="1006",n.unloginChat="1007",n.screenShot="1008",n.keyFeature="1013",n.headerNotLoginDownloadBtn="1020",n.headerNotLoginPopupDownloadBtn="1021",n.voiceGuideDownloadBtn="1022",n.headerLoggedModalDownloadBtn="1023",n.meetingGuideDownloadBtn="1024",n.desExtSkillSharedAppAssistant="1029",n.loggedHeaderDownloadBtn="1025",n.loggedSuggestDownloadBtn="1026",n.loggedSuggestHoverDownloadBtn="1027",n),i=((r={}).after_answer="after_answer",r.after_answer_hover="after_answer_hover",r.upper_right="upper_right",r),s=((o={}).Mac="mac_arm",o.Windows="windows",o.OtherOSs="others_os",o.Chrome="chrome",o.Edge="edge",o.Safari="safari",o.Extensions="extensions",o)},551222:function(e,t,a){a.d(t,{doubaoBanDownloadOversea:function(){return d}});var n=a(915299),r=a(910214),o=a(472839),l=a(47563),i=a(178230);let s=null,d=async()=>{if(!s)try{var e,t;let a=await r.samanthaApiService.GetSetting({select:{region:!0}});s=(null===(t=a.data)||void 0===t?void 0:null===(e=t.region)||void 0===e?void 0:e.region)||null}catch(e){i.logger.persist.error({eventName:"doubao_ban_download_oversea_error",error:e})}return!!s&&!o.CN_COUNTRY_CODE.includes(null==s?void 0:s.toUpperCase())&&(l.SamanthaToast.warning((0,n.getUnreactiveTranslate)("region_error_toast_doubao")),i.logger.persist.log({eventName:"doubao_ban_download_oversea_toast",meta:{region:s}}),!0)}},537927:function(e,t,a){a.r(t),a.d(t,{default:function(){return t0}});var n=a(557298),r=a(713738),o=a(251913),l=a(816295),i=a(559891),s=a(165482),d=a(64206),u=a(178230),c=a(345660);let h=(0,i.withSuspense)((0,l.afterAppInitLazyComponent)(async()=>{let{useParseUrlActions:e}=await a.e("31437").then(a.bind(a,698897));return{default:e}}),()=>null);function p(e){var t;let{onReadyToParse:a,plugins:n=[]}=e,[o]=(0,d.useSearchParams)(),l=(0,r.useRef)(),i=null===(t=o.get("action"))||void 0===t?void 0:t.trim();if(!l.current){l.current=(0,s.parseJSON)(i,{});let{pfTrackParams:e,pluginId:t}=l.current;e&&u.logger.persist.info({eventName:e.phase1EventName||`urlparseplugin_phase1_duration${t?`_${t}`:""}`,meta:{duration:Date.now()-e.startJumpTime,isLazy:!0}})}let p=(0,r.useRef)(Date.now());return(0,c.jsx)(h,{plugins:n,onReadyToParse:a,isLazy:!0,phase2StartTime:p.current})}var g=a(441259),f=a(38848),m=a(86019);let v=["web_html_load_success","web_js_run_start","web_chat_list_render_success","web_guidance_render_success","web_chat_view_show","web_chat_view_interactive","web_chat_page_finish"],w=(0,o.default)(async function(e){var t;if("1"===f.FlowSessionStorage.getItem("is_reload"))return;let a=Object.entries(null!==(t=window.loadTime)&&void 0!==t?t:{}).filter(t=>{let[a]=t;return e.includes(a)});try{if(!(0,g.checkIsAllowDesktopVersion)({greaterEqualVersion:"1.50.2"}))return;let{ShellApiStartupMetric:e}=await (0,m.asyncDesktopShellApi)();e.setWebviewStartupEvent({eventParams:a.map(e=>{let[t,a]=e;return{name:t,timestamp:a.toString()}})})}catch(e){}});var _=a(30999),S=a(28414),b=a(870539),x=a(453157),k=a(812650),$=a.n(k);let T=(0,i.withSuspense)((0,l.afterAppInitLazyComponent)(()=>a.e("48570").then(a.bind(a,265220)).then(e=>({default:e.WorkspaceLogo}))));var C=a(474932),N=a(217957),R=a(502590),y=a(915299),j=a(761637),E=a(369682),I=a(161284),P=a(559425),F=a(604985);let B=["web_downloadDesktop_askDoubao","web_downloadDesktop_selectAsk","cici_desktop_web_ug_download_desktop_screenshot_qa","cici_desktop_web_ug_download_desktop_webpage_read"],W=e=>{let{utmSource:t,storageUtmSourceKey:a=t,showFrom:n,className:o}=e,l=`${a}_download_banner_hidden`,[i,s]=(0,r.useState)(()=>(0,E.isStorageLogined)()||"1"===f.FlowLocalStorage.getItem(l)),d=(0,y.useTranslateFn)(),u=(0,r.useRef)(null),{width:h}=(0,I.useResizeObserver)({ref:u}),p=!(0,N.default)(h)&&h<720,g="zh"===(0,j.getUnreactiveLanguage)();return i?null:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{ref:u,className:"w-full"}),(0,c.jsxs)("div",{className:$()("banner-H1EIX5",o),children:[(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)(R.BrandLogo,{size:36,theme:"blue-bg",className:$()("mr-8",p&&"hidden")}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"s-font-xs-strong text-s-color-text-primary m-0 min-w-211",children:d("cici_desktop_web_ug_download_desktop_title_unlogin",{brandName:d("brandName_doubao")})}),g&&(0,c.jsx)("p",{className:"s-font-xxs text-s-color-text-tertiary mt-2 truncate max-w-210",children:B.map((e,t)=>(0,c.jsxs)("span",{children:[d(e,{brandName:d("brandName_doubao")}),t!==B.length-1&&" \xb7 "]},t))})]})]}),(0,c.jsx)(F.default,{utmSource:t,trackMeta:{showFrom:n},className:"w-fit ml-12",children:e=>{let{keyWord:t}=e;return(0,c.jsx)(P.SamanthaButton,{"data-testid":"after_message_download_desktop_button",type:"tertiary",size:"small",className:"!py-5 !px-12",children:d("landing_download_download")},t)}}),(0,c.jsx)("div",{className:"w-22 h-22 rounded-6 text-s-color-text-quaternary cursor-pointer hover:bg-s-color-bg-trans p-4 ml-3 flex",onClick:e=>{e.stopPropagation(),s(!0),f.FlowLocalStorage.setItem(l,"1")},children:(0,c.jsx)(C.default,{className:"text-14"})})]})]})};var M=a(651895),D=a(862695),L=a(42869),G=a(801880),H=a(717554),O=a(845362),A=a(803147),Z=a(516655),z=a(689368),U=a(698392),J=a(10597),V=a(734690),q=a(23226),X=a(230932),K=a(721118),Q=a(334312);let Y=e=>{var t;let{className:a,chatId:n,chatType:o,activeSkillType:l,navigate:i,reportParams:s,onBeforeSendMessage:d,isSuperTaskSwitchEnabled:h}=e,p=(0,q.useSkillConfig)(),g=null==p?void 0:p.find(e=>e.skill_type===l),{matcher:f}=(0,Z.useGuidanceSuggestionsPluginMatcher)(),m=null!==(t=(null!=f?f:[]).map(e=>e({activeSkillType:l,isSuperTaskSwitchEnabled:h})).find(e=>void 0!==e))&&void 0!==t?t:l||"generic",{plugin:v,loading:w}=(0,z.useGuidanceSuggestionsPlugin)(m),_=(0,X.useFeedStore)(K.mainConvBotIdSelector),S={show_scene:"bottom_bar",skill_id:null==l?void 0:l.toString(),skill_name:(0,Q.getSkillTeaNameByType)(l),conversation_id:n,bot_id:_},b={scene:"chat_action_bar",preset_prompt_type:"default_prompt",send_source:"guidance_page_click",skill_type:l,skill_type_str:(0,Q.getSkillTypeStr)(l),skill_id:(0,Q.getSkillTypeStr)(l),...s};return((0,r.useLayoutEffect)(()=>{u.logger.persist.info({eventName:"guidance_suggestions_start",meta:b})},[l]),w||!v)?null:(0,c.jsx)("div",{className:a,children:(0,c.jsx)(v.Content,{chatId:n,chatType:o,skillConfig:g,navigate:i,reportParams:b,trackParams:S,onBeforeSendMessage:d,onAfterSendMessage:function(){let{exitSkill:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&(0,U.getChatSlice)("chatInputStore").closeSkillPanel(n)}})})};var ee=a(537624),et=a(257029),ea=a(777422),en=a(426156),er=a(728319),eo=a(888130),el=a(198660),ei=a(165994),es=a(712980),ed=a(337524),eu=a(615288),ec=a(218679),eh=a(831744),ep={greeting:"greeting-NndQQf",skeleton:"skeleton-NyOz1B","greeting-animation":"greeting-animation-zvDk7P"};let eg=e=>{let{nickname:t,isGuest:a}=e,n=(0,y.useTranslateFn)();return{greeting:(()=>{if(a)return n("newChat_greeting_title_doubao");let e=new Date().getHours();return e>=6&&e<11?n("greeting_title_prefix_morning",{postProcess:"sprintf",sprintf:[t]}):e>=11&&e<13?n("greeting_title_prefix_noon",{postProcess:"sprintf",sprintf:[t]}):e>=13&&e<18?n("greeting_title_prefix_afternoon",{postProcess:"sprintf",sprintf:[t]}):n("greeting_title_prefix_evening",{postProcess:"sprintf",sprintf:[t]})})()}},ef=(0,r.forwardRef)((e,t)=>{let{className:a,greeting:n,nickname:r}=e,o=(0,el.useIsGuest)(),{greeting:l}=eg({nickname:r,isGuest:o});return n||(0,ec.default)(r)||o?(0,c.jsx)("div",{ref:t,className:$()("text-s-color-text-secondary text-center font-semibold ml-auto mr-auto w-fit cursor-default",ep.greeting,ep["greeting-animation"],a),children:(0,c.jsx)(eh.NoSSR,{children:n||l})},n||l):(0,c.jsx)("div",{ref:t,className:$()("text-transparent text-center font-semibold ml-auto mr-auto w-fit rounded-8 cursor-default",ep.greeting,ep.skeleton,a),children:l})});var em=a(155853),ev=a(863733);let ew=e=>{var t,a,n;let{className:o,nickname:l,greeting:i,renderMainTop:s,renderBottom:d,renderMain:u,renderPlaceholder:h,...p}=e,g=(0,r.useRef)(null),f=(0,ev.default)(g),m=null!==(t=null==f?void 0:f.height)&&void 0!==t?t:56,v=(0,r.useRef)(null),w=(0,ev.default)(v),_=null!==(a=null==w?void 0:w.height)&&void 0!==a?a:45,S=(0,r.useRef)(null),k=(0,ev.default)(S),T=null!==(n=null==k?void 0:k.height)&&void 0!==n?n:132,[C,N]=(0,r.useState)(m+_+32+T);(0,r.useEffect)(()=>{N(m+_+32+T)},[m,_,T]);let{appear:R}=(0,U.useChatSlice)("chatGuidanceStore",e=>({appear:e.appear}),x.shallow);return(0,c.jsx)(b.default,{in:!0,appear:R,timeout:300,children:e=>(0,c.jsxs)(ed.SamanthaLayout.MaxWidthLayout,{...p,containerClassName:"h-[calc(100%+56px)] -mt-56",className:$()(o,"flex flex-col",eu.default[`fade-${e}`]),children:[(0,c.jsx)("div",{ref:g,className:"min-h-56 flex-1"}),(0,c.jsxs)("div",{className:"w-full",children:[null==s?void 0:s(),(0,c.jsx)(ef,{ref:v,nickname:l,greeting:i}),(0,c.jsx)("div",{ref:S,children:null==u?void 0:u()}),(0,c.jsx)("div",{className:"relative h-0 w-full",children:(0,c.jsx)("div",{className:"absolute top-0 left-0 right-0",style:{height:`calc(100vh - ${C}px)`},children:null==d?void 0:d()})}),(0,c.jsx)("div",{className:"opacity-0 select-none pointer-events-none z-0",children:null==h?void 0:h()})]}),(0,c.jsx)("div",{className:"flex-1 min-h-0"}),(0,c.jsx)(em.ChatPerfHtmlLoaded,{name:"guidance_group_html_loaded"})]})})};var e_={fallback:"fallback-fo7Uln",greeting:"greeting-K4eraR","fade-entering":"fade-entering-S1NyM3",fadeEntering:"fade-entering-S1NyM3",fadein:"fadein-Oe7QGL","fade-exiting":"fade-exiting-Q7EIzl",fadeExiting:"fade-exiting-Q7EIzl",fadeout:"fadeout-o7Wncl","fade-exited":"fade-exited-GIRDBS",fadeExited:"fade-exited-GIRDBS","download-client-banner":"download-client-banner-IeVJvf",downloadClientBanner:"download-client-banner-IeVJvf",icp:"icp-t0_SJ3",oversea:"oversea-BBFe5U","skill-placeholder-last-shift":"skill-placeholder-last-shift-HykGA4",skillPlaceholderLastShift:"skill-placeholder-last-shift-HykGA4"};let eS=()=>(0,eo.useUserProfile)(),eb=()=>{let e=(0,el.useIsLoggedIn)();return(0,E.isStorageLogined)()||e},ex=(e,t)=>{let{matcher:a}=(0,Z.useGuidanceSuggestionsPluginMatcher)(),n=(0,L.useSuperTaskStore)(e=>e.isSuperTaskEnableByConvId()),r=(null!=a?a:[]).map(t=>t({activeSkillType:e,isSuperTaskSwitchEnabled:n})).find(e=>void 0!==e),{plugin:o,loading:l}=(0,z.useGuidanceSuggestionsPlugin)(null!=r?r:e||"generic"),i=(null==o?void 0:o.titleKey)?t(o.titleKey):void 0,s=(0,ei.default)(i,()=>!0);return{greeting:l?s:i}},ek=(0,r.forwardRef)(function(e){var t;let{chatId:a,chatType:l,navigate:i}=e,s=(0,y.useTranslateFn)(),[d,h]=(0,r.useState)(!0),p=(0,es.getUrlParams)("enter_from")||(0,et.getTeaParamFromSessionStorage)("enter_from"),g=eS(),[f]=(0,r.useState)(null==g?void 0:g.is_default_nickname),m=null===(t=(0,eo.useUserInfo)())||void 0===t?void 0:t.name,v=eb(),w=(0,G.useEnableSuperTaskAB)(),{localThreadSendMessage:_,sendMessageHelper:k}=(0,H.useInitNewThread)({chatId:a,chatType:l,navigate:i});(0,r.useEffect)(()=>{let e=async(e,t)=>{let{resolveLocalConversationId:a,toNewChat:n}=k();h(!1);let r=await _(a,t);return n(),r};return O.chatViewMessageEventBus.on("processMessageBefore",e),()=>{O.chatViewMessageEventBus.off("processMessageBefore",e)}},[_,k]);let C=(0,el.useIsGuest)(),{activeSkillType:N}=(0,U.useChatSlice)("chatInputStore",e=>{var t;return{activeSkillType:a?null===(t=e.activeSkillTypeMap)||void 0===t?void 0:t[a]:void 0}},x.shallow),R=(0,L.useSuperTaskStore)(e=>e.isSuperTaskEnableByConvId(a)&&w.enableSuperTask);(0,r.useEffect)(()=>{(0,ea.trackEvent)("enter_page",{is_from_ug:"0",enter_from:p})},[]),(0,r.useEffect)(()=>{(0,U.getChatSlice)("chatInputStore").closeSkillPanel(a)},[a]);let j=(e,t)=>{null==i||i(e,{...t,state:{from:A.SkillGuidancePageFrom.GUIDANCE_SUGGESTIONS,...null==t?void 0:t.state}})},{greeting:E}=ex(N,s),{onBeforeSendMessage:I}=(0,J.useGuestInputInteract)({chatId:a,chatType:l,activeSkillType:N,checkNewGuidanceAb:!0,source:"skill_guidance_suggestions",eventName:"skill_guidance_suggestions_guest_login",meta:{skill_type:N,skill_type_str:(0,Q.getSkillTypeStr)(N),skill_id:(0,Q.getSkillTypeStr)(N)}}),P={new_guidance:"1",is_skill_bar_bottom:"1"},F=()=>(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(ee.GuidanceInputFoundation,{chatId:a,chatType:l,reportParams:P,showExitSkillButton:!0})}),B=(0,r.useCallback)((0,o.default)(()=>{N||u.logger.persist.info({eventName:"guidance_page_start",meta:P})}),[N]);(0,r.useEffect)(()=>{d&&"undefined"!=typeof window&&B()},[B,d]);let Z=()=>(0,c.jsx)(T,{});return(0,c.jsxs)(en.ErrorBoundary,{logger:u.logger,FallbackComponent:er.DefaultErrorFallback,errorBoundaryName:"guidance_chat_view_error",errorBoundaryScope:en.ErrorBoundaryScopeEnum.Component,children:[(0,c.jsx)(b.default,{in:d,unmountOnExit:!0,timeout:400,children:e=>(0,c.jsx)(ew,{chatId:a,isSuperTaskAB:w.enableSuperTask,"data-testid":"chat-input-guidance-page",className:e_[`fade-${e}`],greeting:E,nickname:f?s("newChat_greeting_askQuestion"):(null==g?void 0:g.nickname)||m,renderMainTop:Z,renderMain:F,renderBottom:()=>(0,c.jsx)(Y,{className:"h-full",chatId:a,chatType:l,navigate:j,activeSkillType:N,reportParams:P,onBeforeSendMessage:I,isSuperTaskSwitchEnabled:R}),renderPlaceholder:()=>(0,c.jsx)(V.InputBottomGuidanceCenterSkillBarShowAllSkillsPlaceholder,{className:"pt-28",containerClassName:v?e_.skillPlaceholderLastShift:void 0})})}),!N&&C&&(0,c.jsxs)(ed.SamanthaLayout.MaxWidthLayout,{children:[(0,c.jsx)(W,{className:$()(e_["download-client-banner"],!1),utmSource:M.UG_UTM_SOURCE.unloginGuidence,showFrom:"landing"}),(0,c.jsxs)("a",{className:e_.icp,href:(0,n.filterUrlModule)(D.icpLink,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRP$2xr$0%1d1ltM$dlb%41T1c1-$Z6$nNZMjFz-Wt4WFRuWmlibHBzWTI1T2FH%khiSFpp-$RsNlkyM%5kb*x0-kRaT$-wNTJZb*hDZ*1KdFZu$mtRemx1WkZkc2ExbFhO$3Bh$Xp*c$l$ZEdNRXhZ$25C-$dHTjJZ$mMx-TFwW$oz$mtTRTQw$1ZoS2Jt%ll%$DA9"}),target:"_blank",rel:"noreferrer",children:[(0,c.jsx)(S.default,{className:"text-14"}),(0,c.jsx)("p",{className:"m-0",children:"\u4EACICP\u59072023020373\u53F7-1"})]})]})]})});var e$=a(266655),eT=a(690743),eC=a(845647),eN=a(956801),eR=a(364756),ey=a(615747),ej=a(771106),eE=a(273643),eI=a(559613),eP=a(659896),eF=a(701355),eB=a(701514),eW=a(717529);let eM=()=>null,eD=(0,eR.withChatRefProviderContext)((0,r.forwardRef)(function(e){let{chatViewConfig:t,isNewGuestGuidance:a,isNewGuidance:n,navigate:o,ChatHeader:l,ChatInput:i,ChatView:s,footerWithNoSSR:d}=e;return(0,r.useMemo)(()=>{let e=(0,eI.createBizWithSlots)(eE.ChatFooter,{ChatInputSlot:i});return d?(0,eh.withNoSSR)(e,()=>(0,c.jsx)(ed.SamanthaLayout.MaxWidthLayout,{children:(0,c.jsx)("div",{className:$()("pt-16 flex flex-col justify-between items-center relative","mb-12",(0,g.getIsIPad)()?"pb-[max(36px,var(--safe-bottom))]":"pb-[var(--flow-chat-pb,8px)]"),children:(0,c.jsx)(ej.ChatInputSkeletonUI,{placeholder:(0,y.getUnreactiveTranslate)("default_input_placeholder")})})})):e},[i,s,l,a]),(0,c.jsx)(ey.ChatPageUI,{interClassName:n?"!overflow-visible":"",canSendFile:!0,canSendImage:!0,renderChatFooter:void 0,renderChatHeader:()=>l&&(0,c.jsx)(l,{chatId:(null==t?void 0:t.chatId)||"",chatType:eC.ChatType.NewThread}),children:e=>{let{chatViewRef:a}=e;return(0,c.jsx)(s,{ref:a,chatId:(null==t?void 0:t.chatId)||"",chatType:eC.ChatType.NewThread,MessageListSlot:eM,navigate:o})}})})),eL=(0,o.default)(()=>{eN.useTracingStore.getState().addDurationPoint("server_libra_guidance_consume_start")}),eG=(0,r.forwardRef)(function(e){let{chatViewConfig:t,GuidanceChatView:a,baseSlots:n}=e;(0,eT.useSyncChatViewConfig)(t);let o=(0,r.useMemo)(()=>n,(0,e$.default)(n));g.inBrowser&&eL();let{isNewGuidance:l}=(0,eW.useNewGuidanceAb)({report:!0});return(0,c.jsx)(eB.LoggerContext.Provider,{value:u.logger,children:(0,c.jsx)("div",{className:"flex relative w-full h-full overflow-hidden justify-center select-none",dir:(0,eF.getLanguageDirection)(),"data-testid":"chat_page",children:(0,c.jsx)(eP.BaseSlotsProvider,{value:o,children:(0,c.jsx)(eD,{...e,isNewGuidance:l,ChatView:l&&a?a:e.ChatView})})})})});var eH=a(865607),eO=a(339641),eA=a(971857),eZ=a(792642),ez=a(214071),eU=a(894265),eJ=a(666196),eV=a(679224);let eq=()=>{let e=(0,j.getUnreactiveLanguage)(),t=(0,U.useChatSlice)("chatViewCoreStore",e=>e.currentChatViewConfig,x.shallow),a=(0,eJ.useChatService)("chatConfigService"),{getSkillListPrefetch:n}=null!=a?a:{},o=null==t?void 0:t.chatId,{data:l,loading:i}=(0,eV.useLoadSkillList)({logRequest:eU.logSkillListConsumeRequest,chatId:o,language:e,getSkillListPrefetch:n,reportParams:{from:"guidance_view"}});(0,r.useEffect)(()=>{i||(0,ez.default)(null==l?void 0:l.onboardingSkills)||(0,U.getChatStore)("chatGuidanceStore").setState({sidebarSkills:null==l?void 0:l.sidebarSkills,onboardingSkills:null==l?void 0:l.onboardingSkills})},[l,i])};var eX=a(188315);let eK=e=>{let{className:t,guidancePanelProps:a}=e,n=(0,U.useChatSlice)("chatViewCoreStore",e=>e.currentChatViewConfig,x.shallow),o=(0,eZ.useIsNarrowScreen)(),l=null==n?void 0:n.chatId,i=(null==n?void 0:n.chatType)!==eC.ChatType.Conversation,{samanthaBotInfo:s}=(0,eA.useSamanthaBot)(),d=(0,X.useFeedStore)(K.mainConvBotIdSelector),u=(0,r.useRef)("");u.current=null!=d?d:s.bot_id;let h=function(e,t){for(var a=arguments.length,n=Array(a>2?a-2:0),r=2;r<a;r++)n[r-2]=arguments[r];let o=0;return function a(){o>10||u.current?(0,ea.trackEvent)(e,{...t,bot_id:u.current},...n):(o++,setTimeout(a,200))}()},{appear:p,className:g}=(0,U.useChatSlice)("chatGuidanceStore",e=>({appear:e.appear,className:e.className}),x.shallow);eq();let f=(0,r.useRef)(null);return(0,r.useEffect)(()=>{var e;null===(e=f.current)||void 0===e||e.scrollTo({top:0})},[]),(0,c.jsx)(b.default,{in:!0,appear:p,timeout:300,children:e=>(0,c.jsx)("div",{ref:f,className:$()("w-full h-full overflow-y-scroll flow-scrollbar",eu.default["guidance-padding-right"],eu.default[`fade-${e}`],g,t),children:(0,c.jsx)(ed.SamanthaLayout.MaxWidthLayout,{containerClassName:eu.default["guidance-max-width-container"],children:(0,c.jsx)(eX.GuidancePanel,{conversationId:l,narrow:o,...a,trackMeta:{botId:u.current,isLocalConversation:i,...null==a?void 0:a.trackMeta},trackEvent:h,className:null==a?void 0:a.className})})})})};var eQ=a(604889),eY=a(460821),e0=a(227587),e1=a(640380),e2=a(856392),e5=a(801190),e4=a(746904),e6=a(953423),e3=a(501461),e7=a(181760),e9=a(275821),e8=a(300944),te=a(729730),tt=a(370012),ta=a(928167),tn=a(589827),tr=a(155692),to=a(28703),tl=a(883393),ti=a(524129),ts=a(297547),td=a(949932),tu=a(47563),tc=(0,a(430261).IconFactory)((0,c.jsx)(e=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,c.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M20.014 9.046a.514.514 0 0 1-.512.454.52.52 0 0 1-.515-.452c-.241-1.445-.452-2.18-.906-2.634-.455-.453-1.186-.66-2.612-.9A.52.52 0 0 1 15 5.002c0-.275.206-.487.473-.513 1.422-.242 2.153-.454 2.607-.91s.666-1.191.907-2.623A.52.52 0 0 1 19.502.5c.273 0 .473.197.512.458.24 1.43.451 2.165.906 2.622.455.455 1.187.667 2.61.909.266.027.47.24.47.513a.52.52 0 0 1-.468.512c-1.425.24-2.157.452-2.612.907-.455.456-.666 1.192-.907 2.625M7 14.476c0-.54.437-.976.976-.976h8.048c.54 0 .976.437.976.976v4.048a1 1 0 0 1-.025.22H16l-1.793-2.037a.976.976 0 0 0-1.35-.111l-1.955 1.6-.778-.65a.976.976 0 0 0-1.315.06l-.59.59-.61.73h-.522A1 1 0 0 1 7 18.525zm3.293 1.975a.976.976 0 1 0 0-1.951.976.976 0 0 0 0 1.951M7.75 6a.75.75 0 0 0 0 1.5h4.5a.75.75 0 0 0 0-1.5zM7 9.75A.75.75 0 0 1 7.75 9h3.5a.75.75 0 0 1 0 1.5h-3.5A.75.75 0 0 1 7 9.75M19 21v-9.551q.24.05.502.051A2.34 2.34 0 0 0 21 10.974V21a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h12.054c-.084.45-.158.754-.23.972-.05.151-.089.223-.105.25a1.3 1.3 0 0 1-.245.104c-.28.093-.703.19-1.4.309-.354.048-.69.175-.985.365H5v18z",clipRule:"evenodd"})}),{})),th=a(806889),tp=a(394872),tg=a(2551),tf=a(569648),tm=a(731232),tv=a.p+"static/image/bg.117c3148.png";let tw=e=>{let{Icon:t,text:a}=e,n=(0,y.useTranslateFn)();return(0,c.jsxs)("span",{className:"flex whitespace-nowrap",children:[(0,c.jsx)(t,{className:"text-14 p-2 text-s-color-text-tertiary flex items-center justify-center"}),(0,c.jsx)("span",{className:"ml-4 s-font-small-strong text-s-color-text-tertiary",children:n(a,{brandName:n("brandName_doubao")})})]})},t_=[[{Icon:tg.default,text:"cici_desktop_web_ug_download_desktop_ask_doubao_anytime"},{Icon:th.default,text:"cici_desktop_web_ug_download_desktop_text_selection"}],[{Icon:tp.default,text:"cici_desktop_web_ug_download_desktop_screenshot_qa"},{Icon:tc,text:"cici_desktop_web_ug_download_desktop_webpage_read"}]],tS=e=>{let{utmSource:t,showFrom:a,className:o,withTopMargin:l=!1}=e,i=`${t}_download_banner_hidden`,[s,d]=(0,r.useState)(()=>(0,E.isStorageLogined)()||"1"===f.FlowLocalStorage.getItem(i)),u=(0,r.useRef)(null),h=(0,y.useTranslateFn)(),{width:p}=(0,I.useResizeObserver)({ref:u}),g=p&&p<637;return s?null:(0,c.jsx)("div",{className:$()("banner-NNqoXm","relative w-full rounded-20 min-h-158 bg-[rgba(255,255,255,0.8)] border border-solid border-s-color-border-tertiary",{"mt-20":l},o),ref:u,children:(0,c.jsxs)("div",{className:"relative flex justify-between",children:[(0,c.jsx)("div",{className:"absolute -top-6 -right-6 w-20 h-20 rounded-10 bg-s-color-bg-body s-shadow-lv2",onClick:e=>{e.stopPropagation(),d(!0),f.FlowLocalStorage.setItem(i,"1")},children:(0,c.jsx)(C.default,{className:$()("cursor-pointer","close-j0X2eh")})}),(0,c.jsxs)("div",{className:$()("flex grow shrink flex-col py-20 pl-30",g&&"pr-30"),children:[(0,c.jsx)("span",{className:"s-font-h3 text-s-color-text-primary mt-4",children:h("cici_desktop_web_ug_download_desktop_title_unlogin",{brandName:h("brandName_doubao")})}),(0,c.jsx)("div",{className:"flex gap-x-16 flex-wrap",children:t_.map((e,t)=>(0,c.jsx)("div",{className:"mt-8 flex gap-x-16 flex-wrap",children:e.map(e=>(0,c.jsx)(tw,{...e},e.text))},t))}),(0,c.jsx)(F.default,{utmSource:t,trackMeta:{showFrom:a},children:e=>{let{keyWord:t,icon_url:a,title:r,fallback_Icon:o}=e;return(0,c.jsxs)(P.SamanthaButton,{"data-testid":"after_message_download_desktop_button",type:"tertiary",size:"medium",className:$()("mt-16 !h-40 !rounded-s-radius-s !border-0 shadow-[0px_6px_10px_0px_#2A3C4F0D] flex items-center justify-center text-s-font-base-strong !pr-14","btn-Lm_awj"),icon:"string"==typeof a?(0,c.jsx)(tm.default,{width:20,height:20,src:(0,n.filterUrlModule)(a,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkbHBIT1ROaWJ-aDJX$mRSZEZwdFZta*tTRlo1$2xoTmRtTXpTbXBNTWs1MllsaENkb%p0$m5Wa1NFMTJXa2M1TTJKd*$IWlpWM%-w$1RKN*N*cFhO$EJN$jBwb1ltMDFiR05wT1hCaWJWSnNa$%0xT%dNemFHa*pi$1F4WTNjO$BRPT0"}),fallback:o,preview:!1}):a,children:[r&&h(r),(0,c.jsx)(tf.default,{className:"text-12 p-2 ml-4"})]},t)}})]}),(0,c.jsx)("img",{className:"w-175 shrink-0 self-center rounded-r-20",src:(0,n.filterUrlModule)(tv,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkbHBIT1ROaWJ-aDJX$mRSZEZwdFZta*tTRlo1$2xoTmRtTXpTbXBNTWs1MllsaENkb%p0$m5Wa1NFMTJXa2M1TTJKd*$IWlpWM%-w$1RKN*N*cFhO$EJN$jBwb1ltMDFiR05wT1hCaWJWSnNa$%0xT%dNemFHa*pi$1F4WTNjO$BRPT0"}),style:{display:g?"none":""}})]})})};var tb=a(479878),tx=a(412537),tk=a(4137),t$=a(708693);let tT=()=>{let e=(0,U.useChatSlice)("chatViewCoreStore",e=>e.currentChatViewConfig);return!e||(0,tk.default)(null==e?void 0:e.chatId)||(0,tk.default)(null==e?void 0:e.chatType)?null:(0,c.jsx)("div",{className:"mb-64",children:(0,c.jsx)(t$.ChatInput,{chatId:e.chatId,chatType:e.chatType,enableArouseMoreSkill:!1})})};var tC=a(577180),tN=a(721842);let tR=()=>{let e=(0,U.useChatSlice)("chatViewCoreStore",e=>e.currentChatViewConfig,eH.shallow),{openFileByKey:t}=(0,e9.useOpenPdfImmersive)({chatViewConfig:e}),a="sm"===(0,tl.useAppSizeType)({sm:800,md:1200});return{openReadCanvas:(0,ts.default)(e=>{if(!a&&e.key){let a=e.file_name||e.key||"",n=(0,td.getFileType)((0,td.getFileExt)(a));"PDF"===n&&(null==t||t(e.key,n,{pdf:{fileName:a,realFileKey:e.key},openFrom:"click_template_in_unlogin_guidance_page",delayToIntension:!0},{skillType:ti.SkillType.ReadPDF}))}})}},ty=()=>{let e;let t=new Promise(t=>e=t);if(X.useFeedStore.getState().threadFeedStatus.initiated||X.useFeedStore.getState().threadFeedStatus.failed)null==e||e(void 0);else{let t=X.useFeedStore.subscribe(a=>{(a.threadFeedStatus.initiated||a.threadFeedStatus.failed)&&(null==e||e(void 0),t())})}return t},tj=()=>{let{openLoginModal:e}=(0,e6.useLoginModal)(),t=(0,U.useChatSlice)("chatViewCoreStore",e=>e.currentChatViewConfig,eH.shallow),{openReadCanvas:a}=tR();return async n=>{var r;let{guidance:o}=n;if(await (0,el.getLoginLoadingPromise)(),(0,el.getIsGuest)()){await ty();let{isGuestAndNewChatReachLimit:a}=(0,tC.getGuestNewChatConfig)();if(a&&(null==t?void 0:t.chatType)===eC.ChatType.NewThread)return tu.Toast.error((0,y.getUnreactiveTranslate)("touristMode_chat_count_limitation_toast")),e({trackInfo:{source:e3.LoginOpenSource.GUIDANCE_GROUP},onSuccess:e4.openSidebarIfDid}),!1}let{message:l}=o;(null==l?void 0:null===(r=l.files)||void 0===r?void 0:r.length)&&a(l.files[0])}},tE=()=>void 0,tI=(0,ta.GuidanceGroupsGlueComposer)(e8.GuidanceGroups,()=>{let e=tE(),t=(0,tb.useBaseCustomGuidanceGroupsDataV2)(),{sendMessage:a}=(0,eJ.useChatService)("chatMessageService"),n=tj();return{...t,...e,sendMessage:a,beforeClick:n}}),tP=()=>void 0,tF=(0,tn.GuidanceGroupsGlueComposerV4)(te.GuidanceGroups,()=>{var e;null===(e=tP())||void 0===e||e.onboardingSkills;let t=(0,tb.useBaseCustomGuidanceGroupsDataV4)(),a=(0,q.useOnboardingSkills)(),{sendMessage:n}=(0,eJ.useChatService)("chatMessageService"),r=tj();return{...t,onboardingSkills:a,sendMessage:n,beforeClick:r}}),tB={[e7.GuidanceMode.SimpleSkills]:tF,[e7.GuidanceMode.InputCenter]:tI},tW=(0,i.withSuspense)((0,l.afterAppInitLazyComponent)(()=>a.e("6464").then(a.bind(a,840284)))),tM=(0,tr.GreetingComposer)(tt.GuidanceGreeting,function(){return(0,tx.useCSRCustomGreetingData)({extraNode:(0,c.jsx)(tW,{})})}),tD=(0,r.createContext)({isInputCenter:!1,loading:!0,hasGuestGuidanceBanner:!1}),tL=e=>{let{isInputCenter:t,loading:a,hasGuestGuidanceBanner:n,...r}=e,o=(0,eY.useCompareMemo)({isInputCenter:t,loading:a,hasGuestGuidanceBanner:n},eH.shallow);return(0,c.jsx)(tD.Provider,{value:o,children:(0,c.jsx)(to.Layout,{...r,className:$()(r.className,{"guidance-view-layout-J87abZ":!o.isInputCenter,"guidance-view-guest-layout-k6tiZj":o.isInputCenter})})})},tG={LayoutSlot:e=>{let{value:t}=(0,e5.useGuidanceMode)();return(0,c.jsx)(tL,{isInputCenter:t===e7.GuidanceMode.InputCenter,loading:!1,hasGuestGuidanceBanner:!0,...e})},GuidanceGroupsSlot:e=>{let{value:t}=(0,e5.useGuidanceMode)();return(0,r.createElement)(tB[t],e)},GreetingSlot:tM,SearchInputSlot:()=>{let{isInputCenter:e}=(0,r.useContext)(tD);return e?(0,c.jsx)(tT,{}):null},BottomBannerSlot:()=>{let{isInputCenter:e,hasGuestGuidanceBanner:t}=(0,r.useContext)(tD);return e?(0,c.jsxs)(eh.NoSSR,{children:[t&&(0,c.jsx)(tS,{utmSource:M.UG_UTM_SOURCE.unloginGuidence,showFrom:"landing"}),(0,c.jsx)("div",{className:$()("flex-shrink-0 flex-1","min-h-80")}),(0,c.jsx)("a",{className:`
            mx-auto mb-12 w-fit rounded-s-radius-xxss px-6 py-2 text-s-color-text-quaternary
            transition-colors s-font-xs-strong
            hover:bg-s-color-bg-trans
          `,href:(0,n.filterUrlModule)(tN.registrationLink,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRP$2xr$0%1d1ltM$dlb%41T1d0-$dFSj$Xb*RP-%dSSFZtdE1WMD$2$1Zo%mRHTkhSbT$h$XpsNlkyM%5kb*t5T1hSalJ6bDFXb*MxT%dON%9Xc*tXRTR3WWpJd2R*b3pWbkJh%jBaM$d%SlZkR05I%m5W-$-zZDJZ$mMx-TFwW$oz$mtTRTQw$1ZoS2Jt%ll%$DA9"}),target:"_blank",rel:"noreferrer",children:(0,c.jsx)("p",{className:"m-0",children:"\u4EACICP\u59072023020373\u53F7-1"})})]}):null}};var tH=a(941114);let tO=(0,r.forwardRef)(e=>{let{chatId:t,chatType:a}=e,n=(0,es.getUrlParams)("enter_from"),{scrollRef:l}=(0,eQ.useChatRef)(),i=(0,e0.useLocation)(),s=(0,e1.useNavigate)(),{localThreadSendMessage:d,sendMessageHelper:h}=(0,H.useInitNewThread)({chatId:t,chatType:a,navigate:s});(0,r.useEffect)(()=>{let e=async(e,t)=>{var a;await (null===(a=l.current)||void 0===a?void 0:a.scrollToBottom()),f(!1);let{resolveLocalConversationId:n,toNewChat:r}=h(),o=await d(n,t);return r(),o};return O.chatViewMessageEventBus.on("processMessageBefore",e),()=>{O.chatViewMessageEventBus.off("processMessageBefore",e)}},[d,h]);let p=(0,X.useFeedStore)(K.mainConvBotIdSelector,eH.shallow),[g,f]=(0,r.useState)(!0);(0,r.useEffect)(()=>{/^\d{32}$/.test(t)&&s(_.CHAT_PAGE_ROUTE,{replace:!0})},[]);let m=(0,eN.useTracingStore)(e=>i.key===e.chatLayoutEnterPageKey),v=(0,r.useMemo)(()=>{if(!m)return;let e=(0,e2.createReportEvent)({eventName:"init_chat_app_guidance",meta:{enter_pid:eN.useTracingStore.getState().enterPid}});return{...e,error:t=>{e.error(t),eN.useTracingStore.getState().error(t.reason,t.error)}}},[m]),{value:w}=(0,e5.useGuidanceMode)(),S=(0,eY.useCompareMemo)({slots:tG,reportEvent:v,greetingClassName:"select-none cursor-default",trackMeta:{botId:p,conversationType:eC.ChatType.NewThread,currentPage:`${(0,eO.getVisitPage)().current_page}`}},eH.shallow);(0,r.useEffect)(()=>{(0,ea.trackEvent)("enter_page",{is_from_ug:"0",enter_from:n})},[]),(0,r.useEffect)(()=>{(0,U.getChatSlice)("chatInputStore").closeSkillPanel(t)},[t]);let x=(0,r.useCallback)((0,o.default)(()=>{u.logger.persist.info({eventName:"guidance_page_start"})}),[w]);return(0,r.useEffect)(()=>{g&&"undefined"!=typeof window&&x()},[x,g]),(0,c.jsx)(en.ErrorBoundary,{logger:u.logger,FallbackComponent:er.DefaultErrorFallback,errorBoundaryName:"new_thread_error",errorBoundaryScope:en.ErrorBoundaryScopeEnum.Component,children:(0,c.jsx)(b.default,{in:g,unmountOnExit:!0,timeout:400,children:e=>(0,c.jsx)(eK,{className:$()(tH.default[`fade-${e}`],tH.default["slide-up"]),guidancePanelProps:S})})})});var tA=a(216714),tZ=a(755846),tz=a(944720),tU=a(997022),tJ=a(633486),tV=a(853588),tq=a(946537),tX=a(120118),tK=a(832009);let tQ=(0,o.default)(()=>{eN.useTracingStore.getState().addDurationPoint("chat_page_first_render")}),tY=()=>{"undefined"!=typeof window&&tQ(),(0,r.useEffect)(()=>{var e;eN.useTracingStore.getState().addDurationPoint("chat_page_mount"),e="web_guidance_render_success","undefined"!=typeof window&&window.loadTime&&(e&&(window.loadTime[e]=Date.now()),v.every(e=>{var t;return!!(null===(t=window.loadTime)||void 0===t?void 0:t[e])})&&w(v))},[]),(0,tU.useOnce)(()=>{var e,t;null===(e=(t=(0,U.getChatSlice)("chatGuidanceStore")).setActiveSkillGuidanceIdentifier)||void 0===e||e.call(t)});let e=(0,tC.useChatViewConfigByPath)(),t=(0,e1.useNavigate)(),{value:a}=(0,e5.useIsNewGuestGuidance)();return(0,tZ.useGuestOnlyChatPageProps)(),(0,c.jsx)(eG,{chatViewConfig:e,baseSlots:tz.ChatPageBaseSlots,isNewGuestGuidance:a,ChatHeader:tA.CustomChatHeader,ChatInput:t$.ChatInput,ChatView:tO,GuidanceChatView:ek,navigate:t,footerWithNoSSR:!1})};function t0(){let e=(0,e0.useLocation)();if((0,tJ.useIsToutiao)()){window.location.replace((0,n.filterUrlModule)(`${_.MOBILE_DOWNLOAD_ROUTE}${e.search}${e.hash}`,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xsW$FuZE1WMXB6WWpOamRH%XlWbWxNTTA1N$d-az$iR0p1$W5sbF$6RjBX$mRzZF$3elNuWmtXRkpzWTNrNWFtRkhSakJNTTBKb1dqSlZk$1JJ$*pSWldFcH$aRmhO%FE9PQ"}));return}return e.pathname===tq.CHAT_PAGE_WITHOUT_END_SLASH?(0,c.jsx)(tV.Navigate,{to:`${tq.CHAT_PAGE_ROUTE}${e.search}${e.hash}`,state:e.state,replace:!0,relative:"route"}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(tX.ChatIdPrefetch,{}),(0,c.jsx)(r.Suspense,{fallback:(0,c.jsx)(tK.default,{}),children:(0,c.jsx)(tY,{})}),(0,c.jsx)(p,{plugins:[]})]})}},120118:function(e,t,a){a.d(t,{ChatIdPrefetch:function(){return r}});var n=a(816295);let r=(0,a(559891).withSuspense)((0,n.afterAppInitLazyComponent)(()=>a.e("36349").then(a.bind(a,660961))))}}]);
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["18530"],{888130:function(e,t,n){n.d(t,{getUserId:function(){return i},getUserInfo:function(){return o},useUserIdStr:function(){return d},useUserInfo:function(){return a},useUserNickName:function(){return s},useUserProfile:function(){return l}});var r=n(453157),u=n(797840);let o=()=>u.useFlowAccountStore.getState().userInfo,a=()=>(0,u.useFlowAccountStore)(e=>e.userInfo,r.shallow),i=()=>{var e;return null===(e=o())||void 0===e?void 0:e.user_id_str},l=()=>(0,u.useFlowAccountStore)(e=>e.userProfile,r.shallow),s=()=>(0,u.useFlowAccountStore)(e=>{var t;return null===(t=e.userInfo)||void 0===t?void 0:t.name}),d=()=>(0,u.useFlowAccountStore)(e=>{var t;return null===(t=e.userInfo)||void 0===t?void 0:t.user_id_str})},698392:function(e,t,n){n.d(t,{getAsyncChatStore:function(){return d},getChatSlice:function(){return f},getChatStore:function(){return s},useChatSlice:function(){return g},useChatStore:function(){return c}});var r=n(713738),u=n(580296),o=n(436531);let a=(e,t)=>{let{storeContainer:n}=(0,o.getStoreResourceController)();if(n.isBound(e)&&n.unbind(e),!t)throw Error(`chat-ioc-manager: cannot bind empty store of ${e}`);n.bind(e,t)},i=e=>{let{storeContainer:t}=(0,o.getStoreResourceController)();if(t.isBound(e))return t.get(e)},l=e=>{let{resourceStore:t}=(0,o.getStoreResourceController)();return t.getState()[e]},s=e=>{var t;let n=i(e);if(n)return n;let r=null===(t=l(e))||void 0===t?void 0:t.load();if(r instanceof Promise)throw Error(`get store ${e} fail, it is async store, please use getAsyncStore instead`);a(e,null==r?void 0:r());let u=i(e);if(u)return u;throw Error(`chat-ioc-manager: store ${e} not found`)},d=async e=>{var t;let n=i(e);if(n)return n;let r=await (null===(t=l(e))||void 0===t?void 0:t.load());a(e,null==r?void 0:r());let u=i(e);if(u)return u;throw Error(`chat-ioc-manager: store ${e} not found`)},c=e=>(0,r.useMemo)(()=>s(e),[e]);function f(e){var t;return null===(t=s(e))||void 0===t?void 0:t.getState()}function g(e,t,n){let r=c(e);return(0,u.useStore)(r,t,n)}},717529:function(e,t,n){n.d(t,{useNewGuidanceAb:function(){return d}});var r,u=n(713738),o=n(207729),a=n(7625),i=n(198660),l=n(369682);let s=((r={}).NORMAL="normal",r.SKILL_BAR_BOTTOM="skill-bar-bottom",r),d=function(){let{report:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.useIsLoginLoading)(),n=(0,l.isStorageLogined)(),r=(0,i.useIsLoggedIn)(),{value:d,loading:c}=(0,o.useServerAb)({eventName:e?"new_guidance_ab":void 0,abResultKey:"new_guidance_type",defaultValue:s.SKILL_BAR_BOTTOM,debugKey:a.FGLocalDebugKeys.newGuidanceType}),{value:f,loading:g}=(0,o.useServerAb)({eventName:e?"new_guest_guidance_ab":void 0,isLogin:!1,abResultKey:"new_guest_guidance_type",defaultValue:s.SKILL_BAR_BOTTOM,debugKey:a.FGLocalDebugKeys.newGuestGuidanceType}),S=(0,u.useMemo)(()=>t?n?d:f:r?d:f,[f,d,r,n,t]),v=S!==s.NORMAL;return{value:S,isNewGuidance:v,loading:g||c}}},915873:function(e,t,n){n.d(t,{getIsSidebarResponsiveHide:function(){return o}});var r=n(214492),u=n(698392);let o=()=>"undefined"!=typeof document&&document.body.clientWidth<((0,u.getChatSlice)("chatViewCanvasStore").isExpand?r.BREAK_POINT_ALL:r.BREAK_POINT_MIN_LEFT)},746904:function(e,t,n){n.d(t,{getIsExpand:function(){return f},getIsOpenTemporarily:function(){return v},getSidebarExpandHasLinkageChanged:function(){return c},openSidebarIfDid:function(){return p},setIsOpenTemporarily:function(){return S},setSidebarExpand:function(){return l},setSidebarExpandHasLinkageChanged:function(){return d},setSidebarExpandWithoutInteraction:function(){return s},toggleMobileSidebarExpand:function(){return h},useHasExpandInteracted:function(){return b},useIsOpenTemporarily:function(){return g},useMobileSidebarExpanded:function(){return _},useSideBarExpanded:function(){return i}});var r=n(427184),u=n(698392),o=n(178230),a=n(915873);let i=()=>(0,u.useChatSlice)("sidebarStore",e=>e.isExpand),l=e=>{(0,u.getChatStore)("sidebarStore").setState({isExpand:e,hasInteracted:!0,hasExpandInteracted:!0,hasExpandLinkageChanged:!1});try{(0,u.getChatStore)("flowWebLayoutStore").setState({sidebarStatus:e?"open":"closed"})}catch(e){}},s=e=>{(0,u.getChatStore)("sidebarStore").setState({isExpand:e})},d=e=>{(0,u.getChatStore)("sidebarStore").setState({hasExpandLinkageChanged:e})},c=()=>(0,u.getChatSlice)("sidebarStore").hasExpandLinkageChanged,f=()=>(0,u.getChatSlice)("sidebarStore").isExpand,g=()=>(0,u.useChatSlice)("sidebarStore",e=>e.isOpenTemporarily),S=e=>{(0,u.getChatStore)("sidebarStore").setState({isOpenTemporarily:e,hasInteracted:!0})},v=()=>(0,u.getChatSlice)("sidebarStore").isOpenTemporarily,b=()=>(0,u.useChatSlice)("sidebarStore",e=>e.hasExpandInteracted),_=()=>(0,u.useChatSlice)("sidebarStore",e=>e.isMobileExpand),h=()=>{(0,a.getIsSidebarResponsiveHide)()&&(0,u.getChatStore)("sidebarStore").setState(e=>{let{isMobileExpand:t}=e;return{isMobileExpand:!t}})},p=()=>{try{s(!0)}catch(e){(0,r.default)(e)&&o.logger.persist.error({message:"openSidebarIfDid error",error:e})}}},207729:function(e,t,n){n.d(t,{useServerAb:function(){return E}});var r=n(713738),u=n(229079),o=n(4137),a=n(83019),i=n(996080),l=n(698392),s=n(102249),d=n(992847),c=n(198660),f=n(369682),g=n(124997),S=n(672978),v=n(856392),b=n(178230);let _=()=>{let e=(0,a.getWindowInjectPromiseByName)(i.PromiseName.GuestLayoutMode);if(e)return(0,S.wrapPrefetchGetter)(e)},h=_(),p=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,c.useIsLoginLoading)();return(0,r.useMemo)(()=>t||!e?h:_(),[t])},L=e=>{var t;let{defaultValue:n,isLogin:a=!0,debugKey:i,eventName:g,abResultKey:S,ignoreLoginStatus:b}=e,_=(0,f.isStorageLogined)(),h=(0,c.useIsLoginLoading)(),p=(0,c.useIsGuest)(),{settingData:L}=(0,l.useChatSlice)("launcherRawSettingStore"),I=null===(t=(0,u.default)(L,"ab_config.ab_results"))||void 0===t?void 0:t[S],E=(0,s.useFGValue)(i||"",{source:d.FGBuiltinNames.debugStorage,defaultValue:void 0}),m=(()=>{if(!b){if(a){if(h&&!_||!h&&p)return n}else if(h&&_||!h&&!p)return n}return(0,o.default)(E)?(0,o.default)(I)?n:I:E})(),y=(()=>{if(a){if(h&&!_||!h&&p)return!1}else if(h&&_||!h&&!p)return!1;return!!((0,o.default)(E)&&(0,o.default)(I))})(),C=(0,r.useMemo)(()=>g?(0,v.createReportEvent)({eventName:g,meta:{is_login:a,ab_result_key:S}}):null,[]);return(0,r.useEffect)(()=>{!y&&g&&(null==C||C.updateMeta({ab_value:I,debug_value:E,value:m,storage_login:_,cached:"1"}),null==C||C.addDurationPoint("success"),null==C||C.success())},[y,I,E,m,_]),{value:m,loading:y}},I=e=>{var t,n;let{defaultValue:u,isLogin:a=!0,debugKey:i,eventName:l,abResultKey:S,ignoreLoginStatus:_}=e,h=(0,f.isStorageLogined)(),L=(0,c.useIsLoginLoading)(),I=(0,c.useIsGuest)(),E=p(),m=null==E?void 0:E(),{promise:y,syncValue:C}=null!=m?m:{},[w,A]=(0,g.default)((null==C?void 0:null===(n=C.data)||void 0===n?void 0:null===(t=n.ab_config)||void 0===t?void 0:t.ab_results)?C.data.ab_config.ab_results[S]||u:void 0),O=(0,s.useFGValue)(i||"",{source:d.FGBuiltinNames.debugStorage,defaultValue:void 0}),M=(()=>{if(!_){if(a){if(L&&!h||!L&&I)return u}else if(L&&h||!L&&!I)return u}return(0,o.default)(O)?(0,o.default)(w)?u:w:O})(),x=(()=>{if(a){if(L&&!h||!L&&I)return!1}else if(L&&h||!L&&!I)return!1;return!!((0,o.default)(O)&&(0,o.default)(w))})();(0,r.useEffect)(()=>{y?(!!_||(!a||(L?!!h:!I))&&(!!a||(L?!h:!!I)))&&y.then(e=>{var t,n,r;if(!e||0!==e.code)throw Error(JSON.stringify(e));let a=null===(r=e.data)||void 0===r?void 0:null===(n=r.ab_config)||void 0===n?void 0:null===(t=n.ab_results)||void 0===t?void 0:t[S];(0,o.default)(a)||""===a?null==A||A(u):null==A||A(a)}).catch(e=>{(0,o.default)(w)&&(null==A||A(u)),b.logger.console.error(e)}):(0,o.default)(w)&&(null==A||A(u))},[I,L,h,_]);let N=(0,r.useMemo)(()=>l?(0,v.createReportEvent)({eventName:l,meta:{is_login:a,ab_result_key:S}}):null,[]);return(0,r.useEffect)(()=>{if(!x&&l){var e,t;null==N||N.updateMeta({ab_value:w,debug_value:O,value:M,storage_login:h,cached:(null==C?void 0:null===(t=C.data)||void 0===t?void 0:null===(e=t.ab_config)||void 0===e?void 0:e.ab_results)?"1":y?"2":"0"}),null==N||N.addDurationPoint("success"),null==N||N.success()}},[x,w,O,M,h]),{value:M,loading:x}},E=e=>{let{defaultValue:t,isLogin:n=!0,debugKey:r,eventName:o,abResultKey:a,ignoreLoginStatus:l}=e;return("undefined"==typeof window?void 0:(0,u.default)(window,i.PromiseName.GuestLayoutMode))?I({defaultValue:t,isLogin:n,debugKey:r,eventName:o,abResultKey:a,ignoreLoginStatus:l}):L({defaultValue:t,isLogin:n,debugKey:r,eventName:o,abResultKey:a,ignoreLoginStatus:l})}}}]);
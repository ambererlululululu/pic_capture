"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["94988"],{759139:function(e,t,r){r.d(t,{loadFromResourceCache:function(){return i}});let o=new WeakMap;async function i(e){let t=o.get(e);if(!t){let t=e();o.set(e,t);try{return await t}catch(r){throw o.get(e)===t&&o.delete(e),r}}return await t}},874143:function(e,t,r){r.d(t,{Container:function(){return o}});class o{bind(e,t){this.map.set(e,t)}isBound(e){return this.map.has(e)}unbind(e){this.map.delete(e)}get(e){return this.map.get(e)}constructor(){var e,t,r;e="map",t=new Map,(e="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string"))?r:r+"")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}}},436531:function(e,t,r){r.d(t,{getCurrentResourceController:function(){return f},getStoreResourceController:function(){return m},useConfigResource:function(){return S}});var o=r(580296),i=r(441259),n=r(830006),a=r(759139);let c=e=>{let t={};for(let r of Object.keys(e)){let o=e[r],i=Reflect.ownKeys(o).map(e=>o[e]);i.every(e=>void 0===e.priority)?t[r]=n.RESOURCE_LOADER.onDemand(()=>Promise.all(i.map(e=>(0,a.loadFromResourceCache)(e.loadResource)))):t[r]=n.RESOURCE_LOADER.onDemand(()=>Promise.all(i.sort((e,t)=>{var r,o;return(null!==(r=e.priority)&&void 0!==r?r:0)-(null!==(o=t.priority)&&void 0!==o?o:0)}).map(e=>(0,a.loadFromResourceCache)(e.loadResource))))}return t},l=e=>{var t,r,o,i,n,a,l,u,s,v,d,h,S,f,m,g,p;let{pluginList:C=[],core:y}=e,b=C.reduce((e,t)=>(function(e,t){let r={...e};for(let e of Object.keys(t)){var o,i,n;let a=null!==(o=t[e])&&void 0!==o?o:{};for(let e of Object.keys(a)){let t=null!==(i=a[e])&&void 0!==i?i:{},o=null!==(n=r[e])&&void 0!==n?n:{},c=t.resource;r[e]={...o,...c}}}return r})(e,t),{}),w=C.map(e=>{let{input:t,message:r,chatLayout:o,guidance:i,feed:n,launcher:a}=e;return{message:r?Object.keys(r).reduce((e,t)=>{let o=r[t];return o&&"matcher"in o?{...e,[`${t}Matcher`]:o.matcher}:e},{}):void 0,input:t?Object.keys(t).reduce((e,r)=>{let o=t[r];return o&&"matcher"in o?{...e,[`${r}Matcher`]:o.matcher}:e},{}):void 0,guidance:i?Object.keys(i).reduce((e,t)=>{let r=i[t];return r&&"matcher"in r?{...e,[`${t}Matcher`]:r.matcher}:e},{}):void 0,chatLayout:o?Object.keys(o).reduce((e,t)=>{let r=o[t];return r&&"matcher"in r?{...e,[`${t}Matcher`]:r.matcher}:e},{}):void 0,feed:n?Object.keys(n).reduce((e,t)=>{let r=n[t];return r&&"matcher"in r?{...e,[`${t}Matcher`]:r.matcher}:e},{}):void 0,...a?{launcher:Object.keys(a).reduce((e,t)=>{let r=a[t];return r&&"matcher"in r?{...e,[`${t}Matcher`]:r.matcher}:e},{})}:void 0}}).reduce((e,t)=>(function(e,t){let r={...e};for(let e of Object.keys(t)){var o,i,n;let a=null!==(o=t[e])&&void 0!==o?o:{};for(let e of Object.keys(a)){let t=null!==(i=a[e])&&void 0!==i?i:{};r[e]={...null!==(n=r[e])&&void 0!==n?n:{},...t}}}return r})(e,t),{});return{chatBotService:null===(t=y.chat)||void 0===t?void 0:t.chatBotService,chatConfigService:null===(r=y.chat)||void 0===r?void 0:r.chatConfigService,chatFeedService:null===(o=y.chat)||void 0===o?void 0:o.chatFeedService,chatViewService:null===(i=y.chat)||void 0===i?void 0:i.chatViewService,chatGuidanceService:null===(n=y.guidance)||void 0===n?void 0:n.chatGuidanceService,chatInputStoreService:null===(a=y.input)||void 0===a?void 0:a.chatInputStoreService,chatInputService:null===(l=y.input)||void 0===l?void 0:l.chatInputService,refContentStoreService:null===(u=y.input)||void 0===u?void 0:u.refContentStoreService,attachmentsStoreService:null===(s=y.input)||void 0===s?void 0:s.attachmentsStoreService,attachmentUploadStoreService:null===(v=y.input)||void 0===v?void 0:v.attachmentUploadStoreService,chatMessageService:null===(d=y.message)||void 0===d?void 0:d.chatMessageService,chatNavigateService:null===(h=y.chatCoreService)||void 0===h?void 0:h.chatNavigateService,chatConversationService:null===(S=y.chatCoreService)||void 0===S?void 0:S.chatConversationService,chatMessageConfig:null===(f=y.message)||void 0===f?void 0:f.chatMessageConfig,chatMessageBoxConfig:null===(m=y.message)||void 0===m?void 0:m.chatMessageBoxConfig,chatCommandService:null===(g=y.message)||void 0===g?void 0:g.chatCommandService,chatSocketService:null===(p=y.message)||void 0===p?void 0:p.chatSocketService,...b,...c(w)}},u=e=>{var t,r,o,i,n,a,c,l,u,s,v,d,h,S,f,m,g,p;let{core:C}=e;return{chatViewCoreStore:null===(t=C.chat)||void 0===t?void 0:t.chatViewCoreStore,chatViewCanvasStore:null===(r=C.chat)||void 0===r?void 0:r.chatViewCanvasStore,chatMessageStore:null===(o=C.message)||void 0===o?void 0:o.chatMessageStore,aliceChatProtocolStore:null===(i=C.message)||void 0===i?void 0:i.aliceChatProtocolStore,samanthaChatProtocolStore:null===(n=C.message)||void 0===n?void 0:n.samanthaChatProtocolStore,chatMessageGroupLayoutStore:null===(a=C.message)||void 0===a?void 0:a.chatMessageGroupLayoutStore,chatMessageBoxLayoutStore:null===(c=C.message)||void 0===c?void 0:c.chatMessageBoxLayoutStore,sidebarStore:null===(l=C.chatLayout)||void 0===l?void 0:l.sidebarStore,launcherRawSettingStore:null===(u=C.launcher)||void 0===u?void 0:u.launcherRawSettingStore,chatGuidanceStore:null===(s=C.guidance)||void 0===s?void 0:s.chatGuidanceStore,chatInputStore:null===(v=C.input)||void 0===v?void 0:v.chatInputStore,attachmentsStore:null===(d=C.input)||void 0===d?void 0:d.attachmentsStore,attachmentUploadStore:null===(h=C.input)||void 0===h?void 0:h.attachmentUploadStore,refContentStore:null===(S=C.input)||void 0===S?void 0:S.refContentStore,deepThinkingControlStore:null===(f=C.input)||void 0===f?void 0:f.deepThinkingControlStore,skillStore:null===(m=C.skill)||void 0===m?void 0:m.skillStore,flowWebLayoutStore:null===(g=C.chatLayout)||void 0===g?void 0:g.flowWebLayoutStore,flowWebFeedStore:null===(p=C.feed)||void 0===p?void 0:p.flowWebFeedStore}};var s=r(874143);function v(e,t,r){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d{constructor({loader:e}){v(this,"resourceStore",void 0),v(this,"storeContainer",void 0),v(this,"serviceContainer",void 0),v(this,"pluginMatcherContainer",void 0),v(this,"configContainer",void 0),v(this,"pluginContainerMap",void 0),this.resourceStore=(0,o.create)(()=>e),this.storeContainer=new s.Container,this.serviceContainer=new s.Container,this.pluginContainerMap={},this.pluginMatcherContainer=new s.Container,this.configContainer=new s.Container}}let h={activeScene:"PC_MAIN_BOT_WEB"},S=(e,t)=>{if(h.activeScene=e,i.inBrowser||(h[e]=void 0,h.GLOBAL_STORE=void 0),h.GLOBAL_STORE||(h.GLOBAL_STORE=new d({loader:u(t)})),void 0===h[e]){let r=new d({loader:l(t)});h[e]=r,function(e){let{pluginList:t=[]}=e;for(let e of t){var r;if(null===(r=e.lifeCycles)||void 0===r?void 0:r.onInit)try{e.lifeCycles.onInit()}catch(e){}}}(t)}},f=()=>{let{activeScene:e}=h,t=h[e];if(void 0===t)throw Error(`chat-ioc-manager: Resource controller of Scene ${e} not found`);return t},m=()=>{if(void 0===h.GLOBAL_STORE)throw Error("chat-ioc-manager: Resource controller of GLOBAL_STORE not found");return h.GLOBAL_STORE}},830006:function(e,t,r){r.d(t,{RESOURCE_LOADER:function(){return u}});var o=r(643404),i=r(759139);function n(e,t,r){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(){n(this,"resource",void 0),n(this,"init",e=>{this.resource=e}),n(this,"load",()=>this.resource)}}class c{constructor(){n(this,"resource",void 0),n(this,"init",e=>{this.resource=e}),n(this,"load",()=>(0,o.retryLoad)(()=>this.resource))}}class l{constructor(){n(this,"resource",void 0),n(this,"init",e=>{this.resource=e}),n(this,"load",()=>{let e=this.resource;if("function"==typeof e)return(0,o.retryLoad)(()=>(0,i.loadFromResourceCache)(e))})}}let u={sync(e){let t=new a;return t.init(e),t},async(e){let t=new c;return t.init(e),t},onTrigger(e){let t=new c;return t.init(e()),t},onDemand(e){let t=new l;return t.init(e),t}}}}]);
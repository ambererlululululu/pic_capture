"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["11287"],{224031:function(e,t,a){a.d(t,{default:function(){return I}});var s=a(436114),n=a(713738),i=a(526675),r=a(362269),l=a.n(r),o=a(17246),d=a(812650),c=a.n(d),u=a(71484),h=a(35834);let p={PREFIX:`${h.BASE_CLASS_PREFIX}-sidesheet`,DIALOG:`${h.BASE_CLASS_PREFIX}-modal`};var m=a(287419),f=a(398807),v=a(240631),g=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)0>t.indexOf(s[n])&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]]);return a};let b=0,x=p.PREFIX;class y extends n.PureComponent{constructor(){super(...arguments),this.onMaskClick=e=>{e.target===e.currentTarget&&this.close(e)},this.close=e=>{let{onClose:t}=this.props;t&&t(e)}}componentDidMount(){this.sideSheetId=`sidesheet-${b++}`}componentWillUnmount(){clearTimeout(this.timeoutId)}getMaskElement(){var e;let{mask:t,maskStyle:a,maskClosable:s}=this.props;return t?n.createElement("div",Object.assign({"aria-hidden":!0,key:"mask",className:c()(`${x}-mask`,null!==(e=this.props.maskClassName)&&void 0!==e?e:""),style:a,onClick:s?this.onMaskClick:null},this.props.maskExtraProps)):null}renderHeader(){let e,t;let{title:a,closable:s,headerStyle:i,closeIcon:r}=this.props;if(a&&(e=n.createElement("div",{className:`${x}-title`,"x-semi-prop":"title"},this.props.title)),s){let e=r||n.createElement(f.default,null);t=n.createElement(m.default,{className:`${x}-close`,key:"close-btn",onClick:this.close,type:"tertiary",icon:e,theme:"borderless",size:"small"})}return n.createElement("div",{className:`${x}-header`,role:"heading","aria-level":1,style:Object.assign({},i)},e,t)}getDialogElement(){var e;let t=g(this.props,[]),a={};t.width&&(a.width=t.width,t.mask||(a.width="100%")),t.height&&(a.height=t.height);let s=this.renderHeader();return n.createElement("div",Object.assign({key:"dialog-element",role:"dialog",tabIndex:-1,className:c()(`${x}-inner`,`${x}-inner-wrap`,null!==(e=this.props.dialogClassName)&&void 0!==e?e:"",`${x}-size-${t.size}`),style:Object.assign(Object.assign({},t.style),a)},this.props.wrapperExtraProps),n.createElement("div",{className:`${x}-content`},s,n.createElement("div",{className:`${x}-body`,style:t.bodyStyle,"x-semi-prop":"children"},t.children),t.footer?n.createElement("div",{className:`${x}-footer`,"x-semi-prop":"footer"},t.footer):null))}render(){let e=this.props,{mask:t,className:a,width:s,onClose:i,maskStyle:r,maskClosable:l,maskClassName:o,title:d,closable:u,headerStyle:h,height:p,style:m,size:f,bodyStyle:b,dialogClassName:y,children:w,footer:_,maskExtraProps:S,wrapperExtraProps:k}=e,C=g(e,["mask","className","width","onClose","maskStyle","maskClosable","maskClassName","title","closable","headerStyle","height","style","size","bodyStyle","dialogClassName","children","footer","maskExtraProps","wrapperExtraProps"]),j=c()(a,{[`${x}-fixed`]:!t,[`${x}-size-${this.props.size}`]:!t}),N={};!t&&s&&(N.width=s);let I=(0,v.default)(C);return n.createElement("div",Object.assign({className:j,style:N},I),this.getMaskElement(),this.getDialogElement())}}y.propTypes={onClose:l().func,closeIcon:l().node},y.defaultProps={onClose:s.default};var w=a(135410),_=a(185143);class S extends w.default{constructor(e){super(Object.assign(Object.assign({},S.defaultAdapter),e)),this.toggleDisplayNone=e=>{this._adapter.toggleDisplayNone(e)}}get defaultAdapter(){return{handleCancel:s.default,beforeShow:s.default,afterHide:s.default}}destroy(){this.afterHide()}handleCancel(e){this._adapter.notifyCancel(e)}beforeShow(){this.getProp("disableScroll")&&this._adapter.disabledBodyScroll(),this._adapter.setOnKeyDownListener()}afterHide(){this.getProp("disableScroll")&&this._adapter.enabledBodyScroll(),this._adapter.removeKeyDownListener()}handleKeyDown(e){let{closeOnEsc:t}=this.getProps();if(t&&e.keyCode===_.default.ESC){e.stopPropagation(),this.handleCancel(e);return}}onVisibleChange(e){this._adapter.notifyVisibleChange(e)}}var k=a(168123),C=a(544740),j=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)0>t.indexOf(s[n])&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]]);return a};let N=p.PREFIX;class I extends i.default{constructor(e){super(e),this.handleCancel=e=>{this.foundation.handleCancel(e)},this.handleKeyDown=e=>{this.foundation.handleKeyDown(e)},this.updateState=()=>{this.foundation.toggleDisplayNone(!this.props.visible)},this.state={displayNone:!this.props.visible},this.foundation=new S(this.adapter),this.bodyOverflow="",this.scrollBarWidth=0,this.originBodyWidth="100%"}get adapter(){return Object.assign(Object.assign({},super.adapter),{disabledBodyScroll:()=>{let{getPopupContainer:e}=this.props;this.bodyOverflow=document.body.style.overflow||"",e||"hidden"===this.bodyOverflow||(document.body.style.overflow="hidden",document.body.style.width=`calc(${this.originBodyWidth||"100%"} - ${this.scrollBarWidth}px)`)},enabledBodyScroll:()=>{let{getPopupContainer:e}=this.props;e||"hidden"===this.bodyOverflow||(document.body.style.overflow=this.bodyOverflow,document.body.style.width=this.originBodyWidth)},notifyCancel:e=>{this.props.onCancel&&this.props.onCancel(e)},notifyVisibleChange:e=>{this.props.afterVisibleChange(e)},setOnKeyDownListener:()=>{window&&window.addEventListener("keydown",this.handleKeyDown)},removeKeyDownListener:()=>{window&&window.removeEventListener("keydown",this.handleKeyDown)},toggleDisplayNone:e=>{e!==this.state.displayNone&&this.setState({displayNone:e})}})}static getDerivedStateFromProps(e,t){let a={};return e.visible&&t.displayNone&&(a.displayNone=!1),e.visible||e.motion||t.displayNone||(a.displayNone=!0),a}componentDidMount(){this.scrollBarWidth=(0,C.getScrollbarWidth)(),this.originBodyWidth=document.body.style.width,this.props.visible&&this.foundation.beforeShow()}componentDidUpdate(e,t,a){!e.visible&&this.props.visible&&this.foundation.beforeShow(),e.visible&&!this.props.visible&&this.foundation.afterHide(),t.displayNone!==this.state.displayNone&&this.foundation.onVisibleChange(!this.state.displayNone)}componentWillUnmount(){this.props.visible&&this.foundation.destroy()}renderContent(){let e=this.props,{placement:t,className:a,children:s,width:i,height:r,motion:l,visible:d,style:u,maskStyle:h,size:p,zIndex:m,getPopupContainer:f,keepDOM:v}=e,g=j(e,["placement","className","children","width","height","motion","visible","style","maskStyle","size","zIndex","getPopupContainer","keepDOM"]),b={zIndex:m};f&&(b={zIndex:m,position:"static"});let{direction:x}=this.context,w="left"===t||"right"===t,_="top"===t||"bottom"===t,S=c()(N,a,{[`${N}-${t}`]:t,[`${N}-popup`]:f,[`${N}-horizontal`]:_,[`${N}-rtl`]:"rtl"===x,[`${N}-hidden`]:v&&this.state.displayNone}),C=Object.assign(Object.assign(Object.assign({},w?i?{width:i}:{}:{width:"100%"}),g),{visible:d,motion:!1,size:p,className:S,height:_?r||448:"100%",onClose:this.handleCancel}),I=this.props.visible||this.props.keepDOM||this.props.motion&&!this.state.displayNone;return n.createElement(k.default,{motion:this.props.motion,animationState:d?"enter":"leave",startClassName:d?`${N}-animation-mask_show`:`${N}-animation-mask_hide`,onAnimationEnd:this.updateState},e=>{let{animationClassName:t,animationEventsNeedBind:a}=e;return n.createElement(k.default,{motion:this.props.motion,animationState:d?"enter":"leave",startClassName:d?`${N}-animation-content_show_${this.props.placement}`:`${N}-animation-content_hide_${this.props.placement}`,onAnimationEnd:this.updateState},e=>{let{animationClassName:i,animationStyle:r,animationEventsNeedBind:l}=e;return I?n.createElement(o.default,{getPopupContainer:f,style:b},n.createElement(y,Object.assign({},C,{maskExtraProps:a,wrapperExtraProps:l,dialogClassName:i,maskClassName:t,maskStyle:Object.assign({},h),style:Object.assign(Object.assign({},r),u)}),s)):n.createElement(n.Fragment,null)})})}render(){let{zIndex:e,getPopupContainer:t,visible:a}=this.props;return this.renderContent()}}I.contextType=u.default,I.propTypes={bodyStyle:l().object,headerStyle:l().object,children:l().node,className:l().string,closable:l().bool,disableScroll:l().bool,getPopupContainer:l().func,height:l().oneOfType([l().number,l().string]),mask:l().bool,maskClosable:l().bool,maskStyle:l().object,motion:l().oneOfType([l().bool,l().object,l().func]),onCancel:l().func,placement:l().oneOf(["top","right","bottom","left"]),size:l().oneOf(["small","medium","large"]),style:l().object,title:l().node,visible:l().bool,width:l().oneOfType([l().number,l().string]),zIndex:l().number,afterVisibleChange:l().func,closeOnEsc:l().bool,footer:l().node,keepDOM:l().bool,"aria-label":l().string},I.__SemiComponentName__="SideSheet",I.defaultProps=(0,C.getDefaultPropsFromGlobalConfig)(I.__SemiComponentName__,{visible:!1,motion:!0,mask:!0,placement:"right",closable:!0,footer:null,zIndex:1e3,maskClosable:!0,size:"small",disableScroll:!0,closeOnEsc:!1,afterVisibleChange:s.default,keepDOM:!1})},147899:function(e,t,a){var s=a(580622),n=a(524143),i=a(643066);t.default=function(e,t,a){void 0===a&&(a={});var r=(0,s.default)(t);(0,i.default)(function(){var t=(0,n.getTargetElement)(a.target,window);if(null==t?void 0:t.addEventListener){var s=function(e){return r.current(e)};return t.addEventListener(e,s,{capture:a.capture,once:a.once,passive:a.passive}),function(){t.removeEventListener(e,s,{capture:a.capture})}}},[e,a.capture,a.once,a.passive],a.target)}},2551:function(e,t,a){a.d(t,{default:function(){return i}}),a(713738);var s=a(430261),n=a(345660),i=(0,s.IconFactory)((0,n.jsx)(e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.5 17a2 2 0 0 0-1.082.318L8.5 19.837V17h-5V4h17v13zm7 2h-7l-5.46 3.51a1 1 0 0 1-1.54-.842V19h-3a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h17a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2M7.3 11.8a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6m6-1.3a1.3 1.3 0 1 1-2.6 0 1.3 1.3 0 0 1 2.6 0m3.4 1.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6",clipRule:"evenodd"})}),{}))},680887:function(e,t,a){a.d(t,{default:function(){return i}}),a(713738);var s=a(430261),n=a(345660),i=(0,s.IconFactory)((0,n.jsx)(e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"currentColor",d:"M21.707 7.293a1 1 0 0 0-1.414 0L12 15.586 3.707 7.293a1 1 0 0 0-1.414 1.414L10.586 17a2 2 0 0 0 2.828 0l8.293-8.293a1 1 0 0 0 0-1.414"})}),{}))},167838:function(e,t,a){a.d(t,{default:function(){return i}}),a(713738);var s=a(430261),n=a(345660),i=(0,s.IconFactory)((0,n.jsx)(e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"currentColor",d:"M7.707 21.707a1 1 0 0 1 0-1.414L16 12 7.707 3.707a1 1 0 0 1 1.414-1.414l8.293 8.293a2 2 0 0 1 0 2.828l-8.293 8.293a1 1 0 0 1-1.414 0"})}),{}))},792222:function(e,t,a){a.d(t,{default:function(){return i}}),a(713738);var s=a(430261),n=a(345660),i=(0,s.IconFactory)((0,n.jsx)(e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.75 7h16.563c0 .48-.007 1.933-.016 3.685.703.172 1.36.458 1.953.837V5.937a2 2 0 0 0-2-2h-6.227a3 3 0 0 1-1.015-.176L9.992 2.677A3 3 0 0 0 8.979 2.5h-5.23a2 2 0 0 0-1.999 2v14.548a2 2 0 0 0 2 2h10.31a6.5 6.5 0 0 1-1.312-2H3.75S3.742 8.5 3.75 7m15.002 14.5a.514.514 0 0 0 .512-.454c.24-1.433.451-2.169.907-2.625.454-.455 1.186-.666 2.611-.907a.513.513 0 0 0-.002-1.026c-1.423-.241-2.155-.453-2.61-.908-.455-.457-.666-1.191-.906-2.622a.514.514 0 0 0-.512-.458.52.52 0 0 0-.515.456c-.24 1.432-.452 2.167-.907 2.624-.454.455-1.185.667-2.607.909a.514.514 0 0 0-.473.513.52.52 0 0 0 .47.512c1.425.24 2.157.447 2.61.9.455.454.666 1.19.907 2.634a.52.52 0 0 0 .515.452",clipRule:"evenodd"})}),{}))},725172:function(e,t,a){a.d(t,{ScrollViewProvider:function(){return l},useScrollView:function(){return o}});var s=a(713738),n=a(161284),i=a(345660);let r=(0,s.createContext)(null),l=e=>{let{containerRef:t,controller:a,children:s}=e,{width:l,height:o}=(0,n.useResizeObserver)({ref:t});return(0,i.jsx)(r.Provider,{value:{ref:t,width:l,height:o,...a},children:s})},o=()=>{let e=(0,s.useContext)(r);if(!e)throw Error("require ScrollViewContext when calling useScrollView");return e}},710242:function(e,t,a){a.d(t,{loadConversationListMessage:function(){return r}});var s=a(198660),n=a(178230),i=a(83990);let r=async e=>{let{conversationPriorityList:t,reportEvent:a,queue:r,hasPreprocessTask:l}=e;r.on("error",e=>{n.logger.persist.error({message:"fetch queue error",error:e})});let o=[],d=i.useMessageStore.getState(),c=(0,s.getIsLoggedIn)();t.forEach((e,t)=>{let{conversation:{conversation_id:s,message_index:n,message_cursor:i}={},priority:u}=e;s&&r.add(async()=>{let e=0;try{await d.initMessageList({conversationId:s,messageIndex:Number(n),messageCursor:Number(i),range:{start:Number(i),end:Number(n)},isGuest:!c,hasPreprocessTask:l}),e=1}finally{0===t&&(null==a||a.addDurationPoint("first_conversation")),o.push({conversation_id:s,success:e})}},{priority:u})}),await r.onIdle(),null==a||a.addDurationPoint("all_conversation");let u=o.filter(e=>1===e.success).length;null==a||a.success({meta:{init_conversation_success_count:u,init_conversation_count:o.length}})}},780044:function(e,t,a){a.d(t,{useIsFirstChat:function(){return m},useTotalUnreadCount:function(){return f}});var s=a(713738),n=a(865607),i=a(486677),r=a(217957),l=a(874578),o=a(230932),d=a(651610),c=a(165994),u=a(178230),h=a(83990),p=a(637319);let m=e=>(0,h.useMessageStore)(t=>(0,p.isFirstChatSelector)(t,e),n.shallow),f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.useRef)([]),a=(0,o.useFeedStore)(e=>(0,i.default)(e.lastMessageIndexMap).filter(e=>!(0,r.default)(e[1])),n.shallow),m=(0,h.useMessageStore)(s=>{let{conversationMap:n,conversationLinks:i}=o.useFeedStore.getState(),c=[],u=(0,l.default)(a,(t,a)=>{var l;let[o,u]=a;if(!i.some(e=>e.conversationId===o))return t;let h=n[o],m=!(null===(l=e.conversationTypes)||void 0===l?void 0:l.length)||!(0,r.default)(h.conversation_type)&&e.conversationTypes.includes(h.conversation_type)?(0,d.getUnreadCount)({message_index:(0,p.getLastMessageIndexForUnreadCountSelector)(s,(null==h?void 0:h.conversation_id)||"",u),read_message_index:u.read_message_index}):0;return m>0&&c.push(o),t+m},0);return t.current=c,u}),f=(0,c.default)(m,()=>!0);if(m!==f){var v;u.logger.persist.info({eventName:"unread_count_change",meta:{count:m,prev_count:f,conversation_ids:t.current.join(","),conversation_types:null===(v=e.conversationTypes)||void 0===v?void 0:v.join(",")}})}return m}},935366:function(e,t,a){a.d(t,{defaultChatInputFacade:function(){return n}});var s=a(154635);let n={focus:()=>{s.defaultChatInputController.focusOnInput()}}},780533:function(e,t,a){a.d(t,{useAISpaceEnable:function(){return o}});var s=a(713738),n=a(217957),i=a(210128),r=a(198660),l=a(715056);let o=()=>{let[e,t]=(0,s.useState)(),{value:a,loading:o}=(0,i.useTeaVar)({key:"aispace_revert",defaultValue:"0",isServerAb:!0});return(0,s.useEffect)(()=>{let e=(0,r.subscribeLoginState)(e=>{e===l.LoginState.Success?t(!0):e===l.LoginState.Failed&&t(!1)},{fireImmediately:!0});return()=>{e()}},[]),!1!==e&&((0,n.default)(e)?void 0:o?void 0:"0"!==a)}},134088:function(e,t,a){a.d(t,{useLoadAllThreadListNextPage:function(){return c}});var s=a(713738),n=a(113849),i=a(710242),r=a(628338),l=a(971857),o=a(230932),d=a(856392);let c=()=>{let e=(0,s.useMemo)(()=>new n.default({concurrency:1}),[]),{overallListStatus:t,loadOverallList:a}=(0,l.useConversationList)(),{threadListStatus:c,loadThreadList:u}=(0,l.useThreadList)(),h=(0,o.useFeedStore)(e=>e.isOverallList),p=(0,s.useMemo)(()=>h?t:c,[h,t,c]),m=(0,s.useRef)(0);return{loadThreadListNextPage:async()=>{if(p.loading||p.initiated&&!p.hasMore)return;let t=(0,d.createReportEvent)({eventName:"load_more_thread_list"});try{let s=[];s=h?await a({index:p.nextIndex?p.nextIndex:void 0,pcPinQueryType:p.pcPinQueryType||void 0}):await u({size:20,index:c.nextIndex}),t.addDurationPoint("fetch_success"),m.current+=1,await (0,i.loadConversationListMessage)({reportEvent:void 0,conversationPriorityList:s.map((e,t)=>({conversation:e,priority:100*m.current-t})),queue:e,hasPreprocessTask:r.hasPreprocessTask}),t.success()}catch(e){t.error({reason:"load_more_thread_list_failed",error:e instanceof Error?e:Error(String(e))})}}}}},58458:function(e,t,a){a.d(t,{useHandleClickSpaceEntry:function(){return d}});var s=a(713738),n=a(756817),i=a(777422),r=a(227587),l=a(178230),o=a(508751);let d=()=>{let e=(0,r.useLocation)();return(0,s.useCallback)((0,n.default)(t=>{t.preventDefault(),e.pathname!==o.AI_SPACE_ROUTE&&-1===e.pathname.indexOf(o.AI_SPACE_ROUTE)&&l.logger.persist.info({eventName:"AISpace_SidebarNavClick"}),(0,i.trackEvent)("sidebar_button_click",{button_name:"ai_space"})},300),[])}},508751:function(e,t,a){a.d(t,{AI_SPACE_ROUTE:function(){return s}});let s="/chat/drive/"},502590:function(e,t,a){a.d(t,{useBrandLogoUrl:function(){return m},BrandLogo:function(){return f}});var s=a(557298),n=a(713738),i=a(812650),r=a.n(i),l=a(102249),o=a(7625),d=a(992847),c=a(231149),u={title:"title-UzWwBg",skeleton:"skeleton-Ocm8XN",clickable:"clickable-QnEMyq","avatar-wrap":"avatar-wrap-Sweopk","extra-icon":"extra-icon-EpWJsJ"},h=a(345660);let p={"white-bg":{doubao:e=>"dark"===e?a.e("269").then(a.t.bind(a,200906,17)).then(e=>e.default):a.e("66752").then(a.t.bind(a,352498,17)).then(e=>e.default),cici:()=>Promise.resolve("https://sf-flow-web-cdn.ciciaicdn.com/obj/ocean-flow-web-us/samantha/logo-icon-white-bg.png")},"blue-bg":{doubao:e=>"dark"===e?a.e("45591").then(a.t.bind(a,878272,17)).then(e=>e.default):a.e("17996").then(a.t.bind(a,566513,17)).then(e=>e.default),cici:()=>a.e("66422").then(a.t.bind(a,560485,17)).then(e=>e.default)},"grey-bg":{doubao:()=>a.e("26772").then(a.t.bind(a,382555,17)).then(e=>e.default),cici:()=>a.e("43482").then(a.t.bind(a,157395,17)).then(e=>e.default)}},m=e=>{let t=(0,l.useFGValue)(o.FGLocalDebugKeys.forceDarkMode,{source:d.FGBuiltinNames.debugStorage,defaultValue:!1})?"dark":"light",{data:a=""}=(0,c.default)(async()=>p[e].doubao(t),{refreshDeps:[e,t]});return a},f=(0,n.forwardRef)(function(e,t){let{className:a,size:n,brandName:i,theme:l,onClick:o,icon:d,...c}=e,p=m(l);return(0,h.jsxs)("div",{ref:t,...c,className:r()(a,"flex items-center",{[u.clickable]:o}),onClick:o,children:[(0,h.jsxs)("div",{className:u["avatar-wrap"],children:[p?(0,h.jsx)("img",{src:(0,s.filterUrlModule)(p,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldr-z$N$mx0%m5aWldFcH$aRmhO%FE9PQ",scmVersion:"1.0.5.6233",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb*x1$m5waFZ6$nNZek5OZEZre%9-%mpSemwx$2xjM%1HTj$PWHBq-l%xMlkwaFdl$nB%T1dsamJ$WjFXa014-zJJe$pIWk1NbXgx$2tk$05FeH$$bnBs%jBaN$dqTldlZz09"}),style:{width:n,height:n},draggable:!1}):(0,h.jsx)("div",{className:r()("rounded-full flex-shrink-0 opacity-[0.1]",u.skeleton),style:{width:n,height:n}}),d?(0,h.jsx)("div",{className:u["extra-icon"],children:d}):null]}),i&&(0,h.jsx)("div",{className:u.title,children:i})]})})},551359:function(e,t,a){a.d(t,{DotBadge:function(){return o},Badge:function(){return l}});var s=a(812650),n=a.n(s),i={badge:"badge-jqvc1W","dot-badge":"dot-badge-tQfBUD"},r=a(345660);let l=e=>{let{className:t,count:a,onClick:s}=e;return a?(0,r.jsx)("div",{className:n()(i.badge,t),onClick:s,children:a>99?"99+":a}):null},o=e=>{let{className:t,count:a}=e;return a?(0,r.jsx)("div",{className:n()(i["dot-badge"],t)}):null}},437877:function(e,t,a){a.d(t,{MORE_ITEM_ID:function(){return u},getFallbackSidebarApplicationListMeta:function(){return h}});var s=a(374474),n=a(989299),i=a(167187),r=a(748769),l=a(420765),o=a(559201),d=a(17992),c=a(524129);let u="more",h=e=>{if(!e)return null;let t={[c.SkillType.WriteAssistant]:{titleKey:"skill_writing_title",icon:s.default},[c.SkillType.ImageGeneration]:{titleKey:"skill_image_title",icon:r.default},[c.SkillType.Search]:{titleKey:"skill_search_title2",icon:n.default},[c.SkillType.ReadPDF]:{titleKey:"skill_readPdf_btn_immersive",icon:i.default},[c.SkillType.DeepSearch]:{titleKey:"deepsearch",icon:n.default},[c.SkillType.CodeAssistant]:{titleKey:"cici_web_ai_coding_skill_title",icon:l.default},[c.SkillType.VoiceCall]:{titleKey:"web_skill_voice_call",icon:o.default},[c.SkillType.VideoGeneration]:{titleKey:"skill_video_title",icon:d.default}};return e in t?t[e]:null}},50909:function(e,t,a){a.d(t,{SidebarApplicationListFallback:function(){return o}});var s=a(542737),n=a(698392),i=a(915299),r=a(437877),l=a(345660);let o=e=>{let{sidebarSkills:t}=e,a=(0,i.useTranslateFn)(),o=t.filter(e=>!e.collapsed).map(e=>{let t=(0,r.getFallbackSidebarApplicationListMeta)(e.skill_type);return t?{icon:t.icon,title:t.titleKey}:null}),d=(0,n.useChatSlice)("flowWebLayoutStore",e=>"open"===e.sidebarStatus?"open":"closed");return(0,l.jsx)(l.Fragment,{children:o.map((e,t)=>e?(0,l.jsx)(s.SidebarApplicationUI,{renderIcon:t=>{let{className:a}=t;return(0,l.jsx)(e.icon,{className:a})},text:a(e.title),isAbstract:"closed"===d},t):null)})}},315454:function(e,t,a){a.d(t,{ChatItemMenu:function(){return n}});var s=a(713738);let n=(0,a(559891).withSuspense)((0,s.lazy)(()=>a.e("76260").then(a.bind(a,106573)).then(e=>({default:e.ChatItemMenuWithTarget}))))},802192:function(e,t,a){a.r(t),a.d(t,{SideBar:function(){return tr}});var s=a(340661),n=a(713738),i=a(812650),r=a.n(i),l=a(816295),o=a(559891),d=a(345660);let c=(0,o.withSuspense)((0,l.afterAppInitLazyComponent)(()=>Promise.all([a.e("49554"),a.e("29114"),a.e("76778"),a.e("38740"),a.e("58414"),a.e("30543"),a.e("36841"),a.e("24721"),a.e("96694")]).then(a.bind(a,975092)).then(e=>({default:e.WorkspacePanel}))),e=>(0,d.jsx)("div",{className:"trigger-wrapper-wHzrbD",onClick:e.defaultClick,children:e.children})),u=(0,o.withSuspense)((0,l.afterAppInitLazyComponent)(()=>a.e("49278").then(a.bind(a,179534)).then(e=>({default:e.CurrentWorkspaceAvatar}))));var h=a(290693),p=a(643043),m=a(500978),f=a(211270),v=a(30999),g=a(510534),b=a(360882),x=a(746904),y=a(316934),w=a(888130),_=a(147899),S=a(633486),k=a(450309),C=(0,a(430261).IconFactory)((0,d.jsx)(e=>(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:29,height:14,fill:"none",viewBox:"0 0 29 14",...e,children:(0,d.jsx)("path",{fill:"currentColor",d:"M2.3 13.797q-1.03 0-1.563-.524-.522-.523-.523-1.554V2.664q0-1.031.523-1.555Q1.27.586 2.3.586h9.031q1.04 0 1.563.531.531.525.531 1.547v9.055q0 1.016-.531 1.547-.524.53-1.563.53zm.016-.742h9q.648 0 1.007-.352.36-.343.36-1.023V2.703q0-.68-.36-1.023-.36-.352-1.007-.352h-9q-.665 0-1.016.352-.344.344-.344 1.023v8.977q0 .68.344 1.023.351.352 1.016.352m2.922-6.766h-.766q-.586 0-1.016-.422a1.4 1.4 0 0 1-.422-1.015q0-.594.422-1.016t1.016-.422 1.015.422.422 1.016v.773h1.782v-.773q0-.594.414-1.016.421-.422 1.015-.422t1.016.422q.43.422.43 1.016 0 .586-.43 1.015-.422.422-1.016.422h-.765V8.07h.765q.594 0 1.016.422.43.422.43 1.008 0 .594-.43 1.016-.422.421-1.016.422-.594 0-1.015-.422A1.4 1.4 0 0 1 7.69 9.5v-.773H5.909V9.5q0 .594-.421 1.016-.423.421-1.016.422-.594 0-1.016-.422A1.38 1.38 0 0 1 3.034 9.5q0-.586.422-1.008a1.4 1.4 0 0 1 1.016-.422h.765zm.671 1.781h1.782V6.281H5.909zM4.472 5.633h.765v-.781a.74.74 0 0 0-.226-.54.7.7 0 0 0-.54-.234.75.75 0 0 0-.546.227.75.75 0 0 0-.227.547q0 .32.227.554a.75.75 0 0 0 .547.227m4.648 0a.75.75 0 0 0 .547-.227.76.76 0 0 0 .235-.554.73.73 0 0 0-.235-.547.75.75 0 0 0-.547-.227.72.72 0 0 0-.539.234.74.74 0 0 0-.226.54v.78zM4.472 8.719a.73.73 0 0 0-.547.234.75.75 0 0 0-.227.547q0 .32.227.547a.75.75 0 0 0 .547.226.72.72 0 0 0 .539-.226.76.76 0 0 0 .226-.547v-.781zm4.648 0h-.765V9.5q0 .312.226.547.226.226.54.226a.75.75 0 0 0 .546-.226.73.73 0 0 0 .235-.547.73.73 0 0 0-.235-.547.73.73 0 0 0-.547-.234m8.549 5.078q-1.032 0-1.563-.524-.523-.523-.523-1.554V2.664q0-1.031.523-1.555.531-.523 1.563-.523H26.7q1.039 0 1.563.531.53.525.53 1.547v9.055q0 1.016-.53 1.547-.524.53-1.563.53zm.015-.742h9q.65 0 1.008-.352.36-.343.36-1.023V2.703q0-.68-.36-1.023-.36-.352-1.008-.352h-9q-.663 0-1.015.352-.344.344-.344 1.023v8.977q0 .68.344 1.023.352.352 1.015.352m2.578-2.547a.35.35 0 0 1-.265-.11.42.42 0 0 1-.102-.296V4.195a.42.42 0 0 1 .102-.297.35.35 0 0 1 .265-.109q.18 0 .282.11a.42.42 0 0 1 .101.296v2.977h.032l3.195-3.227a.6.6 0 0 1 .148-.117.35.35 0 0 1 .172-.039q.141 0 .242.094a.3.3 0 0 1 .102.226q0 .078-.031.149a.4.4 0 0 1-.086.125l-2.274 2.305 2.47 3.156a1 1 0 0 1 .077.148.3.3 0 0 1 .04.156q0 .157-.11.258a.35.35 0 0 1-.258.102.36.36 0 0 1-.187-.047.6.6 0 0 1-.165-.156l-2.414-3.117-.953.976v1.938a.42.42 0 0 1-.101.296.36.36 0 0 1-.282.11"})}),{})),j=a(915299),N=a(441259);let I=e=>(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:37,height:14,fill:"none",viewBox:"0 0 37 14",...e,children:[(0,d.jsx)("rect",{width:22.3,height:12.3,x:.35,y:.85,stroke:"currentColor",strokeWidth:.7,rx:1.65}),(0,d.jsx)("path",{fill:"currentColor",d:"M6.97 10.666c-1.913 0-3.11-1.416-3.11-3.682v-.01c0-2.27 1.192-3.686 3.106-3.686 1.484 0 2.642.933 2.852 2.285l-.005.01h-.884l-.005-.01C8.69 4.67 7.938 4.1 6.966 4.1c-1.353 0-2.202 1.113-2.202 2.876v.01c0 1.762.85 2.87 2.207 2.87.981 0 1.728-.502 1.948-1.313l.01-.01h.889v.01c-.235 1.289-1.348 2.124-2.847 2.124m5.885-.127c-1.084 0-1.538-.4-1.538-1.406V5.939h-.83v-.703h.83V3.874h.879v1.362h1.152v.703h-1.152v2.979c0 .62.215.87.761.87.152 0 .235-.006.391-.02v.722c-.166.03-.327.05-.493.05m1.563-.039V5.236h.85v.782h.077c.2-.552.694-.874 1.407-.874.16 0 .341.02.424.034v.825a3 3 0 0 0-.522-.049c-.81 0-1.387.513-1.387 1.284V10.5zm3.657 0V3.146h.85V10.5z"}),(0,d.jsx)("rect",{width:12.3,height:12.3,x:24.35,y:.85,stroke:"currentColor",strokeWidth:.7,rx:1.65}),(0,d.jsx)("path",{fill:"currentColor",d:"M28.103 10.5V3.454h.878v3.423h.079l3.085-3.423h1.104l-2.817 3.042 3.076 4.004H32.37l-2.544-3.394-.845.933V10.5z"})]});var E={"thread-creation":"thread-creation-CThjxH",icon:"icon-Hucjje","short-cut":"short-cut-h4NtnU",disabled:"disabled-VNC63M","text-creation":"text-creation-XZOOrB"};let L=e=>{let{onClickNewChat:t,classname:a,iconStyle:s,disabled:n=!1}=e,i=(0,j.useTranslateFn)(),l=(0,N.isWindows)();return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:r()(a,E["thread-creation"],n&&E.disabled,"box-border rounded-12 mt-16 mb-6 h-40"),"data-testid":"create_conversation_button","data-disabled":n,onClick:t,children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("button",{className:"flex items-center justify-center p-0 w-24 h-24 text-16 font-medium bg-transparent rounded-12 border-none",children:(0,d.jsx)(k.default,{className:E.icon,style:s})}),(0,d.jsx)("div",{className:r()(E["text-creation"],"text-14 font-semibold leading-22 select-none grow flex-1 ml-6"),children:i("new_chat_button")})]}),l?(0,d.jsx)(I,{className:E["short-cut"]}):(0,d.jsx)(C,{className:E["short-cut"]})]})})},T=()=>{let e=(0,h.useCreateNewChat)("bot_list_plus"),t=(0,S.useIsWindows)(),a=()=>{e(),(0,x.toggleMobileSidebarExpand)()};return(0,_.default)("keydown",e=>{"k"===e.key&&(t?e.ctrlKey:e.metaKey)&&(a(),e.preventDefault())}),(0,d.jsx)(L,{onClickNewChat:a})},O=(0,n.forwardRef)(function(e,t){let{loading:a=!0}=e,[s,i]=(0,n.useState)(!0),r=(0,w.useUserInfo)();return(0,n.useEffect)(()=>{window.Tea.getVar("show_create_bot_btn",!0,e=>{i(e)})},[r]),(0,d.jsx)("div",{ref:t,className:"!px-12",children:a?(0,d.jsx)("div",{className:"rounded-12 mt-16 mb-6 h-40 bg-s-color-bg-trans"}):s?(0,d.jsx)(T,{}):null})});var M=a(899607),F=a(633161),P=a(502590),R=a(953423),$=a(501461),D=a(41650),A=a(698392),B=a(935366),q=a(23226),V=a(971857),z=a(230932),H=a(651610),W=a(721118),U=a(777422),K=a(20315),J=a(426156),G=a(154615),Q=a(198660),Z=a(863733),X=a(424785),Y=a(224031),ee=a(214902),et=a(227587),ea=a(321050);let es=(0,o.withSuspense)((0,l.afterAppInitLazyComponent)(async()=>{let{PrivacyPopup:e}=await a.e("75519").then(a.bind(a,592104));return{default:e}}));var en=a(436114),ei=a(214071),er=a(780533),el=a(777765),eo=a(956801),ed=a(894265),ec=a(666196),eu=a(162771),eh=a(679224),ep=a(112458),em=a(602530),ef=a(366119),ev=a(715584),eg=a(712980),eb=a(178230),ex=a(676314),ey=a(50909);let ew=e=>{let{children:t}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"w-full mb-8 flex flex-col gap-2","data-testid":"sidebar-skills",children:t}),(0,d.jsx)("div",{className:"w-full h-[0.5px] bg-s-color-border-secondary px-4 mb-8"})]})},e_=(0,o.withSuspense)((0,l.afterAppInitLazyComponent)(()=>Promise.all([a.e("32529"),a.e("83094")]).then(a.bind(a,152835)).then(e=>({default:e.SidebarApplicationListInner}))),ey.SidebarApplicationListFallback),eS=e=>{let{sidebarSkills:t,NavLink:a}=e;return(0,d.jsx)(ew,{children:(0,d.jsx)(e_,{sidebarSkills:t,NavLink:a})})};var ek=a(351415),eC=a(645298),ej=a(831566),eN=a(846106),eI=a(856392);let eE=e=>{let{loading:t=!0,children:a}=e,{className:s,onScroll:i}=(0,ep.useCustomScrollbar)(),l=(0,n.useCallback)(async()=>{let{conversationListStatus:e,loadBotConversationList:a,loadOverallList:s,overallListStatus:n,isOverallList:i}=z.useFeedStore.getState(),{loading:r,hasMore:l,count:o}=i?n:e;if(!l||t||r)return;let d=(0,eI.createReportEvent)({eventName:"load_more_bot_conversation_list"});try{i?await s({index:null==n?void 0:n.nextIndex,pcPinQueryType:null==n?void 0:n.pcPinQueryType}):await a({size:eC.chatConversationPageLoadCount,index:o}),d.success()}catch(e){throw d.error({reason:"load_more_bot_conversation_list_failed",error:e instanceof Error?e:Error(String(e))}),e}},[t]),o=(0,ek.default)(()=>ej.DeprecatedChatEvent.emit("sidebar.chatlist.scroll"),300);return(0,d.jsx)(eN.ScrollView,{showScrollbar:!0,reachBottomThreshold:100,onReachBottom:l,onScroll:()=>{i(),o()},className:r()("chat-scroll-view-QxZNdT",{"chat-scroll-view-webkit-tCjU5u":(0,N.getIsIPhoneOrIPad)()},s),children:(0,d.jsx)("div",{className:r()("chat-scroll-content-yEO7ns","chat-scroll-content-webkit-KHQnKw"),style:{padding:0,paddingRight:"calc(12px - var(--scrollbar-width))"},children:a})})};var eL=a(838708),eT=a(792222),eO=a(542737),eM=a(365283),eF=a(508751),eP=a(58458);function eR(){let e=(0,j.useTranslateFn)(),t=(0,eP.useHandleClickSpaceEntry)();return(0,d.jsx)(eO.SidebarApplicationUI,{NavLink:eM.NavLink,"data-testid":"ai_space_nav_button",renderIcon:e=>{let{className:t}=e;return(0,d.jsx)(eT.default,{className:t})},text:e("aispace"),url:`${eF.AI_SPACE_ROUTE}?from=sidebar_ai_drive`,onClick:t})}var e$=a(830802),eD=a(200106),eA=a(646013),eB=a(37142),eq=a(217957);let eV=e=>{let{root:t=null,rootMargin:a="0px",threshold:s=0,autoInit:i=!1,onIntersect:r}=e,[l,o]=(0,n.useState)(null),[d,c]=(0,n.useState)(null),[u,h]=(0,n.useState)(!1),[p,m]=(0,n.useState)(1),f=function(){let{root:e=t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(l||!IntersectionObserver)return l;let n=new IntersectionObserver(e=>{let t=e[0];c(t),h(t.isIntersecting),m(t.intersectionRatio),t.isIntersecting&&(null==r||r(t))},{root:e,rootMargin:a,threshold:s});return o(n),n};return(0,n.useEffect)(()=>{i&&f()},[]),{observer:l,entry:d,isIntersecting:u,intersectionRatio:p,initObserver:f}};var ez={"sticky-el":"sticky-el-ikzmqM",sticky:"sticky-bZ6Hpp"};let eH=e=>{let{children:t,autoInit:a=!1,root:s,top:i=0,threshold:r=0,stickyStyle:l={},onIntersect:o=en.default,getRoot:c=()=>null,onStickyChange:u,...h}=e,p=(0,n.useRef)(null),m=(0,n.useRef)(null),[f,v]=(0,n.useState)(!1),{entry:g,observer:b,initObserver:x}=eV({root:s,rootMargin:`-${i}px 0px 0px 0px`,threshold:r,onIntersect:o,autoInit:a}),y=()=>{var e,t;if(!g)return;let{intersectionRatio:a,rootBounds:s,boundingClientRect:n}=g,r=f;s&&1>Number(a)&&n.top-i<s.top?(null===(e=m.current)||void 0===e||e.classList.add(ez.sticky),m.current.style.top=`${null==s?void 0:s.top}px`,m.current.style.width=`${null==n?void 0:n.width}px`,p.current.style.height=`${null==n?void 0:n.height}px`,r=!0):(p.current.style.height="inherit",m.current.style.width="",null===(t=m.current)||void 0===t||t.classList.remove(ez.sticky),r=!1),v(r),null==u||u(r)},w=e=>{if(!p.current)return;let t=b;"init"===e?(a||t||(t=x({root:(0,eq.default)(s)?(null==c?void 0:c())||null:s})),null==t||t.observe(p.current)):null==t||t.unobserve(p.current)};return(0,n.useLayoutEffect)(()=>{g&&y()},[g]),(0,n.useEffect)(()=>(w("init"),()=>{w("destroy")}),[]),(0,d.jsx)("div",{ref:p,...h,style:{height:"auto"},children:(0,d.jsx)("div",{ref:m,className:ez["sticky-el"],style:f?l:{},children:t})})};var eW=a(389174),eU=a(792642),eK=a(794267),eJ=a(48766),eG="skeleton-kAZ7o5";let eQ=e=>{let{stickyRef:t}=e,a=(0,j.useTranslateFn)(),s=(0,n.useRef)(new Set),{conversationLinks:i,overallListStatus:l}=(0,V.useConversationList)(),[o,c]=(0,n.useState)(!1),u=(0,eU.useIsNarrowScreen)(),h=(0,eK.default)(o,{wait:300})||o,p=(e,t)=>t?!!s.current.has(t)||(s.current.add(t),!1):!!(!e||s.current.has(e))||(s.current.add(e),!1),m=(0,eU.useIsNarrowScreen)(),f=(0,n.useRef)({}),g=e=>{if(e)return f.current[e]||(f.current[e]=(0,n.createRef)()),f.current[e]},b=(h||u)&&i.length>5;return(0,d.jsxs)(K.SidebarSection,{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[(0,d.jsx)(eH,{top:0,threshold:1,getRoot:()=>t.current,stickyStyle:{backgroundColor:"var(--s-color-bg-base, #f3f4f6)",boxShadow:"0px 20px 20px 0px var(--s-color-bg-base, #f3f4f6)"},children:(0,d.jsx)("div",{children:(0,d.jsxs)(K.SidebarSection.Item,{className:"mainItem-jXHOus",children:[(0,d.jsx)(K.SidebarSection.ItemTitle,{className:"title-IL8Esh",children:a("sidebar_chats_history_title")}),(0,d.jsx)("div",{className:"collapse-icon-wrapper-po0pG6",children:(0,d.jsx)(ee.SamanthaTooltip,{content:a("sidebar_chats_view_all_button"),mouseEnterDelay:300,mouseLeaveDelay:300,children:(0,d.jsx)("div",{className:r()("relative",{"!hidden":!b}),children:(0,d.jsx)(eM.NavLink,{"data-testid":"view_all_chats_button",to:v.CHAT_ALL_THREADS,onClick:()=>{(0,x.toggleMobileSidebarExpand)(),(0,U.trackEvent)("sidebar_button_click",{button_name:"history_chat_all"})},className:"section-title-icon-btn-UkoJ_z",children:(0,d.jsx)(e$.default,{})})})})})]})})}),(0,d.jsx)("div",{className:r()("collapse-content-uFEpZ8"),children:(0,d.jsx)("div",{className:"flex flex-col gap-2",children:(0,d.jsx)("div",{ref:t,className:"shrink min-h-0 flex flex-col",children:(0,d.jsx)(K.SidebarSection,{children:(0,d.jsx)("div",{className:"pb-10 text-14 chat-thread-list-section",children:(0,d.jsxs)("div",{className:"relative pt-1",style:{"--thread-item-height":"38px"},children:[(0,d.jsxs)(eD.default,{className:r()("thread-item-transition-SV4nzY","flex flex-col gap-2"),children:[i.map((e,t)=>(0,d.jsx)(eA.default,{nodeRef:g(e.conversationId),timeout:300,classNames:"thread-item-transition",appear:!t,exit:!t,children:(0,d.jsx)("div",{ref:g(e.conversationId),children:(0,eW.isBotConversationType)(e.conversationType)?(0,d.jsx)(eB.ChatItemForConversation,{"data-testid":"chat_list_bot_item",isOverallChatItem:!0,conversationLink:e,hasBotShow:p,enableOverflowTooltip:!m}):(0,d.jsx)(eB.ChatItemForConversation,{"data-testid":"chat_list_thread_item","data-local-item":(0,H.isLocalThreadId)(e.threadId)?"chat_list_local_thread_item":void 0,hasMenu:!(0,H.isLocalThreadId)(e.threadId)&&void 0,isOverallChatItem:!0,conversationLink:e,hasBotShow:p,enableOverflowTooltip:!m})})},e.originConversationKey||e.conversationId)),(0,d.jsx)("div",{className:r()("flex flex-col gap-2",{hidden:!l.loading||!!i.length}),children:Array.from({length:5}).map((e,t)=>(0,d.jsxs)("div",{className:"flex items-center py-6 px-10",children:[(0,d.jsx)("div",{className:r()(eG,"w-20 h-20 !rounded-full mr-8")}),(0,d.jsx)("div",{className:r()(eG,"flex-1 min-w-0 h-26")})]},t))}),!i.length&&!l.hasMore&&!l.loading&&(0,d.jsx)(eA.default,{timeout:300,classNames:"thread-item-transition",exit:!0,appear:!0,children:(0,d.jsx)("p",{className:"s-font-xs truncate text-s-color-text-quaternary h-38 py-6 px-8",children:a("homepage_chatlist_empty_placeholder")})})]}),l.loading&&l.hasMore&&(0,d.jsxs)("div",{className:"p-8 text-s-color-text-quaternary flex items-center",children:[(0,d.jsx)("div",{style:{"--semi-color-primary":"#00000080"},className:"w-20 h-22 flex items-center justify-center mr-8",children:(0,d.jsx)(eJ.default,{size:"small",wrapperClassName:"mt-2"})}),a("bookmarks_list_loading")]})]})})})})})})]})};var eZ=a(315454),eX=a(680887),eY=a(167838),e0=a(2551),e1=a(551359),e2=a(101874),e5=a(780044),e3=a(391723),e4=a(134088),e7=e=>{let{hasBotShow:t}=e,a=(0,j.useTranslateFn)(),s=(0,eU.useIsNarrowScreen)(),i=(0,Q.useIsLoggedIn)(),{threadLinks:l,threadFeedStatus:o,threadListStatus:c,loadThreadFeed:u}=(0,V.useThreadList)(),{loadThreadListNextPage:h}=(0,e4.useLoadAllThreadListNextPage)(),p=(0,n.useRef)({}),m=e=>{if(e)return p.current[e]||(p.current[e]=(0,n.createRef)()),p.current[e]},f=null==l?void 0:l.slice(0,5);(0,n.useEffect)(()=>{i&&!c.loading&&!c.failed&&(!c.initiated||c.hasMore&&l.length<=5)&&h()},[c.loading,c.initiated,c.hasMore,l.length,c.failed,i]);let{current:v}=(0,n.useRef)({count:0,start:0});(0,n.useEffect)(()=>{if(i&&!o.loading&&!o.failed&&o.hasMore&&l.length<=5){if(v.count++>3){if(Date.now()-v.start<1e4){eb.logger.persist.warning({message:"loadThreadFeed_too_much_times",meta:{count:v.count,duration:v.start?Date.now()-v.start:0,thread_link_length:l.length,has_more:o.hasMore,is_overall_list:z.useFeedStore.getState().isOverallList?"1":"0"}});return}v.count=0,v.start=Date.now()}u()}},[o.loading,o.hasMore,l.length,o.failed,i]);let g=((null==f?void 0:f.length)||1)+(o.hasMore||l.length>5?1:0);return(0,d.jsx)(K.SidebarSection,{children:(0,d.jsx)("div",{className:"pl-16 pb-10 text-14 chat-thread-list-section",children:(0,d.jsx)("div",{className:"relative pl-10 pt-1",style:{height:`${32*g+(g>0?2*(f.length-1):0)}px`,"--thread-item-height":"32px"},children:(0,d.jsxs)(eD.default,{className:r()("thread-item-transition-tk7Tx0","flex flex-col gap-2"),children:[f.map((e,a)=>(0,d.jsx)(eA.default,{nodeRef:m(e.conversationId),timeout:300,classNames:"thread-item-transition",appear:!a,exit:!a,children:(0,d.jsx)("div",{ref:m(e.conversationId),children:(0,d.jsx)(eB.ChatItemForConversation,{"data-testid":"chat_list_thread_item","data-local-item":(0,H.isLocalThreadId)(e.threadId)?"chat_list_local_thread_item":void 0,conversationLink:e,hasBotShow:t,enableOverflowTooltip:!s})})},e.originConversationKey||e.conversationId)),!f.length&&(0,d.jsx)(eA.default,{timeout:300,classNames:"thread-item-transition",exit:!1,appear:!1,children:(0,d.jsx)("p",{className:"s-font-xs truncate text-s-color-text-quaternary h-32 py-6 px-8",children:a("homepage_chatlist_empty_placeholder")})})]})})})})},e6={"collapse-content":"collapse-content-w3YzO3",mainItem:"mainItem-tnEtj8","collapse-icon-wrapper":"collapse-icon-wrapper-_p9iJG","collapse-close":"collapse-close-zMdgEu","right-icon":"right-icon-TwtNgv",title:"title-yu3XdW",placeholder:"placeholder-CNAjXZ","collapse-open":"collapse-open-_i5_BE"};let e8=e=>{let{stickyRef:t,trailingSeparator:a=!1}=e,s=(0,j.useTranslateFn)(),i=(0,e3.getChatIdFromURL)(),l=(0,V.useConversation)(i||""),[o,c]=(0,n.useState)(!0),u=(0,n.useRef)(null),h=(0,n.useRef)(new Set),{conversationListStatus:p}=(0,V.useBotConversationList)(),{threadLinks:m}=(0,V.useThreadList)(),f=(0,n.useMemo)(()=>!!i&&((0,eW.isCocoConversation)(l)||(0,eW.isCocoSubConversation)(l)),[i,l]),v=e=>{c(t=>{let a=!t;return(0,eq.default)(e)||(a=!!e),(0,U.trackEvent)("historic_thread_expand_action",{after_click_status:a?"expand":"close"}),a})};(0,n.useEffect)(()=>{let e=u.current;if(e){if(o){var t;e.style.height=`${null===(t=e.firstChild)||void 0===t?void 0:t.offsetHeight}px`}else e.style.height="0px"}},[p.loading,o,m.length]),(0,n.useEffect)(()=>{f&&v(!0)},[f]);let g=(0,e5.useTotalUnreadCount)({conversationTypes:[e2.PcchatExprConversationType.CocoWeb,e2.PcchatExprConversationType.CocoWebSub]});return(0,d.jsxs)(K.SidebarSection,{children:[(0,d.jsx)(eH,{top:0,threshold:1,getRoot:()=>t.current,stickyStyle:{backgroundColor:"#F3F4F6",boxShadow:"0px 20px 20px 0px #F3F4F6"},children:(0,d.jsx)("div",{children:(0,d.jsxs)(K.SidebarSection.Item,{className:e6.mainItem,onClick:()=>v(),children:[(0,d.jsx)(e0.default,{className:"text-16 p-2 mr-8"}),(0,d.jsx)(K.SidebarSection.ItemTitle,{className:e6.title,children:s("siderbar_recent_chats_title")}),!o&&(0,d.jsx)(e1.DotBadge,{count:g,className:"mr-4"}),(0,d.jsx)("div",{className:e6["collapse-icon-wrapper"],children:o?(0,d.jsx)(eX.default,{"data-testid":"thread_list_collapse_close_icon",className:e6["right-icon"]}):(0,d.jsx)(eY.default,{"data-testid":"thread_list_collapse_open_icon",className:e6["collapse-close"]})})]})})}),(0,d.jsx)("div",{ref:u,className:r()(e6["collapse-content"],o&&e6["collapse-open"]),children:(0,d.jsx)("div",{className:"flex flex-col gap-2",children:(0,d.jsx)("div",{ref:t,className:"shrink min-h-0 flex flex-col",children:(0,d.jsx)(e7,{hasBotShow:(e,t)=>t?!!h.current.has(t)||(h.current.add(t),!1):!!(!e||h.current.has(e))||(h.current.add(e),!1),stickyRef:t})})})}),(0,d.jsx)("div",{className:r()(e6.placeholder,o&&e6["collapse-open"])}),a&&o&&(0,d.jsx)("div",{className:"w-full h-[0.5px] bg-s-color-border-secondary px-4 mb-8 "})]})},e9=e=>{let{loading:t=!0,sidebarSkills:a,enableAISpace:s=!1,isOverallList:i=!1,showBookmark:r}=e,l=(0,n.useRef)(null),o=(0,Q.useIsLoggedIn)();return(0,d.jsx)("div",{ref:l,className:"flex min-h-0 shrink flex-col",children:(0,d.jsxs)(eE,{loading:t,children:[(0,d.jsx)(eS,{NavLink:eM.NavLink,sidebarSkills:a}),i?(0,d.jsxs)(eL.ChatItemMenuSlotContext.Provider,{value:eZ.ChatItemMenu,children:[null,s&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(eR,{}),(0,d.jsx)("div",{className:"mt-8 mb-8 h-[0.5px] w-full bg-s-color-border-secondary px-4"})]}),null,(0,d.jsx)(eQ,{stickyRef:l})]}):(0,d.jsxs)(eL.ChatItemMenuSlotContext.Provider,{value:o?eZ.ChatItemMenu:()=>null,children:[(0,d.jsx)(e8,{stickyRef:l,trailingSeparator:o}),null,null,s&&(0,d.jsx)(eR,{})]})]})})};var te={container:"container-VDAC9d","chat-scroll-view":"chat-scroll-view-MQQ45l",chatScrollView:"chat-scroll-view-MQQ45l","show-line":"show-line-elJcas",showLine:"show-line-elJcas","chat-scroll-view-webkit":"chat-scroll-view-webkit-AQo5Gk",chatScrollViewWebkit:"chat-scroll-view-webkit-AQo5Gk","chat-scroll-content":"chat-scroll-content-eEgoXU",chatScrollContent:"chat-scroll-content-eEgoXU","chat-scroll-content-webkit":"chat-scroll-content-webkit-qMWJD8",chatScrollContentWebkit:"chat-scroll-content-webkit-qMWJD8","chat-scroll-content-skeleton":"chat-scroll-content-skeleton-aIRamH",chatScrollContentSkeleton:"chat-scroll-content-skeleton-aIRamH","retry-button-wrapper":"retry-button-wrapper-oNSHzu",retryButtonWrapper:"retry-button-wrapper-oNSHzu",title:"title-dcnqyY",collapse:"collapse-Y5T1n7",mainCoco:"mainCoco-xqcAVp",aiBot:"aiBot-KlpbIB","sticky-shadow":"sticky-shadow-lUJMgN",stickyShadow:"sticky-shadow-lUJMgN"};let tt=en.default,ta=e=>{let{loading:t=!1,alignToBigHeaderBtn:a,className:s,isOverallList:i}=e,{className:l,onScroll:o}=(0,ep.useCustomScrollbar)(),{run:c}=(0,ef.default)(()=>(0,ex.refreshConversationList)({isOverallList:i}),{wait:1e3,leading:!0,trailing:!1}),{enable_bookmark_in_online_homepage:u}={enable_bookmark_in_online_homepage:!1};(0,n.useEffect)(()=>(function(){let e=ev.useNetworkStore.subscribe(e=>e.isOffline,e=>!e&&c()),t=()=>"visible"===document.visibilityState&&c();return window.addEventListener("visibilitychange",t),()=>{e(),window.removeEventListener("visibilitychange",t)}})(),[]),tt(t),(0,n.useEffect)(()=>{t||(eo.useTracingStore.getState().addDurationPoint("chat_list_mount"),function(e){if("undefined"==typeof window)return;let{extId:t}=(0,eg.parseHashOrQuery)(location.search),a={...e,body:{...null==e?void 0:e.body,originContext:"web"}};if(t)try{var s,n;return null===(n=chrome)||void 0===n?void 0:null===(s=n.runtime)||void 0===s?void 0:s.sendMessage(t,e)}catch(e){eb.logger.persist.error({message:"[ext-helper] sendMessage via chrome.runtime.sendMessage error",error:e})}try{"undefined"!=typeof window&&window.postMessage(a,location.origin)}catch(e){eb.logger.persist.error({message:"[ext-helper] sendMessage error, retry via window.postMessage",error:e})}}({name:"web-homepage-loaded",body:{originContext:"web"}}))},[t]);let h=(0,ec.useChatService)("chatConfigService"),{trimSkills:p}=(0,eu.useTrimSkillsHidden)(),m=(0,q.useSidebarSkills)(),f=(0,er.useAISpaceEnable)(),{data:v,loading:g}=(0,eh.useLoadSkillList)({logRequest:ed.logSkillListConsumeRequest,ready:void 0===m,language:(0,em.getUnreactiveLanguage)(),getSkillListPrefetch:null==h?void 0:h.getSkillListPrefetch,reportParams:{from:"chat_list"}}),b=(0,n.useRef)(!1);return((0,n.useEffect)(()=>{g||(0,ei.default)(null==v?void 0:v.onboardingSkills)||b.current||(b.current=!0,(0,A.getChatStore)("chatGuidanceStore").setState({sidebarSkills:null==v?void 0:v.sidebarSkills,onboardingSkills:null==v?void 0:v.onboardingSkills}))},[v,g]),t)?(0,d.jsx)("div",{className:r()(te["chat-scroll-view"],{[te["chat-scroll-view-webkit"]]:(0,N.getIsIPhoneOrIPad)()},s,l),style:{padding:0},onScroll:o,children:(0,d.jsx)(el.SidebarSkeleton,{style:{paddingTop:0},headerBtn:!1})}):(0,d.jsx)("div",{"data-testid":"chat_list_wrapper",className:r()(te["chat-scroll-content"],te.container,{[te["chat-scroll-content-small-px"]]:a},s),children:(0,d.jsx)(e9,{loading:t,sidebarSkills:null!=m?m:[],enableAISpace:f&&!p,isOverallList:i,showBookmark:!!u})})};var ts={sidebar:"sidebar-UeSlOl",collapsed:"collapsed-Xorh_w","open-temporarily":"open-temporarily-MrUqNU",openTemporarily:"open-temporarily-MrUqNU",content_wrapper:"content_wrapper-o9ysbH",contentWrapper:"content_wrapper-o9ysbH",banner:"banner-v3FjLa",sidebar__header:"sidebar__header-iDTe69",sidebarHeader:"sidebar__header-iDTe69","sidebar__header-skeleton":"sidebar__header-skeleton-b5qJdH",sidebarHeaderSkeleton:"sidebar__header-skeleton-b5qJdH","sidebar__header-container":"sidebar__header-container-DlLicu",sidebarHeaderContainer:"sidebar__header-container-DlLicu",skeleton:"skeleton-EkLp0V","simple-chat-list":"simple-chat-list-xMSYG1",simpleChatList:"simple-chat-list-xMSYG1"};let tn=[v.CHAT_ALL_THREADS,v.Collection_ROUTE],ti=(0,o.withSuspense)((0,l.afterAppInitLazyComponent)(()=>Promise.all([a.e("44658"),a.e("30543"),a.e("91884")]).then(a.bind(a,355251)))),tr=(0,J.withErrorBoundary)(()=>{var e;let t=(0,j.useTranslateFn)(),a=(0,x.useMobileSidebarExpanded)(),i=(0,A.useChatSlice)("chatViewCanvasStore",e=>e.isExpand),l=(0,M.useIsSidebarResponsiveHide)(i),{value:o,loading:v}=(0,ea.useIsOverallList)(),w=(0,V.useThreadFeedInitiated)(),_=(0,z.useFeedStore)(e=>(0,H.getThreadLinksFromConversationLinks)((0,W.threadListDataSelector)(e)).length>0),S=(null===(e=(0,V.useConversationList)().conversationLinks)||void 0===e?void 0:e.length)>0,k=(0,n.useRef)(null),{mobileSidebarVisible:C}=(0,F.useMobile)(),N=(0,n.useRef)(null),I=(0,Z.default)(N),E=(0,n.useRef)(null),L=(0,Z.default)(E),T={"--sidebar-header-height":(null==I?void 0:I.height)?`${I.height}px`:"0px","--sidebar-bottom-height":(null==L?void 0:L.height)?`${L.height}px`:"0px"},J=(0,Q.useIsLoginLoading)(),G=(0,Q.useIsGuest)(),en=(0,q.useSidebarSkills)(),[ei,er]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=setTimeout(()=>{er(!0)},1e4);return()=>{clearTimeout(e)}},[]);let el=!en&&!ei,{setClickArea:eo}=(0,R.useLoginModal)(),ed=(0,x.useSideBarExpanded)(),ec=(0,h.useCreateNewChat)("bot_list_plus"),eu=(0,p.useIsNewThreadFromURL)(),eh=(0,d.jsx)(K.SidebarSectionConfigProvider,{value:{theme:"default"},children:(0,d.jsxs)("div",{className:"flex flex-col h-full select-none",onClickCapture:()=>G&&eo($.ClickArea.CHAT_LIST),children:[(ed||a)&&(0,d.jsxs)("div",{className:"flex items-center justify-between mt-12 ml-16 mr-10",children:[(0,d.jsx)(c,{defaultClick:()=>{if(eu){B.defaultChatInputFacade.focus();return}ec(),(0,x.toggleMobileSidebarExpand)()},actualShow:l?a:ed,children:(0,d.jsx)(P.BrandLogo,{size:36,brandName:(0,g.getBrandName)(),theme:"white-bg",icon:(0,d.jsx)(u,{})})}),(0,d.jsx)(ee.SamanthaTooltip,{content:t("hide_sidebar_tooltip"),position:"right",children:(0,d.jsx)(X.default,{"data-testid":"siderbar_close_btn",theme:"borderless",className:"w-28 h-28 p-0 rounded-s-radius-xs hover:bg-s-color-bg-trans",icon:(0,d.jsx)(s.default,{className:"text-20 text-s-color-text-quaternary"}),onClick:()=>{l?(0,x.toggleMobileSidebarExpand)():((0,U.trackEvent)("sidebar_showstatus_change",{after_click_status:"close"}),(0,x.setSidebarExpand)(!1),(0,x.setIsOpenTemporarily)(!1))}})})]}),(0,d.jsx)(O,{ref:N,loading:el}),(0,d.jsx)("div",{className:"flex-1 relative min-h-0",ref:k,style:T,children:(0,d.jsx)(ta,{className:ed||l?void 0:ts["simple-chat-list"],loading:el||v,isOverallList:o})}),(0,d.jsx)(ti,{ref:E,isLoadingWithChatList:!S&&!_&&!w||J}),(0,d.jsx)(es,{})]})}),ep=(0,et.useLocation)(),em=(0,D.useIsChatPage)(),ef=(0,m.useIsSkillGuidancePage)(),ev=(0,n.useRef)(null);(0,b.useSidebarOpenTemporarily)({sidebarRef:ev,disabled:!em&&!tn.includes(ep.pathname)&&!ef,getIsExpand:x.getIsExpand,getIsOpenTemporarily:x.getIsOpenTemporarily,onSetIsOpenTemporarily:x.setIsOpenTemporarily});let eg=(0,x.useIsOpenTemporarily)();return((0,f.useShouldShowCookieBanner)(k),(0,y.useReportThreadFeedUILoad)(".chat-thread-list-section [data-testid=chat_list_thread_item]",!J&&(!l||a)),l)?(0,d.jsx)(Y.default,{visible:a,onCancel:()=>(0,x.toggleMobileSidebarExpand)(),closable:!1,placement:"left",keepDOM:!0,headerStyle:{padding:0},bodyStyle:{padding:0,display:"flex",flexDirection:"column",background:"var(--s-color-bg-base"},width:"320px",children:eh}):(0,d.jsx)("aside",{"data-testid":"chat_siderbar",ref:ev,className:r()(ts.sidebar,ts.simple,!ed&&ts.collapsed,!1,eg&&ts["open-temporarily"]),"sidebar-visible":String(C),children:eh})},{errorBoundaryName:"chat_layout_sidebar_error",FallbackComponent:G.ResetErrorFallback,errorBoundaryScope:J.ErrorBoundaryScopeEnum.Component})},676314:function(e,t,a){a.d(t,{refreshConversationList:function(){return v}});var s=a(4137),n=a(918952),i=a(83990),r=a(230932),l=a(651610),o=a(6940),d=a(645298),c=a(198660),u=a(178230),h=a(856392),p=a(739044);let m=(e,t)=>{var a,i;let l=(0,p.getChatIdFromURL)(),{localConversationMap:o}=r.useFeedStore.getState(),d=l&&(null===(i=o[l])||void 0===i?void 0:null===(a=i.local)||void 0===a?void 0:a.createStatus)===n.CreateConversationStatus.Creating,c=t.slice(0,5).filter(t=>(0,s.default)(e.find(e=>t.conversation_id===e.conversationId)));d&&c.length>0&&u.logger.persist.warning({eventName:"new_thread_failed_but_shown",meta:{new_thread_list:c.map(e=>({conversation_id:e.conversation_id,message_cursor:e.message_cursor,message_index:e.message_index})),local_conversation_id:l}})},f=0,v=async e=>{let{isOverallList:t=!1}=e,a=(0,h.createReportEvent)({eventName:"refresh_conversation_list"}),s=++f,n="subsequent_request",u=()=>{if(s<f)throw Error(n)};try{await (0,c.getLoginLoadingPromise)(),a.addDurationPoint("login_finish"),u();let e=(0,l.getThreadLinksFromConversationLinks)({conversationLinks:r.useFeedStore.getState().conversationLinks,botConversationIndex:r.useFeedStore.getState().botConversationIndex}),s=(0,c.getIsLoggedIn)(),n=await r.useFeedStore.getState().loadConversationList({size:d.REFRESH_CHAT_CONVERSATION_COUNT,index:0,isRefresh:!0,type:s?t?[o.LoadConversationListType.Overall]:void 0:[o.LoadConversationListType.Guest]});a.addDurationPoint("fetch_success"),u(),i.useMessageStore.getState().updateLastMessageMap({conversationIds:n.map(e=>e.conversation_id||"").filter(Boolean)}),a.addDurationPoint("update_last_message_map_success"),u(),m(e,n),a.success()}catch(e){if(e instanceof Error){if(e.message===n){a.updateMeta({cancel:"1"}),a.success();return}a.error({reason:"refresh_conversation_list_failed",error:e})}}}}}]);
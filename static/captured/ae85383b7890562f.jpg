"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["42468"],{302430:function(e,t,r){r.d(t,{ttWidManager:function(){return s}});var n=r(165482),i=r(38848),o=r(178230);function a(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let s=new class{setTtwidConfig(e){if(this._ttWidConfig=e,i.FlowLocalStorage.setItem("samantha_web_web_id",JSON.stringify(e)),e.web_id&&"0"!==e.web_id){var t;null===(t=this._resolveTTWidConfigReady)||void 0===t||t.call(this,!0);return}o.logger.persist.warning({eventName:"TTWidManager_ttWidConfig_format_invalid",meta:{...e}})}get ttWidConfig(){return this._ttWidConfig}waitUtilTTWidConfigReady(){return this._waitingTTWidConfigReady}constructor(){a(this,"_waitingTTWidConfigReady",void 0),a(this,"_resolveTTWidConfigReady",void 0),a(this,"_ttWidConfig",{}),o.logger.persist.info({eventName:"TTWidManager_initialized"});let e=i.FlowLocalStorage.getItem("samantha_web_web_id");e?(this._ttWidConfig=(0,n.parseJSON)(e,{}),this._waitingTTWidConfigReady=Promise.resolve(!0)):this._waitingTTWidConfigReady=new Promise(e=>{this._resolveTTWidConfigReady=e}).then(e=>(o.logger.persist.success({eventName:"TTWidManager_ttWidConfig_resolved"}),e))}}},855932:function(e,t,r){r.d(t,{execute:function(){return n},schedule:function(){return i}});let n=e=>e(),i=(e,t)=>{let r=setTimeout(e,t);return{cancel(){clearTimeout(r)},exec(){return this.cancel(),e()}}}},690619:function(e,t,r){r.d(t,{getFlowAccount:function(){return l},initFlowAccount:function(){return E}});var n=r(643404),i=r(172320),o=r(797840);let a=null,s=null,u=async()=>{let{FlowAccount:e}=await (0,n.retryLoad)(()=>Promise.all([r.e("49554"),r.e("7414"),r.e("23426"),r.e("71331"),r.e("18748"),r.e("64404"),r.e("81070"),r.e("9812"),r.e("29114"),r.e("76778"),r.e("70658"),r.e("10535"),r.e("65823"),r.e("20372"),r.e("15179"),r.e("38740"),r.e("58414"),r.e("46601"),r.e("65229"),r.e("30543"),r.e("36841"),r.e("24721"),r.e("60521")]).then(r.bind(r,148409)));return new e(s)},l=()=>{if(!s)throw Error("flowAccount is not initialized");if(!a){let e=(0,i.bindPromiseProperty)(u());a={ageGate:(0,i.bindPromiseProperty)(e.ageGate),workspace:(0,i.bindPromiseProperty)(e.workspace),third:(0,i.bindPromiseProperty)(e.third),cookie:(0,i.bindPromiseProperty)(e.cookie),tea:(0,i.bindPromiseProperty)(e.tea),passportApi:(0,i.bindPromiseProperty)(e.passportApi),config:(0,i.bindPromiseProperty)(e.config)}}return a},E=e=>{!a&&(s=e,(0,o.initFlowAccountStore)(e.storeConfig))}},369269:function(e,t,r){r.d(t,{defaultFlowAccountStore:function(){return n}});let n={userInfo:null,userInfoLoaded:!1,userProfile:null,thirdLoginList:Object.keys((0,r(918404).default)({aweme_v2:!0,apple:!1,google:!1},e=>!!e)),thirdLoginListLoaded:!0}},198660:function(e,t,r){r.d(t,{getIsGuest:function(){return E},getIsLoggedIn:function(){return _},getIsLoginLoading:function(){return d},getLoginLoadingPromise:function(){return g},getLoginState:function(){return l},subscribeLoginState:function(){return c},useIsGuest:function(){return a},useIsLoggedIn:function(){return s},useIsLoginLoading:function(){return u}});var n=r(715056),i=r(797840);let o=e=>{let{userInfo:t,userInfoLoaded:r}=e;return r?(null==t?void 0:t.user_id_str)&&(null==t?void 0:t.sec_user_id)?n.LoginState.Success:n.LoginState.Failed:n.LoginState.Loading},a=()=>(0,i.useFlowAccountStore)(e=>o(e)===n.LoginState.Failed),s=()=>(0,i.useFlowAccountStore)(e=>o(e)===n.LoginState.Success),u=()=>(0,i.useFlowAccountStore)(e=>o(e)===n.LoginState.Loading),l=()=>o(i.useFlowAccountStore.getState()),E=()=>l()===n.LoginState.Failed,_=()=>l()===n.LoginState.Success,d=()=>l()===n.LoginState.Loading,c=(e,t)=>i.useFlowAccountStore.subscribe(e=>o(e),(t,r)=>{e(t,r)},t),g=()=>new Promise(e=>{if(!d()){e(!0);return}let t=c(r=>{r!==n.LoginState.Loading&&(e(!0),t())})})},797840:function(e,t,r){r.d(t,{initFlowAccountStore:function(){return l},useFlowAccountStore:function(){return u}});var n=r(642220),i=r(580296),o=r(369269);let a=()=>({...o.defaultFlowAccountStore}),s=e=>{let{prefix:t,isEnableDebug:r,reduxDevToolsSnapshot:o}=e;return r&&o?(0,i.create)()((0,n.devtools)((0,n.subscribeWithSelector)(a),{name:`${t}-flow-account-store`})):(0,i.create)()((0,n.subscribeWithSelector)(a))},u=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let{_useFlowAccountStore:n}=u.prototype;if(n)return n(...t);throw Error("useFlowAccountStore is not initialized")};function l(e){let{_useFlowAccountStore:t}=u.prototype||{};if(!t){let t=s({...e});Object.setPrototypeOf(u.prototype,t),Object.defineProperties(u,{...Object.getOwnPropertyDescriptors(t)}),u.prototype._useFlowAccountStore=t}}},715056:function(e,t,r){var n;r.d(t,{LoginState:function(){return i}});let i=((n={})[n.Loading=0]="Loading",n[n.Success=1]="Success",n[n.Failed=2]="Failed",n)},905852:function(e,t,r){let n;r.d(t,{httpClient:function(){return u}});var i=r(306200),o=r(197343),a=r(133693);let s=()=>(n||((n=i.default.create({timeout:1e4})).interceptors.request.use(function(e){var t;return(null===(t=e.method)||void 0===t?void 0:t.toLowerCase())!=="post"||e.data||(e.data={}),e}),n.interceptors.response.use(async e=>{let{data:t={},headers:r,statusText:n,status:i,config:o}=e,{ignoreResponseInterceptors:s,responseInterceptors:u}=o||{};return s?e:("function"==typeof(null==u?void 0:u[0])&&(e=await u[0](e)),e=(0,a.apiResponseFilter)({responseBody:t,responseHeaders:r,responseStatusText:n,responseStatusCode:i,requestConfig:{url:o.url}}))},async e=>{if((0,o.isAxiosError)(e)){let{response:n,config:i}=e,{ignoreResponseInterceptors:o,responseInterceptors:s}=i||{};if(o)return Promise.reject(e);if("function"==typeof(null==s?void 0:s[1])&&await s[1](e),n){var t,r;let{data:i={},headers:o,statusText:s,status:u}=n;if((0,a.apiErrorEmitWithStatusCode)(e,null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status))return;(0,a.apiResponseFilter)({responseBody:i,responseHeaders:o,responseStatusText:s,responseStatusCode:u,requestConfig:{url:null==e?void 0:null===(r=e.config)||void 0===r?void 0:r.url}})}}throw e})),n),u=(e,t)=>s().request({...e,params:{...e.params,...(null==t?void 0:t.overrideParams)||{}},...(null==t?void 0:t.overrideConfig)||{}})},177048:function(e,t,r){var n,i;r.d(t,{ErrorCodes:function(){return a},ErrorCodesWithI18n:function(){return o}});let o=((n={})[n.UserInvalid=710022e3]="UserInvalid",n[n.CountryRestricted=0x2a521381]="CountryRestricted",n[n.SharkBlock=0x2a521372]="SharkBlock",n[n.NonCompliantContent=0x2a51ec65]="NonCompliantContent",n[n.LoginInvalid=0x2a51ec61]="LoginInvalid",n[n.InnerSSOInvalid=0x2a51ec66]="InnerSSOInvalid",n[n.UserBanReleased=0x2a51ec69]="UserBanReleased",n[n.UserBanned=0x2a51ec68]="UserBanned",n[n.UserBanAppealing=0x2a51ec6b]="UserBanAppealing",n[n.UserBanAppealFailed=0x2a51ec6a]="UserBanAppealFailed",n[n.UserNoAuthUseBot=0x2a51ec6c]="UserNoAuthUseBot",n[n.ProfileUpdateNotPass=0x2a51ec6f]="ProfileUpdateNotPass",n[n.ProfileInReview=0x2a51ec6d]="ProfileInReview",n[n.ProfileNotFound=0x2a51ec6e]="ProfileNotFound",n[n.ProfileInputLengthExceeded=0x2a51ec72]="ProfileInputLengthExceeded",n[n.ProfileUpdateNotEnabled=0x2a51ec73]="ProfileUpdateNotEnabled",n[n.CannotEditBotCauseReviewing=0x2a51f431]="CannotEditBotCauseReviewing",n),a=((i={})[i.UNKNOWN_ERROR=1]="UNKNOWN_ERROR",i[i.SHARK_BLOCKED=0x2a521372]="SHARK_BLOCKED",i[i.COUNTRY_RESTRICTED=0x2a521381]="COUNTRY_RESTRICTED",i[i.CONTENT_UNAVAILABLE=0x2a51ec65]="CONTENT_UNAVAILABLE",i[i.NOACCESS=710012e3]="NOACCESS",i[i.NO_PERMISSION=0x2a520c05]="NO_PERMISSION",i[i.BAD_REQUEST=0x2a520c69]="BAD_REQUEST",i[i.INVALID_PARAMS=0x2a520c6a]="INVALID_PARAMS",i[i.USER_INVALID=710022e3]="USER_INVALID",i[i.RECORD_NOT_FOUND=0x2a521371]="RECORD_NOT_FOUND",i[i.SYSTEM_ERROR=0x2a520e5e]="SYSTEM_ERROR",i[i.NOT_LOGIN=0x2a51ec61]="NOT_LOGIN",i[i.NO_INNER_SSO_TOKEN=0x2a51ec66]="NO_INNER_SSO_TOKEN",i[i.LIMIT_TO_SEND_MESSAGE=0x2a521374]="LIMIT_TO_SEND_MESSAGE",i[i.BOT_INVALID=0x2a521375]="BOT_INVALID",i[i.BOT_BANNED=0x2a52137a]="BOT_BANNED",i[i.BOT_REVIEWING=0x2a52137b]="BOT_REVIEWING",i[i.CONVERSATION_INVALID=0x2a521376]="CONVERSATION_INVALID",i[i.NEED_TO_WAIT=0x2a51ec67]="NEED_TO_WAIT",i[i.CLEAR_LAST_PROMPT=0x2a521378]="CLEAR_LAST_PROMPT",i[i.USER_BANNED=0x2a51ec68]="USER_BANNED",i[i.USER_BAN_RELEASED=0x2a51ec69]="USER_BAN_RELEASED",i[i.USER_BAN_APPEALING=0x2a51ec6b]="USER_BAN_APPEALING",i[i.USER_BAN_APPEAL_FAILED=0x2a51ec6a]="USER_BAN_APPEAL_FAILED",i[i.NETWORK_TIMEOUT=0x2a51e74d]="NETWORK_TIMEOUT",i[i.MYSQL_ERROR=0x2a520ec1]="MYSQL_ERROR",i[i.PARAMS_VALID_FAILED=0x2a520c6b]="PARAMS_VALID_FAILED",i[i.REDIS_ERROR=0x2a520ec3]="REDIS_ERROR",i[i.USER_NO_AUTH_USE_BOT=0x2a51ec6c]="USER_NO_AUTH_USE_BOT",i[i.USER_NOT_EXISTED=0x2a51ec6e]="USER_NOT_EXISTED",i[i.OPEN_AUTH_INVALID=0x2a51ec74]="OPEN_AUTH_INVALID",i[i.IMAGE_SAFETY_ERROR=0x2a521f2b]="IMAGE_SAFETY_ERROR",i[i.FILE_SAFETY_ERROR=0x2a521f2c]="FILE_SAFETY_ERROR",i[i.CONVERSATION_MESSAGE_OVER_LIMIT=0x2a5203d1]="CONVERSATION_MESSAGE_OVER_LIMIT",i[i.CONVERSATION_UNDER_REVIEW=0x2a5203d2]="CONVERSATION_UNDER_REVIEW",i[i.CONVERSATION_SHARE_DELETED=0x2a5203d3]="CONVERSATION_SHARE_DELETED",i[i.GUEST_REACH_LIMIT=0x2a52137d]="GUEST_REACH_LIMIT",i[i.GUEST_CONVERSATION_REACH_LIMIT=0x2a521386]="GUEST_CONVERSATION_REACH_LIMIT",i[i.COLLECTION_DELETED=0x2a5226fb]="COLLECTION_DELETED",i[i.INVALID_SHARE_CREATION=0x2a5207b9]="INVALID_SHARE_CREATION",i[i.SECURITY_REVIEW_FAILED=67102e4]="SECURITY_REVIEW_FAILED",i[i.SECURITY_RESOURCE_REJECTED=0x27fef3e1]="SECURITY_RESOURCE_REJECTED",i[i.PARAMS_INVALID=67101e4]="PARAMS_INVALID",i[i.TASK_EXPIRED=0x284b1811]="TASK_EXPIRED",i[i.TASK_INVALID=0x284b1812]="TASK_INVALID",i[i.SERVER_BUSY_ERROR=0x284b1813]="SERVER_BUSY_ERROR",i[i.TASK_TIME_LIMIT=0x284b1815]="TASK_TIME_LIMIT",i[i.RISK_CONTROL_BLOCK=0x284b1816]="RISK_CONTROL_BLOCK",i[i.MAC_SYSTEM_LIMIT=0x284b1817]="MAC_SYSTEM_LIMIT",i[i.ASSIST_SELF_LIMIT=0x284b1818]="ASSIST_SELF_LIMIT",i[i.INACTIVE_USER=0x284b1819]="INACTIVE_USER",i[i.NEVER_SEND_MESSAGE=0x284b181a]="NEVER_SEND_MESSAGE",i[i.NO_REWARD_OPPORTUNITY=0x284b181b]="NO_REWARD_OPPORTUNITY",i[i.RECEIVE_ASSIST_LIMIT=0x284b181c]="RECEIVE_ASSIST_LIMIT",i[i.MUST_WIN_REWARD_BLOCK=0x284b181d]="MUST_WIN_REWARD_BLOCK",i[i.INVITE_CODE_ERROR=0x284b181e]="INVITE_CODE_ERROR",i[i.CLIENT_VERSION_LIMIT=0x284b181f]="CLIENT_VERSION_LIMIT",i[i.FRIENDS_ASSIST_LIMIT=0x284b1820]="FRIENDS_ASSIST_LIMIT",i[i.PHONE_NUMBER_NOT_BIND=0x284b1821]="PHONE_NUMBER_NOT_BIND",i[i.CHANNEL_LIMIT=0x284b1822]="CHANNEL_LIMIT",i[i.PHONE_NUMBER_ASSISTED=0x284b1823]="PHONE_NUMBER_ASSISTED",i[i.AI_SPACE_NODE_COUNT_EXCEED_ERROR=67202e4]="AI_SPACE_NODE_COUNT_EXCEED_ERROR",i[i.AI_SPACE_TREE_DEPTH_EXCEED_ERROR=0x280e3621]="AI_SPACE_TREE_DEPTH_EXCEED_ERROR",i[i.AI_SPACE_NODE_SIZE_EXCEED_ERROR=0x280e3622]="AI_SPACE_NODE_SIZE_EXCEED_ERROR",i[i.AI_SPACE_STORAGE_EXCEED_ERROR=0x280e3623]="AI_SPACE_STORAGE_EXCEED_ERROR",i[i.AI_SPACE_NODE_NOT_EXIST_ERROR=0x280e3624]="AI_SPACE_NODE_NOT_EXIST_ERROR",i[i.AI_SPACE_NODE_UNDER_REVIEW_ERROR=0x280e3625]="AI_SPACE_NODE_UNDER_REVIEW_ERROR",i[i.DOUBAO_REGION_BAN=0x27fea5c7]="DOUBAO_REGION_BAN",i[i.WORKSPACE_SHARE_NO_PERMISSION=0x280f6ea1]="WORKSPACE_SHARE_NO_PERMISSION",i[i.WORKSPACE_SHARE_NEED_LOGIN=0x280f6ea2]="WORKSPACE_SHARE_NEED_LOGIN",i)},949349:function(e,t,r){r.d(t,{APIErrorEvent:function(){return o},apiErrorEventEmitter:function(){return a}});var n=r(154922);function i(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o={UNAUTHORIZED:"unauthorized",NOACCESS:"noAccess",SHARK_BLOCK:"sharkBlocked",COUNTRY_RESTRICTED:"countryRestricted",CONVERSATION_INVALID:"conversationInvalid",NEED_TO_WAIT:"needToWait",USER_BANNED:"userBanned",USER_BANNED_OTHER:"userBannedOther",USER_BAN_RELEASE:"userBanRelease",NETWORK_ERROR:"networkError",DOUBAO_REGION_BAN:"doubaoRegionBan"};let a=new class{emit(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!this.started){this.buffer.push({event:e,args:r});return}this.eventEmitter.emit(e,...r)}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}start(){if(!this.started)for(let{event:e,args:t}of(this.started=!0,this.buffer))this.emit(e,...t)}stop(){this.started=!1}clear(){this.buffer=[]}constructor(){i(this,"eventEmitter",new n.default),i(this,"started",!0),i(this,"buffer",[])}}},769783:function(e,t,r){r.d(t,{isApiError:function(){return o}});var n=r(996406),i=r(788427);function o(e){return e instanceof i.ApiError||(0,n.default)(e)&&(null==e?void 0:e.name)==="ApiError"}},133693:function(e,t,r){r.d(t,{apiResponseFilter:function(){return E},isApiErrorWithI18n:function(){return l},apiErrorEmitWithStatusCode:function(){return _}});var n=r(996406);let i=e=>null==e?void 0:e["x-tt-logid"];var o=r(769783),a=r(949349),s=r(177048),u=r(788427);let l=e=>{var t,r,i,a;if(!(0,o.isApiError)(e)||null==e||null===(t=e.errorOption)||void 0===t||!t.code||null==e||null===(r=e.errorOption)||void 0===r||!r.message)return!1;{let t=Object.values(s.ErrorCodesWithI18n).filter(e=>"number"==typeof e);return!!((0,n.default)(e)&&e instanceof u.ApiError&&t.includes(Number(null==e?void 0:null===(i=e.errorOption)||void 0===i?void 0:i.code))&&(null==e?void 0:null===(a=e.errorOption)||void 0===a?void 0:a.message))}},E=e=>{let{responseBody:t={},responseHeaders:r,responseStatusCode:n,responseStatusText:o,requestConfig:l}=e,{code:E,msg:_,status_code:d,status_desc:c}=t,g=null!=E?E:d,S=null!=_?_:c,I=i(r);if(401===n)throw a.apiErrorEventEmitter.emit(a.APIErrorEvent.UNAUTHORIZED),new u.ApiError({message:S,code:String(g),httpStatus:o||String(n),logId:I,response:t,requestConfig:l});if(200!==n)throw new u.ApiError({message:S,code:String(g),httpStatus:o||String(n),logId:I,response:t,requestConfig:l});if(200===n&&0!==g){switch(g){case s.ErrorCodes.DOUBAO_REGION_BAN:a.apiErrorEventEmitter.emit(a.APIErrorEvent.DOUBAO_REGION_BAN,S,I);break;case s.ErrorCodes.NOACCESS:a.apiErrorEventEmitter.emit(a.APIErrorEvent.NOACCESS,S,I);break;case s.ErrorCodes.SHARK_BLOCKED:a.apiErrorEventEmitter.emit(a.APIErrorEvent.SHARK_BLOCK,S,I);break;case s.ErrorCodes.COUNTRY_RESTRICTED:a.apiErrorEventEmitter.emit(a.APIErrorEvent.COUNTRY_RESTRICTED,S,I);break;case s.ErrorCodes.NOT_LOGIN:case s.ErrorCodes.NO_INNER_SSO_TOKEN:case s.ErrorCodes.OPEN_AUTH_INVALID:a.apiErrorEventEmitter.emit(a.APIErrorEvent.UNAUTHORIZED,S,I);break;case s.ErrorCodes.NEED_TO_WAIT:a.apiErrorEventEmitter.emit(a.APIErrorEvent.NEED_TO_WAIT,S,I);break;case s.ErrorCodes.USER_BANNED:a.apiErrorEventEmitter.emit(a.APIErrorEvent.USER_BANNED,S,I);break;case s.ErrorCodes.USER_BAN_RELEASED:case s.ErrorCodes.USER_BAN_APPEALING:case s.ErrorCodes.USER_BAN_APPEAL_FAILED:a.apiErrorEventEmitter.emit(a.APIErrorEvent.USER_BANNED_OTHER,S,I)}throw new u.ApiError({message:S,code:String(g),httpStatus:o||String(n),logId:I,response:t,requestConfig:l})}if(200===n)return{...t,_meta:{logId:I}}},_=(e,t)=>{var r;let{headers:n,data:o}=null!==(r=e.response)&&void 0!==r?r:{},s=i(n);return 401===t&&(a.apiErrorEventEmitter.emit(a.APIErrorEvent.UNAUTHORIZED,null==o?void 0:o.msg,s),!0)}},382938:function(e,t,r){r.d(t,{isEnableDebug:function(){return s}});var n=r(165482),i=r(38848);let o=!1,a=!1,s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"FLOW_WEB_DEBUG_FG";return o||(a=!0===(0,n.parseJSON)(i.FlowLocalStorage.getItem(e),{}).enableDebug,o=!0),a}},274088:function(e,t,r){r.d(t,{getSlardar:function(){return s}});var n=r(436114),i=r(441259),o=r(903520);let a=()=>window[o.SlardarInlineInstanceName],s=()=>i.inBrowser?a():n.default},903520:function(e,t,r){var n,i;r.d(t,{HtmlRenderStage:function(){return a},RenderLogEvent:function(){return s},RootRenderStatusLogFunc:function(){return u},SlardarInlineInstanceName:function(){return o},extractPid:function(){return l}});let o="inlineSlardarInstance",a=((n={}).HtmlRenderStart="html_render_start",n.RootLayoutRender="root_layout_render",n),s=((i={}).HtmlRenderStart="html_render_start",i.RootLayoutRenderStart="root_layout_render_start",i.RootRenderStatusEvent="root_render_status_event",i),u="__RootRenderStatusLogFunc__",l=e=>{var t=e;try{t=new URL(e).pathname}catch(e){}t=t.replace(/^\/perf/,"");try{if(/^\/chat\/(?!settings|bot|main|new\b|collection|profile|thread|create-image|search|write|chat-with-doc|music|translate|read-web|deep-search|academic-search|edu-exercise|drive|create-video)\S+$/i.test(t)||/^\/chat\/(?:collection|new|profile|drive)\/.+$/.test(t)||/^\/bot\/.+$/.test(t)||/^\/thread\/.+$/.test(t)||/^\/drive\/s(\/.*)?$/.test(t)||/^\/share\/doc(\/.*)?$/.test(t)||/^\/doc\/(?!invite|public|review)[a-zA-Z0-9]+$/.test(t)||/^\/doc\/invite\/[a-zA-Z0-9]+$/.test(t)||/^\/doc\/public\/[a-zA-Z0-9]+$/.test(t)||/^\/doc\/review\/[a-zA-Z0-9]+$/.test(t))return t.replace(/\/[^/]*$/i,"/*");if(/^\/pdf\/.+$/.test(t))return"/pdf/*"}catch(e){}return t}},257029:function(e,t,r){let n;r.d(t,{checkAndGetTeaToken:function(){return c},configTeaCountry:function(){return N},configTeaUserId:function(){return O},getTeaParamFromSessionStorage:function(){return L},getTeaVar:function(){return I},getUidFromTeaConfig:function(){return R},getUuidAndWebIdFromTeaConfig:function(){return A},getUuidFromTeaConfig:function(){return f},onAbComplete:function(){return v},recordTeaUserId:function(){return p},resetTeaToken:function(){return w},setTeaParamToSessionStorage:function(){return h},updateTeaGuestUid:function(){return C}});var i=r(4137),o=r(436114),a=r(441259),s=r(855932),u=r(38848),l=r(178230),E=r(497299),_=r(286528);let d={tokens:{},meanKeys:["user_unique_id","web_id"]},c=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return(e||d.meanKeys.some(e=>!d.tokens[e]))&&a.inBrowser&&S(t),d.tokens},g=()=>(n||(n={fetching:!1,callbacks:[]}),n),S=e=>{let t=g(),r=(0,_.getTeaInstance)();if(e&&t.callbacks.push(e),!r||t.fetching)return;t.fetching=!0;let n=(0,s.schedule)(()=>{t.fetching=!1},5e3);r.getToken(e=>{n.exec(),t.callbacks.splice(0,t.callbacks.length).forEach(t=>{t(e.user_unique_id||e.web_id)}),d.tokens=e})},I=async(e,t,r)=>{let{isServerAb:n=!1}=r||{},o=(0,_.getPreRequestAbTestMethod)();if(n){if(!o)return l.logger.persist.error({eventName:"get_tea_var_request_ab_test_empty",error:Error("get_tea_var_request_ab_test_empty")}),t;try{var a,s,u,d,c;let t=await o();if(!t||0!==t.code)throw Error(JSON.stringify(t));if(e in((null==t?void 0:null===(s=t.data)||void 0===s?void 0:null===(a=s.ab_config)||void 0===a?void 0:a.ab_results)||{}))return null==t?void 0:null===(c=t.data)||void 0===c?void 0:null===(d=c.ab_config)||void 0===d?void 0:null===(u=d.ab_results)||void 0===u?void 0:u[e]}catch(e){return l.logger.console.error({error:e}),t}}return await function(e,t){let r=E.FlowTeaController.getOverridesByKey(e);if(!(0,i.default)(r))return r;let n=(0,_.getTeaInstance)();return n?new Promise((r,i)=>{try{null==n||n.getVar(e,t,e=>{r(e)})}catch(e){i(e)}}):(l.logger.console.error({error:Error("[getFeLibraVar] teaInstance \u672A\u521D\u59CB\u5316")}),t)}(e,t)},f=()=>String(c().user_unique_id),R=()=>c().user_id,A=()=>{let{web_id:e,user_unique_id:t}=c();return{webId:e,uuid:t}};function v(e){let t=(0,_.getTeaInstance)();return null==t||t.on("ab-complete",e),()=>null==t?void 0:t.off("ab-complete",e)}let N=e=>{var t,r;null===(r=(0,_.getTeaInstance)())||void 0===r||null===(t=r.config)||void 0===t||t.call(r,{evtParams:{inner_region:e}})},T=e=>null==e?void 0:e.getConfig("user_id"),O=(e,t,r)=>{var n,i;let a=e||(0,_.getTeaInstance)(),s=!r&&!!t;null===(n=a.getABconfig)||void 0===n||n.call(a,{user_id:t},o.default),null===(i=a.config)||void 0===i||i.call(a,{user_id:t,user_is_login:s,evtParams:{biz_user_id:t}}),p(t,r),a.event("login_status",{status:s?"logined":"unlogin"}),c(!0,(0,_.getTeaAutoExposureMethod)())};function p(e,t){e&&!t?u.FlowLocalStorage.setItem("flow_tea_user_id",e):u.FlowLocalStorage.removeItem("flow_tea_user_id")}let m=(e,t,r)=>"0"===e&&l.logger.persist.warning({message:"exceptional guest uid",meta:{reportStep:`${t}_uid`,logId:r}}),C=async()=>{let e=(0,_.getTeaInstance)(),t=T(e);if(t){m(t,"exist");return}null==e||e.stop();let r="init_ttwid";try{var n;let t=(0,_.getWebAnonIDMethod)();r="fetch_uid";let i=await (null==t?void 0:t());if(!(null==i?void 0:i.uid)||"0"===i.uid||String(i.web_id)===i.uid)throw Error("guest uid is empty");let o=i.uid;e&&!T(e)&&O(e,o,!0),m(o,"fetch",null===(n=i._meta)||void 0===n?void 0:n.logId),l.logger.persist.info({message:"guest uid fetched"})}catch(e){e instanceof Error&&l.logger.persist.error({message:"set guest uid error",error:e,meta:{reportStep:r}})}null==e||e.reStart(),null==e||e.clearEventCache()},w=()=>{let e=(0,_.getTeaInstance)();if(e)return new Promise(t=>{setTimeout(()=>{var r;null==e||null===(r=e.clearEventCache)||void 0===r||r.call(e),O(e,void 0),t()})})},h=(e,t,r)=>{if((0,u.isSSR)())return;let n=e||window.location.pathname,i=`tea_${t}`;u.FlowLocalStorage.setItem(i,JSON.stringify({page:n,value:r,time:3e4+Date.now()}))},L=e=>{if((0,u.isSSR)())return"";let t=window.location.pathname,r=`tea_${e}`,n=u.FlowLocalStorage.getItem(r);if(!n)return"";try{let{page:r,value:i,time:o}=JSON.parse(n);if(r===t&&Date.now()<=o)return i;return u.FlowLocalStorage.removeItem(e),""}catch(e){return""}}},39931:function(e,t,r){r.d(t,{imGatewayClient:function(){return a},initImGateway:function(){return o}});var n=r(905852);let i={getCommonParams:()=>({}),getCommonHeaders:()=>({}),httpClient:n.httpClient},o=e=>{i.getCommonParams=e.getCommonParams,i.getCommonHeaders=e.getCommonHeaders,i.httpClient=e.httpClient||n.httpClient,e.baseURL&&(i.baseURL=e.baseURL)},a=(e,t)=>{let{url:r,method:o,data:a,params:s,headers:u}=e;return(i.httpClient||n.httpClient)({url:i.baseURL?`${i.baseURL}${r}`:r,method:o,data:a,params:{...i.getCommonParams(),...s},headers:{...i.getCommonHeaders(),"Content-Type":"application/json; encoding=utf-8",...u}},t)}},297546:function(e,t,r){r.d(t,{initFlowApi:function(){return B}});var n,i=r(356749),o=r(19199),a=r(527),s=r(102249),u=r(992847),l=r(198660),E=r(690619);let _=!1;var d=r(39931),c=r(495635),g=r(905852),S=r(467851),I=r(996080),f=r(469828),R=r(975847),A=r(832611),v=r(509462),N=r(154299),T=r(302430);function O(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=((n=p||{}).LOGIN="1",n.NOT_LOGIN="0",n);let m=()=>T.ttWidManager.waitUtilTTWidConfigReady(),C={_deviceId:null,get deviceId(){if(this._deviceId)return this._deviceId;let e=m();return this._deviceId=e,e}},w=(e,t)=>{let r=null==e?void 0:e.data;if(!r)return!1;let{extra:n,config:i}=r,o=null==n?void 0:n.is_login,a=null==i?void 0:i.web_id;return t&&o===p.NOT_LOGIN||o===p.LOGIN&&a};class h extends f.default{async LaunchRequireLogin(e,t){try{let t=await window[I.PromiseName.Launch];if(t&&w(t,null==e?void 0:e.fetchGuestDataOnly))return t;throw Error("html launch no data or not login / no web_id")}catch(r){if(r.message.includes("ttwid"))throw r.name="ttwidError",r;{let r=await super.Launch(e,t);if(r&&w(r,null==e?void 0:e.fetchGuestDataOnly))return r;throw Error("html launch no data or not login / no web_id")}}}constructor(e){super(e),O(this,"_waitSignal",void 0),this._waitSignal=C}}class L extends R.default{async GetSettingWithPrefetch(e,t){let r=(e,t)=>{var r,n;return t?(0,S.default)(null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.is_login):!!(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.is_login)};try{let t=await window[I.PromiseName.GuestLayoutMode];if(!t||!r(t,null==e?void 0:e.fetchGuestDataOnly))throw Error("html launch no data or not login / no web_id");return t}catch(n){if(n.message.includes("ttwid"))throw n.name="ttwidError",n;{await this._waitSignal.deviceId;let n=await super.GetSetting(e,t);if(!n||!r(n,null==e?void 0:e.fetchGuestDataOnly))throw Error("html launch no data or not login / no web_id");return n}}}constructor(e){super(e),O(this,"_waitSignal",void 0),this._waitSignal=C}}class b extends A.default{async MessageList(e,t){return await this._waitSignal.deviceId,super.MessageList(e,t)}async MessageReport(e,t){return await this._waitSignal.deviceId,super.MessageReport(e,t)}async MessageReplay(e,t){return await this._waitSignal.deviceId,super.MessageReplay(e,t)}async MessageStream(e,t){return await this._waitSignal.deviceId,super.MessageStream(e,t)}async GetMsgContent(e,t){return await this._waitSignal.deviceId,super.GetMsgContent(e,t)}async LatestMessageList(e,t){return await this._waitSignal.deviceId,super.LatestMessageList(e,t)}constructor(e){super(e),O(this,"_waitSignal",void 0),this._waitSignal=C}}class D extends v.default{async ConversationClear(e,t){return await this._waitSignal.deviceId,super.ConversationClear(e,t)}async ConversationInfo(e,t){return await this._waitSignal.deviceId,super.ConversationInfo(e,t)}async ConversationList(e,t){return await this._waitSignal.deviceId,super.ConversationList(e,t)}async CreateSection(e,t){return await this._waitSignal.deviceId,super.CreateSection(e,t)}async ConversationInfoAddBot(e,t){return await this._waitSignal.deviceId,super.ConversationInfoAddBot(e,t)}constructor(e){super(e),O(this,"_waitSignal",void 0),this._waitSignal=C}}class P extends N.default{async EnrichBot(e,t){return await this._waitSignal.deviceId,super.EnrichBot(e,t)}async GenBotIcon(e,t){return await this._waitSignal.deviceId,super.GenBotIcon(e,t)}constructor(e){super(e),O(this,"_waitSignal",void 0),this._waitSignal=C}}let U="undefined"==typeof window?()=>"https://www.doubao.com":()=>{},y=()=>(0,o.getCommonParams)(null===i.getEvaluateParams||void 0===i.getEvaluateParams?void 0:(0,i.getEvaluateParams)(!1)),x=[e=>{if("undefined"==typeof window)return e;let{config:t,headers:r}=e,n=(0,l.getIsLoggedIn)(),i=r["x-tt-flow-login"]||r["x-tt-agw-login"],o=(null==t?void 0:t.url)||"",a=o.startsWith("/alice/")||o.startsWith("/samantha/");if("0"===i&&a&&n){if(_)return e;(0,s.getFGLoadedValue)("response_header_user_logout",{source:u.FGBuiltinNames.tea,defaultValue:!1}).then(e=>{if(e){_=!0;try{(0,E.getFlowAccount)().passportApi.logout({reason:"response_header_user_logout",trackMeta:{from:"response_header",trigger_url:o,logout_resp_header_logid:r["x-tt-logid"]}})}finally{_=!1}}})}return e}],B=()=>{(0,c.initFlowApiOptions)({isDebugging:!1,baseURL:U(),httpClient:g.httpClient,getCommonParams:y,getCommonHeaders:a.getCommonHeaders,classMap:{setting:h,message:b,samantha:L,conversation:D,bot:P},responseInterceptors:x}),(0,d.initImGateway)({baseURL:U(),getCommonParams:y,getCommonHeaders:a.getCommonHeaders})}},527:function(e,t,r){r.d(t,{getCommonHeaders:function(){return s}});var n=r(382938),i=r(102249),o=r(7625),a=r(992847);let s=()=>{let e={"Agw-Js-Conv":"str"};if((0,n.isEnableDebug)()){let t=(0,i.getFGValue)(o.FGLocalDebugKeys.xTtEnv,{source:a.FGBuiltinNames.debugStorage});t&&(e["x-tt-env"]=String(t),e["x-use-ppe"]="1");let r=(0,i.getFGValue)("x-testing-feature",{source:a.FGBuiltinNames.debugStorage})||"";r&&"__current_version__"!==r&&(e["x-testing-feature"]=r)}return e}},53788:function(e,t,r){r.d(t,{getWebTabId:function(){return i}});let n=(0,r(611833).default)(),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http";return"http"===e?{web_tab_id:n}:"websocket"===e?{conn_tag:n}:{web_tab_id:n}}},19199:function(e,t,r){r.d(t,{getCommonParams:function(){return f}});var n=r(510534),i=r(999634),o=r(257029),a=r(896855),s=r(223746);let u=e=>({pc_version:(0,s.getWebVersion)()});var l=r(53788),E=r(414196),_=r(38848),d=r(878013);let c=()=>{let e=(0,d.getCommonParamsStore)();return e.language?e.language:"undefined"==typeof window?"":document.cookie?E.parse(document.cookie||"").i18next:_.FlowLocalStorage.getItem("i18nextLng")};var g=r(302430);let S=()=>{let{ttWidConfig:e}=g.ttWidManager;return e.web_id&&"0"!==e.web_id?e.web_id:""};var I=r(293525);let f=e=>{let{webId:t,uuid:r}=(0,o.getUuidAndWebIdFromTeaConfig)(),s=(0,I.getRegion)();return{version_code:a.VERSION_CODE,language:c(),device_platform:a.DEVICE_PLATFORM,aid:(0,n.getAid)(),real_aid:(0,n.getAid)(!0),pkg_type:i.pkgType,device_id:S(),web_id:t,tea_uuid:r,"use-olympus-account":1,region:s,sys_region:s,samantha_web:1,...u(t),...(0,l.getWebTabId)(),...e}}},999634:function(e,t,r){r.d(t,{pkgType:function(){return n}});let n="release_version"},356749:function(e,t,r){r.d(t,{getEvaluateParams:function(){return n}}),r(441259).inBrowser;let n=e=>({})},498306:function(e,t,r){r.d(t,{initI18n:function(){return o}});var n=r(820172),i=r(297076);let o=()=>{(0,n.initI18n)(i.default)}}}]);
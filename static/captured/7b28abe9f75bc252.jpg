"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["37549"],{227575:function(e,t,n){n.d(t,{default:function(){return a}}),n(713738);var s=n(430261),r=n(345660),a=(0,s.IconFactory)((0,r.jsx)(e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 28 28",...e,children:(0,r.jsx)("path",{d:"M14.007 28q-2.881 0-5.418-1.11a14.3 14.3 0 0 1-4.453-3.026 14.5 14.5 0 0 1-3.04-4.453Q0 16.875 0 13.993q0-2.868 1.095-5.404Q2.191 6.053 4.121 4.12A14.5 14.5 0 0 1 8.59 1.095Q11.124 0 13.993 0t5.404 1.095q2.536 1.096 4.467 3.026A14.2 14.2 0 0 1 26.89 8.59Q28 11.124 28 13.993q0 2.881-1.095 5.418a14.3 14.3 0 0 1-3.027 4.453 14.2 14.2 0 0 1-4.467 3.026Q16.876 28 14.007 28m.015-6.917q.518 0 .835-.317.332-.332.332-.836v-6.816l-.13-2.969 1.37 1.672 1.599 1.643q.316.33.807.331.475 0 .792-.303a.99.99 0 0 0 .332-.763q0-.475-.332-.807L14.944 7.22q-.433-.447-.922-.447-.476 0-.908.447L8.43 11.918q-.317.317-.317.807 0 .461.317.763.318.303.778.303.49 0 .807-.331l1.629-1.658 1.326-1.642-.116 2.954v6.816q0 .504.332.836.331.317.836.317"})}),{}))},354168:function(e,t,n){n.d(t,{AutolinkText:function(){return m}});var s=n(713738),r=n(812650),a=n.n(r),i=n(687765),l=n(255804),o=n(352490);let u=e=>e.match(/https?:\/\//)?e:`https://${e}`;var c={container:"container-ZzKwSY","harmony-link":"harmony-link-zLQlZj"},d=n(345660);let m=e=>{let{className:t,style:n,linkClassName:r,text:m="",linkDisabled:f,...v}=e,g=(0,s.useMemo)(()=>(0,o.getHyperLinkNodes)(m),[m]);return(0,d.jsx)("div",{...v,className:a()(c.container,t),style:n,children:g.map((e,t)=>e.type===o.HyperNodeType.text?(0,d.jsx)(s.Fragment,{children:e.text},t):e.type===o.HyperNodeType.link?f?(0,d.jsx)("a",{className:c["harmony-link"],href:"javascript:void(0);",onClick:e=>e.preventDefault(),children:e.url},t):(0,d.jsx)(i.Link,{className:r,href:l.ExternalLink.transformExternalLink(u(e.url)),children:e.url},t):void 0)})}},667018:function(e,t,n){n.d(t,{BubbleTextContent:function(){return o},BorderlessTextContent:function(){return u}}),n(713738);var s=n(812650),r=n.n(s),a=n(354168),i={link:"link-D9Wif2"},l=n(345660);let o=e=>{let{text:t,className:n,linkDisabled:s,style:o}=e;return t?(0,l.jsx)(a.AutolinkText,{style:o,className:r()("bg-s-color-bg-trans rounded-s-radius-s text-s-color-text-secondary s-font-base sm:text-15 max-w-450 px-16 py-9 w-fit min-w-0",n),linkClassName:r()(i.link),"data-testid":"message_text_content",text:t,linkDisabled:s}):null},u=e=>{let{text:t,className:n,linkDisabled:s,afterNode:o}=e;return t?(0,l.jsxs)("div",{className:n,children:[(0,l.jsx)(a.AutolinkText,{className:r()("text-s-color-text-secondary s-font-base w-fit sm:text-15"),linkClassName:r()(i.link),"data-testid":"message_text_content",text:t,linkDisabled:s}),o]}):null}},853198:function(e,t,n){n.r(t),n.d(t,{TextSendMessageBoxPlugin:function(){return B},EditableSendMessageBoxContent:function(){return P}});var s=n(812650),r=n.n(s),a=n(667018),i=n(47405),l=n(870539),o=n(713738),u=n(746167),c=n(666196),d=n(725705),m=n(970377),f=n(847857),v=n(777422),g=n(856392),x=n(430261),p=n(345660),h=(0,x.IconFactory)((0,p.jsx)(e=>(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...e,children:(0,p.jsx)("path",{fill:"currentColor",d:"M4.96 15.339a.65.65 0 0 1-.188-.326.8.8 0 0 1 0-.378.7.7 0 0 1 .189-.319l3.997-4.01-3.997-4.004a.64.64 0 0 1-.183-.319.8.8 0 0 1 0-.378.7.7 0 0 1 .183-.325.7.7 0 0 1 .332-.189.8.8 0 0 1 .377 0q.19.045.326.182L10 9.277l3.997-4.004a.6.6 0 0 1 .326-.182q.189-.045.37 0 .19.045.34.189.136.137.181.325a.7.7 0 0 1 0 .378.7.7 0 0 1-.182.326l-3.997 3.997 3.997 4.004a.7.7 0 0 1 .182.332q.045.182 0 .371a.7.7 0 0 1-.182.325.7.7 0 0 1-.332.19.8.8 0 0 1-.377 0 .7.7 0 0 1-.326-.183L10 11.341l-4.004 4.004a.7.7 0 0 1-.326.182.8.8 0 0 1-.377 0 .7.7 0 0 1-.332-.188"})}),{})),b=n(227575),_=n(441259),y=n(424785),C=n(128283),k=n(436114);let j=e=>{let{onSubmit:t,defaultValue:n="",allowEmpty:s=!1,clearInputOnSubmit:r=!0,attachmentCanNotSend:a=!1,onChange:i=k.default,onEmptyAt:l}=e,u=(0,o.useRef)(null),[c,d]=(0,o.useState)(n),[m,f]=(0,o.useState)(null);(0,o.useLayoutEffect)(()=>{if(null!==m){if(u.current){let e=m+1;u.current.selectionStart=e,u.current.selectionEnd=e}f(null)}},[u.current,m,c]);let v=(0,o.useCallback)(()=>{d("")},[]),g=(0,o.useCallback)(()=>{if((s||c.trim())&&!a){if("dependOnSubmit"===r){(async()=>{await (null==t?void 0:t(c))&&d("")})();return}null==t||t(c),r&&d("")}},[t,c,s,r]),x=(0,o.useCallback)(e=>{if(13===e.keyCode&&!e.shiftKey&&!e.altKey){(0,_.getIsMobileOrIPad)()||e.preventDefault(),g();return}},[c,f,g]);return{textAreaRef:u,textAreaProps:{value:c,onChange:e=>{"@"===e||"/"===e?null==l||l(!0,e):null==l||l(!1),i(e),d(e)},onKeyDown:x},submit:g,clear:v}};var w={wrapper:"wrapper-zCoFWE","close-btn":"close-btn-PFEW2l",closeBtn:"close-btn-PFEW2l",input:"input-SDzBKL","send-btn":"send-btn-cRC_eq",sendBtn:"send-btn-cRC_eq","ok-icon":"ok-icon-rUHH6s",okIcon:"ok-icon-rUHH6s","btn-group":"btn-group-QNdGuk",btnGroup:"btn-group-QNdGuk","fade-entered":"fade-entered-VoPw84",fadeEntered:"fade-entered-VoPw84",fadein:"fadein-hCpibC"};let E=e=>{let{onCancel:t,onSubmit:n,defaultValue:s,disabled:a,state:i}=e,{textAreaRef:l,textAreaProps:u,submit:c}=j({onSubmit:n,defaultValue:s,allowEmpty:!0});return(0,o.useEffect)(()=>{if(!(0,_.getIsMobileOrIPad)()){var e;null===(e=l.current)||void 0===e||e.focus(),setTimeout(function(){if(l.current){let{length:e}=u.value;l.current.selectionStart=e,l.current.selectionEnd=e}},0)}},[]),(0,p.jsxs)("div",{className:r()(w.wrapper,w[`fade-${i}`]),"data-testid":"editing_message_content",children:[(0,p.jsx)("div",{className:w["close-btn"],onClick:t,"data-testid":"editing_message_content_cancel",children:(0,p.jsx)(h,{})}),(0,p.jsx)(C.TextAreaI18n,{ref:l,...u,className:w.input,rows:1,autosize:!0,"data-testid":"editing_message_content_input"}),(0,p.jsx)(y.default,{disabled:a,theme:"solid",onClick:()=>c(),className:w["send-btn"],icon:(0,p.jsx)(b.default,{color:"white"}),"data-testid":"editing_message_content_confirm"})]})};function S(e){let{message:t,onExit:n}=e,{isDisabled:s}=(0,m.useConversationDisabled)(),r=(0,o.useRef)((0,g.createReportEvent)({eventName:"edit_message",meta:{conversation_id:t.conversation_id,message_id:null==t?void 0:t.message_id}})),{sendMessage:a}=(0,c.useChatService)("chatMessageService"),i=(0,f.getTextFromTextMessage)(t)||"",x=e=>{if(!t)return;let s=""===e.trim();(0,v.trackEvent)("edit_message_confirm",{message_id:t.message_id,edit_method:"click"}),r.current.addDurationPoint("confirm");try{var i;let n=null==t?void 0:null===(i=t.ext)||void 0===i?void 0:i.input_skill;a([{text:e,operation:{[s?"remove":"replace"]:{messageLink:{messageId:(null==t?void 0:t.message_id)||"",isLocalMessage:(0,d.isLocalMessage)(t)}}},reportParams:{scene:u.ChatTeaScene.SCENE_EDIT},extraExt:n?{input_skill:n}:void 0}]),r.current.success()}catch(e){r.current.error({reason:"edit message failed, unexpected error",error:e})}n()},h=()=>{(0,v.trackEvent)("edit_message_cancel",{message_id:null==t?void 0:t.message_id,edit_method:"click"}),r.current.addDurationPoint("cancel"),r.current.success(),n()};return(0,p.jsx)(l.default,{mountOnEnter:!0,unmountOnExit:!0,timeout:200,in:!0,children:e=>(0,p.jsx)(E,{state:e,disabled:s,onCancel:h,onSubmit:x,defaultValue:i})})}var N=n(915299),T=n(904303);function L(e,t,n){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let P=e=>{let{message:t,onExit:n}=e;return(0,p.jsx)(S,{message:t,onExit:n})},D=e=>{var t,n;let{message:s,theme:l="samantha"}=e;return(0,p.jsx)(a.BubbleTextContent,{className:r()(null===(t=i.messageShareThemeCss[l])||void 0===t?void 0:t.sendClassNames),style:i.messageShareThemeCss[l].cssVar,text:(0,f.getMessageText)(s,!1,(null==s?void 0:null===(n=s.ext)||void 0===n?void 0:n.default_display_content)||(0,N.getUnreactiveTranslate)("chat_unsupported_message_type"))})};class B{constructor(){L(this,"pluginIdentifier",T.textSendMessageBoxPluginIdentifier),L(this,"EditableContent",P),L(this,"Content",D)}}},729944:function(e,t,n){n.r(t),n.d(t,{ShareTextSendMessageBoxPlugin:function(){return v}});var s=n(812650),r=n.n(s),a=n(667018),i=n(47405),l=n(847857),o=n(915299),u=n(853198),c=n(904303),d=n(345660);function m(e,t,n){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let f=e=>{var t,n;let{message:s,theme:u="samantha"}=e;return(0,d.jsx)(a.BubbleTextContent,{className:r()(null===(t=i.messageShareThemeCss[u])||void 0===t?void 0:t.sendClassNames),style:i.messageShareThemeCss[u].cssVar,text:(0,l.getMessageText)(s,!1,(null==s?void 0:null===(n=s.ext)||void 0===n?void 0:n.default_display_content)||(0,o.getUnreactiveTranslate)("chat_unsupported_message_type"))})};class v{constructor(){m(this,"pluginIdentifier",c.textSendMessageBoxPluginIdentifier),m(this,"EditableContent",u.EditableSendMessageBoxContent),m(this,"Content",f)}}}}]);
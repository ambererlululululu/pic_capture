/*! For license information please see async-after-interactive.20c1291e.js.LICENSE.txt */
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["87048"],{470254:function(e,t,n){"use strict";n.d(t,{KT:function(){return s},UX:function(){return o},j2:function(){return a}});var r=n(244277),i=n(771982);let o={PREFIX:`${i.T}-dropdown`,SELECTED:`${i.T}-dropdown-item-selected`,DISABLED:`${i.T}-dropdown-item-disabled`},a={POSITION_SET:r.j2.POSITION_SET,TRIGGER_SET:["hover","focus","click","custom","contextMenu"],DEFAULT_LEAVE_DELAY:100,ITEM_TYPE:["primary","secondary","tertiary","warning","danger"]},s={SPACING:4,NESTED_SPACING:2}},311590:function(e,t,n){"use strict";n.d(t,{UX:function(){return i},j2:function(){return o}});var r=n(771982);let i={TABS:`${r.T}-tabs`,TABS_BAR:`${r.T}-tabs-bar`,TABS_BAR_LINE:`${r.T}-tabs-bar-line`,TABS_BAR_CARD:`${r.T}-tabs-bar-card`,TABS_BAR_BUTTON:`${r.T}-tabs-bar-button`,TABS_BAR_EXTRA:`${r.T}-tabs-bar-extra`,TABS_TAB:`${r.T}-tabs-tab`,TABS_TAB_ACTIVE:`${r.T}-tabs-tab-active`,TABS_TAB_DISABLED:`${r.T}-tabs-tab-disabled`,TABS_CONTENT:`${r.T}-tabs-content`,TABS_CONTENT_ANIMATED:`${r.T}-tabs-content-animated`,TABS_CONTENT_NO_ANIMATED:`${r.T}-tabs-content-no-animated`,TABS_PANE:`${r.T}-tabs-pane`,TABS_PANE_INACTIVE:`${r.T}-tabs-pane-inactive`,TABS_PANE_ACTIVE:`${r.T}-tabs-pane-active`,TABS_PANE_MOTION_OVERLAY:`${r.T}-tabs-pane-motion-overlay`,TABS_PANE_ANIMATING:`${r.T}-tabs-pane-animating`,TABS_PANE_ANIMATE_LEFT_SHOW:`${r.T}-tabs-pane-animate-leftShow`,TABS_PANE_ANIMATE_RIGHT_SHOW:`${r.T}-tabs-pane-animate-rightShow`,TABS_PANE_ANIMATE_TOP_SHOW:`${r.T}-tabs-pane-animate-topShow`,TABS_PANE_ANIMATE_BOTTOM_SHOW:`${r.T}-tabs-pane-animate-bottomShow`},o={TYPE_MAP:["line","card","button"],SIZE:["small","medium","large"],POSITION_MAP:["top","left"]}},660893:function(e,t,n){"use strict";let r=n(429996).createContext({level:0});t.Z=r},786071:function(e,t,n){"use strict";var r=n(429996),i=n(669160),o=n.n(i),a=n(295011),s=n.n(a);let l=n(470254).UX.PREFIX,c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{style:t,className:n}=e;return r.createElement("div",{className:o()(`${l}-divider`,n),style:t})};c.propTypes={style:s().object,className:s().string},t.Z=c},683955:function(e,t,n){"use strict";var r=n(814986),i=n(429996),o=n(669160),a=n.n(o),s=n(295011),l=n.n(s),c=n(470254),u=n(660893),d=n(70059),p=n(842625);let v=c.UX.PREFIX;class f extends d.Z{render(){let{children:e,disabled:t,className:n,forwardRef:r,style:o,type:s,active:l,icon:c,onKeyDown:u,showTick:d,hover:f}=this.props,{showTick:m}=this.context,h=null!=m?m:d,_=a()(n,{[`${v}-item`]:!0,[`${v}-item-disabled`]:t,[`${v}-item-hover`]:f,[`${v}-item-withTick`]:h,[`${v}-item-${s}`]:s,[`${v}-item-active`]:l}),g={};t||["onClick","onMouseEnter","onMouseLeave","onContextMenu"].forEach(e=>{1!==this.context.level&&"onClick"===e?g.onMouseDown=t=>{var n,r;0===t.button&&(null===(r=(n=this.props)[e])||void 0===r||r.call(n,t))}:g[e]=this.props[e]});let y=null;switch(!0){case h&&l:y=i.createElement(p.Z,null);break;case h&&!l:y=i.createElement(p.Z,{style:{color:"transparent"}});break;default:y=null}let b=null;return c&&(b=i.createElement("div",{className:`${v}-item-icon`},c)),i.createElement("li",Object.assign({role:"menuitem",tabIndex:-1,"aria-disabled":t},g,{onKeyDown:u,ref:e=>r(e),className:_,style:o},this.getDataAttr(this.props)),y,b,e)}}f.propTypes={children:l().oneOfType([l().string,l().node]),name:l().string,disabled:l().bool,selected:l().bool,onClick:l().func,onMouseEnter:l().func,onMouseLeave:l().func,onContextMenu:l().func,className:l().string,style:l().object,forwardRef:l().func,type:l().oneOf(c.j2.ITEM_TYPE),active:l().bool,icon:l().node},f.contextType=u.Z,f.defaultProps={disabled:!1,divided:!1,selected:!1,onMouseEnter:r.Z,onMouseLeave:r.Z,forwardRef:r.Z},f.elementType="Dropdown.Item",t.Z=f},169363:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(429996),i=n(295011),o=n.n(i),a=n(669160),s=n.n(a),l=n(470254),c=n(926778),u=n(858890);class d extends c.Z{constructor(){super(...arguments),this.menuItemNodes=null,this.firstChars=[]}handleEscape(e){"custom"===this._adapter.getContext("trigger")&&(e&&(0,u.zT)(document.querySelectorAll("[data-popupid]"),e.id)).focus()}setFocusByFirstCharacter(e,t){let n=(0,u.Ir)(this.menuItemNodes,e,this.firstChars,t);n>=0&&(0,u.OA)(this.menuItemNodes,this.menuItemNodes[n])}onMenuKeydown(e){let t=(0,u.Yt)(e.target,"tooltip");this.menuItemNodes||(this.menuItemNodes=[...e.target.parentNode.getElementsByTagName("li")].filter(e=>"true"!==e.ariaDisabled)),0===this.firstChars.length&&this.menuItemNodes.forEach(e=>{var t;this.firstChars.push(null===(t=e.textContent.trim()[0])||void 0===t?void 0:t.toLowerCase())});let n=this.menuItemNodes.find(e=>0===e.tabIndex);switch(e.key){case" ":case"Enter":e.target.click();break;case"Escape":this.handleEscape(t);break;case"ArrowUp":(0,u.kx)(this.menuItemNodes,n),(0,u.Jt)(e);break;case"ArrowDown":(0,u.XS)(this.menuItemNodes,n),(0,u.Jt)(e);break;default:(0,u.kz)(e.key)&&this.setFocusByFirstCharacter(n,e.key)}}}var p=n(660893),v=n(70059),f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let m=l.UX.PREFIX;class h extends v.Z{constructor(e){super(e),this.foundation=new d(this.adapter)}get adapter(){return Object.assign({},super.adapter)}render(){let e=this.props,{children:t,className:n,style:i}=e,o=f(e,["children","className","style"]);return r.createElement("ul",Object.assign({role:"menu","aria-orientation":"vertical"},o,{className:s()(`${m}-menu`,n),style:i,onKeyDown:e=>this.foundation.onMenuKeydown(e)}),t)}}h.propTypes={children:o().node,className:o().string,style:o().object},h.contextType=p.Z;var _=h},781610:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var r=n(118200),i=n(814986),o=n(429996),a=n(669160),s=n.n(a),l=n(295011),c=n.n(l),u=n(470254),d=n(70059),p=n(387834),v=n(244277),f=n(926778),m=n(858890);class h extends f.Z{handleVisibleChange(e){this._adapter.setPopVisible(e),this._adapter.notifyVisibleChange(e);let{trigger:t}=this.getProps();if(e&&"click"===t){let e=this._adapter.getPopupId();this.setFocusToFirstMenuItem(e)}}getMenuItemNodes(e){let t=document.getElementById(e);return t?Array.from(t.getElementsByTagName("li")).filter(e=>"false"===e.ariaDisabled):null}setFocusToFirstMenuItem(e){let t=this.getMenuItemNodes(e);t&&(0,m.Br)(t)}setFocusToLastMenuItem(e){let t=this.getMenuItemNodes(e);t&&(0,m.pG)(t)}handleKeyDown(e){var t,n;let r=null===(n=null===(t=e.target)||void 0===t?void 0:t.attributes["data-popupid"])||void 0===n?void 0:n.value,{visible:i}=this._adapter.getStates();switch(e.key){case" ":case"Enter":e.target.click();break;case"ArrowDown":this.setFocusToFirstMenuItem(r),i&&(0,m.Jt)(e);break;case"ArrowUp":this.setFocusToLastMenuItem(r),i&&(0,m.Jt)(e)}}}var _=n(169363),g=n(683955),y=n(786071),b=n(660893);let S=u.UX.PREFIX;class k extends o.PureComponent{render(){let{className:e,style:t,children:n}=this.props,{showTick:r}=this.context,i=s()({[`${S}-title`]:!0,[`${S}-title-withTick`]:r},e);return o.createElement("div",{className:i,style:t},n)}}k.propTypes={children:c().node,className:c().string,style:c().object},k.contextType=b.Z;var w=n(156287),T=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let E=u.j2.POSITION_SET,R=u.j2.TRIGGER_SET;class C extends d.Z{constructor(e){super(e),this.handleVisibleChange=e=>this.foundation.handleVisibleChange(e),this.state={popVisible:e.visible},this.foundation=new h(this.adapter),this.tooltipRef=o.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setPopVisible:e=>this.setState({popVisible:e}),notifyVisibleChange:e=>this.props.onVisibleChange(e),getPopupId:()=>this.tooltipRef.current.getPopupId()})}renderContent(){let{render:e,menu:t,contentClassName:n,style:r,showTick:i,prefixCls:a,trigger:l}=this.props,c=s()(a,n),{level:u=0}=this.context,d=null;return o.isValidElement(e)?d=e:Array.isArray(t)&&(d=this.renderMenu()),o.createElement(b.Z.Provider,{value:{showTick:i,level:u+1,trigger:l}},o.createElement("div",{className:c,style:r},o.createElement("div",{className:`${a}-content`,"x-semi-prop":"render"},d)))}renderMenu(){let{menu:e}=this.props,t=e.map((e,t)=>{switch(e.node){case"title":{let{name:n,node:r}=e,i=T(e,["name","node"]);return o.createElement(C.Title,Object.assign({},i,{key:r+n+t}),n)}case"item":{let{node:n,name:r}=e,i=T(e,["node","name"]);return o.createElement(C.Item,Object.assign({},i,{key:n+r+t}),r)}case"divider":return o.createElement(C.Divider,{key:e.node+t});default:return null}});return o.createElement(C.Menu,null,t)}renderPopCard(){let{render:e,contentClassName:t,style:n,showTick:r,prefixCls:i}=this.props,a=s()(i,t),{level:l=0}=this.context;return o.createElement(b.Z.Provider,{value:{showTick:r,level:l+1}},o.createElement("div",{className:a,style:n},o.createElement("div",{className:`${i}-content`},e)))}render(){let e=this.props,{children:t,position:n,trigger:i,onVisibleChange:a,zIndex:l,className:c,motion:d,margin:v,style:f,prefixCls:m}=e,h=T(e,["children","position","trigger","onVisibleChange","zIndex","className","motion","margin","style","prefixCls"]),{spacing:_}=this.props,{level:g}=this.context,{popVisible:y}=this.state,b=this.renderContent();return g>0?_="number"==typeof _?_:u.KT.NESTED_SPACING:null==_&&(_=u.KT.SPACING),o.createElement(p.Z,Object.assign({zIndex:l,motion:d,margin:v,content:b,className:c,prefixCls:m,spacing:_,position:n,trigger:i,onVisibleChange:this.handleVisibleChange,showArrow:!1,returnFocusOnClose:!0,ref:this.tooltipRef},h),o.isValidElement(t)?o.cloneElement(t,{className:s()((0,r.Z)(t,"props.className"),{[`${m}-showing`]:y}),"aria-haspopup":!0,"aria-expanded":y,onKeyDown:e=>{this.foundation.handleKeyDown(e);let n=(0,r.Z)(t,"props.onKeyDown");n&&n(e)}}):t)}}C.Menu=_.Z,C.Item=g.Z,C.Divider=y.Z,C.Title=k,C.contextType=b.Z,C.propTypes={children:c().node,contentClassName:c().oneOfType([c().string,c().array]),className:c().string,getPopupContainer:c().func,margin:c().oneOfType([c().number,c().object]),mouseEnterDelay:c().number,mouseLeaveDelay:c().number,menu:c().array,motion:c().oneOfType([c().bool,c().func,c().object]),onVisibleChange:c().func,prefixCls:c().string,position:c().oneOf(E),rePosKey:c().oneOfType([c().string,c().number]),render:c().node,spacing:c().oneOfType([c().number,c().object]),showTick:c().bool,style:c().object,trigger:c().oneOf(R),visible:c().bool,zIndex:c().number},C.__SemiComponentName__="Dropdown",C.defaultProps=(0,w.GW)(C.__SemiComponentName__,{onVisibleChange:i.Z,prefixCls:u.UX.PREFIX,zIndex:v.KT.DEFAULT_Z_INDEX,motion:!0,trigger:"hover",position:"bottom",mouseLeaveDelay:u.j2.DEFAULT_LEAVE_DELAY,showTick:!1,closeOnEsc:!0,onEscKeyDown:i.Z});var I=C},736257:function(e,t,n){"use strict";var r=n(429996),i=n(295011),o=n.n(i),a=n(669160),s=n.n(a),l=n(311590),c=n(739185),u=n(494146),d=n(345185),p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class v extends r.PureComponent{constructor(){super(...arguments),this.ref=(0,r.createRef)(),this.getDirection=(e,t,n,r)=>{if(null!==t&&null!==e&&Array.isArray(n)&&n.length){let i=n.findIndex(t=>t.itemKey===e),o=n.findIndex(e=>e.itemKey===t),a=n.findIndex(e=>e.itemKey===r);return i===o?a>i:o<i}return!1},this.shouldRender=()=>{let{itemKey:e}=this.props,{activeKey:t,lazyRender:n}=this.context;return this._active=this._active||t===e,!n||this._active}}render(){let{tabPaneMotion:e,tabPosition:t,prevActiveKey:n}=this.context,i=this.props,{className:o,style:a,children:u,itemKey:v,tabIndex:f}=i,m=p(i,["className","style","children","itemKey","tabIndex"]),h=this.context.activeKey===v,_=s()(o,{[l.UX.TABS_PANE_INACTIVE]:!h,[l.UX.TABS_PANE_ACTIVE]:h,[l.UX.TABS_PANE]:!0}),g=this.shouldRender(),y=(()=>{let e=this.getDirection(this.context.activeKey,v,this.context.panes,n);return"top"===t?e?l.UX.TABS_PANE_ANIMATE_RIGHT_SHOW:l.UX.TABS_PANE_ANIMATE_LEFT_SHOW:e?l.UX.TABS_PANE_ANIMATE_BOTTOM_SHOW:l.UX.TABS_PANE_ANIMATE_TOP_SHOW})(),b=!this.context.panes.find(e=>e.itemKey===n),S=e&&h&&!b&&!this.context.forceDisableMotion;return r.createElement("div",Object.assign({ref:this.ref,role:"tabpanel",id:`semiTabPanel${v}`,"aria-labelledby":`semiTab${v}`,className:_,style:a,"aria-hidden":h?"false":"true",tabIndex:f||0},(0,c.Z)(m),{"x-semi-prop":"children"}),r.createElement(d.Z,{motion:S,animationState:h?"enter":"leave",startClassName:y},e=>{let{animationClassName:t,animationEventsNeedBind:n}=e;return r.createElement("div",Object.assign({className:s()(l.UX.TABS_PANE_MOTION_OVERLAY,t),"x-semi-prop":"children"},n),g?u:null)}))}}v.isTabPane=!0,v.contextType=u.Z,v.propTypes={className:o().string,style:o().object,children:o().node,disabled:o().bool,itemKey:o().string,tab:o().node,icon:o().node,closable:o().bool},t.Z=v},845869:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var r=n(861431),i=n(474227),o=n(429996),a=n(669160),s=n.n(a),l=n(295011),c=n.n(l),u=n(311590),d=n(112230),p=n(814986),v=n(118200),f=n(926778);class m extends f.Z{constructor(e){super(Object.assign({},e)),this.destroy=p.Z,this.handlePrevent=e=>{e.stopPropagation(),e.preventDefault()},this.handleKeyDown=(e,t,n)=>{let{preventScroll:r}=this.getProps(),i=[...e.target.parentNode.childNodes].filter(e=>(0,v.Z)(e,"attributes.data-tabkey.value","").includes("semiTab")&&"true"!==(0,v.Z)(e,"attributes.aria-disabled.value",""));switch(e.key){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":this.determineOrientation(e,i);break;case"Backspace":case"Delete":this.handleDeleteKeyDown(e,i,t,n);break;case"Enter":case" ":this.handleTabClick(t,e),this.handlePrevent(e);break;case"Home":i[0].focus({preventScroll:r}),this.handlePrevent(e);break;case"End":i[i.length-1].focus({preventScroll:r}),this.handlePrevent(e)}}}init(){this._adapter.collectPane()}_notifyChange(e){let{activeKey:t}=this.getStates();t!==e&&this._adapter.notifyChange(e)}handleTabClick(e,t){this._isInProps("activeKey")?this._notifyChange(e):(this._notifyChange(e),this.handleNewActiveKey(e)),this._adapter.notifyTabClick(e,t)}handleNewActiveKey(e){let{activeKey:t}=this.getStates();t!==e&&this._adapter.setNewActiveKey(e)}getDefaultActiveKey(){let e;let t=this.getProps();return"activeKey"in t?t.activeKey:"defaultActiveKey"in t?t.defaultActiveKey:this._adapter.getDefaultActiveKeyFromChildren()}handleTabListChange(){this._adapter.collectPane()}handleTabPanesChange(){this._adapter.collectPane(),this._adapter.collectActiveKey()}handleTabDelete(e){this._adapter.notifyTabDelete(e)}determineOrientation(e,t){let{tabPosition:n}=this.getProps();"left"===n?("ArrowUp"===e.key||"ArrowDown"===e.key)&&(this.switchTabOnArrowPress(e,t),this.handlePrevent(e)):("ArrowLeft"===e.key||"ArrowRight"===e.key)&&(this.switchTabOnArrowPress(e,t),this.handlePrevent(e))}handleDeleteKeyDown(e,t,n,r){let{preventScroll:i}=this.getProps();if(r){this.handleTabDelete(n);let r=t.indexOf(e.target);1!==t.length&&t[r+1>=t.length?r-1:r+1].focus({preventScroll:i})}}switchTabOnArrowPress(e,t){let{preventScroll:n}=this.getProps(),r=t.indexOf(e.target),i={ArrowLeft:-1,ArrowUp:-1,ArrowRight:1,ArrowDown:1};i[e.key]&&void 0!==r&&(t[r+i[e.key]]?t[r+i[e.key]].focus({preventScroll:n}):"ArrowLeft"===e.key||"ArrowUp"===e.key?t[t.length-1].focus({preventScroll:n}):("ArrowRight"===e.key||"ArrowDown"==e.key)&&t[0].focus({preventScroll:n}))}}var h=n(70059),_=n(986091),g=n(739185),y=n(210602),b=n(781610),S=n(199689),k=n(940143),w=n(675867),T=n(881719),E=n(179086),R=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let C=(0,o.forwardRef)((e,t)=>{let{tab:n,size:r,type:i,icon:a,selected:l,closable:c,disabled:d,itemKey:p,deleteTabItem:v,tabPosition:f,handleKeyDown:m,onClick:h}=e,_=R(e,["tab","size","type","icon","selected","closable","disabled","itemKey","deleteTabItem","tabPosition","handleKeyDown","onClick"]),g=(0,o.useMemo)(()=>"card"===i&&c?o.createElement(E.Z,{"aria-label":"Close",role:"button",className:`${u.UX.TABS_TAB}-icon-close`,onClick:e=>v(p,e)}):null,[i,c,v,p]),y=(0,o.useCallback)(e=>o.createElement("span",null,e),[]),b=(0,o.useCallback)(e=>{m&&m(e,p,c)},[m,p,c]),S=(0,o.useCallback)(e=>{!d&&h&&h(p,e)},[p,d,h]),k=a?y(a):null,w=s()(u.UX.TABS_TAB,`${u.UX.TABS_TAB}-${i}`,`${u.UX.TABS_TAB}-${f}`,`${u.UX.TABS_TAB}-single`,{[u.UX.TABS_TAB_ACTIVE]:l,[u.UX.TABS_TAB_DISABLED]:d,[`${u.UX.TABS_TAB}-small`]:"small"===r,[`${u.UX.TABS_TAB}-medium`]:"medium"===r});return o.createElement("div",Object.assign({role:"tab",id:`semiTab${p}`,"data-tabkey":`semiTab${p}`,"aria-controls":`semiTabPanel${p}`,"aria-disabled":d?"true":"false","aria-selected":l?"true":"false",tabIndex:l?0:-1,onKeyDown:b,onClick:S,className:w},_,{ref:t}),k,n,g)});C.elementType="Tabs.TabItem";var I=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class x extends o.Component{constructor(e){super(e),this.handleItemClick=(e,t)=>{if(this.props.onTabClick(e,t),this.props.collapsible){let t=this._getItemKey(e);document.querySelector(`[data-uuid="${this.state.uuid}"] .${u.UX.TABS_TAB}[data-scrollkey="${t}"]`).scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}},this.handleKeyDown=(e,t,n)=>{this.props.handleKeyDown(e,t,n)},this.renderTabItem=e=>{let{size:t,type:n,deleteTabItem:i,handleKeyDown:a,tabPosition:s}=this.props,l=this._isActive(e.itemKey);return o.createElement(C,Object.assign({},(0,r.Z)(e,["disabled","icon","itemKey","tab","closable"]),{key:this._getItemKey(e.itemKey),selected:l,size:t,type:n,tabPosition:s,handleKeyDown:a,deleteTabItem:i,onClick:this.handleItemClick}))},this.renderTabComponents=e=>e.map(e=>this.renderTabItem(e)),this.handleArrowClick=(e,t)=>{let n="start"===t?e.pop():e.shift();if(!n)return;let r=this._getItemKey(n.itemKey);document.querySelector(`[data-uuid="${this.state.uuid}"] .${u.UX.TABS_TAB}[data-scrollkey="${r}"]`).scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},this.renderCollapse=(e,t,n)=>{if((0,_.Z)(e))return o.createElement(S.Z,{disabled:!0,icon:t,theme:"borderless"});let{dropdownClassName:r,dropdownStyle:i}=this.props,{rePosKey:a}=this.state,l=!e.length,c=o.createElement(b.Z.Menu,null,e.map(e=>{let{icon:t,tab:n,itemKey:r}=e,i=t?this.renderIcon(e.icon):null;return o.createElement(b.Z.Item,{key:r,onClick:e=>this.handleItemClick(r,e),active:this._isActive(r)},i,n)})),d=s()({[`${u.UX.TABS_BAR}-arrow-${n}`]:n,[`${u.UX.TABS_BAR}-arrow`]:!0}),p=s()(r,{[`${u.UX.TABS_BAR}-dropdown`]:!0});return o.createElement(b.Z,{className:p,clickToHide:!0,clickTriggerToHide:!0,key:`${a}-${n}`,position:"start"===n?"bottomLeft":"bottomRight",render:l?null:c,showTick:!0,style:i,trigger:"hover",disableFocusListener:!0},o.createElement("div",{role:"presentation",className:d,onClick:t=>this.handleArrowClick(e,n)},o.createElement(S.Z,{disabled:l,icon:t,theme:"borderless"})))},this.renderOverflow=e=>e.map((e,t)=>{let n=0===t?o.createElement(k.Z,null):o.createElement(w.Z,null);return this.renderCollapse(e,n,0===t?"start":"end")}),this.renderCollapsedTab=()=>{let{list:e}=this.props,t=e.map(e=>{let{itemKey:t}=e;return Object.assign({key:this._getItemKey(t),active:this._isActive(t)},e)});return o.createElement(y.Z,{items:t,overflowRenderer:this.renderOverflow,renderMode:"scroll",className:`${u.UX.TABS_BAR}-overflow-list`,visibleItemRenderer:this.renderTabItem})},this._isActive=e=>e===this.props.activeKey,this._getItemKey=e=>`${e}-bar`,this.state={endInd:e.list.length,rePosKey:0,startInd:0,uuid:""}}componentDidMount(){this.setState({uuid:(0,T.Cd)()})}renderIcon(e){return o.createElement("span",null,e)}renderExtra(){let{tabBarExtraContent:e,type:t,size:n}=this.props,r=e&&e.props?e.props.style:{},i=s()(u.UX.TABS_BAR_EXTRA,{[`${u.UX.TABS_BAR}-${t}-extra`]:t,[`${u.UX.TABS_BAR}-${t}-extra-${n}`]:n});if(e){let t=Object.assign(Object.assign({},{float:"right"}),r);return o.createElement("div",{className:i,style:t,"x-semi-prop":"tabBarExtraContent"},e)}return null}render(){let e=this.props,{type:t,style:n,className:r,list:i,tabPosition:a,collapsible:l}=e,c=I(e,["type","style","className","list","tabPosition","collapsible"]),d=s()(r,{[u.UX.TABS_BAR]:!0,[u.UX.TABS_BAR_LINE]:"line"===t,[u.UX.TABS_BAR_CARD]:"card"===t,[u.UX.TABS_BAR_BUTTON]:"button"===t,[`${u.UX.TABS_BAR}-${a}`]:a,[`${u.UX.TABS_BAR}-collapse`]:l}),p=this.renderExtra(),v=l?this.renderCollapsedTab():this.renderTabComponents(i);return o.createElement("div",Object.assign({role:"tablist","aria-orientation":"left"===a?"vertical":"horizontal",className:d,style:n},(0,g.Z)(c),{"data-uuid":this.state.uuid}),v,p)}}x.propTypes={activeKey:c().string,className:c().string,collapsible:c().bool,list:c().array,onTabClick:c().func,size:c().oneOf(u.j2.SIZE),style:c().object,tabBarExtraContent:c().node,tabPosition:c().oneOf(u.j2.POSITION_MAP),type:c().oneOf(u.j2.TYPE_MAP),closable:c().bool,deleteTabItem:c().func};var N=n(736257),M=n(494146),P=n(156287),A=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let $=["className","style","disabled","itemKey","tab","icon"];class j extends h.Z{constructor(e){super(e),this.setContentRef=e=>{this.contentRef={current:e}},this.onTabClick=(e,t)=>{this.foundation.handleTabClick(e,t)},this.rePosChildren=(e,t)=>{let n=[],r=o.Children.toArray(e);return e.length&&(n.push(...r.filter(e=>e.props&&e.props.itemKey===t)),n.push(...r.filter(e=>e.props&&e.props.itemKey!==t))),n},this.getActiveItem=()=>{let{activeKey:e}=this.state,{children:t,tabList:n}=this.props;return n||!Array.isArray(t)?t:o.Children.toArray(t).filter(t=>!(0,o.isValidElement)(t)||!t.type||!t.type.isTabPane||t.props.itemKey===e)},this.deleteTabItem=(e,t)=>{t.stopPropagation(),this.foundation.handleTabDelete(e)},this.foundation=new m(this.adapter),this.state={activeKey:this.foundation.getDefaultActiveKey(),panes:[],prevActiveKey:null,forceDisableMotion:!1},this.contentRef=(0,o.createRef)(),this.contentHeight="auto"}get adapter(){return Object.assign(Object.assign({},super.adapter),{collectPane:()=>{let{tabList:e,children:t}=this.props;if(Array.isArray(e)&&e.length){this.setState({panes:e});return}let n=o.Children.map(t,e=>{if(e){let{tab:t,icon:n,disabled:r,itemKey:i,closable:o}=e.props;return{tab:t,icon:n,disabled:r,itemKey:i,closable:o}}});this.setState({panes:n})},collectActiveKey:()=>{let e=[],{tabList:t,children:n,activeKey:r}=this.props;if(void 0!==r)return;let{activeKey:i}=this.state;-1===(e=Array.isArray(t)&&t.length?t:o.Children.map(n,e=>{if(e){let{tab:t,icon:n,disabled:r,itemKey:i,closable:o}=e.props;return{tab:t,icon:n,disabled:r,itemKey:i,closable:o}}})).findIndex(e=>e.itemKey===i)&&(e.length>0?this.setState({activeKey:e[0].itemKey}):this.setState({activeKey:""}))},notifyTabClick:(e,t)=>{this.props.onTabClick(e,t)},notifyChange:e=>{this.props.onChange(e)},setNewActiveKey:e=>{this.setState({activeKey:e})},getDefaultActiveKeyFromChildren:()=>{let{tabList:e,children:t}=this.props,n="";return(e||o.Children.toArray(t).map(e=>(0,o.isValidElement)(e)?e.props:null)).forEach(e=>{!e||n||e.disabled||(n=e.itemKey)}),n},notifyTabDelete:e=>{this.props.onTabClose&&this.props.onTabClose(e)}})}static getDerivedStateFromProps(e,t){let n={};return(0,d.Z)(e.activeKey)||e.activeKey===t.activeKey||(t.prevActiveKey=t.activeKey,n.activeKey=e.activeKey),n}componentDidUpdate(e,t){let n=o.Children.toArray(e.children).map(e=>(0,r.Z)((0,o.isValidElement)(e)?e.props:null,$)),a=o.Children.toArray(this.props.children).map(e=>(0,r.Z)((0,o.isValidElement)(e)?e.props:null,$)),s=this.props.tabList||e.tabList;if((0,i.Z)(this.props.tabList,e.tabList)||this.foundation.handleTabListChange(),t.activeKey!==this.state.activeKey&&t.activeKey!==this.state.prevActiveKey&&this.setState({prevActiveKey:t.activeKey}),e.activeKey!==this.props.activeKey){let e=(()=>{let e=new Set(n.map(e=>e.itemKey));return a.map(e=>e.itemKey).filter(t=>!e.has(t))})();this.setState({forceDisableMotion:e.includes(this.props.activeKey)})}(0,i.Z)(n,a)||s||this.foundation.handleTabPanesChange()}render(){let e=this.props,{children:t,className:n,collapsible:r,contentStyle:i,keepDOM:a,lazyRender:l,renderTabBar:c,size:d,style:p,tabBarClassName:v,tabBarExtraContent:f,tabBarStyle:m,tabPaneMotion:h,tabPosition:_,type:g}=e,y=A(e,["children","className","collapsible","contentStyle","keepDOM","lazyRender","renderTabBar","size","style","tabBarClassName","tabBarExtraContent","tabBarStyle","tabPaneMotion","tabPosition","type"]),{panes:b,activeKey:S}=this.state,k=s()(n,{[u.UX.TABS]:!0,[`${u.UX.TABS}-${_}`]:_}),w=s()({[u.UX.TABS_CONTENT]:!0,[`${u.UX.TABS_CONTENT}-${_}`]:_}),T={activeKey:S,className:v,collapsible:r,list:b,onTabClick:this.onTabClick,size:d,style:m,tabBarExtraContent:f,tabPosition:_,type:g,deleteTabItem:this.deleteTabItem,handleKeyDown:this.foundation.handleKeyDown},E=c?c(T,x):o.createElement(x,Object.assign({},T)),R=a?t:this.getActiveItem();return o.createElement("div",Object.assign({className:k,style:p},this.getDataAttr(y)),E,o.createElement(M.Z.Provider,{value:{activeKey:S,lazyRender:l,panes:b,tabPaneMotion:h,tabPosition:_,prevActiveKey:this.state.prevActiveKey,forceDisableMotion:this.state.forceDisableMotion}},o.createElement("div",{ref:this.setContentRef,className:w,style:Object.assign({},i)},R)))}}j.TabPane=N.Z,j.TabItem=C,j.propTypes={activeKey:c().string,className:c().string,collapsible:c().bool,contentStyle:c().oneOfType([c().object]),defaultActiveKey:c().string,keepDOM:c().bool,lazyRender:c().bool,onChange:c().func,onTabClick:c().func,renderTabBar:c().func,size:c().oneOf(u.j2.SIZE),style:c().object,tabBarClassName:c().string,tabBarExtraContent:c().node,tabBarStyle:c().object,tabList:c().array,tabPaneMotion:c().bool,tabPosition:c().oneOf(u.j2.POSITION_MAP),type:c().oneOf(u.j2.TYPE_MAP),onTabClose:c().func,preventScroll:c().bool},j.__SemiComponentName__="Tabs",j.defaultProps=(0,P.GW)(j.__SemiComponentName__,{children:[],collapsible:!1,keepDOM:!0,lazyRender:!1,onChange:()=>void 0,onTabClick:()=>void 0,size:"large",tabPaneMotion:!0,tabPosition:"top",type:"line",onTabClose:()=>void 0});var O=j},494146:function(e,t,n){"use strict";let r=n(429996).createContext({});t.Z=r},856206:function(e,t,n){"use strict";n.d(t,{o:function(){return o}});var r=n(429996),i=n(981479),o=function(e){return function(t,n){var o=(0,r.useRef)(),a=(0,r.useRef)(0);void 0!==n&&(0,i.k)(n,o.current)||(o.current=n,a.current+=1),e(t,[a.current])}}},392956:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(574367),i=n(510560),o=function(e){if(!e||!document.getRootNode)return document;var t,n=Array.isArray(e)?e:[e];return n.every(function(e){var t=(0,i.n)(e);return!!t&&(t.getRootNode()instanceof ShadowRoot||void 0)})?(t=(0,i.n)(n[0]))?t.getRootNode():document:document},a=n(347804);function s(e,t,n){void 0===n&&(n="click");var s=(0,r.Z)(e);(0,a.Z)(function(){var e=function(e){!(Array.isArray(t)?t:[t]).some(function(t){var n=(0,i.n)(t);return!n||n.contains(e.target)})&&s.current(e)},r=o(t),a=Array.isArray(n)?n:[n];return a.forEach(function(t){return r.addEventListener(t,e)}),function(){a.forEach(function(t){return r.removeEventListener(t,e)})}},Array.isArray(n)?n:[n],t)}},448042:function(e,t,n){"use strict";var r=n(429996),i=n(856206);t.Z=(0,i.o)(r.useEffect)},275209:function(e,t,n){"use strict";var r=n(633424);n(531350);var i=n(429996),o=n(510560),a=n(347804);t.Z=function(e,t){var n=(0,r.CR)((0,i.useState)(),2),s=n[0],l=n[1],c=(0,r.CR)((0,i.useState)(),2),u=c[0],d=c[1];return(0,a.Z)(function(){var n=(0,o.n)(e);if(n){var i=new IntersectionObserver(function(e){var t,n;try{for(var i=(0,r.XA)(e),o=i.next();!o.done;o=i.next()){var a=o.value;d(a.intersectionRatio),l(a.isIntersecting)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},(0,r.pi)((0,r.pi)({},t),{root:(0,o.n)(null==t?void 0:t.root)}));return i.observe(n),function(){i.disconnect()}}},[null==t?void 0:t.rootMargin,null==t?void 0:t.threshold],e),[s,u]}},448263:function(e,t,n){"use strict";var r=n(429996),i=function(e,t){return!Object.is(e,t)};t.Z=function(e,t){void 0===t&&(t=i);var n=(0,r.useRef)(),o=(0,r.useRef)();return t(o.current,e)&&(n.current=o.current,o.current=e),n.current}},647:function(e,t,n){"use strict";var r=n(429996);t.Z=function(){var e=(0,r.useRef)(!1);return(0,r.useEffect)(function(){return e.current=!1,function(){e.current=!0}},[]),e}},981479:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(474227),i=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),(0,r.Z)(e,t)}},462233:function(e,t,n){"use strict";n.d(t,{J_:function(){return p},Ry:function(){return u},cJ:function(){return v}});var r=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},i=new WeakMap,o=new WeakMap,a={},s=0,l=function(e){return e&&(e.host||l(e.parentNode))},c=function(e,t,n,r){var c=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var n=l(e);return n&&t.contains(n)?n:null}).filter(function(e){return!!e});a[n]||(a[n]=new WeakMap);var u=a[n],d=[],p=new Set,v=new Set(c),f=function(e){!(!e||p.has(e))&&(p.add(e),f(e.parentNode))};c.forEach(f);var m=function(e){!(!e||v.has(e))&&Array.prototype.forEach.call(e.children,function(e){if(p.has(e))m(e);else try{var t=e.getAttribute(r),a=null!==t&&"false"!==t,s=(i.get(e)||0)+1,l=(u.get(e)||0)+1;i.set(e,s),u.set(e,l),d.push(e),1===s&&a&&o.set(e,!0),1===l&&e.setAttribute(n,"true"),a||e.setAttribute(r,"true")}catch(e){}})};return m(t),p.clear(),s++,function(){d.forEach(function(e){var t=i.get(e)-1,a=u.get(e)-1;i.set(e,t),u.set(e,a),t||(o.has(e)||e.removeAttribute(r),o.delete(e)),a||e.removeAttribute(n)}),--s||(i=new WeakMap,i=new WeakMap,o=new WeakMap,a={})}},u=function(e,t,n){void 0===n&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),o=t||r(e);return o?(i.push.apply(i,Array.from(o.querySelectorAll("[aria-live]"))),c(i,o,n,"aria-hidden")):function(){return null}},d=function(e,t,n){void 0===n&&(n="data-inert-ed");var i=t||r(e);return i?c(e,i,n,"inert"):function(){return null}},p=function(){return"undefined"!=typeof HTMLElement&&HTMLElement.prototype.hasOwnProperty("inert")},v=function(e,t,n){return void 0===n&&(n="data-suppressed"),(p()?d:u)(e,t,n)}},513648:function(e){var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},626475:function(e){var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 0xff00ff&n.rotl(e,8)|0xff00ff00&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],o=0;o<4;o++)8*r+6*o<=8*e.length?n.push(t.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/ig,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}},e.exports=n},878533:function(e,t){"use strict";var n=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;t.validate=function(e){if(!e||e.length>254||!n.test(e))return!1;var t=e.split("@");return!(t[0].length>64||t[1].split(".").some(function(e){return e.length>63}))}},531350:function(){!function(){"use strict";if("object"==typeof window){if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}var e=function(e){for(var t=e,n=i(t);n;)n=i(t=n.ownerDocument);return t}(window.document),t=[],n=null,r=null;a.prototype.THROTTLE_TIMEOUT=100,a.prototype.POLL_INTERVAL=null,a.prototype.USE_MUTATION_OBSERVER=!0,a._setupCrossOriginUpdater=function(){return n||(n=function(e,n){r=e&&n?p(e,n):u(),t.forEach(function(e){e._checkForIntersections()})}),n},a._resetCrossOriginUpdater=function(){n=null,r=null},a.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!(e&&1==e.nodeType))throw Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},a.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},a.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},a.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},a.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},a.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},a.prototype._monitorIntersections=function(t){var n=t.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(t)){var r=this._checkForIntersections,o=null,a=null;if(this.POLL_INTERVAL?o=n.setInterval(r,this.POLL_INTERVAL):(s(n,"resize",r,!0),s(t,"scroll",r,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(a=new n.MutationObserver(r)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push(function(){var e=t.defaultView;e&&(o&&e.clearInterval(o),l(e,"resize",r,!0)),l(t,"scroll",r,!0),a&&a.disconnect()}),t!=(this.root&&(this.root.ownerDocument||this.root)||e)){var c=i(t);c&&this._monitorIntersections(c.ownerDocument)}}},a.prototype._unmonitorIntersections=function(t){var n=this._monitoringDocuments.indexOf(t);if(-1!=n){var r=this.root&&(this.root.ownerDocument||this.root)||e;if(!this._observationTargets.some(function(e){var n=e.element.ownerDocument;if(n==t)return!0;for(;n&&n!=r;){var o=i(n);if((n=o&&o.ownerDocument)==t)return!0}return!1})){var o=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),o(),t!=r){var a=i(t);a&&this._unmonitorIntersections(a.ownerDocument)}}}},a.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},a.prototype._checkForIntersections=function(){if(this.root||!n||r){var e=this._rootIsInDom(),t=e?this._getRootRect():u();this._observationTargets.forEach(function(r){var i=r.element,a=c(i),s=this._rootContainsTarget(i),l=r.entry,d=e&&s&&this._computeTargetAndRootIntersection(i,a,t),p=null;this._rootContainsTarget(i)?(!n||this.root)&&(p=t):p=u();var v=r.entry=new o({time:window.performance&&performance.now&&performance.now(),target:i,boundingClientRect:a,rootBounds:p,intersectionRect:d});l?e&&s?this._hasCrossedThreshold(l,v)&&this._queuedEntries.push(v):l&&l.isIntersecting&&this._queuedEntries.push(v):this._queuedEntries.push(v)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},a.prototype._computeTargetAndRootIntersection=function(t,i,o){if("none"!=window.getComputedStyle(t).display){for(var a=i,s=f(t),l=!1;!l&&s;){var u=null,d=1==s.nodeType?window.getComputedStyle(s):{};if("none"==d.display)return null;if(s==this.root||9==s.nodeType){if(l=!0,s==this.root||s==e)n&&!this.root?r&&(0!=r.width||0!=r.height)?u=r:(s=null,u=null,a=null):u=o;else{var v=f(s),m=v&&c(v),h=v&&this._computeTargetAndRootIntersection(v,m,o);m&&h?(s=v,u=p(m,h)):(s=null,a=null)}}else{var _=s.ownerDocument;s!=_.body&&s!=_.documentElement&&"visible"!=d.overflow&&(u=c(s))}if(u&&(a=function(e,t){var n=Math.max(e.top,t.top),r=Math.min(e.bottom,t.bottom),i=Math.max(e.left,t.left),o=Math.min(e.right,t.right),a=o-i,s=r-n;return a>=0&&s>=0&&{top:n,bottom:r,left:i,right:o,width:a,height:s}||null}(u,a)),!a)break;s=s&&f(s)}return a}},a.prototype._getRootRect=function(){var t;if(this.root&&!m(this.root))t=c(this.root);else{var n=m(this.root)?this.root:e,r=n.documentElement,i=n.body;t={top:0,left:0,right:r.clientWidth||i.clientWidth,width:r.clientWidth||i.clientWidth,bottom:r.clientHeight||i.clientHeight,height:r.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(t)},a.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100}),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},a.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var i=0;i<this.thresholds.length;i++){var o=this.thresholds[i];if(o==n||o==r||o<n!=o<r)return!0}},a.prototype._rootIsInDom=function(){return!this.root||v(e,this.root)},a.prototype._rootContainsTarget=function(t){var n=this.root&&(this.root.ownerDocument||this.root)||e;return v(n,t)&&(!this.root||n==t.ownerDocument)},a.prototype._registerInstance=function(){0>t.indexOf(this)&&t.push(this)},a.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=a,window.IntersectionObserverEntry=o}function i(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}function o(e){this.time=e.time,this.target=e.target,this.rootBounds=d(e.rootBounds),this.boundingClientRect=d(e.boundingClientRect),this.intersectionRect=d(e.intersectionRect||u()),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,i=r.width*r.height;n?this.intersectionRatio=Number((i/n).toFixed(4)):this.intersectionRatio=+!!this.isIntersecting}function a(e,t){var n,r,i,o=t||{};if("function"!=typeof e)throw Error("callback must be a function");if(o.root&&1!=o.root.nodeType&&9!=o.root.nodeType)throw Error("root must be a Document or Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,i=null,function(){i||(i=setTimeout(function(){n(),i=null},r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(o.rootMargin),this.thresholds=this._initThresholds(o.threshold),this.root=o.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function s(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function l(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detachEvent&&e.detachEvent("on"+t,n)}function c(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):u()}function u(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function d(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function p(e,t){var n=t.top-e.top,r=t.left-e.left;return{top:n,left:r,height:t.height,width:t.width,bottom:n+t.height,right:r+t.width}}function v(e,t){for(var n=t;n;){if(n==e)return!0;n=f(n)}return!1}function f(t){var n=t.parentNode;return 9==t.nodeType&&t!=e?i(t):(n&&n.assignedSlot&&(n=n.assignedSlot.parentNode),n&&11==n.nodeType&&n.host)?n.host:n}function m(e){return e&&9===e.nodeType}}()},280718:function(e){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){var n;return null!=e&&(t(e)||"function"==typeof(n=e).readFloatLE&&"function"==typeof n.slice&&t(n.slice(0,0))||!!e._isBuffer)}},455218:function(e,t,n){var r,i,o,a,s;r=n(626475),i=n(513648).utf8,o=n(280718),a=n(513648).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?a.stringToBytes(e):i.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),l=8*e.length,c=0x67452301,u=-0x10325477,d=-0x67452302,p=0x10325476,v=0;v<n.length;v++)n[v]=(n[v]<<8|n[v]>>>24)&0xff00ff|(n[v]<<24|n[v]>>>8)&0xff00ff00;n[l>>>5]|=128<<l%32,n[(l+64>>>9<<4)+14]=l;for(var f=s._ff,m=s._gg,h=s._hh,_=s._ii,v=0;v<n.length;v+=16){var g=c,y=u,b=d,S=p;c=f(c,u,d,p,n[v+0],7,-0x28955b88),p=f(p,c,u,d,n[v+1],12,-0x173848aa),d=f(d,p,c,u,n[v+2],17,0x242070db),u=f(u,d,p,c,n[v+3],22,-0x3e423112),c=f(c,u,d,p,n[v+4],7,-0xa83f051),p=f(p,c,u,d,n[v+5],12,0x4787c62a),d=f(d,p,c,u,n[v+6],17,-0x57cfb9ed),u=f(u,d,p,c,n[v+7],22,-0x2b96aff),c=f(c,u,d,p,n[v+8],7,0x698098d8),p=f(p,c,u,d,n[v+9],12,-0x74bb0851),d=f(d,p,c,u,n[v+10],17,-42063),u=f(u,d,p,c,n[v+11],22,-0x76a32842),c=f(c,u,d,p,n[v+12],7,0x6b901122),p=f(p,c,u,d,n[v+13],12,-0x2678e6d),d=f(d,p,c,u,n[v+14],17,-0x5986bc72),u=f(u,d,p,c,n[v+15],22,0x49b40821),c=m(c,u,d,p,n[v+1],5,-0x9e1da9e),p=m(p,c,u,d,n[v+6],9,-0x3fbf4cc0),d=m(d,p,c,u,n[v+11],14,0x265e5a51),u=m(u,d,p,c,n[v+0],20,-0x16493856),c=m(c,u,d,p,n[v+5],5,-0x29d0efa3),p=m(p,c,u,d,n[v+10],9,0x2441453),d=m(d,p,c,u,n[v+15],14,-0x275e197f),u=m(u,d,p,c,n[v+4],20,-0x182c0438),c=m(c,u,d,p,n[v+9],5,0x21e1cde6),p=m(p,c,u,d,n[v+14],9,-0x3cc8f82a),d=m(d,p,c,u,n[v+3],14,-0xb2af279),u=m(u,d,p,c,n[v+8],20,0x455a14ed),c=m(c,u,d,p,n[v+13],5,-0x561c16fb),p=m(p,c,u,d,n[v+2],9,-0x3105c08),d=m(d,p,c,u,n[v+7],14,0x676f02d9),u=m(u,d,p,c,n[v+12],20,-0x72d5b376),c=h(c,u,d,p,n[v+5],4,-378558),p=h(p,c,u,d,n[v+8],11,-0x788e097f),d=h(d,p,c,u,n[v+11],16,0x6d9d6122),u=h(u,d,p,c,n[v+14],23,-0x21ac7f4),c=h(c,u,d,p,n[v+1],4,-0x5b4115bc),p=h(p,c,u,d,n[v+4],11,0x4bdecfa9),d=h(d,p,c,u,n[v+7],16,-0x944b4a0),u=h(u,d,p,c,n[v+10],23,-0x41404390),c=h(c,u,d,p,n[v+13],4,0x289b7ec6),p=h(p,c,u,d,n[v+0],11,-0x155ed806),d=h(d,p,c,u,n[v+3],16,-0x2b10cf7b),u=h(u,d,p,c,n[v+6],23,0x4881d05),c=h(c,u,d,p,n[v+9],4,-0x262b2fc7),p=h(p,c,u,d,n[v+12],11,-0x1924661b),d=h(d,p,c,u,n[v+15],16,0x1fa27cf8),u=h(u,d,p,c,n[v+2],23,-0x3b53a99b),c=_(c,u,d,p,n[v+0],6,-0xbd6ddbc),p=_(p,c,u,d,n[v+7],10,0x432aff97),d=_(d,p,c,u,n[v+14],15,-0x546bdc59),u=_(u,d,p,c,n[v+5],21,-0x36c5fc7),c=_(c,u,d,p,n[v+12],6,0x655b59c3),p=_(p,c,u,d,n[v+3],10,-0x70f3336e),d=_(d,p,c,u,n[v+10],15,-1051523),u=_(u,d,p,c,n[v+1],21,-0x7a7ba22f),c=_(c,u,d,p,n[v+8],6,0x6fa87e4f),p=_(p,c,u,d,n[v+15],10,-0x1d31920),d=_(d,p,c,u,n[v+6],15,-0x5cfebcec),u=_(u,d,p,c,n[v+13],21,0x4e0811a1),c=_(c,u,d,p,n[v+4],6,-0x8ac817e),p=_(p,c,u,d,n[v+11],10,-0x42c50dcb),d=_(d,p,c,u,n[v+2],15,0x2ad7d2bb),u=_(u,d,p,c,n[v+9],21,-0x14792c6f),c=c+g>>>0,u=u+y>>>0,d=d+b>>>0,p=p+S>>>0}return r.endian([c,u,d,p])})._ff=function(e,t,n,r,i,o,a){var s=e+(t&n|~t&r)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},s._gg=function(e,t,n,r,i,o,a){var s=e+(t&r|n&~r)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},s._hh=function(e,t,n,r,i,o,a){var s=e+(t^n^r)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},s._ii=function(e,t,n,r,i,o,a){var s=e+(n^(t|~r))+(i>>>0)+a;return(s<<o|s>>>32-o)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw Error("Illegal argument "+e);var n=r.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?a.bytesToString(n):r.bytesToHex(n)}},378413:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var r=n(429996),i=n(189393);function o(e){var t=e.i18n,n=e.defaultNS,o=e.children,a=(0,r.useMemo)(function(){return{i18n:t,defaultNS:n}},[t,n]);return(0,r.createElement)(i.OO.Provider,{value:a},o)}},189393:function(e,t,n){"use strict";n.d(t,{JP:function(){return p},nI:function(){return f},zv:function(){return v},OO:function(){return d}});var r,i=n(804879),o=n(605670),a=n(429996),s=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,l={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},c=function(e){return l[e]},u={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:function(e){return e.replace(s,c)}},d=(0,a.createContext)();function p(){return u}var v=function(){function e(){(0,i.Z)(this,e),this.usedNamespaces={}}return(0,o.Z)(e,[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach(function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}();function f(){return r}},522596:function(e,t,n){"use strict";n.d(t,{Av:function(){return a},pF:function(){return r},xv:function(){return o},zi:function(){return i}});var r="right-scroll-bar-position",i="width-before-scroll-bar",o="with-scroll-bars-hidden",a="--removed-body-scroll-bar-size"},372161:function(e,t,n){"use strict";n.d(t,{jp:function(){return m}});var r=n(429996),i=n(171390),o=n(522596),a={left:0,top:0,right:0,gap:0},s=function(e){return parseInt(e||"",10)||0},l=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[s(n),s(r),s(i)]},c=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return a;var t=l(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},u=(0,i.Ws)(),d="data-scroll-locked",p=function(e,t,n,r){var i=e.left,a=e.top,s=e.right,l=e.gap;return void 0===n&&(n="margin"),"\n  .".concat(o.xv," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(l,"px ").concat(r,";\n  }\n  body[").concat(d,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(l,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(o.pF," {\n    right: ").concat(l,"px ").concat(r,";\n  }\n  \n  .").concat(o.zi," {\n    margin-right: ").concat(l,"px ").concat(r,";\n  }\n  \n  .").concat(o.pF," .").concat(o.pF," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(o.zi," .").concat(o.zi," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(d,"] {\n    ").concat(o.Av,": ").concat(l,"px;\n  }\n")},v=function(){var e=parseInt(document.body.getAttribute(d)||"0",10);return isFinite(e)?e:0},f=function(){r.useEffect(function(){return document.body.setAttribute(d,(v()+1).toString()),function(){var e=v()-1;e<=0?document.body.removeAttribute(d):document.body.setAttribute(d,e.toString())}},[])},m=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,o=void 0===i?"margin":i;f();var a=r.useMemo(function(){return c(o)},[o]);return r.createElement(u,{styles:p(a,!t,o,n?"":"!important")})}},105241:function(e,t,n){"use strict";n.d(t,{Z:function(){return M}});var r,i=n(633424),o=n(429996),a=n(522596);function s(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var l="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,c=new WeakMap,u=(0,n(555580)._)(),d=function(){},p=o.forwardRef(function(e,t){var n,r,a,p,v=o.useRef(null),f=o.useState({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:d}),m=f[0],h=f[1],_=e.forwardProps,g=e.children,y=e.className,b=e.removeScrollBar,S=e.enabled,k=e.shards,w=e.sideCar,T=e.noRelative,E=e.noIsolation,R=e.inert,C=e.allowPinchZoom,I=e.as,x=e.gapMode,N=(0,i._T)(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=(n=[v,t],r=function(e){return n.forEach(function(t){return s(t,e)})},(a=(0,o.useState)(function(){return{value:null,callback:r,facade:{get current(){return a.value},set current(value){var e=a.value;e!==value&&(a.value=value,a.callback(value,e))}}}})[0]).callback=r,p=a.facade,l(function(){var e=c.get(p);if(e){var t=new Set(e),r=new Set(n),i=p.current;t.forEach(function(e){r.has(e)||s(e,null)}),r.forEach(function(e){t.has(e)||s(e,i)})}c.set(p,n)},[n]),p),P=(0,i.pi)((0,i.pi)({},N),m);return o.createElement(o.Fragment,null,S&&o.createElement(w,{sideCar:u,removeScrollBar:b,shards:k,noRelative:T,noIsolation:E,inert:R,setCallbacks:h,allowPinchZoom:!!C,lockRef:v,gapMode:x}),_?o.cloneElement(o.Children.only(g),(0,i.pi)((0,i.pi)({},P),{ref:M})):o.createElement(void 0===I?"div":I,(0,i.pi)({},P,{className:y,ref:M}),g))});p.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},p.classNames={fullWidth:a.zi,zeroRight:a.pF};var v=function(e){var t=e.sideCar,n=(0,i._T)(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw Error("Sidecar medium not found");return o.createElement(r,(0,i.pi)({},n))};v.isSideCarExport=!0;var f=n(372161),m=n(171390),h=!1;if("undefined"!=typeof window)try{var _=Object.defineProperty({},"passive",{get:function(){return h=!0,!0}});window.addEventListener("test",_,_),window.removeEventListener("test",_,_)}catch(e){h=!1}var g=!!h&&{passive:!1},y=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&(n.overflowY!==n.overflowX||"TEXTAREA"===e.tagName||"visible"!==n[t])},b=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),S(e,r)){var i=k(e,r);if(i[1]>i[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},S=function(e,t){return"v"===e?y(t,"overflowY"):y(t,"overflowX")},k=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},w=function(e,t,n,r,i){var o,a=(o=window.getComputedStyle(t).direction,"h"===e&&"rtl"===o?-1:1),s=a*r,l=n.target,c=t.contains(l),u=!1,d=s>0,p=0,v=0;do{if(!l)break;var f=k(e,l),m=f[0],h=f[1]-f[2]-a*m;(m||h)&&S(e,l)&&(p+=h,v+=m);var _=l.parentNode;l=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return d&&(i&&1>Math.abs(p)||!i&&s>p)?u=!0:!d&&(i&&1>Math.abs(v)||!i&&-s>v)&&(u=!0),u},T=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},E=function(e){return[e.deltaX,e.deltaY]},R=function(e){return e&&"current"in e?e.current:e},C=0,I=[],x=(r=function(e){var t=o.useRef([]),n=o.useRef([0,0]),r=o.useRef(),a=o.useState(C++)[0],s=o.useState(m.Ws)[0],l=o.useRef(e);o.useEffect(function(){l.current=e},[e]),o.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var t=(0,i.ev)([e.lockRef.current],(e.shards||[]).map(R),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var c=o.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!l.current.allowPinchZoom;var i,o=T(e),a=n.current,s="deltaX"in e?e.deltaX:a[0]-o[0],c="deltaY"in e?e.deltaY:a[1]-o[1],u=e.target,d=Math.abs(s)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var p=b(d,u);if(!p)return!0;if(p?i=d:(i="v"===d?"h":"v",p=b(d,u)),!p)return!1;if(!r.current&&"changedTouches"in e&&(s||c)&&(r.current=i),!i)return!0;var v=r.current||i;return w(v,t,e,"h"===v?s:c,!0)},[]),u=o.useCallback(function(e){if(I.length&&I[I.length-1]===s){var n="deltaY"in e?E(e):T(e),r=t.current.filter(function(t){var r;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(r=t.delta)[0]===n[0]&&r[1]===n[1]})[0];if(r&&r.should){e.cancelable&&e.preventDefault();return}if(!r){var i=(l.current.shards||[]).map(R).filter(Boolean).filter(function(t){return t.contains(e.target)});(i.length>0?c(e,i[0]):!l.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),d=o.useCallback(function(e,n,r,i){var o={name:e,delta:n,target:r,should:i,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(r)};t.current.push(o),setTimeout(function(){t.current=t.current.filter(function(e){return e!==o})},1)},[]),p=o.useCallback(function(e){n.current=T(e),r.current=void 0},[]),v=o.useCallback(function(t){d(t.type,E(t),t.target,c(t,e.lockRef.current))},[]),h=o.useCallback(function(t){d(t.type,T(t),t.target,c(t,e.lockRef.current))},[]);o.useEffect(function(){return I.push(s),e.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:h}),document.addEventListener("wheel",u,g),document.addEventListener("touchmove",u,g),document.addEventListener("touchstart",p,g),function(){I=I.filter(function(e){return e!==s}),document.removeEventListener("wheel",u,g),document.removeEventListener("touchmove",u,g),document.removeEventListener("touchstart",p,g)}},[]);var _=e.removeScrollBar,y=e.inert;return o.createElement(o.Fragment,null,y?o.createElement(s,{styles:"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")}):null,_?o.createElement(f.jp,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},u.useMedium(r),v),N=o.forwardRef(function(e,t){return o.createElement(p,(0,i.pi)({},e,{ref:t,sideCar:x}))});N.classNames=p.classNames;var M=N},171390:function(e,t,n){"use strict";n.d(t,{Ws:function(){return s}});var r,i=n(429996),o=function(){var e=0,t=null;return{add:function(i){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=r||n.nc;return t&&e.setAttribute("nonce",t),e}())){var o,a;(o=t).styleSheet?o.styleSheet.cssText=i:o.appendChild(document.createTextNode(i)),a=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(a)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},a=function(){var e=o();return function(t,n){i.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},s=function(){var e=a();return function(t){return e(t.styles,t.dynamic),null}}},233893:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(633424),i=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return(0,r.ZT)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n.closed||t.next(this._value),n},t.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,n=this._value;if(e)throw t;return this._throwIfClosed(),n},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(n(886783).x)},56231:function(e,t,n){"use strict";n.d(t,{y:function(){return u}});var r=n(900205),i=n(176022),o=n(628003),a=n(536446),s=n(249516),l=n(576774),c=n(776888),u=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var o=this,a=!function(e){return e&&e instanceof r.Lv||e&&(0,l.m)(e.next)&&(0,l.m)(e.error)&&(0,l.m)(e.complete)&&(0,i.Nn)(e)}(e)?new r.Hp(e,t,n):e;return(0,c.x)(function(){var e=o.operator,t=o.source;a.add(e?e.call(a,t):t?o._subscribe(a):o._trySubscribe(a))}),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=d(t))(function(t,i){var o=new r.Hp({next:function(t){try{e(t)}catch(e){i(e),o.unsubscribe()}},error:i,complete:t});n.subscribe(o)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[o.L]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?a.y:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=d(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function d(e){var t;return null!==(t=null!=e?e:s.v.Promise)&&void 0!==t?t:Promise}},886783:function(e,t,n){"use strict";n.d(t,{x:function(){return c}});var r=n(633424),i=n(56231),o=n(176022),a=(0,n(582577).d)(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),s=n(919572),l=n(776888),c=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,r.ZT)(t,e),t.prototype.lift=function(e){var t=new u(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new a},t.prototype.next=function(e){var t=this;(0,l.x)(function(){var n,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=(0,r.XA)(t.currentObservers),a=o.next();!a.done;a=o.next())a.value.next(e)}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}})},t.prototype.error=function(e){var t=this;(0,l.x)(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}})},t.prototype.complete=function(){var e=this;(0,l.x)(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this.hasError,r=this.isStopped,i=this.observers;return n||r?o.Lc:(this.currentObservers=null,i.push(e),new o.w0(function(){t.currentObservers=null,(0,s.P)(i,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,n=this.thrownError,r=this.isStopped;t?e.error(n):r&&e.complete()},t.prototype.asObservable=function(){var e=new i.y;return e.source=this,e},t.create=function(e,t){return new u(e,t)},t}(i.y),u=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return(0,r.ZT)(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:o.Lc},t}(c)},900205:function(e,t,n){"use strict";n.d(t,{Hp:function(){return _},Lv:function(){return v}});var r=n(633424),i=n(576774),o=n(176022),a=n(249516),s=n(365488),l=n(76425),c=u("C",void 0,void 0);function u(e,t,n){return{kind:e,value:t,error:n}}var d=n(686026),p=n(776888),v=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,(0,o.Nn)(t)&&t.add(n)):n.destination=b,n}return(0,r.ZT)(t,e),t.create=function(e,t,n){return new _(e,t,n)},t.prototype.next=function(e){this.isStopped?y(u("N",e,void 0),this):this._next(e)},t.prototype.error=function(e){this.isStopped?y(u("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?y(c,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(o.w0),f=Function.prototype.bind;function m(e,t){return f.call(e,t)}var h=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){g(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){g(e)}else g(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){g(e)}},e}(),_=function(e){function t(t,n,r){var o,s,l=e.call(this)||this;return(0,i.m)(t)||!t?o={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:l&&a.v.useDeprecatedNextContext?((s=Object.create(t)).unsubscribe=function(){return l.unsubscribe()},o={next:t.next&&m(t.next,s),error:t.error&&m(t.error,s),complete:t.complete&&m(t.complete,s)}):o=t,l.destination=new h(o),l}return(0,r.ZT)(t,e),t}(v);function g(e){a.v.useDeprecatedSynchronousErrorHandling?(0,p.O)(e):(0,s.h)(e)}function y(e,t){var n=a.v.onStoppedNotification;n&&d.z.setTimeout(function(){return n(e,t)})}var b={closed:!0,next:l.Z,error:function(e){throw e},complete:l.Z}},176022:function(e,t,n){"use strict";n.d(t,{Lc:function(){return l},w0:function(){return s},Nn:function(){return c}});var r=n(633424),i=n(576774),o=(0,n(582577).d)(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}),a=n(919572),s=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,n,a,s,l=this._parentage;if(l){if(this._parentage=null,Array.isArray(l))try{for(var c=(0,r.XA)(l),d=c.next();!d.done;d=c.next())d.value.remove(this)}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}else l.remove(this)}var p=this.initialTeardown;if((0,i.m)(p))try{p()}catch(e){s=e instanceof o?e.errors:[e]}var v=this._finalizers;if(v){this._finalizers=null;try{for(var f=(0,r.XA)(v),m=f.next();!m.done;m=f.next()){var h=m.value;try{u(h)}catch(e){s=null!=s?s:[],e instanceof o?s=(0,r.ev)((0,r.ev)([],(0,r.CR)(s)),(0,r.CR)(e.errors)):s.push(e)}}}catch(e){n={error:e}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(n)throw n.error}}}if(s)throw new o(s)}},t.prototype.add=function(e){var n;if(e&&e!==this){if(this.closed)u(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&(0,a.P)(t,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&(0,a.P)(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),l=s.EMPTY;function c(e){return e instanceof s||e&&"closed"in e&&(0,i.m)(e.remove)&&(0,i.m)(e.add)&&(0,i.m)(e.unsubscribe)}function u(e){(0,i.m)(e)?e():e.unsubscribe()}},249516:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});var r={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},686026:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(633424),i={setTimeout:function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var a=i.delegate;return(null==a?void 0:a.setTimeout)?a.setTimeout.apply(a,(0,r.ev)([e,t],(0,r.CR)(n))):setTimeout.apply(void 0,(0,r.ev)([e,t],(0,r.CR)(n)))},clearTimeout:function(e){var t=i.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0}},628003:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},919572:function(e,t,n){"use strict";function r(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}n.d(t,{P:function(){return r}})},582577:function(e,t,n){"use strict";function r(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}n.d(t,{d:function(){return r}})},776888:function(e,t,n){"use strict";n.d(t,{O:function(){return a},x:function(){return o}});var r=n(249516),i=null;function o(e){if(r.v.useDeprecatedSynchronousErrorHandling){var t=!i;if(t&&(i={errorThrown:!1,error:null}),e(),t){var n=i,o=n.errorThrown,a=n.error;if(i=null,o)throw a}}else e()}function a(e){r.v.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=e)}},536446:function(e,t,n){"use strict";function r(e){return e}n.d(t,{y:function(){return r}})},576774:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,{m:function(){return r}})},76425:function(e,t,n){"use strict";function r(){}n.d(t,{Z:function(){return r}})},365488:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(249516),i=n(686026);function o(e){i.z.setTimeout(function(){var t=r.v.onUnhandledError;if(t)t(e);else throw e})}},555580:function(e,t,n){"use strict";n.d(t,{_:function(){return s},s:function(){return a}});var r=n(633424);function i(e){return e}function o(e,t){void 0===t&&(t=i);var n=[],r=!1;return{read:function(){if(r)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var o=function(){var n=t;t=[],n.forEach(e)},a=function(){return Promise.resolve().then(o)};a(),n={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),n}}}}}function a(e,t){return void 0===t&&(t=i),o(e,t)}function s(e){void 0===e&&(e={});var t=o(null);return t.options=(0,r.pi)({async:!0,ssr:!1},e),t}},52799:function(e,t){"use strict";t.Z={container:"container-gaxn1L","custom-area-wrapper":"custom-area-wrapper-eZ7eV6",customAreaWrapper:"custom-area-wrapper-eZ7eV6",placeholder:"placeholder-bH24LO","editor-container":"editor-container-FvjPyp",editorContainer:"editor-container-FvjPyp","editor-wrapper":"editor-wrapper-aTMAEc",editorWrapper:"editor-wrapper-aTMAEc","bottom-wrapper":"bottom-wrapper-HSqF30",bottomWrapper:"bottom-wrapper-HSqF30",editor:"editor-A1E_5W","left-tools-wrapper":"left-tools-wrapper-OPMrTB",leftToolsWrapper:"left-tools-wrapper-OPMrTB","right-tools-wrapper":"right-tools-wrapper-bTtSWY",rightToolsWrapper:"right-tools-wrapper-bTtSWY","tools-placeholder":"tools-placeholder-WzV9jb",toolsPlaceholder:"tools-placeholder-WzV9jb","input-content-container":"input-content-container-qGGCGi",inputContentContainer:"input-content-container-qGGCGi","input-popover":"input-popover-JQ8RRK",inputPopover:"input-popover-JQ8RRK","container-v2":"container-v2-TUi2lB",containerV2:"container-v2-TUi2lB"}},329041:function(e,t){"use strict";t.Z={"login-modal":"login-modal-SJYLEV",loginModal:"login-modal-SJYLEV","icon-button":"icon-button-j2ItVk",iconButton:"icon-button-j2ItVk","back-icon":"back-icon-uc2PKQ",backIcon:"back-icon-uc2PKQ",h5:"h5-GXKMuS"}},26271:function(e,t,n){"use strict";n.r(t),n.d(t,{DbxPopConfirm:function(){return g},DbxPopover:function(){return p},PopoverProvider:function(){return s}});var r=n(429996),i=n(328090),o=n(802709),a=n(966640);let s=r.createContext({getPopupContainer:null});var l=n(126544),c=n(627394);let u=e=>{let{children:t,getPopupContainer:n}=e;return n?(0,c.jsx)(i.h_,{container:n(),children:t}):(0,c.jsx)(c.Fragment,{children:t})},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";return({top:{side:"top",align:"center"},topLeft:{side:"top",align:"start"},topRight:{side:"top",align:"end"},right:{side:"right",align:"center"},rightTop:{side:"right",align:"start"},rightBottom:{side:"right",align:"end"},bottom:{side:"bottom",align:"center"},bottomLeft:{side:"bottom",align:"start"},bottomRight:{side:"bottom",align:"end"},left:{side:"left",align:"center"},leftTop:{side:"left",align:"start"},leftBottom:{side:"left",align:"end"}})[e]},p=(0,r.forwardRef)((e,t)=>{let{content:n,children:p,visible:v,defaultVisible:f=!1,onVisibleChange:m,position:h="bottom",showArrow:_=!1,arrowPointAtCenter:g=!1,mouseEnterDelay:y=50,mouseLeaveDelay:b=50,style:S,className:k,zIndex:w,autoAdjustOverflow:T=!0,stopPropagation:E=!1,clickToHide:R=!1,closeOnEsc:C=!0,onClickOutSide:I,getPopupContainer:x,rePosKey:N,spacing:M=4,motion:P=!0,preventOverflow:A=!0,arrowProps:$,contentProps:j,onOpenAutoFocus:O,onCloseAutoFocus:F,onPointerAndFocusOutside:L,onFocusOutside:D,...W}=e,{trigger:Z="hover"}=e;(0,l.KX)()&&"hover"===Z&&(Z="click");let[U,B]=(0,r.useState)(f),[z,V]=(0,r.useState)(null),H="custom"===Z||void 0!==v,G=H?v:U,K=(0,r.useRef)(null),X=(0,r.useRef)(null),q=r.useRef();r.useEffect(()=>{q.current=G});let[,J]=(0,r.useState)({});(0,r.useEffect)(()=>{void 0!==N&&J({})},[N]);let Q=(0,r.useCallback)(e=>{H||"hover"===Z||B(e),null==m||m(e)},[H,m,Z]);(0,r.useEffect)(()=>()=>{K.current&&clearTimeout(K.current),X.current&&clearTimeout(X.current)},[]);let Y=(0,r.useCallback)(e=>{if("custom"===Z){e.preventDefault();return}},[Z,E,Q,G]),ee=(0,r.useCallback)(e=>{R&&Q(!1)},[R,Q]),et=(0,r.useCallback)(e=>{"custom"===Z&&e.preventDefault(),null==I||I(e)},[I,Z,Q]),{side:en,align:er}=d(h),ei=p;try{let e=r.Children.only(p);if(r.isValidElement(e)){var eo;let t="string"==typeof e.type,n=(null===(eo=e.type)||void 0===eo?void 0:eo.$$typeof)===Symbol.for("react.forward_ref");e.type!==r.Fragment&&(t||n)||(ei=(0,c.jsx)("span",{"data-forward-dom":!0,children:p}))}}catch{ei=(0,c.jsx)("span",{"data-forward-dom":!0,children:p})}let{getPopupContainer:ea}=r.useContext(s);return"hover"===Z?(0,c.jsx)(o.P,{isUseByPopover:!0,content:n,position:h,showArrow:_,mouseEnterDelay:y,mouseLeaveDelay:b,style:S,className:(0,a.cn)(k,`
              min-w-[280px] rounded-dbx-xl border-[0.5px] border-solid border-dbx-line-10
              bg-dbx-bg-float px-16 py-16 will-change-transform
            `,`
              shadow-[0_2px_4px_0_rgba(0,0,0,0.02),_0_4px_10px_0_rgba(0,0,0,0.03),_0_4px_16px_0_rgba(0,0,0,0.03)]
            `,P&&`
                animate-in duration-150 ease-out zoom-in-95 fade-in
                data-[state=closed]:animate-out data-[state=closed]:duration-150
                data-[state=closed]:zoom-out-95 data-[state=closed]:fade-out
              `),zIndex:w,autoAdjustOverflow:T,getPopupContainer:x||ea,spacing:M,motion:P,clickToHide:R,onClickOutSide:I,onVisibleChange:Q,trigger:Z,...W,children:p}):(0,c.jsxs)(i.fC,{onOpenChange:Q,open:G,modal:!1,children:[(0,c.jsx)(i.xz,{asChild:!0,ref:V,onClick:Y,children:ei}),(0,c.jsx)(u,{getPopupContainer:x||ea,children:(0,c.jsxs)(i.VY,{ref:t,side:en,align:er,sideOffset:M,onOpenAutoFocus:O,onCloseAutoFocus:F,avoidCollisions:T,collisionPadding:8*!!A,onPointerDownOutside:et,onInteractOutside:L,onFocusOutside:D,onEscapeKeyDown:C?()=>Q(!1):void 0,onClick:ee,className:(0,a.cn)("min-w-[280px] rounded-dbx-xl bg-dbx-bg-float px-16 py-16 will-change-transform","border-[0.5px] border-solid border-dbx-line-10",`
                shadow-[0_2px_4px_0_rgba(0,0,0,0.02),_0_4px_10px_0_rgba(0,0,0,0.03),_0_4px_16px_0_rgba(0,0,0,0.03)]
              `,`
                data-[state=closed]:animate-out
                data-[state=open]:animate-in
              `,`
                data-[state=closed]:fade-out-0
                data-[state=open]:fade-in-0
              `,`
                data-[state=closed]:zoom-out-95
                data-[state=open]:zoom-in-95
              `,"data-[side=bottom]:slide-in-from-top-2","data-[side=left]:slide-in-from-right-2","data-[side=right]:slide-in-from-left-2","data-[side=top]:slide-in-from-bottom-2",!P&&"!animate-none",k),style:{...S,...void 0!==w?{zIndex:w}:{}},forceMount:void 0,...j,...W,children:[n,_&&(0,c.jsx)(i.Eh,{className:(0,a.cn)("fill-white",g&&"data-[align=center]:block",null==$?void 0:$.className),style:null==$?void 0:$.style,width:null==$?void 0:$.width,height:null==$?void 0:$.height})]},`content${Z}`)})]})});p.displayName="DbxPopover";var v=n(416842),f=n(528732),m=n(26030),h=n(357912),_=n(693891);let g=e=>{let{title:t,content:n,icon:i,okText:o,cancelText:a,okType:s,cancelType:l,okButtonProps:u,cancelButtonProps:d,onConfirm:g,onCancel:y,closeOnEsc:b,onEscKeyDown:S,...k}=e,[w,T]=(0,r.useState)(e.visible||!1),[E,R]=(0,r.useState)(!1),[C,I]=(0,r.useState)(!1),x=(0,r.useRef)(null);(0,r.useEffect)(()=>{void 0!==e.visible&&T(e.visible)},[e.visible]),(0,r.useEffect)(()=>{let t=t=>{if("Escape"===t.key&&w&&!1!==e.closeOnEsc){if(e.onEscKeyDown){let n={...t,nativeEvent:t,currentTarget:t.currentTarget,target:t.target,bubbles:t.bubbles,cancelable:t.cancelable,defaultPrevented:t.defaultPrevented,preventDefault:t.preventDefault.bind(t),stopPropagation:t.stopPropagation.bind(t),isDefaultPrevented:()=>t.defaultPrevented,isPropagationStopped:()=>!1};e.onEscKeyDown(n)}T(!1)}};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[w,e.closeOnEsc,e.onEscKeyDown]);let N=(0,r.useCallback)(t=>{var n;void 0===e.visible&&T(t),null===(n=e.onVisibleChange)||void 0===n||n.call(e,t)},[e.disabled,e.visible,e.onVisibleChange]),M=async t=>{if(e.onConfirm){R(!0);try{let n=e.onConfirm(t);n instanceof Promise&&await n,void 0===e.visible&&T(!1)}catch(e){}finally{R(!1)}}else void 0===e.visible&&T(!1)},P=async t=>{if(e.onCancel){I(!0);try{let n=e.onCancel(t);n instanceof Promise&&await n,void 0===e.visible&&T(!1)}catch(e){}finally{I(!1)}}else void 0===e.visible&&T(!1)},A=e=>{switch(e){case"primary":case"tertiary":return null;case"danger":return"danger-filled";default:if(e)return e;return null}};return(0,c.jsx)(p,{trigger:"click",position:"bottomLeft",content:(()=>{var t,n,r;let i=void 0!==e.icon?e.icon:function(e){switch(e){case"error":return(0,c.jsx)(f.q,{className:"h-16 w-16"});case"success":return(0,c.jsx)(m.z,{className:"h-16 w-16"});case"warning":return(0,c.jsx)(h.A,{className:"h-16 w-16"});default:return(0,c.jsx)(_.x,{className:"h-16 w-16"})}}(e.iconType);return(0,c.jsxs)("div",{className:"flex max-w-[320px] min-w-[240px] flex-col",children:[(0,c.jsxs)("div",{className:"flex items-start",children:[i&&(0,c.jsx)("div",{className:"mr-8 flex h-22 w-16 flex-shrink-0 items-center justify-center",children:i}),(0,c.jsxs)("div",{className:"flex-grow",children:[e.title&&(0,c.jsx)("div",{className:"mb-4 text-14 leading-22 font-medium text-dbx-text-primary",children:e.title}),e.content&&(0,c.jsx)("div",{className:"mb-10 text-14 leading-22 font-normal text-dbx-text-primary",children:e.content})]})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("div",{className:"mr-4",children:e.extraOperation}),(0,c.jsxs)("div",{className:"flex flex-wrap justify-end gap-10",children:[e.cancelNode||(0,c.jsx)(v.Z,{type:"button",size:"sm",variant:"rectangle",color:A(e.cancelType||"grey-outline"),onClick:P,loading:C,className:`
                  max-w-full min-w-[52px] text-right break-normal wrap-break-word whitespace-normal
                `,...e.cancelButtonProps,ref:(null===(t=e.cancelButtonProps)||void 0===t?void 0:t.autoFocus)?x:void 0,children:(0,c.jsx)("div",{className:"text-right break-normal wrap-break-word whitespace-normal",children:e.cancelText||"\u53D6\u6D88"})}),e.confirmNode||(0,c.jsx)(v.Z,{size:"sm",variant:"rectangle",color:A(e.okType||"brand-filled"),type:"button",onClick:M,loading:E,className:`
                  max-w-full min-w-[52px] text-right break-normal wrap-break-word whitespace-normal
                `,...e.okButtonProps,ref:!(null===(n=e.cancelButtonProps)||void 0===n?void 0:n.autoFocus)&&(null===(r=e.okButtonProps)||void 0===r?void 0:r.autoFocus)?x:void 0,children:(0,c.jsx)("div",{className:"text-right break-normal wrap-break-word whitespace-normal",children:e.okText||"\u786E\u8BA4"})})]})]})]})})(),visible:w,onVisibleChange:N,motion:!1!==e.motion,className:"w-280 !px-[15.5px] !py-[15.5px] !pt-[13.5px]",style:{...e.style,boxShadow:"0 6px 16px -8px rgba(0, 0, 0, 0.08), 0 9px 28px 0 rgba(0, 0, 0, 0.05)"},...k,children:e.children},k.trigger||"click")}},817981:function(e,t,n){"use strict";n.d(t,{KM:function(){return r}});let r="cn";t.ZP={IS_DEV_MODE:!1,IS_DEV_LOCAL:!1,IS_PROD_ENV:!0,IS_BOE_ENV:!1,IS_TEST_ENV:!1,IS_LOCAL_ENV:false,BUILD_REGION:r,IS_OVERSEA:!!r&&"cn"!==r}},471549:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}}),n(429996);var r=n(339512),i=n(627394),o=(0,r.G)((0,i.jsx)(e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 28 28",...e,children:(0,i.jsx)("path",{d:"M14.007 28q-2.881 0-5.418-1.11a14.3 14.3 0 0 1-4.453-3.026 14.5 14.5 0 0 1-3.04-4.453Q0 16.875 0 13.993q0-2.868 1.095-5.404Q2.191 6.053 4.121 4.12A14.5 14.5 0 0 1 8.59 1.095Q11.124 0 13.993 0t5.404 1.095q2.536 1.096 4.467 3.026A14.2 14.2 0 0 1 26.89 8.59Q28 11.124 28 13.993q0 2.881-1.095 5.418a14.3 14.3 0 0 1-3.027 4.453 14.2 14.2 0 0 1-4.467 3.026Q16.876 28 14.007 28m.015-6.917q.518 0 .835-.317.332-.332.332-.836v-6.816l-.13-2.969 1.37 1.672 1.599 1.643q.316.33.807.331.475 0 .792-.303a.99.99 0 0 0 .332-.763q0-.475-.332-.807L14.944 7.22q-.433-.447-.922-.447-.476 0-.908.447L8.43 11.918q-.317.317-.317.807 0 .461.317.763.318.303.778.303.49 0 .807-.331l1.629-1.658 1.326-1.642-.116 2.954v6.816q0 .504.332.836.331.317.836.317"})}),{}))},744966:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}}),n(429996);var r=n(339512),i=n(627394),o=(0,r.G)((0,i.jsx)(e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,i.jsx)("path",{fill:"currentColor",d:"m3.543 8.883 7.042-7.047a2 2 0 0 1 2.828 0l7.043 7.046a1 1 0 0 1 0 1.415l-.701.701a1 1 0 0 1-1.414 0L13.3 5.956v15.792a1 1 0 0 1-1 1h-.99a1 1 0 0 1-1-1V6.342l-4.654 4.656a1 1 0 0 1-1.414 0l-.7-.7a1 1 0 0 1 0-1.415"})}),{}))},705513:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}}),n(429996);var r=n(339512),i=n(627394),o=(0,r.G)((0,i.jsx)(e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,i.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M16.182 21.06a1.5 1.5 0 0 1-2.121 0l-7.647-7.646a2 2 0 0 1 0-2.828l7.647-7.647a1.5 1.5 0 1 1 2.12 2.122L9.244 12l6.939 6.94a1.5 1.5 0 0 1 0 2.12",clipRule:"evenodd"})}),{}))},108564:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}}),n(429996);var r=n(339512),i=n(627394),o=(0,r.G)((0,i.jsx)(e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,i.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.74 2.94a1.5 1.5 0 0 1 2.12 0l7.647 7.646a2 2 0 0 1 0 2.828l-7.646 7.647a1.5 1.5 0 0 1-2.122-2.122L14.68 12l-6.94-6.94a1.5 1.5 0 0 1 0-2.12",clipRule:"evenodd"})}),{}))},334401:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}}),n(429996);var r=n(339512),i=n(627394),o=(0,r.G)((0,i.jsx)(e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,i.jsx)("path",{fill:"currentColor",d:"M18.874 7a4.002 4.002 0 0 1-7.748 0H3a1 1 0 0 1 0-2h8.126a4.002 4.002 0 0 1 7.748 0H21a1 1 0 1 1 0 2zM15 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4M12.874 19a4.002 4.002 0 0 1-7.748 0H3a1 1 0 1 1 0-2h2.126a4.002 4.002 0 0 1 7.748 0H21a1 1 0 1 1 0 2zM9 20a2 2 0 1 0 0-4 2 2 0 0 0 0 4"})}),{}))},304385:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}}),n(429996);var r=n(339512),i=n(627394),o=(0,r.G)((0,i.jsx)(e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,i.jsx)("path",{fill:"currentColor",d:"M9.218 17.41 19.83 6.796a.99.99 0 1 1 1.389 1.415c-3.545 3.425-4.251 4.105-11.419 11.074a.997.997 0 0 1-1.375.018c-1.924-1.801-3.709-3.568-5.573-5.43a.999.999 0 0 1 1.414-1.413z"})}),{}))},120433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}}),n(429996);var r=n(339512),i=n(627394),o=(0,r.G)((0,i.jsx)(e=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:[(0,i.jsx)("path",{fill:"url(#icon_filetype_colorful_code_svg__a)",d:"M7.283 6.42C7 6.976 7 7.704 7 9.16v13.68c0 1.456 0 2.184.283 2.74a2.6 2.6 0 0 0 1.137 1.137C8.976 27 9.704 27 11.16 27h9.68c1.456 0 2.184 0 2.74-.283a2.6 2.6 0 0 0 1.137-1.137c.283-.556.283-1.284.283-2.74V11l-6-6h-7.84c-1.456 0-2.184 0-2.74.283A2.6 2.6 0 0 0 7.283 6.42"}),(0,i.jsx)("path",{fill:"#153513",fillRule:"evenodd",d:"M16.024 12.595a.6.6 0 1 1 1.19.153l-1.246 9.72a.6.6 0 1 1-1.19-.152zm-2.6 1.98a.6.6 0 0 1 0 .85L11.348 17.5l2.076 2.076a.6.6 0 1 1-.848.848l-2.5-2.5a.6.6 0 0 1 0-.848l2.5-2.5a.6.6 0 0 1 .848 0m5.152 5a.6.6 0 1 0 .848.85l2.5-2.5a.6.6 0 0 0 0-.85l-2.5-2.5a.6.6 0 0 0-.848.85L20.65 17.5z",clipRule:"evenodd"}),(0,i.jsx)("path",{fill:"#fff",fillOpacity:.55,d:"m19 5 6 6h-1.84c-1.456 0-2.184 0-2.74-.283a2.6 2.6 0 0 1-1.137-1.137C19 9.024 19 8.296 19 6.84z"}),(0,i.jsx)("defs",{children:(0,i.jsxs)("linearGradient",{id:"icon_filetype_colorful_code_svg__a",x1:25,x2:3.556,y1:27,y2:22.867,gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#99D65C"}),(0,i.jsx)("stop",{offset:1,stopColor:"#4FC49D"})]})})]}),{}))},396284:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}}),n(429996);var r=n(339512),i=n(627394),o=(0,r.G)((0,i.jsx)(e=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:[(0,i.jsx)("path",{fill:"url(#icon_filetype_colorful_folder_svg__a)",d:"M6 10.5h20v12.069c0 1.066-.895 1.931-2 1.931H8c-1.105 0-2-.865-2-1.931z"}),(0,i.jsx)("path",{fill:"url(#icon_filetype_colorful_folder_svg__b)",d:"M6 8.5a2 2 0 0 1 2-2h4.775a4 4 0 0 1 1.404.255l2.642.99A4 4 0 0 0 18.225 8H24a2 2 0 0 1 2 2v.5H6z"}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("linearGradient",{id:"icon_filetype_colorful_folder_svg__a",x1:16,x2:16,y1:10.5,y2:24.5,gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#FFC60A"}),(0,i.jsx)("stop",{offset:1,stopColor:"#FFB14C"})]}),(0,i.jsxs)("linearGradient",{id:"icon_filetype_colorful_folder_svg__b",x1:16.5,x2:16.5,y1:6.5,y2:10.5,gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#FF9F4F"}),(0,i.jsx)("stop",{offset:1,stopColor:"#FD8521"})]})]})]}),{}))},364487:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}}),n(429996);var r=n(339512),i=n(627394),o=(0,r.G)((0,i.jsx)(e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:(0,i.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M16.009 5.5C10.198 5.5 5.5 10.192 5.5 15.997c0 4.64 3.01 8.568 7.185 9.958.523.105.714-.226.714-.504 0-.243-.017-1.077-.017-1.946-2.924.626-3.532-1.252-3.532-1.252-.47-1.216-1.166-1.529-1.166-1.529-.957-.643.07-.643.07-.643 1.06.07 1.618 1.078 1.618 1.078.939 1.598 2.453 1.147 3.062.869.087-.678.365-1.147.66-1.408-2.33-.244-4.784-1.147-4.784-5.18a4.1 4.1 0 0 1 1.079-2.814c-.104-.261-.47-1.339.104-2.781 0 0 .888-.278 2.888 1.077.857-.23 1.74-.346 2.628-.347.887 0 1.791.121 2.627.347 2-1.355 2.888-1.077 2.888-1.077.574 1.442.209 2.52.104 2.78.679.73 1.079 1.669 1.079 2.816 0 4.032-2.453 4.918-4.802 5.179.383.33.713.956.713 1.946 0 1.408-.017 2.538-.017 2.885 0 .278.192.609.713.504 4.176-1.39 7.186-5.318 7.186-9.958C26.517 10.192 21.802 5.5 16.009 5.5",clipRule:"evenodd"})}),{}))},954337:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}}),n(429996);var r=n(339512),i=n(627394),o=(0,r.G)((0,i.jsx)(e=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:[(0,i.jsx)("path",{fill:"url(#icon_filetype_colorful_pdf_svg__a)",fillRule:"evenodd",d:"M7.283 6.42C7 6.976 7 7.704 7 9.16v13.68c0 1.456 0 2.184.283 2.74a2.6 2.6 0 0 0 1.137 1.137C8.976 27 9.704 27 11.16 27h9.68c1.456 0 2.184 0 2.74-.283a2.6 2.6 0 0 0 1.137-1.137c.283-.556.283-1.284.283-2.74V11l-6-6h-7.84c-1.456 0-2.184 0-2.74.283A2.6 2.6 0 0 0 7.283 6.42",clipRule:"evenodd"}),(0,i.jsx)("path",{fill:"#fff",fillOpacity:.55,d:"m19 5 6 6h-1.84c-1.456 0-2.184 0-2.74-.283a2.6 2.6 0 0 1-1.137-1.137C19 9.024 19 8.296 19 6.84z"}),(0,i.jsx)("path",{fill:"#5A150F",d:"M20.115 19.97a3.8 3.8 0 0 1-2.2-.891 21.3 21.3 0 0 0-3.538 1.13c-.921 1.635-1.783 2.467-2.527 2.467-.148 0-.327-.03-.446-.119a.88.88 0 0 1-.505-.802c0-.268.06-1.011 2.884-2.23a21 21 0 0 0 1.575-3.687c-.356-.713-1.13-2.467-.594-3.36.178-.326.535-.505.921-.475.298 0 .595.149.773.387.387.535.357 1.665-.148 3.33a9 9 0 0 0 1.843 2.378c.624-.12 1.249-.208 1.873-.208 1.397.03 1.605.683 1.576 1.07 0 1.01-.982 1.01-1.487 1.01m-8.324 1.844.089-.03c.416-.148.743-.446.981-.832a2.35 2.35 0 0 0-1.07.862m3.954-8.919h-.09c-.029 0-.088 0-.118.03-.12.505-.03 1.04.178 1.516.178-.505.178-1.04.03-1.546m.208 4.31-.03.06-.03-.03a25 25 0 0 1-.891 2.022l.06-.03v.06a17 17 0 0 1 2.02-.595l-.029-.03h.09a9 9 0 0 1-1.19-1.456m4.043 1.577c-.267 0-.505 0-.773.059.297.149.595.208.892.238.208.03.416 0 .595-.06 0-.089-.12-.237-.714-.237"}),(0,i.jsx)("defs",{children:(0,i.jsxs)("linearGradient",{id:"icon_filetype_colorful_pdf_svg__a",x1:25,x2:3.556,y1:27,y2:22.867,gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#EE5872"}),(0,i.jsx)("stop",{offset:1,stopColor:"#FF7033"})]})})]}),{}))},182723:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}}),n(429996);var r=n(339512),i=n(627394),o=(0,r.G)((0,i.jsx)(e=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:[(0,i.jsx)("path",{fill:"#000",fillOpacity:.55,d:"M7.283 6.42C7 6.976 7 7.704 7 9.16v13.68c0 1.456 0 2.184.283 2.74a2.6 2.6 0 0 0 1.137 1.137C8.976 27 9.704 27 11.16 27h9.68c1.456 0 2.184 0 2.74-.283a2.6 2.6 0 0 0 1.137-1.137c.283-.556.283-1.284.283-2.74V11l-6-6h-7.84c-1.456 0-2.184 0-2.74.283A2.6 2.6 0 0 0 7.283 6.42"}),(0,i.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M16.024 12.595a.6.6 0 1 1 1.19.153l-1.246 9.72a.6.6 0 1 1-1.19-.152zm-2.6 1.98a.6.6 0 0 1 0 .85L11.348 17.5l2.076 2.076a.6.6 0 1 1-.848.848l-2.5-2.5a.6.6 0 0 1 0-.848l2.5-2.5a.6.6 0 0 1 .848 0m5.152 5a.6.6 0 1 0 .848.85l2.5-2.5a.6.6 0 0 0 0-.85l-2.5-2.5a.6.6 0 0 0-.848.85L20.65 17.5z",clipRule:"evenodd"}),(0,i.jsx)("path",{fill:"#fff",fillOpacity:.35,d:"m19 5 6 6h-1.84c-1.456 0-2.184 0-2.74-.283a2.6 2.6 0 0 1-1.137-1.137C19 9.024 19 8.296 19 6.84z"})]}),{}))},861581:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}}),n(429996);var r=n(339512),i=n(627394),o=(0,r.G)((0,i.jsx)(e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,i.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M20.22 3.78a6.076 6.076 0 0 0-8.592 0l-1.105 1.104A1.008 1.008 0 0 0 11.95 6.31l1.105-1.105a4.06 4.06 0 1 1 5.74 5.74l-1.177 1.179a1.008 1.008 0 0 0 1.426 1.425l1.178-1.177a6.076 6.076 0 0 0 0-8.592m-6.616 15.208a1.008 1.008 0 1 0-1.426-1.425l-1.232 1.232a4.059 4.059 0 1 1-5.74-5.74l1.159-1.16a1.008 1.008 0 0 0-1.426-1.426l-1.16 1.16a6.076 6.076 0 0 0 8.593 8.592zm-5.147-4.8a1.008 1.008 0 0 0 1.426 1.426l5.79-5.79a1.008 1.008 0 0 0-1.426-1.426z",clipRule:"evenodd"})}),{}))},357705:function(e,t,n){"use strict";n.d(t,{l:function(){return m}});var r=n(429996),i=n(483767),o=n(669160),a=n.n(o),s=n(640078),l=n(705513),c=n(108564),u=n(627394);let d=e=>{let{children:t,className:n}=e;return(0,u.jsx)("div",{"data-testid":"carousel-item",className:a()("carousel-item-RtH0tm",n,"carousel-item"),children:t})};var p={carousel:"carousel-Bpr0fm",arrow:"arrow-ETPwYD",large:"large-_rru2x",medium:"medium-HySdVP",small:"small-j54zXw","left-arrow":"left-arrow-zylR9I",leftArrow:"left-arrow-zylR9I","right-arrow":"right-arrow-apab3k",rightArrow:"right-arrow-apab3k","no-border":"no-border-fvQ3oY",noBorder:"no-border-fvQ3oY","carousel-content":"carousel-content-excXaO",carouselContent:"carousel-content-excXaO",left:"left-KHoFX5",right:"right-olWVfh","carousel-row":"carousel-row-ssUUv6",carouselRow:"carousel-row-ssUUv6"};let v=e=>{let{enableArrowBorder:t,enableArrowShalldow:n,className:r,onClick:i,arrowSize:o="small"}=e;return(0,u.jsx)("div",{className:a()(p["arrow-container"],{[p.left]:n},"arrow-container-left",p[o],{[p["no-border"]]:!t}),children:(0,u.jsx)("div",{onClick:i,className:a()(r,p["left-arrow"],p.arrow,p[o],"left-arrow",{[p["no-border"]]:!t}),children:(0,u.jsx)(l.Z,{style:{transform:"scaleX(-1)"}})})})},f=e=>{let{enableArrowBorder:t,enableArrowShalldow:n,className:r,onClick:i,arrowSize:o="small"}=e;return(0,u.jsx)("div",{className:a()(p["arrow-container"],{[p.right]:n},"arrow-container-right",p[o],{[p["no-border"]]:!t}),children:(0,u.jsx)("div",{onClick:i,className:a()(r,p["right-arrow"],p.arrow,p[o],"right-arrow",{[p["no-border"]]:!t}),children:(0,u.jsx)(c.Z,{})})})},m=(0,r.forwardRef)(function(e,t){let{rows:n=1,column:o,className:l,contentClassName:c,itemClassName:m,leftArrowClassName:h,rightArrowClassName:_,carouselRowClassName:g,children:y,enableArrowShalldow:b=!0,scrollStep:S=.5,enableArrowBorder:k=!0,onScroll:w,reportEvent:T,arrowSize:E="small",customUpdateArrowVisible:R,onScrollRight:C}=e,I=(0,r.useRef)(null),[x,N]=(0,r.useState)(!1),[M,P]=(0,r.useState)(!1),[A,$]=(0,r.useState)(0);if((0,r.useImperativeHandle)(t,()=>({itemsContainerRef:I})),!y)return null;let j=r.Children.map(y,(e,t)=>(0,u.jsx)(d,{className:m,children:e},t)),O=(0,i.Z)(j,null!=o?o:Math.ceil(((null==j?void 0:j.length)||0)/n)),F=Array.from(Array(n).fill(null)).map((e,t)=>(0,u.jsx)("div",{className:a()(p["carousel-row"],"carousel-row",g),children:O[t]},t)),{run:L}=(0,s.Z)(e=>null==T?void 0:T.slideReport(e),{wait:100,leading:!1,trailing:!0});return(0,r.useEffect)(()=>{var e,t;let n=()=>{if("function"==typeof R){let{shouldShowArrowLeft:e,shouldShowArrowRight:t}=R();N(e),P(t)}else r()},r=()=>{var e,t,n,r,i,o;let a=Math.ceil(null!==(r=null==I?void 0:null===(e=I.current)||void 0===e?void 0:e.scrollLeft)&&void 0!==r?r:0),s=Math.abs((null!==(i=null==I?void 0:null===(t=I.current)||void 0===t?void 0:t.scrollWidth)&&void 0!==i?i:0)-(null!==(o=null==I?void 0:null===(n=I.current)||void 0===n?void 0:n.clientWidth)&&void 0!==o?o:0)-a)>2;N(a>0),P(s)},i=()=>{var e,t;null==w||w(),n();let r=Math.ceil(null!==(t=null==I?void 0:null===(e=I.current)||void 0===e?void 0:e.scrollLeft)&&void 0!==t?t:0),i="left";r>A&&(i="right",null==C||C()),L(i),$(r)};return n(),null==I||null===(e=I.current)||void 0===e||e.addEventListener("scroll",i),null===(t=window)||void 0===t||t.addEventListener("resize",n),()=>{var e,t;null==I||null===(e=I.current)||void 0===e||e.removeEventListener("scroll",i),null===(t=window)||void 0===t||t.removeEventListener("resize",n)}},[y]),(0,u.jsxs)("div",{className:a()(p.carousel,"carousel",l),children:[x&&(0,u.jsx)(v,{onClick:()=>{var e,t,n,r;(null==I?void 0:null===(e=I.current)||void 0===e?void 0:e.scrollLeft)!==void 0&&(null==I?void 0:null===(t=I.current)||void 0===t?void 0:t.clientWidth)&&(null===(n=(r=I.current).scrollTo)||void 0===n||n.call(r,{left:Math.max(I.current.scrollLeft-I.current.clientWidth*S,0),behavior:"smooth"}))},enableArrowBorder:k,enableArrowShalldow:b,className:h,arrowSize:E}),(0,u.jsx)("div",{className:a()(p["carousel-content"],"carousel-content",{[p.left]:x,[p.right]:M},c),"data-left":x,"data-right":M,ref:I,children:F}),M&&(0,u.jsx)(f,{onClick:()=>{var e,t,n,r,i,o,a,s,l;let c=null!==(n=null==I?void 0:null===(e=I.current)||void 0===e?void 0:e.clientWidth)&&void 0!==n?n:0;if((null==I?void 0:null===(t=I.current)||void 0===t?void 0:t.scrollLeft)!==void 0&&c){let e=(null!==(s=null==I?void 0:null===(r=I.current)||void 0===r?void 0:r.scrollWidth)&&void 0!==s?s:0)-(null!==(l=null==I?void 0:null===(i=I.current)||void 0===i?void 0:i.clientWidth)&&void 0!==l?l:0);null===(o=(a=I.current).scrollTo)||void 0===o||o.call(a,{left:Math.min(I.current.scrollLeft+c*S,e),behavior:"smooth"}),null==C||C()}},enableArrowBorder:k,enableArrowShalldow:b,className:_,arrowSize:E})]})})},969343:function(e,t,n){"use strict";n.d(t,{P:function(){return d}});var r=n(429996),i=n(669160),o=n.n(i),a=n(19755),s=n(577831),l=n(199689),c={container:"container-cf56h_","size-small":"size-small-nZYpfk",sizeSmall:"size-small-nZYpfk","size-default":"size-default-aJfD9L",sizeDefault:"size-default-aJfD9L","size-large":"size-large-igoSHR",sizeLarge:"size-large-igoSHR","theme-primary":"theme-primary-npiB1U",themePrimary:"theme-primary-npiB1U","set-svg-full":"set-svg-full-C22evP",setSvgFull:"set-svg-full-C22evP",hoverable:"hoverable-JxlSLz",mobile:"mobile-Ghwvrd","theme-borderless":"theme-borderless-qJuY6h",themeBorderless:"theme-borderless-qJuY6h","theme-light":"theme-light-FoHT7n",themeLight:"theme-light-FoHT7n"},u=n(627394);let d=(0,r.forwardRef)(function(e,t){let{theme:n="borderless",setSvgFull:r=!0,hoverable:i=!0,className:d,onMouseEnter:p,...v}=e,{disabled:f=!1,size:m="default"}=v;return(0,u.jsx)(l.Z,{ref:t,className:o()(c.container,c[`size-${m}`],c[`theme-${n}`],`!w-40 !h-40 ${d}`,{"opacity-30":f,[c.hoverable]:i,[c.mobile]:(0,s.tq)(),[c["set-svg-full"]]:r}),...v,onMouseEnter:async e=>{(0,s.tq)()&&(0,s.bH)()&&await (0,a.GR)(100),null==p||p(e)}})})},248648:function(e,t,n){"use strict";n.d(t,{$z:function(){return a},Eo:function(){return l},k7:function(){return s}});var r=n(429996),i=n(993047),o=n(162957);let a=r.lazy(async()=>{let{MdBoxLazy:e}=await (0,i.C5)(()=>Promise.all([n.e("99366","high"),n.e("16667","high"),n.e("49295","high"),n.e("90215","high"),n.e("21658","high")]).then(n.bind(n,351368)));return{default:e}}),s=(0,o.y)(r.lazy(async()=>{let{Image:e}=await (0,i.C5)(()=>Promise.all([n.e("6973"),n.e("3066"),n.e("54033"),n.e("99366"),n.e("88445"),n.e("16667"),n.e("13189"),n.e("49295"),n.e("90215"),n.e("82090")]).then(n.bind(n,379192)));return{default:e}})),l=(0,o.y)(r.lazy(async()=>{let{Link:e}=await (0,i.C5)(()=>n.e("9623").then(n.bind(n,420372)));return{default:e}}))},182883:function(e,t,n){"use strict";n.d(t,{Dj:function(){return f},ck:function(){return p},_K:function(){return v},f0:function(){return d}});var r=n(669160),i=n.n(r),o=n(387834),a=n(928096),s=n(514447),l=n(153941),c=n(627394);let u={topLeft:"topRight",topRight:"topLeft",left:"right",right:"left",leftTop:"rightTop",leftBottom:"rightBottom",bottomLeft:"bottomRight",bottomRight:"bottomLeft",leftTopOver:"rightTopOver",rightTopOver:"leftTopOver",leftBottomOver:"rightBottomOver",rightBottomOver:"leftBottomOver"},d=e=>(0,a.Su)()&&e?u[e]:e,p=e=>{let{position:t,children:n,...r}=e,i=d(t);return(0,c.jsx)(s.r,{position:i,...r,children:n})},v=e=>{let{position:t,children:n,...r}=e,i=d(t);return(0,c.jsx)(o.Z,{position:i,...r,children:n})},f=e=>{let{position:t,children:n,className:r,...o}=e,a=d(t);return(0,c.jsx)(l.D,{position:a,...o,className:i()("dropdown-wrapper-eiDl5v",r),children:n})}},222334:function(e,t,n){"use strict";n.d(t,{N:function(){return v},V:function(){return m}});var r=n(429996),i=n(669160),o=n.n(i),a=n(577831),s=n(436450),l=n(442291),c=n(107675),u=n(928096),d={container:"container-kxxSU4","hide-scrollbar":"hide-scrollbar-O3Tbtt",hideScrollbar:"hide-scrollbar-O3Tbtt","custom-scrollbar":"custom-scrollbar-stmEIo",customScrollbar:"custom-scrollbar-stmEIo",flow:"flow-QnNhHl"},p=n(627394);let v=(0,r.forwardRef)(function(e,t){var n;let{theme:i="flow",customScrollbar:c=!0,hideScrollBar:v=!1,enableAltCtrlEnter:f=!1,...m}=e,{defaultValue:h,value:_,onChange:g,className:y,"data-testid":b,readOnly:S,onKeyDown:k}=m,w=(0,u.Su)(),[T,E]=(0,r.useState)(""),R=(0,s.Vr)(null!==(n=null!=_?_:T)&&void 0!==n?n:h,!0),C=(0,r.useRef)(null);return(0,r.useEffect)(()=>{C.current&&(C.current(),C.current=null)},[_]),(0,p.jsx)(l.Z,{ref:t,dir:w?R:"ltr",...m,...S?{readonly:!0,disabled:void 0}:{disabled:m.disabled},className:o()(d.container,d[i],y,{[d["custom-scrollbar"]]:c,[d["hide-scrollbar"]]:v}),onKeyDown:e=>{let t=e.nativeEvent.target;if(!t||!f){null==k||k(e);return}if(13===e.keyCode&&((0,a.V5)()&&e.altKey||(0,a.ED)()&&e.ctrlKey)){e.preventDefault();try{var n;let r=null!==(n=null!=_?_:T)&&void 0!==n?n:h,i=t.selectionStart,o=t.selectionEnd,a=`${r.substring(0,i)}
${r.substring(o)}`;C.current=()=>{t.selectionStart=i+1,t.selectionEnd=i+1},null==g||g(a,e)}catch(e){}}null==k||k(e)},onChange:(e,t)=>{E(e),null==g||g(e,t)},"data-testid":b})}),f=(0,c.Z)(v,{maintainCursor:!0}),m=e=>(0,p.jsx)(f,{...e})},153941:function(e,t,n){"use strict";n.d(t,{D:function(){return m}});var r,i,o=n(429996),a=n(669160),s=n.n(a),l=n(781610),c=n(169363),u=n(683955),d=n(786071),p=n(304385),v={"samantha-dropdown":"samantha-dropdown-sBBDZ9","icon-tick":"icon-tick-k4ah2S",active:"active-xe4Ufj"},f=n(627394);let m=o.forwardRef(function(e,t){return(0,f.jsx)(l.Z,{...e,type:"primary",ref:t,className:s()(v["samantha-dropdown"],e.className),children:e.children})});m.Menu=c.Z,m.Item=(r=u.Z,i=e=>{if(!o.isValidElement(e))return e;if("menuitem"===e.props.role&&-1!==e.props.className.indexOf("semi-dropdown-item-withTick")){let t=-1!==e.props.className.indexOf("semi-dropdown-item-active");return o.cloneElement(e,{...e.props,children:[...e.props.children.slice(1),(0,f.jsx)(p.Z,{className:s()(v["icon-tick"],{[v.active]:t})})]})}return e},class extends r{render(){return function e(t,n){return o.Children.map(t,t=>o.isValidElement(t)?(t.props.children&&(t=o.cloneElement(t,{...t.props,children:e(t.props.children,n)})),n(t)):t)}(super.render(),i)}}),m.Divider=d.Z,m.Title=l.Z.Title},514447:function(e,t,n){"use strict";n.d(t,{r:function(){return l}});var r=n(429996),i=n(669160),o=n.n(i),a=n(895337),s=n(627394);let l=r.forwardRef(function(e,t){return(0,s.jsx)(a.Z,{ref:t,...e,className:o()("samantha-popover-tTqfwm",e.className),children:e.children})})},928096:function(e,t,n){"use strict";n.d(t,{B$:function(){return o},Su:function(){return i}});let r=(0,n(429996).createContext)(null),i=()=>!1,o=r.Provider},960806:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var r=n(429996),i=n(474227);let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Z,n=(0,r.useRef)(e),o=t(n.current,e);return(0,r.useEffect)(()=>{o||(n.current=e)}),o?n.current:e}},436450:function(e,t,n){"use strict";n.d(t,{Vr:function(){return l}});var r=n(429996);let i=["ae","aeb","ajt","apc","apd","ar","ara","arb","arc","arq","ars","ary","arz","ave","avl","bal","bcc","bej","bft","bgn","bqi","brh","cja","ckb","cld","dcc","dgl","div","drw","dv","fa","fas","fia","fub","gbz","gjk","gju","glk","grc","gwc","gwt","haz","he","heb","hnd","hno","iw","ji","kas","kby","khw","ks","kvx","kxp","kzh","lad","lah","lki","lrc","luz","mde","mfa","mki","mvy","myz","mzn","nqo","oru","ota","otk","oui","pal","pbu","per","pes","phl","phn","pnb","pra","prd","prs","ps","pus","rhg","rmt","scl","sd","sdh","shu","skr","smp","snd","sog","swb","syr","tnf","trw","ug","uig","ur","urd","wni","xco","xld","xmn","xmr","xna","xpr","xsa","ydd","yi","yid","zdj"];var o=n(993047);let a=e=>RegExp(`^[^A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u{2B8}\u{300}-\u{590}\u{800}-\u{1FFF}\u{2C00}-\u{FB1C}\u{FDFE}-\u{FE6F}\u{FEFD}-\u{FFFF}]*[\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC]`).test(e),s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{let r=e.trim();if(!r)return t;let{franc:s}=await (0,o.C5)(()=>n.e("33441").then(n.bind(n,799021))),l=s(r,{minLength:20});if("und"===l)return a(r.charAt(0));return i.includes(l)}catch(e){return t}},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[n,i]=(0,r.useState)("ltr"),o=async()=>{i(await s(e,t)?"rtl":"ltr")};return(0,r.useEffect)(()=>{o()},[e,t]),n}},254531:function(e,t,n){"use strict";n.d(t,{HC:function(){return o},aK:function(){return i}});var r=n(577831);function i(e){return e?{"data-testid":e}:{}}let o=()=>(0,r.h4)().includes("E2E")},415643:function(e,t,n){"use strict";n.d(t,{O:function(){return l},Z:function(){return c}});var r=n(432626),i=n(550606),o=n(551450),a=n(627394);let s="",l=()=>{s&&o.pJ.close(s)},c=()=>{s=o.pJ.info({icon:(0,a.jsx)(i.Z,{spinning:!0,size:"middle"}),content:(0,r.X9)("enterprise_status_loading"),duration:0})}},981222:function(e,t,n){"use strict";n.d(t,{Lj:function(){return g},SE:function(){return h},W1:function(){return b},gS:function(){return m},mv:function(){return y},nw:function(){return S}});var r=n(210230),i=n(51679),o=n(398976),a=n(145874),s=n(993047),l=n(551450),c=n(967037),u=n(644367),d=n(82203),p=n(445097),v=n(123257),f=n(843857);let m=e=>{var t;return((0,v.Or)({type:null!==(t=e.passport_enterprise_user_type)&&void 0!==t?t:f.o.Normal}),d.h3.setState({userInfo:e,userInfoLoaded:!0}),null==e?void 0:e.user_id_str)?_(e.user_id_str):Promise.reject(Error("user_id_str is empty"))},h=()=>{d.h3.setState({userInfoLoaded:!0})},_=async(e,t)=>{if(!e)return Promise.reject(Error("user_id_str is empty"));let n=(0,c.zQ)({eventName:"get_profile_info",meta:{user_id:e}});try{let{data:t}=await i.UZ.ProfileInfo({visit_id:e});if(t){var r;return d.h3.setState({userProfile:{...null==t?void 0:t.profile_brief,loaded:!0,botCount:Number(null==t?void 0:null===(r=t.profile_bot_info)||void 0===r?void 0:r.total)||0}}),n.success(),null==t?void 0:t.profile_brief}n.error({reason:"no data"})}catch(r){if((0,o.k)(r)&&r.errorOption.code===a.S.USER_NOT_EXISTED.toString()){if(u.k.persist.info({eventName:"gen_user_profile_for_user_stay_on_chat_page",meta:{user_id:e}}),t)throw Error("get profile only get");0!==await g({entity_id:e,avatar_url:"",nickname:"",user_name:""})&&(d.h3.setState({userProfile:{loaded:!0}}),n.error({reason:"with update fail",error:r}))}else n.error({reason:"unhandle catch",error:r instanceof Error?r:Error(String(r))})}},g=async e=>{let t=(0,c.zQ)({eventName:"update_user_profile",meta:{user_id:e.entity_id}});try{t.addDurationPoint("start");let{code:n,msg:r,data:o}=await i.UZ.UpdateProfile(e);if(0===n&&(null==o?void 0:o.entity_id))return t.addDurationPoint("success"),t.success(),await _(null==o?void 0:o.entity_id),0;return r&&l.pJ.error(r),0===n?-1001:Number(n)}catch(n){if(t.error({reason:"update_user_profile_failed",error:n instanceof Error?n:Error(String(n))}),(0,o.k)(n)&&(e.nickname||!e.entity_id))return n.errorOption.message&&l.pJ.error(n.errorOption.message),(0,r.Z)(n.errorOption.code)?-1002:parseInt(n.errorOption.code,10);try{let n=await (0,s.xK)(()=>_(e.entity_id,!0),3,e=>800*e,(e,n)=>{t.updateMeta({retry:n,[`retry${n}`]:e})});if(null==n?void 0:n.entity_id)return t.updateMeta({retrySuccess:1}),0;throw Error("retry not entity_id")}catch(e){t.updateMeta({retrySuccess:0,retryFail:e})}return -1003}},y=()=>{d.h3.setState({userInfo:p.m.userInfo,userProfile:p.m.userProfile})},b=()=>{d.h3.setState({userProfile:p.m.userProfile})},S=async e=>{try{var t,n;let r=await Promise.all([i.UZ.UpdateProfile({entity_id:e,avatar_url:"",nickname:"",user_name:""}),i.UZ.UserHitProfileRegister()]);return(null==r?void 0:null===(n=r[1])||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.profile_enable)||!1}catch(e){return u.k.persist.error({eventName:"gen_user_default_profile_error",message:"[genUserDefaultProfile] genUserDefaultProfile failed",error:e instanceof Error?e:Error(String(e))}),!1}}},613802:function(e,t,n){"use strict";var r;n.d(t,{$V:function(){return l},NA:function(){return u},bC:function(){return s},iR:function(){return a},ny:function(){return i},pc:function(){return c},zy:function(){return o}});let i=e=>e<60?1:Math.floor(e/60),o=e=>{let t=new Date,n=t.getFullYear()-e.getFullYear(),r=t.getMonth()-e.getMonth();return(r<0||0===r&&t.getDate()<e.getDate())&&n--,n},a=((r={})[r.panel=0]="panel",r[r.dialog=1]="dialog",r);class s extends Error{}class l extends Error{}let c=e=>e instanceof l,u=e=>e instanceof s},692800:function(e,t,n){"use strict";n.d(t,{A0:function(){return c},Fh:function(){return d},Fu:function(){return p},VQ:function(){return s},W7:function(){return a},YA:function(){return u},YM:function(){return o},xw:function(){return l}});var r,i=n(444614);let o=((r={})[r.NOT_LOGGED_IN=13]="NOT_LOGGED_IN",r[r.APP_NO_ACCESS=16]="APP_NO_ACCESS",r[r.ALREADY_BIND_CONFLICT=1041]="ALREADY_BIND_CONFLICT",r[r.TARGET_BIND_CONFLICT=1030]="TARGET_BIND_CONFLICT",r[r.NO_BIND_MOBILE=1342]="NO_BIND_MOBILE",r[r.LAST_PASSPORT=1038]="LAST_PASSPORT",r[r.PHONE_BIND_CONFLICT=1057]="PHONE_BIND_CONFLICT",r[r.PHONE_ALREADY_REGISTERED=1001]="PHONE_ALREADY_REGISTERED",r[r.VERIFY_CODE_EXCEED=1206]="VERIFY_CODE_EXCEED",r[r.CSRF_TOKEN_ERROR=2035]="CSRF_TOKEN_ERROR",r[r.BIND_TOO_OFTEN=2068]="BIND_TOO_OFTEN",r[r.DOUBAO_NON_CN_MOBILE_REGISTRY_BAN=0x128bf1a21]="DOUBAO_NON_CN_MOBILE_REGISTRY_BAN",r[r.DOUBAO_APPLE_REGISTRY_BAN=0x128bf1a22]="DOUBAO_APPLE_REGISTRY_BAN",r);class a extends Error{static from(e){var t,n;let r=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.description,i=null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.error_code,o=null==e?void 0:e.data;return new a(i,r?String(r):void 0,o)}constructor(e,t,n){super(t),this.code=e,this.description=t,this.raw=n}}let s=e=>e instanceof a,l=e=>s(e)&&1454===e.code,c=e=>s(e)&&2002===e.code,u=e=>"CLOSE_CAPTCHA"===e,d=e=>!(0,i.Z)(null==e?void 0:e.description)&&!(0,i.Z)(null==e?void 0:e.error_code),p=e=>(null==e?void 0:e.message)==="error"},350538:function(e,t,n){"use strict";n.d(t,{IC:function(){return i},N6:function(){return a},dM:function(){return s},vd:function(){return o}});var r=n(913602);let i="flow_web_has_login",o=()=>{r.yQ.setItem(i,"true")},a=()=>{r.yQ.removeItem(i)},s=()=>"true"===r.yQ.getItem(i)},788265:function(e,t,n){"use strict";n.d(t,{Bv:function(){return l},G5:function(){return s},OV:function(){return d},_e:function(){return a},sn:function(){return c},xF:function(){return u}});var r=n(644367);function i(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o extends Error{constructor(e={}){let{message:t,appleError:n}=e;super(t),this.options=e,i(this,"name","apple_error"),i(this,"appleError",void 0),this.appleError=n}}class a extends o{constructor(...e){super(...e),i(this,"name","user_canceled_error")}}class s extends Error{constructor(...e){super(...e),i(this,"name","workspace_user_select_cancel_error")}}let l=e=>{let t=e instanceof s;return r.k.persist.log({eventName:"workspace_user_select_cancel_error",meta:{result:t}}),t},c=e=>e instanceof a;class u extends o{constructor(...e){super(...e),i(this,"name","blocked_by_browser_error")}}let d=e=>e instanceof u},847758:function(e,t,n){"use strict";var r,i,o,a,s;n.r(t),n.d(t,{ArtifactMetaStatus:function(){return l},ArtifactResourceType:function(){return c},ArtifactSourceType:function(){return u},ArtifactStatus:function(){return d},ArtifactType:function(){return p}});let l=((r={})[r.Undefined=0]="Undefined",r[r.Normal=1]="Normal",r[r.Deleted=2]="Deleted",r),c=((i={})[i.WriteDoc=1]="WriteDoc",i[i.Pages=2]="Pages",i[i.CanvasPage=3]="CanvasPage",i[i.StepWritingPage=4]="StepWritingPage",i[i.Code=5]="Code",i[i.StepWritingOtterPage=6]="StepWritingOtterPage",i),u=((o={})[o.Conversation=1]="Conversation",o[o.MobileMainConversation=2]="MobileMainConversation",o),d=((a={})[a.Init=0]="Init",a[a.Generating=1]="Generating",a[a.Generated=2]="Generated",a[a.Deleted=3]="Deleted",a[a.Terminal=4]="Terminal",a),p=((s={})[s.Page=1]="Page",s)},227768:function(e,t,n){"use strict";var r,i;n.d(t,{dm:function(){return o},py:function(){return a}});let o=((r={})[r.User=0]="User",r[r.Coco=1]="Coco",r[r.GuanFang=2]="GuanFang",r[r.CocoWeb=3]="CocoWeb",r),a=((i={})[i.EntityType_Unknown=0]="EntityType_Unknown",i[i.EntityType_File=1]="EntityType_File",i[i.EntityType_Image=2]="EntityType_Image",i)},317774:function(e,t,n){"use strict";var r;n.d(t,{b:function(){return i}});let i=((r={})[r.Unknown=0]="Unknown",r[r.Stream=1]="Stream",r[r.Normal=2]="Normal",r)},669887:function(e,t,n){"use strict";var r,i;n.d(t,{R3:function(){return o},_m:function(){return a}});let o=((r={})[r.AnswerWithSuggest=1]="AnswerWithSuggest",r[r.AnswerWithVideo=2]="AnswerWithVideo",r[r.HighlightKeyword=3]="HighlightKeyword",r[r.OptOutVoice=4]="OptOutVoice",r[r.PersonalizedRecommend=5]="PersonalizedRecommend",r[r.SaveChatHistory=6]="SaveChatHistory",r[r.InputSuggest=10]="InputSuggest",r[r.UserAuth=30]="UserAuth",r[r.UseOgfSwitch=50]="UseOgfSwitch",r[r.CopilotSwitch=60]="CopilotSwitch",r[r.AllowTraining=70]="AllowTraining",r[r.RelatedVideo=80]="RelatedVideo",r[r.FaceMemorySwitch=90]="FaceMemorySwitch",r[r.ActionBarSwitch=200]="ActionBarSwitch",r[r.ActionBarSwitch_DoubaoSpeak=201]="ActionBarSwitch_DoubaoSpeak",r),a=((i={})[i.Startup=1]="Startup",i[i.Polling=2]="Polling",i[i.Notified=3]="Notified",i)},182663:function(e,t,n){"use strict";var r,i,o,a,s,l;n.d(t,{$q:function(){return d},Hb:function(){return c},Hs:function(){return p},VP:function(){return u},X1:function(){return v},_g:function(){return f}});let c=((r={})[r.StatusDefault=0]="StatusDefault",r[r.StatusCompiling=1]="StatusCompiling",r[r.StatusFail=2]="StatusFail",r[r.StatusSuccess=3]="StatusSuccess",r),u=((i={})[i.Init=0]="Init",i[i.Access=1]="Access",i[i.Reject=2]="Reject",i),d=((o={})[o.MultiFileContext=1]="MultiFileContext",o[o.DirectoryContext=2]="DirectoryContext",o[o.Artifacts=3]="Artifacts",o[o.SingleFileContext=4]="SingleFileContext",o),p=((a={})[a.CodeTypeArtifacts=1]="CodeTypeArtifacts",a[a.CodeTypeRaw=2]="CodeTypeRaw",a),v=((s={})[s.Default=0]="Default",s[s.CodeBlock=1]="CodeBlock",s[s.DevelopMode=2]="DevelopMode",s),f=((l={})[l.Repository=1]="Repository",l[l.File=2]="File",l[l.Directory=3]="Directory",l)},57005:function(e,t,n){"use strict";var r,i,o,a,s,l,c,u,d,p,v,f,m;n.d(t,{$Q:function(){return b},Be:function(){return g},Dh:function(){return I},Jq:function(){return C},Lq:function(){return w},Nz:function(){return T},Pu:function(){return _},Re:function(){return R},Th:function(){return S},ce:function(){return h},cj:function(){return y},e$:function(){return E},p1:function(){return k}});let h=((r={})[r.Processing=0]="Processing",r[r.Enable=1]="Enable",r[r.Disable=2]="Disable",r[r.Init=3]="Init",r),_=((i={})[i.from_upload=0]="from_upload",i[i.from_share=1]="from_share",i[i.from_conversation=2]="from_conversation",i),g=((o={})[o.all=0]="all",o[o.doc=1]="doc",o[o.image=2]="image",o[o.media=3]="media",o[o.chart=4]="chart",o[o.ppt=5]="ppt",o[o.code_project=6]="code_project",o[o.meeting_minutes=7]="meeting_minutes",o[o.archive=8]="archive",o[o.others=100]="others",o),y=((a={})[a.Default=0]="Default",a[a.Desc=1]="Desc",a[a.Asc=2]="Asc",a),b=((s={})[s.Default=0]="Default",s[s.LastUsedTime=1]="LastUsedTime",s[s.Name=2]="Name",s[s.CreateTime=3]="CreateTime",s[s.Size=4]="Size",s[s.Source=5]="Source",s[s.FileType=6]="FileType",s[s.UpdateTime=7]="UpdateTime",s),S=((l={})[l.Default=0]="Default",l[l.Documents=1]="Documents",l[l.ConversationFiles=2]="ConversationFiles",l[l.MeetingMinutes=3]="MeetingMinutes",l[l.CodeArtifact=4]="CodeArtifact",l[l.Creation=5]="Creation",l),k=((c={})[c.AI=1]="AI",c),w=((u={})[u.Default=0]="Default",u[u.CodeIndependentSite=1]="CodeIndependentSite",u),T=((d={})[d.Default=0]="Default",d[d.Otter=1]="Otter",d),E=((p={})[p.Init=0]="Init",p[p.Pass=1]="Pass",p[p.Reject=2]="Reject",p[p.Processing=3]="Processing",p[p.Failed=51]="Failed",p),R=((v={})[v.AICreate=1]="AICreate",v[v.FromConversation=2]="FromConversation",v[v.FromUpload=3]="FromUpload",v[v.FromShare=4]="FromShare",v),C=((f={})[f.UnKnown=0]="UnKnown",f[f.Directory=1]="Directory",f[f.File=2]="File",f[f.Link=3]="Link",f[f.Image=4]="Image",f[f.Pages=5]="Pages",f[f.Video=6]="Video",f[f.Audio=7]="Audio",f[f.MeetingMinutes=8]="MeetingMinutes",f[f.CodeArtifact=9]="CodeArtifact",f[f.CodeProject=10]="CodeProject",f),I=((m={})[m.Unknown=0]="Unknown",m[m.Available=1]="Available",m[m.NoEncodedStream=2]="NoEncodedStream",m[m.ReviewFailed=3]="ReviewFailed",m)},382203:function(e,t,n){"use strict";var r,i;n.d(t,{W:function(){return o},d:function(){return a}});let o=((r={})[r.Declined=0]="Declined",r[r.Accepted=1]="Accepted",r),a=((i={})[i.Phone=0]="Phone",i)},121557:function(e,t,n){"use strict";var r;n.d(t,{E:function(){return i}});let i=((r={})[r.TeamWorkspace=0]="TeamWorkspace",r[r.PersonalWorkspace=1]="PersonalWorkspace",r)},698441:function(e,t,n){"use strict";var r;n.d(t,{y:function(){return i}});let i=((r={}).NoAccess="no access",r.NetworkError="network error",r.RegionRestricted="region restricted",r.DoubaoRegionBan="doubao region ban",r.Default="Default",r)},338212:function(e,t,n){"use strict";n.d(t,{y:function(){return f},U:function(){return b}});var r,i=n(878533);let o="https?|s?ftp|ftps|nfs|ssh",a="\\b([/#?][\\-A-Z0-9@:%_+.~#?&'/=;$,!\\*\\[\\]\\(\\){}^|<>]*[-A-Z0-9&@#/%=~\\(\\)_|]?)?",s=RegExp(`((((${o})://)?(${/localhost(:[0-9]{2,5})?/.source}))|(((${o})://)(${/(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}(2[0-4][0-9]|25[0-5]|1[0-9]{2}|[1-9][0-9]|[0-9])(:[0-9]{2,5})?/.source})))${a}`,"gi"),l="([-A-Z0-9%_+~#@][\\-A-Z:0-9%_+~#@]{0,256}\\.){1,50}",c="[a-z\\-]{2,15}",u=RegExp(`(((${o}):\\/\\/${l}${c})|(${l}(com|cn|tk|de|net|org|uk|info|nl|ru|hk)))(:[0-9]{2,5})?${a}`,"gi"),d="[\\w.!#$%&'*+-/=?^_\\`{|}~]{1,2000}@[A-Za-z0-9_.-]+\\.",p=RegExp(`^(?!data:)((mailto:${d}${c})|(${d}(com|org|net|int|edu|gov|mil|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gh|gi|gl|gm|gn|gp|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|site|top|wtf|xxx|xyz|cloud|engineering|help|one)))\\b`,"gi"),v=RegExp(`(${s.source})|(${u.source})|(${p.source})`,"gi"),f=((r={})[r.text=0]="text",r[r.link=1]="link",r),m={"(":")","[":"]","{":"}","<":">"},h=Object.keys(m),_=Object.values(m),g=[".",",","!","?","'",":",";","@","#"],y=e=>{let t=-1,n=[];for(let r=0;r<e.length;++r){let i=e[r];if(h.includes(i))n.push({char:i,index:r});else if(_.includes(i)){if(n.length){let{char:e}=n[n.length-1];if(i===m[e])n.pop();else{({index:t}=n[0]);break}}else{t=r;break}}}for(n.length&&({index:t}=n[0]),-1===t&&(t=e.length);t>1&&g.includes(e[t-1]);)t--;return e.slice(0,t)},b=e=>{let t=[],n=0;for(v.lastIndex=0;;){let r=v.exec(e);if(!r)break;let{index:o,0:a}=r,s=e.slice(n,o);if(s&&t.push({type:f.text,text:s}),a){let e=/^(@|#|\+|-|%)+/.exec(a);if(e)t.push({type:f.text,text:e[0]}),n=r.index+e[0].length,v.lastIndex=n;else{let e=y(a);if(e)i.validate(e)?t.push({type:f.text,text:e}):t.push({type:f.link,url:e}),n=r.index+e.length,v.lastIndex=n;else{let e=a.slice(0,1);t.push({type:f.text,text:e}),n=r.index+e.length,v.lastIndex=n}}}}return n!==e.length&&t.push({type:f.text,text:e.slice(n)}),t}},28190:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return new Promise((i,o)=>{e().then(i).catch(a=>{setTimeout(()=>{if(1===t){o(a);return}r(e,t-1,n).then(i,o)},n)})})}},31505:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var r=n(975349);let i=(0,r.Fo)(()=>r.Wo.language)},241637:function(e,t,n){"use strict";n.d(t,{BE:function(){return u},D0:function(){return v},Xy:function(){return l},aO:function(){return d},vM:function(){return p},w$:function(){return c}});var r=n(993047),i=n(87795),o=n(913602),a=n(55992),s=n(975349);let l=e=>e.startsWith("zh"),c=async e=>{try{if(!(e=e.trim()))return;let{franc:t}=await (0,r.C5)(()=>n.e("33441").then(n.bind(n,799021))),i=t(e);return a.bE[i]}catch(e){return}},u=e=>{f(e)},d=()=>o.yQ.getItem(a.cR)||"zh",p=e=>((0,i.d)(a.cR,e,{daysToLive:365}),o.yQ.setItem(a.cR,e)),v=(0,s.Fo)(e=>{if(!s.tv)throw Error("@flow-web/l1-arch-business-i18n changeLanguage not initialized.");return(0,s.tv)({locale:e})}),f=(0,s.Fo)(e=>{s.Wo.setLang(e)})},912763:function(e,t,n){"use strict";var r,i;n.d(t,{l:function(){return o},x:function(){return a}});let o=((r={}).Success="success",r.Processing="processing",r.Failed="failed",r),a=((i={}).Success="success",i.Processing="processing",i.Failed="failed",i)},997213:function(e,t,n){"use strict";n.d(t,{$E:function(){return s},Cy:function(){return u},Dt:function(){return c},i1:function(){return a},kK:function(){return i},ww:function(){return l},xp:function(){return o}});var r=n(474227);let i=e=>"type"in e,o=e=>"paragraph"===e.type,a=e=>"labeled_input"===e.type,s=e=>"labeled_select"===e.type,l=e=>e.map(e=>{if(i(e)){if(s(e))return e.value;let{children:t}=e,n=t.map(e=>l([e])).join("");return o(e)?`${n}
`:n}return e.text}).join(""),c=()=>"undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),u=(e,t)=>(0,r.Z)(JSON.parse(JSON.stringify(e)),JSON.parse(JSON.stringify(t)))},12107:function(e,t,n){"use strict";n.d(t,{I3:function(){return s},Iz:function(){return c},Z6:function(){return u},dz:function(){return a},on:function(){return l},yW:function(){return o}});var r=n(106307),i=n(997213);let o=e=>e.type===r.f.Select,a=e=>e.type===r.f.Text,s=e=>e.type===r.f.Placeholder,l=e=>e.map((t,n)=>{if((0,i.kK)(t)){if((0,i.xp)(t)){let{children:i}=t;return l(i).concat(n===e.length-1?[]:[{type:r.f.Text,text:"\n"}])}if((0,i.i1)(t)){let{children:e,placeholder:n,key:o,clickable:a}=t;return{type:r.f.Placeholder,placeholder:n,text:(0,i.ww)(e),key:o,clickable:a}}if((0,i.$E)(t)){let{value:e,options:n,title:i,key:o}=t;return{type:r.f.Select,title:i,key:o,optionList:n,value:e}}}return{type:r.f.Text,text:"text"in t?t.text:""}}).flat(),c=e=>{if(!e.length)return[{type:"paragraph",children:[{text:""}]}];let t=[{type:"paragraph",children:[]}];for(let n of e)if(n.type===r.f.Text&&"\n"===n.text)t.push({type:"paragraph",children:[]});else if(s(n)){let{text:e,placeholder:r,key:i,clickable:o}=n;t[t.length-1].children.push({type:"labeled_input",children:[{text:e}],placeholder:r,key:i,clickable:o})}else if(o(n)){let{optionList:e,value:r,title:i,key:o}=n;t[t.length-1].children.push({type:"labeled_select",title:i,key:o,options:e,value:r,children:[{text:""}]})}else if(a(n)){let{text:e}=n;t[t.length-1].children.push({text:e})}return t},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{stringifyItem:n}=t;return e.map(e=>{if(s(e))return e.text||e.placeholder;if(o(e)){var t;return null!==(t=null==n?void 0:n(e))&&void 0!==t?t:e.value}if(a(e))return e.text}).join("")}},245966:function(e,t,n){"use strict";n.d(t,{f:function(){return a}});var r=n(429996),i=n(923362),o=n(944406);let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[n,a]=(0,r.useState)(!0),{key:s,defaultValue:l,autoRefresh:c=!1,isServerAb:u=!1}=e,[d=l,p]=(0,i.Z)(`libra_setting_${s}`,{defaultValue:l}),v=(0,r.useCallback)(async()=>{p(await (0,o.gN)(s,l,{isServerAb:u}))},[s,l]);return(0,r.useEffect)(()=>{a(!0),v(),a(!1)},t),(0,r.useEffect)(()=>{if(c)return(0,o.d)(v)},[c]),{loading:n,value:d}}},58070:function(e,t,n){"use strict";var r,i;n.d(t,{kZ:function(){return s},cj:function(){return c},wV:function(){return l},ZZ:function(){return a}});let o=((r={})[r.Unknown=0]="Unknown",r[r.File=1]="File",r[r.Image=2]="Image",r[r.Audio=3]="Audio",r[r.Video=4]="Video",r[r.URL=5]="URL",r),a=((i={}).COMMON_IMAGE="image/png, image/jpeg, image/jpg",i.ALL_IMAGE="image/*",i.VIDEO="video/*",i.ALL="*",i),s={Image:o.Image,File:o.File,Video:o.Video},l={[o.Image]:"image",[o.File]:"object",[o.Video]:"video"},c={FEEDBACK:"20",BOT_CHAT:"5",AI_SPACE:"19"}},723998:function(e,t,n){"use strict";n.d(t,{w:function(){return r}}),n(627394);let r=()=>null},841505:function(e,t,n){"use strict";n.d(t,{L5:function(){return C}});var r=n(529496),i=n(429996),o=n(986091),a=n(524518),s=n(777573),l=n.n(s),c=n(81307),u=n(67864),d=n(93708),p=n(17135),v=n(640078),f=n(484326),m=n(199689),h=n(606174),_=n(339512),g=n(627394),y=(0,_.G)((0,g.jsx)(e=>(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",viewBox:"0 0 22 22",...e,children:(0,g.jsx)("path",{fill:"#fff",d:"M3.289 9.878q0-1.311.49-2.457a6.2 6.2 0 0 1 1.36-2.017 6.4 6.4 0 0 1 2.018-1.362 6.1 6.1 0 0 1 2.457-.498q1.32 0 2.465.498 1.146.49 2.017 1.362a6.2 6.2 0 0 1 1.361 2.017q.49 1.146.49 2.457 0 1.046-.323 2a6.1 6.1 0 0 1-.914 1.727l3.71 3.719q.142.158.217.348.075.192.074.39 0 .307-.132.54a.95.95 0 0 1-.366.374 1 1 0 0 1-.53.14 1.2 1.2 0 0 1-.408-.074.9.9 0 0 1-.348-.216l-3.736-3.744a6.4 6.4 0 0 1-1.668.83q-.905.3-1.91.3a6.2 6.2 0 0 1-2.456-.49A6.4 6.4 0 0 1 5.14 14.36a6.4 6.4 0 0 1-1.362-2.017 6.2 6.2 0 0 1-.49-2.465m1.51 0q0 .996.374 1.876A4.9 4.9 0 0 0 6.21 13.29q.665.656 1.536 1.029a4.7 4.7 0 0 0 1.868.373 4.7 4.7 0 0 0 1.867-.373 4.8 4.8 0 0 0 1.536-1.03 4.75 4.75 0 0 0 1.411-3.412q0-.995-.373-1.867a4.7 4.7 0 0 0-1.038-1.535 4.7 4.7 0 0 0-1.536-1.038 4.7 4.7 0 0 0-1.867-.374 4.7 4.7 0 0 0-1.868.374A4.9 4.9 0 0 0 6.21 6.475q-.663.656-1.037 1.535a4.7 4.7 0 0 0-.374 1.868m2.798.598a.595.595 0 0 1-.424-1.013.58.58 0 0 1 .424-.183h4.042q.249 0 .424.183a.595.595 0 0 1-.423 1.013z"})}),{})),b=(0,_.G)((0,g.jsx)(e=>(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",viewBox:"0 0 22 22",...e,children:(0,g.jsx)("path",{fill:"#fff",d:"M3.289 9.878q0-1.311.49-2.457a6.2 6.2 0 0 1 1.36-2.017 6.4 6.4 0 0 1 2.018-1.362 6.1 6.1 0 0 1 2.457-.498q1.32 0 2.465.498 1.146.49 2.017 1.362a6.2 6.2 0 0 1 1.361 2.017q.49 1.146.49 2.457 0 1.046-.323 2a6.1 6.1 0 0 1-.914 1.727l3.71 3.719q.142.158.217.348.075.192.074.39 0 .307-.132.54a.95.95 0 0 1-.366.374 1 1 0 0 1-.53.14 1.2 1.2 0 0 1-.408-.074.9.9 0 0 1-.348-.216l-3.736-3.744a6.4 6.4 0 0 1-1.668.83q-.905.3-1.91.3a6.2 6.2 0 0 1-2.456-.49A6.4 6.4 0 0 1 5.14 14.36a6.4 6.4 0 0 1-1.362-2.017 6.2 6.2 0 0 1-.49-2.465m1.51 0q0 .996.374 1.876A4.9 4.9 0 0 0 6.21 13.29q.665.656 1.536 1.029a4.7 4.7 0 0 0 1.868.373 4.7 4.7 0 0 0 1.867-.373 4.8 4.8 0 0 0 1.536-1.03 4.75 4.75 0 0 0 1.411-3.412q0-.995-.373-1.867a4.7 4.7 0 0 0-1.038-1.535 4.7 4.7 0 0 0-1.536-1.038 4.7 4.7 0 0 0-1.867-.374 4.7 4.7 0 0 0-1.868.374A4.9 4.9 0 0 0 6.21 6.475q-.663.656-1.037 1.535a4.7 4.7 0 0 0-.374 1.868m2.2 0q0-.249.174-.423a.58.58 0 0 1 .424-.175h1.42V7.86q0-.248.173-.423a.57.57 0 0 1 .432-.182q.249 0 .415.183a.58.58 0 0 1 .174.423v1.42h1.428q.249 0 .424.174a.58.58 0 0 1 .174.423.58.58 0 0 1-.175.423.58.58 0 0 1-.423.175h-1.428v1.427a.58.58 0 0 1-.174.424.56.56 0 0 1-.415.166.6.6 0 0 1-.432-.166.58.58 0 0 1-.174-.424v-1.427h-1.42a.58.58 0 0 1-.423-.175A.58.58 0 0 1 7 9.878"})}),{})),S=(0,_.G)((0,g.jsx)(e=>(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",viewBox:"0 0 22 22",...e,children:(0,g.jsx)("path",{fill:"#fff",d:"M10.992 4.35q.348 0 .564.224.224.216.224.572v7.596l-.074 1.66 2.224-2.424 1.685-1.66a.8.8 0 0 1 .25-.166.8.8 0 0 1 .315-.067q.33 0 .54.225a.74.74 0 0 1 .215.547.7.7 0 0 1-.066.3 1 1 0 0 1-.191.281l-5.097 5.08a.8.8 0 0 1-.274.191.77.77 0 0 1-.63 0 .9.9 0 0 1-.275-.19l-5.096-5.08a1.2 1.2 0 0 1-.191-.283.7.7 0 0 1-.067-.299q0-.33.216-.547a.73.73 0 0 1 .548-.225q.158 0 .307.067.15.058.257.166l1.686 1.66 2.216 2.432-.075-1.668V5.146q0-.356.224-.572a.77.77 0 0 1 .565-.224M5.746 16.76H16.23q.331 0 .547.223a.74.74 0 0 1 .216.548.78.78 0 0 1-.216.565.73.73 0 0 1-.547.224H5.746a.72.72 0 0 1-.54-.224.78.78 0 0 1-.216-.565q0-.332.216-.548a.72.72 0 0 1 .54-.224"})}),{})),k={"icon-wrapper":"icon-wrapper-Do9ktU",iconWrapper:"icon-wrapper-Do9ktU","button-icon":"button-icon-Knx0dc",buttonIcon:"button-icon-Knx0dc","zoom-wrapper":"zoom-wrapper-FP683L",zoomWrapper:"zoom-wrapper-FP683L",divider:"divider-zOMhyI"};let w=e=>t=>!!t&&[t.image_thumb,t.image_thumb_ori,t.image_thumb_raw,t.image_ori,t.image_raw,t.image_ori_raw,t.preview_img,t.image_preview].some(t=>(null==t?void 0:t.url)===e),T=e=>{let{image_preview:t,preview_img:n}=e||{};return(null==t?void 0:t.url)?t:n},E=e=>{let{onZoomOut:t,onZoomIn:n,onDownload:r,disableDownload:i}=e;return(0,g.jsxs)("div",{className:k["zoom-wrapper"],children:[(0,g.jsx)(m.Z,{className:k["button-icon"],icon:(0,g.jsx)(y,{className:k["icon-wrapper"]}),type:"tertiary",onClick:()=>{null==t||t()}}),(0,g.jsx)(m.Z,{className:k["button-icon"],icon:(0,g.jsx)(b,{className:k["icon-wrapper"]}),type:"tertiary",onClick:()=>{null==n||n()}}),!!r&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(h.Z,{layout:"vertical",className:k.divider}),(0,g.jsx)(m.Z,{className:k["button-icon"],icon:(0,g.jsx)(S,{className:k["icon-wrapper"]}),type:"tertiary",onClick:r,disabled:i})]})]})},R=e=>{var t;let n=e.split("?")[0],r=n.substring(n.lastIndexOf(".")+1);null===(t=l().saveAs)||void 0===t||t.call(l(),e,`${new Date().getTime()}.${r}`)},C=function(e,t,n){let{conversationId:s,messageId:l,botId:m,chatType:h,conversationType:_,skillId:y}=e,b=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{reportImageShow:S=!0}=b,[C,I]=(0,i.useState)([]),[x,N]=(0,i.useState)(),M=(0,i.useRef)(null),P=(0,i.useRef)(0),A=(0,i.useMemo)(()=>C.map(e=>{var n,r,i;let o=null==t?void 0:t.find(w(e));return(null===(n=T(o))||void 0===n?void 0:n.url)||(null==o?void 0:null===(r=o.image_thumb)||void 0===r?void 0:r.url)||(null==o?void 0:null===(i=o.image_ori)||void 0===i?void 0:i.url)||e}),[C,t]),{run:$}=(0,v.Z)(()=>{if(!(0,o.Z)(t)){var e,r;(0,p.trackEvent)("pinch",{pic_id:null===(e=t[Number(x)])||void 0===e?void 0:e.key,bot_id:m,enter_picture_method:n===c.iz.NotMessage?"template_detail":"chat",message_id:l,conversation_id:s,request_id:null===(r=t[P.current])||void 0===r?void 0:r.request_id})}},{trailing:!0,leading:!1,wait:1e3});(0,i.useEffect)(()=>{(0,a.Z)(x)&&(M.current=Date.now())},[(0,a.Z)(x)]);let j=(0,i.useCallback)(e=>{if(!e){if(!(0,o.Z)(t)){var n,r;(0,p.trackEvent)("leave_picture_detail",{pic_id:String(null===(n=t[Number(x)])||void 0===n?void 0:n.key),bot_id:m,message_id:l,conversation_id:s,request_id:null===(r=t[P.current])||void 0===r?void 0:r.request_id,duration:M.current?Date.now()-M.current:void 0})}N(void 0)}},[N,x]),O=e=>{"ArrowLeft"===e.code&&Number(x)-1>=0&&C[Number(x)-1]&&(N(Number(x)-1),F("left",Number(x)-1)),"ArrowRight"===e.code&&Number(x)+1<C.length&&C[Number(x)+1]&&(N(Number(x)+1),F("right",Number(x)+1))},F=(e,r)=>{if(!(0,o.Z)(t)){var i;(0,p.trackEvent)("slide",{status:e,pic_id:t[r].key,bot_id:m,enter_picture_method:n===c.iz.NotMessage?"template_detail":"chat",message_id:l,request_id:null===(i=t[r])||void 0===i?void 0:i.request_id,conversation_id:s})}};(0,i.useEffect)(()=>(window.addEventListener("keydown",O),()=>{window.removeEventListener("keydown",O)}),[x,C]);let L=(0,i.useCallback)(e=>{var r,i,a;let{disableDownload:u,onZoomIn:d,onZoomOut:v}=e;return(0,g.jsx)(E,{onZoomIn:d,onZoomOut:v,onDownload:(a=(null===(i=t[Number(x)])||void 0===i?void 0:null===(r=i.image_ori)||void 0===r?void 0:r.url)||C[Number(x)],u?()=>void 0:()=>{if(!(0,o.Z)(t)){var e,r;(0,p.trackEvent)("picture_download",{pic_id:String(null===(e=t[Number(x)])||void 0===e?void 0:e.key),bot_id:m,click_method:"detail_click",enter_picture_method:n===c.iz.NotMessage?"template_detail":"chat",message_id:l,conversation_id:s,enter_from:C[P.current],request_id:null===(r=t[P.current])||void 0===r?void 0:r.request_id})}(0,p.trackEvent)("download",{conversation_id:s,bot_id:m,skill_id:y,message_id:l,content_type:"image",click_form:"image_full_screen"}),R(a)}),disableDownload:u})},[x,C]);return{imageEventCallbacks:{onImageRender:e=>{var r,i,a,v,f,g,y,b;if(n===c.iz.NotMessage)return;let k=null==t?void 0:t.findIndex(w(e)),T=(null===(i=t[k])||void 0===i?void 0:null===(r=i.image_thumb)||void 0===r?void 0:r.url)||(null===(v=t[k])||void 0===v?void 0:null===(a=v.image_ori)||void 0===a?void 0:a.url)||e;!(0,o.Z)(t)&&S&&(0,p.trackEvent)("picture_message_show",{bot_id:m,pic_id:null===(f=t[k])||void 0===f?void 0:f.key,conversation_id:s,message_id:l,request_id:null===(g=t[k])||void 0===g?void 0:g.request_id,original_content_source:n,chatType:((null===(b=(0,d.GX)("chatViewCoreStore"))||void 0===b?void 0:null===(y=b.currentChatViewConfig)||void 0===y?void 0:y.chatType)===u.z.NewThread?"default_new":h)||"other_default",conversation_type:_},{key:`${l}`}),I(e=>e.length<4?[...e,T]:e)},onImageClick:(e,r)=>{var i,a,v,f,g,y,b,S,k,T;let E=null==t?void 0:t.findIndex(w(r)),R=(null===(a=t[E])||void 0===a?void 0:null===(i=a.image_thumb)||void 0===i?void 0:i.url)||(null===(f=t[E])||void 0===f?void 0:null===(v=f.image_ori)||void 0===v?void 0:v.url)||r;P.current=E,(0,p.trackEvent)("enter_picture_detail",{pic_position:String(E+1),pic_id:String(null===(g=t[E])||void 0===g?void 0:g.key),bot_id:m,message_id:l,enter_from:n===c.iz.NotMessage?"template_detail":"chat",conversation_id:s,request_id:null===(y=t[E])||void 0===y?void 0:y.request_id}),n===c.iz.NotMessage?(N(E),I(null==t?void 0:t.map(e=>{var t,n;return(null===(t=e.image_thumb)||void 0===t?void 0:t.url)||(null===(n=e.image_ori)||void 0===n?void 0:n.url)||""}))):(I(e=>e.includes(R)?(N(e.indexOf(R)),e):(N(e.length),[...e,R])),(0,o.Z)(t)||(0,p.trackEvent)("picture_message_click",{pic_position:String(E+1),pic_id:null===(b=t[E])||void 0===b?void 0:b.key,bot_id:m,message_id:l,conversation_id:s,request_id:null===(S=t[E])||void 0===S?void 0:S.request_id,is_onboarding:0,chatType:((null===(T=(0,d.GX)("chatViewCoreStore"))||void 0===T?void 0:null===(k=T.currentChatViewConfig)||void 0===k?void 0:k.chatType)===u.z.NewThread?"default_new":h)||"other_default",conversation_type:_})),e.stopPropagation(),e.preventDefault()}},renderImagePreview:()=>C.length&&(0,a.Z)(x)?(0,g.jsx)(f.Z,{onZoomIn:$,onZoomOut:$,zoomStep:.2,className:k["chat-image-preview"],previewCls:"flow-image-preview",renderPreviewMenu:L,src:(0,r.C)(A,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$N-%lJNamw1$2xNNWFtRkhSakJNTWs1dldWaFJkRmx0%m5w-$$6bHpZ$mRKZEZreWFHa*tRekZxWWpJe*RHSXlOSFpqTTBwc$RESk9kb%pZ%W5aaWJWWjFaR%01-0dKWFJtNWF$ek-zWTIx$01tRlhWak5NTW14M$drZFdORXh1$W5wbFIwWj$Xak5XZWc9PQ"}),visible:(0,a.Z)(x),onVisibleChange:j,currentIndex:x,onChange:N,onPrev:e=>F("left",e),onNext:e=>F("right",e)}):null}}},286942:function(e,t,n){"use strict";n.d(t,{t:function(){return s}});var r=n(429996),i=n(966015),o=n(375292),a=n(627394);let s=(0,r.forwardRef)(function(e,t){let{getPopupContainer:n,style:r,...s}=e,{getPopupContainer:l=n}=(0,o.R)({optionalProvider:!0});return(0,a.jsx)(i.s,{ref:t,showArrow:!1,arrowPointAtCenter:!0,spacing:12,style:{borderRadius:"6px",padding:"5px 10px",...r},...s,getPopupContainer:l})})},192790:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(912763),i=n(900789);let o=e=>({[i.MZ.ParseState_Default]:r.x.Processing,[i.MZ.ParseState_Processing]:r.x.Processing,[i.MZ.ParseState_Success]:r.x.Success,[i.MZ.ParseState_Failed]:r.x.Failed})[e]},851228:function(e,t,n){"use strict";n.d(t,{OT:function(){return o},yy:function(){return r}});let r=((i={}).Reviewing="reviewing",i.Ban="ban",i.Delete="delete",i.Private="private",i.Rollback="rollback",i);var i,o={Compose:"compose",Reply:"reply"}},777078:function(e,t,n){"use strict";n.d(t,{x$:function(){return s}});var r=n(429996),i=n(627426);let o=(0,r.createContext)(null);o.Provider;let a=(0,r.createContext)({});a.Provider;let s=()=>{let e=(0,r.useContext)(o),t=(0,r.useContext)(a);return(0,i.Z)(t,e)}},392467:function(e,t,n){"use strict";n.d(t,{t:function(){return a}});var r=n(429996),i=n(577831);let o=(e,t)=>{var n,r,o;let{canSendFile:a=!1,canSendImage:s=!1}=t||{};return(!!a||!!s)&&((0,i.bH)()?(null===(o=e.dataTransfer)||void 0===o?void 0:null===(r=o.types)||void 0===r?void 0:r.every(e=>"Files"===e))||!1:[...(null===(n=e.dataTransfer)||void 0===n?void 0:n.items)||[]].every(e=>"file"===e.kind))},a=e=>{let{closeDelay:t=100,canSendFile:n,canSendImage:i}=e,[a,s]=(0,r.useState)(!1);return{isOver:a,divProps:(0,r.useMemo)(()=>{let e;return{onDragEnter:t=>{e&&clearTimeout(e),o(t,{canSendFile:n,canSendImage:i})&&s(!0)},onDragOver:t=>{e&&clearTimeout(e),o(t,{canSendFile:n,canSendImage:i})&&(s(!0),t.preventDefault())},onDragLeave:r=>{e&&clearTimeout(e),o(r,{canSendFile:n,canSendImage:i})&&(t?e=window.setTimeout(()=>s(!1),t):s(!1))},onDrop:t=>{e&&clearTimeout(e),o(t,{canSendFile:n,canSendImage:i})&&(s(!1),t.preventDefault())}}},[s,t,n])}}},316820:function(e,t,n){"use strict";n.d(t,{J:function(){return _},A:function(){return h}});var r=n(429996),i=n(210230),o=n(51679),a=n(499050),s=n(46499);let l=/^https:\/\/(www\.)?arxiv\.org\/pdf\/.+$/i,c=e=>{let t=(0,s.P)(e);return l.test(t)},u=e=>/^https:\/\/.*\.pdf$/i.test(e),d=e=>c(e)||u(e),p=new Map,v=new Map,f=e=>p.get(e),m=async e=>{let t=v.get(e);if(t)return t;let n=0,r=async()=>{try{var t,a,s;let n=await o.mH.SniffUrl({urls:[e]}),r=null===(s=n.data)||void 0===s?void 0:null===(a=s.results)||void 0===a?void 0:null===(t=a.find(t=>t.url===e))||void 0===t?void 0:t.ContentType;if((0,i.Z)(r)||!r)throw Error("Invalid Response.");return/^application\/pdf\b/.test(r)}catch(e){if(n>1)return!1;return n++,await r()}},a=r();v.set(e,a);let s=await a;return p.set(e,s),v.delete(e),s},h=e=>{e=(0,s.P)(e);let[t,n]=(0,r.useState)(0),i=()=>{n(t+1)},o=!!(e&&(0,a.jv)(e,{allowedProtocols:["https:"]}))&&f(e);return void 0===o?(m(e).then(()=>{i()}),d(e)):o},_=async e=>{let t=(0,a.jv)(e,{allowedProtocols:["https:"]})&&f(e);return void 0!==t?t:t=await m(e)}},893052:function(e,t,n){"use strict";n.d(t,{qi:function(){return v}});var r=n(429996),i=n(210230),o=n(51679),a=n(993047),s=n(644367);let l=()=>(0,a.AD)({fn:()=>n.e("65336").then(n.bind(n,190060)).then(e=>e.default),fallback:{default:()=>({getExtension:()=>""})}}),c=new Map,u=new Map,d=async e=>{var t,n;if(c.has(e))return null!==(t=c.get(e))&&void 0!==t?t:"";if(u.has(e))return null!==(n=u.get(e))&&void 0!==n?n:Promise.resolve("");let r=0,a=async()=>{try{var t,n,c;let r=await o.mH.SniffUrl({urls:[e]}),a=null===(c=r.data)||void 0===c?void 0:null===(n=c.results)||void 0===n?void 0:null===(t=n.find(t=>t.url===e))||void 0===t?void 0:t.ContentType;if((0,i.Z)(a)||!a)throw Error("Invalid ContentType");return(await l()).getExtension(a)||""}catch(t){if(s.k.persist.error({eventName:"sniff_link_response_error",error:Error((null==t?void 0:t.message)||""),meta:{link:e,retryCount:String(r)}}),r>=10)return"";return r++,await new Promise(e=>{setTimeout(e,300)}),await a()}},d=a();u.set(e,d);let p=await d;return c.set(e,p),u.delete(e),p},p=e=>{let t=e.match(/\.([^.]+)$/);return t?t[1].toLowerCase().trim():""},v=(e,t)=>{let[n,i]=(0,r.useState)(p(e));return(0,r.useEffect)(()=>{let t=async()=>{i(await d(e))};e&&t()},[e]),(0,r.useMemo)(()=>({ext:t&&!t.includes(n)?"":n,originExt:n}),[n,t])}},287491:function(e,t,n){"use strict";let r,i,o;n.d(t,{GX:function(){return _},I9:function(){return h},VZ:function(){return m},e$:function(){return p}});var a=n(429996),s=n(644367),l=n(633126);let c=[".py",".java",".js",".ts",".c",".cpp",".h",".hpp",".cc",".cxx",".html",".css",".php",".rb",".pl",".sh",".bash",".swift",".kt",".kts",".ktm",".go",".dart",".scala",".cs",".aspx",".xaml",".vue",".mod",".proto",".tsx",".jsx",".rs",".json",".yaml",".yml",".xml",".env",".config",".properties",".ini",".toml",".plist",".md",".markdown",".adoc",".feature",".sum",".bat",".cmd",".ps1",".vbs",".lua",".vmx",".vbox",".dockerfile",".wxml",".wxss",".m",".for",".f90",".f95",".f",".xhtml",".rdf",".tmpl",".scss",".thrift",".rst",".meta",".gitignore",".patch",".sql"],u=["makefile","gemfile","build.gradle"],d=[".py",".java",".js",".ts",".c",".cpp",".h",".hpp",".html",".css",".php",".rb",".pl",".sh",".bash",".swift",".kt",".go",".dart",".scala",".cs",".xaml",".vue",".json",".yaml",".yml",".xml",".env",".ini",".toml",".plist",".feature",".bat",".cmd",".ps1",".vbs",".vmx",".vbox",".dockerfile",".proto",".lua",".mod",".sum"],p=()=>{let[e,t]=(0,a.useState)(o),[n,s]=(0,a.useState)(r);(0,a.useEffect)(()=>{(!e||!n)&&(0,l.T)().then(e=>{var n,a,l,c,u,d;r=r||(null==e?void 0:null===(a=e.data)||void 0===a?void 0:null===(n=a.code_assistant_config)||void 0===n?void 0:n.supported_code_file_types),i=i||(null==e?void 0:null===(c=e.data)||void 0===c?void 0:null===(l=c.code_assistant_config)||void 0===l?void 0:l.supported_file_names),(o=o||(null==e?void 0:null===(d=e.data)||void 0===d?void 0:null===(u=d.code_assistant_config)||void 0===u?void 0:u.default_assistant_file_types))&&t([...o]),r&&s([...r])})},[e]);let c=/^\.([^.]+)/;return{supportedCodeFileTypesInFree:(null==e?void 0:e.filter(e=>c.test(e)).map(e=>e.slice(1)))||[],supportedCodeFileTypes:n}},v=(e,t,n)=>{if(!(null==t?void 0:t.length)||!e)return!1;let r=!1;return t.some(t=>{if(e.endsWith(t))return r=!0,!0}),n.some(t=>{if(e===t)return r=!0,!0}),r},{assertCodeFileAsync:f,assertCodeFileSync:m,preloadCodeFileExtList:h,assertCodeFileSyncInFree:_,assertCodeFileAsyncInFree:g}=(()=>{let e=()=>{(0,l.T)().then(e=>{var t,n,a;let{data:s}=e;r=null==s?void 0:null===(t=s.code_assistant_config)||void 0===t?void 0:t.supported_code_file_types,i=null==s?void 0:null===(n=s.code_assistant_config)||void 0===n?void 0:n.supported_file_names,o=null==s?void 0:null===(a=s.code_assistant_config)||void 0===a?void 0:a.default_assistant_file_types})},t=async e=>(o||await n(),!!o&&v(e,o,[])),n=async()=>{if(!i||!r)try{var e,t,n;let{data:a}=await (0,l.T)();r=null==a?void 0:null===(e=a.code_assistant_config)||void 0===e?void 0:e.supported_code_file_types,i=null==a?void 0:null===(t=a.code_assistant_config)||void 0===t?void 0:t.supported_file_names,o=null==a?void 0:null===(n=a.code_assistant_config)||void 0===n?void 0:n.default_assistant_file_types}catch(e){s.k.persist.error({eventName:"fetch_support_code_types_error",error:e instanceof Error?e:Error(String(e))})}};return{assertCodeFileAsync:async e=>(r&&i||await n(),!!r&&!!i&&v(e,r,i)),assertCodeFileSync:t=>(r&&i||e(),v(t,r||c,i||u)),preloadCodeFileExtList:n,assertCodeFileSyncInFree:t=>(o||e(),v(t,o||d,[])),assertCodeFileAsyncInFree:t}})()},143312:function(e,t,n){"use strict";n.d(t,{S:function(){return r}});let r=!1},170072:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});var r=n(51679);let i=(()=>{let e={};return async t=>{if(e[t])return e[t];try{var n,i,o,a;let s=await r.mH.SniffLink({links:[t],with_content_type:!1,with_repository:!0}),l=(null===(i=s.data)||void 0===i?void 0:null===(n=i.results)||void 0===n?void 0:n.find(e=>e.url===t))||(null===(a=s.data)||void 0===a?void 0:null===(o=a.failed_urls)||void 0===o?void 0:o.find(e=>e.url===t));if(!l)return null;return e[t]=l,l}catch(e){return null}}})()},46499:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});let r=/\.pdf$/i,i=e=>{if(!(e=e.trim()).startsWith("https://arxiv.org/"))return e;let t=e;return t.startsWith("https://arxiv.org/abs")&&(t=t.replace("https://arxiv.org/abs","https://arxiv.org/pdf")),r.test(t)&&(t=t.replace(r,"")),t}},557735:function(e,t,n){"use strict";n.d(t,{C3:function(){return o},Uw:function(){return a},nb:function(){return i}});var r=n(829619);let i=e=>{if(e)return({[r.M.GUIDANCE_PAGE]:"landing",[r.M.GUIDANCE_SUGGESTIONS]:"input_bar_entrance",[r.M.SIDEBAR]:"sidebar_skill",[r.M.DEFAULT]:"direct_enter",[r.M.NEW_USER_TASK]:"new_user_task",[r.M.CHAT_ACTION_BAR]:"chat_action_bar"})[e]},o=e=>{if(e)return({[r.M.GUIDANCE_PAGE]:"landing",[r.M.GUIDANCE_SUGGESTIONS]:"landing",[r.M.SIDEBAR]:"sidebar_skill",[r.M.DEFAULT]:"direct_enter",[r.M.NEW_USER_TASK]:"new_user_task",[r.M.CHAT_ACTION_BAR]:"chat_action_bar"})[e]},a=e=>{if(e)return({[r.M.GUIDANCE_PAGE]:"chat_action_bar_landing",[r.M.GUIDANCE_SUGGESTIONS]:"chat_action_bar_landing",[r.M.SIDEBAR]:"sidebar_skill_click",[r.M.DEFAULT]:"direct_enter",[r.M.NEW_USER_TASK]:"new_user_task",[r.M.CHAT_ACTION_BAR]:"chat_action_bar_click"})[e]}},653019:function(e,t,n){"use strict";n.d(t,{RL:function(){return l},UG:function(){return s},nC:function(){return a},p4:function(){return c},vO:function(){return u}});var r=n(93708),i=n(12107),o=n(106307);let a=()=>(0,r.sQ)("chatInputStore",e=>e.editorValue),s=()=>(0,r.sQ)("chatInputStore",e=>(0,i.Z6)(e.editorValue.data)),l=e=>(0,r.GX)("chatInputStore").setEditorValue(e),c=e=>{let t={data:[{type:o.f.Text,text:e}]};return(0,r.GX)("chatInputStore").setEditorValue(t)},u=()=>(0,r.GX)("chatInputStore").setEditorValue({data:[{type:o.f.Text,text:""}]})},190831:function(e,t,n){"use strict";n.d(t,{Lv:function(){return c},UC:function(){return u},W2:function(){return p},ZO:function(){return d}});var r=n(429996),i=n(986091),o=n(474227),a=n(93708),s=n(543281),l=n(851510);let c=(e,t)=>{let n=e.refContentMap[t];if(!(!n||(0,i.Z)(n.refContents)))return n},u=e=>{let t=(0,a.sQ)("refContentStore",t=>c(t,e),o.Z),n=(0,a.sQ)("attachmentUploadStore",e=>e.preprocessTaskMap,o.Z);return(0,r.useMemo)(()=>{if(!t||(0,i.Z)(t.refContents))return;let e=t.refContents.filter(e=>{if("attachment"!==e.type)return!0;for(let t in n)if(n[t].key===e.fileKey)return n[t].reviewState!==s.m9.ReviewState_NotCompliant;return!0});return{...t,refContents:e}},[t,n])},d=e=>{let t=u(e);return(0,r.useMemo)(()=>({...t,refContents:(null==t?void 0:t.refContents)?(0,l._c)(t.refContents):void 0}),[t])},p=e=>!!(0,a.GX)("attachmentUploadStore").preprocessTaskMap[e]},775265:function(e,t,n){"use strict";n.d(t,{T5:function(){return l},rP:function(){return p},wG:function(){return d}});var r=n(669384),i=n(41359),o=n(455746),a=n(317774),s=n(972640);let l=e=>{var t,n;return(null==e?void 0:e.content_type)===r.zc.SamanthaAiPodcastOutput||(null==e?void 0:e.content_type)===o.ContentType.Widget&&(null===(t=e.content_obj)||void 0===t?void 0:t.applet_id)===i.K1.Podcast&&(null===(n=e.content_obj)||void 0===n?void 0:n.widget_id)===i.W7.AIPodcast},c=e=>{if(!l(e))return;let t=null==e?void 0:e.content_obj,n=s.Y.parse(null==t?void 0:t.widget_data);return s.Y.parse(null==n?void 0:n.data)},u=e=>{var t,n,r;let i=null==e?void 0:null===(n=e.episodeList)||void 0===n?void 0:null===(t=n.episodes)||void 0===t?void 0:t[0];return(null==i?void 0:null===(r=i.meta)||void 0===r?void 0:r.protocol)===a.b.Normal},d=e=>u(c(e)),p=e=>{let t=c(e);return u(t)?null==t?void 0:t.waiting_reply:void 0}},908205:function(e,t,n){"use strict";n.d(t,{tk:function(){return o}});var r=n(377940),i=n(228535);let o=e=>{if(!e)return r.LY.MESSAGE_TYPE_TEXT;if((0,i.qP0)(e))return r.LY.MESSAGE_TYPE_PIC;if((0,i.RkI)(e))return r.LY.MESSAGE_TYPE_VIDEO;if((0,i.vU5)(e))return r.LY.MESSAGE_TYPE_MUSIC;if((0,i.A8i)(e))return r.LY.MESSAGE_TYPE_FILE;if((0,i.s27)(e))return r.LY.MESSAGE_TYPE_SEARCH_CARD;else if((0,i.d8)(e))return r.LY.MESSAGE_TYPE_LYRICS_TO_SONG_LYRIC;else if((0,i.C_i)(e))return r.LY.MESSAGE_TYPE_LYRICS_TO_SONG_MUSIC;else if((0,i.zTh)(e))return r.LY.MESSAGE_TYPE_VIDEO_GENERATION;else return r.LY.MESSAGE_TYPE_TEXT}},829619:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});var r={GUIDANCE_PAGE:"guidance_page",SIDEBAR:"sidebar",DEFAULT:"default",NEW_USER_TASK:"new_user_task",GUIDANCE_SUGGESTIONS:"guidance_suggestions",CHAT_ACTION_BAR:"chat_action_bar"}},923404:function(e,t,n){"use strict";n.d(t,{Gb:function(){return o},KV:function(){return i},lQ:function(){return r}});var r={File:"File",Directory:"Directory"},i={Pending:"Pending",Inflight:"Inflight",Success:"Success",Error:"Error",Paused:"Paused"},o={UploadError:"UploadError",MountError:"MountError",UnsupportedFileType:"UnsupportedFileType"}},2445:function(e,t,n){"use strict";n.d(t,{J:function(){return o},b:function(){return i}});var r=n(238e3);let i=(e,t)=>{r.x.setState(n=>{var r;let i=null!==(r=n.sendMessagePerformance[e])&&void 0!==r?r:{};return{sendMessagePerformance:{...n.sendMessagePerformance,[e]:{...i,...t}}}})},o=(e,t)=>{r.x.setState(n=>{var r;let i=null!==(r=n.receiveMessagePerformance[e])&&void 0!==r?r:{};return{receiveMessagePerformance:{...n.receiveMessagePerformance,[e]:{...i,...t}}}})}},238e3:function(e,t,n){"use strict";n.d(t,{x:function(){return a}});var r=n(98490),i=n(293067);let o=()=>({sendMessagePerformance:{},receiveMessagePerformance:{}}),a=(()=>{let e=(0,r.XR)(o);return(0,i.Ue)()(e)})()},763885:function(e,t,n){"use strict";n.r(t),n.d(t,{MessagePerformanceMessageLifeCyclePlugin:function(){return l}});var r=n(772145),i=n(307362),o=n(2445),a=n(238e3);function s(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l{constructor(){s(this,"pluginIdentifier",i.H),s(this,"beforeMessageSending",(e,t)=>(t.local_message_id&&(0,o.b)(t.local_message_id,{start:(0,r.z)(),isNewThread:"0"===t.conversation_id}),t)),s(this,"onMessageReceivingUpdate",(e,t)=>{let{receiveMessagePerformance:n}=a.x.getState();return t.message_id&&!n[t.message_id]&&(0,o.J)(t.message_id,{start:(0,r.z)()}),t})}}},843724:function(e,t,n){"use strict";n.r(t),n.d(t,{MessagePerformanceMessageLifeCyclePluginMatcher:function(){return r}});let r={pluginIdentifier:n(307362).H,matchPlugin:e=>!0,matchPluginWithPayload:e=>!0}},51053:function(e,t,n){"use strict";n.r(t),n.d(t,{MessageTraceMessageLifeCyclePlugin:function(){return v}});var r=n(508830),i=n(644367),o=n(78570);let a=e=>{var t,n,r,i,o,a,s;return{conversation_id:null!==(n=e.conversation_id)&&void 0!==n?n:"",local_conversation_id:null!==(r=e.local_conversation_id)&&void 0!==r?r:"",conversation_type:String(null!==(i=e.conversation_type)&&void 0!==i?i:""),bot_id:String(null!==(o=e.bot_id)&&void 0!==o?o:""),section_id:null!==(a=e.section_id)&&void 0!==a?a:"",skill_id:null!==(s=null===(t=e.skill)||void 0===t?void 0:t.skill_id)&&void 0!==s?s:"0"}};var s=n(363998),l=n(252528),c=n(443032),u=n(375991);function d(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let p=(e,t,n)=>{if(!e||!t)return;e.records.onMessageReceivingUpdate[t]||(e.records.onMessageReceivingUpdate[t]={count:0,timestamp_list:[],think_reason_timestamp_list:[]});let r=e.records.onMessageReceivingUpdate[t];r.count+=1,r.timestamp_list.push(performance.now()),n&&r.think_reason_timestamp_list.push(performance.now())};class v{constructor(){d(this,"pluginIdentifier",u.H),d(this,"beforeMessageSending",(e,t)=>{let n=(0,s.h)(e);if((0,l.u)(n))return t;(0,l.i)(n,"beforeMessageSending");let r=a(t);return null==n||n.setCommonContextParams(r),null==n||n.setSlardarContextParams(o.J.beforeMessageSending(t)),i.k.persist.success({eventName:"before_message_sending",meta:o.P.beforeMessageSending(n)}),t}),d(this,"onMessageSendingStart",(e,t)=>{let n=(0,s.h)(e);return(0,l.u)(n)||((0,l.i)(n,"onMessageSendingStart"),null==n||n.setSlardarContextParams(o.J.onMessageSendingStart(t)),i.k.persist.success({eventName:"on_message_sending_start",meta:o.P.onMessageSendingStart(n)})),t}),d(this,"onMessageSendingEnd",(e,t)=>{let n=(0,s.h)(e);return(0,l.u)(n)||((0,l.i)(n,"onMessageSendingEnd"),null==n||n.updateCommonContextParamsIfExist({conversation_id:t.conversation_id}),null==n||n.setSlardarContextParams(o.J.onMessageSendingEnd(t)),i.k.persist.success({eventName:"on_message_sending_end",meta:o.P.onMessageSendingEnd(n)})),t}),d(this,"onBatchMessageReceivingStart",(e,t)=>{let n=(0,s.h)(e);return(0,l.u)(n)||((0,l.i)(n,"onBatchMessageReceivingStart"),i.k.persist.success({eventName:"on_batch_message_receiving_start",meta:o.P.onBatchMessageReceivingStart(n)})),t}),d(this,"onThinkingMessageUpdate",(e,t)=>{let n=(0,s.h)(e);return(0,l.u)(n)||i.k.persist.success({eventName:"on_thinking_message_update",meta:o.P.onThinkingMessageUpdate(n)}),t}),d(this,"onMessageReceivingStart",(e,t)=>{let n=(0,s.h)(e);return(0,l.u)(n)||((0,l.i)(n,"onMessageReceivingStart"),i.k.persist.success({eventName:"on_message_receiving_start",meta:o.P.onMessageSendingStart(n)})),t}),d(this,"onMessageReceivingUpdate",(e,t)=>{var n,a,c;if(!t.message_id)return t;let u=(0,s.h)(e);if((0,l.u)(u))return t;let d=t.has_think_reason;p(u,t.message_id,d);let v=null==u?void 0:u.records.onMessageReceivingUpdate[t.message_id],f=null==u?void 0:u.records.onBatchMessageReceivingStart;if(!u)return t;if(0===(0,r.Z)(null===(n=u.params.slardar)||void 0===n?void 0:n.receive_message).length){u.setSlardarContextParams(o.J.onMessageReceivingUpdate(t));let e=o.P.onMessageReceivingUpdate(u,t);(null==f?void 0:f.timestamp)&&(null==v?void 0:null===(c=v.timestamp_list)||void 0===c?void 0:c.length)&&(e.batch_message_first_update_duration=v.timestamp_list[0]-f.timestamp),i.k.persist.success({eventName:"on_batch_message_receiving_first_update",meta:e})}if((null==v?void 0:null===(a=v.think_reason_timestamp_list)||void 0===a?void 0:a.length)===1){let e=o.P.onMessageReceivingUpdate(u,t);(null==f?void 0:f.timestamp)&&(e.receive_think_reason_first_text_duration=v.think_reason_timestamp_list[0]-f.timestamp,i.k.persist.success({eventName:"on_receive_think_reason_first_text_update",meta:e}))}return t}),d(this,"onMessageReceivingEnd",(e,t)=>{if(!t.message_id)return t;let n=(0,s.h)(e);return(0,l.u)(n)||((0,l.i)(n,"onMessageReceivingEnd"),null==n||n.setSlardarContextParams(o.J.onMessageReceivingEnd(t)),i.k.persist.success({eventName:"on_message_receiving_end",meta:o.P.onMessageReceivingEnd(n,t)})),t}),d(this,"onBatchMessageReceivingEnd",(e,t)=>{let n=(0,s.h)(e);return(0,l.u)(n)||((0,l.i)(n,"onBatchMessageReceivingEnd"),i.k.persist.success({eventName:"on_batch_message_receiving_end",meta:o.P.onBatchMessageReceivingEnd(n)})),t}),d(this,"onSuggestReceivingStart",(e,t)=>{let n=(0,s.h)(e);return(0,l.u)(n)||((0,l.i)(n,"onSuggestReceivingStart"),null==n||n.setSlardarContextParams(o.J.onSuggestReceivingStart()),i.k.persist.success({eventName:"on_suggest_receiving_start",meta:o.P.onSuggestReceivingStart(n)})),t}),d(this,"onSuggestReceivingEnd",(e,t)=>{let n=(0,s.h)(e);return(0,l.u)(n)||((0,l.i)(n,"onSuggestReceivingEnd"),null==n||n.setSlardarContextParams(o.J.onSuggestReceivingEnd(t)),i.k.persist.success({eventName:"on_suggest_receiving_end",meta:o.P.onSuggestReceivingEnd(n)})),t}),d(this,"onMessageSessionEnd",(e,t)=>((0,c.Y)(e,t),t))}}},574426:function(e,t,n){"use strict";n.r(t),n.d(t,{MessageTraceMessageLifeCyclePluginMatcher:function(){return r}});let r={pluginIdentifier:n(375991).H,matchPlugin:e=>!0,matchPluginWithPayload:e=>!0}},821431:function(e,t,n){"use strict";n.r(t),n.d(t,{MessageTeaTraceMessageLifeCyclePlugin:function(){return eI}});var r,i,o,a,s,l,c,u,d,p,v=n(377940),f=n(154760),m=n(148824),h=n(228535),_=n(908205),g=n(689337),y=n(644367),b={PARAMETER_KEY_OR_VALUE_ERROR:"PARAMETER_KEY_OR_VALUE_ERROR"};let S=(e,t)=>{var n;y.k.persist.info({eventName:"message_tea_report_record",meta:{conversation_id:e.conversation_id,message_id:e.message_id,skill_id:null===(n=e.skill)||void 0===n?void 0:n.skill_id,conversation_type:e.conversation_type,tea_name:t.tea_name,tea_error_type:t.tea_error_type,tea_error_reason:t.tea_error_reason,tea_missing_event_counts:t.tea_missing_event_counts,tea_error_field:t.tea_error_field,chat_scene:t.chat_scene,success:t.success}})},k=(e,t)=>{var n;y.k.persist.info({eventName:"message_tea_report_record_statistics",meta:{conversation_id:e.conversation_id,message_id:e.message_id,skill_id:null===(n=e.skill)||void 0===n?void 0:n.skill_id,conversation_type:e.conversation_type,success_count:t.success_count,chat_scene:t.chat_scene,fail_count:t.fail_count,miss_count:t.miss_count,record_count:t.record_count,miss_reason:t.miss_reason}})};var w=n(363998),T=n(177056),E=n(444614),R=n(422931),C=n(81307),I=n(599656),x=n(327386),N=n(944746),M=n(508830),P=n(669384),A=n(126473);let $="send_message",j=((r={}).CHAT_TYPE_DEFAULT="default",r.CHAT_TYPE_DEFAULT_NEW="default_new",r.CHAT_TYPE_OTHER_DEFAULT="other_default",r.CHAT_TYPE_SELF_CREATED="self_created",r.CHAT_TYPE_OTHERS_CREATED="others_created",r.CHAT_TYPE_OTHER_DEFULT="other_defult",r),O=((i={}).EDIT_IMAGE_FUNCTION_INPAINTING="inpainting",i.EDIT_IMAGE_FUNCTION_OUTPAINTING="outpainting",i.EDIT_IMAGE_FUNCTION_SMEARING="smearing",i.EDIT_IMAGE_FUNCTION_OPERATE_BACKGROUND="operate_background",i.EDIT_IMAGE_FUNCTION_SUPER_RESOLUTION="super_resolution",i.EDIT_IMAGE_FUNCTION_CONTINUE_EDIT="continue_edit",i.EDIT_IMAGE_FUNCTION_REDRAW="redraw",i.EDIT_IMAGE_FUNCTION_EXPAND="expand",i.EDIT_IMAGE_FUNCTION_ERASE="erase",i.EDIT_IMAGE_FUNCTION_UPSCALE="upscale",i),F=((o={})[o.IS_LONG_FILE_1=1]="IS_LONG_FILE_1",o[o.IS_LONG_FILE_0=0]="IS_LONG_FILE_0",o),L=((a={})[a.IS_UPLOAD_FILE_1=1]="IS_UPLOAD_FILE_1",a[a.IS_UPLOAD_FILE_0=0]="IS_UPLOAD_FILE_0",a),D=((s={}).QUOTE_TYPE_IMAGE="Image",s.QUOTE_TYPE_FILE="file",s.QUOTE_TYPE_URL="url",s.QUOTE_TYPE_TEXT="text",s),W=((l={}).UPLOAD_COLLECTION_WAY_MULTI="multi",l.UPLOAD_COLLECTION_WAY_SINGLE="single",l),Z=((c={})[c.USED_PROMPT_1=1]="USED_PROMPT_1",c[c.USED_PROMPT_0=0]="USED_PROMPT_0",c),U=e=>I.z.object({message_id:I.z.string(),conversation_id:I.z.string(),section_id:I.z.string(),chat_type:I.z.nativeEnum(j),bot_id:I.z.string(),scene:I.z.nativeEnum((0,x.Z)(v.b3,"REGENERATE")),skill_id:I.z.nativeEnum(v.Zq).or(I.z.null()),skill_name:I.z.nativeEnum(v.r4).or(I.z.null()),use_skill:I.z.number().int().min(0).max(1),success:I.z.nativeEnum(v.mk),writing_genre:I.z.string().optional(),music_genre:I.z.string().optional(),styles:I.z.string().optional(),image_category:I.z.string().optional(),is_upload_file:I.z.nativeEnum(L).optional(),upload_file_type:I.z.string().optional(),is_quote:I.z.nativeEnum(v.vC).optional(),quote_type:I.z.nativeEnum(D).optional(),upload_file_size:I.z.string().optional(),upload_collection_way:I.z.nativeEnum(W).optional(),collection_id:I.z.string().optional(),collection_name:I.z.string().optional(),upload_from:I.z.nativeEnum(v.Ux).optional(),edit_image_function:I.z.nativeEnum(O).optional(),is_long_file:I.z.nativeEnum(F).optional(),used_prompt:I.z.nativeEnum(Z).optional(),prompt_type:I.z.nativeEnum(v.Ov).optional(),default_prompt_type:I.z.nativeEnum(v.e2).optional(),whether_use_deep_thinking:I.z.nativeEnum(v.mF).optional()}).passthrough().superRefine((t,n)=>{var r,i,o,a,s,l,c,u;if(t.skill_id===String(P.W.SkillMusicGen)&&(null===(a=e.content_obj)||void 0===a?void 0:a.genre)&&void 0===t.music_genre){n.addIssue({code:I.z.ZodIssueCode.custom,path:["music_genre"],message:"music_genre is required, if skill_id is SkillMusicGen"});return}if(t.skill_id===String(P.W.SkillImageGen)){if((null===(s=e.content_obj)||void 0===s?void 0:s.style)&&void 0===t.styles){n.addIssue({code:I.z.ZodIssueCode.custom,path:["styles"],message:"styles is required, if skill_id is SkillImageGen"});return}if((null===(l=e.content_obj)||void 0===l?void 0:l.edit_image)&&void 0===t.edit_image_function){n.addIssue({code:I.z.ZodIssueCode.custom,path:["edit_image_function"],message:"edit_image_function is required, if skill_id is SkillImageGen && content_obj.edit_image is true"});return}}if(null===(r=e.attachments)||void 0===r?void 0:r.length){if((null===(c=e.attachments[0])||void 0===c?void 0:c.type)==="resource_content")return;if(!t.is_upload_file){n.addIssue({code:I.z.ZodIssueCode.custom,path:["is_upload_file"],message:"has attachments, but is_upload_file is false"});return}if(void 0===t.upload_file_type){n.addIssue({code:I.z.ZodIssueCode.custom,path:["upload_file_type"],message:"has attachments, but upload_file_type is undefined"});return}let r=e.attachments.map(e=>{var t;return(null==e?void 0:e.type)===C.Ub.File?(0,A.JB)((0,A.lm)((null==e?void 0:e.name)||"")):(null==e?void 0:e.type)===C.Ub.VlmImage?"Image":(null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.split("_").map(e=>(0,N.Z)(e)).join(""))||""}).join(",");if(r!==t.upload_file_type){n.addIssue({code:I.z.ZodIssueCode.custom,path:["upload_file_type"],message:`has attachments, but upload_file_type is invalid, ${r} !== ${t.upload_file_type}`});return}if(void 0===t.upload_file_size){n.addIssue({code:I.z.ZodIssueCode.custom,path:["upload_file_size"],message:"has attachments, but upload_file_size is undefined"});return}if(t.upload_file_type){let e=t.upload_file_type.split(","),r=(0,M.Z)(v.ol),i=e.filter(e=>!r.includes(e));if(i.length>0){n.addIssue({code:I.z.ZodIssueCode.custom,path:["upload_file_type"],message:`has attachments, but upload_file_type is invalid, ${i.join(",")} not supported`});return}}if(void 0===t.upload_collection_way){n.addIssue({code:I.z.ZodIssueCode.custom,path:["upload_collection_way"],message:"has attachments, but upload_collection_way is undefined"});return}if(void 0===t.upload_from){n.addIssue({code:I.z.ZodIssueCode.custom,path:["upload_from"],message:"has attachments, but upload_from is undefined"});return}if((null===(u=e.skill)||void 0===u?void 0:u.skill_type)===P.W.SkillRead&&void 0===t.is_long_file){n.addIssue({code:I.z.ZodIssueCode.custom,path:["is_long_file"],message:"has attachments, but is_long_file is undefined"});return}}if(null===(i=e.references)||void 0===i?void 0:i.length){if(!t.is_quote){n.addIssue({code:I.z.ZodIssueCode.custom,path:["is_quote"],message:"has references, but is_quote is false"});return}if(void 0===t.quote_type){n.addIssue({code:I.z.ZodIssueCode.custom,path:["quote_type"],message:"has references, but quote_type is undefined"});return}}if(null==e?void 0:null===(o=e.content_obj)||void 0===o?void 0:o.text){if(!t.used_prompt){n.addIssue({code:I.z.ZodIssueCode.custom,path:["used_prompt"],message:"has text, but used_prompt is false"});return}if(t.prompt_type!==v.Ov.PROMPT_TYPE_DEFAULT_PROMPT&&t.default_prompt_type){n.addIssue({code:I.z.ZodIssueCode.custom,path:["default_prompt_type"],message:`prompt_type is not default, but default_prompt_type is ${t.default_prompt_type}`});return}}});var B=n(17135);let z=(e,t)=>{(0,B.trackEvent)(e,t)},V=(e,t)=>{var n,r,i,o,a,s,l,c,u,d,p,m,h,_;let g=null==t?void 0:t.getCommonTraceParams(),y=null==t?void 0:t.getRecordTimestamps(),k=null==t?void 0:t.getTeaEventTraceParams("send_message"),w=null==t?void 0:t.getTeaEventOtherTraceParams(),I={duration:((null==y?void 0:y.send_message_end)||0)-((null==y?void 0:y.send_message_start)||0),success:null!==(n=null==k?void 0:k.send_success)&&void 0!==n?n:v.mk.FAIL,result:null==k?void 0:k.send_result,conversation_id:null!==(r=null==g?void 0:g.conversation_id)&&void 0!==r?r:"",conversation_type:null!==(i=null==g?void 0:g.conversation_type)&&void 0!==i?i:C.VI.Coco,chat_type:null!==(o=null==g?void 0:g.chat_type)&&void 0!==o?o:v.C2.default,bot_id:null!==(a=null==g?void 0:g.bot_id)&&void 0!==a?a:"",message_id:null!==(s=null==k?void 0:k.send_message_id)&&void 0!==s?s:"",section_id:null!==(l=null==g?void 0:g.section_id)&&void 0!==l?l:"",scene:null!==(c=null==g?void 0:g.chat_scene)&&void 0!==c?c:v.b3.SCENE_KEYBOARD,message_type:null!==(u=null==k?void 0:k.send_message_type)&&void 0!==u?u:v.LY.MESSAGE_TYPE_TEXT,use_skill:null!==(d=null==g?void 0:g.use_skill)&&void 0!==d?d:0,skill_id:null!==(p=null==g?void 0:g.skill_id)&&void 0!==p?p:null,skill_name:null!==(m=null==g?void 0:g.skill_name)&&void 0!==m?m:null,canvas_sub_type:null==g?void 0:g.canvas_sub_type,canvas_type:null==g?void 0:g.canvas_type,canvas_id:null==k?void 0:k.canvas_id,previous_page:null!==(h=null==k?void 0:k.previous_page)&&void 0!==h?h:v.Uf.PREVIOUS_PAGE_CHAT,current_page:null!==(_=null==k?void 0:k.current_page)&&void 0!==_?_:v.au.CURRENT_PAGE_CHAT,user_id:null==k?void 0:k.user_id,req_id:null==k?void 0:k.req_id,recommend_from:null==k?void 0:k.recommend_from,whether_use_deep_thinking:null==k?void 0:k.whether_use_deep_thinking,...w},x=U(e).safeParse(I);z("send_message_status",(0,T.Z)(I,E.Z)),null==t||t.addEventReportCount("send_message_status"),x.success?null==t||t.setReportTeaEventSuccess("send_message_status"):(null==t||t.setReportTeaEventFailed("send_message_status"),S(e,{tea_name:"send_message_status",tea_error_type:b.PARAMETER_KEY_OR_VALUE_ERROR,tea_error_reason:x.error.message,tea_error_field:(0,R.Z)(x.error.errors.map(e=>e.path)).join(","),success:0,chat_scene:(null==g?void 0:g.chat_slardar_scene)||f.V.DEFAULT}))},H=e=>I.z.object({chat_type:I.z.nativeEnum(j),bot_id:I.z.string(),scene:I.z.nativeEnum((0,x.Z)(v.b3,"REGENERATE")),skill_id:I.z.nativeEnum(v.Zq).or(I.z.null()),skill_name:I.z.nativeEnum(v.r4).or(I.z.null()),use_skill:I.z.number().int().min(0).max(1),writing_genre:I.z.string().optional(),music_genre:I.z.string().optional(),styles:I.z.string().optional(),image_category:I.z.string().optional(),is_upload_file:I.z.nativeEnum(L).optional(),upload_file_type:I.z.string().optional(),is_quote:I.z.nativeEnum(v.vC).optional(),quote_type:I.z.nativeEnum(D).optional(),upload_file_size:I.z.string().optional(),upload_collection_way:I.z.nativeEnum(W).optional(),collection_id:I.z.string().optional(),collection_name:I.z.string().optional(),upload_from:I.z.nativeEnum(v.Ux).optional(),edit_image_function:I.z.nativeEnum(O).optional(),is_long_file:I.z.nativeEnum(F).optional(),used_prompt:I.z.nativeEnum(Z).optional(),prompt_type:I.z.nativeEnum(v.Ov).optional(),default_prompt_type:I.z.nativeEnum(v.e2).optional(),whether_use_deep_thinking:I.z.nativeEnum(v.mF).optional()}).passthrough().superRefine((t,n)=>{var r,i,o,a,s,l,c,u;if(t.skill_id===v.Zq.SkillMusicGen&&(null===(a=e.content_obj)||void 0===a?void 0:a.genre)&&void 0===t.music_genre){n.addIssue({code:I.z.ZodIssueCode.custom,path:["music_genre"],message:"music_genre is required, if skill_id is SkillMusicGen and content_obj.genre is true"});return}if(t.skill_id===v.Zq.SkillImageGen){if((null===(s=e.content_obj)||void 0===s?void 0:s.style)&&void 0===t.styles){n.addIssue({code:I.z.ZodIssueCode.custom,path:["styles"],message:"styles is required, if skill_id is SkillImageGen and content_obj.style is true"});return}if((null===(l=e.content_obj)||void 0===l?void 0:l.edit_image)&&void 0===t.edit_image_function){n.addIssue({code:I.z.ZodIssueCode.custom,path:["edit_image_function"],message:"edit_image_function is required, if skill_id is SkillImageGen && content_obj.edit_image is true"});return}}if(null===(r=e.attachments)||void 0===r?void 0:r.length){if((null===(c=e.attachments[0])||void 0===c?void 0:c.type)==="resource_content")return;if(!t.is_upload_file){n.addIssue({code:I.z.ZodIssueCode.custom,path:["is_upload_file"],message:"has attachments, but is_upload_file is false"});return}if(void 0===t.upload_file_type){n.addIssue({code:I.z.ZodIssueCode.custom,path:["upload_file_type"],message:"has attachments, but upload_file_type is undefined"});return}if(t.upload_file_type){let e=t.upload_file_type.split(","),r=(0,M.Z)(v.ol),i=e.filter(e=>!r.includes(e));if(i.length>0){n.addIssue({code:I.z.ZodIssueCode.custom,path:["upload_file_type"],message:`has attachments, but upload_file_type is invalid, ${i.join(",")} not supported`});return}}let r=e.attachments.map(e=>{var t;return(null==e?void 0:e.type)===C.Ub.File?(0,A.JB)((0,A.lm)((null==e?void 0:e.name)||"")):(null==e?void 0:e.type)===C.Ub.VlmImage?"Image":(null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.split("_").map(e=>(0,N.Z)(e)).join(""))||""}).join(",");if(r!==t.upload_file_type){n.addIssue({code:I.z.ZodIssueCode.custom,path:["upload_file_type"],message:`has attachments, but upload_file_type is invalid, ${r} !== ${t.upload_file_type}`});return}if(void 0===t.upload_file_size){n.addIssue({code:I.z.ZodIssueCode.custom,path:["upload_file_size"],message:"has attachments, but upload_file_size is undefined"});return}if(void 0===t.upload_collection_way){n.addIssue({code:I.z.ZodIssueCode.custom,path:["upload_collection_way"],message:"has attachments, but upload_collection_way is undefined"});return}if(void 0===t.upload_from){n.addIssue({code:I.z.ZodIssueCode.custom,path:["upload_from"],message:"has attachments, but upload_from is undefined"});return}if((null===(u=e.skill)||void 0===u?void 0:u.skill_type)===P.W.SkillRead&&void 0===t.is_long_file){n.addIssue({code:I.z.ZodIssueCode.custom,path:["is_long_file"],message:"has attachments, but is_long_file is undefined"});return}}if(null===(i=e.references)||void 0===i?void 0:i.length){if(!t.is_quote){n.addIssue({code:I.z.ZodIssueCode.custom,path:["is_quote"],message:"has references, but is_quote is false"});return}if(void 0===t.quote_type){n.addIssue({code:I.z.ZodIssueCode.custom,path:["quote_type"],message:"has references, but quote_type is undefined"});return}}if(null==e?void 0:null===(o=e.content_obj)||void 0===o?void 0:o.text){if(!t.used_prompt){n.addIssue({code:I.z.ZodIssueCode.custom,path:["used_prompt"],message:"has text, but used_prompt is false"});return}if(t.prompt_type!==v.Ov.PROMPT_TYPE_DEFAULT_PROMPT&&t.default_prompt_type){n.addIssue({code:I.z.ZodIssueCode.custom,path:["default_prompt_type"],message:`prompt_type is not default, but default_prompt_type is ${t.default_prompt_type}`});return}}}),G=(e,t)=>{var n,r,i,o,a,s,l,c,u,d,p,m;let h=null==t?void 0:t.getCommonTraceParams(),_=null==t?void 0:t.getTeaEventTraceParams("send_message"),g=null==t?void 0:t.getTeaEventOtherTraceParams(),y={message_type:null!==(n=null==_?void 0:_.send_message_type)&&void 0!==n?n:v.LY.MESSAGE_TYPE_TEXT,conversation_id:null!==(r=null==h?void 0:h.conversation_id)&&void 0!==r?r:"",conversation_type:null!==(i=null==h?void 0:h.conversation_type)&&void 0!==i?i:C.VI.Coco,bot_id:null!==(o=null==h?void 0:h.bot_id)&&void 0!==o?o:"",chat_type:null!==(a=null==h?void 0:h.chat_type)&&void 0!==a?a:v.C2.default,scene:null!==(s=null==h?void 0:h.chat_scene)&&void 0!==s?s:v.b3.SCENE_KEYBOARD,sec_scene:null!==(l=null==h?void 0:h.chat_sec_scene)&&void 0!==l?l:v.oh.SEC_SCENE_KEYBOARD,use_skill:null!==(c=null==h?void 0:h.use_skill)&&void 0!==c?c:0,skill_id:null!==(u=null==h?void 0:h.skill_id)&&void 0!==u?u:null,skill_name:null!==(d=null==h?void 0:h.skill_name)&&void 0!==d?d:null,is_quote:null!==(p=null==_?void 0:_.is_quote)&&void 0!==p?p:v.vC.IS_QUOTE_0,canvas_sub_type:null==h?void 0:h.canvas_sub_type,canvas_type:null==h?void 0:h.canvas_type,canvas_id:null==_?void 0:_.canvas_id,current_page:null!==(m=null==_?void 0:_.current_page)&&void 0!==m?m:v.au.CURRENT_PAGE_CHAT,whether_use_deep_thinking:null==_?void 0:_.whether_use_deep_thinking,...g},k=H(e).safeParse(y);z("send_message",(0,T.Z)(y,E.Z)),null==t||t.addEventReportCount("send_message"),k.success?null==t||t.setReportTeaEventSuccess("send_message"):(null==t||t.setReportTeaEventFailed("send_message"),S(e,{tea_name:"send_message",tea_error_type:b.PARAMETER_KEY_OR_VALUE_ERROR,tea_error_reason:k.error.message,tea_error_field:(0,R.Z)(k.error.errors.map(e=>e.path)).join(","),success:0,chat_scene:(null==h?void 0:h.chat_slardar_scene)||f.V.DEFAULT}))},K=((u={})[u.IS_ONBOARDING_1=1]="IS_ONBOARDING_1",u[u.IS_ONBOARDING_0=0]="IS_ONBOARDING_0",u),X=((d={})[d.IS_SOFT_LINK_1=1]="IS_SOFT_LINK_1",d[d.IS_SOFT_LINK_0=0]="IS_SOFT_LINK_0",d),q=e=>I.z.object({bot_id:I.z.string(),content_length:I.z.number().int().min(0),conversation_id:I.z.string(),message_id:I.z.string(),section_id:I.z.string(),duration:I.z.number().nonnegative().optional(),is_cache:I.z.number().int().min(0).max(1),is_onboarding:I.z.nativeEnum(K),is_soft_link:I.z.nativeEnum(X),message_type:I.z.nativeEnum(v.LY),onboarding_content_source:I.z.string(),result:I.z.nativeEnum(v.nS).optional(),success:I.z.nativeEnum(v.mk)}).passthrough(),J=(e,t)=>{var n,r,i,o,a,s,l,c,u,d,p,m,h,_;let g=null==t?void 0:t.getRecordTimestamps(),y=null==t?void 0:t.getCommonTraceParams(),k=null==t?void 0:t.getTeaEventTraceParams("receive_batch_message"),w=null==t?void 0:t.getTeaEventTraceParams("send_message"),T=null==t?void 0:t.getTeaEventOtherTraceParams(),E={duration:((null==g?void 0:g.receive_single_message_end)||0)-((null==g?void 0:g.send_message_start)||0),type:null==k?void 0:k.receive_message_type,content_type:null==k?void 0:k.receive_content_type,success:null!==(n=null==k?void 0:k.receive_success)&&void 0!==n?n:0,conversation_id:null!==(r=null==y?void 0:y.conversation_id)&&void 0!==r?r:"",bot_id:null!==(i=null==y?void 0:y.bot_id)&&void 0!==i?i:"",message_id:null!==(o=null==k?void 0:k.receive_message_id)&&void 0!==o?o:"",reply_id:null!==(a=null==w?void 0:w.send_message_id)&&void 0!==a?a:"",section_id:null!==(s=null==y?void 0:y.section_id)&&void 0!==s?s:"",scene:null!==(l=null==y?void 0:y.chat_scene)&&void 0!==l?l:v.b3.SCENE_KEYBOARD,is_onboarding:null==k?void 0:k.is_onboarding,is_soft_link:null==k?void 0:k.is_soft_link,message_type:null!==(c=null==k?void 0:k.receive_message_type)&&void 0!==c?c:v.LY.MESSAGE_TYPE_TEXT,is_cache:null==k?void 0:k.is_cache,use_skill:null!==(u=null==y?void 0:y.use_skill)&&void 0!==u?u:0,skill_id:null!==(d=null==y?void 0:y.skill_id)&&void 0!==d?d:null,skill_name:null!==(p=null==y?void 0:y.skill_name)&&void 0!==p?p:null,is_nova:null!==(m=null==y?void 0:y.is_nova)&&void 0!==m?m:0,content_length:null!==(h=null==k?void 0:k.receive_content_length)&&void 0!==h?h:0,onboarding_content_source:null!==(_=null==k?void 0:k.onboarding_content_source)&&void 0!==_?_:"",result:null==k?void 0:k.receive_result,...T},C=q(e).safeParse(E);z("receive_stream",E),null==t||t.addEventReportCount("receive_stream"),C.success?null==t||t.setReportTeaEventSuccess("receive_stream"):(null==t||t.setReportTeaEventFailed("receive_stream"),S(e,{tea_name:"receive_stream",tea_error_type:b.PARAMETER_KEY_OR_VALUE_ERROR,tea_error_reason:C.error.message,tea_error_field:(0,R.Z)(C.error.errors.map(e=>e.path)).join(","),success:0,chat_scene:(null==y?void 0:y.chat_slardar_scene)||f.V.DEFAULT}))},Q=e=>I.z.object({conversation_id:I.z.string(),duration:I.z.number().nonnegative().optional(),is_cache:I.z.number().int().min(0).max(1),message_id:I.z.string(),quantity:I.z.number().int().optional(),result:I.z.nativeEnum(v.nS).optional(),section_id:I.z.string(),success:I.z.nativeEnum(v.mk)}).passthrough(),Y=(e,t)=>{var n,r,i,o,a,s;let l=null==t?void 0:t.getRecordTimestamps(),c=null==t?void 0:t.getCommonTraceParams(),u=null==t?void 0:t.getTeaEventTraceParams("receive_suggests"),d=null==t?void 0:t.getTeaEventTraceParams("receive_batch_message"),p=null==t?void 0:t.getTeaEventOtherTraceParams(),v={duration:((null==l?void 0:l.receive_suggest_message_end)||0)-((null==l?void 0:l.receive_suggest_message_start)||0),conversation_id:null!==(n=null==c?void 0:c.conversation_id)&&void 0!==n?n:"",section_id:null!==(r=null==c?void 0:c.section_id)&&void 0!==r?r:"",success:null!==(i=null==u?void 0:u.receive_success)&&void 0!==i?i:0,quantity:null!==(o=null==u?void 0:u.receive_quantity)&&void 0!==o?o:0,result:null==u?void 0:u.receive_result,message_id:null!==(a=null==d?void 0:d.receive_message_id)&&void 0!==a?a:"",is_cache:null!==(s=null==u?void 0:u.is_cache)&&void 0!==s?s:0,...p},m=Q(e).safeParse(v);z("receive_prompt",v),null==t||t.addEventReportCount("receive_prompt"),m.success?null==t||t.setReportTeaEventSuccess("receive_prompt"):(null==t||t.setReportTeaEventFailed("receive_prompt"),S(e,{tea_name:"receive_prompt",tea_error_type:b.PARAMETER_KEY_OR_VALUE_ERROR,tea_error_reason:m.error.message,tea_error_field:(0,R.Z)(m.error.errors.map(e=>e.path)).join(","),success:0,chat_scene:(null==c?void 0:c.chat_slardar_scene)||f.V.DEFAULT}))},ee=((p={}).IS_BY_STEP_WRITING_STEP_BY_SAMPLE="step_by_sample",p.IS_BY_STEP_WRITING_STEP_BY_POPUP="step_by_popup",p.IS_BY_STEP_WRITING_NO_STEP_BY_POPUP="no_step_by_popup",p.IS_BY_STEP_WRITING_NO_STEP="no_step",p),et=e=>I.z.object({bot_id:I.z.string(),conversation_id:I.z.string(),duration:I.z.number().nonnegative().optional(),is_by_step_writing:I.z.nativeEnum(ee).optional(),is_cache:I.z.number().int().min(0).max(1),message_id:I.z.string(),message_type:I.z.nativeEnum(v.LY),original_message_id:I.z.string().optional(),result:I.z.nativeEnum(v.nS).optional(),section_id:I.z.string(),skill_id:I.z.string().or(I.z.null()),skill_name:I.z.string().or(I.z.null()),success:I.z.nativeEnum(v.mk),type:I.z.string()}).passthrough(),en=(e,t)=>{var n,r,i,o,a,s,l,c,u,d,p,m,h;let _=null==t?void 0:t.getRecordTimestamps(),g=null==t?void 0:t.getCommonTraceParams(),y=null==t?void 0:t.getTeaEventTraceParams("receive_batch_message"),k=null==t?void 0:t.getTeaEventOtherTraceParams(),w={duration:((null==_?void 0:_.receive_single_message_start)||0)-((null==_?void 0:_.send_message_start)||0),content_type:n=`${null==y?void 0:y.receive_content_type}`,success:null!==(r=null==y?void 0:y.receive_success)&&void 0!==r?r:0,conversation_id:null!==(i=null==g?void 0:g.conversation_id)&&void 0!==i?i:"",bot_id:null!==(o=null==g?void 0:g.bot_id)&&void 0!==o?o:"",message_id:null!==(a=null==y?void 0:y.receive_message_id)&&void 0!==a?a:"",section_id:null!==(s=null==g?void 0:g.section_id)&&void 0!==s?s:"",scene:null!==(l=null==g?void 0:g.chat_scene)&&void 0!==l?l:v.b3.SCENE_KEYBOARD,type:null!==(c=null==y?void 0:y.receive_message_type)&&void 0!==c?c:v.LY.MESSAGE_TYPE_TEXT,message_type:null!==(u=null==y?void 0:y.receive_message_type)&&void 0!==u?u:v.LY.MESSAGE_TYPE_TEXT,is_cache:null!==(d=null==y?void 0:y.is_cache)&&void 0!==d?d:0,use_skill:null!==(p=null==g?void 0:g.use_skill)&&void 0!==p?p:0,skill_id:null!==(m=null==g?void 0:g.skill_id)&&void 0!==m?m:null,skill_name:null!==(h=null==g?void 0:g.skill_name)&&void 0!==h?h:null,...k},T=et(e).safeParse(w);z("receive_answer",w),null==t||t.addEventReportCount("receive_answer"),T.success?null==t||t.setReportTeaEventSuccess("receive_answer"):(null==t||t.setReportTeaEventFailed("receive_answer"),S(e,{tea_name:"receive_answer",tea_error_type:b.PARAMETER_KEY_OR_VALUE_ERROR,tea_error_reason:T.error.message,tea_error_field:(0,R.Z)(T.error.errors.map(e=>e.path)).join(","),success:0,chat_scene:(null==g?void 0:g.chat_slardar_scene)||f.V.DEFAULT}))},er=e=>I.z.object({bot_id:I.z.string(),content_type:I.z.number(),conversation_id:I.z.string(),duration:I.z.number().nonnegative().optional(),from:I.z.string(),is_include_suggest:I.z.number().int().min(0).max(1),llm_intention:I.z.string().optional(),llm_intention_detail:I.z.string().optional(),reply_id:I.z.string(),retried:I.z.number(),section_id:I.z.string(),skill_id:I.z.string().or(I.z.null()),success:I.z.number(),type:I.z.string()}).passthrough(),ei=(e,t)=>{var n,r,i,o,a,s,l,c,u;let d=null==t?void 0:t.getRecordTimestamps(),p=null==t?void 0:t.getCommonTraceParams(),v=null==t?void 0:t.getTeaEventTraceParams("receive_batch_message"),m=null==t?void 0:t.getTeaEventTraceParams("send_message"),h=null==t?void 0:t.getTeaEventOtherTraceParams(),_={type:(null==v?void 0:v.receive_message_type)||"",from:(null==v?void 0:v.receive_from)||"",content_type:(null==v?void 0:v.receive_content_type)||0,success:null!==(n=null==v?void 0:v.receive_success)&&void 0!==n?n:0,section_id:null!==(r=null==p?void 0:p.section_id)&&void 0!==r?r:"",reply_id:null!==(i=null==m?void 0:m.send_message_id)&&void 0!==i?i:"",duration:((null==d?void 0:d.receive_batch_message_end)||0)-((null==d?void 0:d.receive_batch_message_first_text)||0),conversation_id:null!==(o=null==p?void 0:p.conversation_id)&&void 0!==o?o:"",is_include_suggest:0,retried:+(null!=v&&!!v.receive_retried),bot_id:null!==(a=null==p?void 0:p.bot_id)&&void 0!==a?a:"",llm_intention:null!==(s=null==v?void 0:v.llm_intention)&&void 0!==s?s:"",llm_intention_detail:null!==(l=null==v?void 0:v.llm_intention_detail)&&void 0!==l?l:"",skill_id:null!==(c=null==p?void 0:p.skill_id)&&void 0!==c?c:null,is_nova:null!==(u=null==p?void 0:p.is_nova)&&void 0!==u?u:0,...h},g=er(e).safeParse(_);z("message_total_answers_end",_),null==t||t.addEventReportCount("message_total_answers_end"),g.success?null==t||t.setReportTeaEventSuccess("message_total_answers_end"):(null==t||t.setReportTeaEventFailed("message_total_answers_end"),S(e,{tea_name:"message_total_answers_end",tea_error_type:b.PARAMETER_KEY_OR_VALUE_ERROR,tea_error_reason:g.error.message,tea_error_field:(0,R.Z)(g.error.errors.map(e=>e.path)).join(","),success:0,chat_scene:(null==p?void 0:p.chat_slardar_scene)||f.V.DEFAULT}))},eo=e=>I.z.object({bot_id:I.z.string(),connection_score:I.z.number().optional(),connection_type:I.z.number().optional(),conversation_id:I.z.string(),local_message_id:I.z.string(),section_id:I.z.string(),send_id:I.z.string(),skill_id:I.z.string().or(I.z.null()),type:I.z.string()}).passthrough(),ea=(e,t)=>{var n,r,i,o,a,s,l,c,u,d;if(!t)return;let p=null==t?void 0:t.getCommonTraceParams(),v=null==t?void 0:t.getTeaEventTraceParams("send_message"),m=null==t?void 0:t.getTeaEventOtherTraceParams(),h={type:null!==(n=v.send_message_type)&&void 0!==n?n:"",bot_id:null!==(r=p.bot_id)&&void 0!==r?r:"",send_id:null!==(i=v.send_message_id)&&void 0!==i?i:"",section_id:null!==(o=p.section_id)&&void 0!==o?o:"",local_message_id:null!==(a=v.send_local_message_id)&&void 0!==a?a:"",conversation_id:null!==(s=p.conversation_id)&&void 0!==s?s:"",skill_id:null!==(l=p.skill_id)&&void 0!==l?l:null,use_skill:null!==(c=p.use_skill)&&void 0!==c?c:0,skill_name:null!==(u=p.skill_name)&&void 0!==u?u:null,is_nova:null!==(d=p.is_nova)&&void 0!==d?d:0,...m},_=eo(e).safeParse(h);z("message_send_start",h),null==t||t.addEventReportCount("message_send_start"),_.success?null==t||t.setReportTeaEventSuccess("message_send_start"):(null==t||t.setReportTeaEventFailed("message_send_start"),S(e,{tea_name:"message_send_start",tea_error_type:b.PARAMETER_KEY_OR_VALUE_ERROR,tea_error_reason:_.error.message,tea_error_field:(0,R.Z)(_.error.errors.map(e=>e.path)).join(","),success:0,chat_scene:(null==p?void 0:p.chat_slardar_scene)||f.V.DEFAULT}))},es=e=>I.z.object({bot_id:I.z.string(),connection_score:I.z.number().optional(),connection_type:I.z.number().optional(),conversation_id:I.z.string(),duration:I.z.number().nonnegative(),local_message_id:I.z.string(),result:I.z.string(),retry:I.z.number(),section_id:I.z.string(),send_id:I.z.string(),skill_id:I.z.string().or(I.z.null()),success:I.z.number(),type:I.z.string()}).passthrough(),el=(e,t)=>{var n,r,i,o,a,s,l,c,u,d,p;let v=null==t?void 0:t.getRecordTimestamps(),m=null==t?void 0:t.getCommonTraceParams(),h=null==t?void 0:t.getTeaEventTraceParams("send_message"),_=null==t?void 0:t.getTeaEventOtherTraceParams(),g={success:null!==(n=null==h?void 0:h.send_success)&&void 0!==n?n:0,duration:((null==v?void 0:v.send_message_end)||0)-((null==v?void 0:v.send_message_start)||0),type:null!==(r=null==h?void 0:h.send_message_type)&&void 0!==r?r:"",section_id:null!==(i=null==m?void 0:m.section_id)&&void 0!==i?i:"",local_message_id:null!==(o=null==h?void 0:h.send_local_message_id)&&void 0!==o?o:"",conversation_id:null!==(a=null==m?void 0:m.conversation_id)&&void 0!==a?a:"",retry:null!==(s=null==h?void 0:h.send_retried)&&void 0!==s?s:0,skill_id:null!==(l=null==m?void 0:m.skill_id)&&void 0!==l?l:null,is_nova:null!==(c=null==m?void 0:m.is_nova)&&void 0!==c?c:0,bot_id:null!==(u=null==m?void 0:m.bot_id)&&void 0!==u?u:"",send_id:null!==(d=null==h?void 0:h.send_message_id)&&void 0!==d?d:"",result:null!==(p=null==h?void 0:h.send_result)&&void 0!==p?p:"",..._},y=es(e).safeParse(g);z("message_send_end",g),null==t||t.addEventReportCount("message_send_end"),y.success?null==t||t.setReportTeaEventSuccess("message_send_end"):(null==t||t.setReportTeaEventFailed("message_send_end"),S(e,{tea_name:"message_send_end",tea_error_type:b.PARAMETER_KEY_OR_VALUE_ERROR,tea_error_reason:y.error.message,tea_error_field:(0,R.Z)(y.error.errors.map(e=>e.path)).join(","),success:0,chat_scene:(null==m?void 0:m.chat_slardar_scene)||f.V.DEFAULT}))},ec=e=>I.z.object({bot_id:I.z.string(),content_type:I.z.number().optional(),conversation_id:I.z.string(),duration:I.z.number().nonnegative(),error_code:I.z.number().optional(),from:I.z.string(),llm_intention:I.z.string().optional(),llm_intention_detail:I.z.string().optional(),message_id:I.z.string(),retried:I.z.number(),skill_id:I.z.string().or(I.z.null()),status:I.z.number(),transmission_model:I.z.number().optional()}).passthrough(),eu=(e,t)=>{var n,r,i,o,a,s,l,c;let u=null==t?void 0:t.getRecordTimestamps(),d=null==t?void 0:t.getCommonTraceParams(),p=null==t?void 0:t.getTeaEventTraceParams("receive_batch_message"),v=null==t?void 0:t.getTeaEventOtherTraceParams(),m={conversation_id:null!==(n=null==d?void 0:d.conversation_id)&&void 0!==n?n:"",status:null!==(r=null==p?void 0:p.receive_status)&&void 0!==r?r:0,error_code:null==p?void 0:p.error_code,duration:((null==u?void 0:u.receive_batch_message_first_text)||0)-((null==u?void 0:u.send_message_start)||0),retried:+(null!=p&&!!p.receive_retried),message_id:null!==(i=null==p?void 0:p.receive_message_id)&&void 0!==i?i:"",from:(null==p?void 0:p.receive_from)||"",content_type:null==p?void 0:p.receive_content_type,bot_id:null!==(o=null==d?void 0:d.bot_id)&&void 0!==o?o:"",llm_intention:null!==(a=null==p?void 0:p.llm_intention)&&void 0!==a?a:"",llm_intention_detail:null!==(s=null==p?void 0:p.llm_intention_detail)&&void 0!==s?s:"",skill_id:null!==(l=null==d?void 0:d.skill_id)&&void 0!==l?l:null,is_nova:null!==(c=null==d?void 0:d.is_nova)&&void 0!==c?c:0,...v},h=ec(e).safeParse(m);z("message_receive_first_package",m),null==t||t.addEventReportCount("message_receive_first_package"),h.success?null==t||t.setReportTeaEventSuccess("message_receive_first_package"):(null==t||t.setReportTeaEventFailed("message_receive_first_package"),S(e,{tea_name:"message_receive_first_package",tea_error_type:b.PARAMETER_KEY_OR_VALUE_ERROR,tea_error_reason:h.error.message,tea_error_field:(0,R.Z)(h.error.errors.map(e=>e.path)).join(","),success:0,chat_scene:(null==d?void 0:d.chat_slardar_scene)||f.V.DEFAULT}))},ed=e=>I.z.object({bot_id:I.z.string(),connection_score:I.z.number().optional(),connection_type:I.z.number().optional(),conversation_id:I.z.string(),reply_id:I.z.string(),retried:I.z.number(),section_id:I.z.string(),skill_id:I.z.string().or(I.z.null()),stream:I.z.number()}).passthrough(),ep=(e,t)=>{var n,r,i,o,a,s,l,c;let u=null==t?void 0:t.getCommonTraceParams(),d=null==t?void 0:t.getTeaEventTraceParams("receive_batch_message"),p=null==t?void 0:t.getTeaEventTraceParams("send_message"),v=null==t?void 0:t.getTeaEventOtherTraceParams(),m={from:null!==(n=null==d?void 0:d.receive_from)&&void 0!==n?n:"",retried:+(null!=d&&!!d.receive_retried),content_type:null!==(r=null==d?void 0:d.receive_content_type)&&void 0!==r?r:0,section_id:null!==(i=null==u?void 0:u.section_id)&&void 0!==i?i:"",reply_id:null!==(o=null==p?void 0:p.send_message_id)&&void 0!==o?o:"",conversation_id:null!==(a=null==u?void 0:u.conversation_id)&&void 0!==a?a:"",bot_id:null!==(s=null==u?void 0:u.bot_id)&&void 0!==s?s:"",stream:1,skill_id:null!==(l=null==u?void 0:u.skill_id)&&void 0!==l?l:null,is_nova:null!==(c=null==u?void 0:u.is_nova)&&void 0!==c?c:0,...v},h=ed(e).safeParse(m);z("message_answer_start",m),null==t||t.addEventReportCount("message_answer_start"),h.success?null==t||t.setReportTeaEventSuccess("message_answer_start"):(null==t||t.setReportTeaEventFailed("message_answer_start"),S(e,{tea_name:"message_answer_start",tea_error_type:b.PARAMETER_KEY_OR_VALUE_ERROR,tea_error_reason:h.error.message,tea_error_field:(0,R.Z)(h.error.errors.map(e=>e.path)).join(","),success:0,chat_scene:(null==u?void 0:u.chat_slardar_scene)||f.V.DEFAULT}))},ev=e=>I.z.object({bot_id:I.z.string(),connection_score:I.z.number().optional(),connection_type:I.z.number().optional(),conversation_id:I.z.string(),from:I.z.string(),llm_intention:I.z.string().optional(),llm_intention_detail:I.z.string().optional(),message_id:I.z.string(),reply_id:I.z.string(),result:I.z.string(),retried:I.z.number(),section_id:I.z.string(),skill_id:I.z.string().or(I.z.null()),stream:I.z.number(),success:I.z.number(),type:I.z.string()}).passthrough(),ef=(e,t)=>{var n,r,i,o,a,s,l,c,u,d,p,v,m,h,_;let g=null==t?void 0:t.getRecordTimestamps(),y=null==t?void 0:t.getCommonTraceParams(),k=null==t?void 0:t.getTeaEventTraceParams("receive_batch_message"),w=null==t?void 0:t.getTeaEventTraceParams("send_message"),T=null==t?void 0:t.getTeaEventOtherTraceParams(),E={type:null!==(n=null==k?void 0:k.receive_message_type)&&void 0!==n?n:"",from:null!==(r=null==k?void 0:k.receive_from)&&void 0!==r?r:"",content_type:null!==(i=null==k?void 0:k.receive_content_type)&&void 0!==i?i:0,success:null!==(o=null==k?void 0:k.receive_success)&&void 0!==o?o:0,stream:1,section_id:null!==(a=null==y?void 0:y.section_id)&&void 0!==a?a:"",result:null!==(s=null==k?void 0:k.receive_result)&&void 0!==s?s:"",reply_id:null!==(l=null==w?void 0:w.send_message_id)&&void 0!==l?l:"",message_id:null!==(c=null==k?void 0:k.receive_message_id)&&void 0!==c?c:"",retried:null!==(u=null==k?void 0:k.receive_retried)&&void 0!==u?u:0,duration:((null==g?void 0:g.receive_single_message_end)||0)-((null==g?void 0:g.receive_single_message_start)||0),conversation_id:null!==(d=null==y?void 0:y.conversation_id)&&void 0!==d?d:"",bot_id:null!==(p=null==y?void 0:y.bot_id)&&void 0!==p?p:"",skill_id:null!==(v=null==y?void 0:y.skill_id)&&void 0!==v?v:null,use_skill:null!==(m=null==y?void 0:y.use_skill)&&void 0!==m?m:0,skill_name:null!==(h=null==y?void 0:y.skill_name)&&void 0!==h?h:null,is_nova:null!==(_=null==y?void 0:y.is_nova)&&void 0!==_?_:0,...T},C=ev(e).safeParse(E);z("message_answer_end",E),null==t||t.addEventReportCount("message_answer_end"),C.success?null==t||t.setReportTeaEventSuccess("message_answer_end"):(null==t||t.setReportTeaEventFailed("message_answer_end"),S(e,{tea_name:"message_answer_end",tea_error_type:b.PARAMETER_KEY_OR_VALUE_ERROR,tea_error_reason:C.error.message,tea_error_field:(0,R.Z)(C.error.errors.map(e=>e.path)).join(","),success:0,chat_scene:(null==y?void 0:y.chat_slardar_scene)||f.V.DEFAULT}))},em=e=>I.z.object({conversation_id:I.z.string(),bot_id:I.z.string(),message_id:I.z.string(),skill_id:I.z.nativeEnum(v.Zq).or(I.z.null()),skill_name:I.z.nativeEnum(v.r4).or(I.z.null()),total_duration:I.z.number().nonnegative().optional(),first_token_duration:I.z.number().nonnegative().optional()}).passthrough(),eh=(e,t)=>{let n=null==t?void 0:t.getCommonTraceParams(),r=null==t?void 0:t.getTeaEventTraceParams("receive_think_reason"),i=null==t?void 0:t.getTeaEventTraceParams("receive_batch_message"),o=null==t?void 0:t.getRecordTimestamps(),a={conversation_id:(null==n?void 0:n.conversation_id)||"",bot_id:(null==n?void 0:n.bot_id)||"",message_id:(null==i?void 0:i.receive_message_id)||"",skill_id:(null==n?void 0:n.skill_id)||null,skill_name:(null==n?void 0:n.skill_name)||null,total_duration:((null==o?void 0:o.receive_think_reason_end)||0)-((null==o?void 0:o.receive_think_reason_start)||0),first_token_duration:((null==o?void 0:o.receive_think_reason_first_text)||0)-((null==o?void 0:o.receive_think_reason_start)||0),whether_browsing:(null==r?void 0:r.whether_browsing)||0,is_finished:(null==r?void 0:r.receive_finished)||0},s=em(e).safeParse(a);z("deep_thinking_progress_end",a),null==t||t.addEventReportCount("deep_thinking_progress_end"),s.success?null==t||t.setReportTeaEventSuccess("deep_thinking_progress_end"):(null==t||t.setReportTeaEventFailed("deep_thinking_progress_end"),S(e,{tea_name:"deep_thinking_progress_end",tea_error_type:b.PARAMETER_KEY_OR_VALUE_ERROR,tea_error_reason:s.error.message,tea_error_field:(0,R.Z)(s.error.errors.map(e=>e.path)).join(","),success:0,chat_scene:(null==n?void 0:n.chat_slardar_scene)||f.V.DEFAULT}))},e_=e=>I.z.object({conversation_id:I.z.string(),bot_id:I.z.string(),message_id:I.z.string(),skill_id:I.z.nativeEnum(v.Zq).or(I.z.null()),skill_name:I.z.nativeEnum(v.r4).or(I.z.null()),total_duration:I.z.number().nonnegative().optional(),first_token_duration:I.z.number().nonnegative().optional(),whether_browsing:I.z.number().int().min(0).max(1),is_finished:I.z.number().int().min(0).max(1)}).passthrough(),eg=(e,t)=>{let n=null==t?void 0:t.getCommonTraceParams(),r=null==t?void 0:t.getRecordTimestamps(),i=null==t?void 0:t.getTeaEventTraceParams("receive_batch_message"),o={conversation_id:(null==n?void 0:n.conversation_id)||"",bot_id:(null==n?void 0:n.bot_id)||"",message_id:(null==i?void 0:i.receive_message_id)||"",skill_id:(null==n?void 0:n.skill_id)||null,skill_name:(null==n?void 0:n.skill_name)||null,total_duration:((null==r?void 0:r.receive_batch_message_end)||0)-((null==r?void 0:r.receive_batch_message_first_text)||0),first_token_duration:((null==r?void 0:r.receive_batch_message_first_text)||0)-((null==r?void 0:r.receive_think_reason_start)||0),whether_browsing:(null==i?void 0:i.whether_browsing)||0,is_finished:(null==i?void 0:i.receive_finished)||0},a=e_(e).safeParse(o);z("deep_thinking_main_text_end",o),null==t||t.addEventReportCount("deep_thinking_main_text_end"),a.success?null==t||t.setReportTeaEventSuccess("deep_thinking_main_text_end"):(null==t||t.setReportTeaEventFailed("deep_thinking_main_text_end"),S(e,{tea_name:"deep_thinking_main_text_end",tea_error_type:b.PARAMETER_KEY_OR_VALUE_ERROR,tea_error_reason:a.error.message,tea_error_field:(0,R.Z)(a.error.errors.map(e=>e.path)).join(","),success:0,chat_scene:(null==n?void 0:n.chat_slardar_scene)||f.V.DEFAULT}))},ey="send_message_status",eb="message_send_start",eS="message_send_end",ek="deep_thinking_progress_end",ew="deep_thinking_main_text_end",eT=[ew,ek,"message_answer_end","message_answer_start","message_receive_first_package",eS,eb,"message_total_answers_end","receive_answer","receive_prompt","receive_stream",$,ey];var eE=n(876029),eR=n(40974);function eC(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class eI{constructor(){eC(this,"pluginIdentifier",eR.H),eC(this,"beforeMessageSending",(e,t)=>{var n,r,i,o,a,s,l;let c=(0,w.h)(e),u=(0,w.S)(e);return null==u||u.setCommonTraceParam({chat_slardar_scene:null==c?void 0:null===(r=c.params)||void 0===r?void 0:null===(n=r.slardar)||void 0===n?void 0:n.chat_scene,conversation_id:t.conversation_id,conversation_type:t.conversation_type,bot_id:null==t?void 0:t.bot_id,use_skill:+(null!=t&&null!==(i=t.skill)&&void 0!==i&&!!i.skill_id_no_default),skill_id:null!==(l=null==t?void 0:null===(o=t.skill)||void 0===o?void 0:o.skill_id_no_default)&&void 0!==l?l:null,skill_name:(0,g.Nu)(null==t?void 0:null===(a=t.skill)||void 0===a?void 0:a.skill_type_no_default),section_id:null==t?void 0:t.section_id,is_nova:+(null!==(s=t.local)&&void 0!==s&&!!s.isNova)}),t}),eC(this,"onMessageSendingStart",(e,t)=>{var n,r,i,o,a,s,l,c,u;let d=(0,w.S)(e),p=t.local_conversation_id||t.conversation_id,f=eE._.getInstance(p).startSpan("client_send_message");null==d||d.setTeaEventTraceParams("send_message",{send_local_message_id:t.local_message_id,collection_id:null===(n=t.ext)||void 0===n?void 0:n.collection_id,whether_use_deep_thinking:(null===(r=t.ext)||void 0===r?void 0:r.use_deep_think)==="2"?v.mF.WHETHER_USE_DEEP_THINKING_AUTO:(null===(i=t.ext)||void 0===i?void 0:i.use_deep_think)==="1"?v.mF.WHETHER_USE_DEEP_THINKING_YES:(null===(o=t.ext)||void 0===o?void 0:o.use_deep_think)==="0"?v.mF.WHETHER_USE_DEEP_THINKING_NO:v.mF.WHETHER_USE_DEEP_THINKING_NO_ENTRANCE}),null==d||d.setRecordTimestamp("send_message_start",performance.now());let h=null==t?void 0:null===(a=t.ext)||void 0===a?void 0:a.parent_span_id,_=(null==t?void 0:null===(s=t.local_info)||void 0===s?void 0:s.trace_id)||(null==t?void 0:null===(l=t.ext)||void 0===l?void 0:l.inner_trace_id);return h&&f.setParentSpanId(h),_&&f.setTraceId(_),(0,m.bf)(t)||(null==d?void 0:null===(c=d.getCommonTraceParams())||void 0===c?void 0:c.chat_scene)==="regenerate"||(null==d?void 0:null===(u=d.teaEventOtherTraceParams)||void 0===u?void 0:u.trace)==="0"||(G(t,d),ea(t,d)),t}),eC(this,"onMessageSendingEnd",(e,t)=>{var n,r,i,o,a,s,l,c,u,d,p;let f=(0,w.S)(e),h=t.local_conversation_id||t.conversation_id,_=eE._.getInstance(h);null==f||f.setTeaEventTraceParams("send_message",{send_message_id:t.message_id,send_success:+((null===(n=t.final_status)||void 0===n?void 0:n.message)==="Success"),send_result:(null===(d=t.final_status)||void 0===d?void 0:d.message)==="Timeout"?v.nS.RESULT_ACK_TIMEOUT:(null===(p=t.final_status)||void 0===p?void 0:p.message)==="Error"?v.nS.SHARK:void 0,send_from:null===(r=t.local_info)||void 0===r?void 0:r.from,send_retried:+(null!==(i=t.local_info)&&void 0!==i&&!!i.retried)}),null==f||f.setCommonTraceParam({conversation_id:t.conversation_id,conversation_type:t.conversation_type}),null==f||f.setRecordTimestamp("send_message_end",performance.now()),t.local_conversation_id&&eE._.moveInstance(t.local_conversation_id,t.conversation_id);let{rootSpan:g}=_;return g&&(g.setTag("client_ack_duration",g.elapse()),g.logId=null===(s=t.local_info)||void 0===s?void 0:s.log_id,g.setTag("message_id",t.message_id),null==g||g.setTag("client_reply_status_code",null===(l=t.error_details)||void 0===l?void 0:l.error_code),null==g||g.setTag("client_reply_status_msg",null===(c=t.error_details)||void 0===c?void 0:c.error_message),(null===(u=t.final_status)||void 0===u?void 0:u.message)==="Error"&&_.finishAndReport()),(0,m.bf)(t)||(null==f?void 0:null===(o=f.getCommonTraceParams())||void 0===o?void 0:o.chat_scene)==="regenerate"||(null==f?void 0:null===(a=f.teaEventOtherTraceParams)||void 0===a?void 0:a.trace)==="0"||(V(t,f),el(t,f)),t}),eC(this,"onBatchMessageReceivingStart",(e,t)=>{let n=(0,w.S)(e);return null==n||n.setRecordTimestamp("receive_batch_message_start",performance.now()),t}),eC(this,"onMessageReceivingStart",(e,t)=>{var n,r,i,o;let a=(0,w.S)(e);return null==a||a.setTeaEventTraceParams("receive_batch_message",{receive_message_id:null==t?void 0:t.message_id,receive_content_type:null==t?void 0:t.content_type,receive_message_type:(0,_.tk)(t),whether_browsing:+(null!=t&&null!==(n=t.content_obj)&&void 0!==n&&!!n.search_references),receive_from:null===(r=t.local_info)||void 0===r?void 0:r.from,receive_retried:+(null!==(i=t.local_info)&&void 0!==i&&!!i.retried)}),null==a||a.setTeaEventTraceParams("receive_think_reason",{whether_browsing:+(null!=t&&null!==(o=t.content_obj)&&void 0!==o&&!!o.search_references)}),null==a||a.setRecordTimestamp("receive_single_message_start",performance.now()),a&&t.has_think_reason&&!a.getRecordTimestamp("receive_think_reason_start")&&a.setRecordTimestamp("receive_think_reason_start",performance.now()),t}),eC(this,"onMessageReceivingUpdate",(e,t)=>{var n,r,i,o;let a=(0,w.S)(e),s=eE._.getInstance(t.conversation_id).rootSpan;return a&&(t.has_think_reason&&(null===(n=t.content_obj)||void 0===n?void 0:n.think)&&!a.getRecordTimestamp("receive_think_reason_first_text")&&a.setRecordTimestamp("receive_think_reason_first_text",performance.now()),t.has_think_reason&&(null===(r=t.content_obj)||void 0===r?void 0:r.text)&&!a.getRecordTimestamp("receive_think_reason_end")&&(a.setRecordTimestamp("receive_think_reason_end",performance.now()),a.setTeaEventTraceParams("receive_think_reason",{receive_finished:1}),eh(t,a)),a.getRecordTimestamp("receive_batch_message_first_token")||(a.setRecordTimestamp("receive_batch_message_first_token",performance.now()),en(t,a),ep(t,a)),(null===(i=t.content_obj)||void 0===i?void 0:i.text)&&!a.getRecordTimestamp("receive_batch_message_first_token")&&(a.setRecordTimestamp("receive_batch_message_first_token",performance.now()),en(t,a),ep(t,a)),(null===(o=t.content_obj)||void 0===o?void 0:o.text)&&!a.getRecordTimestamp("receive_batch_message_first_text")&&(a.setRecordTimestamp("receive_batch_message_first_text",performance.now()),null==s||s.setTag("client_receive_first_token_duration",(a.getRecordTimestamp("receive_batch_message_first_text")||0)-(a.getRecordTimestamp("send_message_start")||0)),eu(t,a))),t}),eC(this,"onMessageReceivingEnd",(e,t)=>{var n,r,i,o,a,s,l,c,u,d,p,f,_,g,y,b,S,k,T,E,R,C,I;let x=(0,w.S)(e),N=eE._.getInstance(t.conversation_id),M=N.rootSpan;return null==x||x.setRecordTimestamp("receive_single_message_end",performance.now()),null==x||x.setTeaEventTraceParams("receive_batch_message",{onboarding_content_source:null==t?void 0:null===(n=t.ext)||void 0===n?void 0:n.onboarding_content_source,receive_content_length:null==t?void 0:null===(i=t.content_obj)||void 0===i?void 0:null===(r=i.text)||void 0===r?void 0:r.length,is_onboarding:+!!(0,h.qF)(t),is_soft_link:+!!(0,h.f47)(t),is_cache:+("1"===String(null==t?void 0:null===(o=t.ext)||void 0===o?void 0:o.is_from_cache)),receive_success:+((null===(a=t.final_status)||void 0===a?void 0:a.message)==="Success"),receive_status:(null===(E=(T=t).final_status)||void 0===E?void 0:E.message)==="Timeout"?2:(null===(R=T.final_status)||void 0===R?void 0:R.message)==="Error"?1:(null===(C=T.final_status)||void 0===C?void 0:C.message)==="Success"?0:3*((null===(I=T.final_status)||void 0===I?void 0:I.message)==="Broken"),error_code:null==t?void 0:null===(s=t.error_details)||void 0===s?void 0:s.error_code,receive_finished:+!!(0,m.zu)(t),llm_intention:null===(c=t.verbose)||void 0===c?void 0:null===(l=c.seed_intention)||void 0===l?void 0:l.intention,llm_intention_detail:null===(d=t.verbose)||void 0===d?void 0:null===(u=d.seed_intention)||void 0===u?void 0:u.detail,receive_result:(null===(S=t.final_status)||void 0===S?void 0:S.message)==="Timeout"?v.nS.RESULT_STREAM_TIMEOUT:(null===(k=t.final_status)||void 0===k?void 0:k.message)==="Error"?v.nS.RESULT_STREAM_ERROR:void 0}),(null==t?void 0:null===(p=t.content_obj)||void 0===p?void 0:p.text)&&(null==M||M.setTag("client_receive_answer_duration",M.elapse()),null==M||M.setTag("client_answer_text_length",null==t?void 0:null===(g=t.content_obj)||void 0===g?void 0:null===(_=g.text)||void 0===_?void 0:_.length)),(null===(f=t.error_details)||void 0===f?void 0:f.has_error)&&M&&(M.setTag("client_reply_status_code",null===(y=t.error_details)||void 0===y?void 0:y.error_code),M.setTag("client_reply_status_msg",null===(b=t.error_details)||void 0===b?void 0:b.error_message),N.finishAndReport()),J(t,x),ef(t,x),t}),eC(this,"onBatchMessageReceivingEnd",(e,t)=>{var n;let r=(0,w.S)(e);return null==r||r.setRecordTimestamp("receive_batch_message_end",performance.now()),ei(t,r),t.has_think_reason&&(null===(n=t.content_obj)||void 0===n?void 0:n.text)&&eg(t,r),t}),eC(this,"onSuggestReceivingUpdate",(e,t)=>{let n=(0,w.S)(e),r=eE._.getInstance(t.conversation_id).rootSpan,i=null==n?void 0:n.getTeaEventTraceParams("receive_suggests");return null==n||n.setTeaEventTraceParams("receive_suggests",{receive_count:((null==i?void 0:i.receive_count)||0)+1}),(null==i?void 0:i.receive_count)||null==r||r.setTag("client_first_suggestion_duration",r.elapse()),null==r||r.setTag("client_suggestion_duration",r.elapse()),t}),eC(this,"onSuggestReceivingEnd",(e,t)=>{var n,r,i,o,a,s,l;let c=(0,w.S)(e);return null==c||c.setTeaEventTraceParams("receive_suggests",{receive_success:(0,h.DRY)(t)&&(null===(r=t.content_obj)||void 0===r?void 0:null===(n=r.suggest)||void 0===n?void 0:n.length)>0?1:0,receive_result:(0,h.DRY)(t)&&(null===(o=t.content_obj)||void 0===o?void 0:null===(i=o.suggest)||void 0===i?void 0:i.length)>0?void 0:v.nS.RESULT_PROMPT_EMPTY,receive_quantity:(0,h.DRY)(t)&&(null===(s=t.content_obj)||void 0===s?void 0:null===(a=s.suggest)||void 0===a?void 0:a.length)||0,is_cache:+("1"===String(null==t?void 0:null===(l=t.ext)||void 0===l?void 0:l.is_from_cache))}),null==c||c.setRecordTimestamp("receive_suggest_message_end",performance.now()),Y(t,c),t}),eC(this,"onMessageSessionEnd",(e,t)=>{var n,r,i,o,a,s,l;let c=(0,w.S)(e),u=eE._.getInstance(t.conversation_id),d=u.rootSpan,p=null==c?void 0:c.getEventReportCounts(),m=null==c?void 0:c.getCommonTraceParams(),h=null==c?void 0:c.getTeaEventTraceParams("send_message"),_=null==c?void 0:c.getSuccessTeaEventCounts(),g=null==c?void 0:c.getFailTeaEventCounts(),y={},b=[],S=((null===(n=t.final_status)||void 0===n?void 0:n.session)==="Broken"||(null===(r=t.final_status)||void 0===r?void 0:r.session)==="ExpectError"?[]:(null==h?void 0:h.send_success)!==v.mk.SUCCESS?[eS,eb,$,ey]:eT).filter(e=>!(!t.has_think_reason&&[ew,ek].includes(e)));if(S.forEach(e=>{y[e]=(null==p?void 0:p[e])||0,0===y[e]&&b.push(e)}),k(t,{chat_scene:(null==m?void 0:m.chat_slardar_scene)||f.V.DEFAULT,success_count:_||0,fail_count:g||0,miss_count:b.length,record_count:S.length-b.length,miss_reason:`${b.join(", ")}`}),null==d||d.setTag("client_total_duration",d.elapse()),null===(i=t.local_info)||void 0===i?void 0:i.trace_pkg_info){null==d||d.setTag("client_total_package_length",t.local_info.trace_pkg_info.length);let e=null===(a=t.local_info)||void 0===a?void 0:a.trace_pkg_info.filter(e=>e.isText).length;null==d||d.setTag("client_answer_package_length",e)}return(null===(o=t.error_details)||void 0===o?void 0:o.has_error)?(null==d||d.setTag("client_reply_status_code",null===(s=t.error_details)||void 0===s?void 0:s.error_code),null==d||d.setTag("client_reply_status_msg",null===(l=t.error_details)||void 0===l?void 0:l.error_message)):null==d||d.setTag("client_reply_status_code",0),u.finishAndReport(),t})}}},847877:function(e,t,n){"use strict";n.r(t),n.d(t,{MessageTeaTraceMessageLifeCyclePluginMatcher:function(){return r}});let r={pluginIdentifier:n(40974).H,matchPlugin:e=>!0,matchPluginWithPayload:e=>!0}},980402:function(e,t,n){"use strict";n.d(t,{r:function(){return c},y:function(){return u}});var r=n(162063),i=n(644367),o=n(468494),a=n(322639),s=n(558882);let l={};async function c(e,t,n){o.useFeedStore.getState().updateConversationMessageIndex({conversationId:e,messageIndex:n,readMessageIndex:t,badgeCount:n,readBadgeCount:t}),await d(e)(t)}function u(e,t,n){if(n===e){c(e,t,t);return}let r=o.useFeedStore.getState().conversationMap[e];if(!n&&(0,a.kJ)(r)){c(e,t,t);return}o.useFeedStore.getState().updateConversationMessageIndex({conversationId:e,messageIndex:t,badgeCount:t})}let d=e=>(l[e]||(l[e]=(0,r.Z)(async t=>{try{return(await (0,s.E)()).markConversationRead({conversation_id:e,latest_read_idx:t})}catch(e){i.k.persist.error({message:"report conversation read index failed",error:e})}},500)),l[e])},205379:function(e,t,n){"use strict";n.d(t,{zU:function(){return i}});var r=n(468494);function i(e){let{localConversationMap:t}=r.useFeedStore.getState();return e in t}},403818:function(e,t,n){"use strict";n.r(t),n.d(t,{createLocalConversationId:function(){return s.hm},conversationTypeByIdSelector:function(){return c.QW},defaultConversationState:function(){return s.jb},isGuanFangBotType:function(){return o.ar},localConversationSelector:function(){return u.dg},isConversationReviewStatusRejected:function(){return o.WC},mainConvBotIdSelector:function(){return u.IO},threadListDataSelector:function(){return u.aG},isSamantha:function(){return o.Xo},initFeedStore:function(){return d.initFeedStore},getBotConversationListFromConversationLinks:function(){return i.X0},findLastLink:function(){return r.v},threadIdByConversationIdSelector:function(){return c.px},getChatTypeForTeaGetter:function(){return l.l},isCocoSubConversation:function(){return o.p5},getConversationInfoByConversationIdSelector:function(){return c.WX},isCocoConversationType:function(){return o.x9},LoadConversationListType:function(){return s.LU},isCocoConversation:function(){return o.kJ},createConversationSlice:function(){return s.FO},isBotConversation:function(){return o.jx},conversationSelector:function(){return u.jo},findFirstConversationLink:function(){return r._},isBotConversationType:function(){return o.CC},getLocalThreadId:function(){return i.eg},isCocoBotType:function(){return o.el},ConversationType:function(){return s.i1},deleteConversationInMap:function(){return a.$},getBotIdByConversationIdSelector:function(){return c.Kn},getInfoByConversationIdSelector:function(){return c.Bu},getThreadLinksFromConversationLinks:function(){return i.yx},isCocoSubConversationType:function(){return o.qU},createStore:function(){return d.createStore},botConversationListDataSelector:function(){return u.EQ},isLocalThreadId:function(){return i.r7},mainConversationLinkSelector:function(){return u.kB},conversationListSelector:function(){return u.N$},isUserBotType:function(){return o.Mh},getUnreadCount:function(){return i.k9},useFeedStore:function(){return d.useFeedStore}});var r=n(969003),i=n(279349),o=n(322639),a=n(137726),s=n(902493),l=n(886520),c=n(792288),u=n(234761),d=n(468494)},969003:function(e,t,n){"use strict";n.d(t,{_:function(){return o},v:function(){return i}});var r=n(260325);let i=(e,t)=>(0,r.Z)(e||[],e=>t(e)),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.find(e=>!e.isLocalConversation&&!!e.conversationId)}},133774:function(e,t,n){"use strict";n.r(t),n.d(t,{ChatGuidanceService:function(){return p}});var r=n(93708),i=n(729813);let o=e=>{(0,r.Wp)("chatGuidanceStore").setState({appear:e})},a=e=>{(0,r.Wp)("chatGuidanceStore").setState({skillGuidancePageFrom:e})},s=e=>{(0,r.Wp)("chatGuidanceStore").setState({sidebarSkills:null==e?void 0:e.sidebarSkills,onboardingSkills:null==e?void 0:e.onboardingSkills})},l=e=>{(0,r.Wp)("chatGuidanceStore").setState({skillConfig:null==e?void 0:e.onboarding_skills})},c=e=>{(0,r.Wp)("chatGuidanceStore").setState({sidebarSkills:e})};var u=n(693048);function d(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p{initEventBinding(){i.v.on("chat.service.resetAll",this.resetStore)}unbindEvent(){i.v.off("chat.service.resetAll",this.resetStore)}constructor(){d(this,"setAppear",o),d(this,"setSkillGuidancePageFrom",a),d(this,"processSkillList",s),d(this,"processSamanthaSkills",l),d(this,"setSidebarSkills",c),d(this,"resetStore",()=>{(0,r.Wp)("chatGuidanceStore").setState(u.d)}),d(this,"destroy",()=>{this.unbindEvent()}),this.initEventBinding()}}},380626:function(e,t,n){"use strict";n.r(t),n.d(t,{ChatInputCoreService:function(){return i},chatInputCoreServiceContainer:function(){return o},createChatInputCoreService:function(){return a}});var r=n(144245);class i{constructor(){var e,t,n;t=void 0,(e="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e="ctx","string"))?n:n+"")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}}let o=(0,r.B)(),a=()=>(o.service||(o.service=new i),o.service)},819486:function(e,t,n){"use strict";n.r(t),n.d(t,{AttachmentsStoreService:function(){return A}});var r=n(577518),i=n(817835),o=n(607278),a=n(986091),s=n(561200),l=n(93708),c=n(15348),u=n(851510),d=n(468494),p=n(886421),v=n(17135),f=n(51679),m=n(967037);let h=(e,t)=>{let{chatId:n,skillType:r="default"}=t;n&&(0,l.Wp)("attachmentsStore").setState((0,s.Uy)(t=>(0,i.Z)(t,["attachmentsMap",n,`_${r}`],(0,o.Z)(e)?e(_({chatId:n,skillType:r})):e)))},_=e=>{var t,n;let{chatId:r,skillType:i="default"}=e;return r&&null!==(n=null===(t=(0,l.Wp)("attachmentsStore").getState().attachmentsMap[r])||void 0===t?void 0:t[`_${i}`])&&void 0!==n?n:[]},g=e=>{let{type:t,fileName:n,from:i,fileKey:o,size:a,blobUrl:s,url:c}=e,u=(0,r.Z)(),d={type:t,fileName:n,localKey:u,from:i,size:a,url:c};h(e=>[...e,d],e);let p=(0,l.Wp)("attachmentUploadStore");"link"!==t&&p.setState(e=>{let n={...e.preprocessTaskMap,[u]:{type:t,key:o,localKey:u,percent:100,loading:!1,failed:!1,fileKey:o,parseState:1,parsePercent:100,size:a,blobUrl:s}};return{...e,preprocessTaskMap:n}})},y=e=>{var t,n;let{chatId:r,skillType:i}=e;return null===(n=(0,l.GX)("attachmentUploadStore").preGeneratedLocalMessageIdMap)||void 0===n?void 0:null===(t=n[r])||void 0===t?void 0:t[`_${i}`]},b=e=>{var t;let{chatId:n,skillType:r="default",disablePreprocess:i,file:o,type:a,ctx:s}=e,u=(null===(t=d.useFeedStore.getState().conversationMap[n])||void 0===t?void 0:t.last_section_id)||"";(0,c.D)("attachmentUploadStoreService").then(t=>{var c,d;let p=(0,l.GX)("attachmentUploadStore"),v=y({chatId:n,skillType:r});v||null==t||t.updatePreGeneratedLocalMessageId(e),v=y({chatId:n,skillType:r});let{local_key:f}=null!==(d=null==t?void 0:t.preprocessFile(o,a,s,{preHandle:i?void 0:{version:"pre_handle_v2",preGeneratedLocalMessageId:v||"",sectionId:u,enableImageVlm:null===(c=p.attachmentUploadConfig)||void 0===c?void 0:c.enableImageVlm}}))&&void 0!==d?d:{};if(f){let t={type:a,file:o,localKey:f,from:s.from};h(e=>[...e,t],e)}})},S=async e=>{let{files:t,type:n,ctx:r}=e,i=await (0,c.D)("attachmentUploadStoreService");if(!i)return;let{local_key:o}=await i.preprocessDir(t,n,r,{preHandle:{version:"pre_handle_code"}}),a=t[0].webkitRelativePath,s=null==a?void 0:a.split("/")[0],l={type:"directory",files:t,localKey:o,from:r.from,dirName:s};h(e=>[...e,l],e)},k=e=>{let{url:t,fileType:n,...r}=e;h(e=>[...e,{type:"link",url:t,fileType:n}],r)},w=async e=>{let{url:t,ctx:n}=e,r=await (0,c.D)("attachmentUploadStoreService");if(!r)return;let{local_key:i}=r.preprocessGithubLink(t,n),o={type:"link",url:t,localKey:i};h(e=>[...e,o],e)},T=e=>{let{index:t,url:n,fileType:r,...i}=e;h(e=>{let i=e[t];if((null==i?void 0:i.type)==="link"&&i.url===n)return e;let o=[...e];return o.splice(t,1,{type:"link",url:n,fileType:r}),o},i)},E=e=>{let{key:t,fileName:n,size:r,...i}=e;h(e=>[...e,{type:"remote",key:t,fileName:n,size:r,from:"remote"}],i)},R=async e=>{let t=e.filter(e=>!("from"in e&&"ai-space"===e.from)).map(e=>{if((0,u.Or)(e)||(0,u.zE)(e)){let t=(0,l.Wp)("attachmentUploadStore").getState().preprocessTaskMap[e.localKey];return{uri:null==t?void 0:t.key,data_type:(0,u.Or)(e)?"image":"file"}}}).filter(e=>!!(null==e?void 0:e.uri)),n=(0,m.zQ)({eventName:"delete_attachment_files",meta:{count:e.length,uri_count:t.length,types:e.map(e=>e.type).join(",")}});if((0,a.Z)(t)){n.success({meta:{reason:"delete_attachment_files_empty"}});return}try{await f.SI.DeleteFiles({uris:t}),n.addDurationPoint("success"),n.success()}catch(e){n.error({reason:"delete_attachment_files_error",error:e instanceof Error?e:Error(String(e))})}},C=e=>{let{options:t,index:n,...r}=e,{hardDelete:i=!0}=null!=t?t:{},o=_(r),s=o[n];if(!s)return;let d=o.filter(e=>e!==s);if(((0,u.Or)(s)||(0,u.zE)(s))&&(0,c.D)("attachmentUploadStoreService").then(e=>{null==e||e.cancel(s.localKey)}),!(0,u.u$)(s)&&!(0,u.Q1)(s)&&!(0,u.zj)(s)){let e=(0,l.Wp)("attachmentUploadStore").getState().preprocessTaskMap[s.localKey];(0,v.trackEvent)("click_attachment_delete",{bot_id:(0,p.SR)(r.chatId),uri:e.key||"",success:100===e.percent?"1":"0"})}h(d,r),(0,a.Z)(d)&&(0,c.D)("attachmentUploadStoreService").then(e=>{null==e||e.updatePreGeneratedLocalMessageId(r)}),i&&R([s])},I=e=>{let{options:t,...n}=e,{hardDelete:r=!1}=null!=t?t:{};(0,c.D)("attachmentUploadStoreService").then(e=>{null==e||e.updatePreGeneratedLocalMessageId(n)}),r&&R(_(n)),h([],n)},x=e=>{(0,l.Wp)("attachmentsStore").setState((0,s.Uy)(t=>{t.attachmentsMap[e.chatId]={}}))},N=()=>{(0,l.Wp)("attachmentsStore").setState((0,s.Uy)(e=>{e.attachmentsMap={}}))},M=e=>{let{index:t,...n}=e,r=_(n)[t];!(!r||(0,u.u$)(r)||(0,u.Q1)(r))&&(0,c.D)("attachmentUploadStoreService").then(e=>{var t,i;null==e||e.reUpload(null!==(t=r.localKey)&&void 0!==t?t:"",null!==(i=(0,p.SR)(n.chatId))&&void 0!==i?i:"")})};function P(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class A{constructor(){P(this,"addAttachment",b),P(this,"addDirAttachment",S),P(this,"deleteAttachment",C),P(this,"clearAttachments",I),P(this,"clearChatAttachments",x),P(this,"clearAllAttachments",N),P(this,"reuploadAttachment",M),P(this,"addLink",k),P(this,"addGitHubLink",w),P(this,"replaceLink",T),P(this,"addRemoteAttachment",E),P(this,"addAttachmentDirectly",g)}}},579113:function(e,t,n){"use strict";n.r(t),n.d(t,{ChatInputStoreService:function(){return I}});var r=n(145625),i=n(93708),o=n(729813),a=n(444614),s=n(118200),l=n(563323),c=n(561200),u=n(51679),d=n(967037);let p=e=>{(0,i.Wp)("skillStore").setState({recommendSkills:e})},v=e=>{let{recommendSkills:t}=(0,i.GX)("skillStore");if(!t||0===t.length)return!1;let n=null==t?void 0:t[0];return!!n&&n.skill_type===e},f=e=>{if(v(e)){var t;let e=[...null!==(t=(0,i.GX)("skillStore").recommendSkills)&&void 0!==t?t:[]];e.shift(),(0,i.Wp)("skillStore").setState({recommendSkills:e})}},m=e=>{(0,i.Wp)("chatInputStore").setState((0,c.Uy)(t=>{t.skillConfig={...t.skillConfig,...e}}))},h=e=>{var t;let{skillType:n,eventName:r,...o}=e;return(0,i.Wp)("chatInputStore").setState((0,c.Uy)(e=>{var t,i;null===(i=e.skillReportEvents[n])||void 0===i||null===(t=i[r])||void 0===t||t.cancel(),e.skillReportEvents[n]={[r]:(0,d.zQ)({eventName:r,...o,once:!0})}})),null===(t=(0,i.GX)("chatInputStore").skillReportEvents[n])||void 0===t?void 0:t[r]},_=e=>{var t;let{skillType:n,eventName:r}=e;return null===(t=(0,i.GX)("chatInputStore").skillReportEvents[n])||void 0===t?void 0:t[r]},g=()=>{(0,i.Wp)("chatInputStore").setState({skillReportEvents:{}})},y=(e,t)=>{(0,i.Wp)("chatInputStore").setState((0,c.Uy)(n=>{n.sendMessageStatusMap[e]=t}))},b=e=>(0,i.Wp)("chatInputStore").setState({skill_drop_down_visible:e}),S=(e,t)=>{(0,i.Wp)("chatInputStore").setState((0,c.Uy)(n=>{let r=n.sendMessageStatusMap[e];!(0,a.Z)(r)&&(n.sendMessageStatusMap[t]=r,setTimeout(()=>{(0,i.Wp)("chatInputStore").setState((0,c.Uy)(t=>{delete t.sendMessageStatusMap[e]}))},3e4))}))},k=(e,t)=>{(0,i.Wp)("chatInputStore").setState((0,c.Uy)(n=>{n.userPreferences[e]=t}))},w=async e=>{let{inputSkills:t}=(0,i.GX)("chatInputStore");if(!t)return;let n=t.find(t=>t.skill_type===e),r=t.findIndex(t=>t.skill_type===e);if(!n||n.sticky)return;let o=(0,d.zQ)({eventName:"pin_skill_order",meta:{skill_type:e}}),a=(0,s.Z)((0,i.GX)("launcherRawSettingStore"),"settingData.ab_config.ab_results.trim_landing_page_skills")?-1:(0,l.Z)(t,e=>!!e.sticky),c=[...t];c.splice(r,1),c.splice(a+1,0,n);try{await u.mH.UpdateSkillsOrder({input_skill:c,latest_used_skill:e}),(0,i.Wp)("chatInputStore").setState({inputSkills:c}),(0,i.Wp)("skillStore").setState({inputSkills:c}),f(e),o.addDurationPoint("success"),o.success()}catch(e){o.error({error:e instanceof Error?e:Error(String(e)),reason:"update_skills_order_error"})}},T=async e=>{if(v(e)){let t=(0,d.zQ)({eventName:"close_recommend_skill",meta:{skill_type:e}});try{await u.mH.DisableRecommendSkill({skill_type:e}),f(e),t.addDurationPoint("success"),t.success()}catch(e){t.error({error:e instanceof Error?e:Error(String(e)),reason:"close_recommend_skill_error"})}}},E=e=>{(0,i.Wp)("chatInputStore").setState({selectedRecommendSkill:e})};var R=n(352416);function C(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class I{initEventBinding(){o.v.on("chat.service.resetAll",this.resetStore),o.v.on("chat.localBreak",this.onLocalBreak)}unbindEvent(){o.v.off("chat.service.resetAll",this.resetStore),o.v.off("chat.localBreak",this.onLocalBreak)}constructor(){C(this,"updateSkillConfig",m),C(this,"createSkillReportEvent",h),C(this,"getSkillReportEvent",_),C(this,"resetSkillReportEvent",g),C(this,"updateUserPreferences",k),C(this,"updateSendMessageStatus",y),C(this,"updateSkillDropDownVisible",b),C(this,"moveSendMessageStatus",S),C(this,"pinSkill",w),C(this,"updateRecommendSkills",p),C(this,"disableRecommendSkill",T),C(this,"updateSelectedRecommendSkill",E),C(this,"destroy",()=>{this.unbindEvent()}),C(this,"resetStore",()=>{(0,i.Wp)("chatInputStore").setState(R.c)}),C(this,"onLocalBreak",()=>{var e;let t=null===(e=(0,i.GX)("chatViewCoreStore").currentChatViewConfig)||void 0===e?void 0:e.chatId;t&&(0,i.GX)("chatInputStore").sendMessageStatusMap[t]===r.M.Receiving&&this.updateSendMessageStatus(t,r.M.Default)}),this.initEventBinding()}}},489635:function(e,t,n){"use strict";n.r(t),n.d(t,{RefContentStoreService:function(){return v}});var r=n(561200),i=n(93708);let o=(e,t)=>{let{refContents:n,channel:o,source:a,scene:s,inputSkill:l,reportParams:u}=e;if(0===n.length){c(t);return}(0,i.Wp)("refContentStore").setState((0,r.Uy)(e=>{e.refContentMap[t]={refContents:n,channel:o,source:a,...s?{scene:s}:{},...l?{inputSkill:l}:{},...u?{reportParams:u}:{}}}))},a=(e,t)=>{(0,i.Wp)("refContentStore").setState((0,r.Uy)(n=>{var r;let i=null===(r=n.refContentMap[e].refContents)||void 0===r?void 0:r[t];i&&(i.disableRef=!1)}))},s=(e,t)=>{(0,i.Wp)("refContentStore").setState((0,r.Uy)(n=>{var r;let i=null===(r=n.refContentMap[e].refContents)||void 0===r?void 0:r[t];i&&(i.disableRef=!0)}))},l=(e,t)=>{(0,i.Wp)("refContentStore").setState((0,r.Uy)(n=>{var r,i;let o=null===(r=n.refContentMap[e].refContents)||void 0===r?void 0:r[t];if(o){let e=null!==(i=o.disableRef)&&void 0!==i&&i;o.disableRef=!e}}))},c=function(e){let{retainDisableRef:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.Wp)("refContentStore").setState((0,r.Uy)(n=>{var r,i;let o=null!==(i=(null!==(r=n.refContentMap[e])&&void 0!==r?r:{}).refContents)&&void 0!==i?i:[];0===(o=t?o.filter(e=>!!e.disableRef):[]).length?delete n.refContentMap[e]:n.refContentMap[e].refContents=o}))},u=(e,t)=>{(0,i.Wp)("refContentStore").setState((0,r.Uy)(n=>{let o=n.refContentMap[e];o&&(n.refContentMap[t]=o,setTimeout(()=>{(0,i.Wp)("refContentStore").setState((0,r.Uy)(t=>{delete t.refContentMap[e]}))},3e4))}))},d=(e,t)=>{(0,i.Wp)("refContentStore").setState((0,r.Uy)(n=>{n.refContentMap[e].refContents.splice(t,1)}))};function p(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class v{constructor(){p(this,"clearRefContents",c),p(this,"setRefContents",o),p(this,"moveRefContents",u),p(this,"deleteRefContent",d),p(this,"enableRefContentQuote",a),p(this,"disableRefContentQuote",s),p(this,"toggleRefContentDisableQuote",l)}}},273844:function(e,t,n){"use strict";n.r(t),n.d(t,{AttachmentUploadStoreService:function(){return eo}});var r=n(477041),i=n(93708),o=n(227768),a=n(900789),s=n(51679),l=n(455746),c=n(811208),u=n(967037),d=n(644367);let p=()=>(0,i.Wp)("attachmentUploadStore").getState().preGeneratedIdMap;function v(e){let t=p().get(e);return(0,i.Wp)("attachmentUploadStore").setState(e=>({...e,preGeneratedIdMap:new Map})),t}let f={file:o.py.EntityType_File,image:o.py.EntityType_File},m={file:a.Tv.File,image:a.Tv.OCRImage};async function h(e){var t,n;let{info:v,task:_,directoryId:g}=e;if(!_)return;let{file:y,preHandle:b,ctx:S,md5:k}=_;if(b&&S){if("pre_handle"===b.version)s.kz.MessagePreHandle({content:JSON.stringify({file_list:[{file_name:(0,c.G)("name")(y),key:(null==v?void 0:v.uploadResult.ImageUri)||""}]}),content_type:l.ContentType.File});else if("pre_handle_v2"===b.version&&("file"===_.type||"image"===_.type)){let e={entity_type:f[_.type],entity_content:{file:{file_name:(0,c.G)("name")(y),key:(null==v?void 0:v.uploadResult.ImageUri)||"",md5:k,file_type:m[_.type]||a.Tv.File,image:{key:(null==v?void 0:v.uploadResult.ImageUri)||""},size:null==y?void 0:y.size}},identifier:_.localKey||""};if(b.enableImageVlm&&"image"===_.type&&(e={entity_type:o.py.EntityType_Image,entity_content:{image:{key:(null==v?void 0:v.uploadResult.ImageUri)||""}},identifier:_.localKey||""}),b.sectionId){let t=(0,u.zQ)({eventName:"PreHandleV2_MultiMessagePreHandle_api",meta:{conversationId:S.conversationId,sectionId:b.sectionId,preGeneratedLocalMessageId:b.preGeneratedLocalMessageId,preGeneratedId:p().get(b.preGeneratedLocalMessageId),...y,..._}});try{await s.kz.MultiMessagePreHandle({conversation_id:S.conversationId,bot_id:S.botId,section_id:b.sectionId,local_message_id:b.preGeneratedLocalMessageId,uplink_entity:e}),t.success()}catch(e){t.error({reason:"api error",error:e})}}else{let n=(0,u.zQ)({eventName:"PreHandleV2_MultiMessagePreHandleWithoutConv_api",meta:{conversationId:S.conversationId,sectionId:b.sectionId,preGeneratedLocalMessageId:b.preGeneratedLocalMessageId,preGeneratedId:p().get(b.preGeneratedLocalMessageId),...y,..._}});try{let o=p().get(b.preGeneratedLocalMessageId),a=await s.kz.MultiMessagePreHandleWithoutConv({bot_id:S.botId,local_message_id:b.preGeneratedLocalMessageId,uplink_entity:e,pre_generate_id:o});if(n.success(),!o){let e=p().get(b.preGeneratedLocalMessageId);if(e)o!==e?h.call(this,{info:v,task:_}):d.k.persist.error({eventName:"PreHandleV2_MultiMessagePreHandleWithoutConv_failed",error:Error("[upload complete] MultiMessagePreHandleWithoutConv preGeneratedId duplicate")});else{let e=null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.pre_generate_id;e&&(0,r.Z)(e)?(0,i.Wp)("attachmentUploadStore").setState(t=>{let n=new Map(t.preGeneratedIdMap);return n.set(b.preGeneratedLocalMessageId,e),{...t,preGeneratedIdMap:n}}):d.k.persist.error({eventName:"PreHandleV2_MultiMessagePreHandleWithoutConv_failed",error:Error("[upload complete] MultiMessagePreHandleWithoutConv response no preGeneratedId")})}}}catch(e){n.error({reason:"api error",error:e})}}}else if("pre_handle_code"===b.version){let e=(0,u.zQ)({eventName:"CodePreHandle_api",meta:{conversationId:S.conversationId,...y,..._}});try{let t=await s.mH.CodePreHandle({directory_id:g});return e.success(),null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.name_review_status}catch(t){e.error({reason:"api error",error:t})}}}}var _=n(577518),g=n(455218),y=n.n(g),b=n(817835),S=n(210230),k=n(444614),w=n(561200),T=n(377940),E=n(923404),R=n(789691),C=n(792288),I=n(468494),x=n(976927),N=n(689337),M=n(170072),P=n(287491),A=n(58070),$=n(17135),j=n(636674),O=n(120012),F=n(126473),L=n(380626);let D=e=>{let{chatId:t,skillType:n="default"}=e;(0,i.Wp)("attachmentUploadStore").setState((0,w.Uy)(e=>(0,b.Z)(e,["preGeneratedLocalMessageIdMap",t,`_${n}`],(0,R.z)())))},W=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{preHandle:i}=r;return{type:t,key:"",localKey:(0,_.Z)(),percent:0,blobUrl:URL.createObjectURL(e),loading:!0,failed:!1,fileKey:"",file:e,ctx:n,preHandle:i}},Z=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{preHandle:r}=n;return{type:"directory",key:"",localKey:(0,_.Z)(),fileKey:"",ctx:t,preHandle:r,blobUrl:"",file:e[0],loading:!0,failed:!1,percent:0}};async function U(){var e,t,n;let r=L.chatInputCoreServiceContainer.get("chatConfigService",!0),{imageUploader:o,fileUploader:a,mediaUploader:s}=(0,i.Wp)("attachmentUploadStore").getState();if(!o){let t=await (null==r?void 0:r.createUploader({type:A.kZ.Image,scene:A.cj.BOT_CHAT,userId:null!==(e=r.userId)&&void 0!==e?e:"",appId:r.appId}));(0,i.Wp)("attachmentUploadStore").setState({imageUploader:t})}if(!a){let e=await (null==r?void 0:r.createUploader({type:A.kZ.File,scene:A.cj.BOT_CHAT,userId:null!==(t=r.userId)&&void 0!==t?t:"",appId:r.appId}));(0,i.Wp)("attachmentUploadStore").setState({fileUploader:e})}if(!s){let e=await (null==r?void 0:r.createUploader({type:A.kZ.Video,scene:A.cj.BOT_CHAT,userId:null!==(n=r.userId)&&void 0!==n?n:"",appId:r.appId}));(0,i.Wp)("attachmentUploadStore").setState({mediaUploader:e})}}function B(e){let{fileUploadCallbacks:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{ctx:n,file:r}=e,o=n?(0,u.zQ)({eventName:"attachment_upload",meta:{upload_type:e.type,upload_from:n.uploadFrom}}):void 0,a=(e,t)=>async n=>{let r=(0,w.P2)((0,i.Wp)("attachmentUploadStore").getState()),o=r.preprocessTaskMap[e];try{if(!o)return;await t(n,o)}finally{(0,i.Wp)("attachmentUploadStore").setState((0,w._x)(r))}};return{complete:a(e.localKey,(a,s)=>{if(s.loading=!1,s.failed=!1,a){var l,u;null==t||null===(l=t.complete)||void 0===l||l.call(t,a),s.percent=a.percent,s.uploadResult=a.uploadResult,s.key=a.uploadResult.ImageUri||"",s.fileKey=a.key,o&&(o.addDurationPoint("success"),o.success({meta:{upload_file_size:String(a.fileSize)}})),n&&(0,$.trackEvent)("upload_status",{status:"1",conversation_id:n.conversationId,conversation_type:(0,C.QW)(I.useFeedStore.getState(),n.conversationId)||1,chat_type:n.chatType,skill_name:n.skillType?(0,N.Nu)(n.skillType):void 0,skill_id:n.skillId||void 0,upload_id:n.uploadId,duration:a.duration.toString(),upload_way:n.uploadWay,upload_collection_way:n.uploadCollectionWay,collection_id:null===(u=a.uploadResult)||void 0===u?void 0:u.ImageUri,collection_name:(0,c.G)("name")(r),upload_type:n.uploadType||("file"===e.type?"pdf":"pic"),upload_file_type:(0,F.JB)((0,F.lm)((0,c.G)("name")(r))),upload_token_length:"",upload_file_size:String(a.fileSize),upload_from:n.uploadFrom,upload_collection_id:n.uploadCollectionId,upload_method:n.uploadMethod,click_from:n.from,...(null==n?void 0:n.extraParams)||{}}),h.call(this,{info:a,task:(0,i.Wp)("attachmentUploadStore").getState().preprocessTaskMap[e.localKey]})}}),progress:a(e.localKey,(e,n)=>{if(n.loading=!0,n.failed=!1,e){var r;null==t||null===(r=t.progress)||void 0===r||r.call(t,e),n.percent=e.percent,n.fileKey=e.key}}),error:a(e.localKey,(i,a)=>{if(a.loading=!1,a.failed=!0,a.uploadResult=void 0,a.key="",i){var s,l,u;null==t||null===(s=t.error)||void 0===s||s.call(t,i),a.fileKey=i.key,o&&o.error({reason:"upload attachment failed",meta:{upload_file_size:String(i.fileSize)}}),n&&((0,$.trackEvent)("upload_file_status",{bot_id:n.botId,message_type:e.type,enter_method:n.from,success:"0",result:null!==(u=null===(l=i.extra)||void 0===l?void 0:l.message)&&void 0!==u?u:""}),(0,$.trackEvent)("upload_status",{status:"0",error_code:"fail_to_upload",conversation_id:n.conversationId,conversation_type:(0,C.QW)(I.useFeedStore.getState(),n.conversationId)||1,chat_type:n.chatType,skill_name:n.skillType?n.skillType.toString():void 0,skill_id:n.skillId||void 0,upload_id:n.uploadId,duration:i.duration.toString(),upload_way:n.uploadWay,upload_collection_way:n.uploadCollectionWay,collection_id:"",collection_name:(0,c.G)("name")(r),upload_type:"file"===e.type?"pdf":"pic",upload_file_type:(0,F.JB)((0,F.lm)((0,c.G)("name")(r))),upload_token_length:"",upload_file_size:String(i.fileSize),upload_from:n.uploadFrom}))}})}}async function z(e,t){d.k.persist.log({eventName:"start_attachment_upload_getUploader_start",meta:{...t||{},type:e}});let{imageUploader:n,fileUploader:r,mediaUploader:o}=(0,i.Wp)("attachmentUploadStore").getState();n&&r&&o||await this.initUploader();let{imageUploader:a,fileUploader:s,mediaUploader:l}=(0,i.Wp)("attachmentUploadStore").getState();return"file"===e?s:"video"===e||"audio"===e?l:a}let V=(()=>{let e=null;async function t(){let{imageUploader:t,fileUploader:n}=(0,i.Wp)("attachmentUploadStore").getState();t&&n||await this.initUploader();let{imageUploader:r,fileUploader:o}=(0,i.Wp)("attachmentUploadStore").getState();null==o||o.refreshToken(),null==r||r.refreshToken(),e=null}return function(){return null!=e?e:e=t.call(this)}})();function H(e,t,n,r){var o,a;let s=W(e,t,n,r),{localKey:l}=s,{calculateMd5:c=!0}=r||{};c&&e.arrayBuffer().then(e=>{let t=y()(new Uint8Array(e));(0,i.Wp)("attachmentUploadStore").setState((0,w.Uy)(e=>{let n=e.preprocessTaskMap[l];n&&(n.md5=t)}))}).catch(e=>{}),(0,i.Wp)("attachmentUploadStore").setState(e=>{let{preprocessTaskMap:t}=e;return{preprocessTaskMap:{...t,[s.localKey]:s}}});let u=B.call(this,s,{fileUploadCallbacks:null==r?void 0:r.fileUploadCallbacks});return this._getUploader(t,{local_key:s.localKey,upload_id:null===(o=s.ctx)||void 0===o?void 0:o.uploadId,upload_type:s.type,upload_from:null===(a=s.ctx)||void 0===a?void 0:a.uploadFrom}).then(n=>{var r,i;d.k.persist.log({eventName:"start_attachment_upload",meta:{local_key:s.localKey,upload_id:null===(r=s.ctx)||void 0===r?void 0:r.uploadId,upload_type:s.type,upload_from:null===(i=s.ctx)||void 0===i?void 0:i.uploadFrom,type:t}}),null==n||n.upload(e,{complete:u.complete,progress:u.progress,error:u.error})},()=>u.error()),{local_key:s.localKey,key:s.key}}async function G(e,t,n,r){let o;let s=Z(Array.from(e),n,r),l=x.feedServiceContainer.get("chatInputService"),c=await (null==l?void 0:l.getDirectoryService()),u=null==c?void 0:c.uploadDirectory(e,{mountNodeId:"0"});(0,i.Wp)("attachmentUploadStore").setState(e=>{let{preprocessDirTaskMap:t}=e;return{preprocessDirTaskMap:{...t,[s.localKey]:s}}});let d=0;if(!u||(null==u?void 0:u.length)===0)return{local_key:s.localKey,key:s.key};let p=u.length,v=u[0].id,f=e[0].webkitRelativePath,m=null==f?void 0:f.split("/")[0],_=n?{conversation_id:n.conversationId,conversation_type:(0,C.QW)(I.useFeedStore.getState(),n.conversationId)||1,chat_type:n.chatType,skill_name:n.skillType?(0,N.Nu)(n.skillType):"",skill_id:n.skillId,upload_id:n.uploadId,upload_way:n.uploadWay,upload_collection_way:n.uploadCollectionWay,upload_type:"folder",upload_from:n.uploadFrom,file_cnt:null==u?void 0:u.length,upload_file_type:T.ol.UPLOAD_FILE_TYPE_FOLDER,collection_name:m,collection_id:v,...(null==n?void 0:n.extraParams)||{}}:null;return null==u||u.forEach(e=>{e.status$.subscribe(async t=>{if(e.id===v&&(o=e),t===E.KV.Success){let e=Math.round(++d/p*100);if((0,i.Wp)("attachmentUploadStore").setState((0,w.Uy)(t=>{let n=t.preprocessDirTaskMap[s.localKey];n&&(n.percent=e,n.key=(null==o?void 0:o.getNodeId())||"")})),d===p){let e=await h.call(this,{directoryId:null==o?void 0:o.getNodeId(),task:(0,i.Wp)("attachmentUploadStore").getState().preprocessDirTaskMap[s.localKey]});(0,i.Wp)("attachmentUploadStore").setState((0,w.Uy)(t=>{let n=t.preprocessDirTaskMap[s.localKey];n&&(n.loading=!1,n.failed=!1,n.reviewState=e||a.m9.ReviewState_Access)})),_&&(0,$.trackEvent)("upload_status",{..._,success:"true"})}}else if(t===E.KV.Error&&((0,i.Wp)("attachmentUploadStore").setState((0,w.Uy)(e=>{let t=e.preprocessDirTaskMap[s.localKey];t&&(t.failed=!0,t.loading=!1)})),_)){let t="other",n="getErrorType"in e?e.getErrorType():void 0;if(n)switch(n){case E.Gb.UploadError:t="upload_file_error";break;case E.Gb.MountError:t="mount_file_error";break;default:t="other"}else e.type===E.lQ.Directory&&(t="mount_dir_error");(0,$.trackEvent)("upload_status",{..._,error_code:t,success:"false"})}})}),{local_key:s.localKey,key:s.key}}function K(e,t){let n={type:"link",key:"",localKey:(0,_.Z)(),percent:0,loading:!0,failed:!1,fileKey:""};(0,i.Wp)("attachmentUploadStore").setState(e=>{let{preprocessTaskMap:t}=e;return{preprocessTaskMap:{...t,[n.localKey]:n}}});let r=t?{conversation_id:t.conversationId,conversation_type:(0,C.QW)(I.useFeedStore.getState(),t.conversationId)||1,chat_type:t.chatType,skill_name:t.skillType?(0,N.Nu)(t.skillType):"",skill_id:t.skillId,upload_id:t.uploadId,upload_way:t.uploadWay,upload_collection_way:t.uploadCollectionWay,upload_type:"github",upload_from:t.uploadFrom,upload_file_type:T.ol.UPLOAD_FILE_TYPE_LINK,collection_name:"",collection_id:"",meta_info:t.metaInfo,...(null==t?void 0:t.extraParams)||{}}:null;return(0,M.T)(e).then(e=>{if(!(null==e?void 0:e.repository)){(0,i.Wp)("attachmentUploadStore").setState((0,w.Uy)(e=>{let t=e.preprocessTaskMap[n.localKey];t&&(t.loading=!1,t.failed=!0)})),r&&(0,$.trackEvent)("upload_status",{...r,success:"false"});return}let{is_repo:t,id:o,source:a,language:s,ref:l,name:c}=(null==e?void 0:e.repository)||{};r&&(0,$.trackEvent)("upload_status",{...r,success:"true",collection_name:c,collection_id:o,source:a}),(0,i.Wp)("attachmentUploadStore").setState((0,w.Uy)(e=>{let r=e.preprocessTaskMap[n.localKey];r&&(r.percent=100,r.key=o||"",r.isRepo=t||!1,r.repoInfo={id:o,source:a,language:s,ref:l,name:c||""},r.loading=!1)}))}),{local_key:n.localKey,key:n.key}}function X(e){var t,n;let r=(0,i.Wp)("attachmentUploadStore").getState().preprocessTaskMap[e];if(!r){d.k.persist.warning({eventName:"reUpload_mismatch_preprocessTask",meta:{local_key:e}});return}let o=B.call(this,r);o.progress(),this._getUploader(r.type,{local_key:r.localKey,upload_id:null===(t=r.ctx)||void 0===t?void 0:t.uploadId,upload_type:r.type,upload_from:null===(n=r.ctx)||void 0===n?void 0:n.uploadFrom}).then(e=>{var t;return null==e?void 0:null===(t=e.client)||void 0===t?void 0:t.start()},()=>o.error())}function q(e){var t,n;let{imageUploader:r,fileUploader:o}=(0,i.Wp)("attachmentUploadStore").getState();null==r||null===(t=r.client)||void 0===t||t.cancel(e),null==o||null===(n=o.client)||void 0===n||n.cancel(e)}function J(e,t){this._getUploader(t).then(t=>{null==t||t.pause(e)})}function Q(e,t){this._getUploader(t).then(t=>{null==t||t.resume(e)})}function Y(e,t){!(0,S.Z)(t)&&(0,i.Wp)("attachmentUploadStore").setState((0,w.Uy)(n=>{let r=n.preprocessTaskMap[e];r&&(r.parseState=t)}))}function ee(e,t){!(0,S.Z)(t)&&(0,i.Wp)("attachmentUploadStore").setState((0,w.Uy)(n=>{let r=n.preprocessTaskMap[e];r&&(r.reviewState=t)}))}async function et(e,t,n){let r=n&&!t;await (0,P.I9)();let o=e.map(e=>{let t=(0,i.Wp)("attachmentUploadStore").getState().preprocessTaskMap[e];if(!t)return"";if((null==t?void 0:t.type)!=="file")return(null==t?void 0:t.isRepo)||(r=!1),"";let n=(0,c.G)("name")(t.file);return(null==t?void 0:t.type)!=="file"||(0,P.GX)(n)||(r=!1),t.key}).filter(e=>!!e),l=e.every(e=>{let t=(0,i.Wp)("attachmentUploadStore").getState().preprocessTaskMap[e];if(!t||"file"!==t.type)return!1;let n=(0,c.G)("name")(t.file),r=(0,F.lm)(n);return(0,F.Be)(r)||(0,F.dC)(r)}),p=e.map(e=>{let t=(0,i.Wp)("attachmentUploadStore").getState().preprocessDirTaskMap[e];return(null==t?void 0:t.type)!=="directory"?"":t.key}).filter(e=>!!e),v=e.map(e=>{let t=(0,i.Wp)("attachmentUploadStore").getState().preprocessTaskMap[e];return(null==t?void 0:t.isRepo)?t.key:""}).filter(e=>!!e);if(!l&&(t===j.SkillType.CodeAssistant||r)){let t=(0,u.zQ)({eventName:"ChatInputUpload_GetCodeInfo_api",meta:{fileCount:p.length,taskKeys:p,localKeys:e}});try{let t,n;let r=p.length>0;if(p.length>0)t=O.pu.DirectoryID,n=p;else if(v.length>0)t=O.pu.RepoID,n=v;else{if(!(o.length>0))return;t=O.pu.File,n=o}let{data:l}=await s.mH.GetCodeContextState({type:t,resource_key:n}),c=null==l?void 0:l.states;if(!c)return;let u={[O.Cr.Failed]:a.MZ.ParseState_Failed,[O.Cr.Succeed]:a.MZ.ParseState_Success,[O.Cr.Processing]:a.MZ.ParseState_Processing,[O.Cr.Ready]:a.MZ.ParseState_Success};for(let t of e)(0,i.Wp)("attachmentUploadStore").setState((0,w.Uy)(e=>{let n=r?e.preprocessDirTaskMap[t]:e.preprocessTaskMap[t],{status:i,percentage:o}=c.find(e=>e.resource_key===n.key)||{};if(!(0,k.Z)(i)){var s,l,p,v;let e=u[i];n.parseState=e,e===a.MZ.ParseState_Success&&d.k.persist.success({eventName:"ChatInputUpload_GetCodeInfo_parseState_success",meta:{status:String(i),local_key:n.localKey,upload_id:null===(s=n.ctx)||void 0===s?void 0:s.uploadId,upload_type:n.type,upload_from:null===(l=n.ctx)||void 0===l?void 0:l.uploadFrom}}),e===a.MZ.ParseState_Failed&&d.k.persist.error({eventName:"ChatInputUpload_GetCodeInfo_parseState_failed",error:Error("[ChatInputUpload]: GetCodeInfo parseState failed"),meta:{status:String(i),local_key:n.localKey,upload_id:null===(p=n.ctx)||void 0===p?void 0:p.uploadId,upload_type:n.type,upload_from:null===(v=n.ctx)||void 0===v?void 0:v.uploadFrom}})}(0,k.Z)(o)||(n.parsePercent=Number(o))}))}catch(e){t.error({reason:"api error",error:e})}}else{if(0===o.length)return;let t=(0,u.zQ)({eventName:"ChatInputUpload_GetDocumentInfo_api",meta:{fileCount:o.length,taskKeys:o,localKeys:e}});try{let{data:n}=await s.mH.GetDocumentInfo({uris:o}),r=null==n?void 0:n.infos;if(!r)return;for(let t of e)(0,i.Wp)("attachmentUploadStore").setState((0,w.Uy)(e=>{var n,i,o,s,l;let c=e.preprocessTaskMap[t],{status:u,char_count:p}=(null===(n=r[c.key])||void 0===n?void 0:n.parse_info)||{};(0,k.Z)(u)||(c.parseState=u,u===a.MZ.ParseState_Success&&d.k.persist.success({eventName:"ChatInputUpload_GetDocumentInfo_parseState_success",meta:{status:String(u),parsedCharCount:Number(p),local_key:c.localKey,upload_id:null===(i=c.ctx)||void 0===i?void 0:i.uploadId,upload_type:c.type,upload_from:null===(o=c.ctx)||void 0===o?void 0:o.uploadFrom}}),u===a.MZ.ParseState_Failed&&d.k.persist.error({eventName:"ChatInputUpload_GetDocumentInfo_parseState_failed",error:Error("[ChatInputUpload]: GetDocumentInfo parseState failed"),meta:{status:String(u),parsedCharCount:Number(p),local_key:c.localKey,upload_id:null===(s=c.ctx)||void 0===s?void 0:s.uploadId,upload_type:c.type,upload_from:null===(l=c.ctx)||void 0===l?void 0:l.uploadFrom}})),(0,k.Z)(p)||(c.parsedCharCount=Number(p))}));let l=o.reduce((e,t)=>{var n;let{status:i}=(null===(n=r[t])||void 0===n?void 0:n.parse_info)||{},o=`parseState_${null!=i?i:"undefined"}`;return e[o]=[...e[o]||[],t],e},{});t.success({meta:{fileCount:o.length,taskKeys:o,localKeys:e,...l}})}catch(e){t.error({reason:"api error",error:e})}}}function en(e){let t=(0,i.Wp)("attachmentUploadStore").getState().preprocessDirTaskMap[e];return{percent:t.percent,loading:t.loading,failed:t.failed}}async function er(e,t){return this._getUploader(e,t)}function ei(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class eo{constructor(){ei(this,"initUploader",U),ei(this,"_getUploader",z),ei(this,"updatePreGeneratedLocalMessageId",D),ei(this,"refreshUploadToken",V),ei(this,"preprocessFile",H),ei(this,"reUpload",X),ei(this,"cancel",q),ei(this,"pause",J),ei(this,"resume",Q),ei(this,"updateAttachmentParseState",Y),ei(this,"updateAttachmentReviewState",ee),ei(this,"fetchAndUpdateParseState",et),ei(this,"getUploader",er),ei(this,"preprocessGithubLink",K),ei(this,"getDirUploadStatus",en),ei(this,"preprocessDir",G),ei(this,"popPreGeneratedId",v),ei(this,"tryPreHandleFile",h)}}},546336:function(e,t,n){"use strict";n.d(t,{V:function(){return u}});var r=n(429996),i=n(344482),o=n(375292),a=n(444614);let s=e=>{let t=(0,r.useRef)(),n=()=>{t.current&&(clearTimeout(t.current),t.current=null)};return(0,r.useEffect)(()=>n,[]),{setExpired:r=>{if(n(),(0,a.Z)(r))return;let i=Math.max(r-Date.now(),0);t.current=window.setTimeout(()=>{e()},i)},reset:n}};var l=n(530836);let c=()=>{let{limitExpired:e,limitTips:t,isLimited:n}=(0,l.useMessageStore)(e=>e.rateLimitConfig,i.X);(0,r.useEffect)(()=>{o(e)},[e]);let{setExpired:o}=s(()=>{l.useMessageStore.getState().updateRateLimitConfig({isLimited:!1,limitExpired:void 0,limitTips:""})});return{limitTips:t,isLimited:n}},u=()=>{let{conversationDisabledParams:e}=(0,o.R)({optionalProvider:!0}),{isLimited:t,limitTips:n}=c();return(null==e?void 0:e.isDisabled)?{...e}:{disabledText:t?n:void 0,isDisabled:!!t}}},335146:function(e,t,n){"use strict";n.d(t,{S0:function(){return s}});var r=n(613993),i=n(231462),o=n(561200);let a={batchDownloadSelected:!1,isAllSelectChecked:!1,selectedImageUrlWithMessageList:[]},s=(0,i.Ue)()((0,r.XR)((e,t)=>({...a,onUpdateBatchDownloadSelected:t=>{e((0,o.Uy)(e=>{e.batchDownloadSelected=t}))},onUpdateAllSelectChecked:t=>{e((0,o.Uy)(e=>{e.isAllSelectChecked=t}))},toggleImageUrl:(n,r)=>{let i=t().selectedImageUrlWithMessageList;e({selectedImageUrlWithMessageList:i.map(e=>e.url).includes(n)?i.filter(e=>e.url!==n):[...i,{url:n,message:r}]})},clearSelectedImageUrl:()=>{e((0,o.Uy)(e=>{e.selectedImageUrlWithMessageList=[]}))},checkAllImage:t=>{e((0,o.Uy)(e=>{e.selectedImageUrlWithMessageList=t}))}})))},475434:function(e,t,n){"use strict";n.d(t,{p:function(){return k}});var r=n(613993),i=n(231462),o=n(316649),a=n(810197),s=n(69345),l=n(87548),c=n(672697),u=n(669384),d=n(228535),p=n(775265),v=n(93708),f=n(729813),m=n(666396),h=n(455746),_=n(120012),g=n(644367),y=n(436462),b=n(744947);let S=[h.ContentType.Text,h.ContentType.Music,h.ContentType.Video,h.ContentType.Image,h.ContentType.File,h.ContentType.PluginSearchResult,h.ContentType.Composite,h.ContentType.Nested,h.ContentType.CopilotCard,h.ContentType.LyricsToSongMusic,h.ContentType.LyricsToSongLyric,h.ContentType.LyricsToSongsMusic,h.ContentType.PagesCard,h.ContentType.Outline,u.zc.SamanthaText,u.zc.SamanthaMusic,u.zc.SamanthaImageOutput,u.zc.SamanthaSearchCard,u.zc.SamanthaMusicGenOutput,u.zc.SamanthaSearchText,u.zc.SamanthaCodeAssistantInput,u.zc.SamanthaCodeAssistantOutput,u.zc.SamanthaVideoGenerationInput,u.zc.SamanthaVideoGenerationOutput,u.zc.SamanthaWriteArtifactOutput,u.zc.SamanthaWriteOutlineOutput,u.zc.SamanthaWritePagesCardOutput,u.zc.SamanthaBlockSuperTask,u.zc.SamanthaWritingGenerateInput],k=(0,i.Ue)()((0,r.XR)((e,t)=>({scene:void 0,isSelectMode:!1,messageIndexList:[],contentTypeWhiteListInitialized:!1,contentTypeWhiteList:S,preShareId:"",shareToken:"",preMessageIndexList:[],preShareType:_.yw.All,preShareVisibility:_.M7.Default,shareType:_.yw.All,shareActionPosition:"dropdown",shareTitle:"",extraInfo:{},setContentTypeWhiteList:t=>{e({contentTypeWhiteListInitialized:!0,contentTypeWhiteList:t})},enterSelectMode:async n=>{var r,i,o,a,s,l,c,u,d,p,m,h,g,y;let{scene:b,extraInfo:S={},data:k,justUpdateInfo:w}=n,{isSelectMode:T,scene:E}=t();if(T&&b===E&&!w)return;let R=await (0,v.TB)("chatMessageBoxLayoutStore");R.getState().updateSendMessageBoxConfig({containerDataAttr:"select-mode"}),R.getState().updateReceiveMessageBoxConfig({containerDataAttr:"select-mode"}),null===(r=R.getState().getLayoutSetter())||void 0===r||r.setLayoutAreaInVisible("bottom"),null===(i=R.getState().getLayoutSetter())||void 0===i||i.setLayoutAreaInVisible("top"),null===(o=R.getState().getLayoutSetter())||void 0===o||o.setLayoutAreaInVisible("right"),null===(a=R.getState().getLayoutSetter())||void 0===a||a.setLayoutAreaVisible("left"),e({extraInfo:S,scene:b,isSelectMode:!0,preShareId:(null==k?void 0:k.pre_share_id)||(null==k?void 0:null===(s=k.share_info)||void 0===s?void 0:s.share_id)||"",shareToken:null!==(h=null==k?void 0:k.share_token)&&void 0!==h?h:"",preMessageIndexList:(null==k?void 0:null===(l=k.share_info)||void 0===l?void 0:l.share_status)===2&&null!==(g=null==k?void 0:null===(c=k.share_info)||void 0===c?void 0:c.message_index_list)&&void 0!==g?g:[],preShareType:(null==k?void 0:null===(u=k.share_info)||void 0===u?void 0:u.share_type)||_.yw.All,preShareVisibility:null!==(y=null==k?void 0:null===(d=k.share_info)||void 0===d?void 0:d.share_visibility)&&void 0!==y?y:_.M7.Default,shareType:(null==k?void 0:null===(p=k.share_info)||void 0===p?void 0:p.share_type)||_.yw.All,shareTitle:null==k?void 0:null===(m=k.share_info)||void 0===m?void 0:m.share_name}),f.v.emit("chat.share.select",{scene:b,isSelectMode:!0})},exitSelectMode:async()=>{var n,r,i,o;if(!t().isSelectMode)return;let a=await (0,v.TB)("chatMessageBoxLayoutStore");a.getState().updateSendMessageBoxConfig({containerDataAttr:""}),a.getState().updateReceiveMessageBoxConfig({containerDataAttr:""}),null===(n=a.getState().getLayoutSetter())||void 0===n||n.setLayoutAreaVisible("bottom"),null===(r=a.getState().getLayoutSetter())||void 0===r||r.setLayoutAreaVisible("top"),null===(i=a.getState().getLayoutSetter())||void 0===i||i.setLayoutAreaInVisible("right"),null===(o=a.getState().getLayoutSetter())||void 0===o||o.setLayoutAreaInVisible("left"),e({scene:void 0,isSelectMode:!1,messageIndexList:[],preShareId:"",shareToken:"",preMessageIndexList:[],extraInfo:{}}),f.v.emit("chat.share.select",{scene:void 0,isSelectMode:!1})},toggleMessage:n=>{var r;let{conversationId:i,messageIndex:s,state:l}=n,{messageIndexList:c,getIsCheckboxDisabled:u,findMessageByIndex:d}=t(),p=c.includes(s),v=d({conversationId:i,state:l,messageIndex:s}),f=(0,b.sf)(l,i,null!==(r=null==v?void 0:v.message_id)&&void 0!==r?r:""),[h,..._]=f,g=s===h;if(p)return!g&&_.filter(e=>c.includes(e)).length>1?e({messageIndexList:(0,o.Z)(c,s)}):e({messageIndexList:(0,o.Z)(c,...f)}),t().messageIndexList;if(u({conversationId:i,messageIndex:s,state:l}))return t().messageIndexList;let y=f.filter(e=>!u({conversationId:i,messageIndex:e,state:l}));return c.length+y.length>m.zE?e({messageIndexList:[...c,s].sort((e,t)=>e-t)}):e({messageIndexList:(0,a.Z)([...c,...y]).sort((e,t)=>e-t)}),t().messageIndexList},selectAll:n=>{let{_getSelectAllIndexList:r}=t();return e({messageIndexList:r(n)}),t().messageIndexList},deselectAll:()=>{e({messageIndexList:[]})},findMessageByIndex:e=>{var t,n;let{conversationId:r,state:i,messageIndex:o}=e,a=i.messageMap[r],s=i.messageLinkMap[r];if(!a||!s)return;let l=Number(null===(t=a[null===(n=s[0])||void 0===n?void 0:n.messageId])||void 0===t?void 0:t.index),c=s[o-l];if(c){let e=(0,b.K9)(i,r,c);if((null==e?void 0:e.index)===o)return e}let u=Object.keys(a).find(e=>{var t;return Number(null===(t=a[e])||void 0===t?void 0:t.index)===o});if(u)return a[u]},_getSelectAllIndexList:e=>{var n,r,i,o,a,u;let{conversationId:d,state:p,lastMessageIndex:v}=e,{getIsCheckboxDisabled:f}=t(),m=p.messageMap[d],h=p.messageLinkMap[d];if(!m||!h)return[];let _=Number(null===(n=m[null===(r=h[0])||void 0===r?void 0:r.messageId])||void 0===n?void 0:n.index),g=Number(null===(i=m[null===(o=h[h.length-1])||void 0===o?void 0:o.messageId])||void 0===i?void 0:i.index);return g<h.length&&(g=null!==(u=(0,s.Z)(null===(a=(0,y.MF)(d))||void 0===a?void 0:a.map(e=>Number(e.index))))&&void 0!==u?u:h.length),(0,l.Z)(1,v+1).filter(e=>!(0,c.Z)(e,_,g+1)||!f({conversationId:d,messageIndex:e,state:p}))},getIsSelectAllChecked:e=>{let{messageIndexList:n,_getSelectAllIndexList:r}=t(),i=r(e);return n.length>0&&n.length>=i.length},getIsCheckboxDisabled:e=>{let{conversationId:n,state:r,messageIndex:i}=e,{messageIndexList:o,findMessageByIndex:a,_isMessageDisableSelect:s,contentTypeWhiteList:l}=t();if(o.includes(i))return!1;let c=a({state:r,messageIndex:i,conversationId:n}),u=s(c);if(u){var d;g.k.persist.info({eventName:"thread_share_checkbox_disabled",meta:{messageIndex:null==c?void 0:c.index,messageId:null==c?void 0:c.message_id,messageStatus:null==c?void 0:c.status,messageContentType:null==c?void 0:c.content_type,contentTypeWhiteList:l,isOnboarding:null==c?void 0:null===(d=c.ext)||void 0===d?void 0:d.onboarding,listLength:o.length}})}return u},_isMessageDisableSelect:e=>{var n;let{messageIndexList:r,contentTypeWhiteList:i,contentTypeWhiteListInitialized:o}=t();return o||g.k.persist.info({eventName:"thread_share_checkbox_disabled",meta:{whiteListInit:"0"}}),!!(!e||(0,d.N0s)(e)||(0,d.IEy)(e))||e.status===h.PushMessageStatus.InVisible||(null===(n=e.ext)||void 0===n?void 0:n.onboarding)==="1"||r.length>=m.zE||((0,p.T5)(e)?!(0,p.wG)(e):!(e.content_type&&i.includes(e.content_type)))},updateMessageIndexList:n=>{let{messageIndexList:r,_isMessageDisableSelect:i}=t(),o=[];for(let e of Object.values(n))-1!==r.indexOf(Number(e.index))&&i(e)&&o.push(Number(e.index));e({messageIndexList:r.filter(e=>!o.includes(e))})},setShareType:t=>{e({shareType:t})}})))},397175:function(e,t,n){"use strict";n.d(t,{HS:function(){return l},Lp:function(){return a},UC:function(){return s},el:function(){return c}});var r=n(67864),i=n(900789),o=n(592333);let a=e=>!!e&&[r.z.Bot,r.z.ProfileBot].includes(e);function s(e){return e===i.MZ.ParseState_Failed}function l(e){return e===i.m9.ReviewState_NotCompliant}let c=e=>e===o.dm.Coco||e===o.dm.CocoWeb},274680:function(e,t,n){"use strict";function r(e){let{conversation_id:t,local_conversation_id:n,is_regen:r}=e;return!!n&&!!t&&!r}n.d(t,{G:function(){return r}})},114254:function(e,t,n){"use strict";n.d(t,{Q:function(){return O}});var r=n(529496),i=n(429996),o=n(669160),a=n.n(o),s=n(107481),l=n(81307),c=n(851510),u=n(286942),d=n(777078),p=n(841505),v=n(287491),f=n(893052),m=n(192790),h=n(912763),_=n(432626),g=n(31505),y=n(241637),b=n(900789),S=n(947020),k=n(993047),w=n(126473),T=n(162957),E=n(248648),R=n(364487),C=n(339512),I=n(627394),x=(0,C.G)((0,I.jsx)(e=>(0,I.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:(0,I.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M16.009 5.5C10.198 5.5 5.5 10.192 5.5 15.997c0 4.64 3.01 8.568 7.185 9.958.523.105.714-.226.714-.504 0-.243-.017-1.077-.017-1.946-2.924.626-3.532-1.252-3.532-1.252-.47-1.216-1.166-1.529-1.166-1.529-.957-.643.07-.643.07-.643 1.06.07 1.618 1.078 1.618 1.078.939 1.598 2.453 1.147 3.062.869.087-.678.365-1.147.66-1.408-2.33-.244-4.784-1.147-4.784-5.18a4.1 4.1 0 0 1 1.079-2.814c-.104-.261-.47-1.339.104-2.781 0 0 .888-.278 2.888 1.077.857-.23 1.74-.346 2.628-.347.887 0 1.791.121 2.627.347 2-1.355 2.888-1.077 2.888-1.077.574 1.442.209 2.52.104 2.78.679.73 1.079 1.669 1.079 2.816 0 4.032-2.453 4.918-4.802 5.179.383.33.713.956.713 1.946 0 1.408-.017 2.538-.017 2.885 0 .278.192.609.713.504 4.176-1.39 7.186-5.318 7.186-9.958C26.517 10.192 21.802 5.5 16.009 5.5",clipRule:"evenodd"})}),{})),N=n(396284),M=(0,C.G)((0,I.jsx)(e=>(0,I.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:[(0,I.jsx)("path",{fill:"#000",fillOpacity:.55,d:"M5.5 10h21v12.5c0 1.105-.94 2-2.1 2H7.6c-1.16 0-2.1-.895-2.1-2zM5.5 8a2 2 0 0 1 2-2h4.775a4 4 0 0 1 1.404.255l2.642.99a4 4 0 0 0 1.404.255H24.5a2 2 0 0 1 2 2v.5h-21z"}),(0,I.jsx)("path",{fill:"#fff",fillOpacity:.35,d:"M5.5 8a2 2 0 0 1 2-2h4.775a4 4 0 0 1 1.404.255l2.642.99a4 4 0 0 0 1.404.255H24.5a2 2 0 0 1 2 2v.5h-21z"})]}),{})),P=n(120433),A=n(182723);let $=(0,T.y)((0,i.lazy)(()=>(0,k.AD)({fn:()=>Promise.all([n.e("62192"),n.e("93955")]).then(n.bind(n,250500)).then(e=>{let{AttachmentNodeUI:t}=e;return{default:t}}),fallback:{default:()=>(0,I.jsx)("div",{})}})),()=>(0,I.jsx)("div",{})),j=e=>({[s.O.Normal]:h.l.Success,[s.O.Uploading]:h.l.Processing,[s.O.Retry]:h.l.Failed})[e],O=e=>{var t,n;let{className:i,type:o,fileName:s,url:h,imageList:k=[],size:T,status:C,uploadPercent:O,onReUpload:F,onReParse:L,onDelete:D,parseState:W=b.MZ.ParseState_Default,parsedCharCount:Z,parsePercent:U,isRepo:B,repoInfo:z,showDeleteAlways:V}=e,H=(0,_.g1)(),G=(0,g.l)(),K="link"===o,X="file"===o,q="directory"===o,J=X&&W===b.MZ.ParseState_Failed,Q=X&&(0,c.Bx)(C),{Tooltip:Y=u.t}=(0,d.x$)(),{imageEventCallbacks:{onImageClick:ee,onImageRender:et},renderImagePreview:en}=(0,p.L5)({conversationId:"",messageId:"",chatType:"",conversationType:"",botId:""},k,l.iz.Original),er=(null==k?void 0:null===(n=k[0])||void 0===n?void 0:null===(t=n.image_ori)||void 0===t?void 0:t.url)||"",ei=B&&100===U?`${null==z?void 0:z.ref}`:q&&100===O&&100===U?H("cici_web_ai_coding_folder_desc"):"",eo=K&&(0,S.zq)(h)||B,ea=eo&&(null==z?void 0:z.name),{ext:es}=(0,f.qi)(K&&h?h:"",w.LW);return(0,I.jsx)($,{className:a()(i),...K?{link:null!=h?h:"",fileName:ea||h,linkExt:es}:{fileName:s,fileKey:s},viewOnly:"image"!==o&&!J&&!Q,bytes:T,uploadPercent:O,parsePercent:U,isRepo:B,zh:!!G&&(0,y.Xy)(G),Tooltip:Y,uploadStatus:K?void 0:j(C),parseStatus:X||q||B?(0,m.Z)(W):void 0,showRef:!1,charCount:Z,i18nConfig:{label_token_count_largenumber:H("label_token_count_largenumber"),label_token_count_smallnumber:H("label_token_count_smallnumber"),skill_copliotreading_not_read:H("skill_copliotreading_not_read"),skill_copliotreading_partial_read:H("skill_copliotreading_partial_read"),skill_copliotreading_read:H("skill_copliotreading_read"),skill_copliotreading_read_percentage:H("skill_copliotreading_read_percentage"),skill_read_pic_untitled:H("skill_read_pic_untitled"),skill_read_parsing_file:H("skill_read_parsing_file"),reference_modal_reference_item_status_uploading:H("reference_modal_reference_item_status_uploading"),chat_list_subtitle_link:H("chat_list_subtitle_link"),file_upload_error:H("file_upload_error"),file_parse_error:H("file_parse_error"),files_parse_click_retry:H("files_parse_click_retry"),skill_copliotreading_open:H("skill_copliotreading_open"),skill_copliotreading_download:H("skill_copliotreading_download"),skill_copliotreading_open_new_tab:H("skill_copliotreading_open_new_tab")},renderIcon:e=>{let t={className:"flex items-center justify-center !text-32 shrink-0"};return"image"===o&&k[0]?(0,I.jsxs)("div",{className:"flex h-40 w-40 shrink-0 items-center justify-center",children:[(0,I.jsx)(E.k7,{wrapperClassName:"rounded-4 overflow-hidden",onImageRender:e=>{let{src:t}=e;return t&&et(t)},src:(0,r.C)(er,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$N-%lJNamw1$2xNNWFtRkhSakJNTW5od1dXa3hhb%ZI%mpCT$-yeDFZM*hXT%$3elRubFpl$*xwW$ZodmR*a3lPWFJq%npsM$ds-zFNR041T1doa1N*Sm9X$EpvZEZwWE5%Qk1WMFo1$2xkRmRsa3lPWFJq%npsM$ds-zFNR041T1doa1N*Sm9X$EpvZEZwWE5%Qk1WMHAyWl$NNWNHSnR$bXhs%Xp$e$RXazFNR016-%doamJX%XhZM2M5%FE9PQ"}),imageOptions:{squareContainer:!0,objectFit:"cover",draggable:!1,width:40,height:40}}),en()]}):eo?100===U?(0,I.jsx)(R.Z,{...t}):(0,I.jsx)(x,{...t}):q?100===O&&100===U?(0,I.jsx)(N.Z,{...t}):(0,I.jsx)(M,{...t}):(0,v.VZ)(s)?100===O&&100===U?(0,I.jsx)(P.Z,{...t}):(0,I.jsx)(A.Z,{...t}):e},showDelete:!0,showDeleteAlways:V||(0,c.Ln)(C),onClickFile:e=>{"image"===o&&(null==ee||ee(e,er))},onClickReParse:L,onClickReUpload:F,onClickDelete:D,customSubTitle:ei})}},317229:function(e,t,n){"use strict";n.d(t,{j:function(){return l}});var r=n(344482),i=n(107481),o=n(93708),a=n(15348),s=n(886421);let l=e=>{var t,n,l,c,u;let{config:d}=e,p=null==d?void 0:d.localKey,v=null==d?void 0:d.file,f=(0,o.sQ)("attachmentUploadStore",e=>p?e.preprocessTaskMap[p]:void 0,r.X),m=null==f?void 0:f.key,h=(null==f?void 0:f.failed)?i.O.Retry:(null==f?void 0:f.loading)?i.O.Uploading:i.O.Normal,_=null==f?void 0:f.percent,g=m||(null===(t=(0,o.Wp)("attachmentUploadStore").getState().preprocessTaskMap[null!=p?p:""])||void 0===t?void 0:t.key),y={file_name:v&&"name"in v&&(null==v?void 0:v.name)||"",key:g||""};return{image:{imageList:[{key:g||"",image_thumb:{url:null!==(n=null==f?void 0:f.blobUrl)&&void 0!==n?n:"",width:0,height:0,format:""},image_ori:{url:null!==(l=null==f?void 0:f.blobUrl)&&void 0!==l?l:"",width:0,height:0,format:""},feedback:"",request_id:"",description:""}],uri:null!==(c=null==f?void 0:f.key)&&void 0!==c?c:"",url:null!==(u=null==f?void 0:f.blobUrl)&&void 0!==u?u:""},fileContent:y,upload:{status:h,percent:_},reUpload:e=>{(0,a.D)("attachmentUploadStoreService").then(t=>{var n;null==t||t.reUpload(null!=p?p:"",null!==(n=(0,s.SR)(e))&&void 0!==n?n:"")})},cancel:()=>{f&&(0,a.D)("attachmentUploadStoreService").then(e=>{null==e||e.cancel(f.fileKey)})}}}},724391:function(e,t,n){"use strict";n.d(t,{N6:function(){return l},dr:function(){return s},og:function(){return c}});var r=n(429996),i=n(993047),o=n(162957),a=n(627394);let s=(0,o.y)((0,r.lazy)(()=>(0,i.AD)({fn:()=>Promise.all([n.e("6973"),n.e("68592"),n.e("60681")]).then(n.bind(n,559521)).then(e=>{let{AttachmentFileArea:t}=e;return{default:t}}),fallback:{default:()=>(0,a.jsx)("div",{})}})),()=>(0,a.jsx)("div",{})),l=(0,o.y)((0,r.lazy)(()=>(0,i.AD)({fn:()=>Promise.all([n.e("6973"),n.e("62192"),n.e("60410")]).then(n.bind(n,625939)).then(e=>{let{AttachmentImageArea:t}=e;return{default:t}}),fallback:{default:()=>(0,a.jsx)("div",{})}})),()=>(0,a.jsx)("div",{})),c=(0,o.y)((0,r.lazy)(()=>(0,i.AD)({fn:()=>Promise.all([n.e("6973"),n.e("43850"),n.e("17478")]).then(n.bind(n,448917)).then(e=>{let{AttachmentArea:t}=e;return{default:t}}),fallback:{default:()=>(0,a.jsx)("div",{})}})),()=>(0,a.jsx)("div",{}))},878242:function(e,t,n){"use strict";n.d(t,{o:function(){return p}}),n(429996);var r=n(344482),i=n(335146),o=n(475434),a=n(93708),s=n(126628),l=n(708481),c=n(541752);let u=()=>({voiceConversationId:"",voiceCallStartTime:0});var d=n(627394);let p=e=>{let{ChatInputSlot:t,chatId:n,chatType:p,chatKey:v,renderFallback:f}=e,m=(0,a.sQ)("chatGuidanceStore",e=>({activeSkillType:e.activeSkillIdentifier}),r.X),h=(0,i.S0)(e=>e.batchDownloadSelected),_={chatId:n,chatType:p,chatKey:v,guidance:m,share:(0,o.p)(e=>({isSelectMode:e.isSelectMode,scene:e.scene}),r.X),voiceCall:u(),batchDownload:{isBatchDownloadMode:null!=h&&h}},{matcher:g}=(0,s.Ci)(),y=null==g?void 0:g.map(e=>e(_)).find(e=>void 0!==e),{plugin:b}=(0,l.$4)(y);return(0,d.jsx)(c.SV,{errorBoundaryName:"chat_input_error",fallback:null,children:b?(0,d.jsx)(b.Content,{..._,ChatInputSlot:t}):(0,d.jsx)(d.Fragment,{children:null==f?void 0:f()})})}},147333:function(e,t,n){"use strict";n.d(t,{Mr:function(){return l},XR:function(){return s.XR},mh:function(){return s.mh},yB:function(){return s.yB},ys:function(){return s.ys}});var r=n(429996),i=n(993047),o=n(162957),a=n(627394),s=n(787670);let l=(0,o.y)((0,r.lazy)(()=>(0,i.AD)({fn:()=>Promise.all([n.e("6973"),n.e("62192"),n.e("74212"),n.e("43850"),n.e("33382"),n.e("3821")]).then(n.bind(n,215381)).then(e=>{let{ChatInputRefContent:t}=e;return{default:t}}),fallback:{default:()=>(0,a.jsx)("div",{})}})),()=>(0,a.jsx)("div",{}))},787670:function(e,t,n){"use strict";n.d(t,{XR:function(){return l},mh:function(){return s},yB:function(){return o},ys:function(){return a}});var r=n(380815),i=n(126473);let o=e=>(0,r.sV)(e)?e.link:(0,r.xR)(e)?e.fileName:(0,r.DG)(e)?e.text:"",a=e=>(0,r.sV)(e)?(0,i.lm)(e.link):(0,r.xR)(e)?(0,i.lm)(e.fileName):"",s=(e,t)=>0===e.length?"No file.":1===e.length?e[0]:t("file_ref_all_files",{postProcess:"sprintf",sprintf:[e[0],`${e.length-1}`]}),l=e=>e.filter(e=>!!e).join(", ")},304043:function(e,t,n){"use strict";function r(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{s:function(){return i}});let i=new class{constructor(){r(this,"inputRef",null),r(this,"bindInputRef",e=>{this.inputRef=e}),r(this,"unbindInputRef",()=>{this.inputRef=null}),r(this,"focusOnInput",()=>{this.inputRef&&this.inputRef.focus()})}}},788988:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(304043);class i{focusOnEditor(){r.s.focusOnInput()}updateEditorValue(){}clearEditorValue(){}}},931832:function(e,t,n){"use strict";n.d(t,{qK:function(){return C.q},tz:function(){return N.tz},i_:function(){return E.i},mp:function(){return E.m},xg:function(){return M},Z8:function(){return N.Z8},m0:function(){return N.m0},U1:function(){return R.U},A_:function(){return N.A_},$c:function(){return N.$c},xz:function(){return N.xz},me:function(){return N.me},Tt:function(){return N.Tt},eg:function(){return N.eg}});var r=n(429996),i=n(344482),o=n(669160),a=n.n(o),s=n(789395),l=n(546336),c=n(93708),u=n(15348),d=n(708481),p=n(653019),v=n(308691),f=n(107599),m=n(886421),h=n(468494),_=n(205379),g=n(636674),y=n(999132),b=n(544888),S=n(894883),k=n(305919),w=n(693612),T=n(744787),E=n(286972),R=n(84397),C=n(846480),I={"guidance-input":"guidance-input-SO0KB2"},x=n(627394),N=n(122621);let M=e=>{let{chatId:t,chatType:n,className:o,disabled:a,reportParams:s,placeholder:d,enableArouseMoreSkill:w=!0,enableUpload:I=!0,enableUserUpload:N=!0,forceUseChatInputPlugin:M=!1,specificSkillID:$}=e,{isDisabled:j}=(0,l.V)(),O=a||j,[F,L]=(0,c.sQ)("chatInputStore",e=>[e.activeSkillTypeMap[t],e.skillMap],i.X),D=w&&F?{...null==L?void 0:L[F],skill_type:F}:$?null==L?void 0:L[$]:void 0,W=(0,f.jw)(t,n),Z=(0,m.yT)("",t),{reportParams:U}=(0,E.i)({chatId:t,chatType:n,activeSkill:D}),B={botType:Z,...s,...U},{trackParams:z}=(0,E.m)({chatId:t,chatType:n,activeSkill:D});(0,b.Hf)(e=>{(0,c.GX)("chatInputStore").closeSkillPanel(e),(0,u.D)("chatInputStoreService").then(e=>{null==e||e.resetSkillReportEvent()}),(0,p.vO)()}),(0,r.useEffect)(()=>{let e=h.useFeedStore.subscribe(e=>e.lastSectionIdMap[t],()=>{!(0,_.zU)(t)&&(0,u.D)("refContentStoreService").then(e=>{null==e||e.clearRefContents(t,{retainDisableRef:!0})})});return()=>{e()}},[t]);let V=(0,R.U)({activeSkillType:null==D?void 0:D.skill_type,reportParams:B}),{isToolButtonSmall:H,inputWidthDivRef:G}=(0,S.W)(),K=(0,v.CU)(),X=[g.SkillType.ReadPDF,g.SkillType.CodeInterpreter].includes(K),q=(0,y.Z)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return O?Promise.resolve(!1):V(...t)}),{isNewChatInput:J,loading:Q}=(0,k.F)(),Y=J&&W&&!M&&!K,ee=(0,C.q)({chatId:t,chatType:n,disabled:O,trackParams:z,skill:null!=D?D:{},reportParams:B,onBeforeSubmit:q,isToolButtonSmall:H}),et=(0,r.useMemo)(()=>({...ee,enableArouseMoreSkill:w,placeholder:d,enableUpload:I,enableUserUpload:N,className:o}),[ee,w,d,I,N,o]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{ref:G,className:"h-0 w-full"}),(0,x.jsx)("div",{className:"w-full","data-testid":"chat_input","data-onboarding-id":"chat_input",children:Q&&!M?(0,x.jsx)(T.Y,{className:o}):Y?(0,x.jsx)(A,{forceUseGenericInput:X,activeSkill:D,...et}):(0,x.jsx)(P,{forceUseGenericInput:X,activeSkill:D,...et})})]})},P=(0,r.memo)(function(e){let{activeSkill:t,forceUseGenericInput:n,...r}=e,{plugin:i,loading:o}=(0,d.os)(n?"generic":(null==t?void 0:t.skill_type)||"generic"),a=o||!i;return((0,w.J)(a),a||!n&&(null==i?void 0:i.skillType)!==(null==t?void 0:t.skill_type))?(0,x.jsx)(T.Y,{className:r.className}):(0,x.jsx)(x.Fragment,{children:null==i?void 0:i.render(r)})}),A=(0,r.memo)(function(e){let{activeSkill:t,forceUseGenericInput:n,...r}=e,{plugin:i,loading:o}=(0,d.cK)(n?"generic":(null==t?void 0:t.skill_type)||"generic"),l=o||!i;return((0,w.J)(l),l)?(0,x.jsx)(s.f,{className:a()(r.className,I["guidance-input"])}):(0,x.jsx)(i.Content,{...r,className:a()(r.className,I["guidance-input"]),exitSkillButtonTheme:"borderless"})})},846480:function(e,t,n){"use strict";n.d(t,{q:function(){return w}});var r=n(162063),i=n(474227),o=n(145625),a=n(156217),s=n(15348),l=n(93708),c=n(308691),u=n(689337),d=n(685955),p=n(17135),v=n(432626),f=n(338212),m=n(393648),h=n(115866),_=n(761606),g=n(644367),y=n(877384),b=n(821192),S=n(639088);let k=()=>Promise.resolve(!0),w=e=>{var t;let{chatId:n,chatType:w,disabled:T,trackParams:E,skill:R,reportParams:C,onBeforeSubmit:I=k}=e,x=(0,h.Z)(I),N=R.skill_type,M={skill_type:N,skill_type_str:(0,u.ci)(N),skill_id:N?N.toString():null,...C},P=(0,v.g1)(),A=(0,y.n1)(n),$=(0,c.Es)(),j=(0,a.GL)("chatConfigService"),O=(0,a.GL)("chatInputService"),F=(0,m.nu)(),{enableSkillPin:L=!0}=null!==(t=null==j?void 0:j.featureGating)&&void 0!==t?t:{},{onBeforeSendMessage:D}=(0,b.MR)({source:N?`send_message_${N}`:"send_message",eventName:"chat_input_guest_login",meta:{...M},chatId:n,chatType:w,checkNewGuidanceAb:!0,activeSkillType:A}),W=async e=>{await (0,S.GQ)(e)},Z=async e=>{let{files:t}=e.clipboardData,n=e.clipboardData.getData("text"),r=n.trim(),i=(0,f.U)(r),o=1===i.length&&i[0].type===f.y.link;await (0,S.As)({event:e,trimText:r,text:n,files:t,isValidLink:o})},U=(0,h.Z)(()=>{(0,s.D)("refContentStoreService").then(e=>{null==e||e.clearRefContents(n,{retainDisableRef:!0})})}),B=(0,h.Z)(async function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!await (null==x?void 0:x({reportParams:M}))||!await D({checkNewGuidanceAb:t.checkNewGuidanceAb}))return!1;let n=await (0,S.oW)();return("boolean"!=typeof n||!!n)&&((null===(e=t.clearRefContent)||void 0===e||e)&&U(),!0)}),z=(0,h.Z)(async e=>{let{exitSkill:t=!1}=e||{};await (0,S.WF)(),(0,s.D)("chatInputStoreService").then(e=>{A&&!$&&L&&F&&(null==e||e.pinSkill(A)),t?(0,l.GX)("chatInputStore").closeSkillPanel(n):A&&(0,l.GX)("chatInputStore").updateActiveSkillTypeMap(n,A,o.u.AfterSkill),g.k.persist.info({eventName:"skill_input_send_keep_input",meta:{...M,keep_input:t?"0":"1"}}),null==e||e.updateSelectedRecommendSkill(),null==e||e.updateSendMessageStatus(n,o.M.Sending)}),O.getAsrService().then(e=>{null==e||e.stopAsr()})}),V=(0,h.Z)((0,r.Z)(e=>{(0,p.trackEvent)("input_bar_enter",{click_scene:"skills_search_bar",...E,...(0,d.N)(e)})},1e3)),H=(0,h.Z)(e=>(0,p.trackEvent)("input_bar_edit",{action:"cancel_quote",...E,...(0,d.N)(e)}));return(0,_.D)({...e,chatId:n,chatType:w,disabled:T,sendMessageHoverText:P("send_button_hover_text"),trackParams:E,onKeyDown:W,onPaste:Z,onBeforeSendMessage:B,onAfterSendMessage:z,debouncedReportFocus:V,removeRefContentEvent:H,reportParams:M},i.Z)}},84397:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var r=n(689337),i=n(999132),o=n(644367);let a=e=>{let{activeSkillType:t,reportParams:n}=e,a=(0,i.Z)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;o.k.persist.info({eventName:"chat_input_send_start",meta:{...t?{skill_type:t,skill_type_str:(0,r.ci)(t),skill_id:(0,r.ci)(t)}:{skill_type_str:(0,r.ci)(),skill_id:(0,r.ci)()},...e}})});return function(){let{reportParams:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(e),Promise.resolve(!0)}}},286972:function(e,t,n){"use strict";n.d(t,{i:function(){return _},m:function(){return h}});var r=n(429996),i=n(344482),o=n(177056),a=n(444614),s=n(67864),l=n(829619),c=n(93708),u=n(557735),d=n(308691),p=n(468494),v=n(234761),f=n(689337),m=n(22714);let h=e=>{var t;let{chatId:n,chatType:o,activeSkill:a,show_scene:s}=e,l=(0,d.Es)(),c=(0,r.useMemo)(()=>{if(l)return{sendMessageSecScene:"input"}},[l]),u={...(0,p.useFeedStore)(e=>{var t;let r=(0,v.IO)(e),i=(0,v.jo)(e,n),o=(0,v.dg)(e,n);return{conversation_id:n,bot_id:r,conversation_type:null!==(t=null==i?void 0:i.conversation_type)&&void 0!==t?t:null==o?void 0:o.conversation_type}},i.X),show_scene:s,chat_type:o,skill_id:null==a?void 0:null===(t=a.skill_type)||void 0===t?void 0:t.toString(),skill_name:(0,f.Nu)(null==a?void 0:a.skill_type),is_deepsearch_show:0,...c};return{trackMeta:c,trackParams:u}},_=e=>{let{chatId:t,chatType:n,activeSkill:r}=e,i=(0,d.Es)(),p=n===s.z.NewThread&&!i,v=(0,c.sQ)("chatGuidanceStore",e=>(0,u.Uw)(e.skillGuidancePageFrom||l.M.DEFAULT)),f=(0,c.sQ)("chatInputStore",e=>e.selectedRecommendSkill),h=(0,c.sQ)("chatInputStore",e=>e.activeSkillFromMap[t]);return{reportParams:(()=>{let e=(0,o.Z)({action_bar_recommended:f&&(null==r?void 0:r.skill_type)===f.skill_type?(0,m.M)(f.tag):void 0,skill_from:(null==r?void 0:r.skill_type)===(null==h?void 0:h.skillType)?null==h?void 0:h.skillFrom:void 0},a.Z);return i?Object.assign(e,{scene:v,send_source:"skill_guidance_page"}):p&&Object.assign(e,{send_source:"guidance_page"}),e})()}}},122621:function(e,t,n){"use strict";n.d(t,{$c:function(){return u},A_:function(){return d},Tt:function(){return h},Z8:function(){return m},eg:function(){return g},m0:function(){return _},me:function(){return p},tz:function(){return v},xz:function(){return f}});var r=n(577518),i=n(986091),o=n(41359),a=n(15348),s=n(851510),l=n(631150),c=n(811208);let u=e=>({blob:e.file,local_key:e.localKey,from:e.from}),d=(e,t,n)=>({compositeContent:{text:e,images:[u(t)]},reportParams:n}),p=(e,t)=>({compositeContent:{text:e,files:[u(t)]},reportParams:{scene:"keyboard"}}),v=(e,t)=>({text:e,reportParams:t}),f=(e,t)=>({reportParams:t,image:e.file,local_key:e.localKey}),m=(e,t)=>({reportParams:t,file:e.file,local_key:e.localKey}),h=(e,t)=>({reportParams:t,file_key:e.key,file_name:e.fileName}),_=(e,t)=>{let{text:n,attachments:a,attachmentKeys:u,attachmentStates:d,enableImageVlm:p}=e,v=a.map((e,t)=>{var n,i,a,l;if((0,s.u$)(e))return;let v=u[t],f=null!==(i=e.fileName)&&void 0!==i?i:(0,c.G)("name")(e.file);if(!v)return;let m=(0,s.Q1)(e)?null!==(a=e.size)&&void 0!==a?a:0:null!==(l=null===(n=e.file)||void 0===n?void 0:n.size)&&void 0!==l?l:e.size,h=(0,s.Q1)(e)?(0,r.Z)():e.localKey,_=d[t],g={fileKey:v,fileName:f,size:m,identifier:h,parseState:_.parseState,reviewState:_.reviewState,md5:_.md5,localKey:_.localKey};return(0,s.Or)(e)?{...g,type:p?o.U3.Image:o.U3.File,fileType:o.bQ.OCRImage,image:{key:v,image_ori:{width:_.imageWidth,height:_.imageHeight}}}:{...g,type:o.U3.File,fileType:o.bQ.File}}).filter(l.Av);if(!(0,i.Z)(v))return{text:n,nestedItems:v,reportParams:{...t}}},g=async e=>{let t=await (0,a.D)("attachmentUploadStoreService"),n=null==t?void 0:t.popPreGeneratedId(e);return n?{pre_generate_id:n}:{}}},527301:function(e,t,n){"use strict";n.d(t,{$t:function(){return g},Gm:function(){return h},_E:function(){return _}});var r=n(743741),i=n(429996),o=n(669160),a=n.n(o),s=n(708481),l=n(254531),c=n(392956),u=n(761606),d=n(966015),p=n(736026),v=n(549261),f={"skill-bar-item":"skill-bar-item-raUMqz",skillBarItem:"skill-bar-item-raUMqz","hover-highlight":"hover-highlight-G5QFmp",hoverHighlight:"hover-highlight-G5QFmp",disabled:"disabled-CtXIby",text:"text-cHrarB",icon:"icon-DE3eTg","skill-bar-item__primary":"skill-bar-item__primary-EQmcz2",skillBarItemPrimary:"skill-bar-item__primary-EQmcz2",hoverable:"hoverable-Jtz67V",hoverable__primary:"hoverable__primary-HTnfaL",hoverablePrimary:"hoverable__primary-HTnfaL","activable__primary-active-back":"activable__primary-active-back-da7Tg8",activablePrimaryActiveBack:"activable__primary-active-back-da7Tg8","activable__primary-active":"activable__primary-active-eCx6mf",activablePrimaryActive:"activable__primary-active-eCx6mf",activable:"activable-L3c01o",activable__primary:"activable__primary-g5Fk8w",activablePrimary:"activable__primary-g5Fk8w"},m=n(627394);let h=(0,i.forwardRef)(function(e,t){let{text:n="",tooltip:o,className:s,itemClassName:u,icon:p,onShow:v,onClick:h,type:_="default",testId:g,onMouseUp:y,disabled:b=!1,hoverHighlight:S=!0,hoverable:k=!0,activable:w=!0,customNode:T}=e,{ref:E,inView:R}=(0,r.YD)(),C=(0,i.useRef)(null),[I,x]=(0,i.useState)(!0),N=(0,i.useRef)(!1);(0,i.useEffect)(()=>{R&&(null==v||v())},[R]),(0,i.useLayoutEffect)(()=>{if(I){let e=setTimeout(()=>x(!1),150);return()=>clearTimeout(e)}},[I]),(0,c.Z)(()=>N.current=!1,C,["mousedown","click"]);let M=(0,m.jsx)("div",{ref:t,className:a()("skill-bar-item-wrap",s),children:(0,m.jsxs)("div",{ref:e=>(C.current=e,E(e)),className:a()(f["skill-bar-item"],{[f["skill-bar-item__primary"]]:"primary"===_,[f["skill-bar-item__primary-active-back"]]:"primary"===_&&I,[f["skill-bar-item__primary-active"]]:"primary-active"===_,[f.disabled]:b,[f["hover-highlight"]]:S,[f.hoverable]:k,[f.activable]:w},u),onClick:()=>{x(!0),null==h||h()},onMouseDown:()=>N.current=!0,onMouseUp:()=>N.current&&(null==y?void 0:y()),...(0,l.aK)(g),children:[p&&(0,m.jsx)("div",{className:f.icon,children:p}),!!n&&(0,m.jsx)("div",{className:f.text,children:n}),T]})});return o?(0,m.jsx)(d.s,{content:o,children:M}):M}),_=e=>{var t;let{className:n,isNarrowMode:r,skill:o,index:s,colorful:l,hasTestId:c=!1}=e;return(0,i.createElement)(h,{...e,className:a()("pr-6",v.Qy,n),key:null!==(t=o.skill_type)&&void 0!==t?t:s,text:(r?o.show_name_short:o.show_name)||o.show_name,icon:(0,m.jsx)(p.y,{colorful:l,skill_type:o.skill_type}),testId:c?`skill_bar_button_${o.skill_type}`:void 0})},g=e=>{var t;let{skill:n,index:r,onPluginMouseUp:o,onMouseUp:a,from:l="input",pluginOnClick:c}=e,{plugin:d}=(0,s.sU)(n.skill_type),p=(0,u.D)(d,(e,t)=>(null==e?void 0:e.skillType)===(null==t?void 0:t.skillType)),v=(0,i.useMemo)(()=>null==p?void 0:p.Component,[p]);return v?(0,m.jsx)(v,{skill:n,from:l,onClick:null!=c?c:a,renderContent:t=>{var a;let{onClick:s,keepMorePopover:l,customNode:c=e.customNode}=t;return(0,i.createElement)(_,{...e,customNode:c,key:null!==(a=n.skill_type)&&void 0!==a?a:r,onMouseUp:()=>{o({onClick:s,keepMorePopover:l,customNode:c})}})}}):(0,i.createElement)(_,{...e,key:null!==(t=n.skill_type)&&void 0!==t?t:r})}},689768:function(e,t,n){"use strict";n.d(t,{s:function(){return _}});var r=n(743741),i=n(429996),o=n(669160),a=n.n(o),s=n(145625),l=n(708481),c=n(432626),u=n(393648),d=n(790804),p=n(736026),v=n(627394);let f=e=>{let{className:t,testid:n,customNode:o,onClick:s,onShow:l,children:c}=e,{ref:u,inView:d}=(0,r.YD)();return(0,i.useEffect)(()=>{d&&(null==l||l())},[d]),(0,v.jsxs)("button",{ref:u,className:a()("py-8 px-10 rounded-6 hover:bg-s-color-bg-trans flex items-center gap-8 cursor-pointer border-none bg-transparent w-full justify-start text-left outline-none",t),"data-testid":n,onClick:s,children:[c,o]})},m=e=>{let{item:t,isNarrowMode:n}=e;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(p.y,{className:"flex !size-16 items-center justify-center text-s-color-text-primary",skill_type:t.skill_type}),(0,v.jsx)("p",{className:"text-14 leading-22 font-normal text-dbx-text-primary",children:(n?t.show_name_short:t.show_name)||t.show_name})]})},h=e=>{let{item:t,className:n,isNarrowMode:r,testid:o,from:a="more_skills",pluginOnClick:s,onClick:c,onShow:u}=e,{plugin:d}=(0,l.sU)(t.skill_type),p={item:t,className:n,isNarrowMode:r,testid:o,onShow:u,onClick:()=>null==c?void 0:c({})},h=(0,v.jsx)(m,{item:t,isNarrowMode:r}),_=(0,v.jsx)(f,{...p,children:h}),g=(null==d?void 0:d.Component)||(null==d?void 0:d.LiteComponent);return g?(0,v.jsx)(i.Suspense,{fallback:_,children:(0,v.jsx)(g,{skill:t,from:a,onClick:s,renderContent:e=>{let{onClick:t,keepMorePopover:n,customNode:r}=e;return(0,v.jsx)(f,{...p,customNode:r,onClick:()=>{null==c||c({keepMorePopover:n,onlyReportEvent:!0}),null==t||t()},children:h})}})}):_},_=e=>{let{className:t,items:n,activeIndex:o,activeItemClassName:l,itemClassName:p,isNarrowMode:f=!1,from:m,enableSkillPin:_=!0,onSelectSkill:g,onClickSkillPin:y,onSkillShow:b,onSkillPinShow:S,skillItemListRef:k}=e,w=(0,c.g1)(),{ref:T,inView:E}=(0,r.YD)(),{trimSkills:R}=(0,d.C)();(0,i.useEffect)(()=>{E&&(null==S||S())},[E]);let C=(0,u.nu)();return(0,v.jsxs)("div",{ref:k,className:t,children:[null==n?void 0:n.map((e,t)=>{var n;return(0,v.jsx)(h,{item:e,className:a()(p,t===o?l:""),isNarrowMode:f,from:m,testid:`skill_bar_button_${e.skill_type}`,onShow:()=>null==b?void 0:b(e),pluginOnClick:()=>{null==g||g(e.skill_type,s.u.ClickSkill,{skipReport:!0},t,null==e?void 0:e.sticky)},onClick:n=>null==g?void 0:g(e.skill_type,s.u.ClickSkill,n,t,null==e?void 0:e.sticky)},null!==(n=e.skill_type)&&void 0!==n?n:t)}),C&&_&&!R&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:`
              mx-4 my-4 border-t-0 border-b-[0.5px] border-solid border-s-color-border-secondary
            `}),(0,v.jsx)("button",{ref:T,className:a()("py-8 px-12 text-s-color-text-secondary s-font-small-strong border-none hover:bg-s-color-bg-trans bg-transparent cursor-pointer rounded-s-radius-xxss w-full text-left outline-none",p,f?"!text-12":""),onClick:y,children:w("web_chat_skill_menuOption_settings")})]})]})}},917057:function(e,t,n){"use strict";n.d(t,{O:function(){return u}});var r=n(93708),i=n(46793),o=n(107599),a=n(245966),s=n(636674),l=n(393648),c=n(639088);let u=()=>{let{chatId:e,chatType:t}=(0,i.JW)()||{},n=(0,r.sQ)("chatInputStore",t=>e?t.activeSkillTypeMap[e]:void 0),u=(0,o.jw)(e||"",t),{value:d}=(0,a.f)({key:"aispace_revert",defaultValue:"0",isServerAb:!0}),{value:p}=(0,a.f)({key:"input_upload_aispace_enable",defaultValue:!1});return{enableAISpaceUpload:(0,l.nu)()&&"0"!==d&&p&&u&&(!n||n===s.SkillType.ReadPDF)&&!0,showAISpaceUploadModal:()=>{(0,c.xK)()}}}},549261:function(e,t,n){"use strict";n.d(t,{GI:function(){return h},JL:function(){return g},Qy:function(){return p},Un:function(){return v},WO:function(){return f},s:function(){return _},yJ:function(){return m}});var r,i=n(429996),o=n(344482),a=n(468494),s=n(234761),l=n(689337),c=n(17135),u=n(644367),d=n(877384);let p="skill-bar-button",v=()=>document.querySelectorAll(`.${p}`).length>0,f=e=>{let{visible:t,displaySkills:n,reportParams:r}=e;(0,i.useEffect)(()=>{t&&0!==n.length&&(u.k.persist.log({eventName:"skill_bar_show_start",meta:r}),setTimeout(()=>{v()&&u.k.persist.log({eventName:"skill_bar_show_success",meta:r})},300))},[])},m=e=>{let{chatId:t}=e;return(0,a.useFeedStore)(e=>{var n;let r=(0,s.jo)(e,t),i=(0,s.dg)(e,t);return{conversation_id:t,bot_id:(0,s.IO)(e),conversation_type:null!==(n=null==r?void 0:r.conversation_type)&&void 0!==n?n:null==i?void 0:i.conversation_type}},o.X)},h=((r={}).More="more",r.Default="default",r.KeyboardAt="keyboard_at",r),_=e=>({reportSkillShow:function(t){var n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.Default,i=(0,d.mZ)().findIndex(e=>e.skill_type===(null==t?void 0:t.skill_type));(0,c.trackEvent)("chat_action_bar_show",{skill_id:null==t?void 0:null===(n=t.skill_type)||void 0===n?void 0:n.toString(),skill_name:(0,l.Nu)(null==t?void 0:t.skill_type),show_position:r,position:-1===i?void 0:i,is_top:(null==t?void 0:t.sticky)?"1":"0",...e})},reportMoreSkillsShow:t=>{(0,c.trackEvent)("chat_action_bar_show",{skill_name:"skills",show_position:"default",is_top:"0",position:t,...e})},reportSkillPinShow:()=>{(0,c.trackEvent)("chat_action_bar_show",{skill_name:"change_index",show_position:"more",is_top:"0",position:(0,d.mZ)().length,...e})},reportMoreSkillClick:t=>{(0,c.trackEvent)("chat_action_bar_click",{skill_name:"skills",show_position:"default",is_top:"0",position:t,...e})},reportSkillPinClick:()=>{(0,c.trackEvent)("chat_action_bar_click",{skill_name:"change_index",show_position:"more",is_top:"0",position:(0,d.mZ)().length,...e})}}),g=e=>{let{reportSkillShow:t,reportMoreSkillsShow:n,reportSkillPinShow:r,reportMoreSkillClick:i,reportSkillPinClick:o}=_(e);return{reportSkillShow:t,reportMoreSkillsShow:n,reportSkillPinShow:r,reportMoreSkillClick:i,reportSkillPinClick:()=>{o(),(0,c.trackEvent)("skill_switch_click",{button_name:"skill_setting"})},reportSkillSwitchClick:e=>{let{skillType:t}=e;(0,c.trackEvent)("skill_switch_click",{button_name:(0,l.Nu)(t)})}}}},839157:function(e,t,n){"use strict";n.d(t,{DT:function(){return p},K1:function(){return v},Mw:function(){return d}});var r=n(546336),i=n(107599),o=n(851228),a=n(592333),s=n(393648),l=n(275268),c={"disabled-tips":"disabled-tips-WW4kyE"},u=n(627394);let d=e=>function(t){let{chatId:n,chatType:r}=t,{isDisabled:i,disabledText:o}=e({chatId:n,chatType:r});return i?(0,u.jsx)("div",{className:c["disabled-tips"],children:o}):null},p=e=>{let{chatId:t}=e,n=(0,i.sX)(t),c=(null==n?void 0:n.bot_id)||t,u=l.chatInputServiceContainer.get("chatBotService"),d=(null==u?void 0:u.useBotInfoHook(c))||{},p=(0,s.nu)(),v=(0,r.V)();return(()=>{let e=(null==d?void 0:d.bot_mode)===a.J4.subject;return!!p&&d.disabled_tag!==o.yy.Ban&&(d.disabled_tag!==o.yy.Rollback||!e)})()?v:{isDisabled:!1}},v=d(p)},56428:function(e,t,n){"use strict";n.d(t,{J:function(){return c}}),n(429996);var r=n(444614),i=n(669160),o=n.n(i),a=n(184365),s=n(75175),l=n(627394);let c=e=>{let{tooltipContent:t}=e;return(0,l.jsx)(a.DbxTooltip,{content:t,position:"bottom",className:o()({"!hidden":(0,r.Z)(t)}),children:(0,l.jsx)("div",{className:o()("size-34 flex items-center justify-center rounded-full","hover:bg-dbx-fill-trans-10-hover cursor-pointer"),children:(0,l.jsx)(s.W,{className:"size-16 text-dbx-text-primary"})})})}},993396:function(e,t,n){"use strict";n.d(t,{P:function(){return c},J:function(){return s.Z}});var r=n(669160),i=n.n(r),o=n(845869),a=n(357705),s=n(736257),l=n(627394);let c=e=>{let{children:t,className:n,...r}=e;return(0,l.jsx)(o.Z,{...r,className:i()("scroll-tabs-W1gCqL",n),renderTabBar:(e,t)=>(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)(a.l,{enableArrowBorder:!1,carouselRowClassName:"px-20 !bg-[#f7f7f7]",children:(0,l.jsx)(t,{...e,tabBarExtraContent:null})}),e.tabBarExtraContent]}),children:t})}},610585:function(e,t,n){"use strict";n.d(t,{w:function(){return s}});var r=n(669160),i=n.n(r),o=n(653118),a=n(627394);let s=e=>{let{className:t,children:n,samanthaLayoutProps:r}=e;return(0,a.jsx)(o.bo.MaxWidthLayout,{...r,children:(0,a.jsx)("div",{className:i()("footer-I3c8rg",t),children:n})})}},400955:function(e,t,n){"use strict";n.d(t,{g:function(){return g}});var r=n(429996),i=n(607278),o=n(669160),a=n.n(o),s=n(145625),l=n(510361),c=n(629738),u=n(723998),d=n(577831),p=n(190412),v=n(436450),f=n(743567),m=n(222334),h={"chat-input":"chat-input-kWIgzK",chatInput:"chat-input-kWIgzK",disabled:"disabled-rnWzM7","right-tools-container":"right-tools-container-vFoD6y",rightToolsContainer:"right-tools-container-vFoD6y","left-area":"left-area-ELhPUk",leftArea:"left-area-ELhPUk",input:"input-A_xeMF",menu:"menu-j3XcQ6","grid-container":"grid-container-vnmw4K",gridContainer:"grid-container-vnmw4K","grid-left-tools":"grid-left-tools-lJkK1e",gridLeftTools:"grid-left-tools-lJkK1e","grid-input-area":"grid-input-area-OLFGBV",gridInputArea:"grid-input-area-OLFGBV","grid-right-tools":"grid-right-tools-EZkK8B",gridRightTools:"grid-right-tools-EZkK8B",sm:"sm-nweEuQ",md:"md-mqB_Mi"},_=n(627394);let g=(0,r.forwardRef)((e,t)=>{var n;let{disabled:o,readonly:g=!1,allowEmptySubmit:y,onSubmit:b,onPaste:S,onAutoTransValue:k,onKeyDown:w,clearInputOnSubmit:T=!0,placeholder:E,sendBtnSmall:R,sendMessageHoverText:C,sendMessageButtonText:I,sendMessageButtonClassName:x,breakBtnHoverText:N,hasAccessoryArea:M=!1,renderInputTop:P,renderRefContent:A,renderLeftTools:$,renderRightTools:j,renderSendBtn:O,unableToSend:F,resetAccessoryArea:L,onEmptyAt:D,disabledWrapperClick:W,onFocus:Z,rows:U=1,responsiveSize:B,sendMessageStatus:z,onClickSendButton:V,onClickDisabledSendButton:H,onClickBreakButton:G,onSendBtnWrapperClick:K,onInput:X,onValueChange:q}=e,J=(0,r.useCallback)(e=>{if(null==b||b(e),(0,d.KX)()){var t;let e=null===(t=document)||void 0===t?void 0:t.activeElement;e&&"blur"in e&&(0,i.Z)(e.blur)&&e.blur()}},[b]),Q=(0,r.useRef)(null),{width:Y}=(0,p.Z)(Q)||{},ee=(0,r.useMemo)(()=>Y&&Y<480?"sm":B,[Y,B]),{textAreaRef:et,textAreaProps:en,submit:er,clear:ei}=(0,l.z)({onSubmit:J,allowEmpty:y,clearInputOnSubmit:T,attachmentCanNotSend:!!M&&F,onEmptyAt:D}),{value:eo}=en;(0,r.useImperativeHandle)(t,()=>({focus:()=>{var e;null===(e=et.current)||void 0===e||e.focus()},clear:()=>{null==L||L(),ei()},autoTransValue:(e,t)=>{var n;null===(n=et.current)||void 0===n||n.focus(),en.onChange(e),null==k||k(e,t)},getText:()=>{var e;return(null===(e=et.current)||void 0===e?void 0:e.value)||""},setText:e=>{en.onChange(e),null==q||q(e)},getTextareaWidth:()=>{var e;return null===(e=et.current)||void 0===e?void 0:e.offsetWidth},blur:()=>{var e;null===(e=et.current)||void 0===e||e.blur()}}),[]);let ea=(0,r.useMemo)(()=>{var e;return!!o||(M?F:!y&&(null===(e=en.value)||void 0===e?void 0:e.trim())==="")},[o,z,M,F,y,en.value]),es=(0,v.Vr)(eo,!0),el=z===s.M.Receiving;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{onClick:()=>{if(o)null==W||W();else{var e;null===(e=et.current)||void 0===e||e.focus()}},children:[null==P?void 0:P(),null==A?void 0:A(),(0,_.jsxs)("div",{ref:Q,className:a()(h["chat-input"],h["grid-container"],o&&h.disabled,ee&&h[ee]),children:[$&&(0,_.jsx)("div",{className:a()(h.menu,h["grid-left-tools"]),children:$()}),(0,_.jsx)("div",{className:a()(h["grid-input-area"]),children:(0,_.jsx)(m.N,{dir:(0,f.d)()?es:"ltr",readOnly:g,ref:et,disabled:o,...en,onChange:e=>{null==q||q(e),en.onChange(e)},onKeyDown:e=>{null==w||w(e),en.onKeyDown(e)},className:h.input,rows:U,autosize:!0,placeholder:E,onPaste:S,autoComplete:"off","data-testid":"chat_input_input",onFocus:Z,onInput:X})}),(0,_.jsx)("div",{className:a()(h["grid-right-tools"],h["right-tools-container"]),children:null!==(n=null==O?void 0:O())&&void 0!==n?n:(0,_.jsx)(c.a,{small:R,sendMessageHoverText:C,sendMessageButtonText:I,sendMessageClassName:x,breakBtnHoverText:N,breakBtnVisible:el,disableToSend:ea,onClickSendButton:()=>{null==V||V(),er()},onClickBreakButton:G,onClickDisabledSendButton:H,onWrapperClick:()=>null==K?void 0:K({breakBtnVisible:el,disableToSend:ea}),beforeNodes:(0,_.jsx)("div",{className:a()(h["left-area"]),children:j&&(0,_.jsx)(_.Fragment,{children:j()})})})})]})]}),(0,_.jsx)(u.w,{name:"chat_input_html_loaded"})]})})},920541:function(e,t,n){"use strict";n.d(t,{o:function(){return d}});var r=n(429996),i=n(210230),o=n(669160),a=n.n(o),s=n(471549),l={"chat-input":"chat-input-cgIC3I","single-line":"single-line-q5_dZN",bottom:"bottom-WH4r7v",placeholder:"placeholder-CvGPiw","box-shadow":"box-shadow-kLVNoV",small:"small-DKZGhJ","chat-input-with-upload":"chat-input-with-upload-a1r_Fz","chat-input-button":"chat-input-button-od14Gx","chat-input-content":"chat-input-content-yo1w8N","chat-input-tool":"chat-input-tool-nRZ3bR","chat-input-button-round":"chat-input-button-round-NLmTa0"},c=n(627394);let u=!1,d=e=>{let{placeholder:t,style:n,className:o,uploadIcon:d,boxShadow:p=!1,singleLine:v=!0}=e,f=(0,r.useRef)(null),[m,h]=(0,r.useState)(u);return(0,r.useEffect)(()=>{var e;let t=null===(e=f.current)||void 0===e?void 0:e.clientWidth,n=(0,i.Z)(t)||0===t?u:t<480;u=n,h(n)},[]),(0,c.jsx)("div",{ref:f,className:a()(l["chat-input"],v&&l["single-line"],p&&l["box-shadow"],m&&l.small,d&&l["chat-input-with-upload"],o),style:n,children:v?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:l["chat-input-content"]}),(0,c.jsx)("div",{className:l["chat-input-tool"]}),(0,c.jsx)("div",{className:l["chat-input-tool"]}),(0,c.jsx)("div",{className:l["chat-input-button-round"]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("textarea",{disabled:!0,placeholder:t}),(0,c.jsxs)("div",{className:l.bottom,children:[d,(0,c.jsx)("div",{className:l.placeholder}),(0,c.jsx)(s.Z,{className:l["chat-input-button"]})]})]})})}},744787:function(e,t,n){"use strict";n.d(t,{Y:function(){return v}});var r=n(669160),i=n.n(r),o=n(67864),a=n(46793),s=n(432626),l=n(393648),c=n(350538),u=n(920541),d={"center-input":"center-input-oFzOro"},p=n(627394);function v(){let{className:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.g1)(),n=(0,a.mC)(),r=(0,l.Dv)(),v=!(0,c.dM)(),f=r||v;return(0,p.jsx)(u.o,{className:i()(e,f&&n===o.z.NewThread&&d["center-input"]),placeholder:t(f?"homepage_centered_input_placeholder":"default_input_placeholder")})}},101090:function(e,t,n){"use strict";n.d(t,{Q:function(){return p}});var r=n(577518),i=n(923404),o=n(814986);function a(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s{addChild(e){this.children.push(e)}constructor({name:e,isDirectory:t,parentNode:n,file:i,isRoot:o=!1}){a(this,"id",(0,r.Z)()),a(this,"name",void 0),a(this,"isDirectory",void 0),a(this,"parentNode",void 0),a(this,"children",[]),a(this,"path",""),a(this,"file",void 0),a(this,"isRoot",void 0),this.name=e,this.isDirectory=t,this.parentNode=n,this.file=i,this.isRoot=o||!1}}class l{buildTree(e){for(let n of(this.root=new s({name:"root",isDirectory:!0,parentNode:null,file:new File([],"root")}),e)){var t;let e=(null===(t=n.webkitRelativePath||n.customFilePath)||void 0===t?void 0:t.split("/"))||[],r=this.root,i="";for(let t=0;t<e.length;t++){let o=e[t];i+=(0===t?"":"/")+o;let a=r.children.find(e=>e.name===o);if(a)r=a;else{let a=t<e.length-1,l=new s({name:o,isDirectory:a,parentNode:r,file:n,isRoot:a&&0===t});l.path=i,r.addChild(l),r=l}}}return this.root}bfsTraverse(e){if(!this.root)return;let t=[this.root];for(;t.length>0;){let n=t.shift();n!==this.root&&e(n),t.push(...n.children)}}dfsTraverse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Z;if(e)for(let n of(e!==this.root&&t(e),e.children))this.dfsTraverse(n,t)}displayTree(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="";if(e!==this.root){let r="\u2502  ".repeat(t-1)+(t>0?"\u251C\u2500 ":"");n+=`<div class="node">
              ${r}<span class="${(null==e?void 0:e.isDirectory)?"folder":"file"}">
              ${(null==e?void 0:e.isDirectory)?"\uD83D\uDCC1":"\uD83D\uDCC4"} ${null==e?void 0:e.name}
              </span>
          </div>`}for(let r of(null==e?void 0:e.children)||[])n+=this.displayTree(r,t+1);return n}constructor(){a(this,"root",null)}}var c=n(211737);class u extends c.U{get canPause(){return!1}get canRetry(){return!1}run(){}pause(){}retry(){}constructor({nodeId:e,...t}){super(t),this.nodeId=e,this._status$.next(i.KV.Success)}}function d(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p{uploadFiles(e,t){let{mountNodeId:n,meta:i}=t,o=[],a=new u({nodeId:n});this.tasksMap.set(a.id,a);let s=(0,r.Z)();return e.forEach(e=>{let t=this.createFileTask({parentTask:a,file:e,batchId:s,meta:i}),n=t.id;this.tasksMap.set(n,t),o.push(t)}),this.startRunTaskParallel(),o.map(e=>e.toReadOnly())}uploadDirectory(e,t){let{mountNodeId:n,meta:i}=t,o=[],a=function(e){let t=new l;return t.buildTree(e),t}(e),s=new u({nodeId:n||""});this.tasksMap.set(s.id,s);let c=(0,r.Z)();return a.bfsTraverse(e=>{if(0===e.file.size)return;let{parentNode:t}=e,n=(null==t?void 0:t.parentNode)?this.tasksMap.get(t.id):s,r=e.isDirectory?this.createDirectoryTask({id:e.id,parentTask:n,directoryName:e.name,batchId:c,meta:i,isRoot:e.isRoot}):this.createFileTask({id:e.id,parentTask:n,file:e.file,batchId:c,meta:i}),a=r.id;o.push(r),this.tasksMap.set(a,r)}),this.startRunTaskParallel(),o.map(e=>e.toReadOnly())}startRunTaskParallel(){let e=[...this.runningTasksInfoMap.values()];if(e.length>=6){e.forEach(e=>e.task.run());return}let t=6-e.length,n=[...this.tasksMap.values()].filter(e=>e.getStatus()===i.KV.Pending).slice(0,t);n.length&&n.forEach(e=>{let{id:t}=e,n={task:e};this.runningTasksInfoMap.set(t,n);let r=e.status$.subscribe(e=>{if([i.KV.Success,i.KV.Paused,i.KV.Error].includes(e)){var n;null===(n=r.unsubscribe)||void 0===n||n.call(r),this.runningTasksInfoMap.delete(t),setTimeout(()=>{this.startRunTaskParallel()},100);return}});n.unsubscribe=()=>r.unsubscribe(),e.run()})}pauseTask(e){let t=this.tasksMap.get(e);(null==t?void 0:t.canPause)&&t.pause()}pauseAllTasks(){[...this.tasksMap.values()].filter(e=>e.canPause).forEach(e=>{e.pause()})}retryTask(e){let t=this.tasksMap.get(e);(null==t?void 0:t.canRetry)&&(t.retry(),this.startRunTaskParallel())}retryAllTasks(){[...this.tasksMap.values()].filter(e=>e.canRetry).forEach(e=>{e.retry()}),this.startRunTaskParallel()}retryAllFailedTasks(){[...this.tasksMap.values()].filter(e=>e.getStatus()===i.KV.Error&&e.canRetry).forEach(e=>{e.retry()}),this.startRunTaskParallel()}retryAllPausedTasks(){[...this.tasksMap.values()].filter(e=>e.getStatus()===i.KV.Paused&&e.canRetry).forEach(e=>{e.retry()}),this.startRunTaskParallel()}deleteTask(e){var t;let n=this.tasksMap.get(e);null==n||n.destroy();let r=this.runningTasksInfoMap.get(e);null==r||null===(t=r.unsubscribe)||void 0===t||t.call(r),this.runningTasksInfoMap.delete(e),this.tasksMap.delete(e)}deleteAllTasks(){[...this.tasksMap.keys()].forEach(e=>{this.deleteTask(e)})}destroy(){this.deleteAllTasks()}constructor({createFileTask:e,createDirectoryTask:t}){d(this,"tasksMap",new Map),d(this,"runningTasksInfoMap",new Map),d(this,"createFileTask",void 0),d(this,"createDirectoryTask",void 0),this.createFileTask=e,this.createDirectoryTask=t}}},805631:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});var r=n(923404),i=n(644367),o=n(211737);function a(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends o.U{run(){if(!this.canRun){i.k.persist.info({eventName:"DirectoryTask_CanNotRun"});return}if(this.getStatus()===r.KV.Paused)return;i.k.persist.info({eventName:"DirectoryTask_Start"});let{parentTask:e}=this;if(!e){i.k.persist.info({eventName:"DirectoryTask_CompleteWithoutMount"}),this._status$.next(r.KV.Success);return}e.getStatus()===r.KV.Error?(i.k.persist.info({eventName:"DirectoryTask_ReadyToMount_ParentTaskErrorRetry"}),e.retry()):e.run(),this._status$.next(r.KV.Inflight),e.status$.subscribe(async e=>{if(e===r.KV.Success){i.k.persist.info({eventName:"DirectoryTask_MountStart"});try{await this.mountNode(),this._status$.next(r.KV.Success),i.k.persist.info({eventName:"DirectoryTask_MountSuccess"})}catch(e){e instanceof Error&&i.k.persist.error({eventName:"DirectoryTask_MountFailed",error:e}),this._status$.next(r.KV.Error)}}})}get canPause(){return!1}pause(){}toReadOnly(){return{...super.toReadOnly(),type:r.lQ.Directory,isRoot:this.isRoot}}constructor({directoryName:e,isRoot:t,meta:n,...r}){super(r),a(this,"directoryName",void 0),a(this,"isRoot",!1),this.directoryName=e,this.isRoot=!!t,this.meta=n}}},670949:function(e,t,n){"use strict";n.d(t,{Q:function(){return d}});var r=n(233893),i=n(923404),o=n(15348),a=n(93708),s=n(685955),l=n(644367),c=n(211737);function u(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends c.U{getErrorType(){return this.errorType}async run(){if(!this.canRun){l.k.persist.info({eventName:"FileTask_CanNotRun"});return}if(this.uploadResult){this.executeMountNode();return}let{file:e}=this;if(await this.tryResumeUploading())return;this._status$.next(i.KV.Inflight),l.k.persist.info({eventName:"FileTask_UploadStart",meta:{size:e.size}});let t={complete:t=>{l.k.persist.info({eventName:"FileTask_UploadComplete",meta:{size:e.size}}),this.uploadResult=t.uploadResult;let{parentTask:n}=this;if(!n){l.k.persist.info({eventName:"FileTask_CompleteWithoutMount"}),this._status$.next(i.KV.Success);return}n.getStatus()===i.KV.Error?(l.k.persist.info({eventName:"FileTask_ReadyToMount_ParentTaskErrorRetry"}),n.retry()):n.run(),n.status$.subscribe(e=>{e===i.KV.Success&&(l.k.persist.info({eventName:"FileTask_MountStart"}),this.executeMountNode())})},progress:e=>{let t=Number(e.percent);Number.isFinite(t)&&this._uploadPercent$.next(t)},error:()=>{l.k.persist.info({eventName:"FileTask_UploadFailed",meta:{size:this.file.size}}),this.errorType=i.Gb.UploadError,this._status$.next(i.KV.Error)}};if(this.getCustomUploader){let n=await this.getCustomUploader();if(n){null==n||n.upload(e,{complete:t.complete,progress:t.progress,error:t.error});return}}let n=await (0,o.D)("attachmentUploadStoreService");if(!n)return;let{local_key:r}=n.preprocessFile(e,this.preprocessTaskType(),void 0,{calculateMd5:this.calculateMd5,fileUploadCallbacks:t});this.uploadFileKey=r}async pause(){if(!this.canPause)return;if(this.getStatus()===i.KV.Pending){this._status$.next(i.KV.Paused);return}let e=this.getFileKey();if(this.getStatus()===i.KV.Inflight&&this.uploadFileKey&&e){let t=await (0,o.D)("attachmentUploadStoreService");null==t||t.pause(e,this.preprocessTaskType()),this._status$.next(i.KV.Paused)}}async executeMountNode(){try{await this.mountNode(),this._status$.next(i.KV.Success),l.k.persist.info({eventName:"FileTask_MountSuccess"})}catch(e){l.k.persist.info({eventName:"FileTask_MountFailed",error:e}),this.errorType=i.Gb.MountError,this._status$.next(i.KV.Error)}}async tryResumeUploading(){if(!this.uploadFileKey)return!1;let{fileKey:e,loading:t}=(0,a.Wp)("attachmentUploadStore").getState().preprocessTaskMap[this.uploadFileKey];if(!e||!t)return!1;l.k.persist.info({eventName:"FileTask_UploadResume",meta:{size:this.file.size}});let n=await (0,o.D)("attachmentUploadStoreService");return null==n||n.resume(e,this.preprocessTaskType()),this._status$.next(i.KV.Inflight),!0}getUploadResult(){return this.uploadResult}toReadOnly(){return{...super.toReadOnly(),type:i.lQ.File,uploadPercent$:this.uploadPercent$,getFileLocalKey:()=>this.uploadFileKey,getFile:()=>this.file,getErrorType:()=>this.errorType}}preprocessTaskType(){return(0,s.V)(this.file)?"image":"file"}getFileKey(){if(!this.uploadFileKey)return;let{fileKey:e}=(0,a.Wp)("attachmentUploadStore").getState().preprocessTaskMap[this.uploadFileKey]||{};return e}async destroy(){if(super.destroy(),this.uploadFileKey){let{fileKey:e,loading:t}=(0,a.Wp)("attachmentUploadStore").getState().preprocessTaskMap[this.uploadFileKey];if(e&&t){l.k.persist.info({eventName:"FileTask_UploadCancel"});let t=await (0,o.D)("attachmentUploadStoreService");null==t||t.cancel(e)}}}constructor({file:e,...t}){super(t),u(this,"errorType",void 0),u(this,"file",void 0),u(this,"uploadFileKey",null),u(this,"uploadResult",void 0),u(this,"_uploadPercent$",new r.X(0)),u(this,"uploadPercent$",this._uploadPercent$.asObservable()),u(this,"getCustomUploader",void 0),u(this,"calculateMd5",!0),this.file=e}}},211737:function(e,t,n){"use strict";n.d(t,{U:function(){return s}});var r=n(577518),i=n(233893),o=n(923404);function a(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s{get canPause(){return[o.KV.Pending,o.KV.Inflight].includes(this.getStatus())}get canRetry(){return[o.KV.Paused,o.KV.Error].includes(this.getStatus())}get canRun(){return![o.KV.Inflight,o.KV.Success].includes(this.getStatus())&&!this.isDestroyed}get isDestroyed(){return this._isDestroyed}retry(){this.canRetry&&this._status$.next(o.KV.Pending)}toReadOnly(){return{id:this.id,getNodeId:()=>this.nodeId,status$:this.status$,getStatus:()=>this._status$.value,getParentNodeId:()=>{var e;return null===(e=this.parentTask)||void 0===e?void 0:e.getNodeId()},getMeta:()=>this.meta}}async mountNode(){return Promise.reject(Error("not implemented"))}destroy(){this._status$.complete(),this._isDestroyed=!0}constructor({parentTask:e,id:t,batchId:n}){a(this,"_isDestroyed",!1),a(this,"id",void 0),a(this,"batchId",void 0),a(this,"nodeId",void 0),a(this,"_status$",new i.X(o.KV.Pending)),a(this,"parentTask",void 0),a(this,"status$",this._status$.asObservable()),a(this,"meta",void 0),a(this,"getStatus",()=>this._status$.value),a(this,"getNodeId",()=>this.nodeId),this.parentTask=e,this.id=t||(0,r.Z)(),this.batchId=n}}},639088:function(e,t,n){"use strict";n.d(t,{As:function(){return h},GQ:function(){return v},Kb:function(){return g},WF:function(){return f},oW:function(){return y},pe:function(){return m},xK:function(){return _}});var r=n(633906),i=n(607278),o=n(93708),a=n(126628),s=n(708481),l=n(910157),c=n(967037),u=n(644367);let d=()=>{let{chatId:e,chatType:t,chatKey:n}=(0,o.GX)("chatViewCoreStore").currentChatViewConfig||{},r={activeSkillType:(0,o.GX)("chatGuidanceStore").activeSkillIdentifier},i=e?(0,o.GX)("chatInputStore").activeSkillTypeMap[e]:void 0;return{chatId:e,chatType:t,chatKey:n,guidance:r,skillType:i}},p=function(e){let{needsReport:t=!0,reportReturnedValue:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){for(var o=arguments.length,p=Array(o),v=0;v<o;v++)p[v]=arguments[v];return new Promise((o,v)=>{(async()=>{let f=t?(0,c.zQ)({eventName:"chat_input_event",meta:{event:e}}):null;try{let t=await (0,a.mk)();null==f||f.addDurationPoint("get_matchers_success");let c=d();null==f||f.updateMeta({matcher_params:c});let v=t.map(e=>{let t=e(c);if(t)return t}).filter(r.Z);null==f||f.addDurationPoint("find_matcher_success"),null==f||f.updateMeta({plugin_identifiers:v.map(e=>e?e.toString():"undefined").join(",")});let m=await Promise.all(v.map(e=>(0,s.as)(e))),h=m.filter(e=>!!e);null==f||f.addDurationPoint("get_plugins_success"),null==f||f.updateMeta({plugins_ready:m.map(e=>e?"1":"0").join(",")});let _=p[0];n&&(null==f||f.updateMeta({origin_returned_value:(0,l.B)(_)}));for(let t=0;t<h.length;t++){let r=h[t][e],o=(e,t)=>t,a=(0,i.Z)(r)?r:o;try{_=await a(c,_,...p.slice(1)),null==f||f.addDurationPoint(`run_plugin_${t}_success`),n&&(null==f||f.updateMeta({[`plugin_${t}_returned_value`]:(0,l.B)(_)}))}catch(t){u.k.persist.error({error:t,message:`input lifecycle [${e}] execute failed, reason:${t.message}`})}}n&&(null==f||f.updateMeta({returned_value:(0,l.B)(_)})),null==f||f.success(),o(_)}catch(e){null==f||f.error({reason:"run_event_failed",error:e instanceof Error?e:Error(String(e))}),v(e)}})()})}},v=p("onKeyDown",{needsReport:!1}),f=p("onMessageSendingEnd"),m=p("onMessageSendingBefore",{reportReturnedValue:!1}),h=p("onPaste"),_=p("onEmptySlash"),g=p("onBeforeBreakMessage"),y=p("onBeforeSendMessage")},564634:function(e,t,n){"use strict";n.d(t,{L:function(){return d}});var r=n(429996),i=n(107481),o=n(633126),a=n(17135),s=n(432626),l=n(51679),c=n(900789),u=n(698570);function d(e){var t,n;let{attachmentStates:d,trackParams:v,scene:f}=e,m=(0,s.g1)(),{data:h,enableUltraLongText:_}=(0,o.o)(),g=d.length>0,{data:y}=(0,u.Z)(async()=>{if(g){var e,t;return null!==(t=null===(e=(await l.mH.CheckUltraLongTextQuota()).data)||void 0===e?void 0:e.has_quota)&&void 0!==t&&t}},{refreshDeps:[g]}),b=Number((null==h?void 0:null===(t=h.ai_reader)||void 0===t?void 0:t.max_char_count)||1e5),S=Number((null==h?void 0:null===(n=h.ai_reader)||void 0===n?void 0:n.ult_max_char_count)||1e5);return(0,r.useMemo)(()=>{if(0===d.length)return{success:!0};if(d.some(e=>e.status===i.O.Retry))return{success:!1,tips:m("file_upload_failed")};if(d.some(e=>e.status===i.O.Uploading))return{success:!1,tips:m("file_uploading_cant_sent")};if(d.filter(p).some(e=>e.parseState===c.MZ.ParseState_Failed))return{success:!1,tips:m("multi_files_parse_failed")};if(d.filter(p).some(e=>{let{parseState:t=c.MZ.ParseState_Default}=e;return[c.MZ.ParseState_Default,c.MZ.ParseState_Processing].includes(t)}))return{success:!1,tips:m("skill_read_parsing")};let e=d.reduce((e,t)=>{var n;return e+(null!==(n=t.parsedCharCount)&&void 0!==n?n:0)},0),t=1===d.length,n=e>b,r=n?(b/e*100).toFixed(1):"100";return("attachmentArea"===f&&(0,a.trackEvent)("upload_parse",{all_token_length:e,single_file_token_length:d.map(e=>{let{parsedCharCount:t}=e;return t||0}).join(","),is_long_file:+!!n,file_cnt:d.length,success_cnt:d.length,...v}),t)?{success:!0,tips:n?m("single_file_exceed_limit",{postProcess:"sprintf",sprintf:["\u8C46\u5305",`${r}%`]}):void 0}:{success:!n,tips:n?m("multi_files_exceed_limit_alert",{postProcess:"sprintf",sprintf:["\u8C46\u5305",`${r}%`]}):void 0}},[d,m,b,_,y,S])}function p(e){return"file"===e.type||"directory"===e.type||e.isRepo}},693612:function(e,t,n){"use strict";n.d(t,{J:function(){return a}});var r=n(429996),i=n(529537),o=n(729813);let a=e=>{let t=(0,r.useCallback)((0,i.Z)(()=>{o.v.emit("chat.chatInput.init")}),[]);(0,r.useEffect)(()=>{e||setTimeout(t)},[e,t])}},544888:function(e,t,n){"use strict";n.d(t,{Fd:function(){return h.F},Hf:function(){return y},JM:function(){return _.J},Ll:function(){return u.L},MR:function(){return m.MR},OT:function(){return g.O},Pq:function(){return g.P},W2:function(){return f.W},ac:function(){return f.a},b6:function(){return l.b6},jw:function(){return p.j},ku:function(){return b},mZ:function(){return l.mZ},n:function(){return c.n},n1:function(){return l.n1},oQ:function(){return m.oQ},pO:function(){return c.pO},ri:function(){return m.ri},uy:function(){return d.u},vb:function(){return c.vb},x5:function(){return v.x},zP:function(){return l.zP}});var r=n(429996),i=n(291375),o=n(93708),a=n(468494),s=n(205379),l=n(877384),c=n(322828),u=n(564634),d=n(443682),p=n(160195),v=n(445620),f=n(894883),m=n(821192),h=n(305919),_=n(693612),g=n(268022);function y(e){let t=(0,o.sQ)("chatViewCoreStore",e=>{var t;return null===(t=e.currentChatViewConfig)||void 0===t?void 0:t.chatId}),n=(0,r.useRef)("");(0,r.useEffect)(()=>{var r;if(!t)return;let{localConversationMap:o,conversationMap:l}=a.useFeedStore.getState(),c=o[n.current||""]||l[n.current||""];if((0,s.zU)(n.current)&&(null==c?void 0:null===(r=c.local)||void 0===r?void 0:r.createStatus)===i.ns.Done){n.current=t;return}e(n.current||"",t),n.current=t},[t])}function b(e){let t=(0,o.sQ)("chatViewCoreStore",e=>{var t;return null===(t=e.currentChatViewConfig)||void 0===t?void 0:t.chatId}),n=(0,l.n1)(t||""),i=(0,r.useRef)(void 0);(0,r.useEffect)(()=>{t&&(i.current||n)&&(i.current!==n&&e(i.current,n),i.current=n)},[n])}},443682:function(e,t,n){"use strict";n.d(t,{u:function(){return o}});var r=n(429996),i=n(432626);let o=e=>{let{showUltraLongText:t}=e,n=(0,i.g1)();return(0,r.useMemo)(()=>{if(t)return n("skill_copliotreading_btn_2M")},[t])}},894883:function(e,t,n){"use strict";n.d(t,{W:function(){return c},a:function(){return s}});var r=n(429996),i=n(210230),o=n(190412),a=n(605743);let s=480,l=!1,c=()=>{var e;let t=(0,a.PG)(),n=(0,r.useRef)(null),c=null===(e=(0,o.Z)(n))||void 0===e?void 0:e.width,u=t||((0,i.Z)(c)||0===c?l:c<s);return l=u,{isToolButtonSmall:u,inputWidthDivRef:n}}},268022:function(e,t,n){"use strict";n.d(t,{O:function(){return o},P:function(){return i}});var r=n(17135);let i=Object.freeze({Keyboard:"keyboard",Click:"click"}),o=function(){let{exitScene:e,trackParams:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.trackEvent)("skill_module_close",{exit_scene:e,...t}),(0,r.trackEvent)("exit_skill",{exit_scene:e,...t})}},445620:function(e,t,n){"use strict";n.d(t,{x:function(){return g}});var r=n(444614),i=n(67864),o=n(477710),a=n(156217),s=n(530836),l=n(744947),c=n(93708),u=n(234761),d=n(468494),p=n(886421),v=n(46499),f=n(17135),m=n(636674);let h=async e=>e?e.startsWith("local_")?new Promise(t=>{let n=!0,r=!1,o=()=>{n&&(s(),n=!1,r||clearTimeout(l))},a=e=>{o(),t(e)},s=(0,c.Wp)("chatViewCoreStore").subscribe(t=>{let{currentChatViewConfig:n}=t;if(!n)return;let{chatType:r,chatId:o,chatKey:s}=n;r===i.z.Conversation&&(s&&s===e?a(o):a(null))}),l=window.setTimeout(()=>{r=!0,a(null)},6e4)}):e:null,_=async e=>{let t=await h(e);return!!t&&new Promise(e=>{let n=!0,i=!1,o=()=>{n&&(c(),n=!1,i||clearTimeout(u))},a=t=>{o(),e(t)},c=s.useMessageStore.subscribe(e=>{var n,i;let o=(0,l.Sv)(e,t);!(0,r.Z)(null==o?void 0:o.verbose)&&a(Number(null==o?void 0:null===(i=o.verbose)||void 0===i?void 0:null===(n=i.agent_to_skill)||void 0===n?void 0:n.skill_type)===m.SkillType.ReadPDF)}),u=window.setTimeout(()=>{i=!0,a(!1)},6e4)})},g=function(){let{chatViewConfig:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.GL)("chatViewService"),n=t=>{let{chatId:n}=null!=e?e:{},r=(0,u.jo)(d.useFeedStore.getState(),n);(0,f.trackEvent)("copilot_button_click",{bot_id:(0,p.SR)(n),conversation_type:null==r?void 0:r.conversation_type,conversation_id:n,collection_id:null==t?void 0:t.collectionId,message_id:null==t?void 0:t.messageId,entrance_type:null==t?void 0:t.entranceType})};return{onAfterOpenFile:n,openFileByKey:(r,i,a,s,l)=>{let{pdf:c={},messageId:u,openFrom:d,delayToIntension:p=!1}=a||{},v=async()=>{let{anchorPage:i,highlightArea:a,assetList:v,realFileKey:f,fileName:m}=c;(!p||await _(null==e?void 0:e.chatId))&&(t.openCanvasPanel({conversationId:(null==e?void 0:e.chatId)||"",messageId:u||"",readContent:{pdfId:r,realFileKey:null!=f?f:r,pdfName:m,assetList:v,pdfAnchorConfig:{page:i,areas:a},teaCtx:s,openFrom:d},canvasLayoutState:o.P.CANVAS_ONLY},l),n(s))};if("PDF"===i)return v(),!1},openFileByLink:(r,i,a,s)=>{let{attchmentType:l,pdf:c={},messageId:u,openFrom:d,delayToIntension:p=!1}=i||{},f=async()=>{let{anchorPage:i,highlightArea:l,assetList:f,realFileKey:m}=c;(!p||await _(null==e?void 0:e.chatId))&&(r=(0,v.P)(r),t.openCanvasPanel({conversationId:(null==e?void 0:e.chatId)||"",messageId:u||"",readContent:{pdfUrl:r,pdfName:r,realFileKey:null!=m?m:r,assetList:f,pdfAnchorConfig:{page:i,areas:l},teaCtx:a,openFrom:d},canvasLayoutState:o.P.CANVAS_ONLY},s),n(a))};if("pdf"===l)return f(),!1}}}},160195:function(e,t,n){"use strict";n.d(t,{j:function(){return u}});var r=n(93708),i=n(276971),o=n(995129),a=n(316820),s=n(999132),l=n(126473),c=n(445620);let u=e=>{let{attachmentStates:t,openFrom:n}=e,u="sm"===(0,i.y)({sm:800,md:1200}),d=(0,r.sQ)("chatViewCoreStore",e=>e.currentChatViewConfig),{openFileByKey:p,openFileByLink:v}=(0,c.x)({chatViewConfig:d});return{openReadCanvas:(0,s.Z)(async e=>{if(u)return;let r=t[0];if(!r)return;let i=(null==e?void 0:e.skillType)?{skillType:e.skillType}:{};if(["file","remote"].includes(r.type)){let{fileKey:t}=r,a=(0,l.JB)((0,l.lm)(r.fileName));if("Document"===a){let e=await (0,o.s)(t);e&&(t=e,a="PDF")}"PDF"===a&&p(t,a,{pdf:{fileName:r.fileName,realFileKey:r.fileKey},openFrom:(null==e?void 0:e.openFrom)||n,delayToIntension:!0},i)}else"link"===r.type&&r.url&&await (0,a.J)(r.url)&&v(r.url,{attchmentType:"pdf",openFrom:(null==e?void 0:e.openFrom)||n,delayToIntension:!0},i)})}}},308617:function(e,t,n){"use strict";n.r(t),n.d(t,{useOnEnterOrExitSkill:function(){return r.ku},ChatFooterDisclaimer:function(){return R},checkIsSkillBarVisible:function(){return Z.Un},ScrollTabs:function(){return i.P},TOOL_BUTTON_SMALL_BREAK_POINT:function(){return r.ac},defaultChatInputFacade:function(){return S},defaultChatInputController:function(){return b.s},TabPane:function(){return i.J},chatInputServiceContainer:function(){return tv.chatInputServiceContainer},makeFileMessagePayload:function(){return y.Z8},makeImageMessagePayload:function(){return y.xz},ChatInputUI:function(){return tt.g},WaterfallImageList:function(){return g},makeNestedMessagePayload:function(){return y.m0},InputBottomGuidanceCenterSkillBarShowAllSkillsPlaceholder:function(){return e8},makeCompositeMessagePayloadWithImages:function(){return y.A_},LazyChatInputContentFallback:function(){return tu.Y},useChatSkillBarData:function(){return ey},LazyChatInputRefContent:function(){return te.Mr},useInputTrackParams:function(){return y.mp},useIsToolButtonSmall:function(){return r.W2},useOnSwitchConversation:function(){return r.Hf},useSelectSkill:function(){return eM.f},InputBottomGuidanceCenterSkillBarUI:function(){return e5},ChatFooterUI:function(){return E.w},ChatInput:function(){return y.xg},AttachmentBox:function(){return tg.Q},DisabledInputTipsGlueComposer:function(){return x.Mw},SkillBarActionButton:function(){return eN.Gm},AbstractUploadFileTask:function(){return tm.Q},ChatInputService:function(){return tv.ChatInputService},trackExitSkill:function(){return r.OT},useDisplaySkills:function(){return r.b6},useSelectSkillSwitchReport:function(){return Z.JL},useSkillsTrackParams:function(){return Z.yJ},useActiveSkillType:function(){return r.n1},ScreenshotButtonUI:function(){return N.J},useEnableCodeSkillRelate:function(){return r.n},useGuestInteract:function(){return r.ri},useTrackOnBeforeSubmit:function(){return y.U1},useUploadConfig:function(){return t_.j},LazyAttachmentImageArea:function(){return ty.N6},ChatSkillBar:function(){return eB},makeCompositeMessagePayloadWithFiles:function(){return y.me},makeRemoteFileMessagePayload:function(){return y.Tt},getDisplaySkills:function(){return r.mZ},getTeaRecommendNameByTag:function(){return W.M},ChatFooter:function(){return C},ChatInputRefLabel:function(){return tc},useBotSendFileEnabled:function(){return r.pO},useSendMessageButtonText:function(){return r.uy},useOpenReadCanvas:function(){return r.jw},useSendAttachmentsStatus:function(){return r.Ll},ChatSkillBarGlueComposer:function(){return eU},useChatGuestLogin:function(){return r.oQ},useOpenPdfImmersive:function(){return r.x5},useDisabledInputTipsData:function(){return x.DT},SkillsShowPosition:function(){return Z.GI},ImageItem:function(){return f},useGuestInputInteract:function(){return r.MR},AbstractUploadDirectoryTask:function(){return tf.M},useSkillsReport:function(){return Z.s},useChatSkillPopover:function(){return eM.c},SkillActionBtn:function(){return eN._E},useSkillBarShowReport:function(){return Z.WO},InputBottomGuidanceCenterSkillBar:function(){return e9},InputBottomGuidanceCenterSkillBarShowAllSkillsPreview:function(){return e7},makePayloadAttachment:function(){return y.$c},useEmitInputInit:function(){return r.JM},tryPopPreGeneratedId:function(){return y.eg},useBotSendImageEnabled:function(){return r.vb},ExitSkillScene:function(){return r.Pq},DirectoryService:function(){return th.Q},createChatInputService:function(){return tv.createChatInputService},makeTextMessagePayload:function(){return y.tz},useNewChatInputAb:function(){return r.Fd},useInputReportParams:function(){return y.i_},DisabledInputTips:function(){return x.K1},LazyAttachmentArea:function(){return ty.og},hasValidHttpsUrl:function(){return td.W},LazyAttachmentFileArea:function(){return ty.dr},ChatInputEventBus:function(){return tp.a},useInputPluginProps:function(){return y.qK},extractFileExt:function(){return te.ys},ChatSkillBarUI:function(){return eW},tryMergeTexts:function(){return te.XR},SkillIcon:function(){return eI.y},SkillBarBtnClassName:function(){return Z.Qy},extractFileName:function(){return te.yB},useAISpaceAttachment:function(){return eZ.O},SkillActionBtnWithPlugin:function(){return eN.$t},useActiveSkill:function(){return r.zP},tryMergeFileDisplayNames:function(){return te.mh},DefaultChatInputService:function(){return k.d}});var r=n(544888),i=n(993396),o=n(529496),a=n(429996),s=n(432626),l=n(275209),c=n(199689),u=n(339512),d=n(627394),p=(0,u.G)((0,d.jsx)(e=>(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18",...e,children:(0,d.jsx)("path",{fill:"#000",d:"m15.28 16.958-6.95-7.01Q8 9.618 8 9.15q0-.475.33-.82.322-.33.805-.33t.806.33l6.958 7.009q.322.336.322.806 0 .476-.322.813-.33.33-.813.33-.476 0-.806-.33m.469-.718q.139.14.293.168.161.03.286-.088.139-.139.102-.293a.55.55 0 0 0-.161-.285l-3.574-3.575-.498.506zM11.252 8.25q.135 0 .239-.093a.4.4 0 0 0 .125-.235q.096-.55.196-.925.1-.371.246-.607.143-.236.375-.378t.593-.228q.357-.086.889-.165a.4.4 0 0 0 .242-.124.36.36 0 0 0 .093-.247.35.35 0 0 0-.096-.246.38.38 0 0 0-.243-.125 9 9 0 0 1-.896-.143 2 2 0 0 1-.6-.225 1.16 1.16 0 0 1-.381-.385q-.15-.243-.243-.618-.093-.378-.175-.928a.38.38 0 0 0-.121-.235.35.35 0 0 0-.243-.093.34.34 0 0 0-.24.093.4.4 0 0 0-.128.235q-.096.55-.193.925-.099.371-.246.607a1.15 1.15 0 0 1-.378.378 2 2 0 0 1-.59.228q-.36.086-.888.161-.15.026-.243.128a.35.35 0 0 0-.096.243.366.366 0 0 0 .343.371q.529.06.892.147.364.082.603.225.236.142.382.385t.24.618q.092.378.174.928a.38.38 0 0 0 .125.235.34.34 0 0 0 .243.093M4.499 10.5a.26.26 0 0 1-.18-.07.3.3 0 0 1-.093-.176 8 8 0 0 0-.148-.694 1.7 1.7 0 0 0-.184-.455.84.84 0 0 0-.281-.283 1.5 1.5 0 0 0-.445-.172 8 8 0 0 0-.666-.123.3.3 0 0 1-.182-.094.27.27 0 0 1-.07-.184q0-.107.072-.185a.28.28 0 0 1 .182-.094q.399-.045.672-.107a1.5 1.5 0 0 0 .45-.168.9.9 0 0 0 .286-.29q.113-.18.182-.463.07-.283.132-.696a.28.28 0 0 1 .09-.176A.26.26 0 0 1 4.5 6q.105 0 .179.07a.3.3 0 0 1 .096.176q.073.412.145.694.074.278.185.455a.9.9 0 0 0 .283.283q.175.108.442.172.27.065.667.12a.3.3 0 0 1 .182.097.26.26 0 0 1 .072.182.275.275 0 0 1-.257.278q-.396.045-.67.11a1.6 1.6 0 0 0-.452.168.84.84 0 0 0-.286.29 1.7 1.7 0 0 0-.18.463 8 8 0 0 0-.13.696.3.3 0 0 1-.094.176.26.26 0 0 1-.182.07M6.75 14.208a.18.18 0 0 1-.12-.046.2.2 0 0 1-.063-.116 5 5 0 0 0-.098-.456 1.1 1.1 0 0 0-.123-.299.56.56 0 0 0-.188-.187 1 1 0 0 0-.296-.112 5 5 0 0 0-.444-.081.2.2 0 0 1-.122-.062.18.18 0 0 1-.046-.121.17.17 0 0 1 .048-.121.2.2 0 0 1 .122-.062q.265-.03.447-.07.183-.04.3-.111a.6.6 0 0 0 .191-.19q.074-.12.122-.305.046-.187.087-.457a.2.2 0 0 1 .06-.116.18.18 0 0 1 .122-.046.17.17 0 0 1 .12.046.2.2 0 0 1 .064.116q.048.27.096.456.051.183.123.299.074.116.19.186.115.07.294.113.18.042.444.079.075.013.122.063a.18.18 0 0 1 0 .245.2.2 0 0 1-.123.058q-.264.03-.446.072a1 1 0 0 0-.302.11.56.56 0 0 0-.191.19q-.074.12-.12.305-.046.187-.087.458a.19.19 0 0 1-.184.162"})}),{})),v={"image-item":"image-item-N_578K","image-item-img":"image-item-img-ekjQUE","image-item-cover":"image-item-cover-BJzvmL","image-item-cover-btn":"image-item-cover-btn-zKaYBz","tpl-title":"tpl-title-zltZjH"};let f=e=>{let{src:t,style:n={},onUseTemplate:r,hoverContent:i,item:u,trackEventForClick:f,trackEventForShow:m}=e,h=(0,s.g1)(),_=(0,a.useRef)(null),g=(0,a.useRef)(null),[y]=(0,l.Z)(_,{threshold:.5});return(0,a.useEffect)(()=>{y&&(null==m||m(u))},[y]),(0,d.jsxs)("div",{className:v["image-item"],style:{...n,"--text-line":Math.floor((Number(n.height)-66)/24)},ref:_,children:[(0,d.jsxs)("div",{className:v["image-item-img"],style:{width:n.width,height:n.width},children:[(0,d.jsx)("img",{ref:g,src:(0,o.C)(t,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$N-%lJNamw1$2xNNWFtRkhSakJNTW5od1dXa3hhb%ZI%mpCT$-yeDFZM*hXT%$3elRubFpl$*xwW$ZodmR*a3lPWFJq%npsM$ds-zFNR041T1hwaE1teHpZa014-W1SW$RqQmlNakIw$1RKb2FH%kRNWEJp-mtJeFpFTT$hb%l5T$hka%1q$nNZbT$TZWt3elpHa*tSM$o1$20xR2MySkRNWEJp$jBad$dsaE5kb%ZZ$W14a$$6bHdZbTFT-kdWRE5%QmpNMmhvWTIxa01XTjNQ$DA9"}),style:{width:"100%",height:"100%"}}),i&&r?(0,d.jsxs)("div",{className:v["image-item-cover"],children:[i,(0,d.jsx)(c.Z,{className:v["image-item-cover-btn"],icon:(0,d.jsx)(p,{}),onClick:e=>{null==r||r(),e.stopPropagation(),null==f||f(u)},children:h("make_the_template_style")})]}):null]}),(0,d.jsx)("h3",{className:v["tpl-title"],children:null==u?void 0:u.title})]})};var m=n(963729),h=n(350685),_=n(743567);let g=e=>{let{listData:t,onUseTemplate:n,hoverRender:r,trackEventForShow:i,trackEventForClick:s}=e,l=(0,a.useRef)(null),c=(0,a.useRef)([]),{width:u=0}=(0,h.y)({ref:l}),p=(0,a.useMemo)(()=>{switch(!0){case u>=600:return 4;case u<600&&u>=400:return 3;default:return 2}},[u]),v=(0,a.useMemo)(()=>(u-16*(p-1))/p,[p,u]),g=(0,a.useMemo)(()=>{let e=[],n=[];for(let r=0;r<t.length;r++){let i=Math.floor(r/p),o=r%p+1,a=0,s=0x2540be3ff;if(0===i)n[r]=r;else{for(let e=0;e<n.length;e++)c.current[n[e]].top+c.current[n[e]].height<s&&(a=e,s=c.current[n[e]].top+c.current[n[e]].height);n[a]=r}void 0===c.current[r]&&(c.current[r]={}),0===i?(1===o?c.current[r].left=0:c.current[r].left=c.current[r-1].left+v+16,c.current[r].top=0):(c.current[r].left=c.current[a].left,c.current[r].top=s+2),c.current[r].height=v/Number(t[r].width)*Number(t[r].height)+42,e[r]={transform:`translate(${(0,_.d)()?"-":""}${c.current[r].left}px,${c.current[r].top}px)`,width:`${v}px`,height:c.current[r].height}}return[...e]},[v,p,t]),y=(0,a.useMemo)(()=>{let e=(0,m.Z)(c.current,e=>e.top);return e?e.height+e.top+10:10},[v,p,t]);return(0,d.jsx)("div",{ref:l,children:(0,d.jsx)("div",{className:"scroll-image-BZNSoC",style:{height:y},children:t.map((e,t)=>(0,d.jsx)("div",{children:(0,d.jsx)(f,{onUseTemplate:()=>null==n?void 0:n(t),item:e,src:(0,o.C)(e.cover,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$N-%lJNamw1$2xNNWFtRkhSakJNTW5od1dXa3hhb%ZI%mpCT$-yeDFZM*hXT%$3elRubFpl$*xwW$ZodmR*a3lPWFJq%npsM$ds-zFNR041T1hwaE1teHpZa014-W1SW$RqQmlNakIw$1RKb2FH%kRNWEJp-mtJeFpFTT$hb%l5T$hka%1q$nNZbT$TZWt3elpHa*tSM$o1$20xR2MySkRNWEJp$jBad$dsaE5kb%pI-khwa1F6bHdZbTFT-kdWRE5%QmpNMmhvWTIxa01XTjNQ$DA9"}),style:g[t],unitWidth:v,index:t,hoverContent:null==r?void 0:r(t),trackEventForShow:i,trackEventForClick:s})},t))})})};var y=n(931832),b=n(304043);let S={focus:()=>{b.s.focusOnInput()}};var k=n(788988),w=n(878242),T=n(920541),E=n(610585);let R=e=>{let{customText:t}=e;return(0,s.g1)(),(0,d.jsx)("div",{className:"h-12"})},C=e=>(0,d.jsx)(w.o,{renderFallback:()=>(0,d.jsx)(I,{}),...e}),I=()=>{let e=(0,s.g1)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(E.w,{children:(0,d.jsx)(T.o,{placeholder:e("default_input_placeholder")})}),(0,d.jsx)("div",{className:"h-12"})]})};var x=n(839157),N=n(56428),M=n(444614),P=n(572231),A=n(15348),$=n(689337),j=n(17135),O=n(647),F=n(448263),L=n(448042),D=n(640078),W=n(22714),Z=n(549261),U=n(344482),B=n(474227),z=n(986091),V=n(67864),H=n(529537);let G=(0,H.Z)(()=>{"object"==typeof window&&(window.skillListConsumeStart=window.performance.now()),P.Z.getState().addDurationPoint("skill_list_consume_start")});var K=n(156217),X=n(93708),q=n(308691),J=n(107599),Q=n(276971),Y=n(210230),ee=n(406421),et=n(422931),en=n(51679),er=n(698570),ei=n(967037),eo=n(919636);let ea=(0,eo.n)(()=>en.mH.GetRecommendSkills({omit_sidebar:!0,omit_image:!0,omit_music:!0,omit_write:!0,omit_search:!0})),es=function(){var e,t,n,r,i,o;let{ready:a=!0,chatId:s,language:l,getSupportedSkillTypes:c,customFilterSupportSkill:u,reportParams:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:p,loading:v}=(0,er.Z)(async()=>{var e,t;let n=(0,ei.zQ)({eventName:"load_samantha_skill",meta:{...d}}),r=await ea().catch(e=>{throw n.error({reason:"get_recommend_skill_fail",error:e}),e});return n.addDurationPoint("success"),n.success({meta:{is_empty:(null==r?void 0:null===(t=r.data)||void 0===t?void 0:null===(e=t.groups)||void 0===e?void 0:e.length)?"0":"1"}}),r},{ready:a,refreshDeps:[s,l],cacheKey:"load_samantha_skill",retryCount:3,retryInterval:200}),f=e=>{if(!e||(0,Y.Z)(null==e?void 0:e.skill_type))return!1;let t=null==c?void 0:c(),n=!t||!!t.has(e.skill_type);return u?u(e)&&n:n};return{data:{allSkills:(0,ee.Z)((0,et.Z)(null==p?void 0:null===(t=p.data)||void 0===t?void 0:null===(e=t.groups)||void 0===e?void 0:e.map(e=>{var t,n;return null!==(n=null===(t=e.skills)||void 0===t?void 0:t.filter(e=>!!(null==e?void 0:e.skill_id)))&&void 0!==n?n:[]})),"skill_id").filter(f),latestSkills:((null==p?void 0:null===(n=p.data)||void 0===n?void 0:n.latest_skills)||[]).filter(f),input_config:null==p?void 0:null===(r=p.data)||void 0===r?void 0:r.input_config,sidebar_skills:null==p?void 0:null===(i=p.data)||void 0===i?void 0:i.sidebar_skills,onboarding_skills:null==p?void 0:null===(o=p.data)||void 0===o?void 0:o.onboarding_skills},loading:!p&&v}};var el=n(814986),ec=n(311466);let eu=(0,eo.n)(()=>en.mH.GetSkillList()),ed=function(){var e,t,n,r,i;let{ready:o=!0,chatId:s,language:l,getSupportedSkillTypes:c,customFilterSupportSkill:u,getSkillListPrefetch:d,reportParams:p,rootLayoutDisplaySkills:v,logRequest:f}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{logRequest:el.Z};"undefined"!=typeof window&&f();let m=(0,a.useMemo)(()=>null==d?void 0:d().syncValue,[]),{data:h,loading:_}=(0,er.Z)(async()=>{var e,t;let n=(0,ei.zQ)({eventName:"load_skill_list",meta:{...p}}),r=null;if(d){let{promise:e,clear:t,syncValue:i}=d();r=null!=i?i:await e.catch(e=>{throw n.error({reason:"get_skill_list_prefetch_fail",error:e}),e}),n.updateMeta({prefetch:"1",cached:m?"1":"2"}),t()}return r||(r=await eu().catch(e=>{throw n.error({reason:"get_skill_list_fail",error:e}),e})),n.addDurationPoint("success"),n.success({meta:{is_empty:(null==r?void 0:null===(t=r.data)||void 0===t?void 0:null===(e=t.skills)||void 0===e?void 0:e.length)?"0":"1"}}),r},{ready:o,refreshDeps:[s,l],cacheKey:"load_skill_list",retryCount:3,retryInterval:200}),g=null!==(i=null!=v?v:m)&&void 0!==i?i:h,y=e=>{if(!e||(0,Y.Z)(e.skill_type))return!1;let t=null==c?void 0:c(),n=!t||!!t.has(e.skill_type);return u?u(e.skill_type)&&n:n},b=null==g?void 0:null===(t=g.data)||void 0===t?void 0:null===(e=t.input_skill)||void 0===e?void 0:e.filter(y),S=null==g?void 0:null===(r=g.data)||void 0===r?void 0:null===(n=r.recommend_skill)||void 0===n?void 0:n.filter(e=>!!(null==b?void 0:b.find(t=>t.skill_type===e.skill_type)));return{data:(0,ec.N)(()=>{var e,t,n,r,i,o;return{skills:null==g?void 0:null===(e=g.data)||void 0===e?void 0:e.skills,inputSkills:b,recommendSkills:S,sidebarSkills:null==g?void 0:null===(n=g.data)||void 0===n?void 0:null===(t=n.sidebar_skill)||void 0===t?void 0:t.filter(y),onboardingSkills:null==g?void 0:null===(i=g.data)||void 0===i?void 0:null===(r=i.onboarding_skill)||void 0===r?void 0:r.filter(y),hideSkillBarInLandingPage:null==g?void 0:null===(o=g.data)||void 0===o?void 0:o.hide_in_lp}},[null==g?void 0:g.data,b,S]),loading:!g&&_}};var ep=n(31505),ev=n(393648),ef=n(350538),em=n(960806),eh=n(305919),e_=n(877384);let eg=()=>(0,X.sQ)("chatInputStore",e=>{var t,n;return null!==(n=null===(t=e.recommendSkills)||void 0===t?void 0:t.map(t=>{if(t.skill_type)return{...t,...e.skillMap[t.skill_type]}}).filter(Boolean))&&void 0!==n?n:[]},B.Z),ey=e=>{var t;let{chatId:n,chatType:r,customFilterSupportSkill:i,rootLayoutDisplaySkills:o}=e,s=(0,Q.y)(),l=(0,J.jw)(n,r),c=(0,q.Es)(),u=!c&&r===V.z.NewThread,d=(0,X.sQ)("chatInputStore",e=>e.activeSkillTypeMap[n],U.X),p=(0,K.GL)("chatConfigService"),v=(0,ep.l)(),f=(0,X.sQ)("chatInputStore",e=>e.skills,B.Z),{data:m,loading:h}=es({chatId:n,language:v,customFilterSupportSkill:i,reportParams:{from:"chat_input"}}),_=(0,z.Z)(f)?m:f;(0,a.useEffect)(()=>{h||(0,z.Z)(m)||((0,X.GX)("chatInputStore").updateSkills(m),(0,A.D)("chatGuidanceService").then(e=>{null==e||e.processSamanthaSkills(m)}))},[m,h]);let g=(0,X.sQ)("chatInputStore",e=>e.inputSkills,B.Z),{data:{inputSkills:y,skills:b,recommendSkills:S,hideSkillBarInLandingPage:k},loading:w}=ed({logRequest:G,chatId:n,language:v,customFilterSupportSkill:i?e=>i({skill_id:e.toString(),skill_type:e}):void 0,getSkillListPrefetch:null==p?void 0:p.getSkillListPrefetch,reportParams:{from:"chat_input"},rootLayoutDisplaySkills:o}),T=(0,em.v)(y),E=(0,z.Z)(g)?T:g,R=(0,em.v)(b),C=(0,em.v)(S),I=()=>{w||!T||!R||(0,z.Z)(T)||(0,z.Z)(R)||((0,X.GX)("chatInputStore").updateInputSkills(T),(0,X.GX)("chatInputStore").updateSkillMap(Object.fromEntries(R.map(e=>[e.skill_type,e]))),(0,X.Wp)("chatInputStore").setState({recommendSkills:C}),(0,X.Wp)("chatGuidanceStore").setState({hideSkillBarInLandingPage:k}))};(0,a.useEffect)(()=>{I()},[T,R,C,w]);let x=!!((0,z.Z)(_)||!E||(0,z.Z)(E))&&(h||w),{isNewChatInputInChat:N}=(0,eh.F)({chatId:n,chatType:r}),M=(0,a.useMemo)(()=>!d&&!x&&!c&&!!l&&(!N||!!u),[d,x,c,N,l,u]),P=(0,e_.b6)(),$=(0,em.v)(l?P:[]),j=(0,ev.nu)()||(0,ef.dM)(),O=eg(),{enableSkillPin:F=!0}=null!==(t=null==p?void 0:p.featureGating)&&void 0!==t?t:{};return{hasActiveSkill:!!d,activeSkillType:d,visible:M,displaySkills:$,recommendSkills:j?O:[],loading:x,isNarrowMode:"sm"===s,enableSkillPin:F}};var eb=n(669160),eS=n.n(eb),ek=n(145625),ew=n(190412),eT=n(162957),eE=n(993047),eR=n(514447),eC=n(428884),eI=n(736026),ex=n(689768),eN=n(527301),eM=n(920485),eP=n(120012),eA=n(966015),e$=(0,u.G)((0,d.jsx)(e=>(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,d.jsx)("path",{fill:"currentColor",d:"M12 23C5.925 23 1 18.075 1 12S5.925 1 12 1s11 4.925 11 11-4.925 11-11 11M8 11a1 1 0 1 0 0 2h8a1 1 0 1 0 0-2z"})}),{})),ej={"recommend-action-button":"recommend-action-button-RwZ6Fo","recommend-close":"recommend-close-mRqG5K","recommend-tag":"recommend-tag-XB4yIa"};let eO=e=>{let{skill:t,recommendTag:n,onClickRecommendClose:r}=e,i=!!n,o=(0,s.g1)(),a=n===eP.ZQ.New?o("input_skillbar_promote_tag_new"):n===eP.ZQ.Recommend?o("input_skillbar_promote_tag_recommend"):n===eP.ZQ.Upgrade?o("image_entry_tag_upgrade"):"";if(t&&n)return{isRecommend:i,recommendTag:n,itemClassName:i?ej["recommend-action-button"]:void 0,customNode:i?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:ej["recommend-tag"],children:a}),(0,d.jsx)(eA.s,{content:o("input_skillbar_promote_remove_tooltip"),children:(0,d.jsx)("button",{className:ej["recommend-close"],onClick:e=>{null==r||r(t),e.stopPropagation()},onMouseUp:e=>e.stopPropagation(),children:(0,d.jsx)(e$,{})})})]}):void 0}};var eF=n(821192),eL={"chat-footer-action-wrapper":"chat-footer-action-wrapper-gCANNt",invisible:"invisible-uflCT1",divider:"divider-p_PxNu"};let eD=(0,eT.y)((0,a.lazy)(()=>(0,eE.AD)({fn:()=>Promise.all([n.e("6973"),n.e("43850"),n.e("13221")]).then(n.bind(n,886448)).then(e=>({default:e.SkillPinModal}))}))),eW=(0,a.forwardRef)(function(e,t){var n;let{displaySkills:r,recommendSkills:i,visible:o,trackParams:l,isNarrowMode:c=!1,before:u,bottomSlot:p,enableSkillPin:v,onMoreButtonMouseUp:f,onMoreButtonShow:m,onClickSkillPin:h,onSkillPinShow:_,onSkillShow:g,onClickRecommendClose:y}=e,b=(0,s.g1)(),S=(0,a.useRef)(null),k=(0,ew.Z)(S),{onClickGuestDisabled:w}=(0,eF.ri)({source:"unlog_click_skills",checkNewGuidanceAb:!0}),{selectSkill:T,reportSelectSkill:E}=(0,eM.f)({trackParams:l}),{setMoreVis:R,popoverProps:C}=(0,eM.c)({width:null==k?void 0:k.width,scene:"skills_menu",bottomSlot:p,trackParams:l,reportSelectSkill:E,selectSkill:T}),[I,x]=(0,a.useState)(!1),[N,M]=(0,a.useState)(!1),P=()=>{M(!0),x(!1),null==h||h()},A=eO({skill:null==i?void 0:i[0],recommendTag:null==i?void 0:null===(n=i[0])||void 0===n?void 0:n.tag,onClickRecommendClose:y}),$=(e,t,n,r)=>{var i;let o={skillType:e.skill_type,skillFrom:ek.u.ClickSkill,recommendTag:null==r?void 0:r.recommendTag,showPosition:"default",position:t,sticky:null==e?void 0:e.sticky};return(0,d.jsx)(eN.$t,{itemClassName:null==r?void 0:r.itemClassName,index:t,skill:e,isNarrowMode:c,onMouseUp:()=>{T(o)},onPluginMouseUp:e=>{let{onClick:t,keepMorePopover:n}=e;E(o),null==t||t(),n||x(!1)},customNode:null==r?void 0:r.customNode,hasTestId:!0},null!==(i=e.skill_type)&&void 0!==i?i:t)};return(0,a.useEffect)(()=>{R(!1)},[o,null==k?void 0:k.width]),(0,Z.WO)({visible:o,displaySkills:r}),(0,d.jsxs)("div",{ref:e=>{S.current=e,"function"==typeof t?t(e):t&&(t.current=e)},className:eS()(eL["chat-footer-action-wrapper"],{[eL.invisible]:!o}),"data-testid":"chat_footer_skill_bar",children:[(0,d.jsx)(eR.r,{...C,children:(0,d.jsxs)("div",{className:"flex-1 min-w-0 pt-10 pl-8 outline-none flex",children:[null==u?void 0:u(),(null==i?void 0:i.length)?(0,d.jsxs)(d.Fragment,{children:[$(i[0],-1,i,A),(0,d.jsx)("div",{className:eL.divider})]}):null,(0,d.jsx)(eC.D,{items:r,minVisibleItems:1,overflowRenderer:e=>{if(!(null==k?void 0:k.width)||0===e.length)return;null==m||m(e);let t=(0,d.jsx)(eN.Gm,{className:"pr-8",text:b("skills_more_button_title"),icon:(0,d.jsx)(eI.y,{}),onMouseUp:async()=>{await w()&&(v?x(!0):R(!0),null==f||f())},testId:"skill_bar_button_more"}),n=r.length-e.length;return(0,d.jsx)("div",{className:"flex-shrink-0",children:v?(0,d.jsx)(eR.r,{trigger:"custom",visible:I,position:"topLeft",className:"!rounded-s-radius-xs p-4 min-w-180",content:(0,d.jsx)(ex.s,{className:"max-h-290 flow-scrollbar overflow-auto",items:e,isNarrowMode:c,onSelectSkill:(e,t,r,i,o)=>{let a={skillType:e,skillFrom:t,showPosition:"more",position:(0,Y.Z)(i)?void 0:i+n,sticky:o};(null==r?void 0:r.onlyReportEvent)?E(a):T(a),(null==r?void 0:r.keepMorePopover)||x(!1)},onSkillPinShow:_,onClickSkillPin:P,onSkillShow:g}),onClickOutSide:()=>x(!1),children:t}):t})},visibleItemRenderer:(e,t)=>$(e,t),collapseFrom:"end"})]})}),o&&(0,d.jsx)(eD,{visible:N,footerWidth:null==k?void 0:k.width,onCancel:()=>M(!1),onOk:()=>M(!1),reportParams:{show_from:null==l?void 0:l.show_scene}})]})});var eZ=n(917057);let eU=(e,t)=>n=>{let r=t(n),{displaySkills:i,recommendSkills:o,visible:s}=r,{chatId:c,trackParams:u}=n,p=(0,Z.yJ)({chatId:c}),v={show_scene:"bottom_bar",...u,...p},{reportMoreSkillClick:f,reportMoreSkillsShow:m,reportSkillPinClick:h,reportSkillPinShow:_,reportSkillShow:g}=(0,Z.s)(v),y=(0,O.Z)(),b=(0,a.useRef)(null),[S]=(0,l.Z)(b),k=(0,a.useRef)(),w=(0,a.useRef)(),T=(0,a.useRef)(Promise.resolve()),E=(0,F.Z)(s);s!==E&&(T.current=Promise.race([new Promise(e=>w.current=e),new Promise(e=>setTimeout(e,3e3))]));let R=(0,a.useRef)(!1);(0,L.Z)(()=>{if(!((0,M.Z)(null==v?void 0:v.bot_id)||(0,M.Z)(null==v?void 0:v.conversation_type))&&i.length&&s&&S){if(!R.current)(async()=>{var e;if(R.current=!0,await T.current,y.current){R.current=!1;return}let t=null!==(e=k.current)&&void 0!==e?e:[];i.forEach(e=>{!t.map(e=>e.skill_type).includes(e.skill_type)&&g(e)}),m(i.length-t.length),R.current=!1})()}},[s,c,i,v,S]),(0,L.Z)(()=>{if(!((0,M.Z)(null==v?void 0:v.bot_id)||(0,M.Z)(null==v?void 0:v.conversation_type))&&(null==o?void 0:o.length)&&s&&S){var e;let t=o[0];(0,j.trackEvent)("chat_action_bar_show",{skill_id:null==t?void 0:null===(e=t.skill_type)||void 0===e?void 0:e.toString(),skill_name:(0,$.Nu)(null==t?void 0:t.skill_type),is_recommended:(0,W.M)(t.tag),is_top:"0",show_position:"recommend",...v})}},[s,c,o,v,S]);let{run:C}=(0,D.Z)(()=>{var e;null===(e=w.current)||void 0===e||e.call(w)},{wait:300,leading:!1});return(0,a.useEffect)(()=>{s&&0!==i.length&&P.Z.getState().addDurationPoint("chat_skill_bar_mount")},[s,i]),(0,d.jsx)(e,{ref:b,...r,trackParams:v,onMoreButtonMouseUp:()=>{var e,t;f(i.length-(null!==(t=null===(e=k.current)||void 0===e?void 0:e.length)&&void 0!==t?t:0))},onMoreButtonShow:e=>{k.current=e,C()},onClickSkillPin:()=>{h()},onSkillPinShow:()=>{_()},onSkillShow:e=>{g(e,Z.GI.More)},onClickRecommendClose:e=>{let t=null==e?void 0:e.skill_type;t&&((0,A.D)("chatInputStoreService").then(e=>{null==e||e.disableRecommendSkill(t)}),(0,j.trackEvent)("chat_action_bar_close",{skill_id:null==t?void 0:t.toString(),skill_name:(0,$.Nu)(t),is_recommended:(0,W.M)(e.tag),...v}))}})},eB=eU(eW,ey);var ez=n(87506),eV=n(806033),eH=n(605743),eG=n(574367),eK=n(644367),eX=n(790804),eq=n(118200),eJ=n(829619),eQ=n(708481),eY=n(233034);let e0=e=>{let{trackParams:t}=e,{selectSkill:n,reportSelectSkill:r,onClickGuestDisabled:i}=(0,eM.f)({trackParams:t}),o=(0,eY.s)(),a=(0,X.sQ)("launcherRawSettingStore",e=>{let{settingData:t}=e;return(0,eq.Z)(t,"ab_config.ab_results.guidance_input_skill_behaivior")}),s=(0,F.Z)(a),l=a||s,{run:c}=(0,D.Z)(async e=>{if(await i()){if("to_landing_page"===l){let t=await (0,eQ.gu)(e.skillType);if(null==t?void 0:t.landingPageRoute)return e.skipReport||r(e),o(t.landingPageRoute,{state:{from:eJ.M.CHAT_ACTION_BAR}})}n(e)}},{leading:!0,trailing:!1});return{selectSkill:c,reportSelectSkill:r}};var e1=n(743741),e2=n(334401),e4={"chat-footer-action-wrapper":"chat-footer-action-wrapper-hL3DnP",invisible:"invisible-LDI6Yg","action-button-bottom":"action-button-bottom-AUAWBj","action-button-bottom-round":"action-button-bottom-round-NAj818","action-button-more":"action-button-more-aKESDV","first-row":"first-row-mkTaID"};let e6=e=>{let{className:t,onClickSkillPin:n,onSkillPinShow:r}=e,i=(0,s.g1)(),o=(0,ev.nu)(),{ref:l,inView:c}=(0,e1.YD)();return(0,a.useEffect)(()=>{c&&(null==r||r())},[c]),o?(0,d.jsx)(eN.Gm,{ref:l,onClick:n,itemClassName:eS()(e4["action-button-bottom"],e4["action-button-bottom-round"]),className:eS()("pr-0",Z.Qy,t),text:void 0,icon:(0,d.jsx)(e2.Z,{}),testId:"skill_bar_button_pin_setting",tooltip:i("web_chat_skill_btn_settings")},"pin_skills_setting"):null},e3=(0,eT.y)((0,a.lazy)(()=>(0,eE.AD)({fn:()=>Promise.all([n.e("6973"),n.e("43850"),n.e("13221")]).then(n.bind(n,886448)).then(e=>({default:e.SkillPinModal}))}))),e5=(0,a.forwardRef)(function(e,t){var n;let{displaySkills:r,recommendSkills:i,visible:o,trackParams:l,isNarrowMode:c=!1,showAllSkills:u,onSkillShow:p,onSkillPinShow:v,onClickSkillPin:f,onMoreButtonMouseUp:m,onMoreButtonShow:h,onClickRecommendClose:_}=e,g=(0,s.g1)(),y=(0,ev.nu)(),{onClickGuestDisabled:b}=(0,eF.ri)({source:"unlog_click_skills",checkNewGuidanceAb:!0}),S=(0,a.useRef)(null),k=(0,ew.Z)(S),{selectSkill:w,reportSelectSkill:T}=e0({trackParams:l}),{trimSkills:E}=(0,eX.C)(),R=(0,X.sQ)("chatGuidanceStore",e=>{var t;return!E&&null!==(t=e.hideSkillBarInLandingPage)&&void 0!==t&&t}),[C,I]=(0,a.useState)(u),[x,N]=(0,a.useState)(!1),M=(null==i?void 0:i[0])?-1:0,A=(0,a.useRef)(null),$=(0,eH.PG)(),[j,O]=(0,a.useState)(!1),[F,L]=(0,a.useState)(0),[D,W]=(0,a.useState)(0),U=r.slice(0,F+1+M),B=j?$?C?r.slice(F+1+M):r.slice(F+1+M,D+M):C?r:r.slice(0,F+M):r,z=$?r.slice(D):r.slice(F),V=()=>{if(A.current){var e,t;let n=[...A.current.children].map((e,t)=>({top:e.getBoundingClientRect().top,index:t}));if(0===n.length)return;let r=Object.entries((0,ez.Z)(n,"top"));r.sort((e,t)=>Number(e[0])-Number(t[0]));let i=null==r?void 0:null===(e=r[0])||void 0===e?void 0:e[1];(null==i?void 0:i.length)&&(O(!0),L(i[i.length-1].index));let o=null==r?void 0:null===(t=r[1])||void 0===t?void 0:t[1];(null==o?void 0:o.length)&&W(o[o.length-1].index)}};(0,a.useEffect)(()=>{V()},[A.current,null==i?void 0:i[0],r.length]);let G=(0,a.useCallback)((0,eV.Z)(()=>V(),400),[]);(0,a.useEffect)(()=>{G()},[null==k?void 0:k.width]),(0,a.useEffect)(()=>(window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)),[]);let K=(0,eG.Z)(z),q=e=>{var t;let{skill:n,index:r,recommendData:i,hasTestId:o,isSkeleton:a}=e,s=!!z.find(e=>e.skill_type===n.skill_type),l={skillType:n.skill_type,skillFrom:ek.u.ClickSkill,showPosition:s?"more":"default",position:r,recommendTag:null==i?void 0:i.recommendTag,sticky:null==n?void 0:n.sticky};return(0,d.jsx)(eN.$t,{className:"!pr-0",itemClassName:eS()(e4["action-button-bottom"],null==i?void 0:i.itemClassName),colorful:!0,index:r,skill:n,from:a?void 0:"guidance_center",isNarrowMode:c,onMouseUp:()=>w(l),pluginOnClick:()=>w({...l,skipReport:!0}),onPluginMouseUp:e=>{let{onClick:t}=e;T(l),null==t||t()},customNode:null==i?void 0:i.customNode,hasTestId:o},-1===r?"recommend":null!==(t=n.skill_type)&&void 0!==t?t:r)},J=y?(0,d.jsx)(e6,{isNarrowMode:c,className:"!-ml-52",onClickSkillPin:()=>{N(!0),null==f||f()},onSkillPinShow:v}):null;(0,Z.WO)({visible:o,displaySkills:r});let Q=(0,a.useCallback)((0,H.Z)(()=>{eK.k.persist.success({eventName:"guidance_page_show",meta:{success:"1",new_guidance:"1",is_skill_bar_bottom:"1"}})}),[]);(0,a.useEffect)(()=>{o&&0!==r.length&&(P.Z.getState().addDurationPoint("guidance_group_mount"),setTimeout(()=>{(0,Z.Un)()&&Q()},300))},[o,r]);let Y=eS()({invisible:R},"flex-1 min-w-0 outline-none flex justify-center gap-12 flex-wrap"),ee=eO({skill:null==i?void 0:i[0],recommendTag:null==i?void 0:null===(n=i[0])||void 0===n?void 0:n.tag,onClickRecommendClose:_}),et=(null==i?void 0:i[0])?(0,d.jsxs)("div",{className:"flex flex-shrink-0 items-center",children:[q({skill:null==i?void 0:i[0],index:-1,recommendData:ee}),(0,d.jsx)("div",{className:"ml-12 h-16 w-1 flex-shrink-0 bg-s-color-border-tertiary"})]}):null;return(0,d.jsxs)("div",{ref:e=>{S.current=e,"function"==typeof t?t(e):t&&(t.current=e)},className:eS()(e4["chat-footer-action-wrapper"],{[e4.invisible]:!o,"!h-0 invisible":R}),"data-testid":"chat_footer_skill_bar",children:[(0,d.jsxs)("div",{ref:A,className:eS()(Y,"absolute opacity-0 select-none pointer-events-none z-0"),children:[et,r.map((e,t,n)=>q({skill:e,index:t,recommendData:t===n.length-1&&J?{itemClassName:"!mr-52"}:void 0,isSkeleton:!0}))]}),$&&(0,d.jsxs)("div",{className:eS()(Y,"overflow-hidden -mt-12 pt-12 h-54 mb-12",e4["first-row"]),children:[et,U.map((e,t)=>q({skill:e,index:t,hasTestId:!0}))]}),C?(0,d.jsxs)("div",{className:Y,children:[!$&&et,B.map((e,t,n)=>q({skill:e,index:t,recommendData:t===n.length-1&&J?{itemClassName:"!mr-52"}:void 0,hasTestId:!0})),J]}):(0,d.jsxs)("div",{className:eS()(Y,"-mt-12 pt-12 h-54 overflow-hidden"),children:[!$&&et,B.map((e,t)=>q({skill:e,index:t,hasTestId:!0})),(()=>{if(!(null==k?void 0:k.width)||0===z.length)return;null==h||h(z);let e={className:Z.Qy,itemClassName:eS()(e4["action-button-bottom"],e4["action-button-more"]),text:g("skills_more_button_title"),icon:(0,d.jsx)(eI.y,{}),testId:"skill_bar_button_more"},t=(0,d.jsx)(eN.Gm,{...e,onMouseUp:async()=>{await b()&&(E||(I(!0),K.current.map(e=>null==p?void 0:p(e))),null==m||m())}});return E?(0,d.jsx)(eR.r,{position:"topLeft",trigger:"click",className:"p-4",content:(0,d.jsx)(ex.s,{className:`
                flow-scrollbar max-h-290 w-160 overflow-auto pr-[calc(7px-var(--scrollbar-width))]
              `,items:z,onSkillShow:p,onSelectSkill:(e,t,n,r)=>{let i={skillType:e,skillFrom:t,showPosition:"more",position:r,skipReport:null==n?void 0:n.skipReport};(null==n?void 0:n.onlyReportEvent)?T(i):w(i)}}),children:(0,d.jsx)("div",{children:t})}):t})()]}),C&&(0,d.jsx)(e3,{InLandingPageAndEnableToggleSkillbar:!0,visible:x,footerWidth:null==k?void 0:k.width,onCancel:()=>N(!1),onOk:()=>N(!1),PreviewContent:e7,reportParams:{show_from:null==l?void 0:l.show_scene}})]})}),e9=eU(e5,ey);function e7(e){let{className:t=eS()("pointer-events-none"),containerClassName:n,displaySkills:r}=e,i=(0,eH.PG)(),o=(e,t)=>{var n;return(0,d.jsx)(eN.$t,{className:eS()("!pr-0"),itemClassName:e4["action-button-bottom"],colorful:!0,index:t,skill:e,isNarrowMode:i,onPluginMouseUp:el.Z},null!==(n=e.skill_type)&&void 0!==n?n:t)};return(0,d.jsx)("div",{className:eS()(e4["chat-footer-action-wrapper"],t),children:(0,d.jsx)("div",{className:eS()("flex-1 min-w-0 outline-none flex justify-center flex-wrap gap-12",n),children:null==r?void 0:r.map((e,t)=>o(e,t))})})}let e8=e=>{let{className:t,containerClassName:n}=e,r=(0,e_.b6)();return(0,d.jsx)(e7,{displaySkills:r,className:t,containerClassName:n})};var te=n(147333),tt=n(400955),tn=n(126473),tr=n(387834),ti=n(954337),to=n(861581),ta=n(124901),ts=n(787670),tl={container:"container-mcg2KV","addon-before":"addon-before-UFqiYS",icon:"icon-SYIXGd",link:"link-dX6yTo",title:"title-T3Tvk7",close:"close-CQGjY6","icon-wrapper":"icon-wrapper-JxM9Nn","tooltip-content":"tooltip-content-OFOent"};let tc=e=>{let{className:t,style:n,refContents:r,onDelete:i,addonBefore:o=!1}=e,a=(0,s.g1)(),l=r.map(e=>(0,ts.yB)(e)),c=(0,z.Z)(l)?"":(0,ts.mh)(l,a),u=r[0],p=(0,d.jsx)("div",{className:tl["icon-wrapper"],children:(0,d.jsx)(ta.Z,{className:tl.close,onClick:i})});return(0,d.jsxs)("div",{className:eS()(tl.container,t,{[tl["addon-before"]]:o}),style:n,children:[(()=>{if((null==u?void 0:u.type)==="attachment"){if("PDF"===(0,tn.JB)((0,tn.lm)(null==u?void 0:u.fileName)))return(0,d.jsx)(ti.Z,{className:tl.icon})}else if((null==u?void 0:u.type)==="link")return(null==u?void 0:u.fileType)==="PDF"?(0,d.jsx)(ti.Z,{className:tl.icon}):(0,d.jsx)(to.Z,{className:eS()(tl.icon,tl.link)})})(),(null==u?void 0:u.type)==="link"?(0,d.jsx)("div",{className:eS()(tl.title),children:null==u?void 0:u.link}):(0,d.jsx)("div",{className:tl.title,children:c}),(null==u?void 0:u.type)==="attachment"?(0,d.jsx)(tr.Z,{content:(0,d.jsx)("div",{className:tl["tooltip-content"],children:a("file_link_close")}),position:"top",children:p}):p]})};var tu=n(744787),td=n(362318),tp=n(843741),tv=n(275268),tf=n(805631),tm=n(670949),th=n(101090),t_=n(317229),tg=n(114254),ty=n(724391)},275268:function(e,t,n){"use strict";n.r(t),n.d(t,{ChatInputService:function(){return T},chatInputServiceContainer:function(){return E},createChatInputService:function(){return R}});var r=n(568120),i=n(429996),o=n(331102),a=n(444614),s=n(529537),l=n(144245),c=n(93708),u=n(708481),d=n(15348),p=n(322639),v=n(234761),f=n(468494),m=n(143312),h=n(432626),_=n(28659),g=n(28190),y=n(639088),b=n(788988),S=n(627394);function k(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let w=(0,i.lazy)(()=>(0,g.C)(()=>n.e("50309").then(n.bind(n,573591)).then(e=>({default:e.TextareaWidthMeasure}))));class T{async getAsrService(){if(!this.asrService){let{ChatAsrService:e}=await (0,g.C)(()=>n.e("38227").then(n.bind(n,529210)));this.asrService=new e(this.asrServiceInitParams)}return this.asrService}async getDirectoryService(){if(!this.directoryService){let{createMarsCodeDirectoryService:e}=await (0,g.C)(()=>n.e("38227").then(n.bind(n,579290)));this.directoryService=e()}return this.directoryService}get currentChatId(){var e,t;return null===(t=(0,c.GX)("chatViewCoreStore"))||void 0===t?void 0:null===(e=t.currentChatViewConfig)||void 0===e?void 0:e.chatId}initEventBinding(){_.l.on("app.init",this.onAppInit)}unbindEvent(){_.l.off("app.init",this.onAppInit)}async getCurrentService(){let{currentChatId:e}=this;if(!e)return null;let t=(0,c.Wp)("chatInputStore").getState().activeSkillTypeMap[e],n=t?(0,c.Wp)("chatInputStore").getState().skillMap[t]:void 0;if((0,a.Z)(n))return this.defaultChatInputService;let r=null==n?void 0:n.skill_type,i=await (0,u.wW)(r);return(null==i?void 0:i.service)||null}initTextAreaWidthMeasurer(){if(this.textareaContainerDom)return;let e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.left="-9999px",e.style.width="100%",e.style.opacity="0",(0,o.createRoot)(e).render((0,S.jsx)(w,{ref:this.textareaWidthMeasureRef})),document.body.appendChild(e),this.textareaContainerDom=e}destroyTextAreaWidthMeasurer(){var e;this.textareaContainerDom&&(r.unmountComponentAtNode(this.textareaContainerDom),null===(e=this.textareaContainerDom.parentNode)||void 0===e||e.removeChild(this.textareaContainerDom))}measureTextWidthInTextarea(e){var t,n;return null===(t=this.textareaWidthMeasureRef.current)||void 0===t||t.setText(e),null===(n=this.textareaWidthMeasureRef.current)||void 0===n?void 0:n.getTextWidth()}checkMaxFileCount(){var e,t,r,i,o;let a=this.currentChatId;if(!a)return!0;let{attachmentUploadConfig:{uploadMultiEntityConf:{maxFileCount:s},enabledSendMultiFileMessage:l}}=(0,c.GX)("attachmentUploadStore"),u=l||m.S,d=(0,p.Xo)((0,v.jo)(f.useFeedStore.getState(),a),null===(t=(0,c.GX)("chatViewCoreStore"))||void 0===t?void 0:null===(e=t.currentChatViewConfig)||void 0===e?void 0:e.chatType)&&u?s:1;return!((null!==(o=null===(i=(0,c.GX)("attachmentsStore").attachmentsMap)||void 0===i?void 0:null===(r=i[a])||void 0===r?void 0:r._default)&&void 0!==o?o:[]).length>=d)||((0,g.C)(()=>Promise.all([n.e("6973"),n.e("34986"),n.e("54033"),n.e("31372")]).then(n.bind(n,862047)).then(e=>e.SamanthaToast)).then(e=>e.error((0,h.X9)("file_token_limit",{postProcess:"sprintf",sprintf:["\u8C46\u5305",d.toString()]}))),!1)}async addAttachment(e){let t=this.currentChatId;if(!t||!this.checkMaxFileCount())return;let n=await (0,d.D)("attachmentsStoreService");return null==n?void 0:n.addAttachment({chatId:t,...e})}async addLink(e){let t=this.currentChatId;if(!t||!this.checkMaxFileCount())return;let n=await (0,d.D)("attachmentsStoreService");return null==n?void 0:n.addLink({chatId:t,...e})}async replaceLink(e){let t=this.currentChatId;if(!t)return;let n=await (0,d.D)("attachmentsStoreService");return null==n?void 0:n.replaceLink({chatId:t,...e})}async clearAttachments(){let e=await (0,d.D)("attachmentsStoreService");null==e||e.clearAllAttachments();let t=this.currentChatId;if(!t)return;let n=await (0,d.D)("attachmentUploadStoreService");return null==n?void 0:n.updatePreGeneratedLocalMessageId({chatId:t})}constructor({asrServiceInitParams:e}={}){k(this,"ctx",void 0),k(this,"defaultChatInputService",new b.d),k(this,"textareaContainerDom",null),k(this,"textareaWidthMeasureRef",(0,i.createRef)()),k(this,"asrService",null),k(this,"asrServiceInitParams",void 0),k(this,"directoryService",null),k(this,"destroy",()=>{var e;this.unbindEvent(),this.destroyTextAreaWidthMeasurer(),null===(e=this.asrService)||void 0===e||e.destroy(),this.asrService=null}),k(this,"focusOnEditor",async()=>{var e;let t=await this.getCurrentService();null==t||null===(e=t.focusOnEditor)||void 0===e||e.call(t)}),k(this,"updateEditorValue",async e=>{var t;let n=await this.getCurrentService();null==n||null===(t=n.updateEditorValue)||void 0===t||t.call(n,e)}),k(this,"clearEditorValue",()=>{this.updateEditorValue("")}),k(this,"getSkillService",async e=>{let t=await (0,u.wW)(e);return(null==t?void 0:t.service)||null}),k(this,"onAppInit",(0,s.Z)(()=>{this.initTextAreaWidthMeasurer()})),k(this,"emitBeforeBreakMessage",y.Kb),this.asrServiceInitParams=e,this.initEventBinding()}}let E=(0,l.B)(),R=e=>(E.service||(E.service=new T(e)),E.service)},362318:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var r=n(338212);let i=e=>(0,r.U)(e.trim()).some(e=>{var t;return e.type===r.y.link&&(null===(t=e.url)||void 0===t?void 0:t.startsWith("https://"))})},843741:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});class r{on(e,t){var n;this.listeners[e]||(this.listeners[e]=[]),t&&(null===(n=this.listeners[e])||void 0===n||n.push(t))}off(e,t){var n,r;if(!this.listeners[e])return;let i=null===(n=this.listeners[e])||void 0===n?void 0:n.filter(e=>e!==t);this.listeners[e]=[],i&&(null===(r=this.listeners[e])||void 0===r||r.push(...i))}get(e){return this.listeners[e]||[]}constructor(){var e,t,n;t=void 0,(e="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e="listeners","string"))?n:n+"")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this.listeners={}}}},279947:function(e,t,n){"use strict";n.d(t,{Q:function(){return p},h:function(){return v}});var r=n(429996),i=n(572231),o=n(530836),a=n(190831),s=n(468494),l=n(51679),c=n(393648),u=n(772145),d=n(967037);let p=()=>{let{canReport:e}=i.Z.getState(),t=(0,r.useRef)(null!=e&&e);return{initLoadMessageInChatPage:async(e,n)=>{let{reportFirstView:r=!1}=n||{};if(!e)return;s.useFeedStore.getState().updateChatCreateInFirstTime({conversationId:e,status:!1});let l=(0,c.M7)(),p=o.useMessageStore.getState().initMessageList({conversationId:e,messageIndex:Number.MAX_SAFE_INTEGER,isGuest:!l,hasPreprocessTask:a.W2});if(r&&t.current){var v,f;t.current=!1;let{chatLayoutCreateTime:n=0,chatLaunchSuccessTime:r=0,flowWebScriptJsFinish:a=0,enterPid:s}=i.Z.getState(),l=null===(f=o.useMessageStore.getState().messageLinkMap)||void 0===f?void 0:null===(v=f[e])||void 0===v?void 0:v.length,c=(0,d.zQ)({eventName:"init_chat_app_first_conversation",meta:{chat_cached:l?"1":"0",enter_pid:s,"page_time.origin":-n,"page_time.dom_interactive":a-n,"page_time.launch_success":r-n,"page_time.start":(0,u.z)()-n}});i.Z.setState({chatCached:!!l}),await p.then(e=>{(null==e?void 0:e.length)?(c.addDurationPoint("success"),c.success({meta:{"page_time.success":(0,u.z)()-n}}),i.Z.getState().addDurationPoint("load_chat_finish")):(c.error({reason:"init_msg_list_empty"}),i.Z.getState().error("init_msg_list_empty"))},e=>{throw c.error({error:e,reason:"init_msg_inner_error"}),i.Z.getState().error("init_msg_inner_empty",e),e})}else r?await p.then(e=>{(null==e?void 0:e.length)?i.Z.getState().addDurationPoint("load_chat_finish"):i.Z.getState().error("init_msg_list_empty")},e=>{throw i.Z.getState().error("init_msg_inner_empty",e),e}):await p}}},v=e=>{let[t,n]=(0,r.useState)(null),[i,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{o(!0),void 0!==e&&l.Ox.LanguageList({bot_id:e}).then(e=>{let{data:t}=e;(null==t?void 0:t.support_language_list)!==void 0&&n(t.support_language_list),o(!1)}).catch(()=>{o(!1)})},[]),{languages:t,loading:i}}},236543:function(e,t,n){"use strict";n.d(t,{D:function(){return g},s:function(){return _}});var r=n(429996),i=n(721219),o=n(861431),a=n(210230),s=n(291375),l=n(81307),c=n(67864),u=n(93708),d=n(234761),p=n(468494),v=n(107599),f=n(729813),m=n(836031),h=n(967037);let _=e=>{let{chatType:t}=e,n=(0,m.T)();return(e,r)=>{let a=(0,d.dg)(p.useFeedStore.getState(),e);if(a){p.useFeedStore.getState().updateLocalConversationLocal(e,{createStatus:s.ns.Creating});let u=(0,d.IO)(p.useFeedStore.getState());return(0,i.Z)(r).map(r=>{var i,s,d,p;return{...r,reportParams:{...null==r?void 0:r.reportParams,from:(null==r?void 0:null===(i=r.reportParams)||void 0===i?void 0:i.from)||"",enter_from:null==n?void 0:null===(s=n.state)||void 0===s?void 0:s.enter_from,conversation_type:l.VI.CocoWebSub},localConversationId:e,conversationId:"0",botId:u,chatType:null!=t?t:c.z.NewThread,botType:"Main",extraExt:{...null==r?void 0:r.extraExt,...(null==a?void 0:null===(d=a.local)||void 0===d?void 0:d.relatedShareId)?{related_share_id:null==a?void 0:null===(p=a.local)||void 0===p?void 0:p.relatedShareId}:{},need_create_thread:"1"},reportEvents:{create_conversation_by_message:(0,h.zQ)({eventName:"create_conversation_by_message",meta:{scene:"new_thread"}}),new_thread_message_full:(0,h.zQ)({eventName:"new_thread_message_full",meta:{...(0,o.Z)(r,["scene"]),...(0,o.Z)(null==r?void 0:r.reportParams,["send_source"])}})}}})}return r}},g=e=>{let t=(0,v.vf)(e);(0,r.useEffect)(()=>{if(t&&e)return p.useFeedStore.subscribe(t=>t.localConversationMap[e],t=>{var n,r,i,o,l,c,d,p;!(0,a.Z)(t)&&((null===(n=t.local)||void 0===n?void 0:n.createStatus)===s.ns.Done&&(null===(r=t.local)||void 0===r?void 0:r.newConversationId)?(null===(c=t.local)||void 0===c||null===(l=c.reportEvent)||void 0===l||l.success(),setTimeout(()=>{var n;(0,u.Wp)("chatViewCoreStore").setState({needSkipChatKey:e}),f.v.emit("chat.thread.created",{localConversationId:e,newConversationId:(null===(n=t.local)||void 0===n?void 0:n.newConversationId)||""})})):(null===(i=t.local)||void 0===i?void 0:i.createStatus)===s.ns.Failed&&(null===(o=t.local)||void 0===o?void 0:o.failReason)===s.t2.ReachLimit&&(null==t||null===(p=t.local)||void 0===p||null===(d=p.reportEvent)||void 0===d||d.error({reason:"guest_reach_limit"}),setTimeout(()=>f.v.emit("chat.guest.login",{backToRoot:!0}))))},{fireImmediately:!0})},[t,e])}},723431:function(e,t,n){"use strict";n.d(t,{_:function(){return m},w:function(){return f}});var r=n(429996),i=n(81307),o=n(67864),a=n(93708),s=n(468494),l=n(475879),c=n(432626),u=n(577831),d=n(967037),p=n(644367),v=n(236543);let f=e=>{let{chatId:t,chatType:n,navigate:r}=e,l=(0,c.g1)();return{localThreadSendMessage:(0,v.s)({chatType:n}),sendMessageHelper:()=>{let e=t||s.useFeedStore.getState().addNewLocalConversation({reportEvent:(0,d.zQ)({eventName:"create_conversation",meta:{from:"header"}}),conversation:{conversation_type:i.VI.CocoWebSub,name:l("sidebar_newChat_placeholder")},conversationId:t});return{resolveLocalConversationId:e,toNewChat:function(n){let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1],s=arguments.length>2?arguments[2]:void 0;setTimeout(()=>{i&&(0,a.Wp)("chatInputStore").getState().updateHidePopoverWhenMount(t,!0);let l=new URLSearchParams({...s,type:`${o.z.ThreadLocalConversation}`});null==r||r(`/chat/${e}?${l.toString()}`,{replace:n})},100)}}}}},m=e=>{let{chatId:t,chatType:n,eventPrefix:i="new_thread_view",navigate:o}=e,{chatInputRef:a}=(0,l.E)();return(0,r.useEffect)(()=>{if(!(0,u.KX)()){var e;null===(e=a.current)||void 0===e||e.focus()}return p.k.persist.info({eventName:`${i}_show`,meta:{localConversationId:t}}),()=>{t||p.k.persist.warning({eventName:`${i}_without_localConversationId`})}},[]),f({chatId:t,chatType:n,navigate:o})}},510361:function(e,t,n){"use strict";n.d(t,{O:function(){return a},z:function(){return s}});var r=n(429996),i=n(814986),o=n(577831);let a=e=>{let{disabled:t,onSubmit:n,value:i,setValue:a,allowEmpty:s=!1,clearInputOnSubmit:l=!0,attachmentCanNotSend:c=!1,onEmptyAt:u}=e,d=(0,r.useRef)(null),[p,v]=(0,r.useState)(null);(0,r.useLayoutEffect)(()=>{if(null!==p){if(d.current){let e=p+1;d.current.selectionStart=e,d.current.selectionEnd=e}v(null)}},[d.current,p,i]);let f=(0,r.useCallback)(()=>{a("")},[]),m=(0,r.useCallback)((e,r)=>{if(!t&&(s||i.trim())&&!c){if("dependOnSubmit"===l){(async()=>{await (null==n?void 0:n(null!=r?r:i))&&a("")})();return}null==n||n(null!=r?r:i),l&&a("")}},[t,n,i,s,l]),h=(0,r.useCallback)(e=>{let t=e.shiftKey||!!(0,o.V5)()&&e.altKey||!!(0,o.ED)()&&e.ctrlKey;if(13===e.keyCode&&!t){(0,o.KX)()||e.preventDefault(),m();return}},[i,v,m]);return{textAreaRef:d,textAreaProps:{value:i,onChange:e=>{!i&&("@"===e||"/"===e)&&u?u(!0,e):(null==u||u(!1),a(e))},onKeyDown:h},submit:m,clear:f}},s=e=>{let{defaultValue:t="",onChange:n=i.Z,...o}=e,[s,l]=(0,r.useState)(t),{textAreaRef:c,textAreaProps:u,submit:d,clear:p}=a({value:s,setValue:(0,r.useCallback)(e=>{n(e),l(e)},[n]),...o});return{textAreaRef:c,textAreaProps:u,submit:d,clear:p,value:s,setValue:l}}},789395:function(e,t,n){"use strict";n.d(t,{f:function(){return c}});var r=n(669160),i=n.n(r),o=n(744966),a=n(52799),s={"send-button":"send-button-IqFoMN",small:"small-MgSsit",icon:"icon-E_c9o3"},l=n(627394);let c=e=>{let{small:t,className:n}=e;return(0,l.jsx)("div",{className:i()(a.Z["input-content-container"],n),children:(0,l.jsx)("div",{className:i()(a.Z.container,"guidance-input-skeleton-container"),children:(0,l.jsxs)("div",{className:a.Z["editor-container"],children:[(0,l.jsx)("div",{className:a.Z.editor}),(0,l.jsxs)("div",{className:a.Z["bottom-wrapper"],children:[(0,l.jsx)("div",{className:a.Z["left-tools-wrapper"]}),(0,l.jsx)("div",{className:a.Z["tools-placeholder"]}),(0,l.jsx)("div",{className:a.Z["right-tools-wrapper"],children:(0,l.jsx)("div",{className:i()(s["send-button"],t&&s.small),children:(0,l.jsx)(o.Z,{className:s.icon})})})]})]})})})}},170193:function(e,t,n){"use strict";n.d(t,{b:function(){return c}});var r=n(429996),i=n(669160),o=n.n(i);let a=e=>r.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},r.createElement("path",{d:"M21.1504 12C21.1504 6.94659 17.0534 2.84961 12 2.84961C6.94659 2.84961 2.84961 6.94659 2.84961 12C2.84961 17.0534 6.94659 21.1504 12 21.1504V22.75C6.06294 22.75 1.25 17.9371 1.25 12C1.25 6.06294 6.06294 1.25 12 1.25C17.9371 1.25 22.75 6.06294 22.75 12C22.75 17.9371 17.9371 22.75 12 22.75V21.1504C17.0534 21.1504 21.1504 17.0534 21.1504 12Z",fill:"currentColor"}),r.createElement("path",{d:"M7.5 11.5C7.5 9.61438 7.5 8.67157 8.08579 8.08579C8.67157 7.5 9.61438 7.5 11.5 7.5H12.5C14.3856 7.5 15.3284 7.5 15.9142 8.08579C16.5 8.67157 16.5 9.61438 16.5 11.5V12.5C16.5 14.3856 16.5 15.3284 15.9142 15.9142C15.3284 16.5 14.3856 16.5 12.5 16.5H11.5C9.61438 16.5 8.67157 16.5 8.08579 15.9142C7.5 15.3284 7.5 14.3856 7.5 12.5V11.5Z",fill:"currentColor"}));var s=n(627394);let l=(0,r.lazy)(()=>Promise.all([n.e("62192"),n.e("53358")]).then(n.bind(n,184365)).then(e=>({default:e.DbxTooltip})));function c(e){let{onClick:t,className:n,tooltipContent:i,enableTooltip:c=!0,...u}=e,d=(0,s.jsx)("div",{className:o()("size-34 rounded-full hover:bg-dbx-fill-trans-20-hover bg-dbx-fill-trans-20-default","overflow-hidden cursor-pointer flex items-center justify-center",n),onClick:t,...u,children:(0,s.jsx)(a,{className:"block size-16"})});return c&&i?(0,s.jsx)(r.Suspense,{fallback:d,children:(0,s.jsx)(l,{position:"bottom",content:i,children:d})}):d}},821906:function(e,t,n){"use strict";n.d(t,{l:function(){return u}});var r=n(429996),i=n(669160),o=n.n(i),a=n(702534),s=n(344034),l=n(627394);let c=(0,r.lazy)(()=>Promise.all([n.e("62192"),n.e("53358")]).then(n.bind(n,184365)).then(e=>({default:e.DbxTooltip}))),u=e=>{let{"data-testid":t,disableToSend:n,sendMessageHoverText:i,onClick:u,className:d,onDisabledClick:p,...v}=e,f=(0,r.useMemo)(()=>(0,l.jsx)(a.Z,{id:"flow-end-msg-send",color:n?"grey-filled":"brand-filled",className:o()("size-34 !rounded-full flex items-center justify-center p-0 border-0 overflow-hidden",{"!bg-dbx-text-highlight":!n,"hover:!bg-dbx-fill-highlight-hover":!n,"active:!bg-dbx-fill-highlight-hover":!n,"!bg-dbx-fill-trans-20-disable":n}),disabled:n,"aria-disabled":n,"aria-label":"string"==typeof i?i:void 0,"data-testid":t,onClick:u,children:(0,l.jsx)(s.e,{className:o()("size-16",{"text-dbx-text-disable":n,"text-dbx-static-white":!n})})}),[n,i,u,t]),m=(0,r.useMemo)(()=>i?(0,l.jsx)(r.Suspense,{fallback:f,children:(0,l.jsx)(c,{content:i,position:"bottom",clickToHide:!0,children:(0,l.jsx)("div",{children:f})})}):f,[i,f]);return(0,l.jsx)("div",{className:o()("shrink-0 flex items-center h-[34px] send-btn-wrapper group",d),onClick:()=>{n&&(null==p||p())},...v,children:m})}},629738:function(e,t,n){"use strict";n.d(t,{a:function(){return c}}),n(429996);var r=n(669160),i=n.n(r),o=n(821906),a=n(170193),s={small:"small-W_jGot","break-btn":"break-btn-fISNgC"},l=n(627394);function c(e){let{beforeNodes:t,hideSendAndBreakBtn:n,small:r,breakBtnVisible:c,sendMessageHoverText:u,breakBtnHoverText:d,sendMessageClassName:p,sendMessageButtonText:v,disableToSend:f,onClickSendButton:m,onClickDisabledSendButton:h,onClickBreakButton:_,enableLocalBeakButtonTooltip:g=!0,onWrapperClick:y}=e;return(0,l.jsxs)("div",{className:"flex items-center gap-8",onClick:y,children:[(0,l.jsx)("div",{className:"flex items-center gap-2",children:t}),n?null:(0,l.jsxs)("div",{className:"flex size-34 items-center justify-center",children:[(0,l.jsx)(a.b,{onClick:_,className:i()(s["break-btn"],{"!hidden":!c,[s.small]:r},"size-34 rounded-full cursor-pointer"),tooltipContent:d,enableTooltip:g,"data-testid":"chat_input_local_break_button"}),(0,l.jsx)(o.l,{"data-testid":"chat_input_send_button",disableToSend:f,sendMessageHoverText:u,buttonText:v,className:i()(p,{"!hidden":c,[s.small]:r}),onClick:m,onDisabledClick:h})]})]})}},226692:function(e,t,n){"use strict";n.d(t,{oy:function(){return u},l8:function(){return c}});var r=n(613993),i=n(231462),o=n(561200);let a={blockMap:{}},s=e=>({...a,updateBlockState:(t,n)=>e((0,o.Uy)(e=>{e.blockMap[t]={...e.blockMap[t],...n}}))}),l=e=>{let{prefix:t,isEnableDebug:n=!0,reduxDevToolsSnapshot:o}=e,a=(0,r.XR)(s);return n&&o?(0,i.Ue)()((0,r.mW)(a,{name:`${t}-chat-input-store`})):(0,i.Ue)()(a)},c=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{_useCrowdTestStore:r}=c.prototype;if(r)return r(...t);throw Error("useCrowdTestStore is not initialized")};function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_useCrowdTestStore:t}=c.prototype||{};if(!t){let t=l({...e});Object.setPrototypeOf(c.prototype,t),Object.defineProperties(c,{...Object.getOwnPropertyDescriptors(t)}),c.prototype._useCrowdTestStore=t}}},727591:function(e,t,n){"use strict";n.d(t,{O:function(){return k},c:function(){return w}});var r=n(613993),i=n(231462),o=n(136389),a=n(869024),s=n(561200),l=n(51679),c=n(910157),u=n(644367);let d=()=>({isConfigInitialed:!1,isConfigLoading:!1,fetchConfigFailed:!1,sendDisabled:!1,blockIdToProcess:{},isProcessDataLoading:!1,blockIdToProcessHasInitialized:{},breakModalDestroyers:{},blockIdToConvIdWithAsyncState:{}}),p=(e,t)=>(0,o.Z)(d(),{fetchDeepResearchProcessData:async n=>{var r;let{blockId:i,resourceId:o}=n;if(null===(r=t().blockIdToProcessHasInitialized)||void 0===r||!r[i])try{e((0,s.Uy)(e=>{e.isProcessDataLoading=!0}));let{data:t}=await l.mH.GetDeepResearchResource({resource_id:o}),{blocks:n=[]}=null!=t?t:{},r=n.map(e=>{var t;return{...e,content_obj:(0,c.R)(e.content,{}),id:null!==(t=null==e?void 0:e.block_id)&&void 0!==t?t:""}});e((0,s.Uy)(e=>{e.blockIdToProcess[i]||(e.blockIdToProcess[i]=[]),e.blockIdToProcess[i]=r,e.isProcessDataLoading=!1,e.blockIdToProcessHasInitialized[i]=!0}))}catch(t){e((0,s.Uy)(e=>{e.isProcessDataLoading=!1,e.blockIdToProcessHasInitialized[i]=!0})),u.k.persist.warning({eventName:"fetch_DeepResearch_process_data_error"})}},updateDeepResearchProcessData(t){let{blockId:n,value:r}=t;e((0,s.Uy)(e=>{e.blockIdToProcess[n]||(e.blockIdToProcess[n]=[]),e.blockIdToProcess[n]=r}))},updateBlockIdToConvId:n=>{let{blockId:r,convId:i,status:o}=n;e((0,s.Uy)(e=>{var n,a;e.blockIdToConvIdWithAsyncState[r]||(e.blockIdToConvIdWithAsyncState[r]={}),e.blockIdToConvIdWithAsyncState[r]={convId:i,status:o};let s=null!==(n=t().blockIdToProcess)&&void 0!==n?n:{},l=null!==(a=e.blockIdToConvIdWithAsyncState)&&void 0!==a?a:{};Object.keys(s).forEach(t=>{var n,r;(null===(n=l[t])||void 0===n?void 0:n.convId)!==i&&(null===(r=l[t])||void 0===r?void 0:r.status)&&(delete e.blockIdToProcess[t],e.blockIdToProcessHasInitialized[t]=!1)})}))},updateSendDisabledState:t=>{e((0,s.Uy)(e=>{e.sendDisabled=t}))},updateBreakModalDestroyers(t){e((0,s.Uy)(e=>{e.breakModalDestroyers=t}))},addBreakModalDestroyer:(t,n)=>{e((0,s.Uy)(e=>{e.breakModalDestroyers[t]=n}))},removeBreakModalDestroyer:t=>{e((0,s.Uy)(e=>{delete e.breakModalDestroyers[t]}))}});var v=n(93708),f=n(993047),m=n(453093);let h=async e=>{var t;let{conversationId:n,artifactId:r}=e,{data:i}=await l.mH.SearchArtifact({conversation_id:n,artifact_id:r}),o=null!==(t=null==i?void 0:i.artifacts)&&void 0!==t?t:[];return(0,m.Z)(o,e=>e.version)},_=()=>({artifactMap:{}}),g=(e,t)=>(0,o.Z)(_(),{fetchArtifactList:async t=>{let{conversationId:n,artifactId:r,hasAbort:i}=t;try{let t=await (0,f.aG)({value:()=>h({conversationId:n,artifactId:r}),ifRetry:e=>!e.length,count:5});if(i)return;return e((0,s.Uy)(e=>{let{artifactMap:i}=e;i[n]||(i[n]={}),i[n][r]=t})),t}catch(e){throw u.k.persist.error({eventName:"search_artifact_error",error:e}),e}},async refreshArtifactList(){let{conversationId:e,canvasContent:n}=(0,v.GX)("chatViewCanvasStore"),r=null==n?void 0:n.artifactId;if(e&&r)return t().fetchArtifactList({conversationId:e,artifactId:r})}}),y=e=>{try{return{blockIdToProcess:e.blockIdToProcess}}catch(e){return u.k.persist.error({message:"[@deep-research-store] persist state limit error",error:e instanceof Error?e:Error(String(e))}),{}}},b=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.Z)(p(...t),g(...t))},S=e=>{let{isEnableDebug:t,reduxDevToolsSnapshot:n,merge:o,partialize:s,storage:l}=e,c=(0,a.C1)({name:"deep-research-store",prefix:"samantha-web",storage:l,partialize:null!=s?s:y,version:1.5,merge:o}),u=(0,r.tJ)((0,r.XR)(b),c);return t&&n?(0,i.Ue)()((0,r.mW)(u,{name:"samantha-web-deep-research-store"})):(0,i.Ue)()(u)},k=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{_useDeepResearchStore:r}=k.prototype;if(r)return r(...t);throw Error("useDeepResearchStore is not initialized")};function w(e){let{_useDeepResearchStore:t}=k.prototype||{};if(!t){let t=S({...e});Object.setPrototypeOf(k.prototype,t),Object.defineProperties(k,{...Object.getOwnPropertyDescriptors(t)}),k.prototype._useDeepResearchStore=t}}},433408:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(429996),i=n(218523),o=n(93708),a=n(107599),s=n(993047),l=n(162957),c=n(627394);let u=(0,l.y)(r.lazy(()=>(0,s.AD)({fn:()=>Promise.all([n.e("6973"),n.e("34986"),n.e("54033"),n.e("40588"),n.e("4377"),n.e("74212"),n.e("43850"),n.e("33382"),n.e("86466"),n.e("75029")]).then(n.bind(n,697398))})));function d(){let e=(0,o.sQ)("chatViewCoreStore").currentChatViewConfig,{chatId:t}=null!=e?e:{chatId:""},{activeKey:n,mode:r}=(0,i.R)(),s=(0,a.sX)(t),l=(null==s?void 0:s.bot_id)||t,d="setting"===r?t===n:void 0!==l&&l===n;return e&&d?(0,c.jsx)(u,{...e}):null}},872700:function(e,t,n){"use strict";n.r(t),n.d(t,{icpLink:function(){return R},PolicyBar:function(){return C}});var r=n(529496),i=n(429996),o=n(354187),a=n(669160),s=n.n(a),l=n(204917),c=n(58328),u=n(93708),d=n(17135),p=n(153941),v=n(966015),f=n(627394);let m=e=>{let{className:t,dataTestId:n,menus:r}=e;return(0,f.jsx)(p.D.Menu,{className:s()("context-menu-wrapper-WcDbIg",t),"data-testid":n,children:r.map((e,t)=>{if("divider"===e.type)return(0,f.jsx)(p.D.Divider,{},t);let{key:n,disabled:r,disabledTip:i,type:o,onClick:a,icon:l,render:c,preventDefault:u=!0}=e;return(0,f.jsx)(p.D.Item,{"data-testid":`samantha_dropdown_item_${n}`,disabled:r,className:s()("context-menu-item-KHPfat",{"danger-yxNlGk":"danger"===o,"disabled-PsjaE7":r}),onClick:e=>{u&&(e.preventDefault(),e.stopPropagation()),null==a||a()},children:(0,f.jsx)(v.s,{content:i,className:s()({"!hidden":!(r&&i)}),children:(0,f.jsxs)("div",{className:"item-wrapper-f03V5H",children:[l,"function"==typeof c?c():c]})})},n)})})};var h=n(432626),_=n(591332),g=n(182883),y={"contact-box":"contact-box-bJEugl",text:"text-aIbIqk",copyright:"copyright-hpNfuB",content:"content-Q6rXHh",divide:"divide-ru2rgI",button:"button-MxiUqS"};let b="mailto:jubao@mail.doubao.com",S={privacy:c.vW,contact:`mailto:feedback@mail.doubao.com?body=${encodeURIComponent((0,h.X9)("email_feedback_content",{postProcess:"sprintf",sprintf:[(0,l.fz)()]}))}`,terms:c.s8,copyrightDispute:(()=>{if(b)return`${b}?${new URLSearchParams({subject:(0,h.X9)(`\u{3010}${(0,h.X9)("aispace_copyright_report")}\u{3011}`)})}`})(),australianOnlineSafety:c.Lp},{Text:k}=_.Z,w=()=>{let e=(0,h.g1)(),t=(0,u.sQ)("launcherRawSettingStore",e=>{var t;return null===(t=e.launchData)||void 0===t?void 0:t.country},o.X);return(0,f.jsxs)("div",{className:s()(y["contact-box"]),children:[(0,f.jsx)("a",{href:(0,r.C)(S.contact,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRP$2xr$0%1d1ltM$dlb%41T1cxa$J6a3p%RmRP-jFsW$$-WmpNMHBx$ERKT2RtSllRblpp-lZaM$pFaE5kb%5IT1hOaF-wNDF%RmRL-%dOcE9XaFpi$*t4Wk$NNWNHSnR$bXhs%Xp$d1l6Tm9hR050WkR*amR6MDk"}),className:y.text,children:e("web_homepage_contact_us")}),(0,f.jsx)("a",{href:(0,r.C)(S.terms,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRP$2xr$0%1d1ltM$dlb%41T1cxa$J6a3p%RmRP-jFsW$$-WmpNMHBx$ERKT2RtSllRblpp-lZaM$pFaE5kb%5IT1hOaF-wNDF%RmRL-%dOcE9XaFpi$*t4Wk$NNWNHSnR$bXhs%Xp$d1l6Tm9hR050WkR*amR6MDk"}),onClick:()=>{(0,d.trackEvent)("click_login_home_protocol")},className:y.text,children:e("term_of_use")}),(0,f.jsx)("a",{href:(0,r.C)(S.privacy,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRP$2xr$0%1d1ltM$dlb%41T1cxa$J6a3p%RmRP-jFsW$$-WmpNMHBx$ERKT2RtSllRblpp-lZaM$pFaE5kb%5IT1hOaF-wNDF%RmRL-%dOcE9XaFpi$*t4Wk$NNWNHSnR$bXhs%Xp$d1l6Tm9hR050WkR*amR6MDk"}),onClick:()=>{(0,d.trackEvent)("click_login_home_privacy")},className:y.text,children:e("privacy_policy")}),"AU"===t&&(0,f.jsx)("a",{href:(0,r.C)(S.australianOnlineSafety,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRP$2xr$0%1d1ltM$dlb%41T1cxa$J6a3p%RmRP-jFsW$$-WmpNMHBx$ERKT2RtSllRblpp-lZaM$pFaE5kb%5IT1hOaF-wNDF%RmRL-%dOcE9XaFpi$*t4Wk$NNWNHSnR$bXhs%Xp$d1l6Tm9hR050WkR*amR6MDk"}),target:"_blank",className:y.text,children:e("settings_aboutProd_AUOnlineSafety_global","Australian Online Safety")}),(0,f.jsx)(g.Dj,{trigger:"click",position:"rightTop",render:(0,f.jsx)(m,{menus:[...S.copyrightDispute?[{key:"send_email",render:()=>e("aispace_copyright_report"),onClick:()=>{S.copyrightDispute&&(window.location.href=(0,r.C)(S.copyrightDispute,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRP$2xr$0%1d1ltM$dlb%41T1cxa$J6a3p%RmRP-jFsW$$-WmpNMHBx$ERKT2RtSllRblpp-lZaM$pFaE5kb%5IT1hOaF-wNDF%RmRL-%dOcE9XaFpi$*t4Wk$NNWNHSnR$bXhs%Xp$d1l6Tm9hR050WkR*amR6MDk"}))}}]:[],{key:"view_guide",render:()=>e("aispace_copyright_notice"),onClick:()=>{window.open("https://www.doubao.com/legal/ip_protection_guideline","_blank")}}]}),children:(0,f.jsx)("a",{className:y.text,children:e("aispace_copyright_complaint")})}),(0,f.jsx)("div",{className:y.divide}),(0,f.jsxs)("div",{className:y.copyright,children:[(0,f.jsx)(k,{className:y.content,children:"\u5317\u4EAC\u6625\u7530\u77E5\u97F5\u79D1\u6280\u6709\u9650\u516C\u53F8"}),(0,f.jsx)(k,{className:y.content,children:"\u5317\u4EAC\u5E02\u897F\u57CE\u533A\u961C\u6210\u95E8\u5916\u5927\u885731\u53F74\u5C42408D"}),(0,f.jsx)("a",{href:(0,r.C)("https://beian.miit.gov.cn/",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRP$2xr$0%1d1ltM$dlb%41T1cxa$J6a3p%RmRP-jFsW$$-WmpNMHBx$ERKT2RtSllRblpp-lZaM$pFaE5kb%5IT1hOaF-wNDF%RmRL-%dOcE9XaFpi$*t4Wk$NNWNHSnR$bXhs%Xp$d1l6Tm9hR050WkR*amR6MDk"}),children:(0,f.jsx)(k,{className:y.content,children:"\u4EACICP\u59072023020373\u53F7-1"})}),(0,f.jsx)("a",{href:(0,r.C)("https://lf9-cdn-tos.draftstatic.com/obj/ies-hotsoon-draft/grace_legal/ICP_certificate.html",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRP$2xr$0%1d1ltM$dlb%41T1cxa$J6a3p%RmRP-jFsW$$-WmpNMHBx$ERKT2RtSllRblpp-lZaM$pFaE5kb%5IT1hOaF-wNDF%RmRL-%dOcE9XaFpi$*t4Wk$NNWNHSnR$bXhs%Xp$d1l6Tm9hR050WkR*amR6MDk"}),children:(0,f.jsx)(k,{className:y.content,children:"\u4EACB2-20241987"})}),(0,f.jsx)("a",{href:(0,r.C)("https://lf3-cdn-tos.draftstatic.com/obj/ies-hotsoon-draft/grace_legal/wangluowenhua_certificate.html",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRP$2xr$0%1d1ltM$dlb%41T1cxa$J6a3p%RmRP-jFsW$$-WmpNMHBx$ERKT2RtSllRblpp-lZaM$pFaE5kb%5IT1hOaF-wNDF%RmRL-%dOcE9XaFpi$*t4Wk$NNWNHSnR$bXhs%Xp$d1l6Tm9hR050WkR*amR6MDk"}),children:(0,f.jsx)(k,{className:y.content,children:"\u4EAC\u7F51\u6587\u30142024\u30154578-215\u53F7"})}),(0,f.jsxs)("a",{href:(0,r.C)(c.Cp,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRP$2xr$0%1d1ltM$dlb%41T1cxa$J6a3p%RmRP-jFsW$$-WmpNMHBx$ERKT2RtSllRblpp-lZaM$pFaE5kb%5IT1hOaF-wNDF%RmRL-%dOcE9XaFpi$*t4Wk$NNWNHSnR$bXhs%Xp$d1l6Tm9hR050WkR*amR6MDk"}),className:"flex items-center",rel:"noreferrer",target:"_blank",children:[(0,f.jsx)("img",{src:(0,r.C)("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAnCAYAAABnlOo2AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA4hSURBVHgB1Vh5kBz1df76Pqbn2p2Z3dlD12p1oHORQAgFIdmROIy4VCgciUtFDArGdg6HhKrYKVIpUkmKpFLYScVVJI7LMgSIECVAthIhK8JGQgZ0WOyujt3VHtrVzs59dff0lde92o1lQyG7/I+7qnene7p/v3d87/veGwa/huPAfz67fMXS2BdY11p5abL82sFDF7/z53//7xX8CgeDX/E4dvD561IJ7VGnNHlPfmR04ZH3MhjOAFtukLFibdp0pZbDus18c8XGr75Fj3vXuu4vZdCe3c/N7Vmd3MoVM49Xy+W1J98fw+GTDZwf52F5Ilh/Z89DQjOxZb2INYsldC7qmKwg+vL45fy/fOber5/9tD2uyaB393/91nRce6ZerG/60aE+nB5m8dNhFa7HQZYZtLcIaE2KkBQZly9XcfGSgbrugWM8LExVsHUdizU3toNVovs4NfGNudd/8eAn7cVfi0EtavkPv7/3wqbXfizDtCOBH/M6PHyOotCzXIAalsFyHkJyHaV6E302MTCk48AREz96P4Jzb3iIH8phZefg3TvuT9xMCyQ/aS/u04x5+onPxdcuCX3zu2/aYq4iwaOY3rclhCd3KFiwUIIkAE4li/rEMNxyGXrFQDisIhVj8FtrGCRjHi6MciiUGQzlFGy53lO33951aPcbvSO/tEGvvPKMtm1j6rm3/3ts/eGfavBYDztuU/AAnZrk4PLQFM683Ieze88jc6SAwgUPQ/sHcOn0JQgSBzWpYt48GR0JB32DHuqGB03kcNONHSvOTqgvDgwMWNds0Evf+FLbDUvVbw2dHvvdF/bxaLgsdj2g4u71JiTeRf+BXnz0vT6IEwYSsQjmbV6G5pVdkEo1eGM1XD55GeWRAloWqYjHbFy3EHjnpIMzg8DiZKVtx7YVq1uSsf2Hj/Ubn2rQB3t+v7dZYp/9rz1Dy/Ye4VExJSTiPL7ygANB9HDu+4OY/HEB81ctgJuvoV6pQ9uwAmUMY/TYGETLRdOSTkqlg+K5LNpW8EgmeUzmgQGqyGO9HsJMpnv7be1PPPWFDfM3rlp15uUD7xf9vdmfN+bBBze0tcUKS//keZ09eCaOvCHBJdzcucEGwzWQOV/GyA/GoKgy6jEXNd0E4RnZgQkM77mAmCgGrON2huA1c8j3lTBypApGZPH5Oz1QxuC6HF48pOAPnslF+z4893isybptZv9fMGjJ/A4NsOC4PHEKE/CKv8PaZf41i4ljk1Adup8pI39gAKIDiKoK+2g/4mUPDF2z5ED50DmUT2XA0fXUu1mYDQ5R2UVXuzPLNbologgN87rCTZ9oUEwNMY2GF3jpm+K/HFKAdCgLhpdgZSki/l1Ki0KGiU0htD2yCbbqgSX32+5ZC7GnDbzjQaHn/PftqgXvYh62XsCqBTW4/sqMfzLQDYcwyfIfa9CJt57c8vCW8LdZuuunybtiUlOUgRSOwq1VUc/UgmdntMCg70+9uh9m2YZp2Rg9eBQT/RPTz1B0aU84jovyQBW8LCGepFT6xtDW/l9JYFDOTa4//ubTC/x3fpYYuTat/FeyWVnvsi5tM/2S76EsEH5ckc4yWGf6YWbGqHyVgj5dHSzt7k06iDMzT8w8y8CVRZIXAYJn0otyECH/fijEISFN3RFj9H133LFwzaxBL337jzoVLXNTLefSQwwU3oNhIyDChqfAFhpQY2GotIBVD4IenGo6grnbV1EK+SCiDIW3NpXH6J6TgYGBQfQvnFIgSuQgi8BZxpt2Ka45qOYd+p5Z+vyf3tcxm7LWWC3GMQLDyHGYBoto2J32kcI+PGoiX1LBCi6aV7dfeWPapObProR8XRri8gRkOpVlMWg3zIEbVaaLwjc6FYI6J0KfVfzvKYonwwWO+g6km2kfUabCiLG5shmbjVCYkwzbjULyhmBzHOa2OsgUhCBpVFzYf2gKj21zkL41Td5ZiKQpDQS08CoValSllBWpwgx4fBg6sfj8rR3gaWO77oBTPLhsDRMTIk6fZYLo+DgSiGAVzgKrRYg+JGhakzJrUGtLdEXDIuApaZgTg7h+kYnjfVKQZ9/TI6dCePguEYJmILk5BsvRwAvN9N9A7sJ58pAi4Ojw8edaJuI3dvvIoTBU4NWnglS9dUwK1ppB1vL5Fhq1GjkkwuWjMHVOCwz61jOPEzQqzwkoEV/QGq6HxfOq9I5KF0LweqbAYPd+D/d15CC1SLhAHDP21lHiIQ8Nhjxtj1KJWNDHbTimE9RQZEkblt2VhFAhQtXDOPSeG8A/wBp9XLeSKpAoxjBdSBhDOtzyj4FBq25MN5lWplUWTGjEZDXCzYIWBq1EV+O5aQD6aHjzSAOxcAHt9SoW71yM1X+5GqdfHUaI2o+F90aprMMo9GVw9rUsure1IrakFRdeH8TlE1PY09QEvREg2ocl9U4cehabaFTJmAZFqVlD1ZO6Ai0rDTasLZvnPiYo0bBn56if4aCXG+S5iDMDUgBeP9AuedVdyUEzqpg6Qc8JAlKbliG5TEHxoorSxQrUBIPULYspUySk3+1H5qM8LJvBe0YKJq13pe6wcpGLjQvGIdNekZiDuhVBtcrbQYRePXpU/1v2liHDEtOMLhNzVmEqcfz2DTW88raChhM0p6DuAyE0gsppNGwMnSRp+J9RSO0qwguohSWQZs8QvPuGKH0edHfaFYWwFCP+KfsQCA4X99xqgpfCCEk6MUaKjE7AlULDs2q/86Fb2JDI3u0S28qkFRKbIx2qkNJrOD8qBAZ5xDEN10IKOhRS/Y5dd4FPsqR8JuZubEfTsk4UM1kIc9uQvn892HwRFjH7aa4ZvVwr7CvCsKhbwo4NFOlIBEIkhEpNAycnkNMbr8zS6akf/llHM2N+IDgTKUXIkA8KsjmqMqLmnX8Tp2sxYDiWAKC4BpZ7U/iQS2OlkyF20YmBGZgUwqhjkuwI6GNjSJChnuvghDAHAXdcIfCnHrWwIjaOlk4/dg0Y9Sgq0kLz/EhxdZCyL3/5DikuKftUHik9K6CYF8DHVTS1RZG/OIxH7wrh396UAj30V6yzCt5j5gTrf8C1zwoiFXxQ3jOSM0x/mOlsB0Top3wN9UbrOkdh821U0RZqkxdhsbRfi+N0NIV+b5aHGLcWcVwBUiwBIZ0mhc7BmBqHpEm4eeEkjrQzOH8pFMgAdRvQdZumDuEKSD08tLUI0k70XmBxtD8aGOFPHc5MWOiIRjg8uY3algIRcTiHQl6E1nkTyREZZzVUoVG6N8DQ8eMXnIe2bTBUxdlmkdWcohDpUVsg8LQUSx2hgbXXuag7Am5eXsVX7idAUqhHsyF0zWWwar6B39lYxtKOGtZ0GTh8WoNuetjQw2PLOhfnhgl/BPAvPqijVczQdBKGpyQghmNU0SE4vAijVEImW3hhFkM7d26S/2Ln9XsjWux2265SZ9eA5BYhMUXUSzoy48S+rVRjHs1j1AcZxCk6GRhRfJU3wdSzNKNxcG0HH0zMg+xWEOZrhBOivAmP0hJBkzuGcFyGFia9ZGVw4TTqJnEcNYN10zx5/IcTW68aFH/wwh83zeuS9iksNvglaVdGSWQNcMYE6tRkVYoM4h0pVOpMoOT+LMb5YCX5IGEiPXIosiLBn9jacgIydagI5LCG3NgEZEYnVafo8M3IGVFKvwLiPhoqq8NDlwY33/3Yq0NXNfm79x3TD/0kv3vTam1NItXaLcQ6kM/QpCLSMEiRsI3phj6SlAkbBBiXdIaaL19sid+C1sOzG7QRtScG6ZpjQU7Q5peoYSN294vEFBagZNCwSaO3EtFQrtQ+Gj07dvu2L7089P9o+5jj3ZceeW5OZ+dXHSpqy6yBt8sIaVTeQgRTA/3QEhE0LAENW4LI2xA4F0atQjJC6ShTMUgRSIkoRvsHEEm0EOdoKJQcOBQVNd5G1MBjqP/E4bPjlYd3fe3AxMy+HztKH/zOrvVayMx6dnaK17qTEmGjnCcCzNuUjkGEYnGMUJuanqcgTipvmr6sSDQcqqhPjYDXwtTjMBjrHUMsFadoVJHJcGjqXOYHFNVCBuc/7C1WTPuNjrao37rOGnRVhN7f/1TX/I70ftvUu12rzMjRFr9DB8wcRZjmdzYE16jAqmZpYmigPEwzmES4ao2jXqiCoyFAS0ZxeTxDWmhSZFKEeB6qRs0dNX6OVac2w29BwpRtg8SYHKhm3bobOhVTG5+Zv/mfilc1+bVMpbmcG++2SIAahHwqGJgOzV92khagZqs8SR7YpNQ8ItT4z1mUJGwxKGUrUGj6YGkQKGfLJHQuOhe2IUL3tAhFTiZGtizqlSKwvShYiU45QkYXyZluNibaPUa2uNq34SpQz4tpua4OJ2nWnLUNaoxYkoGGXkFVJ4DaNnGLQCH3wIei4MQIHN2ASLOWyFKjRWC3CEP+nBhqCoOTEmDVMBmTQpVK2xPjKBdIH1kR9XKBIiuC52U0zBIujw7/a88j3/vnX0jZzPGT13d9XubVZ2We7eBJV0uTo2hqp/ahVqfNJRhlaimoF+EY/7cCGTxrICaViAZ4FKsEdDEJxs7DqBId0IAQilKp03euJ0GORqloqW+6NISGHB4a7B/72vanX3vxYzH088fev7v9s6xe2T5nededdiU7N6rR5KAKgSYxaoraXYUoiCLm5uFmzxJcKK18iNqJdoTiYbBWCRZFw/+hgicMVnTHNW1vdGos985UnX3nr18c+Y/e3t7Gz+55zT/p/cMTGzs5rt7Ts66jR1bmtFTK423GVGlBLBV2nFqW+hp/AhXpBy0XJh9HZTwfU1pbhniBG3bKhZFTg6Xet08VD77+dn8Ov0nH/wHbzCapb1Z0ewAAAABJRU5ErkJggg==",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRP$2xr$0%1d1ltM$dlb%41T1cxa$J6a3p%RmRP-jFsW$$-WmpNMHBx$ERKT2RtSllRblpp-lZaM$pFaE5kb%5IT1hOaF-wNDF%RmRL-%dOcE9XaFpi$*t4Wk$NNWNHSnR$bXhs%Xp$d1l6Tm9hR050WkR*amR6MDk"}),className:"w-15 h-17 mr-2"}),(0,f.jsx)(k,{className:y.content,children:c.kJ})]})]})]})};function T(e){let{className:t}=e,[n,r]=(0,i.useState)(!1),o=(0,h.g1)();return(0,f.jsx)(g.ck,{position:"topLeft",content:(0,f.jsx)(w,{}),style:{borderRadius:12},trigger:"custom",visible:n,onVisibleChange:r,stopPropagation:!0,onClickOutSide:()=>r(!1),children:(0,f.jsx)("div",{"data-testid":"not_login_about_us",className:s()(y.button,t,"!flex-grow-0","!p-0"),onClick:()=>r(e=>!e),children:(0,f.jsx)("span",{className:"text-dbx-text-disable hover:text-dbx-text-primary cursor-pointer text-[11px] leading-[16px]",children:o("settings_about_app",{postProcess:"sprintf",sprintf:[(0,l.fz)()]})})})})}function E(){return(0,f.jsx)(T,{})}let R="https://beian.miit.gov.cn/#/Integrated/index",C=()=>(0,f.jsxs)("div",{className:"flex items-center justify-center my-4 w-full",children:[(0,f.jsx)(E,{}),(0,f.jsx)("div",{className:"border-r-[0.5px] border-r-dbx-line-10 h-[8px] mx-12"}),(0,f.jsx)("a",{className:"w-fit text-[11px] leading-[16px] cursor-pointer text-dbx-text-disable hover:text-dbx-text-primary",href:(0,r.C)(R,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRP$2xr$0%1d1ltM$dlb%41T1cxa$J6a3p%RmRP-jFsW$$-WmpNMHBx$ERKT2RtSllRblpp-lZaM$pFaE5kb%5IT1hOaF-wNDF%RmRL-%dOcE9-Qmli$kpzWl$NM%1HTXphR2hq-ldReFkz-zlQ%T09"}),target:"_blank",rel:"noreferrer",children:(0,f.jsx)("p",{className:"m-0",children:"\u4EACICP\u59072023020373\u53F7-1"})})]})},725219:function(e,t,n){"use strict";n.r(t),n.d(t,{DropTarget:function(){return d}});var r=n(429996),i=n(669160),o=n.n(i),a=n(93708),s=n(322828),l=n(392467),c=n(475879),u=n(627394);let d=()=>{var e;let{chatDropTargetRef:t,chatPageTargetRef:n}=(0,c.E)(),{currentChatViewConfig:i}=(0,a.sQ)("chatViewCoreStore"),d=null!==(e=null==i?void 0:i.chatId)&&void 0!==e?e:"",p=null==i?void 0:i.chatType,v=(0,s.pO)(d,p),f=(0,s.vb)(d,p),{isOver:m,divProps:h}=(0,l.t)({canSendFile:v,canSendImage:f}),{onDragEnter:_,onDragOver:g,onDragLeave:y,onDrop:b}=h;return(0,r.useEffect)(()=>(n.current&&(n.current.ondragenter=_,n.current.ondragover=g,n.current.ondragleave=y,n.current.ondrop=b),()=>{n.current&&(n.current.ondragenter=null,n.current.ondragover=null,n.current.ondragleave=null,n.current.ondrop=null)}),[v,f]),(0,r.useEffect)(()=>{n.current&&(m?n.current.classList.add("drag-over"):n.current.classList.remove("drag-over"))},[m]),(0,u.jsx)("div",{ref:t,onDragEnter:_,className:o()("absolute left-0 top-0 right-0 bottom-0 z-100",{hidden:!m})})}},21133:function(e,t,n){"use strict";n.r(t),n.d(t,{DynamicGAScript:function(){return h}});var r,i=n(529496),o=n(429996),a=n(430653),s=n(226842),l=n(927746),c=n(627394);let u=["bing_sem","bing_xxl"],d=["google_sem","google_xxl"],p=((r={})[r.WEB_REGISTER=0x5ca1348]="WEB_REGISTER",r[r.DOWNLOAD=0x5ca4797]="DOWNLOAD",r),v=e=>`(function(w,d,t,r,u){var f,n,i;w[u]=w[u]||[],f=function(){var o={ti:"${e}", enableAutoSpaTracking: true};o.q=w[u],w[u]=new UET(o),w[u].push("pageLoad")},n=d.createElement(t),n.src=r,n.async=1,n.onload=n.onreadystatechange=function(){var s=this.readyState;s&&s!=="loaded"&&s!=="complete"||(f(),n.onload=n.onreadystatechange=null)},i=d.getElementsByTagName(t)[0],i.parentNode.insertBefore(n,i)})(window,document,"script","//bat.bing.com/bat.js","uetq")`,f=e=>{let{isGoogleChannel:t=!1,initialized:n}=e,r="G-G8EP5CG8VZ";return t||n?(0,c.jsxs)(s.q,{children:[(0,c.jsx)("script",{src:(0,i.C)(`https://www.googletagmanager.com/gtag/js?id=${r}`,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb$J-WTNaak0wcHF%REpPZ*1KW$FuWmli$loxWk$oTmRt%lhWakJN$jJoc1lr-3hiR1JET1hCaWJWSnNa$%0xT%dNemFHa*pi$1F4WTNjO$BRPT0"}),async:!0}),(0,c.jsx)("script",{children:`
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', '${r}');`})]}):null},m=e=>{let{uetTiNumber:t,initialized:n}=e,[r]=(0,l.l)(),i=r.get("channel")||"",p="1"===a.Z.get("is_microsoft_channel"),m=u.includes(i)||p;(0,o.useEffect)(()=>{m&&!p&&a.Z.set("is_microsoft_channel","1",{expires:7})},[m,p]);let h="1"===a.Z.get("is_google_channel"),_=d.includes(i)||h;return(0,o.useEffect)(()=>{_&&!h&&a.Z.set("is_google_channel",_?"1":"0",{expires:7})},[_,h]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.q,{children:m&&(0,c.jsx)("script",{children:v(t)})}),(0,c.jsx)(f,{isGoogleChannel:_,initialized:n})]})},h=()=>(0,c.jsx)(m,{uetTiNumber:p.WEB_REGISTER,initialized:!0})},380127:function(e,t,n){"use strict";n.r(t),n.d(t,{HelmetTitle:function(){return S}});var r=n(226842),i=n(93708),o=n(308691),a=n(432626);let s=()=>{let e=(0,a.g1)(),t=(0,o.CU)(),{skillMap:n}=(0,i.sQ)("skillStore"),r=t?n[t]:void 0;return(null==r?void 0:r.helmetTitleI18nKey)?e(null==r?void 0:r.helmetTitleI18nKey):""};var l=n(204917),c=n(60752),u=n(378999);let d=()=>{let e=(0,a.g1)(),t=(0,l.fz)(),n=(0,c.aB)();return`${u.env.CLIENT_LOCAL_BUILD?e("new_tab_title"):n?t:e("web_seo_doubao_index")}`};var p=n(354187),v=n(81307),f=n(468494),m=n(234761),h=n(393648),_=n(57637),g=n(501191);let y=()=>{let{id:e}=(0,g.U)(),t=(0,a.g1)(),n=(0,h.nu)(),r=(0,f.useFeedStore)(r=>{if(!e||!(0,_.k)(e))return"";let i=(0,m.jo)(r,e);return(null==i?void 0:i.conversation_type)&&[v.VI.Coco,v.VI.CocoWeb].includes(null==i?void 0:i.conversation_type)&&n?t("recent_chats_main_bot_doubao_title"):null==i?void 0:i.name},p.X),i=(0,l.fz)();return r?`
            ${r} - ${i}`:""};var b=n(627394);let S=()=>{let e=d(),t=y(),n=s();return(0,b.jsx)(r.q,{children:(0,b.jsx)("title",{children:t||n||e})})}},465119:function(e,t,n){"use strict";n.r(t),n.d(t,{MoreSkillContent:function(){return u}});var r=n(429996),i=n(669160),o=n.n(i),a=n(93708),s=n(689768),l=n(490169),c=n(627394);let u=e=>{let{skillList:t,visibleCount:n,chatId:i,setVisible:u}=e,d=(0,r.useMemo)(()=>t.slice(n),[t,n]);return(0,c.jsx)(s.s,{className:o()("max-h-[min(400px,50vh)]","overflow-auto flow-scrollbar pr-[calc(7px-var(--scrollbar-width))]"),items:d,onSkillShow:e=>{e&&l.d.track("show",{skillType:e.skill_type})},onSelectSkill:(e,t,n)=>{e&&(l.d.track("click",{skillType:e}),(null==n?void 0:n.keepMorePopover)||u(!1),setTimeout(()=>!(null==n?void 0:n.onlyReportEvent)&&(0,a.GX)("chatInputStore").updateActiveSkillTypeMap(i,e,t)))}})}},234547:function(e,t,n){"use strict";n.r(t),n.d(t,{initMsSDK:function(){return l}});var r=n(118200),i=n(607278),o=n(371924),a=n(817981),s=n(662435);let l=async()=>{let e="https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/rc-client-security/c-webmssdk/1.0.0.43/webmssdk.es5.js";if(!e)throw Error("init mssdk error: expect url");if((0,s.X)(e))return;await (0,s.v)(e);let t=o.XI,n=(0,r.Z)(window,["byted_acrawler","init"]);if((0,i.Z)(n))n({aid:t,isSDK:!1,region:a.KM,enablePathList:[],mode:513});else throw Error("init mssdk error: expect byted_acrawler.init but not found")}},662435:function(e,t,n){"use strict";n.d(t,{X:function(){return o},v:function(){return i}});var r=n(529496);function i(e,t){return new Promise((n,i)=>{let o=document.createElement("script");o.src=(0,r.C)(e,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRP$2xr$0%1d1ltM$dlb%41T1cxa$J6a3p%RmRP-jFsW$$-WmpNMHBx$ERKc2RXRll$WFpa$0$wc$l$TT$N$1JI-khOam$%bHpZakpH-TB4W$Rtc*pi$3gzWk$NM%1HTXlSbmxhTTFaNg"}),t?(void 0!==t.async&&(o.async=t.async),t.type&&(o.type=t.type),t.crossOrigin&&(o.crossOrigin=t.crossOrigin)):o.async=!0,o.onload=()=>{o.onload=null,o.onerror=null,n()},o.onerror=()=>{o.onload=null,o.onerror=null,i(Error(`Failed to load script: ${e}`))},document.head.appendChild(o)})}function o(e){return!!document.querySelector(`script[src*="${e}"]`)}},888934:function(e,t,n){"use strict";n.r(t),n.d(t,{LayoutAfterInteractiveComp:function(){return w},CloseCanvasOnConversationSwitch:function(){return y}});var r=n(429996),i=n(474227),o=n(430653),a=n(511127),s=n(729813),l=n(605743),c=n(999132),u=n(927746);let d=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=(0,l.lj)();(0,r.useEffect)(()=>{null==t||t(e,!e||!n)},[e,n])},p=e=>{let{leftSideExpand:t,rightSideExpand:n,rightSideMode:i,needAutoExitSkeleton:o,handleLinkageToggleSidebar:a,handleLinkageCloseCanvasPanel:l}=e,[d,p]=(0,u.l)();(0,r.useEffect)(()=>{if(o&&d.get("skeleton_type")){let e=()=>{let e=new URLSearchParams(d);e.delete("skeleton_type"),p(e,{replace:!0})},t=setTimeout(e,3e3);return s.v.on("chat.canvas.entered",e),()=>(s.v.off("chat.canvas.entered",e),clearTimeout(t))}},[d,o]);let v=(0,c.Z)(a);(0,r.useEffect)(()=>{if(t&&n&&("full"===i||("narrow"===i?window.innerWidth<=1080&&window.innerWidth>800:window.innerWidth<=1920&&window.innerWidth>800)))return v(!1),()=>v(!0)},[n,"narrow"===i]),(0,r.useEffect)(()=>{t&&n&&"full"!==i&&window.innerWidth<=1080&&l()},[t])};var v=n(156217),f=n(93708),m=n(727499),h=n(33021),_=n(125411),g=n(627394);let y=e=>{let{chatViewConfig:t}=e,n=(null==t?void 0:t.chatKey)||(null==t?void 0:t.chatId),r=(0,v.GL)("chatViewService");return(0,m.Z)(()=>{let e=(0,f.Wp)("chatViewCoreStore");if(!0===e.getState().needSkipRouteAutoClosing){e.setState({needSkipRouteAutoClosing:!1});return}r.closeCanvasPanel()},[n]),(0,h.Z)(()=>r.closeCanvasPanel()),null},b=["chat_(id)/page"],S=["chat_(id)/page"],k=["chat_(id)/page","chat_url-action/page","chat_layout"],w=e=>{let{leftSideExpand:t,rightSideExpand:n,rightSideMode:s}=e,l=(0,r.useRef)(!1),c=(0,v.GL)("chatViewService"),u=(0,_.S)(),m=(0,f.sQ)("chatViewCoreStore",e=>e.currentChatViewConfig,i.Z),h=u.some(e=>b.includes(e.id)),w=u.some(e=>S.includes(e.id));return d(u.some(e=>k.includes(e.id)),(e,t)=>{c.canvasEnabled=e,c.canvasAutoOpenEnaled=t}),(0,r.useEffect)(()=>{t&&(l.current=!1)},[t]),p({leftSideExpand:t,rightSideExpand:n,rightSideMode:s,needAutoExitSkeleton:w,handleLinkageToggleSidebar:e=>{e?l.current&&(0,a.d)("open"):((0,a.d)("closed"),l.current=!0)},handleLinkageCloseCanvasPanel:(0,r.useCallback)(()=>c.closeCanvasPanel(),[c])}),(0,r.useEffect)(()=>{o.Z.set("flow_ssr_sidebar_expand",t?"1":"0")},[t]),(0,g.jsx)(g.Fragment,{children:h&&m&&(0,g.jsx)(y,{chatViewConfig:m})})}},392415:function(e,t,n){"use strict";function r(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{ChatNavigateService:function(){return i}});class i{constructor(){r(this,"navigate",void 0),r(this,"login",void 0),r(this,"init",(e,t)=>{this.navigate=e,this.login=t}),r(this,"navigateToChatGuidancePage",()=>{var e;null===(e=this.navigate)||void 0===e||e.call(this,"/chat/")}),r(this,"navigateToChatDetailPage",e=>{var t,n;let{conversationId:r,replace:i}=e;if("undefined"!=typeof location&&"/chat/url-action"===location.pathname){let e=new URLSearchParams(location.search);return e.delete("action"),null===(n=this.navigate)||void 0===n?void 0:n.call(this,`/chat/${r}?${e.toString()}`,{replace:i})}null===(t=this.navigate)||void 0===t||t.call(this,`/chat/${r}`,{replace:i})}),r(this,"navigateToCollectionPage",e=>{var t;null===(t=this.navigate)||void 0===t||t.call(this,e)}),r(this,"navigateToLoginPage",(e,t)=>{var n;null===(n=this.login)||void 0===n||n.call(this,e,t)}),r(this,"navigateToThreadListPage",()=>{var e;null===(e=this.navigate)||void 0===e||e.call(this,"/chat/thread/list")})}}},800642:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});let r="code_agent_mode"},357921:function(e,t,n){"use strict";n.d(t,{Db:function(){return I},mr:function(){return C}});var r=n(98490),i=n(293067),o=n(869024),a=n(344649),s=n(136389),l=n(901027),c=n(51679),u=n(636674),d=n(644367),p=n(346760);let v=(e,t)=>({previewedCount:0,incrAllowTryPreviewCount:()=>{e({previewedCount:t().previewedCount+1})},checkAllowTryPreview:()=>t().previewedCount<4});var f=n(81192),m=n(910157),h=n(953739);let _=()=>({blockIdToProcess:{},hasOpenCanvasViewInAsyncStreaming:!1,isProcessDataLoading:!1,blockIdToProcessHasInited:{},blockArtifactMetaMap:{},processBlockMetaMap:{},blockArtifactAutoOpenCanvasMap:{}}),g=(e,t)=>(0,s.Z)(_(),{fetchAgentProcessData:async n=>{var r;let{blockId:i,resourceId:o}=n;if(null===(r=t().blockIdToProcessHasInited)||void 0===r?void 0:r[i])return null;try{e((0,l.Uy)(e=>{e.isProcessDataLoading=!0}));let{data:t}=await c.mH.GetDeepResearchResource({resource_id:o}),{blocks:n=[]}=null!=t?t:{},r=n.map(e=>{var t;return{...e,content_obj:(0,m.R)(e.content,{}),id:null!==(t=null==e?void 0:e.block_id)&&void 0!==t?t:"",parent_id:e.parent_block_id}});return e((0,l.Uy)(e=>{e.blockIdToProcess[i]||(e.blockIdToProcess[i]=[]),e.blockIdToProcess[i]=r,e.isProcessDataLoading=!1,e.blockIdToProcessHasInited[i]=!0})),r}catch(t){return e((0,l.Uy)(e=>{e.isProcessDataLoading=!1,e.blockIdToProcessHasInited[i]=!0})),d.k.persist.warning({eventName:"fetch_DeepResearch_process_data_error"}),null}},updateAgentProcessData(t){let{blockId:n,value:r}=t;e((0,l.Uy)(e=>{e.blockIdToProcess[n]||(e.blockIdToProcess[n]=[]),e.blockIdToProcess[n]=r}))},setHasOpenCanvasViewInAsyncStreaming:t=>{e((0,l.Uy)(e=>{e.hasOpenCanvasViewInAsyncStreaming=t}))},updateBlockArtifactMeta:t=>{let{blockId:n,codeFileBlockList:r,isStreaming:i,activeCodeFileBlockId:o}=t;e((0,l.Uy)(e=>{let{blockArtifactMetaMap:t}=e;t[n]={...t[n],codeFileBlockList:r,isStreaming:i,activeCodeFileBlockId:o}}))},updateCodeFileBlockContent:(t,n,r)=>{e((0,l.Uy)(e=>{let{blockArtifactMetaMap:i}=e;if(!t||!i[t])return;let o=i[t].codeFileBlockList.find(e=>{var t;return(null===(t=e.artifactMeta.code)||void 0===t?void 0:t.path)===n});o&&(o.artifactMeta.code.content=r)}))},getBlockArtifactMetaMap:()=>t().blockArtifactMetaMap,setEndBlockArtifactMeta:t=>{e((0,l.Uy)(e=>{let{blockArtifactMetaMap:n}=e;if(!n[t])return;n[t].isStreaming=!1;let{codeFileBlockList:r}=n[t],i=r.map(e=>{let t=(0,f.Z)(e.artifactMeta);return h.$A.endStreaming([t]),{...e,artifactMeta:t}});n[t]={...n[t],codeFileBlockList:i}}))},updateBlockArtifactAutoOpenCanvas:(t,n)=>{e((0,l.Uy)(e=>{e.blockArtifactAutoOpenCanvasMap={...e.blockArtifactAutoOpenCanvasMap,[t]:n}}))},updateProcessBlockMeta:(t,n)=>{e((0,l.Uy)(e=>{e.processBlockMetaMap[t]=n}))},clearBlockArtifactRecord:t=>{e((0,l.Uy)(e=>{delete e.blockArtifactMetaMap[t]}))}});var y=n(913602),b=n(800642);let S=y.yQ.getItem(b._),k={editorValue:{data:[]},focused:!1,supportedCodeFileTypes:[],recommendCodeBasePrompts:[],recommendItems:[],recommendOtherPrompts:[],recommendArtifactsItems:[],recommendArtifactsCategoryItems:[],recommendCodePromptsTemplates:[],githubModalVisible:!1,loading:!1,refKey:"",refInfoMap:{},abResults:{},blockArtifactMap:{},retainedEditorValue:void 0,agentMode:S&&[p.KR.ChatMode,p.KR.DevMode].includes(S)?S:p.KR.DevMode,blockIdMapForClarify:{}},w=e=>({...k,updateEditorValue:t=>{e((0,l.Uy)(e=>{e.editorValue=t}))},updateCurrentPromptTemplate:(t,n)=>{e((0,l.Uy)(e=>{e.currentPromptTemplate=t,e.currentPromptTemplateSource=n}))},updateFocusedState:t=>{e((0,l.Uy)(e=>{e.focused=t}))},fetchRecommendList:async()=>{try{e((0,l.Uy)(e=>{e.loading=!0,e.recommendArtifactsItems=[],e.recommendArtifactsCategoryItems=[],e.recommendCodeBasePrompts=[],e.recommendOtherPrompts=[]}));let{data:t}=await c.mH.SkillPack({skill_type:u.SkillType.CodeAssistant,condition:{code_assistant_condition:{}}});e((0,l.Uy)(e=>{var n,r,i,o,a,s;if(t&&(e.loading=!1),(null==t?void 0:null===(n=t.code_assistant)||void 0===n?void 0:n.codebase_items)&&(e.recommendCodeBasePrompts=null==t?void 0:null===(a=t.code_assistant)||void 0===a?void 0:a.codebase_items),(null==t?void 0:null===(r=t.code_assistant)||void 0===r?void 0:r.query_items)&&(e.recommendOtherPrompts=null==t?void 0:null===(s=t.code_assistant)||void 0===s?void 0:s.query_items),null==t?void 0:null===(i=t.code_assistant)||void 0===i?void 0:i.data)try{let n=JSON.parse(t.code_assistant.data);e.recommendCodeBasePrompts=n.codebase_templates.codebase_items,e.recommendItems=n.recommendations.recommendation_items,e.recommendArtifactsCategoryItems=n.artifacts_category_templates.artifacts_category_items,e.recommendOtherPrompts=[]}catch(e){}if(null==t?void 0:null===(o=t.code_assistant)||void 0===o?void 0:o.template)try{let n=JSON.parse(t.code_assistant.template);e.recommendCodePromptsTemplates=n.prompt_list}catch(e){}}))}catch(e){d.k.persist.warning({eventName:"init_code_recommend_error",error:e})}},toggleGithubModalVisible:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;e((0,l.Uy)(e=>{e.githubModalVisible=t,n&&(e.githubModalEnterMethod=n)}))},updateRefRangeInfo:(t,n)=>{e((0,l.Uy)(e=>{e.refKey=t,e.refInfoMap={[t]:{...e.refInfoMap[t],...n}}}))},clearRefRangeInfo:()=>{e((0,l.Uy)(e=>{e.refInfoMap={[e.refKey]:{...e.refInfoMap[e.refKey],rangeStart:void 0,rangeEnd:void 0}}}))},updateAbResults:t=>{e((0,l.Uy)(e=>{e.abResults={...e.abResults,...t}}))},updateBlockArtifact:t=>{let{type:n,blockId:r,value:i}=t;e((0,l.Uy)(e=>{let{blockArtifactMap:t}=e;t||(t={}),n===p.P$.Status?t[r]={...t[r],status:i}:t[r]={...t[r],data:i}}))},setRetainedData:t=>{e((0,l.Uy)(e=>{(null==t?void 0:t.retainedEditorValue)&&(e.retainedEditorValue=null==t?void 0:t.retainedEditorValue)}))},updateAgentMode:t=>{e((0,l.Uy)(e=>{e.agentMode=t})),a.Z.setMode(t)},addBlockIdMapForClarify:(t,n)=>{e((0,l.Uy)(e=>{e.blockIdMapForClarify[t]=n}))}}),T=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.Z)(w(...t),v(...t),g(...t))},E=e=>{try{return{previewedCount:e.previewedCount,retainedEditorValue:e.retainedEditorValue}}catch(e){return d.k.persist.error({message:"[@Coding-skill-store] persist state limit error",error:e instanceof Error?e:Error(String(e))}),{}}},R=e=>{let{prefix:t,isEnableDebug:n,reduxDevToolsSnapshot:a,merge:s,partialize:l,storage:c}=e,u=(0,o.C1)({name:"coding-skill-store",prefix:t||"default",version:1.5,storage:c,partialize:null!=l?l:E,merge:s}),d=(0,r.tJ)((0,r.XR)(T),u);return n&&a?(0,i.Ue)()((0,r.mW)(d,{name:`${t}-chat-input-store`})):(0,i.Ue)()(d)},C=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{_useCodingSkillStore:r}=C.prototype;if(r)return r(...t);throw Error("useCodingSkillStore is not initialized")};function I(e){let{_useCodingSkillStore:t}=C.prototype||{};if(!t){let t=R({...e});Object.setPrototypeOf(C.prototype,t),Object.defineProperties(C,{...Object.getOwnPropertyDescriptors(t)}),C.prototype._useCodingSkillStore=t}a.Z.initialize()}},346760:function(e,t,n){"use strict";var r,i,o;n.d(t,{KR:function(){return l},P$:function(){return s},Wu:function(){return a}});let a=((r={})[r.None=0]="None",r[r.CodeGenerate=1]="CodeGenerate",r[r.CodeDebug=2]="CodeDebug",r[r.CodeKnowledge=3]="CodeKnowledge",r[r.CodeBase=4]="CodeBase",r[r.CodeArtifacts=5]="CodeArtifacts",r[r.DocLink=7]="DocLink",r),s=((i={}).Status="status",i.Artifact="artifact",i.ArtifactMeta="artifact_meta",i.ArtifactCodeFile="artifact_code_file",i),l=((o={}).DevMode="dev_mode",o.ChatMode="chat_mode",o.InstructionOpt="instruction_opt",o)},173249:function(e,t,n){"use strict";var r,i;n.d(t,{d:function(){return a},p:function(){return o}});let o=((r={}).FILE="FILE",r.DIR="DIR",r.REPO="REPO",r.DATA_ANALYSIS="DATA_ANALYSIS",r.IMAGE="IMAGE",r),a=((i={})[i.Start=1]="Start",i[i.Finish=2]="Finish",i[i.Updated=3]="Updated",i[i.Rollbacked=4]="Rollbacked",i)},344649:function(e,t,n){"use strict";var r=n(637224),i=n(913602),o=n(346760),a=n(800642);function s(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l{get(e){return o.KR.ChatMode}set(e,t){}initialize(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.KR.ChatMode}}class c{get(e){return i.Ie.getItem(e)||i.yQ.getItem(e)}set(e,t){i.yQ.setItem(e,t),i.Ie.setItem(e,t)}initialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.KR.DevMode,n=i.Ie.getItem(e),r=i.yQ.getItem(e);if(!n){let n=r||t;i.Ie.setItem(e,n),r||i.yQ.setItem(e,n)}}}let u=()=>(0,r.fH)()?new c:new l,d=new class{getDefaultMode(){return(0,r.fH)()?o.KR.DevMode:o.KR.ChatMode}isValidMode(e){return[o.KR.ChatMode,o.KR.DevMode].includes(e)}setMode(e){this.isValidMode(e)&&this.strategy.set(this.key,e)}getCurrentMode(){let e=this.strategy.get(this.key);return this.isValidMode(e)?e:null}initialize(){let e=this.getDefaultMode();this.strategy.initialize(this.key,e)}constructor(){s(this,"strategy",void 0),s(this,"key",a._),this.strategy=u()}};t.Z=d},953739:function(e,t,n){"use strict";n.d(t,{$A:function(){return p},NZ:function(){return u},a$:function(){return v},qR:function(){return d}});var r=n(148824),i=n(228535),o=n(414817),a=n(205379),s=n(182663),l=n(644367),c=n(173249);let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isFinished:n,isSourceShare:r,isLocal:i}=t,{offset:o,title:a="",intention:s,identifier:l,artifact_id:u,artifact_key:d,artifact_type:p,version:v,create_time:f,resource_id:m,resource_type:h,resource_version:_,status:g,code:y,is_entry:b}=null!=e?e:{};return{title:a,code:y,language:null==y?void 0:y.language,version:v,status:g,isStreaming:g===c.d.Start&&!n,isSourceShare:r,isLocal:i,offset:o,intention:s,identifier:l,isEntry:b,artifactId:u,artifactKey:d,createTime:f,resourceId:m,resourceType:h,resourceVersion:_,artifactType:p}},d=e=>{var t,n,s,c,d,p,v;let f=[];(null==e?void 0:null===(t=e.content_obj)||void 0===t?void 0:t.artifact_meta)&&(f=Array.isArray(null==e?void 0:null===(c=e.content_obj)||void 0===c?void 0:c.artifact_meta)?null==e?void 0:null===(d=e.content_obj)||void 0===d?void 0:d.artifact_meta:[null==e?void 0:null===(p=e.content_obj)||void 0===p?void 0:p.artifact_meta]),(null==e?void 0:null===(n=e.ext)||void 0===n?void 0:n.samantha_artifact_meta_list)&&(f=JSON.parse(null==e?void 0:null===(v=e.ext)||void 0===v?void 0:v.samantha_artifact_meta_list));let m=(0,r.zu)(e),h=(0,i.F3w)(e),_=(0,o.H)(e)||!!((null==e?void 0:e.conversation_id)&&(0,a.zU)(e.conversation_id));return Array.isArray(f)?null==f?void 0:null===(s=f.map)||void 0===s?void 0:s.call(f,e=>u(e,{isFinished:m,isSourceShare:h,isLocal:_})):(l.k.persist.error({eventName:"artifactMetaList is not array",error:Error(JSON.stringify(e))}),[])},p={startStreaming(e){let t=e.find(e=>{var t;return(null===(t=e.code)||void 0===t?void 0:t.node_id)==="root"});t&&(t.isStreaming=!0)},beforeCreateArtifactMeta(e){e.forEach(e=>{var t;(null===(t=e.code)||void 0===t?void 0:t.node_id)!=="root"&&(e.isStreaming=!1)})},endStreaming(e){e.forEach(e=>{e.isStreaming=!1,e.isFetched=!0})}};function v(e){return e.some(e=>(null==e?void 0:e.review_status)===s.VP.Reject)}},476697:function(e,t,n){"use strict";n.d(t,{z:function(){return U},i:function(){return Z}});var r=n(613993),i=n(231462),o=n(136389),a=n(869024),s=n(474227),l=n(683653),c=n(561200),u=n(120791),d=n(51679),p=n(636674),v=n(644367);let f=()=>({writingEditorValue:{data:[]},sendDisabled:!1,isWriteConfigInitd:!1,isWriteConfigLoading:!1,writeConfig:{},keepValueOnClear:!1,recentDocs:[],docAISpaceNodeId:null,docPageChatLayoutMode:u.y.Avatar}),m=(e,t)=>(0,o.Z)(f(),{updateWritingEditorValue:function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{keepOnClear:i=!1}=r,{writingEditorValue:o}=t();!(0,s.Z)(o,n)&&e((0,c.Uy)(e=>{e.writingEditorValue=n,e.keepValueOnClear=i}))},clearWritingEditorValue(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{skipOnceWhenKeep:n=!1}=t;e((0,c.Uy)(e=>{if(n&&e.keepValueOnClear){e.keepValueOnClear=!1;return}e.writingEditorValue={data:[]}}))},updateSendDisabledState:t=>{e((0,c.Uy)(e=>{e.sendDisabled=t}))},fetchWriteConfig:async()=>{if(!t().isWriteConfigLoading&&!t().isWriteConfigInitd)try{e((0,c.Uy)(e=>{e.isWriteConfigLoading=!0,e.isWriteConfigInitd=!1}));let{data:t}=await d.mH.SkillPack({skill_type:p.SkillType.WriteAssistant,condition:{}});e((0,c.Uy)(e=>{(null==t?void 0:t.write)?(e.isWriteConfigLoading=!1,e.isWriteConfigInitd=!0,e.writeConfig=t.write):e.isWriteConfigLoading=!1}))}catch(e){v.k.persist.warning({eventName:"init_write_config_error"})}},refreshRecentDocs:async()=>{try{let{data:t}=await d.mH.AISpacePagesSearch({limit:10}),{nodes:n}=null!=t?t:{};e({recentDocs:null!=n?n:[]})}catch(e){v.k.persist.warning({eventName:"refresh_recent_docs_error",error:e})}},getDocAISpaceNodeId:async()=>{let{docAISpaceNodeId:n}=t();if(n)return n;let{data:r}=await d.mH.AISpaceGetSystemDirectory(),{documents_node_id:i}=null!=r?r:{};if(!i)throw Error("Fail to get doc system directory");return e({docAISpaceNodeId:i}),i},updateDocPageChatLayoutMode:t=>{e({docPageChatLayoutMode:t})},closeCopilotChat:()=>{let{docPageChatLayoutMode:e,updateDocPageChatLayoutMode:n}=t();(0,l.Z)([u.y.Sidebar,u.y.Popover],e)&&n(u.y.Avatar)},showCopilotChat:()=>{let{docPageChatLayoutMode:e,updateDocPageChatLayoutMode:n}=t();(0,l.Z)([u.y.Avatar],e)&&n(u.y.Popover)}});var h=n(735393),_=n(93708),g=n(993047),y=n(453093),b=n(847758);let S=async e=>{var t;let{conversationId:n,artifactId:r}=e,{data:i}=await d.mH.SearchArtifact({conversation_id:n,artifact_id:r}),o=null!==(t=null==i?void 0:i.artifacts)&&void 0!==t?t:[];return(0,y.Z)(o,e=>e.version)},k=async e=>{let{docId:t,needHistories:n=!1}=e;try{let{data:e={}}=await d.Mz.AGWGetArtifactMetaByResource({resource_id:t,artifact_type:b.ArtifactType.Page,need_current_version:!0,need_histories:n}),{artifact_meta:r}=e;if(!r)throw Error("Artifact meta is empty");return r}catch(e){throw v.k.persist.error({message:"get_artifact_union_meta_by_doc_id_error",error:e}),e}};var w=n(520280);let T=()=>({artifactMap:{},blockArtifactMap:{},blockArtifactIdToConvId:{},docArtifactMetaMap:{},openedArtifactKey:null}),E=(e,t)=>(0,o.Z)(T(),{fetchArtifactList:async t=>{let{conversationId:n,artifactId:r,hasAbort:i,ifRetry:o}=t;try{let t=await (0,g.aG)({value:()=>S({conversationId:n,artifactId:r}),ifRetry:e=>!e.length||!!(null==o?void 0:o(e)),count:5});if(i)return;return e((0,c.Uy)(e=>{let{artifactMap:i}=e;i[n]||(i[n]={}),i[n][r]=t})),t}catch(e){throw v.k.persist.error({eventName:"search_artifact_error",error:e}),e}},async refreshArtifactList(){let{conversationId:e,canvasContent:n}=(0,_.GX)("chatViewCanvasStore"),r=null==n?void 0:n.artifactId;if(e&&r)return t().fetchArtifactList({conversationId:e,artifactId:r})},loadMobileArtifactList:async t=>{let{resourceId:n,blockId:r}=t;try{var i;let t=await d.mH.GetDeepResearchResource({resource_id:n}),{blocks:o=[]}=null!==(i=null==t?void 0:t.data)&&void 0!==i?i:{},a=(0,h.Hb)(o);e((0,c.Uy)(e=>{let{blockArtifactMap:t}=e;t||(t={}),t[r]={status:w.M.Succeed,data:a}}))}catch(e){throw v.k.persist.error({eventName:"deep_research_resource_error",error:e}),e}},updateBlockArtifact:t=>{let{type:n,blockId:r,value:i}=t;e((0,c.Uy)(e=>{let{blockArtifactMap:t}=e;t||(t={}),n===w.P.Status?t[r]={...t[r],status:i}:t[r]={...t[r],data:i}}))},updateBlockArtifactIdToConvId:t=>{let{blockId:n,convId:r,status:i}=t;e((0,c.Uy)(e=>{let{blockArtifactIdToConvId:t,blockArtifactMap:o}=e;t[n]||(t[n]={}),t[n]={convId:r,status:i};let a=null!=t?t:{};Object.keys(null!=o?o:{}).forEach(e=>{var t,n;(!a[e]||(null===(t=a[e])||void 0===t?void 0:t.convId)!==r&&(null===(n=a[e])||void 0===n?void 0:n.status))&&delete o[e]})}))},fetchDocArtifactMeta(n){let{docId:r,cache:i=!0}=n,{docArtifactMetaMap:o}=t(),a=o[r];if(a&&i)return Promise.resolve(a);let s=(0,g.aG)({value:()=>k({docId:r,needHistories:!0}),count:3,ifRetry:e=>{var t;return!(null===(t=e.version_list)||void 0===t?void 0:t.length)}}).then(t=>(e((0,c.Uy)(e=>{let{docArtifactMetaMap:n}=e;r in n||(n[r]={}),n[r]=t})),t)).catch(t=>{throw e((0,c.Uy)(e=>{let{docArtifactMetaMap:t}=e;delete t[r]})),t});return e((0,c.Uy)(e=>{let{docArtifactMetaMap:t}=e;r in t||(t[r]={}),t[r]=s})),s},resetDocArtifactCache(t){e((0,c.Uy)(e=>{let{docArtifactMetaMap:n}=e;delete n[t]}))},setOpenedArtifactKey(t){e((0,c.Uy)(e=>{e.openedArtifactKey=t}))}});var R=n(598117);let C=()=>({...R.O,isListLoading:!1,uploadFiles:[],fileStatusMap:{},snapshotUploadFiles:[]}),I=(e,t,n)=>{let r=(0,R.L)(e,t,n);return(0,o.Z)(C(),{...r,clearUploadFiles:()=>{e({uploadFiles:[]})},appendUploadFiles:t=>{e((0,c.Uy)(e=>{e.uploadFiles=[...e.uploadFiles,...t],e.snapshotUploadFiles=t}))},deleteUploadFileWithKey:t=>{e((0,c.Uy)(e=>{let n=e.uploadFiles.filter(e=>e.localKey!==t);e.uploadFiles=n}))},updateUploadFileInfoWithKey:(t,n)=>{e((0,c.Uy)(e=>{let r=e.uploadFiles.findIndex(e=>e.localKey===t);if(-1!==r){let t=e.uploadFiles[r];e.uploadFiles[r]={...t,...n}}}))}})},x=()=>({referenceAndQuoteMap:{}}),N=e=>(0,o.Z)(x(),{updateReferenceQuoteList(t,n,r){e((0,c.Uy)(e=>{e.referenceAndQuoteMap[t]=e.referenceAndQuoteMap[t]||{},e.referenceAndQuoteMap[t][n]=e.referenceAndQuoteMap[t][n]||{},(null==r?void 0:r.length)&&(e.referenceAndQuoteMap[t][n].referenceQuoteList=r)}))},updateReferenceList(t,n,r){e((0,c.Uy)(e=>{e.referenceAndQuoteMap[t]=e.referenceAndQuoteMap[t]||{},e.referenceAndQuoteMap[t][n]=e.referenceAndQuoteMap[t][n]||{},(null==r?void 0:r.length)&&(e.referenceAndQuoteMap[t][n].referenceList=r)}))},clearReferenceListAndQuote(t,n){e((0,c.Uy)(e=>{var r,i,o,a;(null===(i=e.referenceAndQuoteMap[t])||void 0===i?void 0:null===(r=i[n])||void 0===r?void 0:r.referenceList)&&(e.referenceAndQuoteMap[t][n].referenceList=[]),(null===(a=e.referenceAndQuoteMap[t])||void 0===a?void 0:null===(o=a[n])||void 0===o?void 0:o.referenceList)&&(e.referenceAndQuoteMap[t][n].referenceQuoteList=[])}))},updateReferenceAndQuote(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];e((0,c.Uy)(e=>{e.referenceAndQuoteMap[t]=e.referenceAndQuoteMap[t]||{},e.referenceAndQuoteMap[t][n]=e.referenceAndQuoteMap[t][n]||{},(null==i?void 0:i.length)&&(e.referenceAndQuoteMap[t][n].referenceQuoteList=i),(null==r?void 0:r.length)&&(e.referenceAndQuoteMap[t][n].referenceList=r)}))}}),M=()=>{let e=window.innerWidth,t=e-400;return{rightPartWidth:t,rightPartWidthRatio:t/e,showySectionInView:!0}},P=e=>(0,o.Z)(M(),{updateRightPartWidth:t=>{e(()=>({rightPartWidth:t,rightPartDisplayWidth:t}))},updateShowySectionInView:t=>{e(()=>({showySectionInView:t}))}}),A=()=>({selectionMap:{}}),$=(e,t)=>(0,o.Z)(A(),{addSelection:t=>{let{chatId:n,version:r,selectedContent:i,referenceContent:o,skillType:a,docAction:s,docCursorType:l}=t;e((0,c.Uy)(e=>{e.selectionMap[n]={chatId:n,version:r,selectedContent:i,referenceContent:o,skillType:a,docAction:s,docCursorType:l,timestamp:Date.now()}}))},getSelection:e=>{let{selectionMap:n}=t();return n[e]},removeSelection:t=>{e((0,c.Uy)(e=>{delete e.selectionMap[t]}))},clearAllSelections:()=>{e((0,c.Uy)(e=>{e.selectionMap={}}))}});var j=n(627426);let O=()=>({legacyDocIdMapping:{},openedDocId:null,docMetaMap:{}}),F=e=>(0,o.Z)(O(),{setLegacyDocIdMapping:(t,n)=>{e((0,c.Uy)(e=>{let{legacyDocIdMapping:r}=e;r[t]=n}))},setOpenedDocId:t=>{e((0,c.Uy)(e=>{e.openedDocId=t}))},updateDocMetaMap:(t,n)=>{e((0,c.Uy)(e=>{var r;e.docMetaMap[t]=(0,j.Z)({},n,null!==(r=e.docMetaMap[t])&&void 0!==r?r:{})}))}}),L=e=>{try{return{blockArtifactMap:e.blockArtifactMap}}catch(e){return v.k.persist.error({message:"[@write-skill-store] persist state limit error",error:e instanceof Error?e:Error(String(e))}),{}}},D=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.Z)(m(...t),E(...t),I(...t),N(...t),P(...t),$(...t),F(...t))},W=e=>{let{isEnableDebug:t,reduxDevToolsSnapshot:n,merge:o,partialize:s,storage:l}=e,c=(0,a.C1)({name:"writing-skill-store",prefix:"samantha-web",storage:l,partialize:null!=s?s:L,version:1.5,merge:o}),u=(0,r.tJ)((0,r.XR)(D),c);return t&&n?(0,i.Ue)()((0,r.mW)(u,{name:"samantha-web-writing-skill-store"})):(0,i.Ue)()(u)},Z=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{_useWriteStore:r}=Z.prototype;if(r)return r(...t);throw Error("useWriteStore is not initialized")};function U(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_useWriteStore:t}=Z.prototype||{};if(!t){let t=W({...e});Object.setPrototypeOf(Z.prototype,t),Object.defineProperties(Z,{...Object.getOwnPropertyDescriptors(t)}),Z.prototype._useWriteStore=t}}},520280:function(e,t,n){"use strict";var r,i;n.d(t,{M:function(){return o},P:function(){return a}});let o=((r={}).Processing="processing",r.Succeed="succeed",r.Failed="failed",r.Broken="broken",r),a=((i={}).Status="status",i.Artifact="artifact",i)},225741:function(e,t,n){"use strict";n.d(t,{A:function(){return d},P:function(){return p}});var r=n(344482),i=n(218523),o=n(234761),a=n(468494),s=n(969343);n(429996);var l=n(339512),c=n(627394),u=(0,l.G)((0,c.jsx)(e=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"currentColor",viewBox:"0 0 22 22",...e,children:(0,c.jsx)("path",{fillRule:"evenodd",d:"M5.5 11a1.833 1.833 0 1 1-3.667 0A1.833 1.833 0 0 1 5.5 11m7.333 0a1.833 1.833 0 1 1-3.666 0 1.833 1.833 0 0 1 3.666 0m5.5 1.834a1.833 1.833 0 1 0 0-3.667 1.833 1.833 0 0 0 0 3.667",clipRule:"evenodd"})}),{}));let d=e=>{let{className:t,visible:n=!0,showPicTemBtn:r=!1,chatId:i,icon:o,theme:a="borderless",enterMethod:l,...d}=e,{wrapperToggle:v}=p(i,r);return n?(0,c.jsx)(s.P,{...d,theme:a,className:t,icon:o||(0,c.jsx)(u,{}),onClick:()=>v({enter_from:l||"click_chat_setting"})}):null},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[n,s,l,c,u,d]=(0,i.R)(e=>[e.activeKey,e.setActiveKey,e.setStack,e.setLastShowStatus,e.changeMode,e.mode],r.X),p=()=>(0,o.jo)(a.useFeedStore.getState(),e);return{wrapperToggle:function(){let{enter_from:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=p();"setting"===d&&n===e?s(void 0):(u("setting"),s(e),l(["/bot-setting"],{enter_from:r}),t&&o&&(null==o?void 0:o.bot_id)&&c(null==o?void 0:o.bot_id,{status:i.KA.CLOSE}))},toggle:function(){let{enter_from:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=p();n===e?(s(void 0),u("")):(l(["/bot-setting"],{enter_from:r}),u("setting"),s(e),t&&o&&(null==o?void 0:o.bot_id)&&c(null==o?void 0:o.bot_id,{status:i.KA.CLOSE}))},close(){s(void 0)},openCharacterSetting:()=>{l(["/bot-setting","/character-setting"]),s(e)},visible:e&&n===e}}},604963:function(e,t,n){"use strict";var r,i;n.d(t,{VX:function(){return l},f3:function(){return s},fU:function(){return c},nj:function(){return a},yy:function(){return o}});let o=((r={}).Reviewing="reviewing",r.Ban="ban",r.Delete="delete",r.Private="private",r.Rollback="rollback",r),a=((i={}).Discover="discover",i.Profile="profile",i),s="/chat/bot/create",l="/chat/bot/discover",c="/chat/"},685714:function(e,t,n){"use strict";n.d(t,{NK:function(){return N}});var r=n(529496),i=n(378413),o=n(429996),a=n(669160),s=n.n(a),l=n(499050);let c=e=>{var t;return(0,l.Qt)(null===(t=e||location)||void 0===t?void 0:t.search).channel};var u=n(969893),d=n(803515),p=n(67864),v=n(640981),f=n(729813),m=n(944406),h=n(432626),_=n(993047),g=n(797016),y=n(644367),b=n(456402),S=n(89253),k=n(329041),w=n(747915),T=n(627394);let E=(0,o.lazy)(()=>(0,_.AD)({fn:()=>Promise.all([n.e("6973"),n.e("45372"),n.e("63509")]).then(n.bind(n,132940))})),R={current:w.j.OTHER},C=e=>{let{loginModalStatus:t}=e;if(t.landing){var n;let e="redirectQuery"in t.landing&&(null===(n=t.landing.redirectQuery)||void 0===n?void 0:n.toString())||"";switch(t.landing.type){case S.a.ADD_BOT:return d.f3;case S.a.DISCOVER:return d.VX;case S.a.CHAT:return t.landing.botId?`${d.fU}${t.landing.botId}?type=${p.z.Bot}`:d.fU;case S.a.AI_SPACE_SHARE:return"object"==typeof window?`${window.location.pathname}${e?`?${e}`:""}`:d.fU;default:return"object"==typeof window&&"object"==typeof window.location&&"string"==typeof window.location.pathname?window.location.pathname:d.fU}}return(0,b.$C)()||d.fU},I=e=>{let{loginModalStatus:t}=e,n=(0,b.W8)(),r=R.current,i=c(),o=r===w.j.OTHER?n?{login_source:n}:{}:{login_source:r};if(t.landing){let e=t.landing.type===S.a.CHAT?{type:t.landing.botId?String(p.z.Bot):String(p.z.Conversation),message:t.landing.message}:{};return{...o,...t.landing.type===S.a.CHAT_CAN_USE?{}:{guest_landing:"1"},...e,...i?{channel:i}:{}}}return{...o,from_login:"1",...i?{channel:i}:{}}},x=!1,N=function(){let{navigate:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null!=e?e:(0,u.K)(),n={"--semi-border-radius-large":"24px"},a=(0,h.dj)(),l=e=>{let{onCancel:l,onSuccess:c,maskClosable:u,...d}=e;if(x)return y.k.persist.warning({eventName:"login_modal_open_forbidden",meta:{href:(0,r.C)(window.location.href,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb*x-$*1wa%0xWjFaR%01ZW1OdFR-WmhSemwyW$ROTmRt%ll%bXhN$jNoMldqSnNk$Xh-T$ha-$IwWnp%REpzZFZwSFZq%k1ibEo2Wl$kR2$Wb3pWbm89"}),type:"open_raw",source:d.trackInfo.source}}),()=>{};x=!0;let p=()=>{y.k.persist.info({eventName:"login_modal_cancel",meta:{href:(0,r.C)(window.location.href,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb*x-$*1wa%0xWjFaR%01ZW1OdFR-WmhSemwyW$ROTmRt%ll%bXhN$jNoMldqSnNk$Xh-T$ha-$IwWnp%REpzZFZwSFZq%k1ibEo2Wl$kR2$Wb3pWbm89"}),source:d.trackInfo.source}}),h(),x=!1,null==l||l()};y.k.persist.info({eventName:"login_modal_open",meta:{href:(0,r.C)(window.location.href,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb*x-$*1wa%0xWjFaR%01ZW1OdFR-WmhSemwyW$ROTmRt%ll%bXhN$jNoMldqSnNk$Xh-T$ha-$IwWnp%REpzZFZwSFZq%k1ibEo2Wl$kR2$Wb3pWbm89"}),source:d.trackInfo.source}});let{destroy:h}=g.Z.confirm({className:s()(k.Z["login-modal"],"login_modal"),zIndex:1020,style:n,header:null,icon:null,title:null,footer:null,centered:!0,keepDOM:!0,lazyRender:!0,onCancel:p,width:"auto",maskClosable:void 0===u||u,content:(0,T.jsx)(o.Suspense,{fallback:(0,T.jsx)(T.Fragment,{}),children:(0,T.jsx)(i.a,{i18n:a,children:(0,T.jsx)(E,{...d,onSuccess:e=>((0,m.NV)(null==e?void 0:e.user_id_str),x=!1,(0,v.J)(),f.v.emit("chat.service.resetAll"),h(),y.k.persist.info({eventName:"login_modal_success",meta:{href:(0,r.C)(window.location.href,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb*x-$*1wa%0xWjFaR%01ZW1OdFR-WmhSemwyW$ROTmRt%ll%bXhN$jNoMldqSnNk$Xh-T$ha-$IwWnp%REpzZFZwSFZq%k1ibEo2Wl$kR2$Wb3pWbm89"}),source:d.trackInfo.source}}),null==c?void 0:c()),onCancel:p,navigate:t})})})});return h};return{openRawLoginModal:l,openLoginModal:e=>{let{landing:t,trackInfo:n,onCancel:i,...o}=e;if(x)return y.k.persist.warning({eventName:"login_modal_open_forbidden",meta:{landing:t,href:(0,r.C)(window.location.href,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb*x-$*1wa%0xWjFaR%01ZW1OdFR-WmhSemwyW$ROTmRt%ll%bXhN$jNoMldqSnNk$Xh-T$ha-$IwWnp%REpzZFZwSFZq%k1ibEo2Wl$kR2$Wb3pWbm89"}),source:n.source}}),()=>{};let a={landing:t,trackInfo:{...n,fromPage:R.current},onCancel:i},s=C({loginModalStatus:a}),c=I({loginModalStatus:a});return l({trackInfo:a.trackInfo,onCancel:i,loginNavigateQuery:c,loginNavigateRoute:s,...o})},setClickArea:e=>{R.current=e}}}},747915:function(e,t,n){"use strict";var r,i;n.d(t,{j:function(){return a},x:function(){return o}});let o=((r={}).DISCOVER="click_bot_list_discover_cell",r.DISCOVER_SEARCH="click_bot_list_discover_search_cell",r.CHAT_LIST="click_chat_list_cell",r.LOGIN_BTN="click_login_button",r.SIGN_IN_BTN="sign_in",r.SIGN_UP_BTN="sign_up",r.INPUT_SEND_MSG="send_message",r.INPUT_PLUS_BTN="click_keyboard_plus",r.ADD_BOT="click_create_bot",r.DISCOVER_BTN="click_bot_list_discover_btn",r.NEW_CHAT="click_new_chat",r.UG="ug",r.SEARCH_LANDING="click_search_landing_button",r.AFTER_CHAT_OPEN="after_chat_open",r.CLIENT_RIGHT_ENTRANCE="right_entrance",r.CLIENT_SEARCH_LOGIN="search_login",r.CLIENT_SETTING_CLICK_LOGIN="setting_click_login",r.CLIENT_HOME_CLICK_LOGIN="client_home_click_login",r.CLIENT_NEW_TAB_CLICK_LOGIN="client_new_tab_click_login",r.OTHER="other",r.UPLOAD="unlog_click_upload",r.SKILL="unlog_click_skills",r.VOICE="unlog_click_voice",r.NEW_THREAD="unlog_click_new_chat",r.DISCOVER_BOT="unlog_click_discover_bot",r.CREATE_BOT="unlog_click_create_bot",r.ADD_BOT_TO_CHAT="unlog_click_add_bot_to_chat",r.BOT_ONBOARDING="unlog_click_bot_onboarding",r.THREAD_SHARE="unlog_click_thread_share",r.SEO_AUTO_MESSAGE="seo_auto_message",r.GUIDANCE_GROUP="guidance_group",r.OPREATE_NEW_TREM="student_stimulation",r.DEEP_SEARCH="deep_search",r.IMAGE_EDIT_BUTTON="image_edit_button",r.PDF_UPLOAD_BUTTON="upload",r.VIDEO_APPLY="video_test",r.MARSCODE="marscode",r.MARSCODE_ARTIFACTS="marscode_artifacts",r.AI_SPACE_SAVE="ai_space_save",r.SHARE_PAGE="share_page",r.PDF_CANVAS_DOWNLOAD="pdf_canvas_download",r.PDF_CANVAS_TRANSLATE="pdf_canvas_translate",r.COZE_AUTHORIZE="coze_authorize",r.SEARCH_SEND_MESSAGE="search_send_message",r.SEARCH_SUGGESTED_CONTENT="search_suggested_content",r.WRITING_SEND_MESSAGE="writing_send_message",r.IMAGE_SEND_MESSAGE="image_send_message",r.PDF_SEND_MESSAGE="pdf_send_message",r.PDF_SUGGESTED_CONTENT="pdf_suggested_content",r.PPT_SEND_MESSAGE="ppt_send_message",r.VIDEO_SEND_MESSAGE="video_send_message",r.DOUBAO_REGION_BAN="doubao_region_ban",r.SHARE_LANDING_PAGE="share_landing_page",r.DOC_SHARE_PAGE="doc_share_page",r.DOC_INVITE_PAGE="doc_invite_page",r.AUDIO_CAPTURE="audio_capture",r.PLAY_AI_PODCAST="play_ai_podcast",r.DOC_OPEN_PAGE="doc_open_page",r.CREDIT_HELP_LOGIN="credit_help_login",r.SUPER_TASK_APPLY_PAGE="super_task_apply_page",r),a=((i={}).CHAT_LIST="chat",i.DISCOVER="bot_list_discover",i.DISCOVER_SEARCH="bot_list_discover_search_unlog",i.OTHER="other",i)},89253:function(e,t,n){"use strict";var r;n.d(t,{a:function(){return i}});let i=((r={}).ADD_BOT="ADD_BOT",r.DISCOVER="DISCOVER",r.CHAT="CHAT",r.CHAT_CAN_USE="CHAT_CAN_USE",r.AI_SPACE_SHARE="AI_SPACE_SHARE",r.DEFAULT="default",r)},263341:function(e,t,n){"use strict";n.d(t,{T:function(){return l}});var r=n(790088),i=n(598451),o=n(399210),a=n(617317),s=n(51679);let l=()=>{o.v.instance().loadSource(a.d.serverAB,!0),window[r.y.GuestLayoutMode]&&(window[r.y.GuestLayoutMode]=s.mH.GetSetting({ab_param:{ab_request:i.q}}))}},491322:function(e,t,n){"use strict";n.d(t,{M:function(){return o}});var r=n(499050),i=n(644367);function o(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){let{extId:t}=(0,r.Qt)(location.search),n={...e,body:{...null==e?void 0:e.body,originContext:"web"}};if(t)try{var o,a;return null===(a=chrome)||void 0===a?void 0:null===(o=a.runtime)||void 0===o?void 0:o.sendMessage(t,e)}catch(e){i.k.persist.error({message:"[ext-helper] sendMessage via chrome.runtime.sendMessage error",error:e})}try{window.postMessage(n,location.origin)}catch(e){i.k.persist.error({message:"[ext-helper] sendMessage error, retry via window.postMessage",error:e})}}({name:"update-auth-info",body:{isLogin:e}})}},637506:function(e,t,n){"use strict";n.d(t,{C:function(){return s},d:function(){return c}});var r=n(790088),i=n(55706),o=n(692800),a=n(644367);let s=async()=>{if(!window.accountInfoPromise)return(0,i.N)().passportApi.checkLogin();try{let e=await window.accountInfoPromise;if(delete window.accountInfoPromise,"success"===e.message)return a.k.persist.log({eventName:"check_login_preload_success"}),e.data;throw e.data}catch(e){if(13!==e.error_code)return a.k.persist.log({eventName:"check_login_preload_fail",meta:{code:e.error_code}}),(0,i.N)().passportApi.checkLogin();throw o.W7.from(e)}},l="object"==typeof window&&"object"==typeof window[r.y.Launch]?window[r.y.Launch]:void 0,c=l?async()=>{let{data:e}=await l||{},{login:t}=e||{};return(null==t?void 0:t.order)||[]}:void 0},951452:function(e,t,n){"use strict";n.d(t,{Is:function(){return c},ty:function(){return d},sN:function(){return u}});var r=n(98490),i=n(293067);let o=()=>({blockDataMap:{},blockDataMapMetaInfo:{}}),a=()=>({...o()});var s=n(130179);let l=()=>(0,i.Ue)()((0,r.tJ)(a,(0,s.u)())),c=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.prototype._useSuperTaskBlockStore||u(),c.prototype._useSuperTaskBlockStore(...t)};function u(){let{_useSuperTaskBlockStore:e}=c.prototype||{};if(!e){let e=l();Object.setPrototypeOf(c.prototype,e),Object.defineProperties(c,{...Object.getOwnPropertyDescriptors(e)}),c.prototype._useSuperTaskBlockStore=e}}let d=function(){return c.prototype._useSuperTaskBlockStore||u(),c.prototype._useSuperTaskBlockStore}},130179:function(e,t,n){"use strict";let r;n.d(t,{t:function(){return s},u:function(){return l}});var i=n(869024),o=n(644367);let a=e=>{try{return{blockDataMap:e.blockDataMap||{},blockDataMapMetaInfo:e.blockDataMapMetaInfo||{}}}catch(e){return o.k.persist.error({message:"[@super-task-block-store] persist state limit error",error:e instanceof Error?e:Error(String(e))}),{}}},s=async()=>{let{storage:e,name:t}=l(),n=await (null==e?void 0:e.getItem(t));return null==n?void 0:n.state},l=()=>{if(!r){let e=(0,i.hn)();r=(0,i.C1)({name:"super-task-block-store",prefix:"samantha-web",partialize:a,version:1.5,storage:e})}return r}},598117:function(e,t,n){"use strict";n.d(t,{L:function(){return a},O:function(){return o}});var r=n(561200),i=n(57005);let o={rootId:"0",systemNodeIds:[],nodeListMap:{},nodeListStatusMap:{},nodeInfoMap:{},currentPathStack:[],selectedNodeIds:[],selectedNodes:[],disbaleNodeInfoMap:{},mediaTransformStatus:{},sortStatus:{sortOrder:i.cj.Desc,sortType:i.$Q.Default},sortConfig:{}},a=e=>({...o,updateRootId:t=>{e(()=>({rootId:t}))},updateSystemNodeIds:t=>{e(()=>({systemNodeIds:t}))},setNodeListMap:(t,n)=>{e((0,r.Uy)(e=>{e.nodeListMap[t]=n}))},deleteNodeListMap:t=>{e((0,r.Uy)(e=>{delete e.nodeListMap[t]}))},clearNodeListMap:()=>{e(()=>({nodeListMap:{}}))},setNodeListStatusMap:(t,n)=>{e((0,r.Uy)(e=>{e.nodeListStatusMap[t]=n}))},deleteNodeListStatusMap:t=>{e((0,r.Uy)(e=>{delete e.nodeListStatusMap[t]}))},clearNodeListStatusMap:()=>{e(()=>({nodeListStatusMap:{}}))},setNodeInfoMap:(t,n)=>{e((0,r.Uy)(e=>{e.nodeInfoMap[t]=n}))},deleteNodeInfoMap:t=>{e((0,r.Uy)(e=>{delete e.nodeInfoMap[t]}))},clearNodeInfoMap:()=>{e(()=>({nodeInfoMap:{}}))},pushCurrentPathStack:t=>{e((0,r.Uy)(e=>{e.currentPathStack.push(t)}))},popCurrentPathStack:()=>{let t;return e((0,r.Uy)(e=>{t=e.currentPathStack.pop()})),t},updateCurrentPathStack:t=>{e((0,r.Uy)(e=>{e.currentPathStack=t}))},updateSelectedNodeIds:t=>{e((0,r.Uy)(e=>{e.selectedNodeIds=t;let n=[];t.forEach(t=>{let r=e.nodeInfoMap[t];r&&n.push(r)}),e.selectedNodes=n}))},deleteNodes:(t,n)=>{e((0,r.Uy)(e=>{let r=e.nodeListMap[t],i=null==r?void 0:r.filter(e=>!n.includes(e));e.nodeListMap[t]=i,n.forEach(t=>{delete e.nodeInfoMap[t]})}))},renameNode:(t,n)=>{e((0,r.Uy)(e=>{let r=e.nodeInfoMap[t];r&&(r.name=n,r.updateTime=String(new Date().getTime()))}))},updateGuestCanCreateThread:t=>{e((0,r.Uy)(e=>{e.guestCanCreateThread=t}))},updateGuestCanSendMessage:t=>{e((0,r.Uy)(e=>{e.guestCanSendMessage=t}))},disableNode:t=>{e((0,r.Uy)(e=>{(Array.isArray(t)?t:[t]).forEach(t=>{e.disbaleNodeInfoMap[t]=!0})}))},batchUpdateMediaTransformStatus:t=>{(null==t?void 0:t.length)&&e((0,r.Uy)(e=>{e.mediaTransformStatus={...e.mediaTransformStatus},t.forEach(t=>{e.mediaTransformStatus[t.nodeId]=t.status})}))},batchUpdateNodeAISkillStatus:t=>{(null==t?void 0:t.length)&&e((0,r.Uy)(e=>{t.forEach(t=>{let n=e.nodeInfoMap[t.nodeId];n&&(e.nodeInfoMap[t.nodeId]={...n,content:{...n.content,aiSkillStatus:t.aiSkillStatus}})})}))},clearAllNodeList:()=>{e(()=>({nodeListMap:{}}))}})},425207:function(e,t,n){"use strict";n.d(t,{Os:function(){return f},r5:function(){return v}});var r=n(429996),i=n(477710),o=n(156217),a=n(93708),s=n(234761),l=n(468494),c=n(886421),u=n(46499),d=n(17135);let p=()=>{let e=(0,o.GL)("chatViewService");return{onOpenCodeFile:(t,n)=>{let{messageId:r,conversationId:o,fileKey:a,attachments:s,isCodeFile:l,chatId:c,teaCtx:u}=t;e.openCanvasPanel({messageId:r,conversationId:o,canvasLayoutState:i.P.CANVAS_ONLY,fileKey:a,attachments:s,isCodeFile:l,chatId:c,teaCtx:u},n)}}};n(627394);let v=(0,r.createContext)(null),f=function(){let{enableOpenCanvas:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.sQ)("chatViewCoreStore",e=>{var t;return null===(t=e.currentChatViewConfig)||void 0===t?void 0:t.chatId}),{onOpenCodeFile:n}=p(),f=(0,r.useContext)(v),m=(0,o.GL)("chatViewService"),h=e=>{let n=(0,s.jo)(l.useFeedStore.getState(),t);(0,d.trackEvent)("copilot_button_click",{bot_id:(0,c.SR)(t),conversation_type:null==n?void 0:n.conversation_type,conversation_id:t,collection_id:null==e?void 0:e.collectionId,message_id:null==e?void 0:e.messageId,entrance_type:null==e?void 0:e.entranceType})};return{onAfterOpenFile:h,onOpenFileByKey:(n,r,o,a,s)=>{if(null==f?void 0:f.onOpenFileByKey)return f.onOpenFileByKey(n,r,o,a,s);let{pdf:l={},messageId:c,openFrom:u,fileName:d}=o||{};if("video"===r||"audio"===r)return m.openCanvasPanel({conversationId:t||"",messageId:c||"",mediaInfo:{type:r,title:d,vid:n},canvasLayoutState:i.P.CANVAS_ONLY},s),!1;if("PDF"===r&&e){let{anchorPage:e,highlightArea:r,assetList:o,realFileKey:d,fileName:p}=l;return m.openCanvasPanel({conversationId:t||"",messageId:c||"",readContent:{pdfId:n,realFileKey:null!=d?d:n,pdfName:p,assetList:o,pdfAnchorConfig:{page:e,areas:r},teaCtx:a,openFrom:u},canvasLayoutState:i.P.CANVAS_ONLY},s),h(a),!1}},onOpenFileByLink:(n,r,o,a)=>{if(null==f?void 0:f.onOpenFileByLink)return f.onOpenFileByLink(n,r,o,a);let{attchmentType:s,pdf:l={},messageId:c,openFrom:d}=r||{};if("pdf"===s&&e){let{anchorPage:e,highlightArea:r,assetList:s,realFileKey:p}=l;return n=(0,u.P)(n),m.openCanvasPanel({conversationId:t||"",messageId:c||"",readContent:{pdfUrl:n,pdfName:n,realFileKey:null!=p?p:n,assetList:s,pdfAnchorConfig:{page:e,areas:r},teaCtx:o,openFrom:d},canvasLayoutState:i.P.CANVAS_ONLY},a),h(o),!1}},onOpenCodeFile:(t,r)=>{e&&n(t,r)}}}},307371:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var r=n(529496),i=n(429996),o=n(669160),a=n.n(o),s={icon:"icon-X2vZca"},l=n(627394);let c=e=>{let{avatarURL:t,className:n,size:o=18}=e,c=Math.max(o,8),[u,d]=(0,i.useState)(0),[p,v]=(0,i.useState)(!1),f=async()=>{u<2?(await new Promise(e=>setTimeout(e,200)),d(e=>e+1)):v(!0)};return t&&!p?(0,l.jsx)("img",{src:(0,r.C)(t,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb*x0-kRaT$dH%jJZMjEwZW1OSFJtc*F$emw2WTIxTmRsa3lPWFJq%npsM$ds-zFNR041T1ROa%0wcHlZek5D-%Zre$Z-%lpXRnBvWk$kR2$$d3liSFZh%jFZMFRHN$Nlb$ZI%m5s-%0xWj-"}),alt:"icon",className:a()(s.icon,n),style:{width:c,height:c},onError:f},u):(0,l.jsx)("img",{src:(0,r.C)("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAilBMVEUAAADE2v/C2v/D2v/D3//D2//D2v/D2v/D2//D2//D2//E2v/D2v/E3P/F2v/D2v/F2v/C2//C2f/E2v+/2v/l7v8AV/+syP/D2v85ff/U5P/i7P/H3P/L3//d6f/O4f/X5f/Z6P8OYf+ArP8dav9zov9Hhv+60v9yo/+ev/8rdP+Ptf9kmf9Wj/8VZRHBAAAAFXRSTlMA32BwECC/r5BA75/PXzDvYFCgzzA49ToPAAADnUlEQVRo3sWa23qiMBRGE+SstYeZwC8JIVir0zm8/+sNylA+i8EEyHRdeeGX5d472WASYoafrOJoQ1M0pDSM4lXik6XwvTVFg6iq4kJVlmjYrL1ggdFXIYBK1ZxdwaWqAIQzHUkIlIVkGqQqgeh5+o+nQMHZKLwQoB6ZwipFKZkBdTlFkdB2eCOktSKIICSzoBZYW5T7IUXBLCnMg/BjlJxZwwVi3yg9tP/51kEYpGmbQrKJSEG3d9MPwdlkuMDDncnfpn+6ocRqfPyKs1nwaszwgIrNptJnadvnZ16Wtrr5qamvdaUfb85Wvxt/vgHUJ0NiSLYQEjEZ4KFgi1Hg4UYB2IKUgzKswZcUcESOEtQnKbkSUMEWRtDrAOqlBfKqZdCSLU756PcBQI7Eml+jzEMwCED92Gef2b0bhvBRhWdtBcQhu8UPwxC6iRQJq/EbXo0MCP8tYu0a+J1p2CuzteC3JdYu4ksAb/kV7wfjEPi/Moe6Ep+yht+Dup/L/seszGGbIV28+VmQs8/szjOJmefIg3QlkHi69FHmSsCwbgSbyp2gooT4UO4ECj5JIN0JaiRkBe5C0K+EGOy+4HTcnXn9EOx3LcdfYtSAmETlfYE6dF2uE/TsRzufiEhoIMg/OnUrMO+t1TdCK4MI9l0XHQoa8tF5mhYGNRBtDd4GNWjMoxUvHgkKNmMWiZ9Zg9ILMFPA3rOGkyNB/50vFaRuBY+EVi4FFSUbE4F6fTuTWwvKkETCQNC1il/WgojEsGgVR1sBYqN2rTrBH61A364T1PdT9NbmaCcsBRKJ5SPTUqDgE0Ird4KmWxPyAncCrNsXL1cCCa8R+ChcCRSC9uXXhaB/+dWsBJXnr5enZP6Z8zPmZ/ux/45iQ/g5Q7ociX1mxeF0q1cH5EIINuCYWXK8+c7SkkC6ENR4HvkbezpkVuzFyN9YsoK8UWQrlGYRtPhpyeaiC6APYWFqeP9zO4cky29IeeSKaOkttTW5Jli2zoIGjrc1vf+/MUt8ulQZuBhuLbdlWGpzXHeUs4VYZnv/O9HgLXNA8eT+iGXMIFweEjV4c4+5nsgdtlTI6fM//f71R42Xw1LBJ6U/9okZ3oQgCqRPxJjgBaK2OyZFFBAbPNsj94Q0WCtqw+HTbvJbK8T9aw8AXflkIs8RIJQ2VbIogTAhcwi89uqJ/BQJr9urJ92Pn+d42aBBlN3lmUqgga49g9Ftrv+E3fWfjcX1n78uW2FDI964+AAAAABJRU5ErkJggg==",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb*x0-kRaT$dH%jJZMjEwZW1OSFJtc*F$emw2WTIxTmRsa3lPWFJq%npsM$ds-zFNR041T1ROa%0wcHlZek5D-%Zre$Z-%lpXRnBvWk$kR2$$d3liSFZh%jFZMFRHN$Nlb$ZI%m5s-%0xWj-"}),className:a()(s.icon,n),style:{width:c,height:c}})}},454344:function(e,t,n){"use strict";n.d(t,{w:function(){return l}});var r=n(382203),i=n(51679),o=n(698570),a=n(551450),s=n(644367);let l=e=>{let{t}=e,{runAsync:n,loading:l}=(0,o.Z)(async(e,n)=>{try{return await i.YD.AGWWorkspaceHandleInvitation({invitation_id:e,action:n?r.W.Accepted:r.W.Declined}),!0}catch(e){var o;return s.k.persist.error({eventName:"workspace_handle_invitation_error",error:e}),a.pJ.error((null===(o=e.errorOption)||void 0===o?void 0:o.message)||(n?t("enterprise_toast_inviteAcceptFail"):t("enterprise_toast_inviteDeclineFail"))),!1}},{manual:!0,debounceWait:1e3,debounceLeading:!0,debounceTrailing:!1});return{handleInvitation:n,handleInvitationLoading:l}}},226403:function(e,t,n){"use strict";n.d(t,{o:function(){return g}});var r=n(344482),i=n(432626),o=n(55706),a=n(123257),s=n(981222),l=n(698570),c=n(913602),u=n(550606),d=n(551450),p=n(644367),v=n(14345);let f=()=>Promise.resolve({canSwitch:!0});var m=n(216612),h=n(143930),_=n(627394);let g=()=>{let e=(0,i.g1)(),{currentWorkspace:t}=(0,h.z)(e=>({workspaceList:e.workspaceList,currentWorkspace:e.currentWorkspace}),r.X),{runAsync:n,loading:g}=(0,l.Z)(async function(n){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if((null==t?void 0:t.workspace_id)===n.workspace_id)return;let{canSwitch:i}=await f();if(!i){p.k.persist.warning({eventName:"switch_workspace_blocked_by_app"});return}if(n.workspace_scoped_sec_uid){let t=d.pJ.info({content:e("enterprise_changeSpace_toast_changing"),duration:5,icon:(0,_.jsx)(u.Z,{size:"middle"})});p.k.persist.info({eventName:"switch_workspace_start"});try{await (0,o.N)().passportApi.switchAccount({sec_user_id:n.workspace_scoped_sec_uid,onVerifyPhone:()=>d.pJ.close(t)}).then(e=>(c.yQ.setItem("flow_tea_user_id",String(n.workspace_scoped_uid)),(0,a.Or)({type:e.passport_enterprise_user_type}),e)),(0,s.W1)(),await (0,v.G)(1e3),p.k.persist.info({eventName:"switch_workspace",meta:{success:"1"}}),r&&window.location.reload()}catch(e){d.pJ.close(t),p.k.persist.error({eventName:"switch_workspace",error:e,meta:{success:"0",targetWorkspaceId:n.workspace_id}})}}},{manual:!0,debounceWait:1e3,debounceLeading:!0,debounceTrailing:!1}),{runAsync:y,loading:b}=(0,l.Z)(async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{let r=await (0,m.r)(e);if(r)await n(r,t);else throw Error("Workspace not found")}catch(e){p.k.persist.error({eventName:"switch_workspace_by_workspace_id_failed",error:e})}},{manual:!0,debounceWait:1e3,debounceLeading:!0,debounceTrailing:!1});return{switchWorkspace:n,switchLoading:g,switchWorkspaceByWorkspaceId:y,switchByWorkspaceIdLoading:b}}},627333:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(698570),i=n(760441);let o=()=>{let{run:e}=(0,r.Z)(async e=>{await (0,i.r)({onlyList:e,throwError:!1})},{manual:!0});return{refreshWorkspaceList:e}}},143930:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var r=n(613993),i=n(231462),o=n(561200);let a={initWorkspaceStatus:"uninit",workspaceList:void 0,workspaceInvitationList:void 0,currentWorkspace:void 0,hiddenInvitations:void 0,visibleInvitations:void 0,hasInitInvitationNotice:!1},s=(0,i.Ue)()((0,r.XR)(e=>({...a,setInitWorkspaceStatus:t=>{e((0,o.Uy)(e=>{e.initWorkspaceStatus=t}))},setWorkspaceList:t=>{e((0,o.Uy)(e=>{e.workspaceList=t}))},setWorkspaceInvitationList:t=>{e((0,o.Uy)(e=>{e.workspaceInvitationList=t}))},setCurrentWorkspace:t=>{e((0,o.Uy)(e=>{e.currentWorkspace=t}))},setInvitations:t=>{let{hiddenInvitations:n,visibleInvitations:r}=t;e((0,o.Uy)(e=>{e.hiddenInvitations=n,e.visibleInvitations=r}))},setHasInitInvitationNotice:t=>{e((0,o.Uy)(e=>{e.hasInitInvitationNotice=t}))}})))},657617:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});let r=!0},216612:function(e,t,n){"use strict";n.d(t,{c:function(){return o},r:function(){return a}});var r=n(121557),i=n(51679);let o=e=>(null==e?void 0:e.workspace_type)===r.E.TeamWorkspace,a=async e=>{let{data:t}=await i.YD.AGWGetWorkspaces();if(null==t?void 0:t.workspaces)return t.workspaces.find(t=>String(t.workspace_id)===e);throw Error("Empty workspace list")}},980408:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});let r={getItem:e=>window.localStorage.getItem(e),setItem(e,t){window.localStorage.setItem(e,t)}}},14345:function(e,t,n){"use strict";n.d(t,{G:function(){return r}});let r=e=>new Promise(t=>{setTimeout(t,e)})},760441:function(e,t,n){"use strict";n.d(t,{r:function(){return l}});var r=n(121557),i=n(51679),o=n(123257),a=n(644367),s=n(143930);let l=async e=>{let{onlyList:t,throwError:n}=e;try{let{data:e}=await i.YD.AGWGetWorkspaces();if(null==e?void 0:e.workspaces){var l;s.z.getState().setWorkspaceList(null==e?void 0:e.workspaces);let t=null===(l=e.workspaces.find(e=>e.workspace_type===r.E.PersonalWorkspace))||void 0===l?void 0:l.workspace_scoped_uid;t&&(0,o.Or)({cuid:String(t)}),a.k.persist.info({eventName:"get_workspace_list",meta:{success:"1",workspace_count:null==e?void 0:e.workspaces.length}})}else throw Error("empty workspace list");!t&&(null==e?void 0:e.pending_workspaces)&&s.z.getState().setWorkspaceInvitationList(null==e?void 0:e.pending_workspaces)}catch(e){if(a.k.persist.error({eventName:"get_workspace_list",error:e,meta:{success:"0"}}),n)throw e}}},758635:function(e,t,n){"use strict";n.r(t),n.d(t,{createBotStore:function(){return k},initBotStore:function(){return E},getDefaultBotState:function(){return g},useBotInfo:function(){return R},useBotStore:function(){return w},getRequestIdByBotId:function(){return C},useGuestBotStore:function(){return T}});var r=n(344482),i=n(613993),o=n(231462),a=n(342617),s=n(713273),l=n(447269),c=n(406421),u=n(561200),d=n(592333),p=n(51679),v=n(644367);let f={botMap:{},botIdToLocalConversationMap:{},botIdToRequestIdMap:{}},m=(e,t)=>({...f,updateBot:t=>{let{bot_id:n,id:r}=t,i=n||r;if(!i){v.k.persist.warning({message:"invalid botInfo to update",meta:{botInfo:t}});return}e((0,u.Uy)(e=>{e.botMap[i]={...e.botMap[i]||{},...t}}))},overrideBots:t=>{t.length&&e((0,u.Uy)(e=>{t.forEach(t=>{let{bot_id:n,id:r}=t,i=n||r;i&&(e.botMap[i]={...e.botMap[i]||{},...t})})}))},setLocalConversationIdForBot:t=>{let{botId:n,localConversationId:r}=t;e((0,u.Uy)(e=>{e.botIdToLocalConversationMap[n]=r}))},clearConversationIdForBot:t=>{let{botId:n}=t;e((0,u.Uy)(e=>{if(!n)return;let t=e.botMap[n];t&&(t.conversation_id="",t.has_conversation=!1)}))},fetchToUpdateBot:async t=>{var n;let{botId:r}=t,{data:i}=await p.Ox.RecommendBots({bot_ids:[r]}),o=(null==i?void 0:null===(n=i.bot_list)||void 0===n?void 0:n.length)?null==i?void 0:i.bot_list:[];return e((0,u.Uy)(e=>{var t;(null==i?void 0:null===(t=i.bot_list)||void 0===t?void 0:t.length)&&(e.botMap[r]=null==o?void 0:o[0])})),null==o?void 0:o[0]},getBot:e=>t().botMap[e],getBotIdFromLocalConversation:e=>{let{botIdToLocalConversationMap:n}=t();for(let t in n)if(n[t]===e)return t},getBotIdToLocalConversationMap:()=>t().botIdToLocalConversationMap,getBotIdToRequestIdMap:()=>t().botIdToRequestIdMap}),h=[],_=(h=[{apiTagID:102,newTagID:252},{apiTagID:104,newTagID:253},{apiTagID:103,newTagID:254},{apiTagID:228,newTagID:228},{apiTagID:105,newTagID:255}])[0].newTagID,g=()=>({discoveryBotCachedList:{},discoveryBotLinks:[],discoveryBotListStatus:{loading:!1,failed:!1,count:0,hasMore:!0,tagList:[],selectedTagId:-1,error:void 0},choicenessBotLinks:[],choicenessBotListStatus:{loading:!1,failed:!1,count:0,hasMore:!0},profileBotLinks:[],profileBotListStatus:{loading:!1,failed:!1,count:0,hasMore:!0,last_index:"0"},profileBotCount:0}),y=g(),b=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r,i]=t;return{...y,...m(...t),initRecommendBotList:e=>{let{size:t,recommendType:n,tagId:r,isSidebarRecommend:o}=e;i().loadRecommendBotList({index:1,size:t,recommendType:n,tagId:r,isSidebarRecommend:o})},loadRecommendBotList:async e=>{let{index:t,size:n,recommendType:o,tagId:c,isSidebarRecommend:f=!1}=e,m=f?1:h.map(e=>e.newTagID).includes(c)?c:_,g=o===d.UE.Discovery,y=g?"discoveryBotListStatus":"choicenessBotListStatus",b=g?"discoveryBotLinks":"choicenessBotLinks",k=1===t,w=i()[b];k&&g&&r((0,u.Uy)(e=>{var t;let n=null!==(t=e.discoveryBotCachedList[null!=m?m:""])&&void 0!==t?t:[];e.discoveryBotLinks=n,e.discoveryBotListStatus.count=n.length})),r((0,u.Uy)(e=>{let t=e[y];g?Object.assign(t,{loading:!0,selectedTagId:m||e.discoveryBotListStatus.selectedTagId}):Object.assign(t,{loading:!0})}));try{let e={recommend_type:o,page_index:t,page_size:n};m&&(e.tag_id=m);let{data:c}=await p.Ox.RecommendBots(e),{bot_list:d=[],has_more:v=!1,tag_list:f=[],selected_tag_id:_,trace_map:T}=c||{},E=i().discoveryBotListStatus.selectedTagId;if(_&&-1!==E&&_!==E)return;let{request_id:R}=T||{},C=(0,a.Z)((0,s.Z)(d||[],"bot_id"),e=>({botID:e.bot_id||""})),I=S(k?[]:w,C);r((0,u.Uy)(e=>{if(g){var t;let n=null!==(t=e.discoveryBotListStatus.tagList)&&void 0!==t?t:[],r=f.reduce((e,t)=>(t.tag_id&&(e[t.tag_id]=t),e),{}),i=h.reduce((e,t)=>{let n=r[t.apiTagID];return n&&e.push({...n,tag_id:t.newTagID}),e},[]),o=i.every((e,t)=>{var r;return e.tag_id===(null===(r=n[t])||void 0===r?void 0:r.tag_id)}),a=e.discoveryBotListStatus.selectedTagId,s={loading:!1,failed:!1,count:I.length,hasMore:v,tagList:o?n:i,selectedTagId:-1===a?_:a};null==d||d.map(t=>{t.bot_id&&(e.botIdToRequestIdMap[t.bot_id]=R)}),Object.assign(e[y],s)}else Object.assign(e[y],{loading:!1,failed:!1,count:I.length,hasMore:v});e[b]=I,"discoveryBotLinks"===b&&m&&(e.discoveryBotCachedList[m]=I),e.botMap=(0,l.Z)(d||[],(e,t)=>(t.bot_id&&(e[t.bot_id]=t),e),{...e.botMap})}))}catch(e){r((0,u.Uy)(t=>{Object.assign(t[y],{failed:!0,loading:!1,error:e})})),e instanceof Error&&v.k.persist.error({message:`loadBotList failed size:${n} index:${t}, type: ${o}`,error:e})}},initProfileBotList(e){let{size:t,visit_id:n}=e;i().loadProfileBotList({index:"0",size:t,visit_id:n})},async loadProfileBotList(e){let{index:t,size:n,visit_id:o}=e,{profileBotLinks:c}=i(),d="0"===t;r((0,u.Uy)(e=>{e.profileBotListStatus.loading=!0}));try{let{data:e}=await p.UZ.ProfileBotList({index:t,limit:n,visit_id:o}),{profile_bot_list:i=[],has_more:v=!1,last_index:f,total:m}=e||{},h=(i||[]).map(e=>{var t;return{...e,icon_url:null===(t=e.icon_image)||void 0===t?void 0:t.tiny_url}}),_=(0,a.Z)((0,s.Z)(h||[],"bot_id"),e=>({botID:e.bot_id||""})),g=S(d?[]:c,_);r((0,u.Uy)(e=>{Object.assign(e.profileBotListStatus,{loading:!1,failed:!1,count:g.length,hasMore:v,last_index:f}),e.profileBotLinks=g,e.profileBotCount=Number(m),e.botMap=(0,l.Z)(h||[],(e,t)=>(t.bot_id&&(e[t.bot_id]=t),e),{...e.botMap})}))}catch(e){throw r((0,u.Uy)(e=>{Object.assign(e.profileBotListStatus,{failed:!0,loading:!1})})),e instanceof Error&&v.k.persist.error({message:`loadBotList failed size:${n} index:${t}, type: profileBotLinks`,error:e}),e}},resetProfileBotListStatus(){r((0,u.Uy)(e=>{Object.assign(e.profileBotListStatus,y.profileBotListStatus)}))},deleteBotInChoicenessBotLinks(e){r((0,u.Uy)(t=>{t.choicenessBotLinks=t.choicenessBotLinks.filter(t=>t.botID!==e)}))},resetDiscoverBotListSelectedTagId(){r((0,u.Uy)(e=>{e.discoveryBotListStatus.selectedTagId=-1}))}}},S=(e,t)=>(0,c.Z)(e.concat(t),"botID"),k=(e,t)=>t?(0,o.Ue)()((0,i.mW)((0,i.XR)(b),{name:e})):(0,o.Ue)()((0,i.XR)(b)),w=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{_useBotStore:r}=w.prototype;if(r)return r(...t);throw Error("useBotStore is not initialized")},T=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{_useGuestBotStore:r}=T.prototype;if(r)return r(...t);throw Error("useBotStore is not initialized")};function E(e){let{_useBotStore:t}=w.prototype||{},{_useGuestBotStore:n}=T.prototype||{};if(!t){let t=k("flow-web-bot-store",e);Object.setPrototypeOf(w.prototype,t),Object.defineProperties(w,{...Object.getOwnPropertyDescriptors(t)}),w.prototype._useBotStore=t}if(!n){let t=k("flow-web-guest-bot-store",e);Object.setPrototypeOf(T.prototype,t),Object.defineProperties(T,{...Object.getOwnPropertyDescriptors(t)}),T.prototype._useGuestBotStore=t}}let R=e=>{let t=w(t=>e?t.botMap[e]:void 0,r.X),n=T(t=>e?t.botMap[e]:void 0,r.X);return t||n},C=e=>w.getState().botIdToRequestIdMap[e||""]},770028:function(e,t,n){"use strict";n.d(t,{zo:function(){return v},rU:function(){return l},XX:function(){return d},yR:function(){return p},GQ:function(){return c}});var r=n(590709),i=n(93708),o=n(644367),a=n(616357);let s=()=>"undefined"!=typeof document&&document.body.clientWidth<((0,i.GX)("chatViewCanvasStore").isExpand?a.Bv:a.lB),l=()=>(0,i.sQ)("sidebarStore",e=>e.isExpand),c=e=>{(0,i.Wp)("sidebarStore").setState({isExpand:e,hasInteracted:!0,hasExpandInteracted:!0,hasExpandLinkageChanged:!1});try{(0,i.Wp)("flowWebLayoutStore").setState({sidebarStatus:e?"open":"closed"})}catch{}},u=e=>{(0,i.Wp)("sidebarStore").setState({isExpand:e})},d=()=>(0,i.GX)("sidebarStore").isExpand,p=()=>{s()&&(0,i.Wp)("sidebarStore").setState(e=>{let{isMobileExpand:t}=e;return{isMobileExpand:!t}})},v=()=>{try{u(!0)}catch(e){(0,r.Z)(e)&&o.k.persist.error({message:"openSidebarIfDid error",error:e})}}},218523:function(e,t,n){"use strict";n.d(t,{KA:function(){return s},R:function(){return c},Wr:function(){return u}});var r,i=n(231462),o=n(118200),a=n(561200);let s=((r={}).CLOSE="close",r.OPEN="open",r),l={routesStack:[],routesStateMap:{},payload:{},activeKey:void 0,state:"replace",lastShowStatus:{},mode:""},c=(0,i.Ue)()(e=>({...l,changeMode:t=>e(()=>({mode:t})),setPayload:t=>e(()=>({payload:t})),setStack:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e(()=>({routesStack:t,state:"replace",routesStateMap:(0,a.Uy)({},e=>{for(let n=0;n<Math.min(r.length,t.length);n+=1)e[n]=r[n]})}))},setActiveKey:t=>e(()=>({activeKey:t||void 0})),goBack:()=>e(e=>{let{routesStack:t,routesStateMap:n}=e;return{routesStack:[...t.slice(0,-1)],state:"pop",routesStateMap:(0,a.Uy)(n,e=>{delete e[t.length-1]})}}),push:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{state:r}=n;e(e=>{let{routesStack:n,routesStateMap:i}=e;return{routesStack:[...n,t],state:"push",routesStateMap:(0,a.Uy)(i,e=>{r&&(e[n.length]=r)})}})},setLastShowStatus:(t,n)=>e(e=>({lastShowStatus:{...e.lastShowStatus,[t]:n}}))})),u=()=>{var e;let{routesStateMap:t,routesStack:n}=c(e=>{let{routesStateMap:t,routesStack:n}=e;return{routesStateMap:t,routesStack:n}});return null!==(e=(0,o.Z)(t,n.length-1))&&void 0!==e?e:{}}},637224:function(e,t,n){"use strict";n.d(t,{$:function(){return i},G4:function(){return a},HS:function(){return d},Yy:function(){return l},fH:function(){return r},gJ:function(){return u},mQ:function(){return c},vQ:function(){return s}});let r=()=>{if("undefined"==typeof window)return!1;let{pathname:e}=window.location;return!!e&&!!e.startsWith("/code")},i=()=>{let{location:e}=window;return!!e&&/^\/chat\/coding\/?$/.test(e.pathname)},o=e=>/\/code\/chat(\/(local_|main)?\d*)?(\?.*)?$/.test(e),a=()=>{let{location:e}=window;return!!e&&o(e.pathname)},s=()=>{let{location:e}=window;return!!e&&(/\/code\/share(\/\d*)?$/.test(e.pathname)||/\/code\/chat\/new(\/\d*)?$/.test(e.pathname)||/\/code\/chat\/new-thread\/create-by-share\/?$/.test(e.pathname)||/\/code\/chat\/new-doc\/?$/.test(e.pathname))},l=()=>{let{location:e}=window;return!!e&&!o(e.pathname)&&/\/code\/chat\/.*$/.test(e.pathname)},c=()=>{let{location:e}=window;return!!e&&/^\/code\/chat\/?$/.test(e.pathname)},u="/code/chat",d="/chat/coding"},790088:function(e,t,n){"use strict";var r;n.d(t,{y:function(){return i}});let i=((r={}).Mssdk="mssdkPromise",r.BdMsSdk="bdmssdkPromise",r.MsSdkReady="msSdkReady",r.TTWid="ttwid",r.Launch="launchPromise",r.AccountInfo="accountInfoPromise",r.GuestLayoutMode="guestLayoutModePromise",r.Guidance="guidancePromise",r.SkillList="skillListPromise",r.OpenIdPromise="openIdPromise",r.WebAnonIdPromise="webAnonIdPromise",r)},605502:function(e,t,n){"use strict";let r;n.d(t,{zG:function(){return m},pL:function(){return f}});var i,o=n(645884),a=n(795163),s=n(669887),l=n(51679),c=n(318754),u=n(644367);let d={answer_with_suggest:s.R3.AnswerWithSuggest,answer_with_video:s.R3.AnswerWithVideo,named_entity_highlight:s.R3.HighlightKeyword,personalized_recommend:s.R3.PersonalizedRecommend,save_chat_history:s.R3.SaveChatHistory,allow_model_training:s.R3.AllowTraining},p="featureConfig",v=(e,t)=>t?Object.fromEntries(Object.keys(e).map(n=>{var r;let i=e[n],o=null==t?void 0:null===(r=t.configs)||void 0===r?void 0:r.find(e=>e.object===d[n]);return o?[n,{...i,...Number(o.version)<Number(null==i?void 0:i.version)?{}:{version:o.version,value:!!Number(o.value)}}]:[n,i]})):e,f=(i=async(e,t,n)=>{let{objects:r=Object.values(d),reason:i=s._m.Startup}=t||{},o=++e,{data:c}=await l.UZ.PullUserConfig({objects:r,reason:i}).catch(()=>(u.k.persist.warning("fetchUserConfig fail"),{data:void 0}));if(o<e&&!n||!c)throw Error("skipped setFeatureConfig");(0,a.Iz)(p,v((0,a.oh)(p),c))},r=null,function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r&&!t)return r;(r=i(0,e,t)).then(()=>{r=null}).catch(e=>{u.k.console.info("setFeatureConfig skipped")})}),m=async()=>{try{var e,t;let n=await (0,c.rawRequest)({method:"GET",url:"https://lf3-config.bytetcc.com/obj/tcc-config-web/tcc-v2-data-flow.web.doubao-default"}),r=null!==(t=null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.data)&&void 0!==t?t:{};return(0,o.Z)(r,e=>JSON.parse(e||"{}"))}catch(e){return e instanceof Error&&u.k.persist.error({eventName:"get_tcc_config_error",error:e}),{}}}},184681:function(e,t,n){"use strict";n.r(t),n.d(t,{NavigateConversationDetailMessageLifeCyclePluginMatcher:function(){return r}});let r={pluginIdentifier:n(291225).F,matchPlugin:e=>!0,matchPluginWithPayload:e=>!0}},842447:function(e,t,n){"use strict";n.r(t),n.d(t,{NavigateConversationDetailMessageLifeCyclePlugin:function(){return W}});var r=n(594175),i=n(986091),o=n(508830),a=n(475666),s=n(210230),l=n(67864),c=n(81307),u=n(291375),d=n(145625),p=n(900730),v=n(228535),f=n(623666),m=n(274680),h=n(744947),_=n(530836),g=n(777433),y=n(831929),b=n(93708),S=n(15348),k=n(190831),w=n(468494),T=n(234761),E=n(322639),R=n(976927),C=n(666396),I=n(393648),x=n(993047),N=n(644367),M=n(721219),P=n(861431),A=n(967037);let $=e=>{let{conversationId:t,chatType:n,conversation:r,localConversation:i,payloads:o}=e,a=(0,T.IO)(w.useFeedStore.getState()),s=(0,M.Z)(o).map(e=>{var o,s,u;return{...e,reportParams:{...null==e?void 0:e.reportParams,from:(null==e?void 0:null===(o=e.reportParams)||void 0===o?void 0:o.from)||"",conversation_type:c.VI.CocoWebSub},localConversationId:r?r.local_conversation_id:t,conversationId:r?t:"0",botId:a,chatType:null!=n?n:l.z.NewThread,botType:"Main",extraExt:{...null==e?void 0:e.extraExt,...(null==i?void 0:null===(s=i.local)||void 0===s?void 0:s.relatedShareId)?{related_share_id:null==i?void 0:null===(u=i.local)||void 0===u?void 0:u.relatedShareId}:{},need_create_thread:"1"},reportEvents:{create_conversation_by_message:(0,A.zQ)({eventName:"create_conversation_by_message",meta:{scene:"new_thread"}}),new_thread_message_full:(0,A.zQ)({eventName:"new_thread_message_full",meta:{...(0,P.Z)(e,["scene"]),...(0,P.Z)(null==e?void 0:e.reportParams,["send_source"])}})}}});return i&&(w.useFeedStore.getState().updateLocalConversationLocal(t,{createStatus:u.ns.Creating}),(0,S.D)("chatNavigateService").then(e=>{null==e||e.navigateToChatDetailPage({conversationId:t,replace:!0})})),s};var j=n(118200),O=n(758635),F=n(291225);async function L(e){var t,n,r;let{store:i,conversationId:o,localConversationId:a,isCreateMainThread:s=!1,threadId:l}=e,c="ack_init_message_list_should_retry",u=(0,I.M7)(),d=await w.useFeedStore.getState().fetchUpdateConversationInfo(o,"postSendMessage");(l||s)&&w.useFeedStore.getState().updateChatCreateInFirstTime({conversationId:null!==(t=null==d?void 0:d.conversation_id)&&void 0!==t?t:"",status:!0});try{await (0,x.xK)(async()=>{let e=await i.initMessageList({conversationId:o,messageCursor:Number(null==d?void 0:d.message_cursor),messageIndex:Number(null==d?void 0:d.message_index),range:{start:Number(null==d?void 0:d.message_cursor),end:Number(null==d?void 0:d.message_index)},isGuest:!u,hasPreprocessTask:k.W2,createByLocalConversationId:a});N.k.persist.info({eventName:"ack_init_message_list",meta:{is_undefined:void 0===e,message_cursor:null==d?void 0:d.message_cursor,message_index:null==d?void 0:d.message_index,length:null==e?void 0:e.length,message_ids:null==e?void 0:e.map(e=>e.messageId).join(",")}});let{conversation_id:t}=null!=d?d:{};if(!t){N.k.persist.error({eventName:"ack_init_message_list",error:Error("conversation_id is undefined"),meta:{is_undefined:void 0===e,message_cursor:null==d?void 0:d.message_cursor,message_index:null==d?void 0:d.message_index,length:null==e?void 0:e.length,message_ids:null==e?void 0:e.map(e=>e.messageId).join(","),reason:"conversation_id_is_undefined"}});return}if(!e||0===e.length||e.every(e=>(0,v.qF)((0,h.K9)(i,t,e))))throw Error(c)},3,200),d&&s&&l&&w.useFeedStore.getState().updateMainConvLink({conversation:d,threadId:l})}catch(e){throw e instanceof Error&&e.message===c&&N.k.persist.error({eventName:"ack_init_message_list",error:Error("retry too more times"),meta:{reason:"retry_too_more_times"}}),new f.nc(e instanceof Error?e.message:null!==(r=null==e?void 0:null===(n=e.toString)||void 0===n?void 0:n.call(e))&&void 0!==r?r:"unknown error: initConversationInfoAndMessageListFromLocalConversation")}}let D=e=>{let{conversationId:t}=e;try{var n;let e=document.getElementById("to-bottom-button");e&&(null===(n=e.dataset)||void 0===n?void 0:n.visible)==="true"&&setTimeout(()=>{var t;return null===(t=e.click)||void 0===t?void 0:t.call(e)},100),w.useFeedStore.getState().insertConversationToLinks({conversationId:t,index:1})}catch{}};class W{processMessageBefore(e,t){let{conversationId:n,chatType:r}=(e=>{var t;if((null==e?void 0:e.conversationId)&&"0"!==e.conversationId)return{conversationId:e.conversationId,chatType:l.z.Conversation};if(null==e?void 0:e.localConversationId)return{conversationId:e.localConversationId,chatType:l.z.ThreadLocalConversation};let{currentChatViewConfig:n}=(0,b.GX)("chatViewCoreStore");return{conversationId:null!==(t=null==n?void 0:n.chatId)&&void 0!==t?t:"",chatType:null==n?void 0:n.chatType}})(t[0]),i=(0,T.jo)(w.useFeedStore.getState(),n),o=(0,T.dg)(w.useFeedStore.getState(),n),a=!!(i||o),s=(0,E.Xo)(i||o,r),c=r===l.z.Bot||r===l.z.ProfileBot;if(i&&(null==D||D({conversationId:n})),!s){var u;return function(e){let{botId:t,conversationId:n,payloads:r}=e;if(!t&&!n)return r;let i=t&&!n?O.useBotStore.getState().botIdToLocalConversationMap[t]:"";return r.map(e=>{var r;return{...e,botId:t,...i?{localConversationId:i}:{},...n?{conversationId:n}:{},reportEvents:{create_conversation_by_message:(0,A.zQ)({eventName:"create_conversation_by_message",meta:{scene:"new_bot_conversation"}})},reportParams:{...e.reportParams,enter_from:(0,j.Z)(window,"history.state.usr.enter_from"),from:(null===(r=e.reportParams)||void 0===r?void 0:r.from)||""},chatType:l.z.Bot,botType:"UGC"}})}({botId:c?n:null===(u=i||o)||void 0===u?void 0:u.bot_id,conversationId:c?void 0:n,payloads:t})}return a&&s?$({conversationId:n,chatType:r,conversation:i,localConversation:o,payloads:t}):t}async onMessageSendingEnd(e,t){var n,f,k,E,I,x,N;let{bot_id:M="",local_conversation_id:P="",conversation_id:A="",thread_id:$="",local_message_id:j="",message_id:O="",conversation_type:F}=t,{currentChatViewConfig:D}=(0,b.GX)("chatViewCoreStore"),W=()=>{_.useMessageStore.getState().updateMessageList({conversationId:P,immerUpdate:e=>{let t=e.draftLocalMessageMap[j];void 0!==t&&(t.local.failed=!0,t.local.status=c.JR.SentAndCreateConversationFailedInLocalConversation),(0,g.FL)(e,C.lf)}})},Z=(null==D?void 0:D.chatType)===l.z.Bot||(null==D?void 0:D.chatType)===l.z.ProfileBot;if((null===(n=t.final_status)||void 0===n?void 0:n.message)==="Success"&&(0,m.G)(t)){let e=$?!!$:F!==c.VI.Bot,n=!!(null==t?void 0:null===(k=t.ext)||void 0===k?void 0:k.create_main_thread),l=(0,h.LF)(_.useMessageStore.getState(),P,j),f=(0,y.BH)(_.useMessageStore.getState(),{conversationId:P,replyId:O}),m=(null===(E=(0,r.Z)(f))||void 0===E?void 0:E.local_message_id)||(0,p.J)(O||"");_.useMessageStore.getState().updateMessageList({conversationId:A,immerUpdate:function(){for(var n,r,o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];let[u]=a,{draftMessageMap:d}=u;!(t.message_id&&(0,v.mdd)(d[t.message_id]))&&((0,y.ae)({isRegenerate:!1,immerUpdateMessage:a,newLocalMessageId:m,conversationId:A,replyId:O,messageId:"",sectionId:t.section_id,timeout:null==t?void 0:null===(n=t.ext)||void 0===n?void 0:n.timeout,localMessageStatus:c.JR.ReceivingFirstPackage,skillType:null==l?void 0:null===(r=l.skill)||void 0===r?void 0:r.skill_type}),(0,i.Z)(u.draftMessageLinks)&&e&&u.draftMessageLinks.push({messageId:O,isLocalMessage:!1,messageKey:j},{messageId:m,isLocalMessage:!0}))}}),_.useMessageStore.getState().updateMessageList({conversationId:P,immerUpdate:e=>{let t=e.draftLocalMessageMap[j];t.local.failedExpired=void 0,t.local.status=c.JR.SentInLocalConversation}});try{if(await L({store:_.useMessageStore.getState(),conversationId:A,localConversationId:P,isCreateMainThread:n,threadId:null!==(x=null==$?void 0:$.toString())&&void 0!==x?x:""}),_.useMessageStore.getState().updateMessageList({conversationId:A,immerUpdate:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r]=t,{draftMessageMap:i}=r;!(O&&(0,v.mdd)(i[O]))&&((0,o.Z)((0,a.Z)(r.draftLocalMessageMap,e=>(null==e?void 0:e.reply_id)===O)).forEach(e=>{let{local_message_id:n=(0,p.J)(O)}=e,i=r.draftMessageLinks.find(e=>e.messageId===n);(0,s.Z)(i)&&(0,y.eD)({isRegenerate:!1,immerUpdateMessage:t,newLocalMessageId:n})}),(0,y.$_)(t))}}),w.useFeedStore.getState().insertNewConversationAndRemoveOldConversationFromLinks({conversationId:A,originConversationKey:P,threadId:$,index:1},{conversationId:P}),!e){let e=R.feedServiceContainer.get("chatBotService");null==e||e.updateBot({bot_id:String(M),has_conversation:!0,conversation_id:A})}let t=null!==(N=null===(I=w.useFeedStore.getState().localConversationMap[P])||void 0===I?void 0:I.local)&&void 0!==N?N:{};w.useFeedStore.getState().updateLocalConversationLocal(P,{...t,createStatus:u.ns.Done,newConversationId:A,createFrom:"chatted"})}catch(e){W()}let g=await (0,S.D)("refContentStoreService");null==g||g.moveRefContents(P,A);let T=(0,b.Wp)("chatInputStore").getState().activeSkillTypeMap[P],C=(0,b.GX)("chatInputStore").activeSkillFromMap[P],D=(null==C?void 0:C.skillType)===T?null==C?void 0:C.skillFrom:void 0;T&&(0,b.GX)("chatInputStore").updateActiveSkillTypeMap(A,T,null!=D?D:d.u.AfterSkill)}else W();let U=(0,T.dg)(w.useFeedStore.getState(),P);return!Z&&P&&P===(null==D?void 0:D.chatId)&&(null==U?void 0:null===(f=U.local)||void 0===f?void 0:f.createStatus)===u.ns.Done&&((0,b.Wp)("chatViewCoreStore").setState({currentChatViewConfig:{...D,chatId:A,chatKey:null==D?void 0:D.chatId,chatType:l.z.Conversation}}),(0,S.D)("chatNavigateService").then(e=>null==e?void 0:e.navigateToChatDetailPage({conversationId:A}))),t}constructor(){var e,t,n;e="pluginIdentifier",t=F.F,(e="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string"))?n:n+"")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}}},486945:function(e,t,n){"use strict";n.r(t),n.d(t,{ChatConversationService:function(){return v},checkAndMarkConversationReadAsLoaded:function(){return p}});var r=n(530836),i=n(744947),o=n(15348),a=n(190831),s=n(468494),l=n(980402),c=n(393648),u=n(644367);let d=async e=>{if(!e)return;s.useFeedStore.getState().updateChatCreateInFirstTime({conversationId:e,status:!1});let t=(0,c.M7)();return r.useMessageStore.getState().initMessageList({conversationId:e,messageIndex:Number.MAX_SAFE_INTEGER,isGuest:!t,hasPreprocessTask:a.W2})};function p(e){let{conversation_id:t,read_message_index:n,message_index:o,read_badge_count:a=n,badge_count:s=o}=e,c=(0,i._H)(r.useMessageStore.getState(),t||"");if(Number(a)!==c){let e=Math.max(c,Number(s));Number(a)<e&&(0,l.r)(t||"",e)}}class v{constructor(){var e,t,n;e="refreshConversationInfo",t=async e=>{let{conversationId:t,scene:n}=e,{fetchUpdateConversationInfo:i,removeConversationFromLinks:a,removeConversationFromMap:l}=s.useFeedStore.getState(),{clearConversationMessages:c}=r.useMessageStore.getState();async function v(){let e=await i(t,n);return(null==e?void 0:e.deleted)&&(a({conversationId:t}),l({conversationId:t}),c(t),(0,o.D)("chatNavigateService").then(e=>{null==e||e.navigateToChatGuidancePage()})),e}try{let e=await v();await d(t),e&&p(e)}catch(e){if("initChatView"===n)throw e;u.k.persist.error({error:e})}},(e="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string"))?n:n+"")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}}},714413:function(e,t,n){"use strict";n.d(t,{NO:function(){return c},F3:function(){return u}});var r=n(429996),i=n(28659),o=n(993047);let a=(0,n(293067).Ue)(()=>({appInitEventEmitted:!1})),s=()=>{if("undefined"==typeof window)return!1;let{appRouteFilterFn:e}=a.getState();return!!e&&e(location.pathname)},l=e=>{let t;return new Promise(n=>{if(!s())return n(!0);if(a.getState().appInitEventEmitted){n(!0);return}function r(){clearTimeout(t),n(!0)}t=setTimeout(()=>{i.l.off("app.init",r),n(!0)},e),i.l.once("app.init",r)})},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return r.lazy(async()=>(await l(t),(0,o.AD)({fn:e})))},u=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;await l(t),e()}},969893:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var r=n(529496),i=n(233034);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,i.s)();return(n,i)=>{if("number"==typeof n){t(n);return}if("string"==typeof n&&(null==i?void 0:i.state)){t(n,i);return}let o="string"==typeof n?n:`${n.pathname}${n.search}${n.hash}`,a=()=>{(null==i?void 0:i.replace)?location.replace((0,r.C)(o,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb%50T1R*a1IxWj$%RE5PZ$ZsN%9%RmtSMnh6WTNrM%1HTXlSbmxhTTFaNg"})):location.assign((0,r.C)(o,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb%50T1R*a1IxWj$%RE5PZ$ZsN%9%RmtSMnh6WTNrM%1HTXlSbmxhTTFaNg"}))};if(!e)return a();setTimeout(()=>{a()})}}},814421:function(e,t,n){"use strict";n.d(t,{y:function(){return b}});var r=n(31505),i=n(55992),o=n(839888),a=n(241637),s=n(967037),l=n(644367),c=n(714413),u=n(51679),d=n(472626),p=n(913602);let v=(e,t)=>null==e?void 0:e.map(e=>e.language_code).includes(t),f=()=>{let e=p.yQ.getItem("setting_language_list");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},m=async()=>{try{var e;let t=await u.mH.GetSetting(),n=null===(e=t.data)||void 0===e?void 0:e.language_list;if(!n)return null;return p.yQ.setItem("setting_language_list",JSON.stringify(n)),n}catch(e){return null}},h=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=f();return t?(e&&(0,c.F3)(()=>{m()}),Promise.resolve(t)):m()},_=()=>"zh",g=function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{maxAge:r=1/0}=n,i=(0,d.Z)(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return{value:t(...n),timestamp:Date.now()}});return function(){for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];let l=i(...a);return Date.now()-l.timestamp>r?(i.cache.delete(a),e(t,n)(...a)):l.value}}(()=>u.mH.GetUserPreference(),{maxAge:3e3}),y=async()=>{var e;return null===(e=(await g()).data)||void 0===e?void 0:e.lang},b=async()=>{if("undefined"!=typeof window){let e=(0,s.zQ)({eventName:"check_language_changed"}),t=(0,r.l)();e.updateMeta({i18nLanguage:t});let[n,c]=await Promise.all([h(!1),y()]),u=c;u&&u!==i.nL||(u="zh");let d=(0,o.d)(u),p=d;if(v(n,d)||(p=_()),e.updateMeta({userLanguageCode:c,realCode:u,coverted:d,finalLanguage:p}),p!==t){(0,a.vM)(p),(0,a.BE)(p),l.k.persist.info({eventName:"loginLanguageReload",meta:{userLanguageCode:c,navigatorLanguage:navigator.language,i18nLanguage:t}}),await (0,a.D0)(p),e.success({meta:{changed:1}}),window.location.reload();return}e.success({meta:{changed:0}})}}},120791:function(e,t,n){"use strict";n.d(t,{P:function(){return s},y:function(){return l}});var r,i,o={};n.r(o),n.d(o,{CheckPageUpgradeStatus:function(){return a}});let a=((r={})[r.NotUpgrade=1]="NotUpgrade",r[r.Init=2]="Init",r[r.Upgrading=3]="Upgrading",r[r.Upgraded=4]="Upgraded",r[r.UpgradeFailed=5]="UpgradeFailed",r),{CheckPageUpgradeStatus:s}=o,l=((i={}).Sidebar="sidebar",i.Popover="popover",i.Avatar="avatar",i.Hidden="hidden",i)},735393:function(e,t,n){"use strict";n.d(t,{Hb:function(){return s},bu:function(){return l},fY:function(){return u},mD:function(){return d},o2:function(){return c}});var r=n(118200),i=n(742470),o=n(432626),a=n(910157);let s=e=>{let t="";for(let o of e)if(o.block_type===i.zc.BLOCK_TEXT&&(t+=(0,a.R)(o.content,{}).text),o.block_type===i.zc.BLOCK_IMAGE){var n,r;let e=(0,a.R)(o.content,{});t+=`![](${null==e?void 0:null===(r=e.images)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.thumb_url})`}return t},l=e=>{var t,n;return null!==(n=null==e?void 0:null===(t=e.content_blocks)||void 0===t?void 0:t.filter(e=>e.block_type===i.zc.BLOCK_RESEARCH))&&void 0!==n?n:[]},c=e=>{var t,n;return null==e?void 0:null===(n=e.content_blocks)||void 0===n?void 0:null===(t=n.find(e=>e.block_type===i.zc.BLOCK_ARTIFACT))||void 0===t?void 0:t.content_obj},u=e=>{let t=(0,r.Z)(e,["verbose","deep_research","deep_research_id"]),n=(0,r.Z)(e,["ext","deep_research_id"]);return t||n},d=e=>(0,o.X9)("doc_title_duplicate",{docName:e||(0,o.X9)("doc_title_unnamed")})},256526:function(e,t,n){"use strict";n.r(t),n.d(t,{InitAfterInteractive:function(){return nD}});var r,i,o,a,s,l=n(429996),c=n(15348),u=n(233034),d=n(455218),p=n.n(d),v=n(442971),f=n(795163),m=n(748828),h=n(617317),_=n(371924),g=n(971857),y=n(666672);let b=e=>({"use-olympus-account":1,...function(e){let{device_platform:t,version_code:n,access_key:r,fpid:i,aid:o,ttwid:a}=e,s=window;if(s.byted_acrawler&&a){let e=p()(`device_platform=${t}&version_code=${n}&access_key=${r}&fpid=${i}&aid=${o}&ttwid=${a}`);return{"X-Bogus":s.byted_acrawler.frontierSign({"X-MS-STUB":e})["X-Bogus"],"X-MS-STUB":e,referer:document.referrer}}}({fpid:e.ws_product_id,access_key:e.ws_access_key,aid:e.ws_app_id,ttwid:e.ttwid,version_code:_.HI,device_platform:_.DP})||{},...(0,g.Z)("websocket"),...(0,y.K)(),...function(){if((0,v.T)()){let e=(0,f.Pn)(m.a8.xTtEnv,{source:h.d.debugStorage});return e?{"x-use-ppe":1,"x-tt-env":String(e)}:{}}return{}}(),aid:e.ws_app_id});var S=n(251263),k=n(54642),w=n(93708),T=n(118462),E=n(51679),R=n(206022);let C=async()=>{var e,t,n,r;let i=k.messageServiceContainer.get("chatMessageService"),{data:o}=await E.Wu.Launch();if((null==o?void 0:o.config)!==void 0){let n={config:o.config,getCommonSocketParams:b,featureConfig:{binaryType:"pb"}};null==i||null===(e=i.updateInitMessageProtocolServiceConfig)||void 0===e||e.call(i,n),null==i||null===(t=i.handleAppInitialed)||void 0===t||t.call(i),R.D.setTtwidConfig({web_id:o.config.web_id,tt_wid:o.config.ttwid}),(0,T.X)()("context.set","web_id",o.config.web_id)}if(void 0!==o){let{upload_file_allowed_types:e,upload_file_max_size:t,upload_multi_entity_conf:i,feature_config:a,language_list:s}=o;(0,w.Wp)("launcherRawSettingStore").setState(e=>e.launchStatus!==S.I.Success?{launchData:o,deprecatedSystemConfig:{language_list:s||[]},launchStatus:S.I.Success}:{}),(0,w.Wp)("attachmentUploadStore").setState({attachmentUploadConfig:{uploadFileMaxSize:Number(t)||0,uploadFileAllowedTypes:e||[],enabledSendMultiFileMessage:!!(null==a?void 0:null===(n=a.send_multi_file_message)||void 0===n?void 0:n.enabled),enableImageVlm:!!(null==a?void 0:null===(r=a.send_vlm_image_message)||void 0===r?void 0:r.enabled),uploadMultiEntityConf:{maxFileCount:Number(null==i?void 0:i.max_file_cnt)||0,maxFileSize:Number(null==i?void 0:i.max_file_size)||0,maxImageCount:Number(null==i?void 0:i.max_image_cnt)||0,maxImageSize:0x1400000}}})}};var I=n(210230),x=n(406421),N=n(422931);let M=async()=>{var e;let{data:t}=await E.mH.GetRecommendSkills({omit_sidebar:!0,omit_image:!0,omit_music:!0,omit_write:!0,omit_search:!0}),n=e=>!(!e||(0,I.Z)(null==e?void 0:e.skill_type)),r=(0,x.Z)((0,N.Z)(null==t?void 0:null===(e=t.groups)||void 0===e?void 0:e.map(e=>{var t,n;return null!==(n=null===(t=e.skills)||void 0===t?void 0:t.filter(e=>!!(null==e?void 0:e.skill_id)))&&void 0!==n?n:[]})),"skill_id").filter(n),i=((null==t?void 0:t.latest_skills)||[]).filter(n);(0,w.Wp)("chatInputStore").getState().updateSkills({allSkills:r,latestSkills:i,input_config:null==t?void 0:t.input_config}),(0,w.Wp)("chatGuidanceStore").setState({skillConfig:null==t?void 0:t.onboarding_skills})};var P=n(770028),A=n(89253),$=n(747915),j=n(685714),O=n(393648),F=n(999132),L=n(640078);let D={landing:{type:A.a.CHAT_CAN_USE},trackInfo:{source:$.x.OTHER}},W=()=>{let e=(0,O.Dv)(),{openLoginModal:t}=(0,j.NK)(),n=(0,F.Z)((n,r)=>{if(!e)return;let i={...D};n&&(i.trackInfo={source:n}),r&&(i.loginNavigateQuery=r),t({onSuccess:P.zo,...i})}),{run:r}=(0,L.Z)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$.x.OTHER,t=arguments.length>1?arguments[1]:void 0;n(e,t)},{leading:!0,trailing:!1,wait:250});return r},Z=()=>{let e=(0,u.s)(),t=W();(0,l.useEffect)(()=>{C(),M(),e&&(0,c.D)("chatNavigateService").then(n=>{null==n||n.init(e,t)})},[])};var U=n(162063),B=n(969893),z=n(803515),V=n(708481),H=n(432626),G=n(796038),K=n(698441),X=n(251184),q=n(55706),J=n(551450),Q=n(644367);let Y=()=>{let{showBoundary:e}=(0,G.cO)(),t=(0,B.K)(!0),n=(0,H.g1)(),r=(0,u.s)(),i=(0,U.Z)((e,n)=>{J.FN.warning({content:e,showClose:!1}),(0,q.N)().passportApi.logout({navigate:t,reason:"limited",trackMeta:{msg:e,logId:n}})},5e3,{leading:!0}),o=(0,U.Z)((t,n)=>{i(t,n),e(Error(K.y.RegionRestricted,{cause:{msg:t,logId:n}}))},5e3,{leading:!0}),a=(0,U.Z)((t,n)=>{e(Error(K.y.DoubaoRegionBan,{cause:{msg:t,logId:n,isNotError:!0}}))},5e3,{leading:!0}),s=()=>{J.FN.error({content:n("log_in_internet_error"),showClose:!1})},c=async(e,n)=>{await (0,q.N)().passportApi.logout({navigate:t,reason:"unauthorized",trackMeta:{msg:e,logId:n}})},d=(t,n)=>{e(Error(K.y.NoAccess,{cause:{msg:t,logId:n}}))},p=()=>{r(z.fU)},v=()=>{r(z.Gc)},f=(0,U.Z)(async(e,n)=>{let r=await (0,V.cf)("AliceChatSocket");null==r||r.drop(),e&&J.FN.warning({content:e,showClose:!1}),Q.k.persist.log({message:"user banned [banned]",meta:{msg:e}});let i=null;E.Qd.GetBanInfoRequest().then(e=>{var t;return i=(null==e?void 0:null===(t=e.ban_info)||void 0===t?void 0:t.content)||null,e}).finally(()=>{(0,q.N)().passportApi.logout({navigate:t,state:{showAppeal:!0,appealData:i},reason:"user_banned",trackMeta:{msg:e,logId:n}})})},5e3,{leading:!0}),m=(0,U.Z)(async(e,n)=>{let r=await (0,V.cf)("AliceChatSocket");null==r||r.drop(),J.FN.warning(e),Q.k.persist.log({message:"user banned [released\u3001appealing\u3001failed]",meta:{msg:e}}),(0,q.N)().passportApi.logout({navigate:t,reason:"user_banned_other",trackMeta:{msg:e,logId:n}})},5e3,{leading:!0}),h=()=>{X.l.stop(),X.l.off(X.w.NETWORK_ERROR,s),X.l.on(X.w.UNAUTHORIZED,c),X.l.on(X.w.NOACCESS,d),X.l.on(X.w.COUNTRY_RESTRICTED,o),X.l.on(X.w.DOUBAO_REGION_BAN,a),X.l.on(X.w.SHARK_BLOCK,i),X.l.on(X.w.CONVERSATION_INVALID,p),X.l.on(X.w.NEED_TO_WAIT,v),X.l.on(X.w.USER_BANNED,f),X.l.on(X.w.USER_BANNED_OTHER,m),X.l.start()},_=()=>{X.l.off(X.w.NETWORK_ERROR,s),X.l.off(X.w.UNAUTHORIZED,c),X.l.off(X.w.NOACCESS,d),X.l.off(X.w.COUNTRY_RESTRICTED,o),X.l.off(X.w.SHARK_BLOCK,i),X.l.off(X.w.CONVERSATION_INVALID,p),X.l.off(X.w.NEED_TO_WAIT,v),X.l.off(X.w.USER_BANNED,f),X.l.off(X.w.USER_BANNED_OTHER,m)};(0,l.useEffect)(()=>(h(),()=>{_()}),[])};var ee=n(234547),et=n(775313);let en=()=>{et.Z.config({top:32,zIndex:9999})},er=()=>{en()};var ei=n(657617),eo=n(204917);let ea="undefined"==typeof window?"":`https://${location.host}`,es="/auth/callback",el={callbackUrl:`${ea}${es}`,clientId:"",platformId:0},ec={google:void 0,apple:void 0,aweme_v2:{clientId:"aw4293rjg7ggbx9m",platformId:8949,callbackUrl:`${ea}${es}`},sso:void 0,line:{clientId:"2002351850",platformId:2200,callbackUrl:`${ea}${es}`,extraParams:{redirect_uri:`${ea}${es}`}},facebook:{clientId:"1819912395072617",platformId:2204,callbackUrl:`${ea}${es}`},workspace_sso:el};var eu=n(17135);let ed=()=>({}),ep=()=>{(0,q.u)({config:{enableWorkspaceSSO:ei.N},thirdPlatformConfig:ec,logoutRoute:z.Zd,aid:(0,eo.yM)(),tea:{trackEvent:eu.trackEvent},storeConfig:{prefix:"samantha-web",isEnableDebug:!!(0,v.T)(),reduxDevToolsSnapshot:(0,f.Pn)(m.a8.reduxDevToolsSnapshot,{source:h.d.debugStorage})},...ed()})};var ev=n(873375),ef=n(456402);let em=((r={}).BeforeAll="before_all",r.InCheckSSOLogin="in_check_sso_login",r.InAuthLogin="in_auth_login",r.InCheckLogin="in_check_login",r.Finished="finished",r.Failed="failed",r);var eh=n(529496),e_=n(411951),eg=n(316202),ey=n(350538),eb=n(753154),eS=n(836031),ek=n(967037),ew=n(637506),eT=n(790088),eE=n(944406),eR=n(491322),eC=n(263341);let eI=()=>{(0,q.N)().passportApi.on("afterLogout",()=>{var e;(0,eR.M)(!1),null===(e=(0,eE.do)())||void 0===e||e.then(eE.HX),(0,ey.N6)(),ex(),(0,eC.T)()})},ex=()=>{window[eT.y.Launch]&&(window[eT.y.Launch]=Promise.resolve(null))};var eN=n(955943),eM=n(607278),eP=n(814421),eA=n(981222),e$=n(415643),ej=n(454607),eO=n(87795),eF=function(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),r=0;r<n.length;r++){var i=n[r].trim();if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""},eL=function(e,t,n,r){void 0===n&&(n="/"),document.cookie="".concat(e,"=").concat(t,";path=").concat(n,";domain=").concat(r)},eD=function(e,t){var n=!1;return function(){n||(n=!0,e(),setTimeout(function(){n=!1},t||1e4))}},eW=function(){return(eW=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},eZ="passport_fe_beating_status",eU={web:"/passport/token/beat/web/",aff:"/passport/token/beat/aff/web/",sso:"/passport/token/beat/sso/web/"},eB=function(){function e(e){var t=this;this.throttleOnDrop=eD(function(){t.onAction()}),this.init=function(){if(window.XMLHttpRequest){t.startBeating("boot");try{window.addEventListener("click",t.throttleOnDrop),window.addEventListener("scroll",t.throttleOnDrop),window.addEventListener("mousemove",t.throttleOnDrop),window.addEventListener("beforeunload",function(){t.stopBeating()})}catch(e){}}},this.onAction=function(){t.beating?t.setOperationFlag(!0):t.startBeating("active")},this.setOperationFlag=function(e){localStorage.setItem("".concat(window.location.origin,"-operation"),String(e))},this.getOperationFlag=function(){return"true"===localStorage.getItem("".concat(window.location.origin,"-operation"))},this.sendBeat=function(e){void 0===e&&(e="polling");var n=t.initProps,r=n.type,i=void 0===r?"web":r,o=n.aid,a=n.subjectAid,s=n.ssoHost,l=n.commonParams,c=eW(eW({},l),{aid:o,subjectAid:a,scene:e,device_platform:"web",passport_jssdk_version:"1.0.0"});"sso"===i?t.sendBeatRequest(s+eU.sso,c,function(){t.sendBeatRequest(eU.web,c)}):"aff"===i?t.sendBeatRequest(eU.aff,c):t.sendBeatRequest(eU.web,c)},this.sendBeatRequest=function(e,n,r){var i=t.initProps.onDrop,o=new XMLHttpRequest;o.withCredentials=!0,o.onreadystatechange=function(){var e;if(4===o.readyState&&200===o.status){var n=o.responseText,a={};try{a=JSON.parse(n)}catch(e){}if((null==a?void 0:a.message)==="error"||null==r||r(),(null==a?void 0:a.message)==="error"&&(null===(e=null==a?void 0:a.data)||void 0===e?void 0:e.error_code)===401){try{window.removeEventListener("click",t.throttleOnDrop),window.removeEventListener("scroll",t.throttleOnDrop),window.removeEventListener("mousemove",t.throttleOnDrop)}catch(e){}t.stopBeating(),null==i||i()}}};var a="".concat(e,"?").concat(Object.keys(n).filter(function(e){return void 0!==n[e]}).map(function(e){return"".concat(e,"=").concat(n[e])}).join("&"));o.open("GET","".concat(a)),o.send()},this.stopBeating=function(){t.timer&&clearInterval(t.timer),t.beating&&(t.beating=!1,eL(eZ,!1,"/",window.location.host),t.setOperationFlag(!1))},this.startBeating=function(e){if(void 0===e&&(e="polling"),"true"!==eF(eZ)||t.beating){var n=t.initProps.beatFreq;t.sendBeat(e),eL(eZ,!0,"/",window.location.host),t.beating=!0,t.timer&&clearInterval(t.timer),t.timer=setInterval(function(){t.getOperationFlag()?(t.setOperationFlag(!1),t.sendBeat("polling")):t.stopBeating()},n?6e4*n:6e5)}},this.initProps=e,this.beating=!1,this.timer=null}return e.getInstance=function(t){return e.instance||(e.instance=new e(t)),this.instance},e.instance=null,e}(),ez=n(788265),eV=n(692800),eH=n(613802);let eG={},eK="checkLogin",eX="passport_fe_beating_status",eq=e=>{let{navigate:t,aid:n,onBeforeAuth:r,onError:i,onNetworkError:o,onPassportError:a,onUnknownError:s,checkLogin:c,appendParams:u}=e,d=(0,l.useRef)(),p=()=>{let e=(0,ek.zQ)({eventName:"init_session_beat",meta:{aid:n,hasInstance:!!d.current}});if(n)try{if(!d.current){let r="true"===(0,eO.e)(eX);r&&(0,eO.d)(eX,!1,{path:"/",domain:window.location.host}),d.current=new eB({aid:n,type:"web",onDrop:()=>{(0,q.N)().passportApi.logout({navigate:t,reason:"session_beat_drop"})},...u,...eG}),e.updateMeta({isCookieSet:+!!r,hasInstance:+!!d.current}),d.current.init(),e.success()}}catch(t){e.error({reason:"olympus_login_session_beat_init_error",error:t})}},v=async()=>(null==r||r(),c?c():(0,q.N)().passportApi.checkLogin()),f=e=>{let n=Q.k.persist.createLoggerWith({ctx:{meta:{loginType:eK},error:e}});(0,ej.IZ)(e)?(n.error({eventName:"olympus_login_axios_network_error",error:e}),o(e)):(0,ez.Bv)(e)?(0,q.N)().passportApi.logout({navigate:t,reason:"workspace_user_select_close",trackMeta:{error:e}}):(0,eH.NA)(e)?(Q.k.persist.error({eventName:"olympus_login_age_gate_canceled_error",error:e}),(0,q.N)().passportApi.logout({navigate:t,reason:"age_gate_cancel",trackMeta:{error:e}})):(0,eH.pc)(e)?(0,q.N)().passportApi.logout({navigate:t,reason:"age_gate_close",trackMeta:{error:e}}):(0,eV.VQ)(e)?(Q.k.persist.error({eventName:"olympus_login_passport_error",error:e,meta:{code:e.code,message:e.message,loginType:eK}}),a(e)):(Q.k.persist.error({eventName:"olympus_login_unknown_error",error:e}),s(e))};return async()=>{try{let e=await v();if(p(),!e)throw Error("userInfo is undefined");return Q.k.persist.success({eventName:"olympus_login_success",meta:{loginType:eK}}),{isSuccess:!0,userInfo:e}}catch(e){return null==i||i(e),f(e),{isSuccess:!1,error:e instanceof Error?e:Error(String(e))}}}};var eJ=n(913602),eQ=n(573469),eY=n(958366);let e0=()=>({}),e1=e=>{let{navigatePath:t,loginRoute:n=z.Zd,authFailedAction:r,ssoOnly:i=!1,skipSso:o=!1,getAuthState:a,onAuthUpdate:s,exemptionNetworkErrorBoundary:l=!1,isHref:c=!1,checkLogin:d}=e,{showBoundary:p}=(0,G.cO)(),v=(0,u.s)(),{Tea:f}=(0,eQ.M)().Plugins,m=()=>{if(location.pathname!==z.Zd){let e=n===z.Zd?(0,ef.Mn)((0,ef.C0)(z.Zd,location.pathname,location.search)):(0,ef.C0)(n,t,location.search);if(Q.k.persist.info({eventName:"olympus_login_to_login",meta:{url:e}}),c){let t=window.location.origin,n=e.startsWith("/")?`${t}${e}`:`${t}/${e}`;window.location.href=(0,eh.C)(n,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb*x-$*1wa%0xWjFaR%01ZW1OdFR-WmhSemwyW$ROTmRt%ll%bXhN$jBZeFpF-zRkR0pIT1c1aFZ6%jFaRWhP-%dOdFpERmpkejA5"});return}v(e,{state:{navigatePath:t}})}},h=e=>{var n,r,i;if(!t)return;let o=null===(i=eN.Z.parseUrl(t))||void 0===i?void 0:null===(r=i.url)||void 0===r?void 0:null===(n=r.replace)||void 0===n?void 0:n.call(r,/\/$/,"");!location.pathname.includes(o)&&v(t)},_=e=>{(0,eP.y)();let t=(0,T.X)();t("context.set","sso_email",(0,eY.iO)()),e?((0,eE.Hl)(f,e.user_id_str,!1),t("context.set","account_user_id",e.user_id_str),eJ.yQ.setItem("for_ban_appeal_sec_user_id",e.sec_user_id),(0,eA.gS)(e).then(()=>{(0,e$.O)()}),e.first_login_app&&FEATURE_USER_PROFILE&&(0,eA.nw)(e.user_id_str)):Q.k.persist.error({error:Error(),eventName:"olympics_login_success_without_user_info"}),(0,eg.de)(e),h(e),(0,eR.M)(!0)},g=e0(),y=eq({navigate:v,aid:(0,eo.yM)(),checkLogin:d,onNetworkError:()=>{!l&&p(Error(K.y.NetworkError))},onPassportError:async()=>{var e;let t=(0,eM.Z)(r)?await r(location.pathname):r;if("stay"!==t)null===(e=(0,q.N)().passportApi)||void 0===e||e.triggerAfterLogout(),"logout_but_stay"!==t&&m()},onUnknownError:async()=>{"stay"!==((0,eM.Z)(r)?await r(location.pathname):r)&&m()},onError:()=>{null==s||s(em.Failed)},onBeforeAuth:()=>{null==s||s(em.InCheckLogin)},appendParams:g});return async()=>{try{null==s||s(em.BeforeAll);let e=await y();if(e.isSuccess){let{userInfo:t}=e;_(t)}else(0,eA.SE)(),null==s||s(em.Failed);return e}finally{(null==a?void 0:a())!==em.Failed&&(null==s||s(em.Finished))}}},e2=e=>{let{navigatePath:t,loginRoute:n=z.Zd,authFailedAction:r,ssoOnly:i,skipSso:o,getAuthState:a,onAuthUpdate:s,checkLogin:c=ew.C,exemptionNetworkErrorBoundary:d=!1,isHref:p=!1}=e,v=e1({checkLogin:c,navigatePath:t,loginRoute:n,authFailedAction:r,ssoOnly:i,skipSso:o,getAuthState:a,onAuthUpdate:s,exemptionNetworkErrorBoundary:d,isHref:p}),f=(0,u.s)(),m=(0,eS.T)(),h=e=>{if(e.key===ey.IC&&(0,e_.Z)(e.newValue)&&m.pathname!==z.Zd&&"stay"!==r){if((0,q.N)().passportApi.triggerAfterLogout(),p){let e=`${window.location.origin}${z.Zd}`;window.location.href=(0,eh.C)(e,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"flow_web",region:"cn",urlLimit:"-1",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!0,escapeRule:"escape-report",reportUrl:"https://mon.zijieapi.com/monitor_browser/collect/batch/security/?bid=flow_web",scmBranch:"release_train_samantha_2025-10-14_552097",scmName:"$20xN*Rt%j$P$E5h$jBsMldtMTRkb$F4T1dwaFIwWXdX$mhL-m1SW$R%MD0",scmVersion:"1.0.1.2917",webpackPluginVersion:"3.4.5",filename:"$ERJNWQy%kRP$EJo$jJSc1kyaz$hb%l5T$hkaF-zaHNXRE5D-%dSSFozWmpNMHBx$ERKT2RscEhWWFZa-m13d1dsZFJk$0l6%201T%1scHpZak5qZ*xwd*$IWmtl$E$6$2xkSmRHSlhPWFZpTTBwc1kw-zRkb%5I%m1waE1rWn$Xb*hOZ*xSR$R-%lNi$lpvWk$o$2$WcFRPWHBo%jBaN$dsZFJkb*x-$*1wa%0xWjFaR%01ZW1OdFR-WmhSemwyW$ROTmRt%ll%bXhN$jA1dldsZE9ja3h-%mp*a1IyZDFaRWhP-%dOdFpERmpkejA5"});return}f((0,ef.C0)(z.Zd,m.pathname,m.search))}},_=async()=>{let e=(0,ek.zQ)({eventName:"check_auth"});(0,O.YO)(e=>{e===eb.z.Failed?(0,ey.N6)():e===eb.z.Success&&(0,ey.vd)()});let t=await v();if(!t){e.error({reason:"autoLogin fail"});return}if((t.isSuccess?e.success:e.error)({reason:t.isSuccess?"autoLogin success":"autoLogin fail",error:t.isSuccess?void 0:t.error,meta:{type:"checkLogin"}}),null==t?void 0:t.isSuccess){var n;(0,eg.P5)((null===(n=t.userInfo)||void 0===n?void 0:n.new_user)?"register":"login")}t&&!t.isSuccess&&X.l.clear(),X.l.start(),window.addEventListener("storage",h)},g=()=>{window.removeEventListener("storage",h)};(0,l.useEffect)(()=>(eI(),_(),()=>{g()}),[])};var e4=n(574367),e6=n(282696),e3=n(34413);let e5=()=>(0,e3.G)("useLoaderData",e6.f_)(),e9=e=>/\/chat(\/\d*)?$/.test(e),e7=()=>{let{pathname:e,search:t,hash:n}=(0,eS.T)(),r=z.fU,i=(0,ef.$C)()||r;return null!=i?i:`${e===z.g9?z.fU:e}${t}${n}`},e8=[z.fU,z.M5,z.g9,z.nL,ev.o4[ev.rF.Search],ev.o4[ev.rF.Write],ev.o4[ev.rF.Image],ev.o4[ev.rF.Pdf],ev.o4[ev.rF.Coding],ev.o4[ev.rF.AiPPT]],te=()=>{let e=e7(),{accountInfo:t}=e5(),[n,r]=(0,l.useState)(em.BeforeAll),i=(0,e4.Z)(n);e2({navigatePath:e,authFailedAction:e=>{let t=e.endsWith("/")?e.slice(0,e.length-1):e;return e8.includes(e)||e8.includes(t)||e9(e)?"logout_but_stay":"redirect"},checkLogin:()=>{if("success"===t.message)return Q.k.persist.log({eventName:"check_login_preload_success"}),Promise.resolve(t.data);throw eV.W7.from({message:"error",data:{}})},getAuthState:()=>i.current,onAuthUpdate:e=>{Q.k.persist.info({eventName:"auth_state_change",meta:{authState:e}}),r(e)},isHref:!0})},tt=()=>{ep(),te()};var tn=n(605502);let tr={show_deep_thinking_btn:{parmas:["rich_media_with_text","loading","deep_think_show"],ignore_login_status:!0},deep_thinking_btn_memo:{parmas:["rich_media_with_text","loading","deep_think_memory"],ignore_login_status:!0},deep_thinking_auto:{parmas:["rich_media_with_text","loading","deep_thinking_auto"],ignore_login_status:!0},guidance_input_skill_behaivior:{parmas:["guidance_input_skill_behaivior","value"],ignore_login_status:!0},age_gate:{parmas:["guest_mode","pop_out"],is_login:!1},new_guidance_type:{parmas:["new_guidance_type","value"],is_login:!0},new_guest_guidance_type:{parmas:["new_guest_guidance_type","value"],is_login:!1},samantha_ci_interpreter:{parmas:["samantha_ci_interpreter","enable_nova_chat"],is_login:!1,ignore_login_status:!0},show_upgrade:{parmas:["samantha_skill","image","show_upgrade"],is_login:!0},enable_super_task:{parmas:["supertask","enable_supertask"],is_login:!0,ignore_login_status:!0},enable_super_task_mode_switch:{parmas:["supertask","route_flow_pc_flag"],is_login:!0,ignore_login_status:!0},aispace_revert:{parmas:["aispace_revert_v2","enable_ai_space"],is_login:!0,ignore_login_status:!0},aispace_rename:{parmas:["aispace_rename","name_type"],is_login:!0,ignore_login_status:!0},enable_deep_think_canvas:{parmas:["samantha_skill","writing","enable_deep_think_canvas"],is_login:!0},creation_agent_v2_enabled:{parmas:["samantha_agent_config","creation_agent","version"],ignore_login_status:!0},creation_agent_v4_enabled:{parmas:["samantha_agent_config","pc_4.0_creation_banner"],ignore_login_status:!0},ref_image_into_image_attachment_enabled:{parmas:["samantha_agent_config","creation_agent","ui_config","support_reference_image_count"],ignore_login_status:!0},is_new_video_generation_box:{parmas:["samantha_skill","video_generation","use_canvas"],ignore_login_status:!0},remove_video_daily_frequency_limit:{parmas:["samantha_agent_config","creation_agent","ui_config","remove_vedio_daily_frequency_limit"],ignore_login_status:!0},creation_batch_download_supported:{parmas:["creation_agent_batch_download","enable"],ignore_login_status:!0},codeAssistantReact:{parmas:["code_assistant_react","enable_compile_react"],is_login:!0},enableVlm:{parmas:["code_assistant_vlm","enable_vlm"],ignore_login_status:!0},enableCodeDevMode:{parmas:["code_assist_dev_mode","enable"],ignore_login_status:!0},enableTranslateOptimize:{parmas:["read_pdf_translate_optimize","value"],ignore_login_status:!0},enableNewImageTranslate:{parmas:["enable_new_image_translate","value"],ignore_login_status:!0},desktop_sidebar_open_in_search_experiment:{parmas:["desktop_sidebar_open_in_search_experiment","value"],ignore_login_status:!0,token_type:1},enable_think_container:{parmas:["rich_media_with_text","enable_think_container"],ignore_login_status:!0},enable_code_skill:{parmas:["skill","enable_code_assist_str"],ignore_login_status:!0},show_deep_thinking_binary_mode:{parmas:["deep_thinking_switch","value"],ignore_login_status:!0},enableWorkspace:{parmas:["enable_workspace","value"],ignore_login_status:!0},newWriteGuidanceTemplate:{parmas:["onboarding","write","skill_pack_optimized"],ignore_login_status:!0},enableCommerceCredit:{parmas:["commerce_credit_config","enable"],ignore_login_status:!0,token_type:n(120012).UB.App},enable_geogebra_code:{parmas:["enable_geogebra_code","value"],ignore_login_status:!0}};var ti=n(91138),to=n(814986),ta=n(633829);let ts=e=>{let{names:t,tea:n}=e;if(Q.k.persist.info({eventName:"l1_tea_exposureFEAB",meta:{count:t.length,passTea:!!n}}),!t.length){Q.k.persist.info({eventName:"l1_tea_exposureFEAB_0",meta:{count:0}});return}let r=null!=n?n:(0,ta.Y7)();if(!r)throw Q.k.persist.error({eventName:"l1_tea_exposureFEAB_tea_undefined",error:Error("[exposureFEAB] tea is undefined"),meta:{count:t.length}}),Error("[exposureFEAB] tea is undefined");Q.k.persist.info({eventName:"l1_tea_exposureFEAB_start",meta:{count:t.length}}),t.forEach(e=>{r.getVar(e,null,to.Z)})},tl=["hit_fe_exposure_test","hit_fe_exposure_test_uid"],tc=()=>{var e;Q.k.persist.info({eventName:"global_exposure_fe_ab",meta:{app:"app-flow-chat"}}),ts({names:[...tl,...(null===(e=window.NODE_SERVER_INJECTION)||void 0===e?void 0:e.abList)||[]],tea:ti.default})},tu=()=>{tt(),Y(),(0,l.useEffect)(()=>{(0,ee.initMsSDK)(),er(),(0,f.gD)({[h.d.serverAB]:{load:async()=>{var e,t;let n=await E.mH.GetAB({ab_request:tr});return null!==(t=null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.ab_results)&&void 0!==t?t:{}}},[h.d.tcc]:{load:tn.zG}}),tc()},[])};var td=n(225741),tp=n(468536),tv=n(218523),tf=n(758635),tm=n(468494),th=n(322639),t_=n(265568),tg=n(398976),ty=n(627394);let tb=e=>{let{onClick:t,text:n}=e;return et.Z.error({content:(0,ty.jsxs)("span",{children:[(0,ty.jsx)("span",{children:n}),(0,ty.jsx)("a",{className:"retry-button-yW02a8",onClick:t,children:(0,H.X9)("retry")})]}),duration:8,showClose:!0})},tS=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.useRef)(),n=(0,H.g1)();return{initCreateConversation:r=>{let{conversationId:i,messageId:o,token:a,botId:s,localConversationId:l,localConversationInfo:c,reportProps:u,scene:d,createFrom:p,click_from:v=e.click_from}=r,f=(0,ek.zQ)(u),m=l||tm.useFeedStore.getState().addNewLocalConversation({reportEvent:f,conversation:c,conversationId:l});s&&tf.useBotStore.getState().setLocalConversationIdForBot({botId:s,localConversationId:m});let h=e=>{if(t.current&&et.Z.close(t.current),i){let t=tm.useFeedStore.getState().conversationMap[i];if(!t||!(0,th.kJ)(t)){let t=Error("expect coco conversation but not found");return e.error({error:t,reason:"non_coco_conversation"}),et.Z.error({content:n("system_error_toast"),showClose:!1}),Promise.reject(t)}(0,eu.trackEvent)("create_new_chat",{click_from:v,conversation_id:i,bot_id:t.bot_id})}return tm.useFeedStore.getState().fetchConversationAndUpdateLocalStatusForBot({conversationId:i,messageId:o,localConversationId:m,token:a,botId:s,scene:d,createFrom:p}).then(e=>(tv.R.getState().setActiveKey(void 0),e)).catch(e=>{var r,i;let o=n("create_new_chat_failed");throw(0,t_.Rk)(e)&&(null==e?void 0:null===(r=e.errorOption)||void 0===r?void 0:r.message)&&(o=null==e?void 0:null===(i=e.errorOption)||void 0===i?void 0:i.message),tg.k,t.current=tb({text:o,onClick:()=>{h((0,ek.zQ)({eventName:u.eventName,meta:{...u.meta,retry:!0}}))}}),e})};return{newLocalConversationId:m,createConversationForBot:()=>h(f)}}}};var tk=n(344482),tw=n(604963),tT=n(397175),tE=n(234761);let tR=function(){var e;let{chatType:t,chatId:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,H.g1)(),i=(0,tT.Lp)(t),o=(0,tm.useFeedStore)(e=>{var t;return null===(t=(0,tE.jo)(e,n))||void 0===t?void 0:t.bot_id}),a=i?n:o,s=e=>{if(null==e?void 0:e.disabled_tag)return({[tw.yy.Reviewing]:r("bot_ban_under_review"),[tw.yy.Ban]:r("bot_disabled_profile"),[tw.yy.Delete]:r("disable_input_del_bot"),[tw.yy.Private]:r("chat_page_notice")})[e.disabled_tag]||(null==e?void 0:e.disabled_desc)},l=e=>i?[tw.yy.Ban,tw.yy.Reviewing].includes(null==e?void 0:e.disabled_tag):!!(null==e?void 0:e.disabled),c=e=>{let t=a&&e.botMap[a];if(t)return{isDisabled:l(t),disabledText:s(t)}},u=(0,tf.useBotStore)(c,tk.X),d=(0,tf.useGuestBotStore)(c,tk.X);return null!==(e=null!=u?u:d)&&void 0!==e?e:{isDisabled:!1}};var tC=n(501191);let tI=()=>{var e;let t=(0,u.s)(),{currentChatViewConfig:n}=(0,w.sQ)("chatViewCoreStore"),{wrapperToggle:r}=(0,td.P)(null!==(e=null==n?void 0:n.chatId)&&void 0!==e?e:""),{initCreateConversation:i}=tS(),o=async e=>{let{botId:t,localConversationId:n,token:r,createFrom:o}=e,{newLocalConversationId:a,createConversationForBot:s}=i({botId:t,token:r,localConversationId:n,createFrom:o,reportProps:{eventName:"create_conversation",meta:{from:"url_new"}}});return{conversation:await s(),newLocalConversationId:a}},a=tR(n),s=(0,eS.T)(),{id:d}=(0,tC.U)();(0,l.useEffect)(()=>{tp.x.setState({ctx:{toChatPage:()=>(0,c.D)("chatNavigateService").then(e=>null==e?void 0:e.navigateToChatGuidancePage()),toUserProfile:e=>{let{userId:n,enterFrom:r}=e;t(`${z.Ve}/${n}`,{state:{enter_from:r}})},onOpenCurrentBotSideBar:e=>{let{enterFrom:t}=e;r({enter_from:t})},onCreateConversationByBot:o,conversationDisabledParams:a,locationState:s.state,locationKey:s.key,idInParams:d}})},[])};var tx=n(118200),tN=n(474227),tM=n(82203),tP=n(698570),tA=n(420111),t$=n(101474),tj=n(226403),tO=n(14345),tF=n(980408),tL=n(143930),tD=n(669160),tW=n.n(tD),tZ=n(591332),tU=n(966015),tB=n(864802),tz=n(627333),tV=n(454344),tH=n(307371),tG={"notice-content":"notice-content-ZhXzdc",noticeContent:"notice-content-ZhXzdc",info:"info-AVlZp6",title:"title-WYJnVc",name:"name-KqWT7s","button-group":"button-group-_dh7yN",buttonGroup:"button-group-_dh7yN",button:"button-piNWxd","reject-button":"reject-button-bkhg17",rejectButton:"reject-button-bkhg17",disabled:"disabled-Ur8LWz",rejected:"rejected-JTUvcr",transition:"transition-KMTaBz"};let tK=(e,t,n)=>{let[r,i]=(0,l.useState)(t[e]);return[r,t=>{n({[e]:t}),i(t)}]},tX=e=>{let{t,className:n,title:r,avatarURL:i,invitationId:o,switchWorkspace:a,close:s,onHandled:l,state:c,setState:u}=e,{handleInvitation:d,handleInvitationLoading:p}=(0,tV.w)({t}),{refreshWorkspaceList:v}=(0,tz.A)(),[f,m]=tK("isInTransition",c,u),[h,_]=tK("isAccepting",c,u),[g,y]=tK("isRejecting",c,u),[b,S]=tK("hasRejected",c,u),[k,w]=tK("hasAccepted",c,u),T=()=>{m(!0)},E=async()=>{(0,eu.trackEvent)("click_business_space_invitation_notice",{button_name:"deny"}),y(!0),await d(o,!1),T(),S(!0),l("reject"),await (0,tO.G)(3600),s(),await (0,tO.G)(350),v()},R=async()=>{k?a():((0,eu.trackEvent)("click_business_space_invitation_notice",{button_name:"accept"}),_(!0),await d(o,!0)&&(T(),w(!0),await (0,tO.G)(500),v(!0),l("accept")))},C=h&&p||k||b,I=g&&p||b;return(0,ty.jsxs)("div",{className:tW()(tG["workspace-invite-notice"],n),children:[(0,ty.jsxs)("div",{className:tG["notice-content"],children:[(0,ty.jsx)(tH.z,{avatarURL:i,size:36}),(0,ty.jsxs)("div",{className:tG.info,children:[(0,ty.jsx)("div",{className:tG.title,children:t("enterprise_space_invite_header")}),(0,ty.jsx)(tZ.Z.Text,{className:tG.name,ellipsis:{showTooltip:{opts:{content:r},renderTooltip:(e,t)=>(0,ty.jsx)(tU.s,{position:"left",content:e,children:t})}},children:r})]})]}),(0,ty.jsxs)("div",{className:tG["button-group"],children:[(0,ty.jsx)(tB.R,{className:tW()(tG["reject-button"],tG.button,b&&tG.rejected,k&&f&&tG.transition,C&&tG.disabled),type:"quartary",loading:g&&p,disabled:C,onClick:E,children:t(b?"enterprise_space_invite_status_rejected":"enterprise_space_invite_btn_reject")}),(0,ty.jsx)(tB.R,{className:tW()(tG.button,b&&f&&tG.transition),type:"primary",loading:h&&p,disabled:I,onClick:R,children:t(k?"enterprise_space_invite_btn_enter":"enterprise_space_invite_btn_accept")})]})]})},tq=e=>{let{disableNotification:t}=e||{},n=(0,H.g1)(),{workspaceInvitationList:r,hiddenInvitations:i,visibleInvitations:o}=(0,tL.z)(e=>({workspaceInvitationList:e.workspaceInvitationList,hiddenInvitations:e.hiddenInvitations,visibleInvitations:e.visibleInvitations}),tk.X),{switchWorkspaceByWorkspaceId:a}=(0,tj.o)(),[s,c]=(0,l.useState)();(0,l.useEffect)(()=>{if(!r){Q.k.persist.info({eventName:"calc_workspace_invitation_list",meta:{workspace_invitation_count:0}});return}let[e,t]=(0,tA.Z)(r,e=>null==s?void 0:s.find(t=>t.id===String(e.invitation_id)));Q.k.persist.info({eventName:"calc_workspace_invitation_list",meta:{workspace_invitation_count:r.length,visible_invitation_count:t.length,hidden_invitation_count:e.length,hidden_invitation_in_storage_count:null==s?void 0:s.length}}),tL.z.getState().setInvitations({hiddenInvitations:e,visibleInvitations:t})},[r,s]),(0,l.useEffect)(()=>{try{(null==s?void 0:s.length)&&(tF.N.setItem("workspace-invitation-hidden-v1",JSON.stringify(s)),Q.k.persist.info({eventName:"set_workspace_invitation_hidden_in_storage",meta:{success:"1"}}))}catch(e){Q.k.persist.error({eventName:"set_workspace_invitation_hidden_in_storage",error:e,meta:{error:null==e?void 0:e.message,success:"0"}})}},[s]),(0,l.useEffect)(()=>{(async()=>{let e=await tF.N.getItem("workspace-invitation-hidden-v1");try{let t=JSON.parse(e||"[]");(null==t?void 0:t.length)&&c(t),Q.k.persist.info({eventName:"get_workspace_invitation_hidden_in_storage",meta:{success:"1"}})}catch(e){Q.k.persist.error({eventName:"get_workspace_invitation_hidden_in_storage",error:e,meta:{error:null==e?void 0:e.message,success:"0"}})}})()},[]);let u=(0,l.useRef)([]);return(0,l.useEffect)(()=>{let{hasInitInvitationNotice:e,setHasInitInvitationNotice:r}=tL.z.getState();!t&&(null==o?void 0:o.length)&&!e&&(r(!0),(async()=>{let e=await Promise.all(o.map(async(e,t)=>{await (0,tO.G)(200*t);let r="",i="",o={isInTransition:!1,isAccepting:!1,isRejecting:!1,hasRejected:!1,hasAccepted:!1},s=(0,ty.jsx)(tX,{t:n,avatarURL:e.avatar_url,title:e.name,invitationId:String(e.invitation_id),switchWorkspace:()=>a(String(e.workspace_id)),close:()=>t$.Z.close(r),onHandled:e=>{i=e},state:o,setState:e=>{Object.assign(o,e)}},e.workspace_id);return r=t$.Z.open({className:"notification-z1cev5",title:s,duration:0,onCloseClick:()=>{i||((0,eu.trackEvent)("click_business_space_invitation_notice",{button_name:"ignore"}),c(t=>[...t||[],{date:Date.now(),id:String(e.invitation_id)}]))},zIndex:1020})}));u.current=e})())},[o]),(0,l.useEffect)(()=>()=>{var e;null===(e=u.current)||void 0===e||e.forEach(e=>{t$.Z.close(e)})},[]),{hiddenInvitations:i}};var tJ=n(760441);let tQ=e=>{let{disableInvitations:t}=e||{},[n,r]=(0,l.useState)(!1),i=(0,O.nu)(),{userInfo:o}=(0,tM.h3)(e=>({userInfo:e.userInfo}),tk.X),{workspaceList:a}=(0,tL.z)(e=>({workspaceList:e.workspaceList}),tk.X),{hiddenInvitations:s}=tq();return(0,tP.Z)(async()=>{if(!i||!ei.N)return;let{initWorkspaceStatus:e}=tL.z.getState();("uninit"===e||"failed"===e)&&(tL.z.getState().setInitWorkspaceStatus("loading"),await (0,tJ.r)({onlyList:null!=t&&t,throwError:!0}),tL.z.getState().setInitWorkspaceStatus("initialed"))},{refreshDeps:[i],retryCount:10,onError:()=>{tL.z.getState().setInitWorkspaceStatus("failed")}}),(0,l.useEffect)(()=>{if((null==o?void 0:o.user_id_str)&&(null==a?void 0:a.length)){var e;let t=a.find(e=>String(e.workspace_scoped_uid)===o.user_id_str);t&&t.workspace_id!==(null===(e=tL.z.getState().currentWorkspace)||void 0===e?void 0:e.workspace_id)&&(tL.z.getState().setCurrentWorkspace(t),r(!0))}},[o,a]),{isReady:n,hiddenInvitations:s}};var tY=n(411358),t0=n(723431),t1=n(107481),t2=n(67864),t4=n(156217),t6=n(279947),t3=n(122621),t5=n(558882),t9=n(9591);function t7(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let t8=((i={})[i.Timeout=-1001]="Timeout",i[i.ClientHandlerError=-1002]="ClientHandlerError",i);class ne{uniqueClientId(){var e,t;return"function"==typeof(null===(t=window)||void 0===t?void 0:null===(e=t.crypto)||void 0===e?void 0:e.randomUUID)?window.crypto.randomUUID():`${Date.now().toString(36)}-${Math.random().toString(36).substring(2)}`}onAckMessage(e){let{id:t,result:n,error:r,toClientId:i}=e;if(i!==this.clientId)return;let o=this.pendingMessages.get(t);if(o){let{resolve:e,reject:i}=o;this.pendingMessages.delete(t),r?i(r):e(n)}}postAckMessage(e,t,n){let r={type:this.channelType,clientId:this.clientId,toClientId:e.clientId,id:e.id,ack:!0};t?r.error=t:r.result=n,this.targetWindow.postMessage(r,{targetOrigin:this.targetOrigin})}postMessage(e){let{targetOrigin:t,transfer:n,timeout:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((i,o)=>{let a=this.messageId++,s={type:this.channelType,clientId:this.clientId,id:a,data:e},l={targetOrigin:t||this.targetOrigin};null!=n&&(l.transfer=n),this.targetWindow.postMessage(s,l),this.pendingMessages.set(a,{resolve:i,reject:o});let c=r||this.defaultTimeout;setTimeout(()=>{this.pendingMessages.has(a)&&(this.pendingMessages.delete(a),o(new nn(`[MessageBridge] ${s.type} ${s.id} timeout of ${c}ms`,t8.Timeout)))},c)})}release(){this.pendingMessages.clear(),this.targetWindow.removeEventListener("message",this.onMessage)}constructor({channelType:e,messageHandler:t,clientId:n,targetOrigin:r="*",defaultTimeout:i=500,targetWindow:o=window}){if(t7(this,"targetWindow",void 0),t7(this,"channelType",void 0),t7(this,"clientId",void 0),t7(this,"defaultTimeout",void 0),t7(this,"pendingMessages",new Map),t7(this,"messageId",void 0),t7(this,"targetOrigin",void 0),t7(this,"messageHandler",void 0),t7(this,"onMessage",async e=>{let t=e.data;if((null==t?void 0:t.type)===this.channelType&&(null==t?void 0:t.clientId)!==this.clientId){if(null==t?void 0:t.ack){this.onAckMessage(t);return}if("function"==typeof this.messageHandler&&(null==t?void 0:t.data))try{await this.messageHandler(new nt(this,e,t))}catch(n){let{message:e}=n;this.postAckMessage(t,{message:`[MessageBridge] client handler error: ${e}`,code:t8.ClientHandlerError})}}}),!e)throw Error("[MessageBridge] channelType is required");this.channelType=e,this.targetWindow=o,this.defaultTimeout=i,this.pendingMessages=new Map,this.messageId=0,this.clientId=n||this.uniqueClientId(),this.targetOrigin=r,this.messageHandler=t,this.targetWindow.addEventListener("message",this.onMessage)}}class nt{get data(){return this.payload.data}resolve(e){"pending"===this.state&&(this.bridge.postAckMessage(this.payload,void 0,e),this.state="fulfilled")}reject(e){"pending"===this.state&&(this.bridge.postAckMessage(this.payload,e),this.state="rejected")}constructor(e,t,n){t7(this,"state","pending"),t7(this,"bridge",void 0),t7(this,"payload",void 0),t7(this,"originEvent",void 0),this.bridge=e,this.originEvent=t,this.payload=n}}class nn extends Error{constructor(e,t){super(e),t7(this,"code",void 0),this.code=t}}let nr=((o={}).SendMessage="sendMessage",o),ni=((a={})[a.AskDoubao=0]="AskDoubao",a[a.AISearch=1]="AISearch",a[a.ContinueChat=2]="ContinueChat",a[a.Suggestion=3]="Suggestion",a[a.ImageAsk=4]="ImageAsk",a),no=((s={}).Web="flow-web",s.Extension="flow-web-ext",s);class na extends ne{constructor(e){super({targetWindow:window,channelType:"flowExtensionMessage",clientId:e.clientId,targetOrigin:`${location.protocol}//${location.host}`,messageHandler:e.messageHandler})}}var ns=n(636674),nl=n(125411);let nc=()=>{var e,t,n;let r=(0,nl.S)();return(null==r?void 0:null===(e=r[2])||void 0===e?void 0:e.id)==="main_chat/page"||(null==r?void 0:null===(t=r[3])||void 0===t?void 0:t.id)==="main_chat/(id$)/page"||(null===(n=r[0])||void 0===n?void 0:n.id)==="chat_layout"&&(!r[1]||"chat_(id)/page"===r[1].id)},nu=e=>({text:e,extraExt:{input_skill:JSON.stringify({skill_id:String(ns.SkillType.Search),skill_type:ns.SkillType.Search,variables:{}}),earlier_search_result:"1",...(0,O.M7)()?{}:{send_from_skill_guidance_or_suggestion:"1"}},reportParams:{scene:"highlight_search_result_tool",sec_scene:"highlight_search_result_ask"}}),nd=(e,t)=>{let n="string"==typeof t?t:(null==t?void 0:t.type)==="text"?t.text:"";return{text:e,extraExt:{...n?{reference_content:JSON.stringify([{type:"text",text:n||""}])}:{}},reportParams:{scene:"text_input_box",sec_scene:n?"highlight_text_input_box":"web_text_input_box"}}},np=(e,t)=>{var n;let r=null==t?void 0:t[0];if(!(null==r?void 0:r.fileBlob)&&!(null==r?void 0:null===(n=r.fileBlobData)||void 0===n?void 0:n.length))return{text:e,reportParams:{scene:"unknown"}};let{fileKey:i,fileName:o,fileBlobData:a=[]}=r,s=r.fileBlob||new File([new Blob([new Uint8Array(a)])],o,{type:"image/png"}),l=(0,tY.Z)(),c={type:"image",localKey:l,blobUrl:URL.createObjectURL(s),file:s,key:i,fileKey:i,loading:!1,percent:100,failed:!1};(0,w.Wp)("attachmentUploadStore").setState(e=>({...e,preprocessTaskMap:{...e.preprocessTaskMap,[l]:c}}));let u=(0,t3.m0)({text:e,attachments:[{type:"image",file:s,localKey:l,from:""}],attachmentKeys:[r.fileKey],attachmentStates:[{type:"image",fileName:o,fileKey:r.fileKey,uploadPercent:100,status:t1.O.Normal}],enableImageVlm:!0},{from:"",scene:"image_ask_doubao",sec_scene:"image_ask_doubao"});return u||{text:e,reportParams:{scene:"unknown"}}},nv=e=>{let t=(0,nl.S)(),n=(0,u.s)(),{sendMessage:r}=(0,t4.GL)("chatMessageService"),{localThreadSendMessage:i,sendMessageHelper:o}=(0,t0.w)({chatId:"",chatType:t2.z.NewThread,navigate:n}),{run:a}=(0,L.Z)(async(n,a)=>{let s=n.scene===ni.AISearch?nu(n.content):n.scene===ni.Suggestion?{text:n.content,reportParams:{scene:"suggested_prompts"}}:n.scene===ni.ContinueChat?nd(n.content,n.ref):n.scene===ni.ImageAsk?np(n.content,n.attachments||[]):{text:n.content,reportParams:{scene:"unknown"}};if(s.reportParams={...s.reportParams,...n.reportParams},a.resolveConversationId)r([{...s,conversationId:a.resolveConversationId}]);else if(t&&(null==e?void 0:e.chatType)===t2.z.Conversation&&!n.isNewChat)r([s]);else{let{resolveLocalConversationId:e,toNewChat:t}=o();a.resolveLocalConversationId=e,(0,w.Wp)("chatViewCoreStore").setState({currentLocalConversationId:e}),r(await i(e,[s])),t()}});return a},nf=e=>{let t=nc(),n=(0,u.s)(),{sendMessageHelper:r}=(0,t0.w)({chatId:"",chatType:t2.z.NewThread,navigate:n}),{run:i}=(0,L.Z)(async(i,o)=>{let a=await (0,c.D)("refContentStoreService"),s=null==e?void 0:e.chatId;if(o.resolveConversationId)s=o.resolveConversationId;else if(t&&(null==e?void 0:e.chatType)===t2.z.Conversation&&!i.isNewChat)s=null==e?void 0:e.chatId;else if(o.resolveLocalConversationId)s=o.resolveLocalConversationId;else{let{resolveLocalConversationId:e}=r();o.resolveLocalConversationId=e,s=e,(0,w.Wp)("chatViewCoreStore").setState({currentLocalConversationId:e}),setTimeout(()=>n(z.fU),100)}s&&i.ref&&(null==a||a.setRefContents({refContents:"string"==typeof i.ref?[{type:"text",text:i.ref}]:[i.ref],channel:"default",source:ns.SkillType.ReferenceAsk},s))});return i},nm=e=>{let t=(0,u.s)(),n=nc(),{initLoadMessageInChatPage:r}=(0,t6.Q)(),{run:i}=(0,L.Z)((i,o,a)=>{(async()=>{var a,s,l,c,u,d,p;if(!(null===(a=i.syncMessageIds)||void 0===a?void 0:a.length))return;n&&(null==e?void 0:e.chatType)===t2.z.Conversation&&!i.isNewChat?o.resolveConversationId=e.chatId:o.resolveConversationId=(null===(d=await (await (0,t5.E)()).threadCreate({bot_id:t9.e}))||void 0===d?void 0:null===(u=d.data)||void 0===u?void 0:null===(c=u.thread_info)||void 0===c?void 0:null===(l=c.conversation)||void 0===l?void 0:l.conversation_id)||"",await E.kz.PutChatRecord({conversation_id:o.resolveConversationId,tool_message_id:i.syncMessageIds,switch_message_id:(null==i?void 0:null===(s=i.syncMessageIds)||void 0===s?void 0:s[0])||"0"});let v=null!==(p=await tm.useFeedStore.getState().fetchUpdateConversationInfo(o.resolveConversationId,"refreshChatView"))&&void 0!==p?p:null;(null==v?void 0:v.conversation_id)&&await r(null==v?void 0:v.conversation_id),o.resolveConversationId!==(null==e?void 0:e.chatId)&&setTimeout(()=>{t(z.fU+o.resolveConversationId)},100)})().then(a).catch(e=>Q.k.persist.warning({message:"WebExtBridge Error: syncToChat failed",error:null==e?void 0:e.toString()}))});return i},nh=e=>{let t=nv(e),n=nf(e),r=nm(e);(0,l.useEffect)(()=>{let e=new na({clientId:no.Web,async messageHandler(e){var i,o;let a=(0,ek.zQ)({eventName:"web_extension_message_event",meta:{method:null===(i=e.data)||void 0===i?void 0:i.method,scene:null===(o=e.data)||void 0===o?void 0:o.scene}});try{let{data:i}=e;if((null==i?void 0:i.method)!==nr.SendMessage)throw Error(`UnImplement ExtensionMessageMethod\u{FF1A}${null==i?void 0:i.method}`);let o={resolveLocalConversationId:"",resolveConversationId:""};(i.scene===ni.Suggestion||i.scene===ni.ContinueChat)&&(e.resolve(),await new Promise(e=>r(i,o,e))),(i.scene===ni.AISearch||i.scene===ni.Suggestion||i.scene===ni.ContinueChat||i.scene===ni.ImageAsk)&&t(i,o),(i.scene===ni.AskDoubao||i.scene===ni.ContinueChat||i.scene===ni.ImageAsk)&&n(i,o),a.success({meta:{event_data:JSON.stringify(i)}}),e.resolve()}catch(t){a.error({reason:null==t?void 0:t.toString(),error:t}),e.reject(t)}}});return()=>{e.release()}},[])};var n_=n(577831);let ng=async e=>{let t=await e;if(t)return{memoDeepThinkingSwitchValue:(null==t?void 0:t.deep_thinking_btn_memo)==="1",deepThinkingAutoCotMode:null==t?void 0:t.deep_thinking_auto,showDeepThinkingBinaryMode:(null==t?void 0:t.show_deep_thinking_binary_mode)==="1"}},ny=async e=>{if(n_._f)try{let n=await ng(e());if(!n)return;let r=()=>{i.setState({...n})},i=(0,w.Wp)("deepThinkingControlStore");if("persist"in i&&!i.persist.hasHydrated()){var t;return null===(t=i.persist)||void 0===t?void 0:t.onFinishHydration(()=>{r()})}r()}catch(e){Q.k.persist.error({message:"deepthinking onInit error",error:e})}},nb=()=>{(0,f.HF)("enable_think_container",{source:h.d.serverAB}).then(e=>{(0,w.Wp)("deepThinkingControlStore").setState({enableDeepThinkingContainer:"1"===e})}).catch(e=>{Q.k.persist.error({message:"deepthinking container onInit error",error:e})})};var nS=n(147705),nk=n(713688),nw=n(951452);let nT=()=>{(0,nk.yL)(),(0,nw.sN)(),E.mH.SupertaskSetting().then(e=>{if(e.data){var t,n;let{enable:r=!1,route_flowpc:i=!1,ui_config:o={}}=e.data;nk.GL.getState().setSuperTaskAbConfig({enable:r,route_flowpc:i,enable_guidance_switch_memo:null===(t=null==o?void 0:o.enable_guidance_switch_memo)||void 0===t||t,enable_auto_switch:null===(n=null==o?void 0:o.enable_auto_switch)||void 0===n||n})}}).catch(()=>{})};var nE=n(727591),nR=n(226692),nC=n(476697),nI=n(475434);let nx=()=>{let{settingData:e}=(0,w.sQ)("launcherRawSettingStore");(0,l.useEffect)(()=>{var t,n;nI.p.getState().setContentTypeWhiteList(null!==(n=null==e?void 0:null===(t=e.share_config)||void 0===t?void 0:t.supported_content_types)&&void 0!==n?n:[])},[])},nN=()=>{};var nM=n(981376),nP=n(477041),nA=n(425207);let n$=e=>{var t;let{conversationId:n}=e,{onOpenFileByKey:r,onOpenFileByLink:i}=(0,nA.Os)(),o=(0,eS.T)(),a=()=>{Q.k.persist.info({eventName:"auto_open_pdf_page",meta:{success:1}})},{autoOpenPdfPage:s}=null!==(t=null==o?void 0:o.state)&&void 0!==t?t:{};(0,l.useEffect)(()=>{if(s){if((0,nM.Z)(s)){let e={..."assetList"in s&&Array.isArray(s.assetList)?{assetList:s.assetList}:{},..."realFileKey"in s&&(0,nP.Z)(s.realFileKey)?{realFileKey:s.realFileKey}:{}};"key"in s&&(0,nP.Z)(s.key)&&s.key&&r?(r(s.key,"PDF",{pdf:e,openFrom:s.openFrom},{entranceType:s.entranceType}),a()):"url"in s&&(0,nP.Z)(s.url)&&s.url&&i&&(i(s.url,{attchmentType:"pdf",pdf:e,openFrom:s.openFrom},{entranceType:s.entranceType}),a())}window.history.replaceState({},"")}},[n,s])};var nj=n(357921);let nO=async()=>{try{let e=await (0,f.o1)({source:h.d.serverAB}),t="1"===String((0,tx.Z)(e,"enableVlm")),n="1"===String((0,tx.Z)(e,"enableCodeDevMode")),r="0"!==String((0,tx.Z)(e,"aispace_revert"));nj.mr.getState().updateAbResults({enableVlm:t,enableCodeDevMode:n,enableAISpace:r})}catch(e){return{}}},nF=()=>{var e;let{currentChatViewConfig:t}=(0,w.sQ)("chatViewCoreStore");nx(),tQ(),n$({conversationId:null!==(e=null==t?void 0:t.chatId)&&void 0!==e?e:""}),nh(t);let n=(0,w.sQ)("launcherRawSettingStore",e=>{var t;return(0,tx.Z)(null===(t=e.settingData)||void 0===t?void 0:t.ab_config,"ab_results")},tN.Z);(0,l.useEffect)(()=>{(0,nE.c)({}),(0,nR.oy)({}),(0,nC.z)({}),(0,nj.Db)({}),nb(),nO(),nN(),(0,nk.yL)(),(0,nS.Ob)(),nT(),(0,w.Wp)("flowWebLayoutStore").setState({businessInit:!0})},[]),(0,l.useEffect)(()=>{n&&ny(()=>Promise.resolve(n))},[n])},nL=()=>{tI(),tu(),Z(),nF(),(0,l.useEffect)(()=>{Promise.all([n.e("43850"),n.e("75972")]).then(n.bind(n,599104)).then(e=>{let{sendMessageToExt:t}=e;t({name:"web-homepage-loaded",body:{originContext:"web"}})})},[])},nD=()=>(nL(),(0,ty.jsx)(ty.Fragment,{}))},55343:function(e,t,n){"use strict";n.d(t,{EW:function(){return o}});var r=n(429996),i=0;function o(){r.useEffect(()=>{var e,t;let n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:a()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:a()),i++,()=>{1===i&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),i--}},[])}function a(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}},161528:function(e,t,n){"use strict";let r;n.d(t,{M:function(){return p}});var i=n(429996),o=n(764450),a=n(65943),s=n(445491),l=n(627394),c="focusScope.autoFocusOnMount",u="focusScope.autoFocusOnUnmount",d={bubbles:!1,cancelable:!0},p=i.forwardRef((e,t)=>{let{loop:n=!1,trapped:r=!1,onMountAutoFocus:p,onUnmountAutoFocus:_,...g}=e,[y,b]=i.useState(null),S=(0,s.W)(p),k=(0,s.W)(_),w=i.useRef(null),T=(0,o.e)(t,e=>b(e)),E=i.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;i.useEffect(()=>{if(r){let e=function(e){if(E.paused||!y)return;let t=e.target;y.contains(t)?w.current=t:m(w.current,{select:!0})},t=function(e){if(E.paused||!y)return;let t=e.relatedTarget;null===t||y.contains(t)||m(w.current,{select:!0})};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let n=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&m(y)});return y&&n.observe(y,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[r,y,E.paused]),i.useEffect(()=>{if(y){h.add(E);let e=document.activeElement;if(!y.contains(e)){let t=new CustomEvent(c,d);y.addEventListener(c,S),y.dispatchEvent(t),t.defaultPrevented||(function(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.activeElement;for(let r of e)if(m(r,{select:t}),document.activeElement!==n)return}(v(y).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&m(y))}return()=>{y.removeEventListener(c,S),setTimeout(()=>{let t=new CustomEvent(u,d);y.addEventListener(u,k),y.dispatchEvent(t),t.defaultPrevented||m(null!=e?e:document.body,{select:!0}),y.removeEventListener(u,k),h.remove(E)},0)}}},[y,S,k,E]);let R=i.useCallback(e=>{if(!n&&!r||E.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){let t=e.currentTarget,[r,o]=function(e){let t=v(e);return[f(t,e),f(t.reverse(),e)]}(t);r&&o?e.shiftKey||i!==o?e.shiftKey&&i===r&&(e.preventDefault(),n&&m(o,{select:!0})):(e.preventDefault(),n&&m(r,{select:!0})):i===t&&e.preventDefault()}},[n,r,E.paused]);return(0,l.jsx)(a.WV.div,{tabIndex:-1,...g,ref:T,onKeyDown:R})});function v(e){let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function f(e,t){for(let n of e)if(!function(e,t){let{upTo:n}=t;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===n||e!==n);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(n,{upTo:t}))return n}function m(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.focus){var n;let r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&(n=e)instanceof HTMLInputElement&&"select"in n&&t&&e.select()}}p.displayName="FocusScope";var h=(r=[],{add(e){let t=r[0];e!==t&&(null==t||t.pause()),(r=_(r,e)).unshift(e)},remove(e){var t;null===(t=(r=_(r,e))[0])||void 0===t||t.resume()}});function _(e,t){let n=[...e],r=n.indexOf(t);return -1!==r&&n.splice(r,1),n}},328090:function(e,t,n){"use strict";n.d(t,{Eh:function(){return G},VY:function(){return H},fC:function(){return B},h_:function(){return V},xz:function(){return z}});var r=n(429996),i=n(93594),o=n(764450),a=n(393165),s=n(944805),l=n(55343),c=n(161528),u=n(535626),d=n(204598),p=n(89033),v=n(965601),f=n(65943),m=n(789961),h=n(936840),_=n(462233),g=n(105241),y=n(627394),b="Popover",[S,k]=(0,a.b)(b,[d.D7]),w=(0,d.D7)(),[T,E]=S(b),R=e=>{let{__scopePopover:t,children:n,open:i,defaultOpen:o,onOpenChange:a,modal:s=!1}=e,l=w(t),c=r.useRef(null),[p,v]=r.useState(!1),[f,m]=(0,h.T)({prop:i,defaultProp:null!=o&&o,onChange:a,caller:b});return(0,y.jsx)(d.fC,{...l,children:(0,y.jsx)(T,{scope:t,contentId:(0,u.M)(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:r.useCallback(()=>m(e=>!e),[m]),hasCustomAnchor:p,onCustomAnchorAdd:r.useCallback(()=>v(!0),[]),onCustomAnchorRemove:r.useCallback(()=>v(!1),[]),modal:s,children:n})})};R.displayName=b;var C="PopoverAnchor";r.forwardRef((e,t)=>{let{__scopePopover:n,...i}=e,o=E(C,n),a=w(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:l}=o;return r.useEffect(()=>(s(),()=>l()),[s,l]),(0,y.jsx)(d.ee,{...a,...i,ref:t})}).displayName=C;var I="PopoverTrigger",x=r.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,a=E(I,n),s=w(n),l=(0,o.e)(t,a.triggerRef),c=(0,y.jsx)(f.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":U(a.open),...r,ref:l,onClick:(0,i.Mj)(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?c:(0,y.jsx)(d.ee,{asChild:!0,...s,children:c})});x.displayName=I;var N="PopoverPortal",[M,P]=S(N,{forceMount:void 0}),A=e=>{let{__scopePopover:t,forceMount:n,children:r,container:i}=e,o=E(N,t);return(0,y.jsx)(M,{scope:t,forceMount:n,children:(0,y.jsx)(v.z,{present:n||o.open,children:(0,y.jsx)(p.h,{asChild:!0,container:i,children:r})})})};A.displayName=N;var $="PopoverContent",j=r.forwardRef((e,t)=>{let n=P($,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,o=E($,e.__scopePopover);return(0,y.jsx)(v.z,{present:r||o.open,children:o.modal?(0,y.jsx)(F,{...i,ref:t}):(0,y.jsx)(L,{...i,ref:t})})});j.displayName=$;var O=(0,m.Z8)("PopoverContent.RemoveScroll"),F=r.forwardRef((e,t)=>{let n=E($,e.__scopePopover),a=r.useRef(null),s=(0,o.e)(t,a),l=r.useRef(!1);return r.useEffect(()=>{let e=a.current;if(e)return(0,_.Ry)(e)},[]),(0,y.jsx)(g.Z,{as:O,allowPinchZoom:!0,children:(0,y.jsx)(D,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,i.Mj)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),l.current||null===(t=n.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:(0,i.Mj)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;l.current=r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,i.Mj)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),L=r.forwardRef((e,t)=>{let n=E($,e.__scopePopover),i=r.useRef(!1),o=r.useRef(!1);return(0,y.jsx)(D,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var r,a;null===(r=e.onCloseAutoFocus)||void 0===r||r.call(e,t),t.defaultPrevented||(i.current||null===(a=n.triggerRef.current)||void 0===a||a.focus(),t.preventDefault()),i.current=!1,o.current=!1},onInteractOutside:t=>{var r,a;null===(r=e.onInteractOutside)||void 0===r||r.call(e,t),t.defaultPrevented||(i.current=!0,"pointerdown"!==t.detail.originalEvent.type||(o.current=!0));let s=t.target;(null===(a=n.triggerRef.current)||void 0===a?void 0:a.contains(s))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&o.current&&t.preventDefault()}})}),D=r.forwardRef((e,t)=>{let{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:p,onFocusOutside:v,onInteractOutside:f,...m}=e,h=E($,n),_=w(n);return(0,l.EW)(),(0,y.jsx)(c.M,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:(0,y.jsx)(s.XB,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:f,onEscapeKeyDown:u,onPointerDownOutside:p,onFocusOutside:v,onDismiss:()=>h.onOpenChange(!1),children:(0,y.jsx)(d.VY,{"data-state":U(h.open),role:"dialog",id:h.contentId,..._,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),W="PopoverClose";r.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,o=E(W,n);return(0,y.jsx)(f.WV.button,{type:"button",...r,ref:t,onClick:(0,i.Mj)(e.onClick,()=>o.onOpenChange(!1))})}).displayName=W;var Z=r.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=w(n);return(0,y.jsx)(d.Eh,{...i,...r,ref:t})});function U(e){return e?"open":"closed"}Z.displayName="PopoverArrow";var B=R,z=x,V=A,H=j,G=Z},311466:function(e,t,n){"use strict";n.d(t,{N:function(){return _}});var r=function(e,t,n){var r=e.length;if(r!==t.length)return!1;for(;r--&&n(e[r],t[r]););return -1===r},i=function(e,t,n){if(e.size!==t.size)return!1;for(var r,i=e.entries();!(r=i.next()).done;)if(!t.has(r.value[0])||!n(r.value[1],t.get(r.value[0])))return!1;return!0},o=function(e,t){if(e.size!==t.size)return!1;for(var n,r=e.values();!(n=r.next()).done;)if(!t.has(n.value))return!1;return!0},a=function(e,t){var n=e.byteLength;if(n!==t.byteLength)return!1;for(;n--&&e.getInt8(n)===t.getInt8(n););return -1===n},s=function(e,t){var n=e.length;if(n!==t.length)return!1;for(;n--&&e[n]===t[n];);return -1===n},l=Object.prototype.hasOwnProperty,c=Object.keys,u=function(e,t,n){var r,i=0;for(r in e)if(l.call(e,r)&&(i++,!l.call(t,r)||!n(e[r],t[r])))return!1;return c(t).length===i},d=Object.prototype,p=d.valueOf,v=d.toString,f=function(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n=e.constructor;return n===t.constructor&&(n===Array?r(e,t,f):n===Date?e.getTime()===t.getTime():n===RegExp?e.source===t.source&&e.flags===t.flags:n===Map&&e instanceof Map&&t instanceof Map?i(e,t,f):n===Set&&e instanceof Set&&t instanceof Set?o(e,t):n===DataView?a(e,t):n===ArrayBuffer?s(new Uint8Array(e),new Uint8Array(t)):ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)?s(e,t):e.valueOf!==p?e.valueOf()===t.valueOf():e.toString!==v?e.toString()===t.toString():u(e,t,f))}return e!=e&&t!=t},m=n(429996);let h=(e,t,n)=>{let r=(0,m.useRef)();return void 0!==r.current&&n(r.current,t)||(r.current=t),(0,m.useMemo)(e,r.current)};function _(e,t){return h(e,t,f)}},804879:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},605670:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(772340);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,r.Z)(i.key),i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},772340:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(601457);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},75175:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var r=n(429996);let i=e=>r.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.8826 2.82032C17.136 2.45857 17.634 2.37076 17.9959 2.62403C18.3577 2.87736 18.4462 3.37542 18.1931 3.73731L12.9383 11.2412L15.4285 14.7979C17.0379 14.1046 18.9669 14.6107 20.0115 16.1025L20.1179 16.2637C21.1789 17.9553 20.7387 20.2009 19.0847 21.3594L18.9226 21.4668C17.2854 22.494 15.1295 22.1129 13.9422 20.5879L13.8269 20.4326C12.795 18.9588 12.9628 17.0033 14.1258 15.7266L11.9617 12.6358L9.83083 15.6797C11.0327 16.955 11.2173 18.9407 10.1726 20.4326L10.0574 20.5879C8.83065 22.1634 6.57009 22.5173 4.91579 21.3594L4.75954 21.2432C3.23439 20.056 2.85465 17.9 3.88161 16.2627L3.98806 16.1016C5.02007 14.6279 6.91503 14.1173 8.51247 14.7734L10.9851 11.2412L5.75661 3.77345C5.50328 3.41166 5.59034 2.9127 5.95192 2.65919C6.31371 2.40586 6.81267 2.49389 7.06618 2.85548L11.9617 9.84669L16.8826 2.82032ZM8.32888 16.4854C7.34494 15.7964 5.98756 16.0356 5.2986 17.0195C4.61044 18.0033 4.84938 19.36 5.83278 20.0488C6.81642 20.7373 8.17304 20.4978 8.86208 19.5147C9.55087 18.531 9.31221 17.1745 8.32888 16.4854ZM18.7009 17.0195C18.0121 16.0359 16.6555 15.7961 15.6717 16.4844C14.6878 17.1733 14.4486 18.5307 15.1375 19.5147C15.8266 20.4979 17.1831 20.7375 18.1668 20.0488C19.1501 19.36 19.3891 18.0033 18.7009 17.0195Z",fill:"currentColor"}))},528732:function(e,t,n){"use strict";n.d(t,{q:function(){return i}});var r=n(429996);let i=e=>r.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},r.createElement("circle",{cx:12,cy:12,r:11,fill:"#FF3B30"}),r.createElement("path",{d:"M16.3746 15.2402C16.6869 15.5526 16.687 16.0589 16.3746 16.3713C16.0622 16.6837 15.556 16.6836 15.2435 16.3713L7.62555 8.75332C7.31313 8.4409 7.31313 7.93464 7.62555 7.62222C7.93797 7.3098 8.44423 7.3098 8.75664 7.62222L16.3746 15.2402Z",fill:"white"}),r.createElement("path",{d:"M8.75659 16.3779C8.44416 16.6902 7.93787 16.6903 7.6255 16.3779C7.31313 16.0655 7.31323 15.5592 7.6255 15.2468L15.2435 7.62885C15.5559 7.31643 16.0621 7.31643 16.3746 7.62885C16.687 7.94127 16.687 8.44752 16.3746 8.75994L8.75659 16.3779Z",fill:"white"}))},693891:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(429996);let i=e=>r.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},r.createElement("circle",{cx:12,cy:12,r:11,fill:"#0065FD"}),r.createElement("path",{d:"M10.0752 10.5938C10.0752 10.1519 10.4332 9.79395 10.875 9.79395H12C12.0277 9.79395 12.0551 9.79511 12.082 9.79785C12.4584 9.83615 12.7576 10.1354 12.7959 10.5117C12.7986 10.5387 12.7998 10.5661 12.7998 10.5938V15.9502H13.5C13.9418 15.9502 14.2998 16.3082 14.2998 16.75C14.2998 17.1918 13.9418 17.5498 13.5 17.5498H10.5C10.0582 17.5498 9.7002 17.1918 9.7002 16.75C9.70021 16.3082 10.0582 15.9502 10.5 15.9502H11.2002V11.3936H10.875C10.4332 11.3936 10.0752 11.0356 10.0752 10.5938Z",fill:"white"}),r.createElement("path",{d:"M11 7.6123C11.0001 7.06011 11.4478 6.61231 12 6.6123C12.5522 6.6123 12.9999 7.0601 13 7.6123C13 8.1646 12.5523 8.6123 12 8.6123C11.4477 8.6123 11 8.16459 11 7.6123Z",fill:"white"}))},26030:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(429996);let i=e=>r.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},r.createElement("circle",{cx:12,cy:12,r:11,fill:"#34C759"}),r.createElement("path",{d:"M16.0676 8.95441C16.3775 8.63986 16.8836 8.636 17.1984 8.94562C17.5133 9.25561 17.5172 9.76262 17.2072 10.0775L11.927 15.4398C11.3785 15.9966 10.4802 15.9967 9.93184 15.4398L6.79219 12.2513C6.48221 11.9365 6.48615 11.4294 6.80098 11.1194C7.11581 10.8095 7.62283 10.8134 7.93281 11.1282L10.9299 14.1722L16.0676 8.95441Z",fill:"white"}))},357912:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(429996);let i=e=>r.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},r.createElement("circle",{cx:12,cy:12,r:11,fill:"#FF9500"}),r.createElement("path",{d:"M12 15.2861C11.3126 15.2862 10.7549 15.8438 10.7549 16.5312C10.7549 17.2187 11.3126 17.7763 12 17.7764C12.6874 17.7763 13.2451 17.2187 13.2451 16.5312C13.2451 15.8438 12.6874 15.2862 12 15.2861ZM12 6.32812C11.2914 6.32823 10.7262 6.93984 10.7568 7.67285L10.9834 13.085C11.007 13.6489 11.4549 14.0937 12 14.0938C12.5451 14.0937 12.994 13.6488 13.0176 13.085L13.2441 7.67285C13.2748 6.93985 12.7086 6.32823 12 6.32812Z",fill:"white"}))},225779:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(477404),i=n(510722),o=n(348344),a=n(268059),s=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},l=n(836423),c=n(633769),u=function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var l=(0,c.Z)(i[r],o[r]);if(l){if(r>=s)return l;return l*("desc"==n[r]?-1:1)}}return e.index-t.index},d=n(129144),p=n(511451),v=function(e,t,n){t=t.length?(0,r.Z)(t,function(e){return(0,p.Z)(e)?function(t){return(0,i.Z)(t,1===e.length?e[0]:e)}:e}):[d.Z];var c=-1;return t=(0,r.Z)(t,(0,l.Z)(o.Z)),s((0,a.Z)(e,function(e,n,i){return{criteria:(0,r.Z)(t,function(t){return t(e)}),index:++c,value:e}}),function(e,t){return u(e,t,n)})}},633769:function(e,t,n){"use strict";var r=n(633906);t.Z=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,o=e==e,a=(0,r.Z)(e),s=void 0!==t,l=null===t,c=t==t,u=(0,r.Z)(t);if(!l&&!u&&!a&&e>t||a&&s&&c&&!l&&!u||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!u&&e<t||u&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!c)return -1}return 0}},483767:function(e,t,n){"use strict";var r=n(234401),i=n(173581),o=n(634145),a=Math.ceil,s=Math.max;t.Z=function(e,t,n){t=(n?(0,i.Z)(e,t,n):void 0===t)?1:s((0,o.Z)(t),0);var l=null==e?0:e.length;if(!l||t<1)return[];for(var c=0,u=0,d=Array(a(l/t));c<l;)d[u++]=(0,r.Z)(e,c,c+=t);return d}},87506:function(e,t,n){"use strict";var r=n(408065),i=n(491383),o=Object.prototype.hasOwnProperty,a=(0,i.Z)(function(e,t,n){o.call(e,n)?e[n].push(t):(0,r.Z)(e,n,[t])});t.Z=a},672697:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=Math.max,i=Math.min,o=n(101823),a=n(637825),s=function(e,t,n){var s,l,c;return t=(0,o.Z)(t),void 0===n?(n=t,t=0):n=(0,o.Z)(n),(s=e=(0,a.Z)(e))>=i(l=t,c=n)&&s<r(l,c)}},69345:function(e,t,n){"use strict";var r=n(349504),i=n(210428),o=n(129144);t.Z=function(e){return e&&e.length?(0,r.Z)(e,o.Z,i.Z):void 0}},420111:function(e,t,n){"use strict";var r=(0,n(491383).Z)(function(e,t,n){e[+!n].push(t)},function(){return[[],[]]});t.Z=r},87548:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=Math.ceil,i=Math.max,o=function(e,t,n,o){for(var a=-1,s=i(r((t-e)/(n||1)),0),l=Array(s);s--;)l[o?s:++a]=e,e+=n;return l},a=n(173581),s=n(101823),l=function(e,t,n){return n&&"number"!=typeof n&&(0,a.Z)(e,t,n)&&(t=n=void 0),e=(0,s.Z)(e),void 0===t?(t=e,e=0):t=(0,s.Z)(t),n=void 0===n?e<t?1:-1:(0,s.Z)(n),o(e,t,n,void 0)}},453093:function(e,t,n){"use strict";var r=n(883566),i=n(225779),o=n(219291),a=n(173581),s=(0,o.Z)(function(e,t){if(null==e)return[];var n=t.length;return n>1&&(0,a.Z)(e,t[0],t[1])?t=[]:n>2&&(0,a.Z)(t[0],t[1],t[2])&&(t=[t[0]]),(0,i.Z)(e,(0,r.Z)(t,1),[])});t.Z=s}}]);
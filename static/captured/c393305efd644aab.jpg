"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["21015"],{569648:function(e,t,i){i.d(t,{default:function(){return a}}),i(713738);var n=i(430261),l=i(345660),a=(0,n.IconFactory)((0,l.jsx)(e=>(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:(0,l.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M12.793 3.793a1 1 0 0 1 1.414 0l7.5 7.5a1 1 0 0 1 0 1.414l-7.5 7.5a1 1 0 0 1-1.414-1.414L18.586 13H3a1 1 0 1 1 0-2h15.586l-5.793-5.793a1 1 0 0 1 0-1.414",clipRule:"evenodd"})}),{}))},965765:function(e,t,i){i.d(t,{default:function(){return a}}),i(713738);var n=i(430261),l=i(345660),a=(0,n.IconFactory)((0,l.jsx)(e=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:[(0,l.jsx)("path",{fill:"currentColor",d:"M8.34 7.798a.75.75 0 1 0-.232 1.482l7.552 1.18a.75.75 0 1 0 .232-1.482zM7.483 12.2a.75.75 0 0 1 .857-.626l7.552 1.18a.75.75 0 0 1-.232 1.482l-7.552-1.18a.75.75 0 0 1-.625-.857"}),(0,l.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M19.473 2.668A2 2 0 0 0 17.21.685l-6.774.897-.02.002-5.02.768A2 2 0 0 0 3.5 4.35v15.198a2 2 0 0 0 1.68 1.974l13 2.103a2 2 0 0 0 2.32-1.974V6.452a2 2 0 0 0-1.027-1.747zm-2 1.592V2.668l-5.414.716zM5.5 4.36l.03-.005L18.5 6.452v15.199l-13-2.104z",clipRule:"evenodd"})]}),{}))},91545:function(e,t,i){i.d(t,{Button:function(){return r}}),i(713738);var n=i(812650),l=i.n(n),a=i(424785),s=i(345660);let r=e=>{let{theme:t="flow",type:i="secondary",className:n,...r}=e;return(0,s.jsx)(a.default,{...r,type:i,className:l()({"flow-YmqlgT":"flow"===t},n),children:e.children})}},659541:function(e,t,i){i.d(t,{FileNotReadFinishTip:function(){return p}});var n=i(569648),l=i(965765),a=i(812650),s=i.n(a),r=i(526390),o=i(563342),u=i(629006),d=i(637319),c=i(83990),v=i(992528),f=i(91545),m=i(915299),g=i(345660);let p=e=>{var t;let{className:i,message:a}=e,p=(null==a?void 0:a.conversation_id)||"",h=(0,r.getMessageReadStatus)({message:a}),y=(0,u.isSuggestNewThread)(a),_=(0,d.findLastMessageByReplyIdSelector)(c.useMessageStore.getState(),a.conversation_id||"",a.reply_id||""),x=(0,u.isNestedMessage)(_)&&(0,o.extractAttachments)(_).length>1,w=null!==(t=null==h?void 0:h.readRatio)&&void 0!==t?t:0,N=null==a?void 0:a.message_id,M=(0,m.useTranslateFn)(),{toChatPage:S}=(0,v.useChat)();return(0,g.jsxs)("div",{className:s()("bg-[var(--s-color-bg-trans)] text-s-color-text-secondary rounded-10 max-w-400",i,y?"p-16":"pl-8 pr-12 py-12"),children:[(0,g.jsxs)("div",{className:s()("flex gap-4",y?"items-start":"items-center"),children:[(0,g.jsx)(l.default,{className:"text-16 p-3"}),(0,g.jsx)("p",{className:"s-font-small",children:M(x?"multi_files_exceed_limit":"single_file_exceed_limit",{postProcess:"sprintf",sprintf:[M("brandName_doubao"),`${w}%`]})})]}),y&&(0,g.jsx)("div",{className:"mt-12",children:(0,g.jsx)(f.Button,{type:"tertiary",className:"rounded-full",onClick:()=>{N&&(null==S||S({payload:{operation:{newChat:{messageLink:{messageId:N,isLocalMessage:!1},conversationId:p}},reportParams:{scene:"new_chat_continue"}}}))},children:(0,g.jsxs)("div",{className:"flex items-center gap-4 s-font-xs-strong",children:[M("skill_copliotreading_new_chat"),(0,g.jsx)(n.default,{className:"text-12 p-2"})]})})})]})}},771969:function(e,t,i){i.r(t),i.d(t,{NotReadFinishTipReceiveMessageBoxTopPlugin:function(){return o}});var n=i(456184),l=i(659541),a=i(345660);function s(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let r=e=>{let{message:t}=e;return(0,a.jsx)(l.FileNotReadFinishTip,{message:t,className:"mb-20"})};class o{constructor(){s(this,"pluginIdentifier",n.notReadFinishTipReceiveMessageBoTopluginIdentifier),s(this,"Content",r)}}},563342:function(e,t,i){i.d(t,{extractAttachments:function(){return c},extractPrompt:function(){return u},extractViewOnlyAttachments:function(){return v},isDataAnalysisAttachmentFile:function(){return m},isImageExtractAttachment:function(){return f}});var n=i(218679),l=i(101874),a=i(778816),s=i(722038),r=i(165482),o=i(949932);let u=e=>{var t;let i=null==e?void 0:null===(t=e.content_obj)||void 0===t?void 0:t.text;return i&&(0,n.default)(i)?i:void 0},d={[l.AttachmentEnum.File]:a.NestedMessageEntityType.File,[l.AttachmentEnum.Image]:a.NestedMessageEntityType.Image,[l.AttachmentEnum.VlmImage]:a.NestedMessageEntityType.Image,[l.AttachmentEnum.Unknown]:a.NestedMessageEntityType.Unknown,[l.AttachmentEnum.Directory]:a.NestedMessageEntityType.Directory},c=e=>{var t;return(null==e?void 0:e.attachments)&&(null===(t=e.attachments)||void 0===t?void 0:t.filter(e=>!!e.key).map(e=>{var t,i,n,a,r;let o="audio"===e.type,u="video"===e.type;return{fileType:d[e.type||l.AttachmentEnum.File],asrMediaType:o?"audio":u?"video":void 0,identifier:null!==(t=e.identifier)&&void 0!==t?t:"",fileParseStatus:null!==(i=e.file_parse_state)&&void 0!==i?i:s.ParseState.ParseState_Processing,fileNameReviewStatus:null!==(n=e.file_review_state)&&void 0!==n?n:s.ReviewState.ReviewState_Processing,fileName:null!==(a=e.name)&&void 0!==a?a:"",fileKey:e.key,size:null!==(r=e.size)&&void 0!==r?r:0,imageUrl:e.url,localKey:e.local_key,option:e.option}}))||[]},v=e=>{var t,i,n,a;if(!(null==e?void 0:null===(t=e.ext)||void 0===t?void 0:t.source_file))return[];try{return null===(n=(0,r.parseJSON)(null==e?void 0:null===(a=e.ext)||void 0===a?void 0:a.source_file,[]))||void 0===n?void 0:null===(i=n.filter(e=>e.key))||void 0===i?void 0:i.map(e=>{var t,i;return{fileType:d[e.file_type||l.AttachmentEnum.File],identifier:"",fileParseStatus:1,fileNameReviewStatus:0,fileName:null!==(t=e.file_name)&&void 0!==t?t:"",fileKey:"",size:null!==(i=e.size)&&void 0!==i?i:0,imageUrl:"",localKey:""}})}catch(e){return[]}},f=e=>e.fileType===a.NestedMessageEntityType.Image,m=e=>{let t=(0,o.getFileExt)(e);return(0,o.isExcel)(t)||(0,o.isCsv)(t)}},526390:function(e,t,i){i.d(t,{getMessageReadStatus:function(){return o},getReplyMessageFileStatus:function(){return u}});var n=i(344417),l=i(629006),a=i(637319),s=i(83990);let r=e=>{let t=e=>(0,n.default)(e)?Math.max(0,Math.min(100,e)):e;try{var i,l,a,s;let n=(null==e?void 0:null===(i=e.content_obj)||void 0===i?void 0:i.read_status)||JSON.parse(null!==(s=null==e?void 0:null===(l=e.ext)||void 0===l?void 0:l.read_status)&&void 0!==s?s:"");return{suggestNewThread:null==n?void 0:n.suggest_new_thread,readRatio:t(null==n?void 0:n.read_ratio),files:null===(a=(null==n?void 0:n.Files)||(null==n?void 0:n.files))||void 0===a?void 0:a.map(e=>({key:null==e?void 0:e.uri,parseSuccess:null==e?void 0:e.parse_success,charCount:null==e?void 0:e.char_count,readRatio:t(null==e?void 0:e.read_ratio)}))}}catch(e){return}},o=e=>{let{message:t}=e;return r(t)},u=e=>{let{messageId:t,conversationId:i}=e,n=(0,a.findLastMessageByMatchEqualIdSelector)(s.useMessageStore.getState(),i,t),o=(0,l.isMessageHitRisk)(n);return{...r(n),isHitRisk:o}}}}]);